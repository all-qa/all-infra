;
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/store-1.3.1.js' */
(function(){var l={},h=window,k=h.document,c="localStorage",n="globalStorage",d="__storejs__",g;l.disabled=false;l.set=function(e,o){};l.get=function(e){};l.remove=function(e){};l.clear=function(){};l.transact=function(e,o){var p=l.get(e);if(typeof p=="undefined"){p={}}o(p);l.set(e,p)};l.serialize=function(e){return JSON.stringify(e)};l.deserialize=function(e){if(typeof e!="string"){return undefined}return JSON.parse(e)};function b(){try{return(c in h&&h[c])}catch(e){return false}}function m(){try{return(n in h&&h[n]&&h[n][h.location.hostname])}catch(e){return false}}if(b()){g=h[c];l.set=function(e,o){if(o===undefined){return l.remove(e)}g.setItem(e,l.serialize(o))};l.get=function(e){return l.deserialize(g.getItem(e))};l.remove=function(e){g.removeItem(e)};l.clear=function(){g.clear()}}else{if(m()){g=h[n][h.location.hostname];l.set=function(e,o){if(o===undefined){return l.remove(e)}g[e]=l.serialize(o)};l.get=function(e){return l.deserialize(g[e]&&g[e].value)};l.remove=function(e){delete g[e]};l.clear=function(){for(var e in g){delete g[e]}}}else{if(k.documentElement.addBehavior){var j,f;try{f=new ActiveXObject("htmlfile");f.open();f.write('<script>document.w=window<\/script><iframe src="/favicon.ico"></frame>');f.close();j=f.w.frames[0].document;g=j.createElement("div")}catch(i){g=k.createElement("div");j=k.body}function a(e){return function(){var p=Array.prototype.slice.call(arguments,0);p.unshift(g);j.appendChild(g);g.addBehavior("#default#userData");g.load(c);var o=e.apply(l,p);j.removeChild(g);return o}}l.set=a(function(p,e,o){if(o===undefined){return l.remove(e)}p.setAttribute(e,l.serialize(o));p.save(c)});l.get=a(function(o,e){return l.deserialize(o.getAttribute(e))});l.remove=a(function(o,e){o.removeAttribute(e);o.save(c)});l.clear=a(function(q){var o=q.XMLDocument.documentElement.attributes;q.load(c);for(var p=0,e;e=o[p];p++){q.removeAttribute(e.name)}q.save(c)})}}}try{l.set(d,d);if(l.get(d)!=d){l.disabled=true}l.remove(d)}catch(i){l.disabled=true}if(typeof module!="undefined"){module.exports=l}else{if(typeof define==="function"&&define.amd){define(l)}else{this.store=l}}})();;
;
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/page-visibility.js' */
define("atlassian/analytics/page-visibility",function(){var a=(document.hidden!==undefined);var b={supported:a,isHidden:function(){return a?document.hidden:false}};return b});;
;
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/user-activity-xhr-header.js' */
define("atlassian/analytics/user-activity-xhr-header",["atlassian/analytics/page-visibility"],function(c){var e="x-atlassian-mau-ignore";var d=XMLHttpRequest.prototype.send;var a=window.fetch;var b=false;return{install:function(){if(!b&&c.supported){XMLHttpRequest.prototype.send=function(){if(c.isHidden()){this.setRequestHeader(e,c.isHidden())}d.apply(this,arguments)};if(a){window.fetch=function(f,i){var g=i||{};var h=g.headers;if(c.isHidden()){g.headers=(h)?new Headers(h):new Headers();g.headers.append(e,c.isHidden())}return a.call(this,f,g)}}b=true}},uninstall:function(){if(b){XMLHttpRequest.prototype.send=d;if(a){window.fetch=a}}b=false}}});require("atlassian/analytics/user-activity-xhr-header").install();;
;
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/atlassian-analytics.js' */
(function(d){var q=AJS.$.ajax;var l="atlassian-analytics";var j=typeof AJS.contextPath==="function"?AJS.contextPath():"";var p=null;var m=null;var g=null;var r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(z){var y=Math.random()*16|0,x=z=="x"?y:(y&3|8);return x.toString(16)});var t=function(){var x="unknown";if(document.body.id=="jira"){x="jira"}else{if(document.body.id=="com-atlassian-confluence"){x="confluence"}}m=l+"."+x;g=m+".lock"};var f=function(){if(store.get(g)){return false}store.set(g,r);return(store.get(g)===r)};var u=function(){store.set(g,null)};var i=function(){var y=[],A,B,x,z;if(AJS.EventQueue.length==0){return}y=store.get(m)||y;for(x=0,z=AJS.EventQueue.length;x<z;++x){B=AJS.EventQueue[x];if(B.name){A={name:B.name,properties:B.properties,time:B.time||0};y.push(A)}}AJS.EventQueue.length=0;store.set(m,y)};var v=0;var a=function(x){return Math.min(5000*Math.pow(2,x),5*60*1000)};var e=0;var h=function(){var A;function y(){setTimeout(h,a(v=0))}function x(){setTimeout(h,a(++v))}if(!f()){++e;if(e<20){return y()}}else{e=0}try{i();A=store.get(m);if(!A||!A.length){return y()}store.remove(m);if(!o(A)){return y()}var B=new Date().getTime();for(var z=0;z<A.length;z++){if(A[z].time>0){A[z].timeDelta=A[z].time-B}else{A[z].timeDelta=z-A.length}delete A[z].time}p=q({type:"POST",url:j+"/rest/analytics/1.0/publish/bulk",data:JSON.stringify(A),contentType:"application/json",dataType:"json"});p.fail(function(){AJS.EventQueue.concat(A);i();x()});p.done(function(){y()})}finally{u()}};var o=function(z){for(var y=z.length-1;y>=0;y--){var B="";var A=z[y];var x=A.properties;if(typeof A.name==="undefined"){B="you must provide a name for the event."}else{if(typeof x!=="undefined"&&x!==null){if(x.constructor!==Object){B="properties must be an object with key value pairs."}else{b(x)}}}if(B!==""){AJS.log("WARN: Invalid analytics event detected and ignored, "+B+"\nEvent: "+JSON.stringify(A));z.splice(y,1)}}return z.length};var b=function(z){for(var y in z){if(z.hasOwnProperty(y)){var x=z[y];if(c(x)&&k(x)){}else{if(c(x)&&x.toString){z[y]=x.toString()}else{z[y]=""}}}}};function c(x){return typeof x!=="undefined"&&x!==null}function k(x){return typeof x==="number"||typeof x==="string"||typeof x==="boolean"}var n=function(){if(p&&!(p.state()==="resolved"||p.state()==="rejected")){p.abort()}};AJS.EventQueue=AJS.EventQueue||[];var s=Array.prototype.push;AJS.EventQueue.push=function(x){x.time=new Date().getTime();s.call(AJS.EventQueue,x)};AJS.toInit(function(){t();setTimeout(h,500);w()});d(window).unload(function(){n();i()});AJS.Analytics={triggerPrivacyPolicySafeEvent:function(x,y){AJS.log("WARN: 'triggerPrivacyPolicySafeEvent' has been deprecated");AJS.EventQueue.push({name:x,properties:y})}};AJS.bind("analytics",function(x,y){AJS.EventQueue.push({name:y.name,properties:y.data})});AJS.bind("analyticsEvent",function(x,y){AJS.EventQueue.push({name:y.name,properties:y.data})});var w=function(){if(window.location.pathname.indexOf("/secure/admin/ViewApplicationProperties")>-1){AJS.$("[data-property-id='analytics-enabled']").remove()}else{if(window.location.pathname.indexOf("/secure/admin/EditApplicationProperties")>-1){var y=AJS.$(":contains(Enable Atlassian analytics)");if(y.size()>0){var x=y[y.size()-2];if(x){x.remove()}}}}}}(AJS.$));;
;
/* module-key = 'com.atlassian.analytics.analytics-client:policy-update-init', location = 'js/policy-update-init.js' */
AJS.toInit(function(){var a=WRM.data.claim("com.atlassian.analytics.analytics-client:policy-update-init.policy-update-data-provider");if(a){WRM.require("wrc!com.atlassian.analytics.analytics-client:policy-update")}});;
;
/* module-key = 'com.atlassian.analytics.analytics-client:programmatic-analytics-init', location = 'js/programmatic-analytics-init.js' */
(function(){var a=WRM.data.claim("com.atlassian.analytics.analytics-client:programmatic-analytics-init.programmatic-analytics-data-provider");if(a){WRM.require("wrc!com.atlassian.analytics.analytics-client:programmatic-analytics")}}());;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:application-header-administration-cog-resource', location = 'header/cog.js' */
var NavLinks=(function(a){a.ApplicationHeader=function(b){b.Cog=(function(){var c=function(){var d=AJS.$("#system-admin-menu-content");if(d.length>0){return d}var e=AJS.$("#admin-menu-link-content");if(e.length>0){return e}return AJS.$("#bamboo\\.global\\.header-admin\\.menu")};return{getDropdown:c}}());return b}(a.ApplicationHeader||{});return a}(NavLinks||{}));;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:administration-shortcuts-resources', location = 'adminshortcuts/adminshortcuts.soy' */
// This file was automatically generated from adminshortcuts.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace navlinks.templates.adminshortcuts.
 */

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.adminshortcuts == 'undefined') { navlinks.templates.adminshortcuts = {}; }


navlinks.templates.adminshortcuts.section = function(opt_data, opt_ignored) {
  var param5 = '<ul class="aui-list-truncate">';
  var linkList7 = opt_data.links;
  var linkListLen7 = linkList7.length;
  for (var linkIndex7 = 0; linkIndex7 < linkListLen7; linkIndex7++) {
    var linkData7 = linkList7[linkIndex7];
    param5 += '<li><a href="' + soy.$$escapeHtml(linkData7.link) + '">' + soy.$$escapeHtml(linkData7.label) + '</a></li>';
  }
  param5 += '</ul>';
  var output = '' + aui.dropdown2.section({id: 'nl-remote-admin-section', label: 'Other applications', content: param5});
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.adminshortcuts.section.soyTemplateName = 'navlinks.templates.adminshortcuts.section';
}
;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:administration-shortcuts-resources', location = 'adminshortcuts/adminnavlinks.js' */
var NavLinks=(function(a){a.AdminShortcuts=(function(){var c=function(){return AJS.$.ajax({url:AJS.contextPath()+"/rest/menu/latest/admin",cache:false,dataType:"json"})};var b=function(){AJS.$("#nl-remote-admin-section").on("click","a",function(){NL.trackEvent("remoteAdminItemSelected",NL.getCurrentApplication(),$(this).attr("href"))})};return{render:function(){c().done(function(e){e=_.reject(e,function(f){return f.local===true});if(e.length){var d=navlinks.templates.adminshortcuts.section({links:e});a.ApplicationHeader.Cog.getDropdown().append(d);b()}})}}}());return a}(NavLinks||{}));;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:administration-shortcuts', location = 'adminshortcuts/adminshortcuts-cdn.js' */
AJS.toInit(function(){if(AJS.DarkFeatures&&AJS.DarkFeatures.isEnabled("rotp.admin.shortcuts")){NavLinks.AdminShortcuts.render()}});;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:atlassian-ui-popup-display-controller', location = 'popups/DisplayController.js' */
AJS.Popups=AJS.Popups||{};AJS.Popups.DisplayController=function(){var c=[];var a=false;var b=false;AJS.toInit(function(){setTimeout(function(){AJS.Popups.DisplayController.render()},0)});return{request:function(d){c.push(d);if(a&&b===false){this.render()}},render:function(){c.sort(function(e,d){return e.weight-d.weight});a=true;if(c.length!==0){b=true;c[0].show()}}}}();;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-used-by-lozenge', location = 'global/templates/used-by-lozenge.soy' */
// This file was automatically generated from used-by-lozenge.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.ProjectAdmin.UsedBy.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.ProjectAdmin == 'undefined') { JIRA.Templates.ProjectAdmin = {}; }
if (typeof JIRA.Templates.ProjectAdmin.UsedBy == 'undefined') { JIRA.Templates.ProjectAdmin.UsedBy = {}; }


JIRA.Templates.ProjectAdmin.UsedBy.usedBy = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + ((opt_data.sharedBy) ? JIRA.Templates.ProjectAdmin.UsedBy.generateUsedBy(soy.$$augmentMap(opt_data, {projects: opt_data.sharedBy.sharedWithProjects ? opt_data.sharedBy.sharedWithProjects : opt_data.sharedBy.projects, hiddenProjectsCount: opt_data.sharedBy.hiddenProjectsCount, projectsTitle: opt_data.projectsTitle ? opt_data.projectsTitle : opt_data.title})) : JIRA.Templates.ProjectAdmin.UsedBy.generateUsedBy(soy.$$augmentMap(opt_data, {projectsTitle: opt_data.projectsTitle ? opt_data.projectsTitle : opt_data.title})));
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectAdmin.UsedBy.usedBy.soyTemplateName = 'JIRA.Templates.ProjectAdmin.UsedBy.usedBy';
}


JIRA.Templates.ProjectAdmin.UsedBy.generateUsedBy = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '';
  var totalProjectsCount__soy13 = (opt_data.projects ? opt_data.projects.length : 0) + (opt_data.hiddenProjectsCount ? opt_data.hiddenProjectsCount : 0);
  var issueTypesCount__soy14 = opt_data.issueTypes ? opt_data.issueTypes.length : 0;
  var minRequiredProjects__soy15 = opt_data.minProjects ? opt_data.minProjects : 1;
  var minRequiredIssueTypes__soy16 = opt_data.minIssueTypes ? opt_data.minIssueTypes : 1;
  var anyProjects__soy17 = totalProjectsCount__soy13 >= minRequiredProjects__soy15;
  var anyIssueTypes__soy18 = issueTypesCount__soy14 >= minRequiredIssueTypes__soy16;
  var localkey__soy19 = '' + ((opt_data.key) ? soy.$$escapeHtml(opt_data.key) : (opt_data.currentIssueTypeId) ? soy.$$escapeHtml(opt_data.currentIssueTypeId) : (opt_data.currentProjectId) ? soy.$$escapeHtml(opt_data.currentProjectId) : soy.$$escapeHtml(Math.floor(Math.random() * 10000)));
  if (anyProjects__soy17 || anyIssueTypes__soy18) {
    var issueTypeId__soy31 = 'project-config-' + localkey__soy19 + '-issuetypes-shared';
    var projectId__soy32 = 'project-config-' + localkey__soy19 + '-projects-shared';
    var issueTypesPopupLink__soy33 = '' + JIRA.Templates.ProjectAdmin.UsedBy.issueTypePopupLink({id: issueTypeId__soy31, issueTypesCount: issueTypesCount__soy14});
    var projectsPopupLink__soy37 = '' + JIRA.Templates.ProjectAdmin.UsedBy.projectPopupLink({id: projectId__soy32, totalProjectsCount: totalProjectsCount__soy13});
    output += '<span class="aui-lozenge used-by"><em>' + ((anyIssueTypes__soy18 && anyProjects__soy17) ? soy.$$filterNoAutoescape(AJS.format('Used by {0} in {1}',issueTypesPopupLink__soy33,projectsPopupLink__soy37)) : (anyIssueTypes__soy18) ? soy.$$filterNoAutoescape(AJS.format('Used by {0}',issueTypesPopupLink__soy33)) : soy.$$filterNoAutoescape(AJS.format('Used by {0}',projectsPopupLink__soy37))) + '<used-by-analytics /></em></span>' + ((anyIssueTypes__soy18) ? JIRA.Templates.ProjectAdmin.UsedBy.issueTypePopup(soy.$$augmentMap(opt_data, {id: issueTypeId__soy31, title: opt_data.issueTypesTitle})) : '') + ((anyProjects__soy17) ? JIRA.Templates.ProjectAdmin.UsedBy.projectPopup(soy.$$augmentMap(opt_data, {id: projectId__soy32, title: opt_data.projectsTitle})) : '');
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectAdmin.UsedBy.generateUsedBy.soyTemplateName = 'JIRA.Templates.ProjectAdmin.UsedBy.generateUsedBy';
}


JIRA.Templates.ProjectAdmin.UsedBy.issueTypePopupLink = function(opt_data, opt_ignored) {
  return '<a href="#' + soy.$$escapeHtml(opt_data.id) + '" data-aui-trigger aria-controls="' + soy.$$escapeHtml(opt_data.id) + '" class="shared-issuetypes-trigger shared-items-trigger">' + soy.$$escapeHtml(AJS.format('{0,choice,1#{0} issue type|1\x3c{0} issue types}',opt_data.issueTypesCount)) + '</a>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectAdmin.UsedBy.issueTypePopupLink.soyTemplateName = 'JIRA.Templates.ProjectAdmin.UsedBy.issueTypePopupLink';
}


JIRA.Templates.ProjectAdmin.UsedBy.projectPopupLink = function(opt_data, opt_ignored) {
  return '<a href="#' + soy.$$escapeHtml(opt_data.id) + '" data-aui-trigger aria-controls="' + soy.$$escapeHtml(opt_data.id) + '" class="shared-projects-trigger shared-items-trigger">' + soy.$$escapeHtml(AJS.format('{0,choice,1#{0} project|1\x3c{0} projects}',opt_data.totalProjectsCount)) + '</a>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectAdmin.UsedBy.projectPopupLink.soyTemplateName = 'JIRA.Templates.ProjectAdmin.UsedBy.projectPopupLink';
}


JIRA.Templates.ProjectAdmin.UsedBy.projectPopup = function(opt_data, opt_ignored) {
  var output = '';
  var projectListCap__soy80 = 15;
  var shouldTrimProjectsList__soy81 = opt_data.projects.length > projectListCap__soy80;
  output += '<aui-inline-dialog ' + ((opt_data.id) ? 'id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="shared-items-target shared-projects-target" alignment="bottom center"><div class="shared-items-content">';
  if (opt_data.projects) {
    output += '<h3>' + soy.$$escapeHtml(opt_data.title ? opt_data.title : AJS.format('{0,choice,1#Project|1\x3cProjects}:',opt_data.projects.length)) + '</h3><ul class="shared-items-list shared-projects-list">';
    var iLimit94 = shouldTrimProjectsList__soy81 ? projectListCap__soy80 : opt_data.projects.length;
    for (var i94 = 0; i94 < iLimit94; i94++) {
      var project__soy95 = opt_data.projects[i94];
      output += JIRA.Templates.ProjectAdmin.UsedBy.projectEntry(soy.$$augmentMap(project__soy95, {isCurrent: opt_data.currentProjectId && project__soy95.id == opt_data.currentProjectId}));
    }
    output += '</ul>';
  }
  var notDisplayedProjects__soy99 = (opt_data.hiddenProjectsCount ? opt_data.hiddenProjectsCount : 0) + (shouldTrimProjectsList__soy81 ? opt_data.projects.length - projectListCap__soy80 : 0);
  output += ((notDisplayedProjects__soy99 > 0) ? '<p>' + ((opt_data.projects.length > 0) ? soy.$$escapeHtml(AJS.format('and {0} hidden {0,choice,1#project|1\x3cprojects}',notDisplayedProjects__soy99)) : soy.$$escapeHtml(AJS.format('{0} hidden {0,choice,1#project|1\x3cprojects}',notDisplayedProjects__soy99))) + '</p>' : '') + '</div></aui-inline-dialog>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectAdmin.UsedBy.projectPopup.soyTemplateName = 'JIRA.Templates.ProjectAdmin.UsedBy.projectPopup';
}


JIRA.Templates.ProjectAdmin.UsedBy.projectEntry = function(opt_data, opt_ignored) {
  return '<li>' + ((! opt_data.archived) ? '<a class="shared-item-name shared-project-name' + ((opt_data.isCurrent) ? ' current' : '') + '" href="' + soy.$$escapeHtml("") + '/plugins/servlet/project-config/' + soy.$$escapeHtml(opt_data.key) + '" data-project-id="' + soy.$$escapeHtml(opt_data.id) + '" data-project-key="' + soy.$$escapeHtml(opt_data.key) + '" data-project-name="' + soy.$$escapeHtml(opt_data.name) + '" >' : '<span class="shared-item-name shared-project-name' + ((opt_data.isCurrent) ? ' current' : '') + '" data-project-id="' + soy.$$escapeHtml(opt_data.id) + '" data-project-key="' + soy.$$escapeHtml(opt_data.key) + '" data-project-name="' + soy.$$escapeHtml(opt_data.name) + '" >') + '<img class="shared-project-icon" width="16" height="16" alt="" src="' + soy.$$escapeHtml("") + '/secure/projectavatar?size=small&amp;pid=' + soy.$$escapeHtml(opt_data.id) + ((opt_data.avatar) ? '&amp;avatarId=' + soy.$$escapeHtml(opt_data.avatar.id) : '') + '" />' + soy.$$escapeHtml(opt_data.name) + ((opt_data.archived) ? ' (' + soy.$$escapeHtml('archived') + ') </span>' : '</a>') + '</li>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectAdmin.UsedBy.projectEntry.soyTemplateName = 'JIRA.Templates.ProjectAdmin.UsedBy.projectEntry';
}


JIRA.Templates.ProjectAdmin.UsedBy.issueTypePopup = function(opt_data, opt_ignored) {
  var output = '<aui-inline-dialog ' + ((opt_data.id) ? 'id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="shared-items-target shared-issuetypes-target" alignment="bottom center"><div class="shared-items-content"><h3>' + soy.$$escapeHtml(opt_data.title ? opt_data.title : AJS.format('{0,choice,1#Issue type|1\x3cIssue types}:',opt_data.issueTypes.length)) + '</h3><ul class="shared-items-list shared-issuetypes-list">';
  var issueTypeList169 = opt_data.issueTypes;
  var issueTypeListLen169 = issueTypeList169.length;
  for (var issueTypeIndex169 = 0; issueTypeIndex169 < issueTypeListLen169; issueTypeIndex169++) {
    var issueTypeData169 = issueTypeList169[issueTypeIndex169];
    var current__soy170 = opt_data.currentIssueTypeId && issueTypeData169.id == opt_data.currentIssueTypeId;
    output += '<li><a class="shared-item-name shared-issuetype-name' + ((current__soy170) ? ' current' : '') + '" href="' + soy.$$escapeHtml(issueTypeData169.url ? issueTypeData169.url : '#') + '" title="' + soy.$$escapeHtml(issueTypeData169.name) + '" data-issue-type-id="' + soy.$$escapeHtml(issueTypeData169.id) + '" data-issue-type-name="' + soy.$$escapeHtml(issueTypeData169.name) + '" >' + soy.$$escapeHtml(issueTypeData169.name) + '</a></li>';
  }
  output += '</ul></div></aui-inline-dialog>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectAdmin.UsedBy.issueTypePopup.soyTemplateName = 'JIRA.Templates.ProjectAdmin.UsedBy.issueTypePopup';
}
;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-used-by-lozenge', location = 'global/js/used-by-lozenge.js' */
require(["jira/skate","jira/analytics","jquery"],function(e,t,i){"use strict";function n(e,i){e&&e.on("click.usedByAnalytics",function(){t.send({name:"jira.projectconfig.usedby.used",data:{linkType:i}})})}e("used-by-analytics",{type:e.type.ELEMENT,attached:function(e){var t=e.getLozengeRoot();n(t.find(".shared-issuetypes-trigger"),"issuetypes"),n(t.find(".shared-projects-trigger"),"project")},detached:function(e){e.getLozengeRoot().find(".shared-items-trigger").off("click.usedByAnalytics")},prototype:{getLozengeRoot:function(){return i(this).parent()}}})});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-used-by-lozenge', location = 'global/templates/used-by-lozenge-template-wrapper.js' */
define("jira-project-config/templates/usedby",[],function(){"use strict";return window.JIRA.Templates.ProjectAdmin.UsedBy}),AJS.namespace("JIRA.Templates.ProjectAdmin.UsedBy",null,require("jira-project-config/templates/usedby"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:custom-fields-admin', location = 'customfields/js/util/IssuesApi.js' */
define("jira-project-config/issues/api",function(){return window.JIRA&&window.JIRA.Issues&&window.JIRA.Issues.Api});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:custom-fields-admin', location = 'customfields/js/init-admin-dialog.js' */
require(["wrm/require","jquery"],function(i,e){var n=function(e){i(["wrc!com.atlassian.jira.jira-project-config-plugin.custom-fields-impl"],function(){require(["jira-project-config/custom-fields/api"],e)})};e(document).on("click","#add_custom_fields",function(i){i.preventDefault(),n(function(i){i.addCustomFieldViaAdminPage()})})});;
;
/* module-key = 'com.atlassian.jira.plugins.workflow.sharing.jira-workflow-sharing-plugin:jwsp-analytics', location = '/js/jwsp-analytics.js' */
AJS.namespace("JIRA.WSP.Analytics");JIRA.WSP.Analytics.sendEvent=function(a,b){if(AJS.EventQueue){AJS.EventQueue.push({name:"jwsp."+a,properties:b||{}})}};;
;
/* module-key = 'jira.webresources:init-on-dcl', location = '/static/util/init-on-dcl.js' */
define("jira/util/init-on-dcl",[],function(){"use strict";return AJS.toInit});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/jquery/plugins/avataror/avataror.js' */
jQuery.fn.avataror=function(i){var e=jQuery,t=e(document);this.each(function(){var r=e(this),a=r.find("img").attr("src");r.css({"-moz-border-radius":"10px","-webkit-border-radius":"10px"}),r.html("<p>Loading?</p>");var g={previewSize:48};g.preview=e("<div/>").addClass("avataror-preview").css({border:"solid 1px #000",float:"left",height:g.previewSize+"px",overflow:"hidden",width:g.previewSize+"px",position:"relative",top:"-9999em",left:"-9999em"}),g.preview.prependTo(i.previewElement),g.img=e('<img alt="Avatar Source"/>'),g.img.load(function(){g.image=e("<div/>").css({background:"url('"+a+"') no-repeat",clear:"left",position:"relative"}),g.marker=e("<div/>").css({cursor:"move",position:"relative"}),g.dash=e("<div/>"),g.shadow=e("<div/>"),g.dash.add(g.shadow).css({cursor:"move",opacity:.5,left:0,top:0,position:"absolute"}),g.image.append(g.shadow).append(g.dash).append(g.marker),r.append(g.image),g.marker.html("<div></div><div></div><div></div><div></div>"),e("div",g.marker).each(function(i){var t=e(this);t.css({background:"#000",border:"solid 1px #fff",width:"10px",height:"10px",position:"absolute","font-size":"1px"}),t.css(["left","right","right","left"][i],"-6px"),t.css(["top","top","bottom","bottom"][i],"-6px"),t.css("cursor",["nw-resize","ne-resize","se-resize","sw-resize"][i]),t.mousedown(function(e){e.preventDefault(),e.stopPropagation(),g.dragging={x:e.pageX,y:e.pageY,ax:g.x,ay:g.y,w:g.width,h:g.height,i:i+1},g.shadow.hide()})}),g.marker.add(g.image).mousedown(function(i){i.preventDefault(),g.dragging={x:i.pageX,y:i.pageY,ax:g.x,ay:g.y,w:g.width,h:g.height},g.shadow.hide()}),t.mouseup(function(i){g.handleMouseUp(i)}),t.mousemove(function(i){g.dragging&&(g.handleMouseMove(i.pageX,i.pageY),i.preventDefault())}),g.imgwidth=g.img[0].naturalWidth,g.imgheight=g.img[0].naturalHeight,g.x=parseInt(e("#avatar-offsetX").val()),g.y=parseInt(e("#avatar-offsetY").val()),g.width=parseInt(e("#avatar-width").val()),g.height=g.width,g.image.css({width:g.imgwidth+"px",height:g.imgheight+"px"}),g.setMarker(),r.css({width:g.imgwidth+"px"}),g.preview.css({position:"static"}),e("p",r).remove(),r.trigger("AvatarImageLoaded"),g.adjustPreview()}),g.img.attr("src",a),g.preview.append(g.img),g.setMarker=function(){g.marker.css("border","dashed 1px #fff"),g.dash.css("border","solid 1px #000"),g.shadow.css("border","solid 1px #000"),g.marker.add(this.dash).css("left",this.x-1+"px"),g.marker.add(g.dash).css("top",g.y-1+"px"),g.shadow.css("border-left-width",g.x+"px"),g.shadow.css("border-right-width",g.imgwidth-g.x-g.width+"px"),g.shadow.css("border-top-width",g.y+"px"),g.shadow.css("border-bottom-width",g.imgheight-g.y-g.height+"px"),g.shadow.css("width",g.width+"px"),g.shadow.css("height",g.height+"px"),g.marker.add(g.dash).css("width",g.width+"px"),g.marker.add(g.dash).css("height",g.height+"px")},g.adjustPreview=function(){g.img.attr("width",g.imgwidth*g.previewSize/g.width),g.img.attr("height",g.imgheight*g.previewSize/g.height),g.img.css("margin-left","-"+g.x*g.previewSize/g.width+"px"),g.img.css("margin-top","-"+g.y*g.previewSize/g.height+"px"),g.preview.select()},g.handleMouseMove=function(i,e){if(g.dragging.nextExec=g.dragging.nextExec||0,0!=g.dragging.nextExec)return void g.dragging.nextExec--;g.dragging.nextExec=3;var t=i-g.dragging.x,r=e-g.dragging.y;if(this.dragging.i){(0,g.resizeHandlers[this.dragging.i-1])(t,r)}else g.x=g.dragging.ax+t,g.y=g.dragging.ay+r,g.x+g.width>g.imgwidth&&(g.x=g.imgwidth-g.width),g.y+g.height>g.imgheight&&(g.y=g.imgheight-g.height),g.x<0&&(g.x=0),g.y<0&&(g.y=0);g.setMarker(),g.adjustPreview()},g.handleMouseUp=function(i){e("#avatar-offsetX").val(g.x),e("#avatar-offsetY").val(g.y),e("#avatar-width").val(g.width),g.dragging=null,g.shadow.show()},g.originX=function(){return g.dragging.ax},g.originY=function(){return g.dragging.ay},g.originBottomX=function(){return g.dragging.ax+g.dragging.w},g.originBottomY=function(){return g.dragging.ay+g.dragging.h},g.originNw=function(){return{x:g.originX(),y:g.originY()}},g.originNe=function(){return{x:g.originBottomX(),y:g.originY()}},g.originSe=function(){return{x:g.originBottomX(),y:g.originBottomY()}},g.originSw=function(){return{x:g.originX(),y:g.originBottomY()}},g.nwHandler=function(i,e){var t=g.originSe(),r={x:g.originX()+i,y:g.originY()+e},a=Math.abs(r.x-t.x),o=Math.abs(r.y-t.y),n=Math.min(a,o);n<20&&(n=20),t.x-n<0&&(n=t.x),t.y-n<0&&(n=t.y),g.x=t.x-n,g.y=t.y-n,g.width=g.height=n},g.neHandler=function(i,e){var t=g.originSw(),r={x:g.originBottomX()+i,y:g.originY()+e},a=Math.abs(r.x-t.x),o=Math.abs(r.y-t.y),n=Math.min(a,o);n<20&&(n=20),t.x+n>g.imgwidth&&(n=g.imgwidth-t.x),t.y-n<0&&(n=t.y),g.y=t.y-n,g.width=g.height=n},g.seHandler=function(i,e){var t=g.originNw(),r={x:g.originBottomX()+i,y:g.originBottomY()+e},a=Math.abs(r.x-t.x),o=Math.abs(r.y-t.y),n=Math.min(a,o);n<20&&(n=20),t.x+n>g.imgwidth&&(n=g.imgwidth-t.x),t.y+n>g.imgheight&&(n=g.imgheight-t.y),g.width=g.height=n},g.swHandler=function(i,e){var t=g.originNe(),r={x:g.originX()+i,y:g.originBottomY()+e},a=Math.abs(r.x-t.x),o=Math.abs(r.y-t.y),n=Math.min(a,o);n<20&&(n=20),t.x-n<0&&(n=t.x),t.y+n>g.imgheight&&(n=g.imgheight-t.y),g.x=t.x-n,g.width=g.height=n},g.resizeHandlers=[g.nwHandler,g.neHandler,g.seHandler,g.swHandler]})};;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/Avatar.js' */
var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};define("jira/ajs/avatarpicker/avatar",["jira/lib/class"],function(t){return t.extend({init:function(t){this._id=t.id,this._isSystemAvatar=t.isSystemAvatar,this._isSelected=t.isSelected,this._urls=t.urls},setUnSelected:function(){this._isSelected=!1},setSelected:function(){this._isSelected=!0},isSelected:function(){return!!this._isSelected},isSystemAvatar:function(){return this._isSystemAvatar},getId:function(){return this._id},getUrl:function(t){return this._urls[t]},toJSON:function(){return{id:this._id,isSystemAvatar:this._isSystemAvatar,isSelected:this._isSelected,urls:this._urls}}})}),define("jira/ajs/avatarpicker/avatar-factory",["jira/ajs/avatarpicker/avatar","exports"],function(t,e){e.createCustomAvatar=function(e){return e.isSystemAvatar=!1,new t(e)},e.createSystemAvatar=function(e){return e.isSystemAvatar=!0,new t(e)}}),define("jira/ajs/avatarpicker/avatar/sizes",["exports","jquery"],function(t,e){t.getSizeObjectFromName=function(i){if("object"===(void 0===i?"undefined":_typeof(i)))return i;"string"==typeof i&&e.trim(i);return t.LARGE.param===i?t.LARGE:t.MEDIUM.param===i?t.MEDIUM:t.SMALL.param===i?t.SMALL:"xsmall"===i?t.SMALL:t.LARGE},t.LARGE={param:"large",height:48,width:48},t.MEDIUM={param:"medium",width:32,height:32},t.SMALL={param:"small",width:16,height:16}});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/AvatarManager.js' */
define("jira/ajs/avatarpicker/avatar-manager",["jira/util/formatter","jira/lib/class","wrm/context-path","jquery"],function(t,a,r,e){"use strict";var s=r();return a.extend({init:function(t){this.store=t.store,this.ownerId=t.ownerId,this.username=t.username,this.anonymousAvatarId=t.anonymousAvatarId,this.avatarSrcBaseUrl=t.avatarSrcBaseUrl},selectAvatar:function(t,a){return this.store.selectAvatar(t,a)},getById:function(t){return this.store.getById(t)},destroy:function(t,a){this.store.destroy(t,a)},update:function(t,a){this.store.update(t,a)},add:function(t,a){this.store._add(t,a)},getAllSystemAvatars:function(){return this.store.getAllSystemAvatars()},getAllCustomAvatars:function(){return this.store.getAllCustomAvatars()},getSelectedAvatar:function(){return this.store.getSelectedAvatar()},getAllAvatars:function(){return this.store.getAllAvatars()},getAllAvatarsRenderData:function(t){var a,r=this,e=this.getAllAvatars(),s={system:[],custom:[]};for(a=0;a<e.system.length;a++)s.system.push(r.getAvatarRenderData(e.system[a],t));for(a=0;a<e.custom.length;a++)s.custom.push(r.getAvatarRenderData(e.custom[a],t));return s},getAvatarRenderData:function(t,a){var r=t.toJSON();return r.src=this.getAvatarSrc(t,a),r.width=a.width,r.height=a.height,r},refreshStore:function(t){this.store.refresh(t)},getAvatarSrc:function(a,r){return this.store.isTempAvatar(a)?s+"/secure/temporaryavatar?"+e.param({cropped:!0,magic:(new Date).getTime(),size:r.param}):a.getUrl(t.format("{0}x{1}",r.height,r.width))},createTemporaryAvatar:function(t,a){this.store.createTemporaryAvatar(t,a)},createAvatarFromTemporary:function(t,a){this.store.createAvatarFromTemporary(t,a)},getAnonymousAvatarId:function(){return this.anonymousAvatarId}})}),define("jira/ajs/avatarpicker/avatar-manager-factory",["jira/ajs/avatarpicker/avatar-store","jira/ajs/avatarpicker/avatar-manager","wrm/context-path","exports"],function(t,a,r,e){"use strict";var s=r();e.createUniversalAvatarManager=function(r){var e,n="",o="",i="",v="";if(r.projectId){var u=s+"/rest/api/latest/universal_avatar/type/"+r.avatarType+"/owner/"+r.projectId;e=u;var c=u+"/avatar";n=null,o=u+"/temp",i=c,v=c}else e=s+"/rest/api/latest/avatar/project/system",o=s+"/rest/api/latest/avatar/project/temporary",i=s+"/rest/api/latest/avatar/project/temporaryCrop";var l=new t({restQueryUrl:e,restUpdateUrl:n,restCreateTempUrl:o,restUpdateTempUrl:i,restSingleAvatarUrl:v,defaultAvatarId:r.defaultAvatarId});return new a({store:l,ownerId:r.projectId,avatarSrcBaseUrl:s+"/secure/projectavatar"})},e.createProjectAvatarManager=function(t){return t.avatarType="project",e.createUniversalAvatarManager(t)},e.createUserAvatarManager=function(r){var e=s+"/rest/api/latest/user",n=new t({restQueryUrl:e+"/avatars",restUpdateUrl:e+"/avatar",restCreateTempUrl:e+"/avatar/temporary",restUpdateTempUrl:e+"/avatar",restSingleAvatarUrl:e+"/avatar",restParams:{username:r.username},defaultAvatarId:r.defaultAvatarId});return new a({store:n,username:r.username,avatarSrcBaseUrl:s+"/secure/useravatar"})}});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/AvatarStore.js' */
define("jira/ajs/avatarpicker/avatar-store",["jira/util/urls","jira/util/formatter","jira/ajs/avatarpicker/avatar-util","jira/ajs/avatarpicker/avatar-factory","jira/ajs/ajax/smart-ajax","jira/lib/class","jquery"],function(t,e,r,a,s,i,o){return i.extend({TEMP_ID:"TEMP",init:function(e){if(!e.restQueryUrl)throw new Error("JIRA.AvatarStore.init: You must specify [restQueryUrl], The rest url for querying avatars (see class description)");if(!e.restCreateTempUrl)throw new Error("JIRA.AvatarStore.init: You must specify [restCreateTempUrl], The rest url for creating a temporary avatar (see class description)");if(!e.restUpdateTempUrl)throw new Error("JIRA.AvatarStore.init: You must specify [restUpdateTempUrl], The rest url for updating a temporary avatar (see class description)");if(!e.defaultAvatarId)throw new Error("JIRA.AvatarStore.init: You must specify [defaultAvatarId] to the contructor so the store knows what to select if you delete the selected one");this.restQueryUrl=e.restQueryUrl,this.restUpdateUrl=e.restUpdateUrl,this.restCreateTempUrl=e.restCreateTempUrl,this.restUpdateTempUrl=e.restUpdateTempUrl,this.restSingleAvatarUrl=e.restSingleAvatarUrl,this.restParams=e.restParams||{},this.restParams.atl_token=t.atl_token(),this.defaultAvatarId=e.defaultAvatarId,this.avatars={system:[],custom:[]}},_buildCompleteUrl:function(t){var r=t;if(this.restParams){var a="";for(var s in this.restParams)a+=e.format("&{0}={1}",encodeURIComponent(s),encodeURIComponent(this.restParams[s]));r+="?"+a.substr(1)}return r},getById:function(t){var e;return o.each(this.avatars.system,function(r,a){if(this.getId()===t)return e=a,!1}),e||o.each(this.avatars.custom,function(r,a){if(this.getId()===t)return e=a,!1}),e},isTempAvatar:function(t){return t.getId()===this.TEMP_ID},_selectAvatar:function(t){var e=this.getSelectedAvatar();e&&e.setUnSelected(),t.setSelected()},selectAvatar:function(t,e){var r=this;if(!t)throw new Error("JIRA.AvatarStore.selectAvatar: Cannot select Avatar that does not exist");this.restUpdateUrl?s.makeRequest({type:"PUT",contentType:"application/json",dataType:"json",url:this._buildCompleteUrl(this.restUpdateUrl),data:JSON.stringify(t.toJSON()),success:function(){r._selectAvatar(t),e.success&&e.success.call(this,t)},error:e.error}):(r._selectAvatar(t),e.success&&e.success.call(this,t))},_destory:function(t){var e=o.inArray(t,this.avatars.custom);if(-1===e)throw new Error("JIRA.AvatarStore._destroy: Cannot remove avatar ["+t.getId()+"], it might be a system avatar (readonly) or does not exist.");this.avatars.custom.splice(e,1)},destroy:function(t,e){var r=this;if(e=e||{},!t)throw new Error("JIRA.AvatarStore.destroy: Cannot delete Avatar that does not exist");s.makeRequest({type:"DELETE",url:this.getRestUrlForAvatar(t),success:function(){r._destory(t),t.isSelected()?r.selectAvatar(r.getById(r.defaultAvatarId),e):e.success&&e.success.apply(this,arguments)},error:e.error})},getSelectedAvatar:function(){for(var t=0;t<this.avatars.custom.length;t++)if(this.avatars.custom[t].isSelected())return this.avatars.custom[t];for(t=0;t<this.avatars.system.length;t++)if(this.avatars.system[t].isSelected())return this.avatars.system[t]},_update:function(t){var e=this;if(!this.getById(t.getId()))throw new Error("JIRA.AvatarStore._update: Cannot update avatar ["+t.getId()+"], it might be a system avatar (readonly) or does not exist.");o.each(this.avatars.custom,function(r){this.getId()===t.getId()&&(e.avatars.custom[r]=t)})},update:function(t,e){var r=this;e=e||{},s.makeRequest({type:"PUT",url:this.getRestUrlForAvatar(t),error:e.error,success:function(){r._update(t),e.success&&e.success.apply(this,arguments)}})},_add:function(t){t.isSystemAvatar()?this.avatars.system.push(t):this.avatars.custom.push(t)},createAvatarFromTemporary:function(t,e){var r=this;e=e||{},this.restUpdateTempUrl&&s.makeRequest({type:"POST",url:this._buildCompleteUrl(this.restUpdateTempUrl),data:JSON.stringify(t),contentType:"application/json",dataType:"json",success:function(t){t||(t={id:r.TEMP_ID,isSelected:!0});var s=a.createCustomAvatar(t);r._add(s),e.success&&e.success.call(this,t)},error:e.error})},createTemporaryAvatar:function(t,e){e=o.extend(!0,{},e,{params:this.restParams}),r.uploadTemporaryAvatar(this.restCreateTempUrl,t,e)},_refresh:function(t){var e=this;e.avatars.system=[],e.avatars.custom=[],t.system&&o.each(t.system,function(t,r){e.avatars.system.push(a.createSystemAvatar(r))}),t.custom&&o.each(t.custom,function(t,r){e.avatars.custom.push(a.createCustomAvatar(r))})},refresh:function(t){var e=this,r=this.getById(e.TEMP_ID);t=t||{},s.makeRequest({url:this._buildCompleteUrl(this.restQueryUrl),error:t.error,success:function(a){e._refresh(a),r&&e._add(r),t.success&&t.success.apply(this,arguments)}})},getAllAvatars:function(){return this.avatars},getAllSystemAvatars:function(){return this.avatars.system},getAllCustomAvatars:function(){return this.avatars.custom},getRestUrlForAvatar:function(t){return this._buildCompleteUrl(this.restSingleAvatarUrl+"/"+t.getId())}})});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/AvatarUtil.js' */
define("jira/ajs/avatarpicker/avatar-util",["jira/util/urls","jira/util/logger","jira/attachment/inline-attach","jquery"],function(e,r,a,n){var t={uploadUsingIframeRemoting:function(o,s,i){i=i||{};var l=s.val(),c=new a.Form(new a.FileInput(s,!1)),u=c.addStaticProgress(l),d=c.cloneFileInput();c.fileSelector.clear();var g=new a.Timer(function(){!this.cancelled&&u.show()},this),f=new a.FormUpload({$input:d,url:o,params:n.extend({},i.params,{filename:l,atl_token:e.atl_token()}),scope:this,before:function(){!this.cancelled&&u.start()},success:function(e,r){e.errorMessages&&e.errorMessages.length?c.addErrorWithFileName(e.errorMessages[0],l,t.getErrorTarget(c)):i.success&&i.success(e,r)},error:function(e){r.log(e),this.cancelled||(e.indexOf("SecurityTokenMissing")>=0?c.addError(a.Text.tr("upload.xsrf.timeout",l),t.getErrorTarget(c)):c.addError(a.Text.tr("upload.error.unknown",l),t.getErrorTarget(c)))},after:function(){g.cancel(),u.remove(),this.cancelled||c.enable()}});u.onCancel(function(){f.abort()}),f.upload()},uploadUsingFileApi:function(r,o,s){var i,l,c=o[0].files[0],u=new a.Form(new a.FileInput(o,!1)),d=u.addProgress(c);s=s||{},i=new a.Timer(function(){d.show()}),l=new a.AjaxUpload({file:c,params:n.extend({},s.params,{filename:c.name,size:c.size,atl_token:e.atl_token()}),scope:this,url:r,before:function(){o.hide(),d.start()},progress:function(e){d.progress.$progress.parent().parent().show(),d.update(e)},success:function(e,r){e.errorMessages&&e.errorMessages.length?u.addErrorWithFileName(e.errorMessages[0],c.name,t.getErrorTarget(u)):201===r&&s.success(e,r)},error:function(e,r){r<0?u.addError(e,t.getErrorTarget(u)):u.addError(a.Text.tr("upload.error.unknown",c.name),t.getErrorTarget(u)),s.error&&s.error(e,r)},after:function(){i.cancel(),d.finish().remove(),o.val("").show()}}),l.upload(),d.onCancel(function(){l.abort()})},getErrorTarget:function(e){return{$element:e.$form.find(".error")}},uploadTemporaryAvatar:function(e,r,n){a.AjaxPresenter.isSupported(r)?this.uploadUsingFileApi(e,r,n):this.uploadUsingIframeRemoting(e,r,n)}};return t});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/AvatarPicker.js' */
define("jira/ajs/avatarpicker/avatar-picker",["jira/util/logger","jira/util/formatter","jira/util/strings","jira/ajs/avatarpicker/avatar-picker/image-editor","jira/ajs/ajax/smart-ajax","jira/dialog/dialog","jira/ajs/control","aui/message","jquery"],function(a,e,t,r,i,n,c,o,d){"use strict";return c.extend({init:function(a){this.avatarManager=a.avatarManager,this.avatarRenderer=a.avatarRenderer,this.imageEditor=a.imageEditor,this.size=a.size,this.selectCallback=a.select,this.cropperDialog=null,this.initialSelection=a.initialSelection},render:function(a){var e=this;this.avatarManager.refreshStore({success:function(){e.cropperDialog instanceof n&&(e.cropperDialog.hide(),delete e.cropperDialog),e.element=d('<div id="jira-avatar-picker" />'),e.element.html(JIRA.Templates.AvatarPicker.picker({avatars:e.avatarManager.getAllAvatarsRenderData(e.size)})),e._assignEvents("selectAvatar",e.element.find(".jira-avatar button")),e._assignEvents("deleteAvatar",e.element.find(".jira-delete-avatar")),e._assignEvents("uploader",e.element.find("#jira-avatar-uploader")),void 0!==e.initialSelection&&e.getAvatarElById(e.initialSelection).addClass("jira-selected-avatar"),a(e.element)},error:function(t,r,i,n){e.appendErrorContent(e.element,n),a(e.element)}})},appendErrorContent:function(a,e){try{var r=JSON.parse(e.data);r&&r.errorMessages?d.each(r.errorMessages,function(e,r){o.error(a,{body:t.escapeHtml(r),closeable:!1,shadowed:!1})}):a.append(i.buildDialogErrorContent(e,!0))}catch(t){a.append(i.buildDialogErrorContent(e,!0))}},uploadTempAvatar:function(e){var t=this;this.avatarManager.createTemporaryAvatar(e,{success:function(a){a.id?t.render(function(){t.selectAvatar(a.id)}):(e.val(""),t.cropperDialog=new n({id:"project-avatar-cropper",width:560,content:function(e){function r(){var a=i.find("input[type=submit]"),e=d("<span class='icon throbber loading'></span>");return a.attr("aria-disabled","true").attr("disabled",""),a.before(e),function(){e.remove(),a.removeAttr("aria-disabled").removeAttr("disabled")}}var i=t.imageEditor.render(a);t.imageEditor.edit({confirm:function(a){var e=r();t.avatarManager.createAvatarFromTemporary(a,{success:function(a){t.render(function(){t.selectAvatar(a.id)})},error:e})}}),i.find(".cancel").click(function(){t.cropperDialog.hide()}),e(i)}}),t.cropperDialog.bind("dialogContentReady",function(){d(t).trigger(r.LOADED)}),t.cropperDialog.bind("Dialog.hide",function(){d(t).trigger(r.DISMISSED)}),t.cropperDialog.show())},error:function(){a.log(arguments)}})},getAvatarElById:function(a){return this.element.find(".jira-avatar[data-id='"+a+"']")},selectAvatar:function(a){var e=this.avatarManager.getById(a),t=this;this.avatarManager.selectAvatar(this.avatarManager.getById(a),{error:function(){},success:function(){t.getAvatarElById(a).remove(),t.selectCallback&&t.selectCallback.call(t,e,t.avatarManager.getAvatarSrc(e,t.size))}})},deleteAvatar:function(a){var t=this;confirm("Are you sure you want to delete avatar?")&&this.avatarManager.destroy(this.avatarManager.getById(a),{error:function(){},success:function(){var e=t.avatarManager.getSelectedAvatar(),r=t.getAvatarElById(a);r.fadeOut(function(){r.remove()}),e.getId()!==a&&(t.getAvatarElById(e.getId()).addClass("jira-selected-avatar"),t.selectCallback.call(t,e,t.avatarManager.getAvatarSrc(e,t.size),!0))}})},_events:{uploader:{change:function(a,e){this.uploadTempAvatar(e)}},deleteAvatar:{click:function(a,e){this.deleteAvatar(e.attr("data-id"))}},selectAvatar:{click:function(a,e){"select-avatar-button"===e[0].id&&this.selectAvatar(e.attr("data-id"))}}}})}),define("jira/ajs/avatarpicker/avatar-picker/image-editor",["jira/ajs/control","jquery"],function(a,e){"use strict";var t=a.extend({render:function(a){return this.element=e('<div id="avatar-picker-image-editor"/>').html(JIRA.Templates.AvatarPicker.imageEditor(a)),this.element},edit:function(a){var t=this,r=this.element.find(".avataror");a=a||{},r.unbind(),r.bind("AvatarImageLoaded",function(){a.ready&&a.ready()}),r.find("img").load(function(){r.avataror({previewElement:t.element.find(".jira-avatar-cropper-header"),parent:t.element})}),this.element.find("#avataror").submit(function(t){t.preventDefault(),a.confirm&&a.confirm({cropperOffsetX:e("#avatar-offsetX").val(),cropperOffsetY:e("#avatar-offsetY").val(),cropperWidth:e("#avatar-width").val()})}).find(".cancel").click(function(e){e.preventDefault(),a.cancel&&a.cancel()})}});return t.LOADED="imageEditorLoaded",t.DISMISSED="imageEditorDismissed",t}),define("jira/ajs/avatarpicker/avatar-picker-factory",["jira/util/browser","jira/util/formatter","jira/ajs/avatarpicker/avatar-picker","jira/ajs/avatarpicker/avatar-picker/image-editor","jira/ajs/avatarpicker/avatar-manager-factory","jira/ajs/avatarpicker/avatar/sizes","jira/dialog/form-dialog","wrm/context-path","wrm/data","jquery","exports"],function(a,e,t,r,i,n,c,o,d,l,s){"use strict";s.createUniversalAvatarPicker=function(a){return new t({avatarManager:i.createUniversalAvatarManager({projectKey:a.projectKey,projectId:a.projectId,defaultAvatarId:a.defaultAvatarId,avatarType:a.avatarType}),initialSelection:a.initialSelection,imageEditor:new r,size:a.hasOwnProperty("avatarSize")?a.avatarSize:n.LARGE,select:a.select})},s.createProjectAvatarPicker=function(a){return new t({avatarManager:i.createProjectAvatarManager({projectKey:a.projectKey,projectId:a.projectId,defaultAvatarId:a.defaultAvatarId}),imageEditor:new r,size:n.LARGE,select:a.select})},s.createUserAvatarPicker=function(a){return new t({avatarManager:i.createUserAvatarManager({username:a.username,defaultAvatarId:a.defaultAvatarId}),imageEditor:new r,size:n.LARGE,select:a.select})},s.createUniversalAvatarPickerDialog=function(a){var t=a.initialSelection||a.defaultAvatarId,r=new c({trigger:a.trigger,id:"project-avatar-picker",width:600,stacked:!0,content:function(i){var n,c;c=l('<div id="projectavatar-content-wrapper"/>'),l("<h2 />").text(a.title||"Select a Project Avatar").appendTo(c),n=s.createUniversalAvatarPicker({projectKey:a.projectKey,projectId:a.projectId,defaultAvatarId:a.defaultAvatarId,initialSelection:t,avatarType:a.avatarType,avatarSize:a.avatarSize,select:function(e,i,n){t=String(e.getId()),a.select&&a.select.apply(this,arguments),n||r.hide()}}),n.render(function(a){c.append(a),i(c)})}});r._focusFirstField=function(){}},s.createProjectAvatarPickerDialog=function(a){var t=new c({trigger:a.trigger,id:"project-avatar-picker",width:600,stacked:!0,content:function(r){var i,n;n=l('<div id="projectavatar-content-wrapper"/>'),l("<h2 />").text("Select a Project Avatar").appendTo(n),i=s.createProjectAvatarPicker({projectKey:a.projectKey,projectId:a.projectId,defaultAvatarId:a.defaultAvatarId,select:function(e,r,i){a.select&&a.select.apply(this,arguments),i||t.hide()}}),i.render(function(a){n.append(a),r(n)})}});t._focusFirstField=function(){}};var v=d.claim("jira.core:avatar-picker-data.data");s.createUserAvatarPickerDialog=function(t){if(v&&v.isEnabled)return void l(t.trigger).click(function(e){var t=o()+v.url;t+=(t.indexOf("?")>-1?"&":"?")+"continue="+encodeURIComponent(window.location.href),e.preventDefault(),e.stopPropagation(),a.reloadViaWindowLocation(t)});var r=new c({trigger:t.trigger,id:"user-avatar-picker",width:600,stacked:!0,content:function(a){var i,n;n=l('<div id="useravatar-content-wrapper"/>'),l("<h2 />").text("Select a User Avatar").appendTo(n),i=s.createUserAvatarPicker({username:t.username,defaultAvatarId:t.defaultAvatarId,select:function(a,e,i){t.select&&t.select.apply(this,arguments),l(".avatar-image").attr("src",e),i||r.hide()}}),i.render(function(e){n.append(e),a(n)})}})}});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/GravatarUtil.js' */
define("jira/ajs/avatarpicker/gravatar-util",["jquery","exports"],function(a,r){r.showGravatarHelp=function(r){void 0!==r&&void 0!==r.entry&&(a(".gravatar-signup-text").addClass("hidden"),a(".gravatar-login-text").removeClass("hidden"))},r.displayGravatarHelp=function(){var t=a("#gravatar_json_url");t.length&&a.ajax(t.val(),{dataType:"jsonp",success:r.showGravatarHelp})}});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/initAvatarPicker.js' */
!function(){var a=require("jquery"),r=require("jira/ajs/avatarpicker/avatar/sizes"),e=require("jira/ajs/avatarpicker/avatar-factory"),t=require("jira/ajs/avatarpicker/avatar-manager-factory"),c=require("jira/ajs/avatarpicker/avatar-picker-factory"),A=require("jira/ajs/avatarpicker/gravatar-util");AJS.namespace("JIRA.Avatar",null,require("jira/ajs/avatarpicker/avatar")),AJS.namespace("JIRA.Avatar.createCustomAvatar",null,e.createCustomAvatar),AJS.namespace("JIRA.Avatar.createSystemAvatar",null,e.createSystemAvatar),AJS.namespace("JIRA.Avatar.getSizeObjectFromName",null,r.getSizeObjectFromName),AJS.namespace("JIRA.Avatar.LARGE",null,r.LARGE),AJS.namespace("JIRA.Avatar.MEDIUM",null,r.MEDIUM),AJS.namespace("JIRA.Avatar.SMALL",null,r.SMALL),AJS.namespace("JIRA.AvatarManager",null,require("jira/ajs/avatarpicker/avatar-manager")),AJS.namespace("JIRA.AvatarManager.createUniversalAvatarManager",null,t.createUniversalAvatarManager),AJS.namespace("JIRA.AvatarManager.createProjectAvatarManager",null,t.createProjectAvatarManager),AJS.namespace("JIRA.AvatarManager.createUserAvatarManager",null,t.createUserAvatarManager),AJS.namespace("JIRA.AvatarPicker",null,require("jira/ajs/avatarpicker/avatar-picker")),AJS.namespace("JIRA.AvatarPicker.ImageEditor",null,require("jira/ajs/avatarpicker/avatar-picker/image-editor")),AJS.namespace("JIRA.AvatarPicker.createUniversalAvatarPicker",null,c.createUniversalAvatarPicker),AJS.namespace("JIRA.AvatarPicker.createProjectAvatarPicker",null,c.createProjectAvatarPicker),AJS.namespace("JIRA.AvatarPicker.createUserAvatarPicker",null,c.createUserAvatarPicker),AJS.namespace("JIRA.createUniversalAvatarPickerDialog",null,c.createUniversalAvatarPickerDialog),AJS.namespace("JIRA.createProjectAvatarPickerDialog",null,c.createProjectAvatarPickerDialog),AJS.namespace("JIRA.createUserAvatarPickerDialog",null,c.createUserAvatarPickerDialog),AJS.namespace("JIRA.AvatarStore",null,require("jira/ajs/avatarpicker/avatar-store")),AJS.namespace("JIRA.AvatarUtil",null,require("jira/ajs/avatarpicker/avatar-util")),AJS.namespace("JIRA.GravatarUtil.showGravatarHelp",null,A.showGravatarHelp),a(function(){c.createUserAvatarPickerDialog({trigger:"#user_avatar_image",username:a("#avatar-owner-id").text(),defaultAvatarId:a("#default-avatar-id").text()}),a("#gravatar_help_params")&&A.displayGravatarHelp()})}();;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/AvatarPicker.soy' */
// This file was automatically generated from AvatarPicker.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.AvatarPicker.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.AvatarPicker == 'undefined') { JIRA.Templates.AvatarPicker = {}; }


JIRA.Templates.AvatarPicker.picker = function(opt_data, opt_ignored) {
  var output = '<form class="jira-avatar-upload-form aui top-label" action="#"><input name="id" value="10000" type="hidden" ><input name="pid" value="10000" type="hidden" ><div class="field-group"><label for="jira-avatar-uploader">' + soy.$$escapeHtml('Upload a new avatar') + '</label><input type="file" class="ignore-inline-attach" name="avatar" id="jira-avatar-uploader"/><div class="error"></div></div></form><div class="form-body"><ul class="jira-avatars">';
  var avatarList6 = opt_data.avatars.system;
  var avatarListLen6 = avatarList6.length;
  for (var avatarIndex6 = 0; avatarIndex6 < avatarListLen6; avatarIndex6++) {
    var avatarData6 = avatarList6[avatarIndex6];
    output += '<li class="jira-avatar jira-system-avatar ' + ((avatarData6.isSelected) ? 'jira-selected-avatar' : '') + '" title="Select this Avatar" data-id="' + soy.$$escapeHtml(avatarData6.id) + '"><button id="select-avatar-button" data-id="' + soy.$$escapeHtml(avatarData6.id) + '" class="jira-icon-button" title="' + soy.$$escapeHtml('Select this Avatar') + '"><img id="avatar-' + soy.$$escapeHtml(avatarData6.id) + '" src="' + soy.$$escapeHtml(avatarData6.src) + '" width="' + soy.$$escapeHtml(avatarData6.width) + '" height="' + soy.$$escapeHtml(avatarData6.height) + '" alt="' + soy.$$escapeHtml('Select this Avatar') + '"/></button></li>';
  }
  var avatarList29 = opt_data.avatars.custom;
  var avatarListLen29 = avatarList29.length;
  for (var avatarIndex29 = 0; avatarIndex29 < avatarListLen29; avatarIndex29++) {
    var avatarData29 = avatarList29[avatarIndex29];
    output += '<li class="jira-avatar jira-custom-avatar ' + ((avatarData29.isSelected) ? 'jira-selected-avatar' : '') + '" title="Select this avatar" data-id="' + soy.$$escapeHtml(avatarData29.id) + '"><button id="select-avatar-button" data-id="' + soy.$$escapeHtml(avatarData29.id) + '" class="jira-icon-button" title="' + soy.$$escapeHtml('Select this Avatar') + '"><img id="avatar-' + soy.$$escapeHtml(avatarData29.id) + '" src="' + soy.$$escapeHtml(avatarData29.src) + '" width="' + soy.$$escapeHtml(avatarData29.width) + '" height="' + soy.$$escapeHtml(avatarData29.height) + '" alt="' + soy.$$escapeHtml('Select this Avatar') + '" /></span><button class="jira-delete-avatar jira-icon-button" data-id="' + soy.$$escapeHtml(avatarData29.id) + '" title="' + soy.$$escapeHtml('Delete this Avatar') + '">' + soy.$$escapeHtml('Delete this Avatar') + '</button></li>';
  }
  output += '</ul></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.AvatarPicker.picker.soyTemplateName = 'JIRA.Templates.AvatarPicker.picker';
}


JIRA.Templates.AvatarPicker.imageEditor = function(opt_data, opt_ignored) {
  return '<form id="avataror" class="jira-avatar-cropper-form aui" action="/jira/secure/project/AvatarPicker.jspa"><input type="hidden" name="cropperOffsetX" id="avatar-offsetX" value="' + soy.$$escapeHtml(opt_data.cropperOffsetX) + '"><input type="hidden" name="cropperOffsetY" id="avatar-offsetY" value="' + soy.$$escapeHtml(opt_data.cropperOffsetY) + '"><input type="hidden" name="cropperWidth" id="avatar-width"  value="' + soy.$$escapeHtml(opt_data.cropperWidth) + '"><div class="jira-avatar-cropper-header"><p>' + soy.$$escapeHtml('Please select which part of the uploaded image you wish to use as the avatar.') + '</p></div><div class="form-body"><div class="avataror"><img src="' + soy.$$escapeHtml(opt_data.url) + '" height="300" /></div></div><div class="form-footer buttons-container"><div class="buttons"><input type="submit" class="aui-button aui-button-primary" value="' + soy.$$escapeHtml('Confirm') + '"><a class="aui-button aui-button-link cancel" href="#">' + soy.$$escapeHtml('Cancel') + '</a></div></div></form>';
};
if (goog.DEBUG) {
  JIRA.Templates.AvatarPicker.imageEditor.soyTemplateName = 'JIRA.Templates.AvatarPicker.imageEditor';
}
;
;
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/userPickerUtil.js' */
define("jira/field/user-picker-util",["jira/ajs/list/item-descriptor","jira/ajs/list/group-descriptor","jquery"],function(e,i,r){return{formatResponse:function(t){var a=[];return r(t).each(function(t,l){var s=new i({weight:t,label:l.footer});r(l.users).each(function(){s.addItem(new e({value:this.name,label:this.displayName,html:this.html,icon:this.avatarUrl,allowDuplicate:!1,highlighted:!0,userKey:this.key}))}),a.push(s)}),a}}}),AJS.namespace("JIRA.UserPickerUtil",null,require("jira/field/user-picker-util"));;
;
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/initSingleUserPickers.js' */
define("jira/field/init-single-user-pickers",["jquery","wrm/context-path","jira/ajs/select/single-select","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/field/user-picker-util","jira/util/formatter"],function(e,t,i,r,a,s,n,u){"use strict";function o(t){e(".js-default-user-picker",t).each(function(){var t=e(this);if(!t.data("aui-ss")){var r={showAvatar:!0},a=t.data("inputValue");new i({element:t,submitInputVal:!0,showDropdownButton:!!t.data("show-dropdown-button"),errorMessage:u.format("There is no user \'\'{0}\'\'.","'{0}'"),ajaxOptions:{url:l+"/rest/api/2/user/picker",query:!0,data:r,formatResponse:n.formatResponse},inputText:a})}})}var l=t();s.bind(a.NEW_CONTENT_ADDED,function(e,t,i){i!==r.panelRefreshed&&o(t)})});;
;
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/NoBrowseUserNamePicker.js' */
define("jira/field/no-browser-user-name-picker",["require"],function(e){"use strict";var t=e("jquery"),r=e("jira/ajs/list/item-descriptor"),i=e("jira/ajs/select/multi-select"),a=e("jira/util/formatter"),n=e("wrm/context-path"),s=n();return i.extend({_getDefaultOptions:function(){return t.extend(!0,this._super(),{errorMessage:"The requested user does not exist.",showDropdownButton:!1,removeOnUnSelect:!0,itemAttrDisplayed:"label"})},_handleCharacterInput:function(){},_setSuggestions:function(){},_handleServerError:function(e){404===e.status?this.showErrorMessage():this._super()},_deactivate:function(){this.validateAndAdd()},validateAndAdd:function(){var e=this;""===t.trim(this.$field.val())?this.hideErrorMessage():t.ajax({url:s+"/rest/api/2/user",data:{username:t.trim(e.getQueryVal())},success:function(t){e.hideErrorMessage(),e.$field.val(""),e.addItem(new r({label:t.displayName,value:t.name}))},error:function(){e.showErrorMessage()}})},_handleSpace:function(){this.validate()},_handleServerSuggestions:function(){this.hideErrorMessage(),this.handleFreeInput()},handleFreeInput:function(){var e=t.trim(this.$field.val());""!==e&&(this.addItem({value:e,label:e}),this.model.$element.trigger("change")),this.$field.val("")},keys:{Return:function(e){e.preventDefault(),this.validateAndAdd()},Spacebar:function(e){e.preventDefault(),this.validateAndAdd()}}})}),AJS.namespace("AJS.NoBrowseUserNamePicker",null,require("jira/field/no-browser-user-name-picker"));;
;
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/initMultiUserPickers.js' */
define("jira/field/init-multi-user-pickers",["jquery","wrm/context-path","jira/ajs/select/multi-select","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/field/no-browser-user-name-picker","jira/field/user-picker-util"],function(e,t,r,i,n,s,a,u){function l(t){t.find(".js-default-multi-user-picker").each(function(){var t=e(this);AJS.params.currentUserCanBrowseUsers?new r({element:this,itemAttrDisplayed:"label",showDropdownButton:!1,removeOnUnSelect:!0,submitInputVal:!0,ajaxOptions:{url:o+"/rest/api/1.0/users/picker",query:!0,data:function(e){return{showAvatar:!0,query:e,exclude:t.val()}},formatResponse:u.formatResponse}}):new a({element:this})})}var o=t();s.bind(n.NEW_CONTENT_ADDED,function(e,t,r){r!==i.panelRefreshed&&l(t)})});;
;
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/init/init-user-pickers-webresource.js' */
require("jira/field/init-multi-user-pickers"),require("jira/field/init-single-user-pickers");;
;
/* module-key = 'jira.webresources:group-label-lozenge', location = '/includes/jira/admin/group-browser/group-label-lozenge.js' */
define("jira/admin/group-browser/group-label-lozenge",["jquery","jira/skate"],function(e,t){t("group-label-lozenge",{type:t.type.CLASSNAME,attached:function(t){e(t).tooltip({gravity:"w",html:!0})}})});;
;
/* module-key = 'jira.webresources:group-label-lozenge', location = '/includes/jira/admin/group-browser/group-label-lozenge.soy' */
// This file was automatically generated from group-label-lozenge.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }


JIRA.Templates.groupLabelLozenge = function(opt_data, opt_ignored) {
  return '' + aui.lozenges.lozenge({text: opt_data.label.text, title: opt_data.label.title, isSubtle: true, extraClasses: 'group-label-lozenge'});
};
if (goog.DEBUG) {
  JIRA.Templates.groupLabelLozenge.soyTemplateName = 'JIRA.Templates.groupLabelLozenge';
}
;
;
/* module-key = 'jira.webresources:groupbrowser', location = '/includes/jira/admin/group-browser/group-browser.js' */
require(["jquery","jira/admin/group-browser/group-label-lozenge"],function(i){i(function(){i(".operations-list .aui-button[disabled]").tooltip({gravity:"e",html:!1})})});;
;
/* module-key = 'jira.webresources:group-pickers', location = '/includes/jira/field/groupPickerUtil.js' */
define("jira/field/group-picker-util",["jira/ajs/list/item-descriptor","jira/ajs/list/group-descriptor","jquery"],function(e,i,r){var t=function(t,a){var n=[],s=a?JIRA.Templates.GroupPickerUtil.formatResponseWithLabels:JIRA.Templates.GroupPickerUtil.formatResponse;return r(t).each(function(t,a){var u=new i({weight:t,label:a.header});r(a.groups).each(function(){u.addItem(new e({value:this.name,label:this.name,title:this.name,html:s(this),highlighted:!0}))}),n.push(u)}),n};return{formatResponseWithLabels:function(e){return t(e,!0)},formatResponse:function(e,i){return t(e,i)}}}),AJS.namespace("JIRA.GroupPickerUtil",null,require("jira/field/group-picker-util"));;
;
/* module-key = 'jira.webresources:group-pickers', location = '/includes/jira/field/templates/groupPickerUtil.soy' */
// This file was automatically generated from groupPickerUtil.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.GroupPickerUtil.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.GroupPickerUtil == 'undefined') { JIRA.Templates.GroupPickerUtil = {}; }


JIRA.Templates.GroupPickerUtil.formatResponseWithLabels = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.GroupPickerUtil.formatResponse(soy.$$augmentMap(opt_data, {showLabels: true}));
};
if (goog.DEBUG) {
  JIRA.Templates.GroupPickerUtil.formatResponseWithLabels.soyTemplateName = 'JIRA.Templates.GroupPickerUtil.formatResponseWithLabels';
}


JIRA.Templates.GroupPickerUtil.formatResponse = function(opt_data, opt_ignored) {
  var output = '<div class="group-suggestion-item"><span class="group-suggestion-item__name">' + soy.$$filterNoAutoescape(opt_data.html) + '</span>';
  if (opt_data.showLabels) {
    output += '<span class="group-suggestion-item__labels group-labels-lozenges">';
    var labelList13 = opt_data.labels;
    var labelListLen13 = labelList13.length;
    for (var labelIndex13 = 0; labelIndex13 < labelListLen13; labelIndex13++) {
      var labelData13 = labelList13[labelIndex13];
      output += JIRA.Templates.groupLabelLozenge({label: labelData13}) + ' ';
    }
    output += '</span>';
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.GroupPickerUtil.formatResponse.soyTemplateName = 'JIRA.Templates.GroupPickerUtil.formatResponse';
}
;
;
/* module-key = 'jira.webresources:group-pickers', location = '/includes/jira/field/initMultiGroupPickers.js' */
define("jira/field/init-multi-group-pickers",["jquery","wrm/context-path","jira/ajs/select/multi-select","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/field/group-picker-util"],function(e,t,i,r,a,s,n){"use strict";function u(t){t.find(".js-default-multi-group-picker").each(function(){var t=e(this),r=!0===t.data("show-labels"),a=t.data("user-name");new i({element:this,itemAttrDisplayed:"label",showDropdownButton:!1,ajaxOptions:{data:function(e){return{userName:a,query:e,exclude:t.val()}},url:l+"/rest/api/2/groups/picker",query:!0,formatResponse:r?n.formatResponseWithLabels:n.formatResponse}})})}var l=t();s.bind(a.NEW_CONTENT_ADDED,function(e,t,i){i!==r.panelRefreshed&&u(t)})});;
;
/* module-key = 'jira.webresources:group-pickers', location = '/includes/jira/field/initSingleGroupPickers.js' */
define("jira/field/init-single-group-pickers",["jira/ajs/select/single-select","jquery","wrm/context-path","jira/ajs/list/item-descriptor","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/field/group-picker-util"],function(e,t,i,a,n,r,s,l){"use strict";function u(i){i.find(".js-default-single-group-picker").each(function(){var i=t(this),n=i.find("option[data-empty]"),r=!0===i.data("show-labels"),s=i.data("user-name");new e({element:this,itemAttrDisplayed:"label",revertOnInvalid:!0,ajaxOptions:{data:function(e){return{userName:s,query:e,exclude:i.val()}},url:o+"/rest/api/2/groups/picker",query:!0,formatResponse:function(e){var t=l.formatResponse(e,r);return n.length&&""!==i.val()&&t.unshift(new a({value:"",label:n.text(),highlighted:!0})),t}}})})}var o=i();s.bind(r.NEW_CONTENT_ADDED,function(e,t,i){i!==n.panelRefreshed&&u(t)})});;
;
/* module-key = 'jira.webresources:group-pickers', location = '/includes/jira/field/init/init-group-pickers-webresource.js' */
require("jira/field/init-multi-group-pickers"),require("jira/field/init-single-group-pickers");;
;
/* module-key = 'jira.webresources:jira-project-issuetype-fields', location = '/includes/jira/field/ProjectIssueTypeSelect.js' */
define("jira/field/project-issue-type-select",["jira/lib/class"],function(e){return e.extend({init:function(e){var s,t=this;this.$project=e.project,this.issueTypeSelect=e.issueTypeSelect,this.$projectIssueTypesSchemes=e.projectIssueTypesSchemes,this.$issueTypeSchemeIssueDefaults=e.issueTypeSchemeIssueDefaults,this.projectIssueTypeSchemes=JSON.parse(this.$projectIssueTypesSchemes.html()),this.issueTypesSchemeDefaults=JSON.parse(this.$issueTypeSchemeIssueDefaults.html()||"[]"),t.$project.length>0&&(s=t.$project.val(),t.setIssueTypeScheme(t.getIssueTypeSchemeForProject(s)),this.$project.change(function(){var e=t.$project.val();t.setIssueTypeScheme(t.getIssueTypeSchemeForProject(e))}))},getIssueTypeSchemeForProject:function(e){return this.projectIssueTypeSchemes[e]},getDefaultIssueTypeForScheme:function(e){return this.issueTypesSchemeDefaults[e]},setIssueTypeScheme:function(e){var s=this.issueTypeSelect.model.getValue();this.issueTypeSelect.model.setFilterGroup(e),this.issueTypeSelect.model.setSelected(s,!1)||this.setDefaultIssueType(e),this.issueTypeSelect.model.$element.data("project",this.$project.val())},setDefaultIssueType:function(e){var s=this.getDefaultIssueTypeForScheme(e),t=this.issueTypeSelect.model.getDescriptor(s);t||(t=this.issueTypeSelect.model.getAllDescriptors()[0]),this.issueTypeSelect.setSelection(t,!1)}})}),AJS.namespace("JIRA.ProjectIssueTypeSelect",null,require("jira/field/project-issue-type-select"));;
;
/* module-key = 'jira.webresources:jira-project-issuetype-fields', location = '/includes/jira/field/initProjectIssueTypeSelect.js' */
define("jira/field/init-project-issue-type-select",["jira/ajs/select/suggestion-collection-model","jquery","jira/ajs/select/single-select","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/field/project-issue-type-select"],function(e,t,i,s,n,l,r){function c(s){var n=s||t("body");n.find(".issuetype-field").each(function(s){var l=n.find(".project-field, .project-field-readonly"),c=t(this),d=n.find("#"+c.attr("id")+"-projects"),o=n.find("#"+c.attr("id")+"-defaults"),a=new i({element:c,revertOnInvalid:!0,model:e});a.model.remove(""),l.length>0&&new r({project:l.eq(s),issueTypeSelect:a,projectIssueTypesSchemes:d,issueTypeSchemeIssueDefaults:o})})}l.bind(n.NEW_CONTENT_ADDED,function(e,t,i){i!==s.panelRefreshed&&c(t)})});;
;
/* module-key = 'jira.webresources:jira-project-issuetype-fields', location = '/includes/jira/field/initProjectPickers.js' */
define("jira/field/init-project-pickers",["jira/ajs/select/scrollable-single-select","jira/ajs/select/suggestion-collection-model","jira/util/events/reasons","jira/util/events/types","jira/util/events"],function(e,i,n,t,l){function s(n){n.find(".project-field").each(function(){new e({element:this,revertOnInvalid:!0,pageSize:50,pagingThreshold:100,model:i})})}l.bind(t.NEW_CONTENT_ADDED,function(e,i,t){t!==n.panelRefreshed&&s(i)})});;
;
/* module-key = 'jira.webresources:jira-project-issuetype-fields', location = '/includes/jira/field/init/init-jira-project-issuetype-fields-webresource.js' */
require("jira/field/init-project-issue-type-select"),require("jira/field/init-project-pickers");;
;
/* module-key = 'jira.webresources:status-category-picker', location = '/includes/jira/field/statusCategoryPicker.js' */
define("jira/field/status-category-single-select",["jira/ajs/select/single-select","jquery"],function(e,t){function s(e){var s,i=t();return e&&e.model&&(s=t.extend({},e.model().data()),delete s.descriptor,i=t(JIRA.Template.Util.Issue.Status.issueStatus({issueStatus:{name:e.label(),statusCategory:s},isCompact:!0})).removeClass("jira-issue-status-lozenge-tooltip").removeAttr("title").removeAttr("data-tooltip")),i}return e.extend({_hasIcon:function(){return this.$field.val()&&this.$field.val()!==this.model.placeholder},setSelection:function(e){this._super(e),this.$container.find(".fake-ss-icon").remove(),this.$container.append(s(e).addClass("fake-ss-icon aui-ss-entity-icon"))},init:function(e){this._super(e);var t=this.listController._renders.suggestion;this.listController._renders.suggestion=function(e){var i=t.apply(this,arguments);return i.find("a").prepend("&nbsp;").prepend(s(e)),i}},_renders:{entityIcon:function(e){return t()}}})}),AJS.namespace("JIRA.StatusCategorySingleSelect",null,require("jira/field/status-category-single-select"));;
;
/* module-key = 'jira.webresources:status-category-picker', location = '/includes/jira/field/initStatusPickers.js' */
define("jira/field/init-status-pickers",["jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/field/status-category-single-select"],function(e,t,i,n){function s(e){e.find("select#statusCategory").each(function(e,t){new n({element:t,revertOnInvalid:!0})})}i.bind(t.NEW_CONTENT_ADDED,function(t,i,n){n!==e.panelRefreshed&&s(i)})});;
;
/* module-key = 'jira.webresources:status-category-picker', location = '/includes/jira/field/init/init-status-category-picker-webresource.js' */
require("jira/field/init-status-pickers");;
;
/* module-key = 'jira.webresources:jira-project-data', location = 'includes/jira/project/project-data.js' */
define("jira/project/projectdata",["wrm/data"],function(t){"use strict";var r=t.claim("jira.core:jira-project-data-data.data");return{getProjectType:function(){return r.projectType}}});;
;
/* module-key = 'jira.webresources:jira-admin-data', location = 'includes/jira/admin/admin-data.js' */
define("jira/admin/admindata",["wrm/data"],function(i){"use strict";var a=i.claim("jira.core:jira-admin-data-data.data");return{isUserAdmin:function(){return a.isAdmin},isUserSysAdmin:function(){return a.isSysAdmin}}});;
;
/* module-key = 'jira.webresources:jira-admin-analytics', location = '/includes/jira/admin/analytics.js' */
var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};define("jira/admin/analytics",["jira/project/projectdata","jira/util/events","jira/admin/admindata","jira/common/page","wrm/context-path","jira/util/data/meta","jquery","jira/analytics","jira/libs/parse-uri"],function(t,e,o,n,i,c,r,a,f){function l(t,e,o){return o="object"!==(void 0===o?"undefined":_typeof(o))?{}:o,e=e||"unknown",{name:"administration."+t+"."+e,properties:r.extend({type:e,tab:c.get("admin.active.tab"),section:c.get("admin.active.section")},o)}}function d(t,e){a.send(l("projectconfig.workflowscheme",t,e))}function s(t,e){a.send(l("workflowscheme",t,e))}function w(){return!!r(".status-draft").length}function u(t,e){return l("workflow",t,e)}function p(t,e){a.send(l("navigate",t,e))}function k(t,e){a.send(l("projectconfig.workflow",t,e))}function m(t,e){S.on("click",t,function(){var t=r(this).data("mode");a.send(u("selectmode",{mode:t,edit:e}))})}function g(t,e,o){a.send(u("edit",{mode:t,action:e,object:o}))}function j(){k("loadworkflowstab",{referrer:y(document.referrer)})}function h(t,e,o){S.on("click",t,function(){g("text",e,o)})}function v(t,e){"true"!==r(e.currentTarget).attr("aria-pressed")&&a.send({name:"projectconfig.toggle."+t})}function y(t){if("string"!=typeof t)return null;var e,o=f(t),n=c.get("projectKey");return e=o.path.slice(i().length),e=e.replace(/project-config\/(.*?)(\/|$)/,"project-config/PROJECTKEY$2"),n&&n.length&&(e=e.split(n).join("PROJECTKEY")),e}function b(){e.bind("addworkflow",function(){w()&&s("addworkflowtodraft")}),e.bind("assignissuetypes",function(){w()&&s("assignissuetypestodraft")}),S.on("click",".remove-all-issue-types",function(){w()&&s("deleteworkflowfromdraft")}),S.on("click","#discard-draft-dialog input[type=submit]",function(){x?d("discarddraft"):s("discarddraft")}),S.on("click","#view-original",function(){s("vieworiginalofdraft")}),S.on("click","#view-draft",function(){s("viewdraft")}),S.on("click","#publish-draft",function(){s("publishclicked")}),x||"draftMigrationSuccess"!==f(location).anchor||s("migrationcompleted"),e.bind("draftcreated",function(){x?d("draftcreated"):s("draftcreated")}),S.on("click","#workflowscheme-editor .workflow-text-view",function(){s("viewworkflow",{mode:"text"})}),S.on("click","#workflowscheme-editor .workflow-diagram-view",function(){s("viewworkflow",{mode:"diagram"})}),S.on("click","#project-config-panel-screens a.project-config-screen",function(){var t=r(this).data("operationId");1===t?a.send({name:"administration.screenschemes.editlink.clicked.operation.edit"}):2===t?a.send({name:"administration.screenschemes.editlink.clicked.operation.view"}):a.send({name:"administration.screenschemes.editlink.clicked.operation.create"})}),S.on("click",".project-config-more-link",function(){var t=r(this);p("morelink",{href:y(t.attr("href")),title:t.attr("title")})}),n.relatedContentElement().on("click","a",function(){var e=r(this),n=e.attr("id");n=/^view_project_issuetype_\d+$/.test(n)?"view_project_issuetype":n,p("tabs",{id:n,href:y(e.attr("href")),title:e.text(),isAdmin:o.isUserAdmin(),isSysAdmin:o.isUserSysAdmin(),projectType:t.getProjectType()})}),S.on("click","#project-config-header-name",function(){p("projectheader")}),S.on("click","#project-config-header-avatar",function(){p("projectavatar")}),S.on("click",".back-to-proj-config",function(){p("backtoproject",{href:y(r(this).attr("href"))})}),S.on("click",".project-config-summary-scheme a",function(){p("selectedscheme",{href:y(r(this).attr("href"))})}),S.on("click",".project-config-workflow-text-link",function(){k("viewastext")}),S.on("click",".project-config-screen",function(){k("gotoscreen")}),S.on("click",".project-config-workflow-edit",function(){k(r(this).closest(".project-config-workflow-default").length?"copyworkflow":"editworkflow")}),S.on("click",".issuetypeconfig-edit-workflow",function(){k("editworkflowissuetype")}),S.on("click","#toggleWorkflowTab",function(t){v("workflow",t)}),S.on("click","#toggleViewTab",function(t){v("view",t)}),S.on("click",".project-config-workflow-diagram-container",function(){k("enlargeworkflow")}),S.on("click","#project-config-workflows-view-original",function(){d("vieworiginalofdraft")}),S.on("click","#project-config-workflows-view-draft",function(){d("viewdraft")}),S.on("click","#project-config-workflows-scheme-change",function(){d("switchscheme")}),S.on("click","#project_import_link_lnk",function(){p("topnav.jim")}),m(".workflow-view-toggle",!1),m(".workflow-edit-toggle",!0),h("#workflow-step-add-submit","add","step"),h("#workflow-step-update","update","step"),h("#workflow-step-delete","remove","step"),h("#workflow-transition-add","add","transition"),h("#workflow-transition-update","update","transition"),h("#workflow-transition-delete","remove","transition"),h("#workflow-global-transition-update","update","globaltransition"),e.bind("wfd-edit-action",function(t,e){g("diagram",e.action,e.object)})}var S=r(document),_=c.get("admin.active.section"),x="atl.jira.proj.config"===_;return{bindEvents:b,event:l,sendProjectWorkflowSchemeEvent:d,sendLoadWorkflowsTabEvent:j}}),AJS.namespace("JIRA.Analytics",null,require("jira/admin/analytics"));;
;
/* module-key = 'jira.webresources:jira-admin-analytics', location = '/includes/jira/admin/analytics-init.js' */
require(["underscore","jira/util/data/meta","jira/util/init-on-dcl","jira/admin/analytics"],function(i,n,a,t){a(function(){var a=n.get("admin.active.tab");i.defer(function(){t.bindEvents(),"view_project_workflows"===a&&t.sendLoadWorkflowsTabEvent()})})});;
;
/* module-key = 'com.atlassian.auiplugin:split_aui.splitchunk.16f099a0da', location = 'aui.chunk.b8d538420d4f10a69910--057b5af785a9bd94d156.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.splitchunk.16f099a0da"],{jJ4L:function(i,n,o){"use strict";o("FStl"),o("Q0fs"),o("oTK+"),o("S3ao"),o("HNID"),o("YQ7q"),o("xjlV")},xjlV:function(i,n,o){}}]);
//# sourceMappingURL=aui.chunk.b8d538420d4f10a69910--057b5af785a9bd94d156.js.map;
;
/* module-key = 'com.atlassian.auiplugin:split_aui.pattern.table', location = 'aui.chunk.f811d39e5d935038628f--b52208891d79a8157502.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.pattern.table"],[],[["jJ4L","runtime","aui.splitchunk.b0831cc7d0","aui.splitchunk.572a8bf5cd","aui.splitchunk.d49cf794d2","aui.splitchunk.336ae4f9e7","aui.splitchunk.fb15cffa72","aui.splitchunk.ed80e00f15","aui.splitchunk.b2ecdd4179","aui.splitchunk.16f099a0da"]]]);
//# sourceMappingURL=aui.chunk.f811d39e5d935038628f--b52208891d79a8157502.js.map;
;
/* module-key = 'jira.webresources:jira-admin', location = '/includes/jira/admin/initAdmin.js' */
define("jira/admin/init/admin",["jira/util/events","jira/util/events/types","jira/util/events/reasons","jquery"],function(e,t,i,n){"use strict";e.bind(t.NEW_CONTENT_ADDED,function(e,t,r){r!==i.panelRefreshed&&t.find(".jira-iconpicker-trigger").click(function(e){e.preventDefault();var t=n(this),i=t.attr("href");t.prev("input.text").length&&window.open(i,"IconPicker","status=no,resizable=yes,top=100,left=200,width=580,height=650,scrollbars=yes").focus()})}),n(function(){var e=function(e,t){n('<input type="hidden" />').attr({name:t,value:t}).appendTo(e),e.trigger("submit",{operationNameSet:!0})},t=function(t){var i=n(t.target),r=i.closest("form"),o="";o=i.attr("name").toLowerCase().indexOf("join")>-1?"join":"leave",e(r,o)};n(document.body).on("keypress","#userGroupPicker select",function(e){13===e.which&&t.apply(this,arguments)}).on("click","#userGroupPicker .aui-button",function(e){e.preventDefault(),t.apply(this,arguments)}).on("submit","#user-edit-groups",function(t,i){if(!i||!i.operationNameSet){var r=n(t.target);t.preventDefault(),e(r,"join")}})})});;
;
/* module-key = 'jira.webresources:jira-admin', location = '/includes/jira/admin/edit-application-properties.js' */
require(["jquery","backbone","jira/util/init-on-dcl"],function(e,i,t){"use strict";var a=i.View.extend({events:{"click input[name=useGravatar]:checked":"_onUseGravatarClicked"},initialize:function(e){i.View.prototype.initialize.call(this,arguments),this._gravatarServer=this.$el.find(".gravatar-server")},_onUseGravatarClicked:function(e){var i="true"===this.$(e.target).val();this._gravatarServer.toggleClass("hidden",!i)}});t(function(){e("#edit-application-properties").each(function(){new a({el:this})})})});;
;
/* module-key = 'jira.webresources:jira-admin', location = '/includes/jira/admin/init/init-jira-admin-webresource.js' */
require("jira/admin/init/admin");;
;
/* module-key = 'jira.webresources:jira-analytics', location = '/includes/jira/analytics/analytics-init.js' */
require(["jquery","jira/analytics","jira/util/data/meta"],function(a,t,c){"use strict";function n(a){var t=c.get("analytics-prefix");return t&&(a=t+a),a}function i(){a("[data-track-pageview]").each(function(c,i){t.send({name:n(a(i).data("track-pageview"))})})}a(document).on("click","[data-track-click]",function(){t.send({name:n(a(this).data("track-click"))})}),a(document).on("auxclick","[data-track-auxclick]",function(){t.send({name:n(a(this).data("track-auxclick"))})}),a(i)});;
;
/* module-key = 'jira.webresources:avatar-picker-trigger', location = '/includes/jira/admin/initAvatarPickerTrigger.js' */
define("jira/admin/init/avatar-picker-trigger",["jira/ajs/layer/layer-constants","jira/util/events","jira/util/events/types","jira/util/events/reasons","jira/ajs/layer/inline-layer","jira/ajs/contentretriever/content-retriever","jira/ajs/avatarpicker/avatar","jira/ajs/avatarpicker/avatar-picker-factory","jira/ajs/avatarpicker/avatar-picker","jira/ajs/avatarpicker/avatar-picker/image-editor","jquery"],function(t,a,e,r,i,n,c,s,v,o,d){"use strict";function f(t){var a=d(".jira-avatar-picker-trigger"),e=d(".jira-avatar-picker-trigger img, img.jira-avatar-picker-trigger",t),r=d(t).find("#avatar-picker-avatar-id"),i=d(t).find("#avatar-picker-iconurl"),n=d(t).find("#avatar-type");""!==n.text()&&s.createUniversalAvatarPickerDialog({trigger:a,title:d(t).find("#avatar-dialog-title").text(),projectId:d(t).find("#avatar-owner-id").text(),projectKey:d(t).find("#avatar-owner-key").text(),defaultAvatarId:d(t).find("#default-avatar-id").text(),initialSelection:r.val(),avatarSize:c.getSizeObjectFromName(d(t).find("#avatar-size").text()),avatarType:n.text(),select:function(t,a){e.attr("src",a),i.val(a),r.val(t.getId())}})}function l(a){var e=d(".jira-inline-avatar-picker-trigger",a);e.length&&new j({offsetTarget:e,projectId:d(a).find("#avatar-owner-id").text(),projectKey:d(a).find("#avatar-owner-key").text(),defaultAvatarId:d(a).find("#default-avatar-id").text(),alignment:t.LEFT,width:420,allowDownsize:!0})}var g=n.extend({init:function(t){this.avatarPicker=t},content:function(t){this.avatarPicker.render(function(a){t(d("<div />").html(a))})},cache:function(){return!1},isLocked:function(){},startingRequest:function(){},finishedRequest:function(){}}),j=i.extend({init:function(t){var a=this;this.avatarPicker=v.createProjectAvatarPicker({projectId:t.projectId,projectKey:t.projectKey,defaultAvatarId:t.defaultAvatarId,select:function(e,r,i){t.select&&t.select.apply(this,arguments),i||a.hide(),a.offsetTarget().attr("src",r),a.offsetTarget().trigger("AvatarSelected")}}),t.contentRetriever=new g(this.avatarPicker),d(this.avatarPicker.imageEditor).bind(o.LOADED,function(){a.setWidth(a.layer().attr("scrollWidth"))}),this._super(t);var e=this.offsetTarget(),r=d("<span class='jira-avatar-picker-trigger'></span>");r.insertBefore(e).append(e),this._assignEvents("offsetTarget",r)},_events:{offsetTarget:{click:function(t){this.show()}}}});a.bind(e.NEW_CONTENT_ADDED,function(t,a,e){e!==r.panelRefreshed&&(f(a),l(a))})});;
;
/* module-key = 'jira.webresources:avatar-picker-trigger', location = '/includes/jira/admin/init/init-avatar-picker.js' */
require("jira/admin/init/avatar-picker-trigger");;
;
/* module-key = 'com.atlassian.plugins.base-hipchat-integration-plugin-api:ajs-amd', location = 'lib/amd/ajs-amd.js' */
define("ajs",function(){return AJS});;
;
/* module-key = 'com.atlassian.plugins.base-hipchat-integration-plugin-api:wrm-amd', location = 'lib/amd/wrm-amd.js' */
define("wrm/context-path",function(){return AJS.contextPath});define("wrm/data",function(){var a=function(){};if(WRM){if(typeof WRM.data==="function"){a=WRM.data}else{if(WRM.data&&typeof WRM.data.claim==="function"){a=WRM.data.claim}}}return{claim:a}});define("wrm",function(){if(WRM.data instanceof Function){WRM.data.claim=WRM.data}return WRM});;
;
/* module-key = 'com.atlassian.plugins.base-hipchat-integration-plugin-api:jquery-amd', location = 'lib/amd/jquery-amd.js' */
define("jquery",function(){return AJS.$});;
;
/* module-key = 'com.atlassian.plugins.base-hipchat-integration-plugin-api:underscore-amd', location = 'lib/amd/underscore-amd.js' */
define("underscore",function(){return _});;
;
/* module-key = 'com.atlassian.plugins.base-hipchat-integration-plugin:configure-integration-data', location = 'admin/configure-integration-data.js' */
define("hipchat/admin/configure-integration-data",["jquery"],function(f){var e="com.atlassian.plugins.base-hipchat-integration-plugin";var d="configure-integration-data";var c="configure-integration";var a=WRM.data instanceof Function?WRM.data:WRM.data.claim;var b=a(e+":"+d+"."+c);return b});;
;
/* module-key = 'com.atlassian.plugins.base-hipchat-integration-plugin:resources', location = 'admin/configure-hipchat.js' */
require(["hipchat/admin/configure-integration-data"],function(a){AJS.toInit(function(g){var d=g("#hipchat-integration-configuration").val();var k=window.localStorage;if(d){var j={self:g("#hipchat-route-config").val(),serverPing:g("#hipchat-route-check-server-connectivity").val(),clientPing:g("#hipchat-route-check-client-connectivity").val(),beginInstall:g("#hipchat-route-begin-install").val(),completeInstall:g("#hipchat-route-complete-install").val(),installableUrl:g("#hipchat-route-installable-url").val(),uninstall:g("#hipchat-route-uninstall").val(),redirectUrl:g("#hipchat-route-redirectUrl").val()};var e={screenshotResource:g("#hipchat-server-resource-screenshot").val(),screenshotResource2x:g("#hipchat-server-resource-screenshot-2x").val(),uninstalling:g("#hipchat-server-resource-uninstalling").val()};var l=HipChat.Templates.Configuration;var b=g("#hipchat-configuration-panel");if(a.linkId){var i=a.linkId}var h=(function(){var m;return{installing:function(){g("#hipchat-installing .hipchat-install-message").spin("large")},error:function(n){b.html(l.error({msg:n}))},uninstallError:function(n){if(n.status==401){b.html(l.uninstallPermissionError())}else{b.html(l.uninstallConnectionError())}},confirmUninstall:function(){var n=g.Deferred();if(!m){m=new AJS.Dialog(600,300,"hipchat-remove-link-dialog");m.addHeader("Remove integration","remove-warning");m.addPanel("Message Panel",l.removeLinkMessage());m.addButton("Remove integration",function(){m.hide();h.uninstall();n.resolve()});m.addCancel("Cancel",function(){m.hide();n.reject()})}m.show();return n.promise()},uninstall:function(){b.html(l.uninstalling({uninstallingImage:e.uninstalling}));g("#hipchat-uninstalling .hipchat-install-message").spin("large")},reinstallationSucceeded:function(){try{var n=require("aui/flag");n({type:"success",title:"Hipchat Integration updated",persistent:false,body:"Your Hipchat Integration has been successfully updated to the latest version, enjoy the new features."})}catch(o){}}}})();var f={serverPing:function(){return g.ajax(j.serverPing,{type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({serverUrl:""})})},serverPingToUrl:function(m){return g.ajax(j.serverPing,{type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({serverUrl:m})})},beginInstall:function(n,m){return g.ajax(j.beginInstall,{type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({installableUrl:n,reinstall:m})})},completeInstall:function(m){return g.ajax(j.completeInstall,{type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({installableUrl:m})})},remove:function(m){return g.ajax({url:j.uninstall+"/"+m,type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({})})},reinstall:function(m){return g.ajax({url:j.uninstall+"/"+m,type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({reinstall:true})})},removeDefault:function(){return g.ajax(j.uninstall,{type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({})})}};var c={initialize:function(m){switch(m){case"installing":c.installing();break;case"installed":c.installed(i);break;case"uninstalling":c.uninstalling();break;case"reinstall":c.reinstalling();break;case"configure":default:c.configure()}},redirect:function(m){window.location.replace(m)},navigate:function(m){window.location.assign(m)},configure:function(){f.serverPing().done(function(){g("#hipchat-install").removeAttr("disabled")}).fail(function(){g("#hipchat-server-failure").removeClass("hidden")}).always(function(){g("#hipchat-loading").hide()});g("#hipchat-install").click(function(n){n.preventDefault();if(g(this).attr("aria-disabled")){return}g(this).attr("aria-disabled","true");AJS.trigger("analyticsEvent",{name:"notifications.hipchat.server.registration.started",data:{}});f.beginInstall(undefined,false).done(c.navigate)});g("#enable-btf-install").click(function(n){n.preventDefault();window.onbeforeunload=null;m()});AJS.trigger("analyticsEvent",{name:"notifications.hipchat.server.discovered",data:{}});function m(){g(".hipchat-install-form").toggleClass("hipchat-btf");g("#btf-url").focus();g("#btf-install").click(function(o){g("#btf-error").hide();o.preventDefault();var n=g("#btf-url").val();var p=/^https?:\/\//i;if(!p.test(n)){n="https://"+n}f.serverPingToUrl(n).done(function(){f.beginInstall(n,false).done(c.navigate)}).fail(function(){g("#btf-error").show()})})}g("#btf-install-cancel").click(function(n){n.preventDefault();g(".hipchat-install-form").toggleClass("hipchat-btf")})},installing:function(){h.installing();f.completeInstall(j.installableUrl).done(function(m){c.redirect(j.self)}).error(h.error)},installed:function(){g("#hipchat-uninstall").click(function(m){m.preventDefault();if(g(this).attr("aria-disabled")){return}h.confirmUninstall().done(function(){f.remove(i).done(c.redirect).error(h.uninstallError)})});g(".hipchat-reinstall").click(function(){if(g(this).attr("aria-disabled")){return}var m=g(this);m.attr("aria-disabled",true);m.find("aui-spinner").css("display","inline-block");f.reinstall(i).done(c.redirect).error(h.uninstallError)});if(k.getItem("hipchat-reinstalling")){h.reinstallationSucceeded();k.removeItem("hipchat-reinstalling")}},uninstalling:function(){f.removeDefault().done(function(){c.redirect(j.redirectUrl)}).error(h.uninstallError)},reinstalling:function(){function o(r){var u=window.location.search.substring(1);var t=u.split("&");for(var s=0;s<t.length;s++){var v=t[s].split("=");if(v[0]==r){if(v.length>1){return v[1]}else{return null}}}}var q=o("installable_url");if(q===undefined){console.log("ERROR: the 'installable_url' parameter was missing from the request URL:'"+window.location.search+"'")}else{var n=decodeURIComponent(q);var m=document.createElement("a");m.href=n;var p=m.protocol+"//"+m.host;f.serverPingToUrl(p).done(function(){k.setItem("hipchat-reinstalling",true);f.beginInstall(p,true).done(c.navigate)}).fail(function(){g("#btf-error").show()})}}};c.initialize(d)}})});;
;
/* module-key = 'com.atlassian.plugins.base-hipchat-integration-plugin:resources', location = 'admin/configure-hipchat.soy' */
// This file was automatically generated from configure-hipchat.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace HipChat.Templates.Configuration.
 */

if (typeof HipChat == 'undefined') { var HipChat = {}; }
if (typeof HipChat.Templates == 'undefined') { HipChat.Templates = {}; }
if (typeof HipChat.Templates.Configuration == 'undefined') { HipChat.Templates.Configuration = {}; }


HipChat.Templates.Configuration.installing = function(opt_data, opt_ignored) {
  return '' + HipChat.Templates.Configuration.connected({id: 'hipchat-installing', installHeading: 'Integrating with Hipchat', installImage: opt_data.installingImage, showRemove: false});
};
if (goog.DEBUG) {
  HipChat.Templates.Configuration.installing.soyTemplateName = 'HipChat.Templates.Configuration.installing';
}


HipChat.Templates.Configuration.uninstalling = function(opt_data, opt_ignored) {
  return '' + HipChat.Templates.Configuration.connected({id: 'hipchat-uninstalling', installHeading: 'Removing Hipchat Integration', installImage: opt_data.uninstallingImage, showRemove: false});
};
if (goog.DEBUG) {
  HipChat.Templates.Configuration.uninstalling.soyTemplateName = 'HipChat.Templates.Configuration.uninstalling';
}


HipChat.Templates.Configuration.connected = function(opt_data, opt_ignored) {
  return '<div id="' + soy.$$escapeHtml(opt_data.id) + '">' + ((opt_data.showRemove) ? HipChat.Templates.Configuration.uninstallButton(null) : '') + ((opt_data.installImage) ? '<img src="' + soy.$$escapeHtml(opt_data.installImage) + '" />' : '') + ((opt_data.installHeading) ? '<h5>' + soy.$$escapeHtml(opt_data.installHeading) + '</h5>' : '') + '<hr/><div class="hipchat-install-message">' + ((opt_data.installMessageHtml) ? '<p>' + soy.$$filterNoAutoescape(opt_data.installMessageHtml) + '</p>' : '') + '</div></div>';
};
if (goog.DEBUG) {
  HipChat.Templates.Configuration.connected.soyTemplateName = 'HipChat.Templates.Configuration.connected';
}


HipChat.Templates.Configuration.error = function(opt_data, opt_ignored) {
  return '' + HipChat.Templates.Configuration.message({type: 'error', title: 'Error encountered creating your Hipchat link', content: soy.$$escapeHtml("Something went wrong integrating JIRA and Hipchat. We probably had trouble connecting to the Hipchat server. Check that the connection between your server and Hipchat is working correctly and try again.") + '<p>' + soy.$$escapeHtml('Try uninstalling the existing integration from Hipchat before trying again.') + '</p>'});
};
if (goog.DEBUG) {
  HipChat.Templates.Configuration.error.soyTemplateName = 'HipChat.Templates.Configuration.error';
}


HipChat.Templates.Configuration.uninstallConnectionError = function(opt_data, opt_ignored) {
  return '' + HipChat.Templates.Configuration.message({type: 'error', title: 'Error encountered removing your Hipchat link', content: '' + soy.$$escapeHtml("Something went wrong removing the integration in Hipchat. We probably had trouble connecting to the Hipchat server. You may need to remove the integration from Hipchat\'s admin page. The link has been removed from JIRA.")});
};
if (goog.DEBUG) {
  HipChat.Templates.Configuration.uninstallConnectionError.soyTemplateName = 'HipChat.Templates.Configuration.uninstallConnectionError';
}


HipChat.Templates.Configuration.uninstallPermissionError = function(opt_data, opt_ignored) {
  return '' + HipChat.Templates.Configuration.message({type: 'error', title: 'Error encountered removing your Hipchat link', content: '' + soy.$$escapeHtml('You do not have permission to remove this integration, please contact your site admin if you wish to remove the Hipchat integration.')});
};
if (goog.DEBUG) {
  HipChat.Templates.Configuration.uninstallPermissionError.soyTemplateName = 'HipChat.Templates.Configuration.uninstallPermissionError';
}


HipChat.Templates.Configuration.refreshToken = function(opt_data, opt_ignored) {
  return '' + HipChat.Templates.Configuration.message({type: 'error', title: 'Setting up your Hipchat link', content: '' + soy.$$escapeHtml('Error encountered creating your Hipchat link')});
};
if (goog.DEBUG) {
  HipChat.Templates.Configuration.refreshToken.soyTemplateName = 'HipChat.Templates.Configuration.refreshToken';
}


HipChat.Templates.Configuration.message = function(opt_data, opt_ignored) {
  return '<div class="aui-message aui-message-' + soy.$$escapeHtml(opt_data.type) + ' ' + ((opt_data.altClass) ? soy.$$escapeHtml(opt_data.altClass) : '') + '"><p class="title"><strong>' + soy.$$escapeHtml(opt_data.title) + '</strong></p>' + ((opt_data.content) ? '<p>' + soy.$$filterNoAutoescape(opt_data.content) + '</p>' : '') + '</div>';
};
if (goog.DEBUG) {
  HipChat.Templates.Configuration.message.soyTemplateName = 'HipChat.Templates.Configuration.message';
}


HipChat.Templates.Configuration.removeLinkMessage = function(opt_data, opt_ignored) {
  return '<div class=\'remove-link-message\'>' + soy.$$filterNoAutoescape("\u003cp>Are you sure you want to completely remove your Hipchat integration?\u003c\/p>\u003cp>The JIRA plugin will not be removed from Hipchat.\u003c\/p>") + '</div>';
};
if (goog.DEBUG) {
  HipChat.Templates.Configuration.removeLinkMessage.soyTemplateName = 'HipChat.Templates.Configuration.removeLinkMessage';
}


HipChat.Templates.Configuration.installButton = function(opt_data, opt_ignored) {
  return '<div class="hipchat-install-form"><button class="aui-button aui-button-primary" type="submit" id="hipchat-install" disabled="disabled">' + soy.$$escapeHtml('Connect Hipchat') + '</button><div id="hipchat-loading"><aui-spinner size=\'small\'></aui-spinner> ' + soy.$$escapeHtml('Checking your server can see Hipchat') + '</div><div id="hipchat-server-failure" class="hidden"><p><span class="aui-icon aui-icon-small aui-iconfont-warning hipchat-failure-marker"></span> ' + soy.$$escapeHtml('Unable to reach Hipchat') + '</p><p class="details">' + soy.$$escapeHtml("If JIRA does not have access to the internet you won\'t be able to integrate with Hipchat.") + '</p></div><div><button class="cancel aui-link aui-button aui-button-link" id="enable-btf-install">' + soy.$$escapeHtml('Or, if you\x27re using Hipchat Server, click here.') + '</button>' + HipChat.Templates.Configuration.btfInstall(null) + '</div></div>';
};
if (goog.DEBUG) {
  HipChat.Templates.Configuration.installButton.soyTemplateName = 'HipChat.Templates.Configuration.installButton';
}


HipChat.Templates.Configuration.btfInstall = function(opt_data, opt_ignored) {
  return '<form class="aui top-label" id="hipchat-btf-install"><fieldset class="top-label"><div class="field-group top-label"><label for="hipchat-btf-url" style="text-align:center">' + soy.$$escapeHtml('First things first, let us know where we can find your Hipchat Server:') + '</label><input class="text long-field" type="text" id="btf-url" name="btf-url" data-aui-notification-field="" placeholder="http://www.hipchat.com"></input><div class="error" id="btf-error">' + soy.$$escapeHtml('We couldn\x27t reach your server') + '</div></div></fieldset><div class="buttons-container"><button class="aui-button aui-button-primary" type="submit" id="btf-install">' + soy.$$escapeHtml('Connect Hipchat') + '</button><a class="cancel" href="#" id="btf-install-cancel">Cancel</a></div></form>';
};
if (goog.DEBUG) {
  HipChat.Templates.Configuration.btfInstall.soyTemplateName = 'HipChat.Templates.Configuration.btfInstall';
}


HipChat.Templates.Configuration.uninstallButton = function(opt_data, opt_ignored) {
  return '<button class="aui-button aui-button-subtle" id="hipchat-uninstall"><span class="aui-icon aui-icon-small aui-iconfont-delete">Configure</span> ' + soy.$$escapeHtml('Remove integration') + '</button>';
};
if (goog.DEBUG) {
  HipChat.Templates.Configuration.uninstallButton.soyTemplateName = 'HipChat.Templates.Configuration.uninstallButton';
}


HipChat.Templates.Configuration.inviteButton = function(opt_data, opt_ignored) {
  return '<input type="hidden" id="inviteButtonWaitingForMapping" value="' + soy.$$escapeHtml(opt_data.inviteButtonWaitingForMapping) + '"/><a class="aui-button aui-button-subtle hidden" id="hipchat-invite-button" href="' + soy.$$escapeHtml(opt_data.adminInviteUrl) + '"><span class="aui-icon aui-icon-small aui-iconfont-space-personal">Invite</span> ' + soy.$$escapeHtml('Invite users to Hipchat') + '</a>';
};
if (goog.DEBUG) {
  HipChat.Templates.Configuration.inviteButton.soyTemplateName = 'HipChat.Templates.Configuration.inviteButton';
}
;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/dropdown/Dropdown.js' */
define("jira/dropdown",["require"],function(i){function o(){try{return Boolean(n.require("jira/dialog/dialog").current)}catch(i){}return!1}var n=i("jira/util/top-same-origin-window")(window),t=i("jira/ajs/layer/layer-interactions"),e=i("jquery"),d=i("jira/util/key-code"),r=[],s={current:null,addInstance:function(){r.push(this)},hideInstances:function(){var i=this;e(r).each(function(){i!==this&&this.hideDropdown()})},getHash:function(){return this.hash||(this.hash={container:this.dropdown,hide:this.hideDropdown,show:this.displayDropdown}),this.hash},displayDropdown:function(){if(this.current!==this){this.hideInstances(),this.current=this,this.dropdown.css({display:"block"}),this.displayed=!0;var i=this.dropdown;o()||setTimeout(function(){var o=e(window),n=i.offset().top+i.prop("offsetHeight")-o.height()+10;o.scrollTop()<n&&e("html,body").animate({scrollTop:n},300,"linear")},100)}},hideDropdown:function(){!1!==this.displayed&&(this.current=null,this.dropdown.css({display:"none"}),this.displayed=!1)},init:function(i,o){var n=this;this.addInstance(this),this.dropdown=e(o),this.dropdown.css({display:"none"}),e(document).keydown(function(i){i.keyCode===d.TAB&&n.hideDropdown()}),i.target?e.aop.before(i,function(){n.displayed||n.displayDropdown()}):(n.dropdown.css("top",e(i).outerHeight()+"px"),i.click(function(i){n.displayed?n.hideDropdown():(n.displayDropdown(),i.stopPropagation()),i.preventDefault()})),e(document.body).click(function(){n.displayed&&n.hideDropdown()})}};return t.preventDialogHide(s),t.hideBeforeDialogShown(s),s}),AJS.namespace("JIRA.Dropdown",null,require("jira/dropdown")),AJS.namespace("jira.widget.dropdown",null,require("jira/dropdown"));;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/AutoComplete.js' */
define("jira/autocomplete/autocomplete",["jira/ajs/ajax/smart-ajax","jira/util/key-code","jira/util/objects","jquery"],function(e,t,o,n){return function(){var i,s=function e(t,o){e.t&&(clearTimeout(e.t),e.t=void 0),e.t=setTimeout(t,1e3*o)},r={9:!0,13:!0,14:!0,25:!0,27:!0,38:!0,40:!0,224:!0};return{dispatcher:function(){},getSavedResponse:function(){},saveResponse:function(){},renderSuggestions:function(){},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1},set:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])},completeField:function(e){e&&(this.field.val(e).focus(),this.field.trigger("change"))},textToSuggestionCursorPosition:function(){return this.field.val()},_makeRequest:function(t){var n=this,i=o.copyObject(t);return this.pendingRequest&&this.pendingRequest.abort(),i.complete=function(){n.pendingRequest=null},i.error=function(e){!e.aborted&&0!==e.status&&t.error&&t.error.apply(this,arguments)},this.pendingRequest=e.makeRequest(i)},addSuggestionControls:function(e){function o(e){d.dropdownController.displayed&&a(e.data.index)}function s(e){0===e.data.index&&(d.selectedIndex=-1),n(this).removeClass("active")}function r(e){d.completeField(d.suggestionNodes[e.data.index][1])}var d=this,l=function(e,t){var o=!1===d.autoSelectFirst?-1:0;return d.allowArrowCarousel?e>t?o:e<o?t:e:e>t?t:e<o?(d.responseContainer.scrollTop(0),o):e},a=function(e){void 0!==d.selectedIndex&&d.selectedIndex>-1&&d.suggestionNodes[d.selectedIndex][0].removeClass("active"),d.selectedIndex=l(e,d.suggestionNodes.length-1),d.selectedIndex>-1&&d.suggestionNodes[d.selectedIndex][0].addClass("active")},u=function(){return d.suggestionNodes&&d.suggestionNodes[d.selectedIndex]&&d.suggestionNodes[d.selectedIndex][0].hasClass("active")},p=function(e){d.responseContainer.is(":visible")&&e.keyCode===t.ENTER&&(u()&&!d.pendingRequest&&d.completeField(d.suggestionNodes[d.selectedIndex][1]),e.preventDefault(),e.stopPropagation())},c=function(e){if(d.responseContainer.is(":visible"))if(d.field[0]!==document.activeElement&&d.field.focus(),e.keyCode===t.DOWN){if(a(d.selectedIndex+1),d.selectedIndex>=0){var o=d.responseContainer.height(),n=d.suggestionNodes[d.selectedIndex][0].position().top+d.suggestionNodes[d.selectedIndex][0].outerHeight();n-o>0&&d.responseContainer.scrollTop(d.responseContainer.scrollTop()+n-o+2)}else d.responseContainer.scrollTop(0);e.preventDefault()}else if(e.keyCode===t.UP){if(a(d.selectedIndex-1),d.selectedIndex>=0){var i=d.suggestionNodes[d.selectedIndex][0].position().top;i<0&&d.responseContainer.scrollTop(d.responseContainer.scrollTop()+i-2)}e.preventDefault()}else e.keyCode===t.TAB&&(u()?(d.completeField(d.suggestionNodes[d.selectedIndex][1]),e.preventDefault()):d.dropdownController.hideDropdown())};if(e.length){this.selectedIndex=0,this.suggestionNodes=e;for(var h=0;h<d.suggestionNodes.length;h++){var f={instance:this,index:h};this.suggestionNodes[h][0].bind("mouseover",f,o).bind("mouseout",f,s).bind("click",f,r).bind("mousedown",function(e){e.preventDefault()})}this.keyboardHandlerBinded||(n(this.field).keypress(p),n(this.field).keydown(c),this.keyboardHandlerBinded=!0),a(!1===d.autoSelectFirst?-1:0),i=this}},clearResponseContainer:function(){this.responseContainer.empty(),this.suggestionNodes=void 0},delay:s,buildResponseContainer:function(){var e=this.field.parent().addClass("atlassian-autocomplete");this.responseContainer=n(document.createElement("div")),this.responseContainer.addClass("suggestions"),this.positionResponseContainer(),this.responseContainer.appendTo(e)},positionResponseContainer:function(){this.responseContainer.css({top:this.field.outerHeight()})},keyUpHandler:function(){function e(){this.responseContainer||this.buildResponseContainer(),this.dispatcher(this.field.val())}return function(o){return this.field.val().length>=this.minQueryLength&&(o.keyCode in r&&(!this.responseContainer||this.responseContainer.is(":visible")||o.keyCode!==t.UP&&o.keyCode!==t.DOWN)||e.call(this)),o}}(),addMultiSelectAdvice:function(e){var t=this,o=function e(o){if(!e.isAlerting){e.isAlerting=!0;var i=n(document.createElement("div")).css({float:"left",display:"none"}).addClass("warningBox").html("Oops! You have already entered the value <em>"+o+"</em>").appendTo(t.field.parent()).show("fast",function(){t.delay(function(){i.hide("fast",function(){i.remove(),e.isAlerting=!1})},4)})}};n.aop.before({target:this,method:"dispatcher"},function(t){var o=this.field.val();return t[0]=n.trim(o.slice(o.lastIndexOf(e)+1)),t}),n.aop.before({target:this,method:"completeField"},function(t){var i=t[0],s=this.field.val().split(e),r=n(s).map(function(){return n.trim(this)}).get();return!this.allowDuplicates&&new RegExp("(?:^|[\\s"+e+"])"+i+"\\s*"+e).test(this.field.val())?(o(i),r[r.length-1]=""):(r[r.length-1]=i,r[r.length]=""),t[0]=r.join(e.replace(/([^\s]$)/,"$1 ")),t})},addDropdownAdvice:function(){n.aop.after({target:this,method:"buildResponseContainer"},function(e){return this.dropdownController=JIRA.Dropdown.AutoComplete({target:this,method:"renderSuggestions"},this.responseContainer),n.aop.after({target:this.dropdownController,method:"hideDropdown"},function(){this.dropdown.removeClass("dropdown-ready"),clearTimeout(s.t)}),e}),n.aop.after({target:this,method:"renderSuggestions"},function(e){return e&&e.length>0?(this.dropdownController.displayDropdown(),this.maxHeight&&this.dropdownController.dropdown.prop("scrollHeight")>this.maxHeight?this.dropdownController.dropdown.css({height:this.maxHeight,overflowX:"visible",overflowY:"scroll"}):this.maxHeight&&this.dropdownController.dropdown.css({height:"",overflowX:"",overflowY:""}),this.dropdownController.dropdown.addClass("dropdown-ready")):this.dropdownController.hideDropdown(),e}),n.aop.after({target:this,method:"completeField"},this._afterCompleteField),n.aop.after({target:this,method:"keyUpHandler"},function(e){return this.field.val().length>=this.minQueryLength&&e.keyCode!==t.ESCAPE||!this.dropdownController||!this.dropdownController.displayed||(this.dropdownController.hideDropdown(),e.keyCode===t.ESCAPE&&e.stopPropagation()),e})},_afterCompleteField:function(e){return this.dropdownController.hideDropdown(),e},init:function(e){var o=this;this.set(e),this.field=this.field||n("#"+this.fieldID),this.field.attr("autocomplete","off").keyup(function(e){o.disabled||o.keyUpHandler(e)}).keydown(function(e){e.keyCode===t.ESCAPE&&o.responseContainer&&o.responseContainer.is(":visible")&&e.preventDefault()}).click(function(){i===o&&setTimeout(function(){o.dispatcher(o.field.val())},0)}).blur(function(){o.pendingRequest&&o.pendingRequest.abort()}).focus(function(e){o.disabled||(e.originalEvent&&e.originalEvent.relatedTarget&&setTimeout(function(){o.dispatcher(o.field.val())},0),i=o)}),this.addDropdownAdvice(),e.delimChar&&this.addMultiSelectAdvice(e.delimChar)}}}()}),AJS.namespace("jira.widget.autocomplete",null,require("jira/autocomplete/autocomplete")),AJS.namespace("JIRA.AutoComplete",null,require("jira/autocomplete/autocomplete"));;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/RESTAutoComplete.js' */
var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};define("jira/autocomplete/rest-autocomplete",["jira/autocomplete/autocomplete","jira/util/objects"],function(e,t){return function(){var o=t.begetObject(e);return o.dispatcher=function(e){var t=this;e.length<this.minQueryLength||(this.getSavedResponse(e)?(t.renderSuggestions(t.getSavedResponse(e)),t.responseContainer.scrollTop(0)):this.delay(function(){var o=t.getAjaxParams();o.data.query=e,o.success=function(o){t.saveResponse(e,o),t.responseContainer.scrollTop(0),t.renderSuggestions(o)},t._makeRequest(o)},t.queryDelay))},o.getAjaxParams=function(){},o.getSavedResponse=function(e){return this.requested||(this.requested={}),this.requested[e]},o.saveResponse=function(e,t){"string"==typeof e&&"object"===(void 0===t?"undefined":_typeof(t))&&(this.requested||(this.requested={}),this.requested[e]=t)},o}()}),AJS.namespace("jira.widget.autocomplete.REST",null,require("jira/autocomplete/rest-autocomplete")),AJS.namespace("JIRA.RESTAutoComplete",null,require("jira/autocomplete/rest-autocomplete"));;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/IssueAutoComplete.js' */
define("jira/autocomplete/issue-autocomplete",["jira/data/parse-options-from-fieldset","jira/field/issue-picker","jira/autocomplete/rest-autocomplete","jira/util/objects","wrm/context-path","jquery"],function(e,t,s,a,i,n){var r=i(),d=function(e){var t=a.begetObject(s);return t.getAjaxParams=function(){return{url:r+"/rest/api/2/issue/picker",data:e.ajaxData,dataType:"json",type:"GET"}},t.renderSuggestions=function(s){var a,i=[];if(this.clearResponseContainer(),s&&s.sections&&s.sections.length>0)return a=n("<ul/>").appendTo(this.responseContainer),n(s.sections).each(function(){var t=this,s=n("<div/>").attr("id",e.fieldID+"_s_"+t.id).addClass("yag").text(t.label);if(t.sub&&s.append(n("<span/>").addClass("yagt").text("("+t.sub+")")),a.append(n("<li/>").append(s).mouseover(function(){n(this).addClass("active")}).mouseout(function(){n(this).removeClass("active")})),t.msg){var d=n("<div/>").attr("id",e.fieldID+"_i_"+t.id+"_n").addClass("yad").text(t.msg);a.append(n("<li/>").append(d).mouseover(function(){n(this).addClass("active")}).mouseout(function(){n(this).removeClass("active")}))}t.issues&&t.issues.length>0&&n(t.issues).each(function(){var s;s=/^http/.test(this.img)?this.img:r+this.img;var d=n("<li/>").append(n("<div/>").attr("id",e.fieldID+"_i_"+t.id+"_"+this.key).addClass("yad").append(n("<table/>").addClass("yat").attr({cellpadding:"0",cellspacing:"0"}).append(n("<tr/>").append(n("<td/>").append(n("<img/>").attr("src",s))).append(n("<td/>").append(n("<div/>").addClass("yak").html(this.keyHtml))).append(n("<td/>").css("width","100%").html(this.summary)))));a.append(d),i.push([d,this.key])})}),t.addSuggestionControls(i),i},e.minQueryLength=1,e.queryDelay=.25,t.init(e),t};return d.init=function(){n("fieldset.issue-picker-params").each(function(){var s=e(n(this));n("#"+s.fieldId+"-container").add("#"+s.fieldName+"_container").find("a.popup-trigger").click(function(e){var a=r+"/secure/popups/IssuePicker.jspa?";a+="currentIssue="+s.currentIssueKey+"&",a+="singleSelectOnly="+s.singleSelectOnly+"&",a+="showSubTasks="+s.showSubTasks+"&",a+="showSubTasksParent="+s.showSubTaskParent,s.currentProjectId&&""!==s.currentProjectId&&(a+="&selectedProjectId="+s.currentProjectId),t.callback=function(e){var t,a=[];e=JSON.parse(e),s.fieldId&&a&&(t=n("#"+s.fieldId))&&(n.each(e,function(){a.push(this.value)}),t.val(a.join(", ")))};var i=window.open(a,"IssueSelectorPopup","status=no,resizable=yes,top=100,left=200,width=620,height=500,scrollbars=yes,resizable");i.opener=self,i.focus(),e.preventDefault()}),s.fieldId||(s.fieldId=s.fieldName),!0===s.issuePickerEnabled&&d({fieldID:s.fieldId,delimChar:!0===s.singleSelectOnly?void 0:",",ajaxData:s})})},d}),AJS.namespace("jira.widget.autocomplete.Issues",null,require("jira/autocomplete/issue-autocomplete")),AJS.namespace("JIRA.IssueAutoComplete",null,require("jira/autocomplete/issue-autocomplete"));;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/UserAutoComplete.js' */
define("jira/autocomplete/user-autocomplete",["jira/autocomplete/rest-autocomplete","jira/data/parse-options-from-fieldset","jira/util/browser","jira/util/elements","jira/util/objects","wrm/context-path","jquery"],function(e,t,i,r,o,a,s){"use strict";var n=a(),l=function(t){function a(e){var t=!1,i=e.closest("form");return i.length&&i.hasClass("submitting")&&(t=!0),t}var l=o.begetObject(e);return l.getAjaxParams=function(){return{url:n+"/rest/api/1.0/users/picker",data:{fieldName:t.fieldID,fieldConfigId:t.fieldConfigID,projectId:t.projectId},dataType:"json",type:"GET"}},l.renderSuggestions=function(e){if(a(this.field)||!i.isSelenium()&&!r.elementIsFocused(this.field))return!1;var t,o=[];return this.clearResponseContainer(),e&&e.users&&e.users.length>0&&(t=s("<ul/>").appendTo(this.responseContainer),s(e.users).each(function(){o.push([s("<li/>").html(this.html).appendTo(t),this.name])})),e.footer&&this.responseContainer.append(s("<div/>").addClass("yui-ac-ft").html(e.footer).css("display","block")),o.length>0&&(l.addSuggestionControls(o),s(".atlassian-autocomplete div.yad, .atlassian-autocomplete .labels li").textOverflow({autoUpdate:!0})),o},t.minQueryLength=2,t.queryDelay=.25,l.init(t),l};return l.init=function(e){s("fieldset.user-picker-params",e).each(function(){var i=t(s(this)),r=i.fieldId||i.fieldName,o=s("#"+r+"_container");o.find("a.popup-trigger").click(function(e){var t,a=n;if(e.preventDefault(),i.formName||(i.formName=o.find("#"+r).parents("form").attr("name")),i.actionToOpen?a+=i.actionToOpen:a+="/secure/popups/UserPickerBrowser.jspa",a+="?formName="+i.formName+"&",a+="multiSelect="+i.multiSelect+"&",a+="decorator=popup&",a+="element="+r,i.fieldConfigId&&(a+="&fieldConfigId="+i.fieldConfigId),i.projectId)if(s.isArray(i.projectId))for(var l in i.projectId)a+="&projectId="+l;else a+="&projectId="+i.projectId;t=window.open(a,"UserPicker","status=yes,resizable=yes,top=100,left=100,width=800,height=750,scrollbars=yes"),t.opener=self,t.focus()}),!0===i.userPickerEnabled&&l({field:e?e.find("#"+r):null,fieldID:r,fieldConfigID:i.fieldConfigId,projectId:i.projectId,delimChar:!1===i.multiSelect?void 0:",",ajaxData:{fieldName:i.fieldName}})})},l}),AJS.namespace("jira.widget.autocomplete.Users",null,require("jira/autocomplete/user-autocomplete")),AJS.namespace("JIRA.UserAutoComplete",null,require("jira/autocomplete/user-autocomplete"));;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/initAutoCompleteFields.js' */
!function(){"use strict";var e=require("jquery"),r=require("jira/data/parse-options-from-fieldset"),i=require("jira/util/events"),t=require("jira/util/events/reasons"),a=require("jira/util/events/types"),s=require("jira/autocomplete/issue-autocomplete"),l=require("jira/autocomplete/user-autocomplete"),o=require("wrm/context-path"),u=o();i.bind(a.NEW_CONTENT_ADDED,function(e,r,i){i!==t.panelRefreshed&&(l.init(r),s.init(r))}),i.bind(a.NEW_CONTENT_ADDED,function(i,a,s){s!==t.panelRefreshed&&e("fieldset.user-searcher-params",a).each(function(){var i=r(e(this)),t=e("#"+i.fieldId+"_container",a);if(!0===i.userPickerEnabled)var s=l({fieldID:i.fieldId,delimChar:!0===i.multiSelect?",":void 0,ajaxData:{fieldName:i.fieldName}});var o=function(r){var t=e("#"+i.fieldId,a),l=e("#"+i.fieldId+"Image",a),o=e("#"+i.fieldId+"GroupImage",a),u=e("#"+i.fieldId+"_desc",a);"select.list.none"===r?(t.val("").attr("disabled","true"),l.hide(),o.hide(),u.hide()):(t.removeAttr("disabled"),"select.list.group"===r?(l.hide(),o.show(),!0===i.userPickerEnabled&&(s.disable(),u.hide())):(l.show(),o.hide(),!0===i.userPickerEnabled&&(s.enable(),u.show())))};e("#"+i.userSelect,a).change(function(){var r=e(this).find("option:selected").attr("rel");o(r)}).find("option:selected").each(function(){o(e(this).attr("rel"))}),t.find("a.user-popup-trigger").click(function(e){var r=u+"/secure/popups/UserPickerBrowser.jspa?";r+="formName="+i.formName+"&",r+="multiSelect="+i.multiSelect+"&",r+="decorator=popup&",r+="element="+i.fieldId;var t=window.open(r,"UserPicker","status=yes,resizable=yes,top=100,left=100,width=800,height=750,scrollbars=yes");t.opener=self,t.focus(),e.preventDefault()}),t.find("a.group-popup-trigger").click(function(e){var r=u+"/secure/popups/GroupPickerBrowser.jspa?";r+="formName="+i.formName+"&",r+="multiSelect="+i.multiSelect+"&",r+="decorator=popup&",r+="element="+i.fieldId;var t=window.open(r,"GroupPicker","status=yes,resizable=yes,top=100,left=100,width=800,height=750,scrollbars=yes");t.opener=self,t.focus(),e.preventDefault()})})})}();;
;
/* module-key = 'jira.webresources:jquery-selection', location = '/includes/jquery/plugins/selection/jquery.selection.js' */
require(["jquery"],function(t){if(document.selection){var e=function(t){return t.replace(/\u000D/g,"")};t.fn.selection=function(t){var e=this[0];if(this.focus(),!e)return!1;if(null==t)return document.selection.createRange().text;var n=e.scrollTop,s=document.selection.createRange();s.text=t,s.select(),e.focus(),e.scrollTop=n},t.fn.selectionRange=function(t,n){var s=this[0];this.focus();var r=document.selection.createRange();if(null==t){var i=this.val(),o=i.length,l=r.duplicate();l.moveToElementText(s),l.setEndPoint("StartToEnd",r);var c=o-e(l.text).length;l.setEndPoint("StartToStart",r);var a=o-e(l.text).length;return c!=a&&"\n"==i.charAt(c+1)&&(c+=1),{end:c,start:a,text:i.substring(a,c),textBefore:i.substring(0,a),textAfter:i.substring(c)}}r.moveToElementText(s),r.collapse(!0),r.moveStart("character",t),r.moveEnd("character",n-t),r.select()}}else t.fn.selection=function(t){var e=this[0];if(!e)return!1;if(null==t)return!!e.setSelectionRange&&e.value.substring(e.selectionStart,e.selectionEnd);var n=e.scrollTop;if(e.setSelectionRange){var s=e.selectionStart;e.value=e.value.substring(0,s)+t+e.value.substring(e.selectionEnd),e.selectionStart=s,e.selectionEnd=s+t.length}e.focus(),e.scrollTop=n},t.fn.selectionRange=function(t,e){if(null==t){var n={start:this[0].selectionStart,end:this[0].selectionEnd},s=this.val();return n.text=s.substring(n.start,n.end),n.textBefore=s.substring(0,n.start),n.textAfter=s.substring(n.end),n}this[0].selectionStart=t,this[0].selectionEnd=e};t.fn.wrapSelection=function(t,e){this.selection(t+this.selection()+(e||""))}});;
;
/* module-key = 'jira.webresources:jqlautocomplete', location = '/includes/jira/autocomplete/JQLAutoComplete.js' */
var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};define("jira/jql/jql-grammar",function(){"use strict";var e={};return e.jql_order_by=[{value:"ORDER BY",displayName:"ORDER BY"}],e.jql_operators=[{value:"=",displayName:"="},{value:"!=",displayName:"!="},{value:"~",displayName:"~"},{value:"<=",displayName:"&lt;="},{value:">=",displayName:"&gt;="},{value:">",displayName:"&gt;"},{value:"<",displayName:"&lt;"},{value:"!~",displayName:"!~"},{value:"is not",displayName:"is not"},{value:"is",displayName:"is"},{value:"not in",displayName:"not in"},{value:"in",displayName:"in"},{value:"was",displayName:"was"},{value:"was not",displayName:"was not"},{value:"was in",displayName:"was in"},{value:"was not in",displayName:"was not in"},{value:"changed",displayName:"changed"}],e.jql_logical_operators=[{value:"AND",displayName:"AND"},{value:"OR",displayName:"OR"}],e.jql_logical_operators_and_order_by=e.jql_logical_operators.concat(e.jql_order_by),e.jql_order_by_direction=[{value:"ASC",displayName:"ASC"},{value:"DESC",displayName:"DESC"}],e.empty_operand=[{value:"EMPTY",displayName:"EMPTY",types:["java.lang.Object"]}],e.jql_not_logical_operator=[{value:"NOT",displayName:"NOT"}],e.jql_was_predicates=[{value:"AFTER",displayName:"AFTER",type:"java.util.Date",supportsList:"false"},{value:"BEFORE",displayName:"BEFORE",type:"java.util.Date",supportsList:"false"},{value:"BY",displayName:"BY",type:"com.atlassian.crowd.embedded.api.User",supportsList:"false",auto:"true"},{value:"DURING",displayName:"DURING",type:"java.util.Date",supportsList:"true"},{value:"ON",displayName:"ON",type:"java.util.Date",supportsList:"false"}],e.jql_changed_predicates=e.jql_was_predicates.concat([{value:"FROM",displayName:"FROM",type:"java.lang.String",supportsList:"true",auto:"true"},{value:"TO",displayName:"TO",type:"java.lang.String",supportsList:"true",auto:"true"}]),e.jql_was_predicates_and_order_by=e.jql_was_predicates.concat(e.jql_logical_operators_and_order_by),e.jql_was_predicates_and_logical_operators=e.jql_was_predicates.concat(e.jql_logical_operators),e.jql_changed_predicates_and_order_by=e.jql_changed_predicates.concat(e.jql_logical_operators_and_order_by),e.jql_changed_predicates_and_logical_operators=e.jql_changed_predicates.concat(e.jql_logical_operators),e.REGEXP_ANDS=/^AND\s/i,e.REGEXP_ORS=/^OR\s/i,e.REGEXP_NOTS=/^NOT\s/i,e.REGEXP_SNOT=/^\s+not/i,e.REGEXP_SIN=/^\s+in/i,e.REGEXP_SNOT_IN=/^\s+(not\s+in|not|in)/i,e.REGEXP_COMMA_DELIMITER=/^\s*,/,e.REGEXP_ASCENDING=/^\s+asc/i,e.REGEXP_DESCENDING=/^\s+desc/i,e.REGEXP_ORDER_BY=/^order\s+by/i,e.REGEXP_WHITESPACE=/^\s/,e.REGEXP_UNICODE=/^u[a-fA-F0-9]{4}/,e.REGEXP_FIELD_NAME=/^\s-\scf\[\d\d\d\d\d\]/,e.REGEXP_NEW_LINE=/[\r\n]/,e.REGEXP_NUMBER=/\d/,e.REGEXP_TOKEN_CHAR=/[^=!~<>(),\s&|\]]/,e.REGEXP_SPECIAL_CHAR=/[{}*\/%+$#@?;\][]/,e.REGEXP_SPACE_OR_ELSE=/[\s(]/,e.REGEXP_CHARS_TO_ESCAPE=/[^trn"'\\\s]/,e.REGEXP_NOTSTART=/^NO?$/i,e.REGEXP_INSTART=/^IN?$/i,e.REGEXP_PREDICATE=/^(after|before|by|during|from|on|to)/i,e.version_field_type="com.atlassian.jira.project.version.Version",e.jql_text_operator_names=["~","!~"],e}),define("jira/autocomplete/jql-autocomplete",["jira/util/formatter","jira/autocomplete/autocomplete","jira/jql/jql-grammar","jira/jql/util","jira/jql/operator-util","jira/util/data/meta","jira/util/objects","jira/util/users/logged-in-user","jira/featureflags/feature-manager","jquery","underscore","jira/util/logger","wrm/context-path"],function(e,t,r,s,a,n,i,l,o,d,u,g,c){var h=c();return function(c){var p,O=i.begetObject(t),f=c.parser,m=d.grep(c.jqlFieldNames,function(e){return e.searchable}),S=d.grep(c.jqlFieldNames,function(e){return e.orderable}),L=c.jqlFunctionNames,C=d("#"+c.errorID),N=0,y=d("#jqlcolumnnum"),E=d("#jqlrownum"),R=c.autoCompleteUrl||h+"/rest/api/2/jql/autocompletedata/suggestions",I=[],_=[];if(O.textToSuggestionCursorPosition=function(){return O.field.selectionRange().textBefore},O.pushSuggestionsOnHtmlStack=function(e,t,r,s,a){for(var n=Math.min(15,e.length),i=0;i<n;i++){var l,o;if(e[i].value){var d=e[i];l=p&&a?(p.getNeedsOpenParen()?"(":"")+d.value:d.value,o=d.displayName}else o=e[i],l=o;t.push(l),r.push('<li id="',s,i,'">',o,"</li>")}},O.setAutoSelectFirst=function(e){var t=O.getReplacementStartIndex(p,""),r=O.field.selectionRange().end,s=O.field.val().substring(t,r);O.autoSelectFirst=O.shouldSelectFirstValue(O.field.val(),p,s,e)},O.shouldSelectFirstValue=function(e,t,r,a){return O.isSmartAutoSelectFirstEnabled()?!(0===r.length&&t.getIsInSubmittableState()):!(0===r.length||a&&a.length>0&&s.equalsIgnoreCase(r,a[0][1]))},O.renderSuggestions=function(t,r,s){var a=[];if(t instanceof Array){if(t.length<1&&r&&r.length<1&&s&&s.length<1)return a;var i=["<ul>"];s&&s.length>0&&O.pushSuggestionsOnHtmlStack(s,a,i,"jql_operator_suggest_",!1),O.pushSuggestionsOnHtmlStack(t,a,i,"jql_value_suggest_",!0),r&&r.length>0&&O.pushSuggestionsOnHtmlStack(r,a,i,"jql_function_suggest_",!1),i.push("</ul>");var l=d('<span class="esc-prompt">').text("Hit Esc to close"),o=d('<a class="syntax-help" target="_jiraHelp"></a>').attr("title",n.get("advanced-search-help-title")).attr("href",n.get("advanced-search-help-url")).text("Syntax Help").append(l),u=d('<div class="syntax-help-container">').append(o);O.responseContainer.html(i.join("")).append(u).find("li").each(function(e){a[e]=[d(this),a[e]]}),O.setAutoSelectFirst(a),O.addSuggestionControls(a),g.trace("jira.jql.suggestions.done")}return a},O.needsSpaceInCompletion=function(){return!(p.isInsideList()||p.getNeedsOpenParen()||p.getNeedsOrderByDirection())},O.completeField=function(e){var t,r=O.getReplacementStartIndex(p,e),s=O.getReplacementEndIndex(p,r);t=O.needsSpaceInCompletion()?e+" ":e,O.replaceValue(r,s,t);var a=f.parse(O.field.val());O.updateParseIndicator(a)},O._afterCompleteField=function(e){return t._afterCompleteField.call(this),O.needsSpaceInCompletion()&&O.dispatcher(O.field.val()),e},O.prepareOperandSuggestions=function(e,t,r,n,i){if(e){var l=N,o=null==i?null===p.getLastOperand()?"":s.stripEscapeCharacters(p.getLastOperand()):i,d=t+":"+o,u={fieldName:s.stripEscapeCharacters(t)};null===p.getLastOperand()&&null===i||(u.fieldValue=o);var g=a.isWasOperator(p.getLastOperator());O.getSavedResponse(d)?O.renderSuggestionsForOperands(o,O.getSavedResponse(d),r,n,l):(O.dropdownController.dropdown.removeClass("dropdown-ready"),O.delay(function(){O._makeRequest({url:R,dataType:"json",data:u,success:function(e){var t;if(t=null!==e&&null!==e.results?e.results:[],g){var s=u.fieldValue;t=O.appendEmpty(s,t)}O.saveResponse(d,t),O.renderSuggestionsForOperands(o,t,r,n,l)},error:function(){O.renderSuggestionsForOperands(o,[],r,n,l)}})},O.queryDelay))}else O.renderSuggestionsForOperands(s.stripEscapeCharacters(p.getLastOperand()),[],r,n,N)},O.preparePredicateSuggestions=function(e,t){void 0===t&&(t=null);var r=O.slimListForPredicates(t,L,e);O.boldMatchingString(t,r);var a=null==t?null===p.getLastOperand()?"":s.stripEscapeCharacters(p.getLastOperand()):t,n=e+":"+a,i={predicateName:s.stripEscapeCharacters(e)};null===p.getLastOperand()&&null===t||(i.predicateValue=a),null!==p.getLastFieldName()&&(i.fieldName=p.getLastFieldName(),n=p.getLastFieldName()+":"+n),O.predicateSupportsAutoComplete(e)?O.getSavedResponse(n)?O.renderSuggestions(O.getSavedResponse(n),r):(O.dropdownController.dropdown.removeClass("dropdown-ready"),O.delay(function(){O._makeRequest({url:R,dataType:"json",data:i,success:function(e){var t;t=null!==e&&null!==e.results?e.results:[];var s=i.predicateValue;t=O.appendEmpty(s,t),O.saveResponse(n,t),O.renderSuggestions(t,r)},error:function(){O.renderSuggestionsForOperands(a,[])}})},O.queryDelay)):O.renderSuggestions([],r)},O.incompleteOperator=function(){var e=p.getTokens();return null==e||e.length<2?"":(e=O.textToSuggestionCursorPosition().split(" "),e.length>2?e[e.length-1]:"")},O.incompletePredicateValue=function(){var e=p.getTokens();return null==e||e.length<3?"":(e=O.textToSuggestionCursorPosition().split(/[\s(,]+/),e.length>3?e[e.length-1]:"")},O.appendEmpty=function(e,t){var s=O.slimListForMapResults(e,r.empty_operand,!0);return null!=e&&O.boldMatchingString(e,s),t.length<15?t=t.concat(s):t[14]=s[0],t},O.dispatcher=function(e){var t,n,i,l=d(O.field).selectionRange(),o=e.substring(0,l.start),u=f.parse(o);if(p=u.getResult(),N++,p.getNeedsField())i=p.getLastFieldName()||!I.length?m:I,O.renderSuggestionsFromMap(s.stripEscapeCharacters(p.getLastFieldName()),i,r.jql_not_logical_operator,!0);else if(p.getNeedsOperatorOrOperand()){n=a.isEmptyOnlyOperator(p.getLastOperator())?r.empty_operand:L,u.calcLastOperandStartIndex();var g=u.getParsedOperator(),c=O.getSuggestionsForOperators(g,r.jql_operators);if(c&&c.length>0){var h=O.incompleteOperator();O.prepareOperandSuggestions(!0,p.getLastFieldName(),n,c,h)}}else if(p.getNeedsOperator())O.renderSuggestionsForOperators(p.getLastOperator(),r.jql_operators);else if(p.getNeedsPredicateOperand()){var C=p.getLastWasPredicate();O.preparePredicateSuggestions(C,s.stripEscapeCharacters(p.getLastOperand()))}else if(p.getNeedsLogicalOperator())p.getNeedsWasPredicate()?p.getNeedsOrderBy()?(t=null===p.getLastOrderBy()?p.getLastWasPredicate():p.getLastOrderBy(),"was"===p.getLastOperator()?O.renderSuggestionsFromMap(t,r.jql_was_predicates_and_order_by,!1):O.renderSuggestionsFromMap(t,r.jql_changed_predicates_and_order_by,!1)):"was"===p.getLastOperator()?O.renderSuggestionsFromMap(p.getLastWasPredicate(),r.jql_was_predicates_and_logical_operators,!1):O.renderSuggestionsFromMap(p.getLastWasPredicate(),r.jql_changed_predicates_and_logical_operators,!1):p.getNeedsOrderBy()?(t=null===p.getLastOrderBy()?p.getLastLogicalOperator():p.getLastOrderBy(),O.renderSuggestionsFromMap(t,r.jql_logical_operators_and_order_by,!1)):O.renderSuggestionsFromMap(p.getLastLogicalOperator(),r.jql_logical_operators,!1);else if(p.getNeedsOrderByField())i=p.getLastOrderByFieldName()||!_.length?S:_,O.renderSuggestionsFromMap(s.stripEscapeCharacters(p.getLastOrderByFieldName()),i,!0);else if(p.getNeedsOrderByDirection())O.renderSuggestionsFromMap(p.getLastOrderByDirection(),r.jql_order_by_direction,!1);else if(p.getNeedsOperand()){var y=p.getLastFieldName(),E=!1;if(!a.isEmptyOnlyOperator(p.getLastOperator()))for(var R=d.inArray(p.getLastOperator(),r.jql_text_operator_names)>-1,P=0;P<m.length;P++)if(s.equalsIgnoreCase(s.getUnquotedString(m[P].value),y)||m[P].cfid&&s.equalsIgnoreCase(m[P].cfid,y)){E=O.calculateAutocompleteFlag(R,m[P].types[0],m[P].auto);break}n=a.isEmptyOnlyOperator(p.getLastOperator())?r.empty_operand:L,O.prepareOperandSuggestions(E,y,n,{})}else p.getNeedsOrderBy()?O.renderSuggestionsFromMap(p.getLastOrderBy(),r.jql_logical_operators_and_order_by,!1):O.dropdownController.hideDropdown();O.parse(e)},O.calculateAutocompleteFlag=function(e,t,s){return(!e||void 0===t||t!==r.version_field_type)&&s},O.parse=function(e){var t=f.parse(e);return O.updateParseIndicator(t),O.updateColumnLineCount(),t.getResult()},O.renderSuggestionsFromMap=function(e,t,r,s){r||(r={});var a=O.slimListForMapResults(e,t,s),n=O.slimListForMapResults(e,r,s);O.boldMatchingString(e,n),O.boldMatchingString(e,a),O.renderSuggestions(a,n),0===a.length&&0===n.length&&O.dropdownController.hideDropdown()},O.getSuggestionsForOperators=function(e,t){for(var r,a=O.slimListForMapResults(e,t,!1),n=p.getLastFieldName(),i=0;i<m.length;i++)if(s.equalsIgnoreCase(s.getUnquotedString(m[i].value),n)||m[i].cfid&&s.equalsIgnoreCase(m[i].cfid,n)){r=m[i].operators;break}return r&&(a=d.grep(a,function(e){return d.inArray(e.value,r)>-1})),O.boldMatchingString(e,a),a},O.renderSuggestionsForOperators=function(e,t){var r=O.getSuggestionsForOperators(e,t);O.renderSuggestions(r),0===r.length&&O.dropdownController.hideDropdown()},O.renderSuggestionsForOperands=function(e,t,r,s,a){if(a===N){var n=O.slimListForFunctionResults(e,r,p.getLastOperator());O.boldMatchingString(e,n),O.renderSuggestions(t,n,s),0===t.length&&0===n.length&&0===s.length&&O.dropdownController.hideDropdown()}},O.boldMatchingString=function(e,t){if(null!=e&&0!==t.length){for(var r=e.length,s=0,a=r;s<a;s++)switch(e.charAt(s)){case"<":case">":r+=3;break;case"&":r+=4;break;case'"':r+=5}for(var n=0;n<t.length;n++)if(t[n].displayName){var i=t[n].displayName;t[n]={value:t[n].value,displayName:"<b>"+i.substring(0,r)+"</b>"+i.substring(r)}}else t[n]={value:t[n],displayName:"<b>"+t[n].substring(0,r)+"</b>"+t[n].substring(r)}}},O.getReplacementStartIndex=function(e,t){var r,s=d(O.field);return r=e.getNeedsField()?e.getLastFieldNameStartIndex():e.getNeedsOperatorOrOperand()?e.getNeedsOperator()&&a.isWasOperator(t)?e.getLastOperatorStartIndex():e.getLastOperandStartIndex():e.getNeedsOperand()?e.getLastOperandStartIndex():e.getNeedsOperator()?e.getLastOperatorStartIndex():e.getNeedsOrderByField()?e.getLastOrderByFieldNameStartIndex():e.getNeedsOrderByDirection()?e.getLastOrderByDirectionStartIndex():e.getNeedsPredicateOperand()?e.getLastOperandStartIndex():e.getNeedsLogicalOperator()?null!==e.getLastLogicalOperatorStartIndex()&&0!==e.getLastLogicalOperatorStartIndex()?e.getLastLogicalOperatorStartIndex():null!==e.getLastOrderBy()&&0!==e.getLastOrderByStartIndex()?e.getLastOrderByStartIndex():null!=e.getLastWasPredicate()&&0!==e.getLastWasPredicateStartIndex()?e.getLastWasPredicateStartIndex():!0===e.getMustBeOperatorOrPredicate()?s.selectionRange().start:s.selectionRange().start-1:e.getNeedsWasPredicate()?e.getLastWasPredicateStartIndex():e.getNeedsOrderBy()?e.getLastOrderByStartIndex():s.selectionRange().start-1,null!=r?r:s.selectionRange().start},O.getReplacementEndIndex=function(e,t){var s=d(O.field),a=s.selectionRange(),n=null;if(a.start===a.end&&a.end!==O.field.val().length&&t<a.start){var i=e.getTokens().length-1,l=f.parse(O.field.val()),o=l.getResult().getTokens()[i];if(null!==o&&"("!==o&&")"!==o){for(var u=O.field.val(),g=u.substring(t,u.length),c=g.split(""),h=0,p=0;p<c.length&&r.REGEXP_WHITESPACE.test(c[p]);p++)h++;n=t+o.length+h}}return null===n&&(n=a.end),n<t&&(O.replaceValue(t,n," "),n=t),n},O.replaceValue=function(e,t,r){var s=d(O.field);s.selectionRange(e,t),d.browser.webkit?document.execCommand("insertText",!1,r):s.selection(r);var a=s.selectionRange().end;s.selectionRange(a,a)},O.slimListForMapResults=function(e,t,r){var a=s.htmlEscape(e),n=d.grep(t,function(e){return s.startsWithIgnoreCaseNullsMeanAll(a,e.displayName)});return r||1!==n.length||s.startsWithNotEqualsIgnoreCaseNullMeansAll(a,n[0].displayName)?n:{}},O.slimListForFunctionResults=function(e,t,n){for(var i,l=p.getLastFieldName(),o=0;o<m.length;o++)if(s.equalsIgnoreCase(s.getUnquotedString(m[o].value),l)||m[o].cfid&&s.equalsIgnoreCase(m[o].cfid,l)){i=m[o].types;break}var u=d.grep(t,function(t){if(t.isList&&!a.isListSupportingOperator(n)||!t.isList&&a.isListSupportingOperator(n))return!1;if(!i)return!1;var l=d.inArray("java.lang.Object",t.types)>-1||d.inArray("java.lang.Object",i)>-1;if(d.inArray(n,r.jql_text_operator_names)>-1&&d.inArray(r.version_field_type,i)>-1)return l;for(var o=0;o<i.length&&!l;o++)l=-1!==d.inArray(i[o],t.types);return!!l&&(s.startsWithIgnoreCaseNullsMeanAll(e,t.value)||s.startsWithIgnoreCaseNullsMeanAll(e,t.displayName))});return 1!==u.length||s.startsWithNotEqualsIgnoreCaseNullMeansAll(e,u[0].displayName)?u:{}},O.slimListForPredicates=function(e,t,a){for(var n,i,l=0;l<r.jql_changed_predicates.length;l++)if(s.equalsIgnoreCase(s.getUnquotedString(r.jql_changed_predicates[l].value),a)){n=r.jql_changed_predicates[l].type,i=r.jql_changed_predicates[l].supportsList;break}var o=d.grep(t,function(t){return(void 0===t.isList||!(t.isList&&i||!t.isList&&i))&&(!(-1===d.inArray(n,t.types))&&(s.startsWithIgnoreCaseNullsMeanAll(e,t.value)||s.startsWithIgnoreCaseNullsMeanAll(e,t.displayName)))});return 1!==o.length||s.startsWithNotEqualsIgnoreCaseNullMeansAll(e,o[0].displayName)?o:{}},O.predicateSupportsAutoComplete=function(e){for(var t,a=0;a<r.jql_changed_predicates.length;a++)if(s.equalsIgnoreCase(s.getUnquotedString(r.jql_changed_predicates[a].value),e)){t=r.jql_changed_predicates[a].auto;break}return t},O.getSavedResponse=function(e){return this.requested||(this.requested={}),this.requested[e]},O.saveResponse=function(e,t){"string"==typeof e&&"object"===(void 0===t?"undefined":_typeof(t))&&(this.requested||(this.requested={}),this.requested[e]=t)},O.startsWithIgnoreCase=function(e,t){return!(null===t||null===e||t.length<e.length)&&e.toLowerCase()==t.substr(0,e.length).toLowerCase()},O.updateParseIndicator=function(e){e.getParseError()?C.attr("title",e.getResult().getParseErrorMsg()).removeClass("jqlgood").addClass("jqlerror"):C.attr("title","").removeClass("jqlerror").addClass("jqlgood")},O.updateColumnLineCount=function(){var e=d(O.field),t=0;if(O.field[0]===document.activeElement){t=e.selectionRange().start}else t=O.field[0].value.length;for(var s=1,a=1,n=O.field.val(),i=0;i<t;i++)r.REGEXP_NEW_LINE.test(n.charAt(i))?(s++,a=1):a++;y.text(a),E.text(s)},O.isSuggestRecentFieldsEnabled=function(){return o.isFeatureEnabled("jira.jql.suggestrecentfields")},O.isSmartAutoSelectFirstEnabled=function(){return o.isFeatureEnabled("jira.jql.smartautoselectfirst")},O.init(c),O.isSuggestRecentFieldsEnabled()){var P=null,v=function(e){var t=e.value.sort();I=d.grep(m,function(e){return u.contains(t,s.getUnquotedString(e.value))}),_=d.grep(S,function(e){return u.contains(t,s.getUnquotedString(e.value))})},j=function(){l.isAnonymous()||d.ajax({url:h+"/rest/api/2/user/properties/jqlValues?username="+l.username()}).done(v)};v(s.getRecentFields()),P=setInterval(j,5e3),O.field.focus(function(){j(),P||(P=setInterval(j,5e3))}).blur(function(){P&&(clearInterval(P),P=null)})}return O}}),define("jira/jql/util",["jira/jql/jql-grammar","wrm/data"],function(e,t){"use strict";var r={};return r.htmlEscape=function(e){if(null==e)return null;for(var t="",r=e.split(""),s=0;s<r.length;s++)"<"===r[s]?t+="&lt;":">"===r[s]?t+="&gt;":"&"===r[s]?t+="&amp;":'"'===r[s]?t+="&quot;":t+=r[s];return t},r.stripEscapeCharacters=function(t){if(null==t)return t;for(var r="",s=t.split(""),a=0;a<s.length&&("\\"!==s[a]||e.REGEXP_UNICODE.test(t.substring(a,t.length))||!(++a>=t.length));a++)r+=s[a];return r},r.equalsIgnoreCase=function(e,t){return null===e&&null===t||null!==e&&null!==e&&e.toLowerCase()===t.toLowerCase()},r.startsWithIgnoreCaseNullsMeanAll=function(e,t){return null===t||null===e||!(t.length<e.length)&&e.toLowerCase()==t.substr(0,e.length).toLowerCase()},r.startsWithNotEqualsIgnoreCaseNullMeansAll=function(t,r){if(null===r||null===t)return!0;if(r.length<t.length)return!1;if(t.toLowerCase()==r.substr(0,t.length).toLowerCase()){var s=null;return s=e.REGEXP_FIELD_NAME.test(r.substr(t.length,r.length))?r.substr(0,t.length):r,t.toLowerCase()!=s.toLowerCase()}return!1},r.getRecentFields=function(){return null==r.recentValues&&(r.recentValues=t.claim("jira.core:jqlautocomplete-data.jql.autocomplete.recentFields")),r.recentValues},r.getUnquotedString=function(e){var t=null!=e&&e.length>=3&&"\\"!==e.charAt(e.length-2);return null!=e&&'"'===e.charAt(0)?(e=e.substring(1,e.length),'"'===e.charAt(e.length-1)&&t&&(e=e.substring(0,e.length-1))):null!=e&&"'"===e.charAt(0)&&(e=e.substring(1,e.length),"'"===e.charAt(e.length-1)&&t&&(e=e.substring(0,e.length-1))),e},r}),define("jira/jql/operator-util",function(){"use strict";var e={};return e.isListSupportingOperator=function(e){return"in"===e||"not in"===e||"was not in"===e||"was in"===e},e.isEmptyOnlyOperator=function(e){return"is"===e||"is not"===e},e.isWasOperator=function(e){return"was"===e||"was in"===e||"was not in"===e||"was not"===e},e.isChangedOperator=function(e){return"changed"===e},e.isHistoryOperator=function(t){return e.isWasOperator(t)||e.isChangedOperator(t)},e}),define("jira/jql/jql-parser",["jira/jql/jql-grammar","jira/jql/jql-parse-token","jira/jql/operator-util","jira/jql/util","jquery"],function(e,t,r,s,a){return function(n){var i=n;return{parse:function(e){var r=t();return r.init(e),this.jql(r),r},orderByClause:function(t){var r=t.remainingString(),s=r.match(e.REGEXP_ORDER_BY);if(s){var a=r.substring(0,s[0].length);t.consumeCharacters(a.length),t.getResult().setLastOrderBy(a,t),t.isComplete()?(t.getResult().resetLogicalOperators(),t.setParseError()):(r=t.remainingString(),e.REGEXP_WHITESPACE.test(r)?(this.chewWhitespace(t),this.orderByFields(t)):(t.getResult().resetLogicalOperators(),t.setParseError()))}else t.consumeCharacters(r.length),t.getResult().setLastOrderBy(r,t),t.setParseError()},orderByFields:function(e){if(this.orderByField(e),this.chewWhitespace(e),e.isComplete())e.getResult().getNeedsOrderByField()||e.getResult().setLastOrderByDirection("",e);else{var t=e.remainingString();this.startsWithIgnoreCase(",",t)?(e.consumeCharacter(),this.orderByFields(e),this.chewWhitespace(e)):(t=e.remainingString(),null!==t&&e.consumeCharacters(t.length),e.getResult().setNeedsOrderByDirection(),e.getResult().setLastOrderByDirection(t,e),e.setParseError())}},orderByField:function(t){this.chewWhitespace(t);var r=this.fieldName(t);if(0!==r.length){t.getResult().setLastOrderByFieldName(r,t);var s=t.remainingString();t.isComplete()||e.REGEXP_COMMA_DELIMITER.test(s)?(t.getResult().setNeedsOrderByField(),this.chewWhitespace(t)):e.REGEXP_ASCENDING.test(s)?(this.chewWhitespace(t),t.consumeCharacters(3),t.getResult().setLastOrderByDirection("asc",t),t.getResult().setNeedsOrderByComma()):e.REGEXP_DESCENDING.test(s)?(this.chewWhitespace(t),t.consumeCharacters(4),t.getResult().setLastOrderByDirection("desc",t),t.getResult().setNeedsOrderByComma()):t.getResult().setNeedsOrderByDirection()}else t.getResult().setLastOrderByFieldName("",t),t.getResult().setNeedsOrderByField(),t.setParseError()},jql:function(e){this.orClause(e);var t=e.remainingString();this.startsWithIgnoreCase("ord",t)&&this.orderByClause(e),e.result.setInsideList(0!==e.inListParens)},orClause:function(t){for(;!t.isComplete()&&!this.startsWithIgnoreCase(")",t.remainingString());){this.chewWhitespace(t);var r=t.remainingString();if(this.startsWithIgnoreCase("ord",r))break;if(t.getResult().getMustBeOperatorOrPredicate()?t.getResult().resetLastPredicates():(t.getResult().resetLogicalOperators(),this.andClause(t)),!t.isComplete()&&null===t.getResult().getLastLogicalOperator()){if(t.getResult().getNeedsWasPredicate()&&this.predicateClause(t),t.isComplete())return;if(r=t.remainingString(),this.startsWithIgnoreCase("ord",r))break;if(null!==r&&(e.REGEXP_ORS.test(r)||this.startsWithIgnoreCase("|",r)||this.startsWithIgnoreCase("||",r)))this.startsWithIgnoreCase("||",r)?(t.getResult().setLastLogicalOperator("||",t.getTokenStringIdx()),t.consumeCharacters(2)):e.REGEXP_ORS.test(r)?(t.getResult().setLastLogicalOperator("OR",t.getTokenStringIdx()),t.consumeCharacters(3)):(t.getResult().setLastLogicalOperator("|",t.getTokenStringIdx()),t.consumeCharacters(1)),t.getResult().resetTerminalClause(),t.isComplete()&&t.setParseError(),t.getResult().setNeedsField();else if(!this.startsWithIgnoreCase(")",r)||!t.getInParens()){this.chewWhitespace(t);var s,a=null===r?t.getMaxTokenStringIdx():t.getMaxTokenStringIdx()-r.length;null!=r&&(s=r.split(" "),t.getResult().setLastLogicalOperator(s[0],a),t.getResult().setLastWasPredicate(s[0],t),t.getResult().setNeedsLogicalOperator(t)),null==t.getResult().getLastWasOperator()?t.setParseError():null!=s&&(e.REGEXP_PREDICATE.test(s[0])?(t.getResult().setLastLogicalOperator(null),t.getResult().resetNeedsPredicateOperand()):(e.REGEXP_ANDS.test(r)&&(t.consumeCharacters(4),t.getResult().resetTerminalClause(),t.getResult().setNeedsField()),(t.isComplete()||1===s.length)&&t.setParseError()))}}}},andClause:function(t){if(this.chewWhitespace(t),this.notClause(t),!t.isComplete()&&null===t.getResult().getLastLogicalOperator()){this.chewWhitespace(t);var r=t.remainingString();null!==r&&(e.REGEXP_ANDS.test(r)||this.startsWithIgnoreCase("&",r)||this.startsWithIgnoreCase("&&",r))?(this.startsWithIgnoreCase("&&",r)?(t.getResult().setLastLogicalOperator("&&",t.getTokenStringIdx()),t.consumeCharacters(2)):this.startsWithIgnoreCase("&",r)?(t.getResult().setLastLogicalOperator("&",t.getTokenStringIdx()),t.consumeCharacters(1)):(t.getResult().setLastLogicalOperator("AND",t.getTokenStringIdx()),t.consumeCharacters(4)),t.getResult().resetTerminalClause(),t.isComplete()&&t.setParseError(),t.getResult().setNeedsField()):(t.getResult().setNeedsLogicalOperator(t),t.isComplete()&&t.getResult().setLastLogicalOperator(null,t.getMaxTokenStringIdx()))}},notClause:function(t){if(this.chewWhitespace(t),t.isComplete())this.terminalClause(t),t.setParseError();else{this.chewWhitespace(t);var r=t.remainingString();null!==r&&(e.REGEXP_NOTS.test(r)||this.startsWithIgnoreCase("!",r))?(t.getResult().needsField=!1,this.startsWithIgnoreCase("!",r)?(t.getResult().setLastLogicalOperator("!",t.getTokenStringIdx()),t.consumeCharacters(1)):(t.getResult().setLastLogicalOperator("NOT",t.getTokenStringIdx()),t.consumeCharacters(4)),t.getResult().resetTerminalClause(),t.isComplete()&&t.setParseError(),t.getResult().setNeedsField()):this.terminalClause(t)}},predicateClause:function(e){if(this.chewWhitespace(e),e.isComplete())e.setParseError();else{var t=e.remainingString(),r=t.split(/[\s(]+/);if(null!==t){if(e.getResult().setMustBeOperatorOrPredicate(!1),this.startsWithLogicalOperator(t)){if(1===r.length)return e.getResult().setLastWasPredicate(r[0],e),void e.setParseError();return}if(e.getResult().resetNeedsPredicateOperand(),e.consumeCharacters(r[0].length),e.getResult().setLastWasPredicate(r[0],e),1===r.length)return void e.setParseError();this.wasPredicateComplete(r[0])?(e.getResult().setNeedsPredicateOperand(),e.getResult().setLastOperand(null,e),this.predicateOperand(e)):e.setParseError()}}},predicateOperand:function(e){this.chewWhitespace(e);var t=this.collectPredicateOperands(e);null!=t&&""!=t||(e.getResult().setLastOperandStartIndex(e.getTokenStringIdx()),e.setParseError()),null!=e.remainingString()&&(e.getResult().resetNeedsPredicateOperand(),e.getResult().resetLastPredicates(),e.getResult().setMustBeOperatorOrPredicate(!0),e.getResult().setNeedsLogicalOperator(e),this.chewWhitespace(e))},collectPredicateOperands:function(e){"DURING"===e.getResult().getLastWasPredicate()&&e.getResult().setNeedsOpenParen(!0);var t=this.listOperand(e,!0);return 0===t.length?(t=this.functionOperand(e),0===t.length?t=this.singleValueOperand(e):e.getResult().setNeedsOpenParen(!1)):e.getResult().setNeedsOpenParen(!1),s.getUnquotedString(t)},terminalClause:function(t){t.getResult().resetTerminalClause(),this.chewWhitespace(t);var r=t.remainingString();if(this.startsWithIgnoreCase("(",r))t.getResult().addToken("("),t.setInParens(),t.consumeCharacter(),this.orClause(t),this.chewWhitespace(t),r=t.remainingString(),this.startsWithIgnoreCase(")",r)?(t.getResult().addToken(")"),t.consumeCharacter(),t.setOutOfParens(),t.isComplete()&&(t.getResult().resetLogicalOperators(),t.getResult().resetLastPredicates())):t.setParseError();else if(this.field(t),t.isComplete())t.getResult().setNeedsField(),t.setParseError();else if(this.oper(t),t.isComplete()){if("was"===t.getResult().getLastOperator()||"was not"===t.getResult().getLastOperator())t.getResult().setNeedsOperandOrOperator();else{if("changed"===t.getResult().getLastWasOperator()){var s=t.currentCharacter();return void(null!==s&&e.REGEXP_SPACE_OR_ELSE.test(s)?t.getResult().setNeedsLogicalOperator(t):(t.getResult().resetLogicalOperators(),t.getResult().setNeedsOrderBy(!1)))}t.getResult().setNeedsOperator()}t.setParseError()}else{if("changed"===t.getResult().getLastWasOperator())return void t.getResult().setNeedsLogicalOperator(t);if(this.operand(t),t.getResult().getOperandComplete()){var a=t.getResult().getLastWasOperator();t.getResult().setNeedsNothing(),a&&t.getResult().setLastWasOperator(a)}else t.isComplete()&&!t.getResult().getNeedsListComma()&&t.getResult().setNeedsOperand()}},field:function(e){var t=this.fieldName(e);if(0!==t.length)e.getResult().setLastFieldName(t,e);else if(null===e.getResult().getLastFieldName()){var r=e.remainingString();e.getResult().setNeedsField(),e.getResult().setLastFieldName(r,e),e.setParseError()}},fieldName:function(e){this.chewWhitespace(e);var t=e.remainingString();if(this.startsWithIgnoreCase("cf",t)){var r=e.getTokenStringIdx(),s=e.remainingString();if(e.consumeCharacters(2),this.chewWhitespace(e),t=e.remainingString(),this.startsWithIgnoreCase("[",t)){e.consumeCharacter(),t=e.remainingString();if(0!==this.numberValue(e).length&&(this.chewWhitespace(e),t=e.remainingString(),this.startsWithIgnoreCase("]",t)))return e.consumeCharacter(),s.substring(0,e.getTokenStringIdx()-r)}return e.setParseError(),s}return this.startsWithIgnoreCase("issue.property",t)?this.entityPropertyName("issue.property",e):this.fieldOrFunctionName(e)},entityPropertyName:function(e,t){t.consumeCharacters(e.length),this.chewWhitespace(t);var r=t.remainingString();if(this.startsWithIgnoreCase("[",r)){t.consumeCharacter();for(var s=[this.stringValue(t)];!t.parseError&&this.startsWithIgnoreCase(".",t.remainingString());)t.consumeCharacter(),s[s.length]=this.stringValue(t);if(0!==s.length&&0!==s[0].length&&!this.startsWithIgnoreCase(".",s[0])&&(this.chewWhitespace(t),r=t.remainingString(),this.startsWithIgnoreCase("]",r))){t.consumeCharacter();for(var a=[this.stringValue(t)];!t.parseError&&this.startsWithIgnoreCase(".",t.remainingString());)t.consumeCharacter(),a[a.length]=this.stringValue(t);return e+"["+s.join(".")+"]"+a.join(".")}}return t.setParseError(),""},oper:function(t){this.chewWhitespace(t);var s=t.remainingString(),a=this.getLongestOperatorMatch(s,e.jql_operators);if(null!==a){if(t.getResult().setLastOperator(a,t.getTokenStringIdx()),(r.isWasOperator(a)||r.isChangedOperator(a))&&t.getResult().setLastWasOperator(a),t.consumeCharacters(a.length),"in"===a||"is"===a||"is not"===a||"not in"===a||"was"===a||"was not"===a||"was in"===a||"was not in"===a){var n=t.currentCharacter();null===n||e.REGEXP_SPACE_OR_ELSE.test(n)||t.setParseError()}"was"===a?(t.getResult().setNeedsOperandOrOperator(),this.chewWhitespace(t),null!=(s=t.remainingString())&&(e.REGEXP_NOTSTART.test(s)||e.REGEXP_INSTART.test(s))&&t.setParseError()):"was not"===a?(t.getResult().setNeedsOperandOrOperator(),this.chewWhitespace(t),null!=(s=t.remainingString())&&e.REGEXP_INSTART.test(s)&&t.setParseError()):"changed"===a?t.getResult().setNeedsLogicalOperator(t):t.getResult().setNeedsOperand()}else if(null===t.getResult().getLastOperator()){var i=null===s?t.getMaxTokenStringIdx():t.getMaxTokenStringIdx()-s.length;t.getResult().setLastOperator(s,i),t.getResult().setNeedsOperator(),t.setParseError()}},operand:function(e){this.chewWhitespace(e),"in"!==e.getResult().getLastOperator()&&"not in"!==e.getResult().getLastOperator()&&"was not in"!==e.getResult().getLastOperator()&&"was in"!==e.getResult().getLastOperator()||e.getResult().setNeedsOpenParen(!0);var t=this.listOperand(e,!0);if(0===t.length?(t=this.functionOperand(e),0===t.length?t=this.singleValueOperand(e):e.getResult().setNeedsOpenParen(!1)):e.getResult().setNeedsOpenParen(!1),null===t||0===t.length){var r=e.remainingString();e.getResult().setLastOperand(r,e),e.getResult().setNeedsOperand(),e.setParseError()}return 0!==t.length?t:""},singleValueOperand:function(e){var t=this.stringValue(e);return 0!==t.length?(e.getResult().setLastOperand(t,e),"empty"!==t.toLowerCase()&&"null"!==t.toLowerCase()&&this.isReservedWord(t.toLowerCase())&&e.setParseError(),t):""},functionOperand:function(e){var t=e.getTokenStringIdx(),r=this.fieldOrFunctionName(e);this.chewWhitespace(e);var s=this.listOperand(e,!1);if(0!==r.length&&0!==s.length){var a=r+s;return e.getResult().setLastOperand(a,e),a}return e.backTrackToIdx(t),""},listOperand:function(e,t){if("("===e.currentCharacter()){e.consumeCharacter(),e.setInListParens();var r=this.collectListValues(e,t),s="("+r;return this.chewWhitespace(e),")"===e.currentCharacter()?(e.consumeCharacter(),
e.setOutOfListParens(),s+=")","()"===s&&t&&e.getResult().setLastOperand(s,e),t&&(e.getResult().setOperandComplete(),e.getResult().resetNeedsPredicateOperand())):e.setParseError(),s}return""},collectListValues:function(e,t){t&&e.getResult().setNeedsOperand(),this.chewWhitespace(e);var r=t?this.operand(e):this.stringValue(e);if(0!==r.length){if(this.chewWhitespace(e)&&t&&e.getResult().setNeedsListComma(),","===e.currentCharacter()){e.consumeCharacter();var s=this.collectListValues(e,t);return 0===s.length&&e.setParseError(),r+", "+s}return r}return""},startsWithIgnoreCase:function(e,t){return!(null===t||null===e||t.length<e.length)&&e.toLowerCase()==t.substr(0,e.length).toLowerCase()},startsWithLogicalOperator:function(e){return null!==e&&(this.startsWithOr(e)||this.startsWithAnd(e)||this.startsWithNot(e)||this.startsWithBraces(e))},startsWithOr:function(e){return this.startsWithIgnoreCase("|",e)||this.startsWithIgnoreCase("||",e)||this.startsWithIgnoreCase("or",e)},startsWithAnd:function(e){return this.startsWithIgnoreCase("&",e)||this.startsWithIgnoreCase("&&",e)||this.startsWithIgnoreCase("and",e)},startsWithNot:function(e){return this.startsWithIgnoreCase("!",e)||this.startsWithIgnoreCase("not",e)},startsWithBraces:function(e){return this.startsWithIgnoreCase("(",e)||this.startsWithIgnoreCase(")",e)},chewWhitespace:function(t){for(var r=!1,s=t.currentCharacter();null!==s&&e.REGEXP_WHITESPACE.test(s);)t.consumeCharacter(),s=t.currentCharacter(),r=!0;return r},getLongestOperatorMatch:function(t,r){var s,a=null;if(this.startsWithIgnoreCase("is",t)&&(s=t.substring(2).match(e.REGEXP_SNOT),a=s?t.substring(0,s[0].length+2):"is"),this.startsWithIgnoreCase("was",t))s=t.substring(3).match(e.REGEXP_SNOT_IN),a=s?t.substring(0,s[0].length+3):"was";else if(this.startsWithIgnoreCase("not",t)){var n=t.substring(3).match(e.REGEXP_SIN);n&&(a=t.substring(0,n[0].length+3))}else for(var i=0;i<r.length;i++)this.startsWithIgnoreCase(r[i].value,t)&&(null===a||e.jql_operators[i].value.length>a)&&(a=e.jql_operators[i].value);return a},getValueMinusExtraWhitespace:function(t){if(null===t)return null;for(var r="",s=!0,a=t.split(""),n=0;n<a.length;n++){var i=a[n];e.REGEXP_WHITESPACE.test(i)?s&&(s=!1,r+=i):(s=!0,r+=i)}return r},fieldOrFunctionName:function(e){var t=this.stringValue(e);return'""'!==t&&"''"!==t||e.setParseError(),this.isReservedWord(t.toLowerCase())&&e.setParseError(),t},isReservedWord:function(e){return-1!==a.inArray(e,i)},stringValue:function(t){for(var r="",s=!1,a=!1,n=t.currentCharacter();null!==n&&(s||a||e.REGEXP_TOKEN_CHAR.test(n));){if(r+=n,t.consumeCharacter(),"\\"===n){if(null===(n=t.currentCharacter())){t.setParseError();break}if(e.REGEXP_CHARS_TO_ESCAPE.test(n)){var i=t.remainingString();if(!e.REGEXP_UNICODE.test(i)){t.setParseError();break}}r+=n,t.consumeCharacter()}else{if(e.REGEXP_SPECIAL_CHAR.test(n)&&!s&&!a){t.setParseError();break}'"'!==n||a?"'"!==n||s||(a=!a):s=!s}n=t.currentCharacter()}return t.isComplete()&&(s||a)&&t.setParseError(),r},numberValue:function(t){var r="";this.chewWhitespace(t);for(var s=t.currentCharacter();null!==s&&e.REGEXP_NUMBER.test(s);)r+=s,t.consumeCharacter(),s=t.currentCharacter();return r},wasPredicateComplete:function(t){for(var r=!1,s=e.jql_changed_predicates.length,a=0;a<s;++a)if(t.toLowerCase()==e.jql_changed_predicates[a].value.toLowerCase()){r=!0;break}return r}}}}),define("jira/jql/jql-parse-result",["jira/jql/util"],function(e){"use strict";return function(){var t=[],r=0;return{getTokens:function(){return t},addToken:function(e){t[r++]=e},setLastFieldName:function(s,a){this.fieldNameStartIndex=null===s?a.getMaxTokenStringIdx():a.getTokenStringIdx()-s.length,this.lastFieldName=e.getUnquotedString(s),t[r++]=s},getLastFieldName:function(){return this.lastFieldName},getLastFieldNameStartIndex:function(){return this.fieldNameStartIndex},setLastOrderByFieldName:function(s,a){this.orderByFieldNameStartIndex=null===s?a.getMaxTokenStringIdx():a.getTokenStringIdx()-s.length,this.lastOrderByFieldName=e.getUnquotedString(s),this.lastOrderByDirection=null,t[r++]=s},getLastOrderByFieldName:function(){return this.lastOrderByFieldName},getLastOrderByFieldNameStartIndex:function(){return this.orderByFieldNameStartIndex},setLastOrderByDirection:function(e,s){this.orderByDirectionStartIndex=null===e?s.getMaxTokenStringIdx():s.getTokenStringIdx()-e.length,this.lastOrderByDirection=e,t[r++]=e},getLastOrderByDirection:function(){return this.lastOrderByDirection},getLastOrderByDirectionStartIndex:function(){return this.orderByDirectionStartIndex},setNeedsField:function(){this.needsOperator=!1,this.needsOperand=!1,this.needsLogicalOperator=!1,this.needsOrderBy=!1,this.needsField=!0,this.needsOrderByField=!1,this.needsOrderByDirection=!1,this.needsListComma=!1,this.needsWasPredicate=!1,this.lastWasOperator=null},getNeedsField:function(){return this.needsField},setNeedsOrderByField:function(){this.needsOperator=!1,this.needsOperand=!1,this.needsLogicalOperator=!1,this.needsOrderBy=!1,this.needsField=!1,this.needsOrderByField=!0,this.needsOrderByDirection=!1,this.lastOrderByDirection=null,this.needsListComma=!1},getNeedsOrderByField:function(){return this.needsOrderByField},setNeedsOrderByDirection:function(){this.needsOperator=!1,this.needsOperand=!1,this.needsLogicalOperator=!1,this.needsOrderBy=!1,this.needsField=!1,this.needsOrderByField=!1,this.needsOrderByDirection=!0,this.needsListComma=!1},getNeedsOrderByDirection:function(){return this.needsOrderByDirection},setNeedsOrderByComma:function(){this.needsOperator=!1,this.needsOperand=!1,this.needsLogicalOperator=!1,this.needsOrderBy=!1,this.needsField=!1,this.needsOrderByField=!1,this.needsOrderByDirection=!1,this.needsListComma=!1},setNeedsListComma:function(){this.needsOperator=!1,this.needsOperand=!1,this.needsLogicalOperator=!1,this.needsOrderBy=!1,this.needsField=!1,this.needsOrderByField=!1,this.needsOrderByDirection=!1,this.needsListComma=!0},getNeedsListComma:function(){return this.needsListComma},setLastOperator:function(e,s){this.lastOperator=e,this.operatorStartIndex=s,t[r++]=e},setLastWasOperator:function(e){this.lastWasOperator=e},getLastWasOperator:function(){return this.lastWasOperator},getLastOperator:function(){return this.lastOperator},getLastOperatorStartIndex:function(){return this.operatorStartIndex},setLastOperand:function(s,a){this.operandStartIndex=null===s?a.getMaxTokenStringIdx():a.getTokenStringIdx()-s.length,this.lastOperand=e.getUnquotedString(s),t[r++]=s},getLastOperand:function(){return this.lastOperand},setNeedsOperand:function(){this.needsField=!1,this.needsOperator=!1,this.needsLogicalOperator=!1,this.needsOperand=!0,this.needsOrderBy=!1,this.needsOrderByField=!1,this.needsOrderByDirection=!1,this.needsListComma=!1},setNeedsOperandOrOperator:function(){this.needsField=!1,this.needsOperator=!0,this.needsLogicalOperator=!1,this.needsOperand=!0,this.needsOrderBy=!1,this.needsOrderByField=!1,this.needsOrderByDirection=!1,this.needsListComma=!1},getNeedsOperand:function(){return this.needsOperand},setNeedsPredicateOperand:function(){this.needsPredicateOperand=!0,this.needsLogicalOperator=!1,this.needsOrderBy=!1},resetNeedsPredicateOperand:function(){this.needsPredicateOperand=!1,this.needsOperand=!1},getNeedsPredicateOperand:function(){return this.needsPredicateOperand},getLastOperandStartIndex:function(){return this.operandStartIndex},setLastOperandStartIndex:function(e){this.operandStartIndex=e},setLastLogicalOperator:function(e,s){this.lastLogicalOperator=e,this.logicalOperatorStartIndex=s,t[r++]=e},setNeedsOperator:function(){this.needsField=!1,this.needsOperand=!1,this.needsLogicalOperator=!1,this.needsOrderBy=!1,this.needsOperator=!0,this.needsOrderByField=!1,this.needsOrderByDirection=!1,this.needsListComma=!1},getNeedsOperatorOrOperand:function(){return this.needsOperator&&this.needsOperand},getNeedsOperator:function(){return this.needsOperator},getLastLogicalOperator:function(){return this.lastLogicalOperator},getLastLogicalOperatorStartIndex:function(){return this.logicalOperatorStartIndex},setNeedsLogicalOperator:function(e){this.needsLogicalOperator=!0,this.needsOperator=!1,this.needsOperand=!1,this.needsField=!1,this.needsOrderByField=!1,this.needsOrderByDirection=!1,this.needsListComma=!1,this.needsOrderBy=!e.getInParens(),null!=this.lastWasOperator&&(this.needsWasPredicate=!0)},setNeedsOpenParen:function(e){this.needsOpenParen=e},getNeedsOpenParen:function(){return this.needsOpenParen},getNeedsLogicalOperator:function(){return this.needsLogicalOperator},setNeedsOrderBy:function(e){this.needsOrderBy=e},getNeedsOrderBy:function(){return this.needsOrderBy},getNeedsWasPredicate:function(){return this.needsWasPredicate},setLastWasPredicate:function(e,s){this.wasPredicateStartIndex=null===e?s.getMaxTokenStringIdx():s.getTokenStringIdx()-e.length,this.lastWasPredicate=e,t[r++]=e},getLastWasPredicate:function(){return this.lastWasPredicate},resetLastPredicates:function(){this.lastLogicalOperator=null,this.lastWasPredicate=null,this.lastOperand=null,this.wasPredicateStartIndex=null,this.operandStartIndex=null},getLastWasPredicateStartIndex:function(){return this.wasPredicateStartIndex},setLastOrderBy:function(e,s){this.orderByStartIndex=null===e?s.getMaxTokenStringIdx():s.getTokenStringIdx()-e.length,this.lastOrderBy=e,t[r++]=e},getLastOrderBy:function(){return this.lastOrderBy},getLastOrderByStartIndex:function(){return this.orderByStartIndex},resetLogicalOperators:function(){this.lastLogicalOperator=null,this.logicalOperatorStartIndex=null,this.needsLogicalOperator=null},getUnquotedString:function(t){e.getUnquotedString(t)},setParseError:function(e){this.parseError=!0,this.parseErrorMsg=e},getParseError:function(){return this.parseError},getParseErrorMsg:function(){return this.parseErrorMsg},setNeedsNothing:function(){this.needsOperator=!1,this.needsOperand=!1,this.needsLogicalOperator=!1,this.needsOrderBy=!1,this.needsField=!1,this.needsOrderByField=!1,this.needsOrderByDirection=!1,this.needsOpenParen=!1,this.needsListComma=!1,this.needsWasPredicate=null,this.needsPredicateOperand=null,this.mustBeOperatorOrPredicate=null,this.lastWasOperator=null},setOperandComplete:function(){this.operandComplete=!0},getOperandComplete:function(){return this.operandComplete},setInsideList:function(e){this.insideList=e},isInsideList:function(){return this.insideList},setMustBeOperatorOrPredicate:function(e){this.mustBeOperatorOrPredicate=e},getMustBeOperatorOrPredicate:function(){return this.mustBeOperatorOrPredicate},getIsInSubmittableState:function(){return 0===t.length||1===t.length&&null===t[0]||this.getNeedsLogicalOperator()||this.getNeedsOrderBy()||this.getNeedsOrderByDirection()},resetTerminalClause:function(){this.lastFieldName=null,this.fieldNameStartIndex=null,this.needsField=null,this.lastOperator=null,this.operatorStartIndex=null,this.needsOperator=null,this.lastOperand=null,this.operandStartIndex=null,this.needsOperand=null,this.operandComplete=null,this.needsOpenParen=null,this.needsListComma=!1,this.mustBeOperatorOrPredicate=null},init:function(){this.lastFieldName=null,this.fieldNameStartIndex=null,this.needsField=null,this.lastOperator=null,this.operatorStartIndex=null,this.needsOperator=null,this.lastOperand=null,this.operandStartIndex=null,this.needsOperand=null,this.lastLogicalOperator=null,this.logicalOperatorStartIndex=null,this.lastOrderByFieldName=null,this.lastOrderByFieldNameStartIndex=null,this.lastOrderByDirection=null,this.lastOrderByDirectionStartIndex=null,this.orderByStartIndex=null,this.lastOrderBy=null,this.needsOrderBy=null,this.needsOrderByField=null,this.needsOrderByDirection=null,this.operandComplete=null,this.needsOpenParen=null,this.needsListComma=null,this.wasPredicateStartIndex=null,this.lastWasPredicate=null,this.needsWasPredicate=null,this.needsPredicateOperand=null,this.mustBeOperatorOrPredicate=null,this.lastWasOperator=null,this.insideList=null,this.setNeedsField()}}}}),define("jira/jql/jql-parse-token",["jira/jql/jql-parse-result"],function(e){"use strict";return function(){return{init:function(t){this.tokenStringIdx=0,this.tokenString=t,this.parseError=!1,this.parseErrorMsg=null,this.result=e(),this.result.init(),this.inParens=0,this.inListParens=0},consumeCharacter:function(){this.tokenStringIdx++},consumeCharacters:function(e){this.tokenStringIdx=this.tokenStringIdx+e},backTrackToIdx:function(e){this.tokenStringIdx=e,this.parseError=!1,this.parseErrorMsg=null,this.result.parseError=!1,this.result.parseErrorMsg=null},getTokenStringIdx:function(){return this.tokenStringIdx},currentCharacter:function(){return this.tokenStringIdx>=this.tokenString.length?null:this.tokenString.charAt(this.tokenStringIdx)},remainingString:function(){return this.tokenStringIdx>=this.tokenString.length?null:this.tokenString.substr(this.tokenStringIdx,this.tokenString.length)},getMaxTokenStringIdx:function(){return this.tokenString.length},isComplete:function(){return!!this.parseError||this.tokenStringIdx>=this.tokenString.length},setInParens:function(){this.inParens++},setOutOfParens:function(){0!==this.inParens&&this.inParens--},getInParens:function(){return 0!==this.inParens},setInListParens:function(){this.inListParens++},setOutOfListParens:function(){this.inListParens>0&&this.inListParens--},getInListParens:function(){return this.inListParens>0},setParseError:function(){this.parseError=!0;var e=this.tokenStringIdx-9<0?0:this.tokenStringIdx-9,t=this.tokenString.substring(e,this.tokenStringIdx-1);this.result.setParseError("..."+t+"^"+this.tokenString.substring(this.tokenStringIdx,this.tokenString.length))},getParseError:function(){return this.parseError},calcLastOperandStartIndex:function(){var e=this.getResult(),t=e.getLastOperator();if(t.length>0){var r=t.length-t.replace(/\s+/g,"").length;e.setLastOperandStartIndex(e.getLastOperatorStartIndex()+t.length+r+1)}},getParsedOperator:function(){var e=this.getResult();return e.getLastOperator().length>0?this.tokenString.substr(e.getLastOperatorStartIndex()):null},getResult:function(){return this.result}}}}),AJS.namespace("jira.widget.autocomplete.JQL",null,require("jira/autocomplete/jql-autocomplete")),AJS.namespace("JIRA.JQLAutoComplete",null,require("jira/autocomplete/jql-autocomplete")),AJS.namespace("JIRA.JQLAutoComplete.MyParser",null,require("jira/jql/jql-parser")),AJS.namespace("JIRA.JQLAutoComplete.ParseResult",null,require("jira/jql/jql-parse-result")),AJS.namespace("JIRA.JQLAutoComplete.Token",null,require("jira/jql/jql-parse-token"));;
;
/* module-key = 'jira.webresources:jqlautocomplete', location = '/includes/jira/autocomplete/initJQLAutoComplete.js' */
!function(){"use strict";var e=require("jira/autocomplete/jql-autocomplete"),r=require("jira/jql/jql-parser"),t=require("jira/util/forms"),i=require("jira/util/key-code"),l=require("jquery");l(function(){l(".jql-autocomplete-params").each(function(){var n={};l(this).find("input").each(function(){var e=l(this);n[e.attr("id")]=e.val()});var o=JSON.parse(l("#jqlFieldz").text()),a=JSON.parse(l("#jqlFunctionNamez").text()),u=JSON.parse(l("#jqlReservedWordz").text()),s=e({fieldID:"jqltext",parser:r(u),queryDelay:.65,jqlFieldNames:o,jqlFunctionNames:a,minQueryLength:0,allowArrowCarousel:!0,errorID:"jqlerrormsg"}),d=l("#jqltext");d.unbind("keypress",t.submitOnEnter).keypress(function(e){if(null===s.dropdownController||!s.dropdownController.displayed||s.selectedIndex<0)return!(e.keyCode===i.ENTER&&!e.ctrlKey&&!e.shiftKey)||(l("#jqlform").submit(),!1)}),s.buildResponseContainer(),s.parse(d.text()),s.updateColumnLineCount()})})}();;
;
/* module-key = 'com.atlassian.labs.hipchat.hipchat-for-jira-plugin:amd', location = 'js/lib/amd/jira/jira-components-query-amd.js' */
define("hipchat/jira/query-component",function(){return JIRA.Components.Query});;
;
/* module-key = 'com.atlassian.labs.hipchat.hipchat-for-jira-plugin:amd', location = 'js/lib/amd/jira/jira-issues-amd.js' */
define("hipchat/jira/issues/searcher-collection",function(){return JIRA.Issues.SearcherCollection});define("hipchat/jira/issues/query-state-model",function(){return JIRA.Issues.QueryStateModel});define("hipchat/jira/issues/criteria-model",function(){return JIRA.Issues.CriteriaModel});define("hipchat/jira/issues/criteria-view",function(){return JIRA.Issues.CriteriaView});;
;
/* module-key = 'com.atlassian.labs.hipchat.hipchat-for-jira-plugin:amd', location = 'js/lib/amd/hipchat-scopes-provider-amd.js' */
define("hipchat/scopes-provider",function(){return HipChat.ScopesProvider});;
;
/* module-key = 'com.atlassian.labs.hipchat.hipchat-for-jira-plugin:notification-jql-resources', location = 'js/jql-autocomplete.js' */
require(["jquery","jira/autocomplete/jql-autocomplete","jira/jql/jql-parser","wrm/context-path"],function(f,e,h,a){function b(){f(".hipchat-jql-loading").show()}function c(){f(".hipchat-jql-loading").hide()}function d(){return f.ajax({url:a()+"/rest/api/2/jql/autocompletedata",type:"GET"})}function g(i){b();d().done(function(q){var j=i.fieldID;var m=i.errorID;var n=f("#"+j);var l=q.visibleFieldNames||[];var o=q.visibleFunctionNames||[];var p=q.jqlReservedWords||[];var k=e({fieldID:j,parser:h(p),queryDelay:0.65,jqlFieldNames:l,jqlFunctionNames:o,minQueryLength:0,allowArrowCarousel:true,autoSelectFirst:false,errorID:m})}).always(function(){c()})}AJS.toInit(function(){var i=f("#hipchat-jql-text");if(i.length){g({fieldID:"hipchat-jql-text",errorID:"hipchat-jql-error"})}})});;
;
/* module-key = 'com.atlassian.labs.hipchat.hipchat-for-jira-plugin:notification-preview-resources', location = 'js/notification-preview.js' */
require(["jquery","jira/lib/class","wrm/context-path"],function(d,b,a){var c=b.extend({TIMEOUT_MS:100,init:function(f){var e=this;this.$source=f.source;this.$preview=f.preview;this.lastSourceValue=this.$source.val();this.$preview.html(JIRA.Templates.HipChat.Notification.notificationPreview());this.$previewMessage=this.$preview.find(".message");this.$source.focus(d.proxy(this._bindSourceHook,this));this.$source.blur(d.proxy(this._unbindHook,this));this.$source.bind("contentModified",function(){e.renderPreview()});this.renderPreview()},renderPreview:function(){var e=this,f=this.$source.val();d.ajax({url:a()+"/rest/hipchat/integrations/1.0/message/render",type:"POST",contentType:"application/json",data:JSON.stringify({message:f})}).done(function(g){e.$previewMessage.html(g.message)})},onSourceTimeout:function(){var e=this.$source.val();if(e!==this.lastSourceValue){this.renderPreview();this.lastSourceValue=e}},_bindSourceHook:function(f){this._bindHook(f,this.onSourceTimeout)},_bindHook:function(j,h){var f=this,g=d(j.target),i;i=function(){f._unbindHook(j);h.apply(f);if(g.is(":visible")){g.data("checkHook",setTimeout(i,f.TIMEOUT_MS))}};if(!g.data("checkHook")){g.data("checkHook",setTimeout(i,0))}},_unbindHook:function(g){var f=d(g.target);clearTimeout(f.data("checkHook"));f.removeData("checkHook")}});AJS.toInit(function(){var e=d(".hipchat-notification-preview-source");if(e.length){new c({source:e,preview:d(".hipchat-notification-preview")})}})});;
;
/* module-key = 'com.atlassian.labs.hipchat.hipchat-for-jira-plugin:notification-preview-resources', location = 'soy/notification/notification-preview.soy' */
// This file was automatically generated from notification-preview.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.HipChat.Notification.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.HipChat == 'undefined') { JIRA.Templates.HipChat = {}; }
if (typeof JIRA.Templates.HipChat.Notification == 'undefined') { JIRA.Templates.HipChat.Notification = {}; }


JIRA.Templates.HipChat.Notification.notificationPreview = function(opt_data, opt_ignored) {
  return '<div class="systemMessage chatBlock systemMessage-"><table width="100%" cellspacing="0" cellpadding="0"><tbody><tr><td class="nameBlock"><p style="margin-top: 0;">JIRA</p></td><td class="messageBlock"><p class="timeBlock">12:00 PM</p><div class="message"></div></td></tr></tbody></table></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.HipChat.Notification.notificationPreview.soyTemplateName = 'JIRA.Templates.HipChat.Notification.notificationPreview';
}
;
;
/* module-key = 'com.atlassian.labs.hipchat.hipchat-for-jira-plugin:notification-preview-resources', location = 'js/notification-editor.js' */
require(["jquery","jira/lib/class"],function(c,b){var a=b.extend({init:function(e){var d=this;d.$editor=e.editor;d.$toolbar=e.toolbar;d.$toolbar.find(".aui-button").tooltip().click(function(g){g.preventDefault();c(this).tooltip("hide");var f=c(this).attr("data-macro");if(f){d.insertMacro("$"+f);d.$editor.trigger("contentModified");d.$editor.focus()}})},insertMacro:function(f){var e=this._rawInputValue(),d=this._getCaretPosition(),g=e.substr(0,d).replace(/\r\n/g,"\n"),h=e.substr(d);if(g.length!==0){f=" "+f}this._rawInputValue([g,f,h].join(""));this._setCursorPosition(g.length+f.length)},_setCursorPosition:function(f){var e=this.$editor.get(0);if(e.setSelectionRange){e.focus();e.setSelectionRange(f,f)}else{if(e.createTextRange){var d=e.createTextRange();d.collapse(true);d.moveEnd("character",f);d.moveStart("character",f);d.select()}}},_getCaretPosition:function(){var g=this.$editor.get(0);var e=this._rawInputValue();var i,d,j,h,f;if(typeof g.selectionStart==="number"){return g.selectionStart}if(document.selection&&g.createTextRange){d=document.selection.createRange();if(d){f=g.createTextRange();f.moveToBookmark(d.getBookmark());if(f.compareEndPoints("StartToEnd",g.createTextRange())>=0){return e.length}else{h=e.replace(/\r\n/g,"\n");j=f.moveStart("character",-e.length);i=h.slice(0,-j).split("\n").length-1;return i-j}}else{return e.length}}return 0},_rawInputValue:function(){var d=this.$editor.get(0);if(typeof arguments[0]==="string"){d.value=arguments[0]}return d.value}});AJS.toInit(function(){var d=c(".hipchat-notification-editor");if(d.length){new a({editor:d,toolbar:c(".hipchat-notification-editor-toolbar")})}})});;
;
/* module-key = 'com.atlassian.auiplugin:split_aui.deprecated.behaviour.cookie', location = 'aui.chunk.ec929b657a8e24a5a777--1a348e884d4b485cada8.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.deprecated.behaviour.cookie"],{"N/qQ":function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var t=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r.default=e,r}(n("qHho"));r.default=t,e.exports=r.default},qHho:function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.save=r.read=r.erase=void 0;var t=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r.default=e,r}(n("bPPT")),a=function(e){return e&&e.__esModule?e:{default:e}}(n("KloK"));var o="AJS.conglomerate.cookie",u=/(\\|^"|"$)/g,i=/\|\|+/g,c=/"/g,l=/[.*+?|^$()[\]{\\]/g;function f(e){return e.replace(l,"\\$&")}function s(e){var r=new RegExp("\\b"+f(e)+"=((?:[^\\\\;]+|\\\\.)*)(?:;|$)"),n=document.cookie.match(r);return n&&function(e){return e.replace(u,"")}(n[1])}function p(e,r,n){var t=s(o);t=function(e,r,n){var t=new RegExp("(\\s|\\|)*\\b"+f(e)+"=[^|]*[|]*");if(n=(n=n||"").replace(t,"|"),""!==r){var a=e+"="+r;n.length+a.length<4020&&(n+="|"+a)}return n.replace(i,"|")}(e,r,t),function(e,r,n){var t,a="",o='"'+r.replace(c,'\\"')+'"';n&&((t=new Date).setTime(+t+24*n*60*60*1e3),a="; expires="+t.toGMTString()),document.cookie=e+"="+o+a+";path=/"}(o,t,n||365)}function d(e,r){var n=function(e,r){r=r||"";var n=new RegExp(f(e)+"=([^|]+)"),t=r.match(n);return t&&t[1]}(e,s(o));return null!=n?n:r}function v(e){p(e,"")}var h={erase:v,read:d,save:p};(0,a.default)("cookie",h),(0,a.default)("Cookie",h),t.prop(AJS,"Cookie",{alternativeName:"cookie",sinceVersion:"5.8.0"}),r.erase=v,r.read=d,r.save=p}},[["N/qQ","runtime","aui.splitchunk.172ffb6da7","aui.splitchunk.087aba7911","aui.splitchunk.fbd1a5ab27","aui.splitchunk.54d3f16c20"]]]);
//# sourceMappingURL=aui.chunk.ec929b657a8e24a5a777--1a348e884d4b485cada8.js.map;
;
/* module-key = 'com.atlassian.labs.hipchat.hipchat-for-jira-plugin:update-plugin-banner-resources', location = 'js/banner/update-hipchat-link-banner.js' */
require(["jquery","jira/flag","jira/util/users/logged-in-user","wrm/context-path"],function(d,b,e,a){var c=AJS.Cookie;AJS.toInit(function(){var i="HIPCHAT_ADMIN_BANNER_DISMISS_2";var g;if(!h()&&e.isAdmin()&&!k()){d.ajax({url:a()+"/rest/hipchat/integrations/1.0/configuration/status",dataType:"json",cache:false}).done(function(m){if(m.installationCheckResult.required||m.v1){g=f(m)}})}function f(o){var n=JIRA.Templates.HipChat.Banner.updateHipChatLink({removeV1link:!o.v2&&o.v1,reinstallationDiscoveryTitle:o.installationCheckResult.discoveryTitle,reinstallationDiscoveryText:o.installationCheckResult.discoveryText});var m=b.showWarningMsg(null,n);d(document).on("click","#remove-hipchat-v1-link",l);d(document).on("aui-flag-close",".aui-flag",j);return m}function h(){return window.location.toString().indexOf("/plugins/servlet/hipchat/configure")>0}function j(m){if(d(m.target).find(".hipchat-update-banner").length>0){c.save(i,true)}}function k(){return c.read(i)=="true"}function l(m){m.preventDefault();d.ajax({url:a()+"/rest/hipchat/integrations/1.0/configuration/v1",cache:false,type:"DELETE"}).error(function(n){if(g){g.hide()}b.showErrorMsg(null,AJS.format("We couldn\'\'t find your integration. If the problem persists, contact Atlassian Support.\u003cbr/\u003e Error Status [{0}]",n.status))}).done(function(n){if(g){g.hide()}b.showSuccessMsg(null,"Integration has been removed successfully")})}})});;
;
/* module-key = 'com.atlassian.labs.hipchat.hipchat-for-jira-plugin:update-plugin-banner-resources', location = 'soy/banner/update-hipchat-link-banner.soy' */
// This file was automatically generated from update-hipchat-link-banner.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.HipChat.Banner.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.HipChat == 'undefined') { JIRA.Templates.HipChat = {}; }
if (typeof JIRA.Templates.HipChat.Banner == 'undefined') { JIRA.Templates.HipChat.Banner = {}; }


JIRA.Templates.HipChat.Banner.updateHipChatLink = function(opt_data, opt_ignored) {
  return '<div class="hipchat-update-banner"><b>' + soy.$$escapeHtml(opt_data.reinstallationDiscoveryTitle) + '</b><p>' + soy.$$escapeHtml(opt_data.reinstallationDiscoveryText) + '</p><p/><a href="' + soy.$$escapeHtml("" + '/plugins/servlet/hipchat/configure') + '">' + soy.$$escapeHtml('Update Now!') + '</a>' + ((opt_data.removeV1link) ? '<a id="remove-hipchat-v1-link">' + soy.$$escapeHtml('Remove Integration') + '</a>' : '') + '</div>';
};
if (goog.DEBUG) {
  JIRA.Templates.HipChat.Banner.updateHipChatLink.soyTemplateName = 'JIRA.Templates.HipChat.Banner.updateHipChatLink';
}
;
;
/* module-key = 'com.atlassian.feedback.jira-feedback-plugin:button-resources-init', location = '/js/feedback-dialog-init.js' */
require(["jquery","jira/loading/loading","wrm/require"],function(n,i,e){"use strict";function o(){t=!0,AJS.dim(),i.showLoadingIndicator()}function r(n){t=!1,n&&AJS.dim.$dim.css("transition","none"),AJS.undim(),n&&AJS.dim.$dim&&AJS.dim.$dim.css("transition",""),i.hideLoadingIndicator()}var t=!1;n(document).on("click",".jira-feedback-plugin",function(n){n.preventDefault(),t||(o(),e(["wr!com.atlassian.feedback.jira-feedback-plugin:button-resources"]).done(function(){require("jira/feedback/feedback-dialog").show().then(function(){return r(!0)},function(n){console.error("Something went wrong in an attempt to show the issue collector dialog",n),r(!1)})}).fail(function(n){console.error("Something went wrong when loading feedback plugin resources",n),r(!1)}))})});;
;
/* module-key = 'com.atlassian.jira.jira-header-plugin:admin-quicksearch-link', location = 'js/init-admin-quicksearch-link.js' */
require(["jquery","jira/shifter"],function(e,n){e(document).on("click","#admin-search-link",function(e){n.show(),e.preventDefault()})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-admin-helper-plugin:dialog-resources', location = 'js/dialog.js' */
define("jira/admin-helper/dialog",["jquery","jira/dialog/dialog","jira/focus/set-focus"],function(c,a,b){return a.extend({_getDefaultOptions:function(){return c.extend(this._super(),{cached:false,widthClass:"large",stacked:true})},defineResources:function(){this._super();this.requireResource("com.atlassian.jira.plugins.jira-admin-helper-plugin:whereismycf-resources")},decorateContent:function(){var d=this;this.get$popupContent().find(".cancel").click(function(f){d.hide();f.preventDefault()})},_onShowContent:function(){this._super();if(a.current===this){var d=new b.FocusConfiguration();d.context=this.get$popup()[0];d.parentElementSelectors=[".form-body"];b.pushConfiguration(d);b.triggerFocus()}},hide:function(d){if(this._super(d)===false){return false}b.popConfiguration()}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-admin-helper-plugin:dialog-resources', location = 'js/notification-helper-init.js' */
require(["jquery","jira/admin-helper/dialog","jira/util/data/meta"],function(c,a,b){if(b.get("is-admin")){c(document).delegate(".notificationhelper-trigger","click",function(e){e.preventDefault();new a({id:"notification-helper-dialog",content:function d(g){var f=this;require(["jira/admin-helper/notification-helper/content-loader"],function(h){h.loadContent(f,g)})}}).show()})}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-admin-helper-plugin:dialog-resources', location = 'js/permission-helper-init.js' */
require(["jquery","jira/admin-helper/dialog","jira/util/data/meta"],function(c,a,b){if(b.get("is-admin")){c(document).delegate(".permissionhelper-trigger","click",function(e){e.preventDefault();new a({id:"permission-helper-dialog",content:function d(g){var f=this;require(["jira/admin-helper/permission-helper/content-loader"],function(h){h.loadContent(f,g)})}}).show()})}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-admin-helper-plugin:dialog-resources', location = 'js/whereismycf-init.js' */
require(["jquery","jira/admin-helper/dialog","jira/util/data/meta","jira/dialog/dialog"],function(e,a,d,b){if(d.get("is-admin")){var c="Where is my field?";e(document).delegate(".whereismycf-trigger","click",function(g){g.preventDefault();new a({id:"whereismycf-dialog",content:function f(i){var h=this;require(["jira/admin-helper/whereismycf/content-loader"],function(j){j.loadContentForView(h,i)})}}).show()});e(document).bind("showLayer",function(g,i,h){if(i=="inlineDialog"&&h.popup.attr("id")=="inline-dialog-field_picker_popup"){if(h.popup.find(".whereismycf-qfpicker-link").length==0){var f=e("<a href='#' class='whereismycf-qfpicker-link'>"+c+"</a>").appendTo(h.popup.find(".qf-picker-header dl"));f.click(function(l){l.preventDefault();h.hide();var j=b.current;new a({id:"whereismycf-dialog",content:function k(n){var m=this;require(["jira/admin-helper/whereismycf/content-loader"],function(o){o.loadContentForEditAndCreate(m,j,n)})}}).show()})}}})}});;
;
/* module-key = 'com.atlassian.auiplugin:split_aui.pattern.help', location = 'aui.chunk.97b0b8778b1dab612048--f0ebc3ce920a8bb3519d.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.pattern.help"],{EoRc:function(i,u,n){},H4sa:function(i,u,n){"use strict";n("FStl"),n("Q0fs"),n("nqD9"),n("0FWE"),n("VtiI"),n("EoRc")}},[["H4sa","runtime","aui.splitchunk.vendors--7da3927366","aui.splitchunk.b0831cc7d0","aui.splitchunk.572a8bf5cd","aui.splitchunk.d49cf794d2","aui.splitchunk.d925afe2c0","aui.splitchunk.d727dd207f","aui.splitchunk.7da3927366"]]]);
//# sourceMappingURL=aui.chunk.97b0b8778b1dab612048--f0ebc3ce920a8bb3519d.js.map;
;
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:analytics', location = 'util/analytics.js' */
define("jira-help-tips/util/analytics",["jira/analytics"],function(t){"use strict";function e(t){return t=""+(t||""),t.replace(/\./g,"-")}function i(i,n){if(n&&n.attributes.id){var r={},a=e(n.attributes.id),s="";n.attributes.eventPrefix&&(s=n.attributes.eventPrefix,"."!==s.charAt(s.length-1)&&(s+=".")),r.name=s+"helptips."+a+"."+i,r.properties={},t.send(r)}}return{clean:e,send:i}});;
;
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager', location = 'js/HelpTipManager.js' */
define("jira-help-tips/feature/help-tip-manager",["require"],function(s){"use strict";var e=s("underscore"),i=s("jquery"),t=s("jira/jquery/deferred"),n=s("wrm/context-path"),r=s("wrm/data"),d=n()+"/rest/helptips/1.0/tips",u=r.claim("com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager.JiraHelpTipData");return{dismissedTipIds:[],sequences:[],loaded:new t,url:function(){return d},sync:function(s,e){var n=new t;return s||(s="get"),e||(e=null),"get"===s&&u&&u.dismissed?n.resolve(u.dismissed):i.ajax(this.url(),{type:s,dataType:"json",contentType:"application/json",data:e&&JSON.stringify(e),processData:!1}).done(function(s){n.resolve(s)}).fail(function(){n.reject()}),n.promise()},fetch:function(){var s=this.sync();return s.done(i.proxy(function(s){i.merge(this.dismissedTipIds,s),this.loaded.resolve()},this)),s.promise()},show:function(s){this.loaded.done(s)},dismiss:function(s){var e=s.attributes.id;e?(this.dismissedTipIds.push(e),this.sync("post",{id:e})):s._dismissed=!0},undismiss:function(s){var e=s.attributes.id;e?(this.dismissedTipIds.splice(i.inArray(e,this.dismissedTipIds),1),this.sync("delete",{id:e})):s._dismissed=!1},isDismissed:function(s){var e=s.attributes.id;return e?i.inArray(e,this.dismissedTipIds)>=0:s._dismissed},clearSequences:function(){this.sequences=[]},hideSequences:function(){e.each(this.sequences,function(s){s.view.dismiss()})},showSequences:function(){if(!this._showStarted){var s=this,t=0;this._showStarted=!0,i.when(this.loaded).done(function(){s.sequences.sort(function(s,e){return s.attributes.weight-e.attributes.weight}),s.sequences=e.filter(s.sequences,function(i){var n=-1===e.indexOf(s.dismissedTipIds,i.attributes.id);return n&&(i.attributes.position=t++),n}),s.sequences.length>0&&(e.last(s.sequences).attributes.showCloseButton=!0,s.sequences[0].show({force:!0})),s._showStarted=!1})}}}});;
;
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:help-tip', location = 'templates/HelpTip.soy' */
// This file was automatically generated from HelpTip.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace AJS.Templates.HelpTip.
 */

if (typeof AJS == 'undefined') { var AJS = {}; }
if (typeof AJS.Templates == 'undefined') { AJS.Templates = {}; }
if (typeof AJS.Templates.HelpTip == 'undefined') { AJS.Templates.HelpTip = {}; }


AJS.Templates.HelpTip.tipContent = function(opt_data, opt_ignored) {
  return ((opt_data.title) ? '<h2 class="helptip-title">' + soy.$$escapeHtml(opt_data.title) + '</h2>' : '') + '<p class="helptip-body">' + soy.$$filterNoAutoescape(opt_data.bodyHtml) + '</p>' + ((opt_data.url) ? '<p><a class="helptip-link" href="' + soy.$$escapeHtml(opt_data.url) + '" target="_blank">' + ((opt_data.linkText) ? soy.$$escapeHtml(opt_data.linkText) : soy.$$escapeHtml('Learn more')) + '</a></p>' : '') + AJS.Templates.HelpTip.tipFooter(opt_data);
};
if (goog.DEBUG) {
  AJS.Templates.HelpTip.tipContent.soyTemplateName = 'AJS.Templates.HelpTip.tipContent';
}


AJS.Templates.HelpTip.tipFooter = function(opt_data, opt_ignored) {
  return '<form class="tip-footer">' + AJS.Templates.HelpTip.nextButton(opt_data) + AJS.Templates.HelpTip.closeButton(opt_data) + AJS.Templates.HelpTip.sequencePaging(opt_data) + '</form>';
};
if (goog.DEBUG) {
  AJS.Templates.HelpTip.tipFooter.soyTemplateName = 'AJS.Templates.HelpTip.tipFooter';
}


AJS.Templates.HelpTip.nextButton = function(opt_data, opt_ignored) {
  return '' + ((opt_data.showNextButton) ? '<button class="aui-button helptip-next" type="button">' + ((opt_data.nextButtonText) ? soy.$$escapeHtml(opt_data.nextButtonText) : soy.$$escapeHtml('Next')) + '</button>' : '');
};
if (goog.DEBUG) {
  AJS.Templates.HelpTip.nextButton.soyTemplateName = 'AJS.Templates.HelpTip.nextButton';
}


AJS.Templates.HelpTip.closeButton = function(opt_data, opt_ignored) {
  return '' + ((opt_data.showCloseButton) ? '<button class="aui-button ' + ((opt_data.showNextButton) ? ' aui-button-link ' : '') + ' helptip-close" type="button">' + ((opt_data.closeButtonText) ? soy.$$escapeHtml(opt_data.closeButtonText) : soy.$$escapeHtml('Close')) + '</button>' : '');
};
if (goog.DEBUG) {
  AJS.Templates.HelpTip.closeButton.soyTemplateName = 'AJS.Templates.HelpTip.closeButton';
}


AJS.Templates.HelpTip.sequencePaging = function(opt_data, opt_ignored) {
  return '' + ((opt_data.isSequence && opt_data.length > 1) ? '<span class="helptip-sequence-paging">' + soy.$$escapeHtml(opt_data.position + 1) + '/' + soy.$$escapeHtml(opt_data.length) + '</span>' : '');
};
if (goog.DEBUG) {
  AJS.Templates.HelpTip.sequencePaging.soyTemplateName = 'AJS.Templates.HelpTip.sequencePaging';
}
;
;
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:help-tip', location = 'js/HelpTip.js' */
define("jira-help-tips/feature/help-tip",["require"],function(i){"use strict";function t(){return!1}function e(){return!0}function s(){return"jira-help-tip-"+p+d++}var n=i("jquery"),o=i("underscore"),h=i("jira-help-tips/feature/help-tip-manager"),l=i("jira-help-tips/util/analytics"),r=i("aui/inline-dialog"),a=i("jira/jquery/deferred"),u=AJS.Popups,c=AJS.Templates.HelpTip,d=0,p=(new Date).getTime(),f=function(i,t){this.initialize(i,t)},b=function(i){this.initialize(i)},m=function(i){var t;this.attributes=n.extend({},i),this.attributes.id||(this.attributes.id=!1),this.attributes.callbacks||(this.attributes.callbacks={}),this.attributes.isSequence&&(this.attributes.weight||(this.attributes.weight=Number.MAX_VALUE),h.sequences.push(this)),this.attributes.body&&(this.attributes.bodyHtml=this.attributes.body,delete this.attributes.body),this.cid=s(),t=this.attributes.anchor,delete this.attributes.anchor,this.view=t?new f(this,t):new b(this)};return n.extend(m.prototype,{show:function(i){i=i||{};var t=this,e=new a;if(this.attributes.callbacks.beforeShow){var s=this.attributes.callbacks.beforeShow();s&&o.isFunction(s.done)?s.done(e.resolve):e.resolve()}else e.resolve();e.done(function(){h.show(function(){t.isDismissed()||(!i.force&&u&&u.DisplayController?u.DisplayController.request({name:t.id,weight:1e3,show:function(){t.view.show()}}):t.view.show(),l.send("shown",t))})})},dismiss:function(){var i=l.clean(arguments[0]||"programmatically");this.view.dismiss(),"close-button"===i&&this.attributes.isSequence&&h.clearSequences(),this.isDismissed()||(h.dismiss(this),l.send("dismissed."+i,this))},isVisible:function(){return this.view.$el.is(":visible")},isDismissed:function(){return h.isDismissed(this)},refresh:function(){this.isDismissed()||this.view.refresh()},hide:function(){this.isDismissed()||this.view.dismiss()},showNextHelpTipInSequence:function(){this.view.clickNext()}}),n.extend(f.prototype,{initialize:function(i,e){this.model=i,this.anchorSelector=e,this.anchor=n(e),this._initDialog(e),n(document).bind("showLayer",function(e,s,o){"inlineDialog"===s&&o.id===i.cid&&(r.current=null,n(document.body).unbind("click."+i.cid+".inline-dialog-check"),o._validateClickToClose=t,o.hide=t)})},show:function(){this.beforeHide=t,this.popup.show()},refresh:function(){var i=n(this.anchorSelector);i.is(":visible")?i.get(0)!==this.anchor.get(0)?this.changeAnchor(i):this.isVisible()?this.popup.refresh():this.show():this.dismiss()},changeAnchor:function(i){var t=this.isVisible();this.dismiss(),this.$el.remove(),this.anchor=i,this._initDialog(i),t&&this.show()},dismiss:function(){this.beforeHide=e,this._popupHide()},clickNext:function(){var i=n(this.$el).find(".helptip-next");i.length>0&&i.click()},isVisible:function(){return this.$el.is(":visible")},_initDialog:function(i){var e=this,s=this.model;this.popup=new r(n(i),s.cid,o.bind(this._createDialog,this),o.extend({container:"#content",noBind:!0,preHideCallback:function(){return e.beforeHide()},calculatePositions:function(i,t,e,s){var o=r.opts.calculatePositions(i,t,e,s),h=n(this.container),l=h.offset();return"auto"!==o.popupCss.left&&(o.popupCss.left-=l.left,o.popupCss.right="auto"),o.popupCss.top-=l.top,o},addActiveClass:!1,initCallback:s.attributes.callbacks.init,hideCallback:s.attributes.callbacks.hide,persistent:!0},s.attributes.inlineDialogOpts)),this._popupHide=this.popup.hide,this.popup.hide=t,this.$el=n(this.popup[0]),this.$el.addClass("jira-help-tip aui-help")},_createDialog:function(i,t,e){var s=this,r=h.sequences,a=this.model.attributes.position,u=this.model.attributes.isSequence;i.removeClass("contents"),i.html(n(c.tipContent(o.extend({showNextButton:u&&r.length>1&&a+1<r.length,length:r.length,position:a,showCloseButton:!0},this.model.attributes)))),i.unbind("mouseover mouseout"),i.find(".helptip-link").click(function(){l.send("learn-more.clicked",s.model)}),i.find(".helptip-close").click(function(i){i.preventDefault(),s.model.dismiss("close-button")}),i.find(".helptip-next").click(function(i){i.preventDefault(),s.model.dismiss("next-button");var t=a+1;r[t]&&r[t].show({force:!0})}),e()}}),n.extend(b.prototype,{initialize:function(){this.$el=n("<div></div>"),this.$el.addClass("jira-help-tip aui-help")},show:function(){},dismiss:function(){}}),m});;
;
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:initialiser', location = 'js/initialiser.js' */
define("jira-help-tips/page/initialiser",["jira-help-tips/feature/help-tip-manager","jira/util/users/logged-in-user","underscore"],function(e,i,n){"use strict";function r(){i.isAnonymous()||e.fetch()}return{init:n.once(r)}});;
;
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:common', location = 'js/legacy.js' */
!function(){"use strict";AJS.namespace("AJS.HelpTip",null,require("jira-help-tips/feature/help-tip")),AJS.namespace("AJS.HelpTip.Manager",null,require("jira-help-tips/feature/help-tip-manager")),require("jira-help-tips/page/initialiser").init()}();;
;
/* module-key = 'com.atlassian.jira.plugins.jira-admin-helper-plugin:admin-helper-nav-resources', location = 'templates/permission-helper-nav.soy' */
// This file was automatically generated from permission-helper-nav.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Nav.PermissionHelper.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Nav == 'undefined') { JIRA.Templates.Nav = {}; }
if (typeof JIRA.Templates.Nav.PermissionHelper == 'undefined') { JIRA.Templates.Nav.PermissionHelper = {}; }


JIRA.Templates.Nav.PermissionHelper.editPermissionsNavButton = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.Nav.PermissionHelper.viewPermissionsNavButton(null);
};
if (goog.DEBUG) {
  JIRA.Templates.Nav.PermissionHelper.editPermissionsNavButton.soyTemplateName = 'JIRA.Templates.Nav.PermissionHelper.editPermissionsNavButton';
}


JIRA.Templates.Nav.PermissionHelper.viewPermissionsNavButton = function(opt_data, opt_ignored) {
  return '<a class="aui-button permissionhelper-trigger" id="permission-helper-button" href="' + soy.$$escapeHtml("") + '/secure/admin/PermissionHelperAdmin.jspa" title="' + soy.$$escapeHtml('Discover why a user does or does not have certain permissions') + '">' + soy.$$escapeHtml('Permission helper') + '</a>';
};
if (goog.DEBUG) {
  JIRA.Templates.Nav.PermissionHelper.viewPermissionsNavButton.soyTemplateName = 'JIRA.Templates.Nav.PermissionHelper.viewPermissionsNavButton';
}


JIRA.Templates.Nav.PermissionHelper.permissionHelperTriggerContainer = function(opt_data, opt_ignored) {
  return '<header class=\'aui-page-header\'><div class=\'aui-page-header-inner\'><div class=\'aui-page-header-actions\'><div class=\'aui-buttons\'></div></div></div></header>';
};
if (goog.DEBUG) {
  JIRA.Templates.Nav.PermissionHelper.permissionHelperTriggerContainer.soyTemplateName = 'JIRA.Templates.Nav.PermissionHelper.permissionHelperTriggerContainer';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-admin-helper-plugin:admin-helper-nav-resources', location = 'js/permission-helper-nav.js' */
require(["jquery","jira/ajs/dark-features","jira/util/data/meta","jira/util/events","jira/util/events/types","jira/util/events/reasons"],function(g,m,e,c,f,d){if(e.get("is-admin")){g(function(){c.bind(f.NEW_CONTENT_ADDED,function(r,q,s){if(j(q,s)){var p=b();p.find(".aui-buttons").append(g(JIRA.Templates.Nav.PermissionHelper.editPermissionsNavButton()));h(g("#permission-helper-button"))}});if(l()){var o=i();o.find(".aui-buttons").append(g(JIRA.Templates.Nav.PermissionHelper.editPermissionsNavButton()));h(g("#permission-helper-button"))}else{if(k()){var n=a();if(n.length==1){n.prepend(g(JIRA.Templates.Nav.PermissionHelper.viewPermissionsNavButton()));h(g("#permission-helper-button"))}}}});function j(n,o){return typeof n!=="undefined"&&typeof n.is==="function"&&n.is(".project-permissions-container")&&o===d.pageLoad}function l(){var n=g("#edit_project_permissions");return(n.length>=1)}function k(){var n=g("#project-config-panel-permissions");return(n.length>=1)}function i(){var n=g(".aui-page-panel-content > header");if(n.length==0){n=g(JIRA.Templates.Nav.PermissionHelper.permissionHelperTriggerContainer());g(".aui-page-panel-content").prepend(n)}return n}function b(){var n=g(".admin-header-actions-plugin-point");var o=g(JIRA.Templates.Nav.PermissionHelper.permissionHelperTriggerContainer());n.prepend(o);return o}function a(){if(m.isEnabled("com.atlassian.jira.config.PDL")){var n=g("#project-config-panel-permissions > .aui-page-header .aui-page-header-actions");var o=n.find(".aui-buttons");return(o.size()>0)?o:n}return g(".project-config-panel-header > .operation-menu")}function h(o){if(AJS.HelpTip){var n=new AJS.HelpTip({id:"permission-helper-helptip",title:"Having trouble?",body:"Use the Permission Helper to discover why a user does or does not have certain permissions.",anchor:o});n.show();g("#permission-helper-helptip").click(function(){AJS.HelpTip.dismiss()});o.click(function(){n.dismiss()})}}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-admin-helper-plugin:admin-helper-nav-resources', location = 'templates/notification-helper-nav.soy' */
// This file was automatically generated from notification-helper-nav.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Nav.NotificationHelper.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Nav == 'undefined') { JIRA.Templates.Nav = {}; }
if (typeof JIRA.Templates.Nav.NotificationHelper == 'undefined') { JIRA.Templates.Nav.NotificationHelper = {}; }


JIRA.Templates.Nav.NotificationHelper.editNotificationsNavButton = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.Nav.NotificationHelper.viewNotificationsNavButton(null);
};
if (goog.DEBUG) {
  JIRA.Templates.Nav.NotificationHelper.editNotificationsNavButton.soyTemplateName = 'JIRA.Templates.Nav.NotificationHelper.editNotificationsNavButton';
}


JIRA.Templates.Nav.NotificationHelper.viewNotificationsNavButton = function(opt_data, opt_ignored) {
  return '<a class="aui-button notificationhelper-trigger" id="notification-helper-button" href="' + soy.$$escapeHtml("") + '/secure/admin/NotificationHelperAdmin.jspa" title="' + soy.$$escapeHtml('Find out why users receive, or do not receive notifications for this issue') + '">' + soy.$$escapeHtml('Notification Helper') + '</a>';
};
if (goog.DEBUG) {
  JIRA.Templates.Nav.NotificationHelper.viewNotificationsNavButton.soyTemplateName = 'JIRA.Templates.Nav.NotificationHelper.viewNotificationsNavButton';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-admin-helper-plugin:admin-helper-nav-resources', location = 'js/notification-helper-nav.js' */
require(["jquery","jira/ajs/dark-features","jira/util/data/meta"],function(g,b,c){if(c.get("is-admin")){g(function(){if(a()){var j=d();j.find(".aui-buttons").append(g(JIRA.Templates.Nav.NotificationHelper.editNotificationsNavButton()));e(AJS.$("#notification-helper-button"))}else{if(f()){var i=h();if(i.length==1){i.prepend(g(JIRA.Templates.Nav.NotificationHelper.viewNotificationsNavButton()));e(g("#notification-helper-button"))}}}});function a(){var i=g("#notificationSchemeTable");return(i.length>=1)}function f(){var i=g("#project-config-notifications-table");return(i.length>=1)}function d(){var i=g(".aui-page-panel-content > header");if(i.length==0){i=g("<header class='aui-page-header'><div class='aui-page-header-inner'><div class='aui-page-header-actions'><div class='aui-buttons'></div></div></div></header>");g(".aui-page-panel-content").prepend(i)}return i}function h(){if(b.isEnabled("com.atlassian.jira.config.PDL")){var i=g("#project-config-panel-notifications > .aui-page-header .aui-page-header-actions");var j=i.find(".aui-buttons");return(j.size()>0)?j:i}return g(".project-config-panel-header > .operation-menu")}function e(j){if(AJS.HelpTip){var i=new AJS.HelpTip({id:"notification-helper-helptip",title:"Having trouble?",body:"Use the Notification Helper to find out why users receive, or do not receive notifications.",anchor:j});i.show();g("#notification-helper-helptip").click(function(){i.dismiss()});j.click(function(){i.dismiss()})}}}});;
;
/* module-key = 'com.atlassian.troubleshooting.plugin-jira:atst-healthchecks-notification', location = 'js/ajs-amd.js' */
define('troubleshooting/ajs', [], function () {
    'use strict';

    return AJS;
});;
;
/* module-key = 'com.atlassian.troubleshooting.plugin-jira:atst-healthchecks-notification', location = 'js/notification.js' */
/* global AJS */
require([
    "jquery",
    "aui/flag",
    "troubleshooting/ajs",
    "troubleshooting/location"
], function ($, flag, AJS, location) {
    'use strict';

    if (location.isOnSupportToolsPage()) {
        // Exit if we are on the ATST screen, we don't want to display healthcheck notification if user browsing on ATST
        return;
    }
    
    var pluginPageUrl =  AJS.contextPath() + '/plugins/servlet/troubleshooting/view';

    AJS.toInit(function () {
        var restBase = AJS.contextPath() + '/rest/troubleshooting/1.0';
        var user = $('meta[name=ajs-remote-user]').attr('content');

        // Initialise the healthcheck notification. Make a GET call to /check/{username} endpoint to get the list of failed check by user
        var initHealthcheckNotification = function () {
            $.getJSON(restBase + '/check/' + user).done(function (statusReport) {
                statusReport.statuses.forEach(function (status) {
                    showNotification(status);
                });

                // Listen to click event to dismiss or snooze notification
                $(document).find('.dismiss-notification').on('click', function () {
                    var $notification = $(this).parents().eq(3);
                    dismissNotification($notification);
                });

                $(document).find('.healthcheck-detail').on('click', function () {
                    var $notification = $(this).parents().eq(3);
                    var application = $notification.attr('application');
                    var severity = $notification.attr('severity');
                    var completeKey = $notification.attr('completeKey');

                    analyticsModule.run("Viewed", completeKey, application, severity);
                    snoozeNotification($notification);
                });
            });
        };

        // Renders the flat notification here, and set the necessary attribute to the flag
        var showNotification = function (status) {

            var healthCheckName = status.name;
            var severity = status.severity;
            var notificationId = status.id;
            var application = status.application;
            var completeKey = status.completeKey;
            var key = completeKey.split(':').pop();

            var flagType = severity === 'warning' ? 'warning' : 'error';
            var healthCheckUrl = pluginPageUrl + '?source=notification&healthCheck=' + key;

            var healthcheckNotification = flag({
                type: flagType,
                body: '<p>' + AJS.format("The {0} health check has failed in your system.", '<strong>' + healthCheckName + '</strong>') + '</p>' +
                    '<ul class="aui-nav-actions-list">' +
                        '<li><a href="' + healthCheckUrl + '" class="healthcheck-detail" target="_self">' + "Find out more" + '</a></li>' +
                        '<li><a href="#" class="dismiss-notification">' + "Don\'t remind me again" + '</a></li>' +
                    '</ul>',
                close: 'manual'
            });

            healthcheckNotification.setAttribute('id', 'healthcheck-notification');
            healthcheckNotification.setAttribute('healthcheck-name', healthCheckName);
            healthcheckNotification.setAttribute('notification-id', notificationId);
            healthcheckNotification.setAttribute('application', application);
            healthcheckNotification.setAttribute('severity', severity);
            healthcheckNotification.setAttribute('completeKey', completeKey);

            healthcheckNotification.addEventListener('aui-flag-close', function () {
                var $notification = $(this);
                snoozeNotification($notification);
            });


            analyticsModule.run('Display', completeKey, application, severity);
        };

        // Called when the "Don’t remind me again" link is clicked. Notifications that are dismissed / marked as read won't reappear to the user anymore
        var dismissNotification = function ($notification) {
            $notification.attr("aria-hidden", "true");

            var id = $notification.attr('notification-id');
            var name = $notification.attr('healthcheck-name');
            var application = $notification.attr('application');
            var severity = $notification.attr('severity');
            var completeKey = $notification.attr('completeKey');

            var data = {};
            data["username"] = user;
            data["notificationId"] = id;
            data["snooze"] = false;

            var jsonData = JSON.stringify(data);

            AJS.$.ajax({
                async: false,
                type: 'POST',
                url: restBase + '/dismissNotification',
                data: jsonData,
                contentType: "application/json",
                dataType: "json",
                success: function () {

                    analyticsModule.run("Dismissed", completeKey, application, severity);
                }
            })
        };

        // Called when the notification is closed via the cross button or if user open the link to the healthcheck
        // A notification is dismissed / marked as read automatically if it snoozes 3 times
        var snoozeNotification = function ($notification) {
            var id = $notification.attr('notification-id');
            var name = $notification.attr('healthcheck-name');
            var application = $notification.attr('application');
            var severity = $notification.attr('severity');
            var completeKey = $notification.attr('completeKey');

            var data = {};
            data["username"] = user;
            data["notificationId"] = id;
            data["snooze"] = true;

            var jsonData = JSON.stringify(data);

            AJS.$.ajax({
                async: false,
                type: 'POST',
                url: restBase + '/dismissNotification',
                data: jsonData,
                contentType: "application/json",
                dataType: "json",
                success: function (data, textStatus, jqXHR) {

                    isAutoDismissed(id, completeKey, name, application, severity);
                    analyticsModule.run("Snoozed", completeKey, application, severity);

                }
            })
        };

        var isAutoDismissed = function (notificationId, completeKey, name, application, severity) {
            var url = restBase + '/dismissNotification/' + user + '/' + notificationId;

            AJS.$.ajax({
                async: false,
                type: 'GET',
                url: url,
                contentType: "text/xml",
                success: function (data, textStatus, jqXHR) {
                    if (jqXHR.status == 200) {
                        notificationAutoDismissed(name);
                        analyticsModule.run("Autodismissed", completeKey, application, severity);
                    }


                }
            });
        };

        // This module allows for us to capture the correct Analytics events per display as per SHC-344.
        var analyticsModule = (function () {
            var lastEvent;
            var event = {};

            event.run = function (action, completeKey, application, severity) {
                if (lastEvent == "Viewed") {
                    // when user views info, we snooze the notification. We only want to record the Viewed AA event.
                    lastEvent = action;
                } else {
                    lastEvent = action;
                    if (action == "Display") {
                        AJS.trigger('analyticsEvent', {
                            name: "healthcheck.notification.display",
                            data: {action: action, name: completeKey, application: application, severity: severity}
                        });
                    } else {
                        AJS.trigger('analyticsEvent', {
                            name: "healthcheck.notification.action",
                            data: {action: action, name: completeKey, application: application, severity: severity}
                        });
                    }
                }
            };
            return event;
        }());

        // This function is called when a notification is automatically marked as read (normally is called when a notification is snoozed 3 times)
        var notificationAutoDismissed = function (healthCheckName) {
            // We set a quick timeout here so the animation will be displayed properly
            setTimeout(function () {
                flag({
                    type: "info",
                    body: "<p>The <strong>" + healthCheckName + "</strong> notification is now dismissed. </p>" +
                    "<p>Please visit <a href='" + AJS.contextPath() + "/plugins/servlet/troubleshooting/view/?source=notification' class='healthcheck-detail' target='_self'>this link</a> for more on the check.</p>",
                    close: "auto"
                });
            }, 1500);
        };

        initHealthcheckNotification();
    });
});;
;
/* module-key = 'com.atlassian.troubleshooting.plugin-jira:atst-healthchecks-notification', location = 'js/shc-location.js' */
define('troubleshooting/location', [], function () {
    return {
        // Get the path name of the current page URL, and returns true if user is on ATST page or false if user is on other admin screens
        isOnSupportToolsPage: function () {
            return window.location.pathname.toLowerCase().indexOf("/troubleshooting/view") >= 0;
        }
    }
});;
;
/* module-key = 'jira.webresources:field-templates', location = '/includes/jira/field/templates/singleUserPicker.soy' */
// This file was automatically generated from singleUserPicker.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Fields.Pickers.User.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Fields == 'undefined') { JIRA.Templates.Fields = {}; }
if (typeof JIRA.Templates.Fields.Pickers == 'undefined') { JIRA.Templates.Fields.Pickers = {}; }
if (typeof JIRA.Templates.Fields.Pickers.User == 'undefined') { JIRA.Templates.Fields.Pickers.User = {}; }


JIRA.Templates.Fields.Pickers.User.single = function(opt_data, opt_ignored) {
  var output = '<select id="' + soy.$$escapeHtml(opt_data.field.id) + '" name="' + soy.$$escapeHtml(opt_data.field.name) + '" class="single-user-picker js-' + ((opt_data.type) ? soy.$$escapeHtml(opt_data.type) : 'default-user-picker') + '"' + ((opt_data.inputText) ? ' data-input-text="' + soy.$$escapeHtml(opt_data.inputText) + '"' : '') + ((opt_data.editValue) ? ' data-edit-value="' + soy.$$escapeHtml(opt_data.editValue) + '"' : '') + ((opt_data.showDropdownButton) ? ' data-show-dropdown-button="true"' : '') + ((opt_data.userType) ? ' data-user-type="' + soy.$$escapeHtml(opt_data.userType) + '"' : '') + ((opt_data.containerClass) ? ' data-container-class="' + soy.$$escapeHtml(opt_data.containerClass) + '"' : '') + '>';
  var optionList38 = opt_data.options;
  var optionListLen38 = optionList38.length;
  for (var optionIndex38 = 0; optionIndex38 < optionListLen38; optionIndex38++) {
    var optionData38 = optionList38[optionIndex38];
    if (optionData38.optionGroup) {
      output += '<optgroup id="' + soy.$$escapeHtml(opt_data.field.id) + '-group-' + soy.$$escapeHtml(optionData38.id) + '" label="' + soy.$$escapeHtml(optionData38.display) + '"' + ((optionData38.footer) ? ' data-footer-text="' + soy.$$escapeHtml(optionData38.footer) + '"' : '') + ((optionData38.weight != -1) ? ' data-weight="' + soy.$$escapeHtml(optionData38.weight) + '"' : '') + '>';
      var groupOptionList59 = optionData38.groupOptions;
      var groupOptionListLen59 = groupOptionList59.length;
      for (var groupOptionIndex59 = 0; groupOptionIndex59 < groupOptionListLen59; groupOptionIndex59++) {
        var groupOptionData59 = groupOptionList59[groupOptionIndex59];
        output += JIRA.Templates.Fields.Pickers.User.option(groupOptionData59);
      }
      output += '</optgroup>';
    } else {
      output += JIRA.Templates.Fields.Pickers.User.option(optionData38);
    }
  }
  output += '</select>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Fields.Pickers.User.single.soyTemplateName = 'JIRA.Templates.Fields.Pickers.User.single';
}


JIRA.Templates.Fields.Pickers.User.option = function(opt_data, opt_ignored) {
  return '<option ' + ((opt_data.loggedInUser) ? 'class="current-user" ' : '') + ((opt_data.selected) ? 'selected="selected" ' : '') + 'value="' + soy.$$escapeHtml(opt_data.optionName) + '" data-field-text="' + soy.$$escapeHtml(opt_data.displayName) + '" data-field-label="' + soy.$$escapeHtml(opt_data.displayName) + ((opt_data.emailAddress) ? ' - ' + soy.$$escapeHtml(opt_data.emailAddress) : '') + ((opt_data.optionName && opt_data.optionName != '-1') ? ' (' + soy.$$escapeHtml(opt_data.optionName) + ')' : '') + '" data-icon="' + soy.$$escapeHtml(opt_data.avatarURL) + '" >' + soy.$$escapeHtml(opt_data.displayName) + '</option>';
};
if (goog.DEBUG) {
  JIRA.Templates.Fields.Pickers.User.option.soyTemplateName = 'JIRA.Templates.Fields.Pickers.User.option';
}
;
;
/* module-key = 'jira.webresources:field-templates', location = '/includes/jira/field/templates/assigneeField.soy' */
// This file was automatically generated from assigneeField.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Fields.Pickers.User.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Fields == 'undefined') { JIRA.Templates.Fields = {}; }
if (typeof JIRA.Templates.Fields.Pickers == 'undefined') { JIRA.Templates.Fields.Pickers = {}; }
if (typeof JIRA.Templates.Fields.Pickers.User == 'undefined') { JIRA.Templates.Fields.Pickers.User = {}; }


JIRA.Templates.Fields.Pickers.User.assignee = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.Fields.Pickers.User.single(soy.$$augmentMap(opt_data, {options: opt_data.assigneeOptions.options, showDropdownButton: true, userType: 'assignee', type: 'assignee-picker', containerClass: 'long-field'})) + ((opt_data.isLoggedInUserAssignable) ? '<a href="#' + soy.$$escapeHtml(opt_data.field.id) + '" id="assign-to-me-trigger">' + soy.$$escapeHtml('Assign to me') + '</a>' : '') + '<fieldset class="hidden parameters"><input type="hidden" title="projectKeys" value="' + soy.$$escapeHtml(opt_data.projectKeys) + '"/>' + ((opt_data.issueKey) ? '<input type="hidden" title="assigneeEditIssueKey" value="' + soy.$$escapeHtml(opt_data.issueKey) + '"/>' : '') + ((opt_data.actionDescriptorId) ? '<input type="hidden" title="actionDescriptorId" value="' + soy.$$escapeHtml(opt_data.actionDescriptorId) + '"/>' : '') + '</fieldset>';
};
if (goog.DEBUG) {
  JIRA.Templates.Fields.Pickers.User.assignee.soyTemplateName = 'JIRA.Templates.Fields.Pickers.User.assignee';
}
;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/lib/jquery.dotdotdot-1.5.7.js' */
(function(i){if(i.fn.dotdotdot){return}i.fn.dotdotdot=function(v){if(this.length==0){if(!v||v.debug!==false){b(true,'No element found for "'+this.selector+'".')}return this}if(this.length>1){return this.each(function(){i(this).dotdotdot(v)})}var r=this;if(r.data("dotdotdot")){r.trigger("destroy.dot")}r.bind_events=function(){r.bind("update.dot",function(y,A){y.preventDefault();y.stopPropagation();t.maxHeight=(typeof t.height=="number")?t.height:o(r);t.maxHeight+=t.tolerance;if(typeof A!="undefined"){if(typeof A=="string"||A instanceof HTMLElement){A=i("<div />").append(A).contents()}if(A instanceof i){w=A}}s=r.wrapInner('<div class="dotdotdot" />').children();s.empty().append(w.clone(true)).css({height:"auto",width:"auto",border:"none",padding:0,margin:0});var z=false,x=false;if(q.afterElement){z=q.afterElement.clone(true);q.afterElement.remove()}if(k(s,t)){if(t.wrap=="children"){x=d(s,t,z)}else{x=m(s,r,s,t,z)}}s.replaceWith(s.contents());s=null;if(i.isFunction(t.callback)){t.callback.call(r[0],x,w)}q.isTruncated=x;return x}).bind("isTruncated.dot",function(y,x){y.preventDefault();y.stopPropagation();if(typeof x=="function"){x.call(r[0],q.isTruncated)}return q.isTruncated}).bind("originalContent.dot",function(y,x){y.preventDefault();y.stopPropagation();if(typeof x=="function"){x.call(r[0],w)}return w}).bind("destroy.dot",function(x){x.preventDefault();x.stopPropagation();r.unwatch().unbind_events().empty().append(w).data("dotdotdot",false)});return r};r.unbind_events=function(){r.unbind(".dot");return r};r.watch=function(){r.unwatch();if(t.watch=="window"){var z=i(window),y=z.width(),x=z.height();z.bind("resize.dot"+q.dotId,function(){if(y!=z.width()||x!=z.height()||!t.windowResizeFix){y=z.width();x=z.height();if(p){clearInterval(p)}p=setTimeout(function(){r.trigger("update.dot")},10)}})}else{u=j(r);p=setInterval(function(){var A=j(r);if(u.width!=A.width||u.height!=A.height){r.trigger("update.dot");u=j(r)}},100)}return r};r.unwatch=function(){i(window).unbind("resize.dot"+q.dotId);if(p){clearInterval(p)}return r};var w=r.contents(),t=i.extend(true,{},i.fn.dotdotdot.defaults,v),q={},u={},p=null,s=null;q.afterElement=c(t.after,r);q.isTruncated=false;q.dotId=l++;r.data("dotdotdot",true).bind_events().trigger("update.dot");if(t.watch){r.watch()}return r};i.fn.dotdotdot.defaults={ellipsis:"... ",wrap:"word",lastCharacter:{remove:[" ",",",";",".","!","?"],noEllipsis:[]},tolerance:0,callback:null,after:null,height:null,watch:false,windowResizeFix:true,debug:false};var l=1;function d(s,w,v){var u=s.children(),p=false;s.empty();for(var r=0,q=u.length;r<q;r++){var t=u.eq(r);s.append(t);if(v){s.append(v)}if(k(s,w)){t.remove();p=true;break}else{if(v){v.remove()}}}return p}function m(s,r,A,t,q){var w=s.contents(),x=false;s.empty();var z="table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, select, optgroup, option, textarea, script, style";for(var y=0,u=w.length;y<u;y++){if(x){break}var v=w[y],p=i(v);if(typeof v=="undefined"){continue}s.append(p);if(q){s[(s.is(z))?"after":"append"](q)}if(v.nodeType==3){if(k(A,t)){x=e(p,r,A,t,q)}}else{x=m(p,r,A,t,q)}if(!x){if(q){q.remove()}}}return x}function e(q,r,p,w,s){var D=false,A=q[0];if(typeof A=="undefined"){return false}var E=(w.wrap=="letter")?"":" ",t=h(A).split(E),F=-1,v=-1,G=0,y=t.length-1;while(G<=y){var x=Math.floor((G+y)/2);if(x==v){break}v=x;a(A,t.slice(0,v+1).join(E)+w.ellipsis);if(!k(p,w)){F=v;G=v}else{y=v}}if(F!=-1&&!(t.length==1&&t[0].length==0)){var u=f(t.slice(0,F+1).join(E),w);D=true;a(A,u)}else{var z=q.parent();q.remove();var C=(s)?s.length:0;if(z.contents().size()>C){var B=z.contents().eq(-1-C);D=e(B,r,p,w,s)}else{var A=z.prev().contents().eq(-1)[0];if(typeof A!="undefined"){var u=f(h(A),w);a(A,u);z.remove();D=true}}}return D}function k(q,p){return q.innerHeight()>p.maxHeight}function f(p,q){while(i.inArray(p.slice(-1),q.lastCharacter.remove)>-1){p=p.slice(0,-1)}if(i.inArray(p.slice(-1),q.lastCharacter.noEllipsis)<0){p+=q.ellipsis}return p}function j(p){return{width:p.innerWidth(),height:p.innerHeight()}}function a(q,p){if(q.innerText){q.innerText=p}else{if(q.nodeValue){q.nodeValue=p}else{if(q.textContent){q.textContent=p}}}}function h(p){if(p.innerText){return p.innerText}else{if(p.nodeValue){return p.nodeValue}else{if(p.textContent){return p.textContent}else{return""}}}}function c(p,q){if(typeof p=="undefined"){return false}if(!p){return false}if(typeof p=="string"){p=i(p,q);return(p.length)?p:false}if(typeof p=="object"){return(typeof p.jquery=="undefined")?false:p}return false}function o(s){var t=s.innerHeight(),r=["paddingTop","paddingBottom"];for(var u=0,q=r.length;u<q;u++){var p=parseInt(s.css(r[u]),10);if(isNaN(p)){p=0}t-=p}return t}function b(q,p){if(!q){return false}if(typeof p=="string"){p="dotdotdot: "+p}else{p=["dotdotdot:",p]}if(typeof window.console!="undefined"){if(typeof window.console.log!="undefined"){window.console.log(p)}}return false}var n=i.fn.html;i.fn.html=function(p){if(typeof p!="undefined"){if(this.data("dotdotdot")){if(typeof p!="function"){return this.trigger("update",[p])}}return n.call(this,p)}return n.call(this)};var g=i.fn.text;i.fn.text=function(q){if(typeof q!="undefined"){if(this.data("dotdotdot")){var p=i("<div />");p.text(q);q=p.html();p.remove();return this.trigger("update",[q])}return g.call(this,q)}return g.call(this)}})(require("jquery"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/soy/ProjectTemplatesList.soy' */
// This file was automatically generated from ProjectTemplatesList.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.ProjectTemplates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.ProjectTemplates == 'undefined') { JIRA.Templates.ProjectTemplates = {}; }


JIRA.Templates.ProjectTemplates.renderProjectTemplates = function(opt_data, opt_ignored) {
  return '' + ((soy.$$getMapKeys(opt_data.projectTemplates).length == 0) ? JIRA.Templates.errorMsg({closeable: false, msg: 'No project templates could be found.'}) : JIRA.Templates.ProjectTemplates.renderTemplates(opt_data));
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.renderProjectTemplates.soyTemplateName = 'JIRA.Templates.ProjectTemplates.renderProjectTemplates';
}


JIRA.Templates.ProjectTemplates.renderProjectTemplatesGroupedByType = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.projectTemplatesByType.length == 0) {
    output += JIRA.Templates.errorMsg({closeable: false, msg: 'No project templates could be found.'});
  } else {
    var projectTypeTemplatesGroupList18 = opt_data.projectTemplatesByType;
    var projectTypeTemplatesGroupListLen18 = projectTypeTemplatesGroupList18.length;
    for (var projectTypeTemplatesGroupIndex18 = 0; projectTypeTemplatesGroupIndex18 < projectTypeTemplatesGroupListLen18; projectTypeTemplatesGroupIndex18++) {
      var projectTypeTemplatesGroupData18 = projectTypeTemplatesGroupList18[projectTypeTemplatesGroupIndex18];
      output += '<div class="template-group" id="project-template-group-' + soy.$$escapeHtml(projectTypeTemplatesGroupData18.projectTypeBean.projectTypeKey) + '"><div class="template-group-header"><h6><img class="project-type-icon" src="data:image/svg+xml;base64, ' + soy.$$escapeHtml(projectTypeTemplatesGroupData18.projectTypeBean.icon) + ' "/><span>' + soy.$$escapeHtml(projectTypeTemplatesGroupData18.projectTypeBean.projectTypeDisplayKey) + '</span></h6></div>' + JIRA.Templates.ProjectTemplates.renderTemplates({projectTemplates: projectTypeTemplatesGroupData18.projectTemplates}) + '</div>';
    }
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.renderProjectTemplatesGroupedByType.soyTemplateName = 'JIRA.Templates.ProjectTemplates.renderProjectTemplatesGroupedByType';
}


JIRA.Templates.ProjectTemplates.renderTemplates = function(opt_data, opt_ignored) {
  return '<div class="pt-templates-list">' + JIRA.Templates.ProjectTemplates.renderItems(opt_data) + '</div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.renderTemplates.soyTemplateName = 'JIRA.Templates.ProjectTemplates.renderTemplates';
}


JIRA.Templates.ProjectTemplates.renderItems = function(opt_data, opt_ignored) {
  var output = '<ol class="templates" tabindex="100">';
  var templateList37 = opt_data.projectTemplates;
  var templateListLen37 = templateList37.length;
  for (var templateIndex37 = 0; templateIndex37 < templateListLen37; templateIndex37++) {
    var templateData37 = templateList37[templateIndex37];
    output += '<li class="template"' + ((templateData37.itemModuleCompleteKey) ? 'data-item-module-complete-key="' + soy.$$escapeHtml(templateData37.itemModuleCompleteKey) + '"' : '') + ((templateData37.projectTemplateModuleCompleteKey) ? 'data-project-template-module-complete-key="' + soy.$$escapeHtml(templateData37.projectTemplateModuleCompleteKey) + '"' : '') + ((templateData37.createProject) ? 'data-create-project="' + soy.$$escapeHtml(templateData37.createProject) + '"' : '') + ((templateData37.demoProject) ? 'data-demo-project="' + soy.$$escapeHtml(templateData37.demoProject) + '"' : '') + ((templateData37.backgroundIconUrl) ? 'data-background-icon-url="' + soy.$$escapeHtml(templateData37.backgroundIconUrl) + '"' : '') + ((templateData37.name) ? 'data-name="' + soy.$$escapeHtml(templateData37.name) + '"' : '') + ((templateData37.description) ? 'data-description="' + soy.$$escapeHtml(templateData37.description) + '"' : '') + ((templateData37.longDescriptionContent) ? 'data-long-description-content="' + soy.$$escapeHtml(templateData37.longDescriptionContent) + '"' : '') + ((templateData37.infoSoyPath) ? 'data-info-soy-path="' + soy.$$escapeHtml(templateData37.infoSoyPath) + '"' : '') + '><img class="template-preview" src="' + soy.$$escapeHtml(templateData37.iconUrl) + '" /><div class="template-meta"><div class="template-name" title="' + soy.$$escapeHtml(templateData37.name) + '">' + soy.$$escapeHtml(templateData37.name) + '</div><div class="template-description" title="' + soy.$$escapeHtml(templateData37.description) + '">' + soy.$$escapeHtml(templateData37.description) + '</div></div></li>';
  }
  output += '</ol>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.renderItems.soyTemplateName = 'JIRA.Templates.ProjectTemplates.renderItems';
}


JIRA.Templates.ProjectTemplates.loadingTemplatesList = function(opt_data, opt_ignored) {
  return '<div class="wait-container"><img class="wait-icon" src="' + soy.$$escapeHtml("") + '/images/icons/wait.gif"><span class="wait-text">' + soy.$$escapeHtml('Loading project templates') + '&hellip;</span></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.loadingTemplatesList.soyTemplateName = 'JIRA.Templates.ProjectTemplates.loadingTemplatesList';
}


JIRA.Templates.ProjectTemplates.footerLinks = function(opt_data, opt_ignored) {
  return '<div class="footer-links"><a class="import-project-trigger button-panel-link" href="' + soy.$$escapeHtml("") + '/secure/admin/views/ExternalImport1.jspa">' + soy.$$escapeHtml('Import a project') + '</a>|<a class="create-with-shared-config button-panel-link" href="#"><span class="aui-icon aui-icon-create-shared">' + soy.$$escapeHtml('Create with shared configuration') + '</span> ' + soy.$$escapeHtml('Create with shared configuration') + '</a>' + ((opt_data.showDemoLink) ? '| <a class="add-demo-project-trigger button-panel-link" href="#">' + soy.$$escapeHtml('Create sample data') + '</a>' : '') + '</div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.footerLinks.soyTemplateName = 'JIRA.Templates.ProjectTemplates.footerLinks';
}


JIRA.Templates.ProjectTemplates.addWorkflowsLink = function(opt_data, opt_ignored) {
  return '<a class="add-workflow-link" href="' + soy.$$escapeHtml(opt_data.baseUrl) + '/plugins/servlet/wfshare-import?src=projecttemplates" tabindex="-1">' + soy.$$escapeHtml('View Marketplace Workflows') + '</a>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.addWorkflowsLink.soyTemplateName = 'JIRA.Templates.ProjectTemplates.addWorkflowsLink';
}
;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/soy/AddProject.soy' */
// This file was automatically generated from AddProject.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.ProjectTemplates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.ProjectTemplates == 'undefined') { JIRA.Templates.ProjectTemplates = {}; }


JIRA.Templates.ProjectTemplates.addProjectForm = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.errors.errorMessages) {
    var errorList5 = opt_data.errors.errorMessages;
    var errorListLen5 = errorList5.length;
    for (var errorIndex5 = 0; errorIndex5 < errorListLen5; errorIndex5++) {
      var errorData5 = errorList5[errorIndex5];
      output += JIRA.Templates.errorMsg({closeable: false, msg: errorData5});
    }
  }
  output += '<div class="add-project-wrapper"><div class="add-project-form-wrapper">' + aui.form.form({content: '' + aui.form.fieldset({legendContent: '', content: '' + JIRA.Templates.ProjectTemplates.longTextField({id: 'name', name: 'name', isRequired: false, maxLength: opt_data.maxNameLength, labelContent: 'Name', descriptionText: AJS.format('Max. {0} characters.',opt_data.maxNameLength), value: opt_data.currentName ? opt_data.currentName : '', errorTexts: opt_data.errors.errors.projectName ? [opt_data.errors.errors.projectName] : []}) + JIRA.Templates.ProjectTemplates.textFieldWithHelpIcon({id: 'key', name: 'key', isRequired: false, maxLength: opt_data.maxKeyLength, labelContent: 'Key', descriptionText: AJS.format('Max. {0} characters.',opt_data.maxKeyLength), helpTitle: 'What\x27s a project key?', value: opt_data.currentKey ? opt_data.currentKey : '', errorTexts: opt_data.errors.errors.projectKey ? [opt_data.errors.errors.projectKey] : []}) + ((opt_data.shouldShowLead) ? JIRA.Templates.ProjectTemplates.projectLeadField({field: opt_data.projectLeadPickerField, isRequired: false, errorTexts: opt_data.errors.errors.projectLead ? [opt_data.errors.errors.projectLead] : [], options: opt_data.leadOptions}) : '') + ((opt_data.addUserToLicense.displayCheckbox) ? JIRA.Templates.ProjectTemplates.addUserToLicense({fieldId: opt_data.addUserToLicense.fieldId, fieldName: opt_data.addUserToLicense.fieldName, applicationName: opt_data.addUserToLicense.applicationName, usedSeats: opt_data.addUserToLicense.usedSeats, totalSeats: opt_data.addUserToLicense.totalSeats, disableCheckbox: opt_data.addUserToLicense.disableCheckbox, licensingUrl: opt_data.addUserToLicense.licensingUrl}) : '') + '<input type="hidden" name="keyEdited" id="keyEdited" value="false"><input type="hidden" name="projectTemplateWebItemKey" value="' + soy.$$escapeHtml(opt_data.projectTemplateWebItemKey) + '"><input type="hidden" name="projectTemplateModuleKey" value="' + soy.$$escapeHtml(opt_data.projectTemplateModuleKey) + '"><input type="submit" class="pt-hidden-submit offscreen-left">'}), id: 'add-project-form'}) + '</div>' + ((opt_data.projectTemplateDescriptionContent) ? '<div class="add-project-description-wrapper"><div class="project-template-title"><h3>' + soy.$$escapeHtml(opt_data.projectTemplateTitle) + '</h3></div><div class="project-template-description">' + soy.$$filterNoAutoescape(opt_data.projectTemplateDescriptionContent) + '</div></div>' : '') + '</div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.addProjectForm.soyTemplateName = 'JIRA.Templates.ProjectTemplates.addProjectForm';
}


JIRA.Templates.ProjectTemplates.keyHelp = function(opt_data, opt_ignored) {
  return '<div class="project-key-help"><p><b>' + soy.$$escapeHtml('What\x27s a project key?') + '</b></p><ul><li>' + soy.$$escapeHtml('It prefixes each issue in the project') + '</li><li>' + soy.$$escapeHtml('It can be changed, but this is not a trivial task') + '</li></ul></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.keyHelp.soyTemplateName = 'JIRA.Templates.ProjectTemplates.keyHelp';
}


JIRA.Templates.ProjectTemplates.projectLeadField = function(opt_data, opt_ignored) {
  var param77 = '' + aui.form.label({forField: opt_data.field.name + '-field', isRequired: opt_data.isRequired, content: 'Project Lead'}) + JIRA.Templates.Fields.Pickers.User.single({field: opt_data.field, options: opt_data.options, editValue: opt_data.value}) + aui.form.fieldDescription({message: 'Enter the username of the Project Lead.'});
  if (opt_data.errorTexts) {
    var errorList90 = opt_data.errorTexts;
    var errorListLen90 = errorList90.length;
    for (var errorIndex90 = 0; errorIndex90 < errorListLen90; errorIndex90++) {
      var errorData90 = errorList90[errorIndex90];
      param77 += aui.form.fieldError({message: errorData90});
    }
  }
  var output = '' + aui.form.fieldGroup({content: param77});
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.projectLeadField.soyTemplateName = 'JIRA.Templates.ProjectTemplates.projectLeadField';
}


JIRA.Templates.ProjectTemplates.addUserToLicense = function(opt_data, opt_ignored) {
  var output = '';
  var labelMessage__soy96 = '' + soy.$$escapeHtml(AJS.format('Give me a {0} license so I can access this project.',opt_data.applicationName)) + ((opt_data.totalSeats > 0) ? '<br/>' + soy.$$escapeHtml(AJS.format('({0} of {1} licenses now used)',opt_data.usedSeats,opt_data.totalSeats)) : '');
  output += aui.form.fieldGroup({content: '' + aui.form.label({forField: opt_data.fieldName, content: 'License'}) + ((opt_data.disableCheckbox) ? aui.form.field({id: opt_data.fieldId, name: opt_data.fieldName, value: 'true', type: 'checkbox', isChecked: false, labelContent: labelMessage__soy96, isDisabled: true, descriptionContent: AJS.format('We can\x27\x27t give you access to {0} automatically. You can {1}manage application access{2} to work on {0} projects.',opt_data.applicationName,'<a href="' + "" + opt_data.licensingUrl + '">','</a>')}) : aui.form.field({id: opt_data.fieldId, name: opt_data.fieldName, value: 'true', type: 'checkbox', isChecked: false, labelContent: labelMessage__soy96, isDisabled: false}))});
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.addUserToLicense.soyTemplateName = 'JIRA.Templates.ProjectTemplates.addUserToLicense';
}


JIRA.Templates.ProjectTemplates.textFieldWithHelpIcon = function(opt_data, opt_ignored) {
  var param128 = '' + aui.form.label({forField: opt_data.name, isRequired: opt_data.isRequired, content: opt_data.labelContent}) + aui.form.input({id: opt_data.id, name: opt_data.name, type: 'text', maxLength: opt_data.maxLength, value: opt_data.value}) + '<a class="help-lnk" title="' + soy.$$escapeHtml(opt_data.helpTitle) + '" id="' + soy.$$escapeHtml(opt_data.id) + '-help-icon"><span class="aui-icon aui-icon-help">' + soy.$$escapeHtml(opt_data.helpTitle) + '</span></a>' + ((opt_data.descriptionText) ? aui.form.fieldDescription({message: opt_data.descriptionText}) : '');
  if (opt_data.errorTexts) {
    var errorList152 = opt_data.errorTexts;
    var errorListLen152 = errorList152.length;
    for (var errorIndex152 = 0; errorIndex152 < errorListLen152; errorIndex152++) {
      var errorData152 = errorList152[errorIndex152];
      param128 += aui.form.fieldError({message: errorData152});
    }
  }
  var output = '' + aui.form.fieldGroup({content: param128});
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.textFieldWithHelpIcon.soyTemplateName = 'JIRA.Templates.ProjectTemplates.textFieldWithHelpIcon';
}


JIRA.Templates.ProjectTemplates.longTextField = function(opt_data, opt_ignored) {
  var param158 = '' + aui.form.label({forField: opt_data.name, isRequired: opt_data.isRequired, content: opt_data.labelContent}) + aui.form.input({id: opt_data.id, name: opt_data.name, type: 'text', maxLength: opt_data.maxLength, value: opt_data.value, extraClasses: 'long-field'}) + ((opt_data.descriptionText) ? aui.form.fieldDescription({message: opt_data.descriptionText}) : '');
  if (opt_data.errorTexts) {
    var errorList176 = opt_data.errorTexts;
    var errorListLen176 = errorList176.length;
    for (var errorIndex176 = 0; errorIndex176 < errorListLen176; errorIndex176++) {
      var errorData176 = errorList176[errorIndex176];
      param158 += aui.form.fieldError({message: errorData176});
    }
  }
  var output = '' + aui.form.fieldGroup({content: param158});
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.longTextField.soyTemplateName = 'JIRA.Templates.ProjectTemplates.longTextField';
}


JIRA.Templates.ProjectTemplates.spinner = function(opt_data, opt_ignored) {
  return '<span id=\'' + soy.$$escapeHtml(opt_data.id) + '\' class=\'icon throbber loading\'/>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.spinner.soyTemplateName = 'JIRA.Templates.ProjectTemplates.spinner';
}


JIRA.Templates.ProjectTemplates.formatAnchor = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(opt_data.href) + '"' + ((opt_data.title) ? ' title="' + soy.$$escapeHtml(opt_data.title) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.body) + '</a>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.formatAnchor.soyTemplateName = 'JIRA.Templates.ProjectTemplates.formatAnchor';
}
;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/soy/CreateSharedProject.soy' */
// This file was automatically generated from CreateSharedProject.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.ProjectTemplates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.ProjectTemplates == 'undefined') { JIRA.Templates.ProjectTemplates = {}; }


JIRA.Templates.ProjectTemplates.createSharedProjectForm = function(opt_data, opt_ignored) {
  return '<div class="create-shared-project-wrapper"><div class="create-shared-project-form-wrapper">' + aui.form.form({content: '' + aui.form.fieldset({content: '<p>' + soy.$$escapeHtml('Select the existing project that you\x27d like to share configurations with.') + '<a class="help-lnk" title="' + soy.$$escapeHtml('What will be shared?') + '" id="shared-help-icon"><span class="aui-icon aui-icon-help">' + soy.$$escapeHtml('What will be shared?') + '</span></a></p>' + aui.form.fieldGroup({extraClasses: 'project-picker-group', content: '' + aui.form.label({forField: 'project-picker', isRequired: false, content: 'Choose a project'}) + aui.form.input({id: 'project-picker', name: 'project', type: 'text'}) + '<div id="project-picker-options" data-suggestions="' + soy.$$escapeHtml(opt_data.projectSuggestions) + '"></div>'}) + '<p class="create-shared-info">' + soy.$$escapeHtml('When a configuration is shared with several projects, it means that any changes made to the configuration will affect all the projects.') + '</p>'}), id: 'create-shared-project-form'}) + '</div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.createSharedProjectForm.soyTemplateName = 'JIRA.Templates.ProjectTemplates.createSharedProjectForm';
}


JIRA.Templates.ProjectTemplates.loading = function(opt_data, opt_ignored) {
  return '<div><div class="dialog-spinner"></div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.loading.soyTemplateName = 'JIRA.Templates.ProjectTemplates.loading';
}


JIRA.Templates.ProjectTemplates.noProjects = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$escapeHtml('Looks like no other projects exist yet. Please create a brand new project first before trying to share an existing project\x27s configuration.') + '</p>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.noProjects.soyTemplateName = 'JIRA.Templates.ProjectTemplates.noProjects';
}


JIRA.Templates.ProjectTemplates.sharedHelp = function(opt_data, opt_ignored) {
  return '<div class="shared-help"><p><strong>' + soy.$$escapeHtml('What will be shared?') + '</strong></p><p>' + soy.$$escapeHtml('Configuration refers to the set of schemes used by a project') + '</p><ul><li>' + soy.$$escapeHtml('Permission Scheme') + '</li><li>' + soy.$$escapeHtml('Notification Scheme') + '</li><li>' + soy.$$escapeHtml('Issue Security Scheme') + '</li><li>' + soy.$$escapeHtml('Workflow Scheme') + '</li><li>' + soy.$$escapeHtml('Issue Type Scheme') + '</li><li>' + soy.$$escapeHtml('Issue Type Screen Scheme') + '</li><li>' + soy.$$escapeHtml('Field Configuration Scheme') + '</li></ul></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.sharedHelp.soyTemplateName = 'JIRA.Templates.ProjectTemplates.sharedHelp';
}
;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/Config.js' */
define("jira/project-templates/config",{model:{}});AJS.namespace("JPT.ConfigModel",null,require("jira/project-templates/config"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/ProjectKeyGenerator.js' */
define("jira/project-templates/project-key-generator",["jquery","underscore"],function(d,h){var c={};c.IGNORED_WORDS=["THE","A","AN","AS","AND","OF","OR"];c.CHARACTER_MAP={};c.CHARACTER_MAP[199]="C";c.CHARACTER_MAP[231]="c";c.CHARACTER_MAP[252]="u";c.CHARACTER_MAP[251]="u";c.CHARACTER_MAP[250]="u";c.CHARACTER_MAP[249]="u";c.CHARACTER_MAP[233]="e";c.CHARACTER_MAP[234]="e";c.CHARACTER_MAP[235]="e";c.CHARACTER_MAP[232]="e";c.CHARACTER_MAP[226]="a";c.CHARACTER_MAP[228]="a";c.CHARACTER_MAP[224]="a";c.CHARACTER_MAP[229]="a";c.CHARACTER_MAP[225]="a";c.CHARACTER_MAP[239]="i";c.CHARACTER_MAP[238]="i";c.CHARACTER_MAP[236]="i";c.CHARACTER_MAP[237]="i";c.CHARACTER_MAP[196]="A";c.CHARACTER_MAP[197]="A";c.CHARACTER_MAP[201]="E";c.CHARACTER_MAP[230]="ae";c.CHARACTER_MAP[198]="Ae";c.CHARACTER_MAP[244]="o";c.CHARACTER_MAP[246]="o";c.CHARACTER_MAP[242]="o";c.CHARACTER_MAP[243]="o";c.CHARACTER_MAP[220]="U";c.CHARACTER_MAP[255]="Y";c.CHARACTER_MAP[214]="O";c.CHARACTER_MAP[241]="n";c.CHARACTER_MAP[209]="N";c.desiredKeyLength=4;c.maxKeyLength=10;c.getTotalLength=function a(k){return k.join("").length};c.removeIgnoredWords=function f(k){return h.reject(k,function(l){return d.inArray(l,c.IGNORED_WORDS)!==-1})};c.createAcronym=function b(l){var k="";d.each(l,function(m,n){k+=n.charAt(0)});return k};c.getFirstSyllable=function i(m){var l=false;var k;for(k=0;k<m.length;k++){if(c.isVowelOrY(m[k])){l=true}else{if(l){return m.substring(0,k+1)}}}return m};c.isVowelOrY=function g(k){return k&&k.length===1&&k.search("[AEIOUY]")!==-1};c.init=function j(l,k){c.desiredKeyLength=l;c.maxKeyLength=k};c.generate=function e(l){l=d.trim(l);if(!l){return""}var k=[];for(var n=0,p=l.length;n<p;n++){var o=c.CHARACTER_MAP[l.charCodeAt(n)];k.push(o?o:l[n])}l=k.join("");var r=[];d.each(l.split(/\s+/),function(s,t){if(t){t=t.replace(/[^a-zA-Z]/g,"");t=t.toUpperCase();t.length&&r.push(t)}});if(c.desiredKeyLength&&c.getTotalLength(r)>c.desiredKeyLength){r=c.removeIgnoredWords(r)}var m;if(r.length==0){m=""}else{if(r.length==1){var q=r[0];if(c.desiredKeyLength&&q.length>c.desiredKeyLength){m=c.getFirstSyllable(q)}else{m=q}}else{m=c.createAcronym(r)}}if(c.maxKeyLength&&m.length>c.maxKeyLength){m=m.substr(0,c.maxKeyLength)}return m};return c});AJS.namespace("JPT.ProjectKeyGenerator",null,require("jira/project-templates/project-key-generator"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/DialogView.js' */
define("jira/project-templates/dialog-view-impl",["require","backbone","underscore"],function(e,f,d){var b=AJS.Dialog;var a=AJS.trigger;return f.View.extend({events:{"click   .add-project-trigger":"_onClickAddProject","click   .add-demo-project-trigger":"_onClickAddDemoProject","click   .add-workflow-link":"_onClickViewMarketplaceWorkflows","click   #add-project-dialog .add-demo-project-trigger":"_onCreateProjectAddDemoProjectClick","click   #add-project-dialog .import-project-trigger":"_onClickImportProject","click   #add-project-dialog .create-with-shared-config":"_onClickCreateShared","keydown #add-project-dialog .pt-templates-list":"_onKeydownInTemplatesList"},draw:function(){var g=new b({width:840,height:400,id:"add-project-dialog",closeOnOutsideClick:false,keypressListener:d.bind(this._onKeyPressed,this)});var h=g.popup.element;g.addPage("project-templates-page");g.addHeader("Create project","add-project-dialog-header");g.addPanel("ProjectTemplatesListPanel",JIRA.Templates.ProjectTemplates.loadingTemplatesList(),"pt-content");this._dialog=g;this._$dialogElement=h;g.show();return g},remove:function(){this._dialog&&this._dialog.remove()},showErrorMessage:function(g){this._dialog.getPanel(1,0).html(JIRA.Templates.errorMsg({closable:false,msg:g}))},get$PTContent:function c(){return this.getDialogController().$dialogElement.find(".pt-content")},_onKeyPressed:function(h){var g=27;if(this._dialog){if(h.keyCode===g){this.getDialogController().hideDialogFromNewUser("dismissed");this._dialog.remove();return false}}return true},_onKeydownInTemplatesList:function(h){var g=13;if(this._dialog){if(h.keyCode===g){this._$dialogElement.find(".pt-submit-button:visible").click();return false}}return true},_onClickAddProject:function(g){g.preventDefault();this.getDialogController().handleProjectTemplateTriggered()},_onCreateProjectAddDemoProjectClick:function(){a("analyticsEvent",{name:"jira.project.templates.dialog.create.demo.create.project.clicked"})},_onClickViewMarketplaceWorkflows:function(){a("analyticsEvent",{name:"jira.project.templates.dialog.create.viewmarketplaceworkflows.clicked"})},_onClickAddDemoProject:function(h){h.preventDefault();var g=this.getDialogController().dialog;if(g&&g.popup&&g.popup.element){g.remove()}this.getDialogController().handleDemoProjectTemplateTriggered()},_onClickImportProject:function(g){this.getDialogController().hideDialogFromNewUser("importproject")},_onClickCreateShared:function(g){this.getDialogController().handleCreateShared()},getDialogController:function(){return e("jira/project-templates/dialog-controller")}})});define("jira/project-templates/dialog-view",["jira/project-templates/dialog-view-impl","jquery"],function(b,a){return new b({el:a(document)})});AJS.namespace("JPT.DialogView",null,require("jira/project-templates/dialog-view"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/DialogController.js' */
define("jira/project-templates/dialog-controller",["jira/project-templates/dialog-view","jira/project-templates/config","jira/ajs/ajax/smart-ajax","jira/util/data/meta","jira/lib/class","jquery","underscore","wrm/data"],function(n,e,a,g,b,k,o,m){var d=AJS.contextPath();var f=AJS.isDevMode;var i=AJS.log;function h(p,q){AJS.trigger("analyticsEvent",{name:p,data:q})}var l;var c=function(){if(!l){l=m.claim("com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources.ptAnalyticsData")||{}}return l};var j=b.extend({WELCOME_REST_URL:d+"/rest/welcome/1.0/show/welcome",initialize:function(){o.bindAll(this,"handleProjectTemplateTriggered","hideDialogFromNewUser");if(g.getBoolean("show-welcome-screen")){this.handleProjectTemplateTriggered()}},handleProjectTemplateTriggered:function(){this.demoProject=false;h("jira.project.templates.dialog.create.show");this.openWithFirstProjectTemplateOfTypePreSelected()},handleDemoProjectTemplateTriggered:function(){this.demoProject=true;var p=this.getTemplateController().loadDemoProjectTemplatesData();this.openWithFirstProjectTemplateOfTypePreSelected(null,p);this._addAnalyticsToCreateDemoShow(p)},_addAnalyticsToCreateDemoShow:function(p){p.done(function(r){var s={};var q=function(t){return t.projectTemplatesGroupedByType.map(function(u){return u.projectTemplates.map(function(v){return v.itemModuleCompleteKey}).join()}).join()};s.demoSets=q(r);s.instanceCreatedDate=c().instanceCreatedDate;h("jira.project.templates.dialog.create.demo.show",s)}.bind(this))},openWithFirstProjectTemplateOfTypePreSelected:function(p,q){q=q||this.getTemplateController().loadProjectTemplatesData();this.dialog=n.draw();q.fail(o.bind(function(r){this._handleUnknownErrorOfPTRetrieval()},this));q.done(o.bind(function(r){this.$dialogElement=this.dialog.popup.element;var s;if(!o.isUndefined(e.model.selectedTemplate)){s=e.model.selectedTemplate}e.model=r;e.model.selectedTemplate=s;this.getTemplateController().init(r,p)},this))},handleCreateShared:function(){h("jira.project.templates.dialog.create.shared.clicked");this.demoProject=false;this.openWithCreateShared()},openWithCreateShared:function(){var p=require("jira/project-templates/create-shared-controller");p.initCreateShared()},callbackWithResize:function(p){return o.bind(o.wrap(p,function(q){q.call(this);this.dialog.updateHeight()}),this)},addPage:function(r){var q=this.dialog.addPage(r.name).page[this.dialog.curpage];this.dialog.addHeader(r.title,"add-project-dialog-header");this.dialog.addPanel(r.panelName,"","pt-content");if(r.backButton){this._addBackButton(q)}this.dialog.addButton(r.submitButtonText,this.callbackWithResize(r.submitButtonCallback),r.submitButtonClass+" pt-submit-button");var p=this.$dialogElement.find("."+r.submitButtonClass);p.removeClass("button-panel-button").addClass("aui-button aui-button-primary");p.focus();this.dialog.addCancel("Cancel",o.bind(function(s){this.hideDialogFromNewUser("dismissed");this.dialog.remove()},this));return q},_backButtonOnClickCallback:function(p){return o.bind(function(){if(this.demoProject){h("jira.project.templates.dialog.demo.back")}else{h("jira.project.templates.dialog.create.back")}var q=n.get$PTContent();q.css("background-image","none");this.dialog.prevPage();p.remove();this.dialog.page.pop()},this)},_addBackButton:function(q){this.dialog.addButton("Back",this.callbackWithResize(this._backButtonOnClickCallback(q)),"add-project-back-button");var p=this.$dialogElement.find(".add-project-back-button");p.removeClass("button-panel-button").addClass("aui-button")},_handleUnknownErrorOfPTRetrieval:function(){n.showErrorMessage("An error occurred while trying to contact Jira")},hideDialogFromNewUser:function(p){if(p==="dismissed"){if(this.demoProject){h("jira.project.templates.dialog.demo.dismissed")}else{h("jira.project.templates.dialog.create.dismissed")}}else{if(p==="importproject"){h("jira.project.templates.dialog.import.clicked")}else{if(p==="templateselected"){if(this.demoProject){h("jira.project.templates.dialog.demo.templateselected")}else{h("jira.project.templates.dialog.create.templateselected")}}}}if(g.getBoolean("show-welcome-screen")){k.ajax({url:this.WELCOME_REST_URL+"/"+p,type:"DELETE",success:function(){if(f&&f()){i("don't show project template dialog anymore")}}})}},getTemplateController:function(){return require("jira/project-templates/select-project-template-controller")}});return new j()});AJS.namespace("JPT.DialogController",null,require("jira/project-templates/dialog-controller"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/AddProjectView.js' */
define("jira/project-templates/add-project-view-impl",["jira/project-templates/dialog-controller","jira/project-templates/config","jira/util/events","jira/util/events/types","require","backbone","jquery","underscore"],function(q,n,t,y,m,e,g,D){var f=AJS.InlineDialog;return e.View.extend({TIMEOUT_MS:100,postDrawCallbacks:[],events:{"submit #add-project-form":"onSubmitForm"},page:undefined,isSubmitting:false,initialize:function(F){D.bindAll(this,"bindHook")},addPostDrawCallback:function(F){this.postDrawCallbacks.push(F)},prepareDialog:function(F){this.page=q.addPage({name:"add-project",title:F,panelName:"add-project",backButton:true,submitButtonText:"Submit",submitButtonCallback:this.onSubmitForm.bind(this),submitButtonClass:"add-project-dialog-create-button"})},draw:function(U){function V(X){if(!X.errors){X.errors={}}return X}this.isSubmitting=false;q.dialog.gotoPage(this.page.id);var G=U.webItemData.projectTemplateModuleCompleteKey;var F=D.find(n.model.projectTemplatesGroupedByType,function(X){return D.any(X.projectTemplates,function(Y){return Y.itemModuleCompleteKey==G})});var L=(F&&F.applicationInfo&&F.applicationInfo.applicationName)||"";var K=(F&&F.applicationInfo&&F.applicationInfo.licenseUsedSeats)||0;var H=(F&&F.applicationInfo&&F.applicationInfo.licenseTotalSeats)||0;var T=(F&&F.applicationInfo&&F.applicationInfo.canUserBeAddedToApplication)||false;var J=(F&&F.applicationInfo&&F.applicationInfo.canUserUseApplication)||false;var P=(F&&F.applicationInfo&&F.applicationInfo.ondemand)||false;var I;if(!F||!F.applicationInfo){I=false}else{I=!J}var R={maxNameLength:n.model.maxNameLength,maxKeyLength:n.model.maxKeyLength,shouldShowLead:n.model.shouldShowProjectLead,projectTemplateWebItemKey:n.model.selectedTemplate||U.webItemData.itemModuleCompleteKey,projectTemplateModuleKey:G,projectTemplateTitle:U.webItemData.name,projectTemplateDescriptionContent:U.webItemData.longDescriptionContent,currentKey:U.currentKey||"",currentName:U.currentName||"",errors:V(U.errors),projectLeadPickerField:{id:"lead",name:"lead"},addUserToLicense:{displayCheckbox:I,disableCheckbox:!T,applicationName:L,usedSeats:K,totalSeats:H,fieldId:"licenseUser",fieldName:"licenseUser",licensingUrl:P?"/admin/accessconfig":"/plugins/servlet/applications/versions-licenses"},leadOptions:[{selected:true,displayName:U.currentUserDisplayName,optionName:U.currentUserName,avatarURL:U.currentUserAvatarUrl}]};var N=JIRA.Templates.ProjectTemplates.addProjectForm(R);q.dialog.getPanel(this.page.id,0).html(N);if(U.webItemData&&U.webItemData.backgroundIconUrl){var Q=q.$dialogElement.find(".pt-content");Q.css("background-image",'url("'+U.webItemData.backgroundIconUrl+'")')}var O=g("#add-project-form");t.trigger(y.NEW_CONTENT_ADDED,[O]);this.nameElement=q.$dialogElement.find("#name");this.keyElement=q.$dialogElement.find("#key");this.keyEditedElement=q.$dialogElement.find("#keyEdited");this.leadDisplayElement=q.$dialogElement.find("#lead-field");this.leadValueElement=q.$dialogElement.find("#lead");var W=this.keyElement.parent().find(".aui-icon-help");if(W.length){new f(W,"project-key-help-popup",function(Z,Y,X){Z.html(JIRA.Templates.ProjectTemplates.keyHelp());X()},{width:330,offsetX:-30})}this.keyElement.attr("style","text-transform: uppercase");var S=m("jira/project-templates/add-project-controller");this.nameElement.focus(D.bind(function(X){this.bindHook(X,S.nameTimeout)},this));var M=this;this.nameElement.change(function(X){S.validateName();M.unbindHook(X)});this.nameElement.focus();this.keyElement.focus(D.bind(function(Y){var X=g(Y.target);X.data("lastValue",X.val());this.bindHook(Y,S.keyTimeout)},this));this.keyElement.blur(D.bind(function(X){this.unbindHook(X)},this));this.keyElement.change(function(){S.validateKey();S.autofillKeyIfNeeded()});if(!D.isEmpty(this.postDrawCallbacks)){D.each(this.postDrawCallbacks,function(X){X()})}q.dialog.updateHeight()},onSubmitForm:function(G){var F=m("jira/project-templates/add-project-controller");F.submit();return false},get$SubmitButton:function(){return q.$dialogElement.find(".add-project-dialog-create-button")},get$BackButton:function(){return q.$dialogElement.find(".add-project-back-button")},bindHook:function p(I,G){var F=g(I.target),H;H=D.bind(function(){this.unbindHook(I);G.apply();if(F.is(":visible")){F.data("checkHook",setTimeout(H,this.TIMEOUT_MS))}},this);if(!F.data("checkHook")){F.data("checkHook",setTimeout(H,0))}},unbindHook:function(G){var F=g(G.target);clearTimeout(F.data("checkHook"));F.removeData("checkHook")},showInlineError:function(G,H){if(this.isSubmitting){return}var F=G.parent().find(".error");if(!F.length){F=g("<div class='error'></div>");G.parent().append(F)}F.text(H);F.show()},showInlineErrorForName:function E(F){this.showInlineError(this.nameElement,F)},showInlineErrorForKey:function A(F){this.showInlineError(this.keyElement,F)},hideInlineError:function z(F){F.parent().find(".error").hide()},hideInlineErrorForName:function c(){this.hideInlineError(this.nameElement)},hideInlineErrorForKey:function u(){this.hideInlineError(this.keyElement)},setName:function i(F){this.nameElement.val(F)},getName:function s(){return this.nameElement.val()},setKey:function b(F){this.keyElement.val(F)},getKey:function o(){return this.keyElement.val().toUpperCase()},getLeadDisplayName:function v(){return this.leadDisplayElement.val()},getLeadUserName:function w(){return this.leadValueElement.val()},getAvatarUrlOfSelectedLead:function r(){var F=q.$dialogElement.find("#lead-single-select .aui-ss-entity-icon").css("background-image");if(!D.isUndefined(F)){var G=F.match(/^url\((.+)\)$/);return(G&&G[1])?G[1]:""}else{return""}},setKeyEdited:function l(F){this.keyEditedElement.val(F)},getKeyEdited:function B(){return this.keyEditedElement.val()},setKeyEdited:function l(){var F=this.getKey();if(this.keyElement.data("lastValue")!==F){this.keyEditedElement.val((F)?"true":"false")}this.keyElement.data("lastValue",F)},hasNameErrors:function d(){return this.nameElement.parent().find(".error").size()>0},getAddProjectForm:function h(){return g("#add-project-form")},get$FormFields:function k(){return q.$dialogElement.find(":input")},enterLoadingState:function j(){$submitButton=this.get$SubmitButton();if(!$submitButton.attr("disabled")){$backButton=this.get$BackButton();$submitButton.attr("disabled","disabled");$backButton.attr("disabled","disabled");$backButton.before(JIRA.Templates.ProjectTemplates.spinner({id:"addproject-loading"}));this.get$FormFields().attr("disabled","disabled");this.isSubmitting=true;return true}else{return false}},hideLoadingState:function x(){q.$dialogElement.find("#addproject-loading").remove();this.get$SubmitButton().removeAttr("disabled");this.get$BackButton().removeAttr("disabled");this.get$FormFields().removeAttr("disabled")},avoidDirtyFormWarning:function a(){if(g.fn.removeDirtyWarning){this.getAddProjectForm().removeDirtyWarning()}},hasInlineErrors:function C(){return q.$dialogElement.find(".field-group .error:visible").length!=0}})});define("jira/project-templates/add-project-view",["jira/project-templates/add-project-view-impl","jira/project-templates/dialog-view","jquery"],function(b,a,c){return new b({el:c(document),dialogView:a})});AJS.namespace("JPT.AddProjectView",null,require("jira/project-templates/add-project-view"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/AddProjectController.js' */
define("jira/project-templates/add-project-controller-impl",["jira/project-templates/add-project-view","jira/project-templates/project-key-generator","jira/project-templates/dialog-controller","jira/project-templates/config","jira/lib/class","jquery","underscore"],function(m,i,k,e,b,l,o){var d=AJS.contextPath();var c=AJS.trigger;return b.extend({postProjectCreationCallbacks:[],projectKeyValidationCallbacks:[],projectNamesUpperCased:[],init:function(p){this._window=p.window||window;o.bindAll(this,"projectCreatedHandler","projectValidationFailedHandler","nameTimeout","keyTimeout","submit")},initCreateShared:function(p){this.existingProjectData=p;this._initAddProject("Create with shared configuration")},initProjectTemplate:function(p){this.existingProjectData=undefined;this.webItemData=p;this._initAddProject(p.name)},_initAddProject:function(p){this.desiredKeyLength=4;this.lastKeyValidated="";this._getExistingProjects();i.init(this.desiredKeyLength,e.model.maxKeyLength);m.prepareDialog(p);m.draw({webItemData:this.webItemData||{},maxKeyLength:e.model.maxKeyLength,maxNameLength:e.model.maxNameLength,currentUserName:e.model.currentUserName,currentUserDisplayName:e.model.currentUserDisplayName,currentUserAvatarUrl:e.model.currentUserAvatarUrl,errors:{}})},_resetProjectLeadValues:function(){e.model.currentUserDisplayName="";e.model.currentUserName="";e.model.currentUserAvatarUrl=""},_hasFullyConfiguredProjectLead:function(){return m.getLeadDisplayName()&&m.getAvatarUrlOfSelectedLead()!=""},submit:function(p){var q;if(this.existingProjectData){q={key:m.getKey(),name:m.getName(),lead:m.getLeadUserName()&&m.getLeadUserName()[0]}}else{q=jQuery.param(m.getAddProjectForm().serializeArray().map(function(r){if(r.name==="key"){r.value=r.value.toUpperCase()}return r}))}if(m.hasInlineErrors()){return}if(m.enterLoadingState()){if(this._hasFullyConfiguredProjectLead()){e.model.currentUserDisplayName=m.getLeadDisplayName();e.model.currentUserName=e.model.currentUserDisplayName?m.getLeadUserName():"";e.model.currentUserAvatarUrl=m.getAvatarUrlOfSelectedLead()}else{this._resetProjectLeadValues()}if(this.existingProjectData){l.ajax({url:d+"/rest/project-templates/1.0/createshared/"+this.existingProjectData.existingProjectId,type:"POST",contentType:"application/json",data:JSON.stringify(q)}).done(this.projectCreatedHandler).fail(this.projectValidationFailedHandler)}else{l.ajax({url:d+(this.webItemData.demoProject?"/rest/jira-importers-plugin/1.0/demo/create":"/rest/project-templates/1.0/templates"),type:"POST",data:q,headers:{"X-Atlassian-Token":"no-check"}}).done(this.projectCreatedHandler).fail(this.projectValidationFailedHandler)}}},registerPostProjectCreationCallback:function(p){this.postProjectCreationCallbacks.push(p)},registerProjectKeyValidationCallback:function(p){this.projectKeyValidationCallbacks.push(p)},localStoragePrefix:"jira.projecttemplates.",projectCreatedHandler:function(q){if(this.existingProjectData){c("analyticsEvent",{name:"jira.project.templates.dialog.create.shared.project.create.success"})}else{if(this.webItemData.demoProject){c("analyticsEvent",{name:"jira.project.templates.dialog.create.demo.success"})}else{c("analyticsEvent",{name:"jira.project.templates.dialog.create.project.success"})}}m.avoidDirtyFormWarning();var p=this.localStoragePrefix;var r=["confluenceProject","fisheyeProject","crucibleProject","bambooProject"];o.map(r,function(s){if(q.remoteProjectLinks&&q.remoteProjectLinks[s]){localStorage.setItem(p+s,q.remoteProjectLinks[s])}});if(!o.isEmpty(this.postProjectCreationCallbacks)){k.dialog.addPage("post-project-created-page");o.each(this.postProjectCreationCallbacks,function(s){s(k.dialog,q.returnUrl,q.projectId,q.projectKey,q.projectName)})}else{this._window.location=d+q.returnUrl}},projectValidationFailedHandler:function(q,s){if(this.existingProjectData){c("analyticsEvent",{name:"jira.project.templates.dialog.create.shared.project.create.failure"})}else{if(this.webItemData.demoProject){c("analyticsEvent",{name:"jira.project.templates.dialog.create.demo.failure"})}else{c("analyticsEvent",{name:"jira.project.templates.dialog.create.project.failure"})}}var r={};if(this.isBadRequest(q)){r=JSON.parse(q.responseText)}else{if(this.isUnDefinedServerSideError(q)){r={errorMessages:["Hmm... we couldn\'t create your project due to an unknown error. Try refreshing the page to start again."]}}else{if(this.isDefinedServerSideError(q)){var p=JSON.parse(q.responseText);JIRA.Messages.showReloadErrorMsg(p.message);m.avoidDirtyFormWarning();this._window.location=d+p.returnUrl;return}else{if(this.isTimeoutError(s)){r={errorMessages:["Request timeout when creating project"]}}else{r={errorMessages:[AJS.format("Error creating project, {0}",q.responseText)]}}}}}m.draw({webItemData:this.webItemData||{},errors:r,currentName:m.getName(),currentKey:m.getKey(),currentUserDisplayName:e.model.currentUserDisplayName,currentUserName:e.model.currentUserName,currentUserAvatarUrl:e.model.currentUserAvatarUrl});m.hideLoadingState()},isBadRequest:function(p){return(p.status===400)},isUnDefinedServerSideError:function(p){if(p.status===500){try{JSON.parse(p.responseText)}catch(q){return true}}return false},isDefinedServerSideError:function(p){return p.status===500&&!o.isUndefined(JSON.parse(p.responseText).message)},isTimeoutError:function(p){return p==="timeout"},_updateAndValidateKey:function a(p){m.setKey(p);this.validateKey()},_shouldUpdateKey:function h(){return(m.getKeyEdited()!="true")},autofillKeyIfNeeded:function n(){if(this._shouldUpdateKey()){var p=i.generate(m.getName());if(p.length>1){this._updateAndValidateKey(p)}else{m.setKey("")}}},_doesProjectNameExists:function(q){var p;for(p in this.projectNamesUpperCased){if(q.toUpperCase()==this.projectNamesUpperCased[p]){return true}}return false},validateName:function(){var p=l.trim(m.getName());if(!p){return}if(p.length<e.model.minNameLength){m.showInlineErrorForName(AJS.format("The project name should be at least {0} characters in length.",e.model.minNameLength));return}if(p.length>e.model.maxNameLength){m.showInlineErrorForName(AJS.format("The project name must not exceed {0} characters in length.",e.model.maxNameLength));return}if(this._doesProjectNameExists(p)){m.showInlineErrorForName("A project with that name already exists.");return}m.hideInlineErrorForName()},_performKeyValidationChecks:function(p){var q=l.ajax({url:d+"/rest/api/latest/projectvalidate/key?key="+p.toUpperCase()});q.done(o.bind(function(s){if(s.errors&&s.errors.projectKey){m.showInlineErrorForKey(s.errors.projectKey)}else{var r=false;o.each(this.projectKeyValidationCallbacks,function(u){var t=u(p.toUpperCase());if(t.errors&&t.errors.projectKey){r=true;m.showInlineErrorForKey(t.errors.projectKey)}});if(!r){m.hideInlineErrorForKey()}}},this))},validateKey:function g(){var p=m.getKey();if(this.lastKeyValidated===p){return}if(p){this.lastKeyValidated=p;this._performKeyValidationChecks(p)}else{m.hideInlineErrorForKey()}},nameTimeout:function j(){this.autofillKeyIfNeeded()},keyTimeout:function f(){m.setKeyEdited()},_getExistingProjects:function(){if(this.projectNamesUpperCased.length>0){return this.projectNamesUpperCased}var p=l.ajax({url:d+"/rest/api/latest/project"});p.done(o.bind(function(q){this.projectNamesUpperCased=o.map(q,function(r){return r.name.toUpperCase()})},this))}})});define("jira/project-templates/add-project-controller",["jira/project-templates/add-project-controller-impl","jquery"],function(a,b){return new a({el:b(document)})});AJS.namespace("JPT.AddProjectController",null,require("jira/project-templates/add-project-controller"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/TemplateInfoView.js' */
define("jira/project-templates/template-info-view",["jira/project-templates/dialog-controller","require","backbone","jquery","underscore"],function(e,c,f,d,b){var a=AJS.trigger;return f.View.extend({initialize:function(g){b.bindAll(this,"draw","onNext")},draw:function(j,h){var k=e.addPage({name:"template-info",title:h,panelName:"template-info",backButton:true,submitButtonText:"Select",submitButtonCallback:this.onNext,submitButtonClass:"template-info-dialog-create-button"});var g=this._nameToObj(j)();e.dialog.getPanel(k.id,0).html(g);e.dialog.gotoPage(k.id);var i=b.find(k.button,function(l){return l.item&&l.item.hasClass("pt-submit-button")});if(i){setTimeout(function(){i.item.focus()},0)}},_nameToObj:function(g){return b.reduce(g.split("."),function(i,h){if(i){return i[h]}},window)},onNext:function(h){a("analyticsEvent",{name:"jira.project.templates.dialog.create.templateinfo.next"});var g=c("jira/project-templates/template-info-controller");g.next();return false}})});AJS.namespace("JPT.TemplateInfoView",null,require("jira/project-templates/template-info-view"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/TemplateInfoController.js' */
define("jira/project-templates/template-info-controller",["jira/project-templates/template-info-view","jira/lib/class","require","underscore"],function(e,a,c,b){var d=a.extend({init:function(f){b.bindAll(this,"initTemplateInfo","next")},initTemplateInfo:function(g){this.projectTemplateData=g;var f=new e();f.draw(g.infoSoyPath,g.name)},next:function(){var f=c("jira/project-templates/select-project-template-controller");f.openAddProjectPage(this.projectTemplateData)}});return new d()});AJS.namespace("JPT.TemplateInfoControllerImpl",null,require("jira/project-templates/template-info-controller"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/SelectProjectTemplateView.js' */
define("jira/project-templates/select-project-template-view",["jira/project-templates/dialog-controller","jira/project-templates/config","jira/featureflags/feature-manager","require","backbone","jquery","underscore"],function(d,b,i,c,g,e,h){var a=AJS.contextPath();var f=AJS.preventDefault;return{ROW_LENGTH:2,DIALOG_BODY_CLASS:"select-project-templates-page",DIALOG_WIDTH:800,draw:function(n,m){var j=c("jira/project-templates/select-project-template-controller");this.page=d.addPage({name:this.DIALOG_BODY_CLASS,title:n.demoProjects?"Create project with sample data":"Create project",panelName:"ProjectTemplatesListPanel",backButton:false,submitButtonText:"Next",submitButtonCallback:j.dialogSubmitted,submitButtonClass:"create-project-dialog-create-button"});function p(){if(j.isProjectTypesEnabled(n)){return JIRA.Templates.ProjectTemplates.renderProjectTemplatesGroupedByType({projectTemplatesByType:n.projectTemplatesGroupedByType})}return JIRA.Templates.ProjectTemplates.renderProjectTemplates({projectTemplates:n.projectTemplates})}d.dialog.getPanel(this.page.id,0).html(p());if(b.model.projectCount>=2&&!n.demoProjects){e(JIRA.Templates.ProjectTemplates.addWorkflowsLink({baseUrl:a})).appendTo(d.$dialogElement.find(".dialog-title"))}var o=d.$dialogElement.find(".create-project-dialog-create-button");var l=this;this.getTemplateItems().click(function(){var q=e(this);q.addClass("selected");l.getTemplateItems().not(this).removeClass("selected")}).dblclick(function(){o.click()}).focus(function(){e(this).click()});var k=this.get$TemplatesContainer();if(!n.demoProjects){e(JIRA.Templates.ProjectTemplates.footerLinks({showDemoLink:i.isFeatureEnabled("jira.onboarding.cyoa")})).prependTo(d.$dialogElement.find(".dialog-button-panel"))}this.bindKeyboardEvents(k);if(j.isProjectTypesEnabled(n)){if((n.projectTemplatesGroupedByType).length==0){o.attr("disabled","disabled")}}else{if((n.projectTemplates).length==0){o.attr("disabled","disabled")}}this.focusOnFirstTemplate(k,m);d.dialog.updateHeight();this.truncateTemplateDescriptions()},get$TemplatesContainer:function(){return d.$dialogElement.find(".templates")},focusOnFirstTemplate:function(j,k){if(k){this.getFirstTemplateItemOfProjectType(k).click()}else{this.getFirstTemplateItem().click()}setTimeout(function(){j.focus()},0)},getSelectedTemplateData:function(){var j=d.$dialogElement.find(".template.selected");return j.data()},getMoveDeltaForKey:function(j){switch(j){case 37:return -1;case 39:return +1;case 38:return -this.ROW_LENGTH;case 40:return +this.ROW_LENGTH}return 0},bindKeyboardEvents:function(j){j.bind("keydown",h.bind(function(k){var l=this.getMoveDeltaForKey(k.which);if(l){this.moveSelection(j,l);return f(k)}},this))},moveSelection:function(l,o){var k=l.find(".template");var n=k.filter(".selected");var m=k.index(n)+o;if(m<k.length&&m>=0){var j=k.eq(m);j.click().focus();this.scrollToSelectedElement(j)}},scrollToSelectedElement:function(l){var o=e(".dialog-panel-body.pt-content");var j=o.offset().top;var k=l.offset().top;var n=k+l.height();var m=j+o.height();if(k<j){o.scrollTop(o.scrollTop()-(j-k))}else{if(n>(j+o.height())){o.scrollTop(o.scrollTop()+n-m)}}},get$NextButton:function(){return d.$dialogElement.find(".create-project-dialog-create-button")},disableNextButton:function(){this.get$NextButton().attr("disabled","disabled")},truncateTemplateDescriptions:function(){var j=AJS.Meta.get("user-locale");var k="word";if(j==="ja_JP"){k="letter"}d.$dialogElement.find(".template-description").each(function(){e(this).dotdotdot({wrap:k,lastCharacter:{remove:[" ",",",";",".","!","?","。"],noEllipsis:[]}})})},getFirstTemplateItem:function(){return this.getTemplateItems().first()},getFirstTemplateItemOfProjectType:function(j){return this.getTemplateItems().filter("#project-template-group-"+j+" *").first()},getTemplateItems:function(){return d.$dialogElement.find(".template")}}});AJS.namespace("JPT.SelectProjectTemplateView",null,require("jira/project-templates/select-project-template-view"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/SelectProjectTemplateController.js' */
define("jira/project-templates/select-project-template-controller",["jira/project-templates/select-project-template-view","jira/project-templates/template-info-controller","jira/project-templates/add-project-controller","jira/project-templates/dialog-controller","jira/project-templates/dialog-view","jira/project-templates/config","wrm/context-path","jquery","underscore"],function(f,h,k,l,o,g,n,m,p){var e=n();var d={init:function q(s,r){f.draw(s,r)},isProjectTypesEnabled:function c(r){return r.projectTemplatesGroupedByType!=null},loadProjectTemplatesData:function j(){return m.ajax({url:e+"/rest/project-templates/1.0/templates",type:"GET"})},loadDemoProjectTemplatesData:function j(){return m.ajax({url:e+"/rest/project-templates/1.0/templates/demo-projects",type:"GET"}).done(function(r){r.demoProjects=true;return r})},dialogSubmitted:function b(){var r=f.getSelectedTemplateData();l.hideDialogFromNewUser("templateselected");d.raiseAtlassianEvent(r.itemModuleCompleteKey);if(!p.isUndefined(r.infoSoyPath)){h.initTemplateInfo(r)}else{d.openAddProjectPage(r)}},openAddProjectPage:function i(r){if(!r){o.showErrorMessage("An error occurred while trying to contact Jira");return}if(r.createProject){k.initProjectTemplate(r)}else{l.dialog.addPage("blank-template-page");m("body").trigger(r.itemModuleCompleteKey,l.dialog)}},raiseAtlassianEvent:function a(r){g.model.selectedTemplate=r;if(AJS.EventQueue){AJS.EventQueue.push({name:"projecttemplates.templateselected",properties:{selectedTemplate:r}})}}};return d});AJS.namespace("JPT.SelectProjectTemplateController",null,require("jira/project-templates/select-project-template-controller"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/CreateSharedView.js' */
define("jira/project-templates/create-shared-view",["jira/project-templates/dialog-controller","jira/project-templates/dialog-view","jira/ajs/select/scrollable-single-select","jira/ajs/select/suggestion-collection-model","require","backbone","jquery"],function(d,h,g,i,c,j,e){var f=AJS.InlineDialog;var b=AJS.trigger;var a=j.View.extend({events:{"submit #create-shared-project-form":"onSubmitForm"},page:undefined,prepareDialog:function(l){var k=c("jira/project-templates/create-shared-controller");this.page=d.addPage({name:"create-shared-project",title:l,panelName:"create-shared-project",backButton:true,submitButtonText:"Next",submitButtonCallback:k.dialogSubmitted,submitButtonClass:"create-shared-dialog-button"})},draw:function(l){d.dialog.gotoPage(this.page.id);var k=JIRA.Templates.ProjectTemplates.createSharedProjectForm({projectSuggestions:JSON.stringify(l.projectSuggestions)});d.dialog.getPanel(this.page.id,0).html(k);this._createProjectPicker();var m=d.$dialogElement.find("#shared-help-icon");if(m.length){new f(m,"shared-project-help-popup",function(p,o,n){p.html(JIRA.Templates.ProjectTemplates.sharedHelp());n()},{width:330,offsetX:-30})}d.$dialogElement.find(".dialog-button-panel button").removeAttr("disabled")},showProjectMissingError:function(){this._clearFormErrors();this._getProjectPickerInput().after(aui.form.fieldError({extraClasses:"project-picker-missing-error",message:"Please select an existing project first."}))},drawEmptyInfo:function(){var k=JIRA.Templates.ProjectTemplates.noProjects();d.dialog.getPanel(this.page.id,0).html(k);d.$dialogElement.find(".dialog-button-panel button").hide()},drawError:function(k){d.dialog.getPanel(this.page.id,0).html(JIRA.Templates.errorMsg({closable:false,msg:k}))},drawLoading:function(){d.dialog.gotoPage(this.page.id);var k=JIRA.Templates.ProjectTemplates.loading();d.dialog.getPanel(this.page.id,0).html(k);d.$dialogElement.find(".dialog-spinner").spin();d.$dialogElement.find(".dialog-button-panel button").attr("disabled","disabled")},_clearFormErrors:function(){d.$dialogElement.find(".project-picker-missing-error").remove()},_getProjectPickerInput:function(){return d.$dialogElement.find("#project-picker")},onSubmitForm:function(l){this._clearFormErrors();var k=c("jira/project-templates/create-shared-controller");k.dialogSubmitted();return false},_getExtraInfoMessage:function(){return d.$dialogElement.find(".create-shared-info")},_createProjectPicker:function(){this._getExtraInfoMessage().hide();this.projectSelect=new g({element:this._getProjectPickerInput(),revertOnInvalid:true,pageSize:50,pagingThreshold:100,model:i});this.projectSelect.$field.focus();var k=this;this._getProjectPickerInput().on("selected",function(m,l){if(l.value()){b("analyticsEvent",{name:"jira.project.templates.dialog.create.shared.project.selected"});k._getExtraInfoMessage().show()}})},getSelectedProject:function(){return this.projectSelect.getSelectedDescriptor()&&this.projectSelect.getSelectedDescriptor().value()}});return new a({el:e(document),dialogView:h})});AJS.namespace("JPT.CreateSharedView",null,require("jira/project-templates/create-shared-view"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/CreateSharedController.js' */
define("jira/project-templates/create-shared-controller-impl",["jira/project-templates/add-project-controller","jira/project-templates/create-shared-view","jira/lib/class","jquery","underscore"],function(e,f,a,d,c){var b=AJS.contextPath();return a.extend({init:function(g){this._window=g.window||window;c.bindAll(this,"dialogSubmitted")},initCreateShared:function(){f.prepareDialog("Create with shared configuration");var g=this;this._getProjectSuggestions().done(function(h){if(g._hasSuggestions(h)){f.draw({projectSuggestions:h})}else{f.drawEmptyInfo()}}).fail(function(){f.drawError("An error occurred while trying to contact Jira")});f.drawLoading()},_hasSuggestions:function(h){var g=false;d.each(h,function(j,k){if(k&&k.items&&k.items.length>0){g=true}});return g},_getProjectSuggestions:function(){return d.ajax({url:b+"/rest/project-templates/1.0/createshared"})},dialogSubmitted:function(){var g=f.getSelectedProject();if(g){e.initCreateShared({existingProjectId:g})}else{f.showProjectMissingError()}}})});define("jira/project-templates/create-shared-controller",["jira/project-templates/create-shared-controller-impl","jquery"],function(a,b){return new a({el:b(document)})});AJS.namespace("JPT.CreateSharedController",null,require("jira/project-templates/create-shared-controller"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/RemoteProjectsCreatedMessage.js' */
var $=require("jquery");$(function(){var i=AJS.format;var e=require("jira/project-templates/add-project-controller");var b=localStorage.getItem(e.localStoragePrefix+"confluenceProject");var j=localStorage.getItem(e.localStoragePrefix+"fisheyeProject");var g=localStorage.getItem(e.localStoragePrefix+"crucibleProject");var d=localStorage.getItem(e.localStoragePrefix+"bambooProject");localStorage.removeItem(e.localStoragePrefix+"confluenceProject");localStorage.removeItem(e.localStoragePrefix+"fisheyeProject");localStorage.removeItem(e.localStoragePrefix+"crucibleProject");localStorage.removeItem(e.localStoragePrefix+"bambooProject");var k;function c(m,l){return JIRA.Templates.ProjectTemplates.formatAnchor({href:m,body:l,title:l})}function a(n,o,m,p){var l=[];l.push("a Jira project");if(n){l.push(c(n,"a Confluence space"))}if(o){l.push(c(o,"a FishEye repository"))}if(m){l.push(c(m,"a Crucible project"))}if(p){l.push(c(p,"a Bamboo project"))}return l}function h(m,o,l,r){var q="The following entities were created: {0} and {1}.";var n=a(m,o,l,r);var p=n.pop();return(n.length>0)?i(q,n.join(", "),p):null}function f(l){var m=$(l).offset();if(m){window.scrollTo(m.left,m.top)}}if(b||j||g||d){k=h(b,j,g,d);if(k){JIRA.Messages.showSuccessMsg(k,{closeable:true})}f("#project-config-webpanel-summary-settings")}});;
;
/* module-key = 'com.atlassian.jira-core-project-templates:jira-core-project-templates-resources', location = '/soy/CoreProjectTemplates.soy' */
// This file was automatically generated from CoreProjectTemplates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.ProjectTemplates.CoreTemplates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.ProjectTemplates == 'undefined') { JIRA.Templates.ProjectTemplates = {}; }
if (typeof JIRA.Templates.ProjectTemplates.CoreTemplates == 'undefined') { JIRA.Templates.ProjectTemplates.CoreTemplates = {}; }


JIRA.Templates.ProjectTemplates.CoreTemplates.taskManagementInfoDialog = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog({description: 'Create simple tasks, organize them and get them done. You can use this project to manage your tasks or assign them to someone else.', projectTemplate: 'taskManagement'});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.taskManagementInfoDialog.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.taskManagementInfoDialog';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.projectManagementInfoDialog = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog({description: 'Create your tasks, organize and track their progress, and deliver your work on time. Estimations and time tracking allow you to report on where your project is at any stage.', projectTemplate: 'projectManagement'});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.projectManagementInfoDialog.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.projectManagementInfoDialog';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.processManagementInfoDialog = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog({description: 'Create your tasks and track them at every step, from start to finish. You can use this project to review documentation, approve expenses, or other processes.', projectTemplate: 'processManagement'});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.processManagementInfoDialog.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.processManagementInfoDialog';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.boardBetaInfoDialog = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog({description: 'Visualize work across your team with a board.', projectTemplate: 'projectManagement', issueTypesHtml: '' + JIRA.Templates.ProjectTemplates.CoreTemplates.taskIssueType(null)});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.boardBetaInfoDialog.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.boardBetaInfoDialog';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog = function(opt_data, opt_ignored) {
  return '<div><div class="top-panel"><p>' + soy.$$escapeHtml(opt_data.description) + '</p></div><div class="left-panel"><h6>' + soy.$$escapeHtml('Issue Types') + '</h6><ul class="project-template-issuetype-list">' + ((opt_data.issueTypesHtml != null) ? soy.$$filterNoAutoescape(opt_data.issueTypesHtml) : JIRA.Templates.ProjectTemplates.CoreTemplates.taskIssueType(null) + JIRA.Templates.ProjectTemplates.CoreTemplates.subtaskIssueType(null)) + '</ul></div><div class="right-panel"><h6>' + soy.$$escapeHtml('Workflow') + '</h6><div class="workflow ' + soy.$$escapeHtml(opt_data.projectTemplate) + '"></div></div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.issueType = function(opt_data, opt_ignored) {
  return '<li><span class="issuetype-list-label"><span class="issuetype-icon ' + soy.$$escapeHtml(opt_data.iconKey) + '"></span><span class="issuetype-name">' + soy.$$escapeHtml(opt_data.label) + '</span></span></li>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.issueType.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.issueType';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.taskIssueType = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.issueType({iconKey: 'task', label: 'Task'});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.taskIssueType.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.taskIssueType';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.subtaskIssueType = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.issueType({iconKey: 'subtask', label: 'Sub-task'});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.subtaskIssueType.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.subtaskIssueType';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-analytics-tracker', location = 'includes/js/rapid/AnalyticsTracker.js' */
define("jira-agile/rapid/analytics-tracker",["jira/util/logger","underscore","jquery"],function(e,a,i){function t(e,i,t){if(a.isUndefined(e))throw new Error("You must specify a category");this.params={},this.params.category=e;var r=0;a.isUndefined(i)||(this.params.action=i,r++,a.isUndefined(t)||(this.params.label=t,r++)),this.requiredArgumentNames=["action","label","value"].slice(r),this.useAsync=!0}return t.prototype.setAsync=function(e){return this.useAsync=e,this},t.prototype.trigger=function(){this.requiredArgumentNames.length<arguments.length&&e.log("Warning: too many arguments passed in. Needed at most "+this.requiredArgumentNames.length+" but got "+arguments.length);for(var t=a.clone(this.params),r=0;r<arguments.length&&!a.isUndefined(this.requiredArgumentNames[r]);r++)t[this.requiredArgumentNames[r]]=arguments[r];this._validateParams(t);var n="gh.analytics.async";i(document).trigger(n,t)},t.prototype._validateParams=function(e){var i=["category","action","label"];a.each(i,function(i){a.isUndefined(e[i])||a.isString(e[i])?a.isUndefined(e[i])&&(e[i]=""):e[i]=e[i].toString()}),a.each(["category","action"],function(a){e[a]=e[a].replace(/\s+/g,"")}),a.isUndefined(e.value)||(e.value=parseInt(e.value,10),isNaN(e.value)&&(e.value=void 0))},t}),AJS.namespace("GH.AnalyticsTracker",null,require("jira-agile/rapid/analytics-tracker"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-help-analytics', location = 'includes/js/rapid/ui/help/HelpAnalytics.js' */
AJS.$(function(){var e=require("jira-agile/rapid/analytics-tracker"),r=function(r){return new e(r).setAsync(!1)};AJS.$("#gh_view_help").click(function(e){return r("gh.gethelp").trigger("usermenu","docs"),n(AJS.$(this))}),AJS.$("#greenhopper-my-jira-home-enablement").click(function(e){return r("gh.myjirahome").trigger("usermenu","enabled"),n(AJS.$(this))}),AJS.$("#greenhopper-my-jira-home-enablement-ondemand").click(function(e){return r("gh.myjirahome").trigger("usermenu","set"),n(AJS.$(this))}),AJS.$("#greenhopper-my-jira-home-disablement-ondemand").click(function(e){return r("gh.myjirahome").trigger("usermenu","disable"),n(AJS.$(this))}),AJS.$("#greenhopper-my-jira-home-set").click(function(e){return r("gh.myjirahome").trigger("usermenu","set"),n(AJS.$(this))}),AJS.$("#beta_gh\\.configuration\\.rapid\\.removal").click(function(e){var n=AJS.$(this),t=n.attr("checked")?"on":"off";return r("gh.labs.feature").trigger("rapid_removal",t),!0}),AJS.$(document).delegate("#js-classic-link_lnk","click",function(e){return r("gh.agile.menu").trigger("classic"),!0});var n=function(e){return"_blank"==e.attr("target")||(setTimeout('document.location = "'+e.attr("href")+'"',100),!1)}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-help-analytics', location = 'includes/js/rapid/Analytics.js' */
define("jira-agile/rapid/analytics",["jquery","underscore"],function(n,a){"use strict";function e(){n(document).on(l,function(n,a){i(a)})}function i(n){var e={},i=n.category;a.isUndefined(n.action)||(i=i+"."+n.action),a.isUndefined(n.label)||(e.label=n.label),a.isUndefined(n.value)||(e.value=n.value),AJS.trigger("analytics",{name:i,data:e})}GH.AnalyticsEnabled=!0;var l="gh.analytics.async";e();var t={};return t.isEnabled=function(){return GH.AnalyticsEnabled},t.setEnabled=function(n){return GH.AnalyticsEnabled=n},t}),AJS.namespace("GH.Analytics",null,require("jira-agile/rapid/analytics"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:project-template-resources', location = '/projecttemplates/soy/ProjectTemplates.soy' */
// This file was automatically generated from ProjectTemplates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.projecttemplates.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.projecttemplates == 'undefined') { GH.tpl.projecttemplates = {}; }


GH.tpl.projecttemplates.kanbanInfoPageJira7 = function(opt_data, opt_ignored) {
  return '' + GH.tpl.projecttemplates.templateInfoDialog({description: 'Use this project to optimise the flow of work in your development project. Add constraints to work-in-progress, analyze how long it takes to complete issues, find bottlenecks in your process, and more. This project includes a Kanban board, a basic Agile workflow and issue type configuration, which you can change later on.', extraIssueTypes: '<li><span class="issuetype-list-label"><span class="issuetype-icon story"></span><span class="issuetype-name">' + soy.$$escapeHtml('Story') + '</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon epic"></span><span class="issuetype-name">' + soy.$$escapeHtml('Epic') + '</span></span></li>', workflowScreenshotClass: 'kanban-workflow-screenshot'});
};
if (goog.DEBUG) {
  GH.tpl.projecttemplates.kanbanInfoPageJira7.soyTemplateName = 'GH.tpl.projecttemplates.kanbanInfoPageJira7';
}


GH.tpl.projecttemplates.scrumInfoPageJira7 = function(opt_data, opt_ignored) {
  return '' + GH.tpl.projecttemplates.templateInfoDialog({description: 'Use this project to manage your Agile development work. Create a backlog, organise work into sprints, check progress using reports, and more. This project includes a Scrum board, a basic Agile workflow and issue type configuration, which you can change later on.', extraIssueTypes: '<li><span class="issuetype-list-label"><span class="issuetype-icon story"></span><span class="issuetype-name">' + soy.$$escapeHtml('Story') + '</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon epic"></span><span class="issuetype-name">' + soy.$$escapeHtml('Epic') + '</span></span></li>', workflowScreenshotClass: 'scrum-workflow-screenshot'});
};
if (goog.DEBUG) {
  GH.tpl.projecttemplates.scrumInfoPageJira7.soyTemplateName = 'GH.tpl.projecttemplates.scrumInfoPageJira7';
}


GH.tpl.projecttemplates.softwareDevelopmentInfoPageJira7 = function(opt_data, opt_ignored) {
  return '' + GH.tpl.projecttemplates.templateInfoDialog({description: 'Use this project to work on new features for your product and also track any bugs. This project provides you with a basic workflow and issue type configuration, which you can change later on.', extraIssueTypes: '<li><span class="issuetype-list-label"><span class="issuetype-icon improvement"></span><span class="issuetype-name">' + soy.$$escapeHtml('Improvement') + '</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon newfeature"></span><span class="issuetype-name">' + soy.$$escapeHtml('New Feature') + '</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon epic"></span><span class="issuetype-name">' + soy.$$escapeHtml('Epic') + '</span></span></li>', workflowScreenshotClass: 'basic-development-workflow-screenshot'});
};
if (goog.DEBUG) {
  GH.tpl.projecttemplates.softwareDevelopmentInfoPageJira7.soyTemplateName = 'GH.tpl.projecttemplates.softwareDevelopmentInfoPageJira7';
}


GH.tpl.projecttemplates.templateInfoDialog = function(opt_data, opt_ignored) {
  return '<div><div class="top-panel"><p>' + soy.$$escapeHtml(opt_data.description) + '</p></div><div class="left-panel"><h6>' + soy.$$escapeHtml('Issue Types') + '</h6><ul class="project-template-issuetype-list" ><li><span class="issuetype-list-label"><span class="issuetype-icon bug"></span><span class="issuetype-name">' + soy.$$escapeHtml('Bug') + '</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon task"></span><span class="issuetype-name">' + soy.$$escapeHtml('Task') + '</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon subtask"></span><span class="issuetype-name">' + soy.$$escapeHtml('Sub-task') + '</span></span></li>' + soy.$$filterNoAutoescape(opt_data.extraIssueTypes) + '</ul></div><div class="right-panel"><h6>' + soy.$$escapeHtml('Workflow') + '</h6><div class="workflow ' + soy.$$escapeHtml(opt_data.workflowScreenshotClass) + '"></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.projecttemplates.templateInfoDialog.soyTemplateName = 'GH.tpl.projecttemplates.templateInfoDialog';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-notification', location = 'includes/js/rapid/ui/notification/Notification.soy' */
// This file was automatically generated from Notification.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.rapid.notification.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.rapid == 'undefined') { GH.tpl.rapid = {}; }
if (typeof GH.tpl.rapid.notification == 'undefined') { GH.tpl.rapid.notification = {}; }


GH.tpl.rapid.notification.renderErrorMessages = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.errors.length > 1) {
    output += '<ul>';
    var errorList6 = opt_data.errors;
    var errorListLen6 = errorList6.length;
    for (var errorIndex6 = 0; errorIndex6 < errorListLen6; errorIndex6++) {
      var errorData6 = errorList6[errorIndex6];
      output += '<li>' + ((errorData6.noAutoescape) ? soy.$$filterNoAutoescape(errorData6.message) : soy.$$escapeHtml(errorData6.message)) + '</li>';
    }
    output += '</ul>';
  } else {
    var errorList18 = opt_data.errors;
    var errorListLen18 = errorList18.length;
    for (var errorIndex18 = 0; errorIndex18 < errorListLen18; errorIndex18++) {
      var errorData18 = errorList18[errorIndex18];
      output += '<p>' + ((errorData18.noAutoescape) ? soy.$$filterNoAutoescape(errorData18.message) : soy.$$escapeHtml(errorData18.message)) + '</p>';
    }
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderErrorMessages.soyTemplateName = 'GH.tpl.rapid.notification.renderErrorMessages';
}


GH.tpl.rapid.notification.renderContextualErrors = function(opt_data, opt_ignored) {
  var output = '';
  var errorList29 = opt_data.errors;
  var errorListLen29 = errorList29.length;
  for (var errorIndex29 = 0; errorIndex29 < errorListLen29; errorIndex29++) {
    var errorData29 = errorList29[errorIndex29];
    output += '<div class="ghx-error">' + soy.$$escapeHtml(errorData29.message) + '</div>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderContextualErrors.soyTemplateName = 'GH.tpl.rapid.notification.renderContextualErrors';
}


GH.tpl.rapid.notification.renderMessageHolder = function(opt_data, opt_ignored) {
  return '<div class="ghx-body-warning">' + soy.$$escapeHtml(AJS.format('This version of {0} is not a supported browser.',opt_data.browser)) + ' <a href="' + soy.$$escapeHtml(opt_data.docsUrl) + '">' + soy.$$escapeHtml('See our documentation for the list of supported browsers.') + '</a></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderMessageHolder.soyTemplateName = 'GH.tpl.rapid.notification.renderMessageHolder';
}


GH.tpl.rapid.notification.renderAuiMessage = function(opt_data, opt_ignored) {
  return '<div class="aui-message ' + soy.$$escapeHtml(opt_data.type) + ((opt_data.className) ? ' aui-message-' + soy.$$escapeHtml(opt_data.className) : '') + '">' + ((opt_data.title) ? '<p class="title">' + ((opt_data.icon) ? '<span class="aui-icon icon-' + soy.$$escapeHtml(opt_data.type) + '"></span>' : '') + '<strong>' + soy.$$escapeHtml(opt_data.title) + '</strong></p>' : '') + ((opt_data.message) ? '<p>' + ((! opt_data.title && opt_data.icon) ? '<span class="aui-icon icon-' + soy.$$escapeHtml(opt_data.type) + '"></span>' : '') + ((opt_data.messageHtml) ? soy.$$filterNoAutoescape(opt_data.message) : soy.$$escapeHtml(opt_data.message)) + '</p>' : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderAuiMessage.soyTemplateName = 'GH.tpl.rapid.notification.renderAuiMessage';
}


GH.tpl.rapid.notification.renderGHtvMessage = function(opt_data, opt_ignored) {
  return '<div id="ghx-update-message" class="ghx-tv-message"><p>' + soy.$$escapeHtml('This board has been updated') + ': <a href="" class="js-refresh-now" data-track-click="gh.rapidboard.updated.message.refresh.click">' + soy.$$escapeHtml('Refresh') + '</a><span class="ghx-divider">&bull;</span><a href="" class="js-ignore-refresh" data-track-click="gh.rapidboard.updated.message.cancel.click">' + soy.$$escapeHtml('Ignore') + '</a></p></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderGHtvMessage.soyTemplateName = 'GH.tpl.rapid.notification.renderGHtvMessage';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-notification', location = 'includes/js/rapid/ui/notification/Notification.js' */
define("jira-agile/rapid/ui/notification",["require"],function(e){"use strict";function a(e,a,r){return s(i({body:e,title:r.showTitle?a:void 0,close:r.autoHide?"auto":r.closeable?"manual":"never",type:r.type}))}function s(e){var a=r(e).find(".title");return""===r.trim(a.text())&&a.remove(),e}var r=e("jquery"),t=e("underscore"),i=e("aui/flag"),n=e("jira/util/logger"),o=e("jira/analytics"),d={showErrors:function(e){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=arguments[2],r="Error",t=GH.tpl.rapid.notification.renderErrorMessages(e);d.showError(r,t,a,s)},showError:function(e,s){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments[3],n={autoHide:!1,closeable:r,showTitle:!0,type:"error"};i=t.extend({},n,i),a(s,e,i)},showWarnings:function(e,s){var r={preRendered:!1,autoHide:!0,closeable:!0,showTitle:!1,type:"warning"};s=t.extend({},r,s);var i=void 0;i=s.preRendered?e:GH.tpl.rapid.notification.renderErrorMessages({errors:e}),a(i,"Warning",s)},showWarning:function(e){d.showWarnings(e,{preRendered:!0})},showSuccess:function(e,s){var r={closeable:!0,autoHide:!0,showTitle:!1,type:"success"};s=t.extend({},r,s),a(e,null,s)},clear:function(){r("#aui-flag-container").empty()},handleDateFormatMismatchError:function(e){var a='<a href="'+GH.Ajax.CONTEXT_PATH+'/secure/admin/AdvancedApplicationProperties.jspa">';a+="Advanced Settings",a+="</a>";var s=AJS.format("It appears your Jira date format settings are misconfigured. Please check the {0} and ensure that \'\'jira.date.time.picker.java.format\'\' and \'\'jira.date.time.picker.javascript.format\'\' have matching output.",a);d.showWarnings(s,{autoHide:!1,preRendered:!0})},auiMessage:function(){n.warn("[deprecated] GH.Notification.auiMessage has no effect")},showIssueMessage:function(e){var a=JIRA.SessionStorage,s=null,r=null;e||(e=a.getItem("selectedIssueId")),e&&(r=a.getItem("selectedIssueKey"),s=a.getItem("selectedIssueMsg"),d.showIssueMessageImpl(e,s,r)),a.removeItem("selectedIssueId"),a.removeItem("selectedIssueKey"),a.removeItem("selectedIssueMsg")},showIssueMessageImpl:function(e,a,s){a||(a="thanks_issue_updated");var r=AJS.params[a];r&&s&&(r=AJS.format(r,s),d.showSuccess(r))},addPageLoadMessage:function(e,a){var s=GH.storage.get("gh.pageloadmessages",!0)||[];s.push({message:e,type:a||"success"}),GH.storage.put("gh.pageloadmessages",s,!0)},_displayPageLoadMessages:function(){var e=GH.storage.get("gh.pageloadmessages",!0);if(e){var a=e[0].type,s="";switch(t.each(e,function(e){s.length>0&&(s+="<br>"),s+=e.message}),a){case"warning":d.showWarning(s);break;case"success":default:d.showSuccess(s)}GH.storage.put("gh.pageloadmessages",null,!0)}},showBoardUpdatedMessage:function(){d.triggerShowMessageAnalytics(),d.clearBoardUpdatedMessage();var e=r.Deferred(),a=r(GH.tpl.rapid.notification.renderGHtvMessage()).appendTo("#gh");return a.data("deferred",e),a.find(".js-refresh-now").click(function(s){s.preventDefault(),a.removeData("deferred"),d.clearBoardUpdatedMessage(),e.resolve()}),a.find(".js-ignore-refresh").click(function(e){e.preventDefault(),d.clearBoardUpdatedMessage()}),e.promise()},clearBoardUpdatedMessage:function(){var e=r("#ghx-update-message");if(e.length){var a=e.data("deferred");a&&a.reject&&a.reject(),e.remove()}},isBoardUpdatedMessageVisible:function(){var e=r("#ghx-update-message");return e.length>0},triggerShowMessageAnalytics:function(){o.send({name:"gh.rapidboard.updated.message.show",properties:{initial:!d.isBoardUpdatedMessageVisible()}})}};return d}),AJS.namespace("GH.Notification",null,require("jira-agile/rapid/ui/notification")),AJS.$(document).ready(function(){GH.Notification.showIssueMessage(),GH.storage&&GH.Notification._displayPageLoadMessages()});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-globalkeyboardshortcuts', location = 'includes/js/gh-globalkeyboardshortcuts.js' */
define("jira-agile/gh-globalkeyboardshortcuts",["jira-agile/rapid/ui/notification","jira/ajs/ajax/smart-ajax","jira/data/session-storage","jira/issuenavigator/issue-navigator/shortcuts","jira/issue","jira/issuenavigator/issue-navigator","jira/dialog/dialog","jquery","jira/util/browser"],function(e,s,o,t,a,i,n,r,u){var c={},d=require("wrm/context-path");return c.findSelectedIssueId=function(){var e;return i&&i.getSelectedIssueId&&(e=i.getSelectedIssueId()),!e&&a&&a.getIssueId&&(e=a.getIssueId()),e},c.goToAgile=function(){var e="/secure/RapidBoard.jspa",s=d();s&&(e=s+e),window.location.href=e},c.followLink=function(e){var s=r(e);s.length>0&&("a"===s[0].nodeName.toLowerCase()||"link"===s[0].nodeName.toLowerCase())&&(s.click(),window.location.href=s.attr("href"))},c.sendToTop=function(e,o){if(window.GH&&GH.RapidBoard&&GH.Shortcut&&GH.Shortcut.sendToTop)return GH.Shortcut.sendToTop(e),void c.closeDialogAndPopMessage();if("Action"==e){var t=o||c.findSelectedIssueId(),a=d()||"";s.makeRequest({type:"post",contentType:"application/json",url:a+"/rest/greenhopper/1.0/rank/global/first",data:JSON.stringify({issueId:t}),success:c.handleRankSuccess}),r(document).trigger("gh.global.rankissues",{action:"rankToTop"+(e?e:""),count:1})}},c.sendToBottom=function(e,o){if(window.GH&&GH.RapidBoard&&GH.Shortcut&&GH.Shortcut.sendToBottom)return GH.Shortcut.sendToBottom(e),void c.closeDialogAndPopMessage();if("Action"==e){var t=o||c.findSelectedIssueId(),a=d()||"";s.makeRequest({type:"post",contentType:"application/json",url:a+"/rest/greenhopper/1.0/rank/global/last",data:JSON.stringify({issueId:t}),success:c.handleRankSuccess}),r(document).trigger("gh.global.rankissues",{action:"rankToBottom"+(e?e:""),count:1})}},c.closeDialogAndPopMessage=function(){i.isNavigator()?u.reloadViaWindowLocation():(n&&n.current&&n.current.hide(),window.GH?(GH.RapidBoard&&e&&e.showIssueMessage&&e.showIssueMessage(),window.Boards&&window.Boards.refreshAll()):i&&t&&t.flashIssueRow&&t.flashIssueRow())},c.handleRankSuccess=function(e,s,o){c.storeSuccessMessage(e.issueId,e.issueKey,"thanks_issue_updated"),c.closeDialogAndPopMessage()},c.storeSuccessMessage=function(e,s,t){var a=o;try{a.setItem("selectedIssueId",e),a.setItem("selectedIssueKey",s),a.setItem("selectedIssueMsg",t)}catch(e){}},c}),require(["jquery","jira-agile/gh-globalkeyboardshortcuts"],function(e,s){e(document).delegate(".issueaction-greenhopper-rank-top-operation","click",function(o){o.preventDefault();var t=e(this).attr("data-issueid");s.sendToTop("Action",t)}),e(document).delegate(".issueaction-greenhopper-rank-bottom-operation","click",function(o){o.preventDefault();var t=e(this).attr("data-issueid");s.sendToBottom("Action",t)})}),AJS.namespace("gh.app.globalkeyboardshortcuts",null,require("jira-agile/gh-globalkeyboardshortcuts"));;
;
/* module-key = 'com.atlassian.jira.plugin.ext.bamboo:bamboo-soy-resources', location = 'templates/plugins/bamboo/components.soy' */
// This file was automatically generated from components.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.components.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.components == 'undefined') { bamboo.components = {}; }


bamboo.components.pageHeader = function(opt_data, opt_ignored) {
  return '' + aui.page.pageHeader({content: '' + ((opt_data.headerImageContent) ? aui.page.pageHeaderImage({content: opt_data.headerImageContent}) : '') + aui.page.pageHeaderMain({content: opt_data.headerMainContent}) + ((opt_data.headerActionsContent) ? aui.page.pageHeaderActions({content: opt_data.headerActionsContent}) : '')});
};
if (goog.DEBUG) {
  bamboo.components.pageHeader.soyTemplateName = 'bamboo.components.pageHeader';
}


bamboo.components.icon = function(opt_data, opt_ignored) {
  return '<span class="bamboo-icon bamboo-icon-' + soy.$$escapeHtml(opt_data.type) + '"' + ((opt_data.text && opt_data.showTitle) ? ' title="' + soy.$$escapeHtml(opt_data.text) + '"' : '') + '>' + ((opt_data.text) ? '<span>' + soy.$$escapeHtml(opt_data.text) + '</span>' : '') + '</span>';
};
if (goog.DEBUG) {
  bamboo.components.icon.soyTemplateName = 'bamboo.components.icon';
}


bamboo.components.buildDetail = function(opt_data, opt_ignored) {
  return '<dl><dt class="' + soy.$$escapeHtml(opt_data.keyClass) + '">' + soy.$$escapeHtml(opt_data.key) + '</dt><dd>' + soy.$$filterNoAutoescape(opt_data.value) + '</dd></dl>';
};
if (goog.DEBUG) {
  bamboo.components.buildDetail.soyTemplateName = 'bamboo.components.buildDetail';
}


bamboo.components.artifacts = function(opt_data, opt_ignored) {
  var output = '<ul id="shared-artifacts">';
  var artifactList42 = opt_data.artifacts;
  var artifactListLen42 = artifactList42.length;
  for (var artifactIndex42 = 0; artifactIndex42 < artifactListLen42; artifactIndex42++) {
    var artifactData42 = artifactList42[artifactIndex42];
    output += bamboo.components.artifactItem(soy.$$augmentMap(artifactData42, {id: artifactData42.name, url: artifactData42.link.href}));
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  bamboo.components.artifacts.soyTemplateName = 'bamboo.components.artifacts';
}


bamboo.components.artifactItem = function(opt_data, opt_ignored) {
  return '<li>' + bamboo.components.icon({type: 'artifact-shared'}) + ' <a class="artifact-link" id="artifact-' + soy.$$escapeHtml(opt_data.id) + '" href="' + soy.$$escapeHtml(opt_data.url) + '" title="' + soy.$$escapeHtml(opt_data.name) + '">' + soy.$$escapeHtml(opt_data.name) + '</a><span class="filesize">(' + soy.$$escapeHtml(opt_data.prettySizeDescription) + ')</span></li>';
};
if (goog.DEBUG) {
  bamboo.components.artifactItem.soyTemplateName = 'bamboo.components.artifactItem';
}


bamboo.components.labels = function(opt_data, opt_ignored) {
  var output = '<ul class="labels">';
  var labelList65 = opt_data.labels;
  var labelListLen65 = labelList65.length;
  for (var labelIndex65 = 0; labelIndex65 < labelListLen65; labelIndex65++) {
    var labelData65 = labelList65[labelIndex65];
    output += bamboo.components.labelItem(soy.$$augmentMap(labelData65, {url: opt_data.baseBambooUrl + '/browse/label/' + labelData65.name}));
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  bamboo.components.labels.soyTemplateName = 'bamboo.components.labels';
}


bamboo.components.labelItem = function(opt_data, opt_ignored) {
  return '<li><a class="lozenge" href="' + soy.$$escapeHtml(opt_data.url) + '" title="' + soy.$$escapeHtml(opt_data.name) + '"><span>' + soy.$$escapeHtml(opt_data.name) + '</span></a></li>';
};
if (goog.DEBUG) {
  bamboo.components.labelItem.soyTemplateName = 'bamboo.components.labelItem';
}


bamboo.components.errorResponseMessage = function(opt_data, opt_ignored) {
  return '' + bamboo.components.auiWarning({body: '' + ((opt_data.errorMessage.messageBody) ? '<p>' + soy.$$escapeHtml(opt_data.errorMessage.messageBody) + '</p>' : (opt_data.errorMessage.oauthCallback) ? '<p><a href="' + soy.$$filterNoAutoescape(opt_data.errorMessage.oauthCallback) + '&amp;redirectUrl=' + soy.$$filterNoAutoescape(opt_data.oAuthDanceReturnUrl) + '">' + soy.$$escapeHtml('Log in \x26 approve') + '</a></p>' : '<p>' + soy.$$escapeHtml(opt_data.errorMessage.message) + '</p>')});
};
if (goog.DEBUG) {
  bamboo.components.errorResponseMessage.soyTemplateName = 'bamboo.components.errorResponseMessage';
}


bamboo.components.auiWarning = function(opt_data, opt_ignored) {
  return '<div class="aui-message aui-message-warning warning">' + soy.$$filterNoAutoescape(opt_data.body) + '</div>';
};
if (goog.DEBUG) {
  bamboo.components.auiWarning.soyTemplateName = 'bamboo.components.auiWarning';
}
;
;
/* module-key = 'com.atlassian.whisper.atlassian-whisper-plugin:atlassian-whisper-bootstrap', location = '/js/bootstrap-init.js' */
require(["atlassian-whisper/bootstrap"],function(a){a()});;
;
/* module-key = 'com.atlassian.whisper.atlassian-whisper-plugin:atlassian-whisper-bootstrap', location = '/js/bootstrap.js' */
define("atlassian-whisper/bootstrap",["wrm/require"],function(a){return function(){var c=require("wrm/data").claim("com.atlassian.whisper.atlassian-whisper-plugin:atlassian-whisper-bootstrap.WhisperData");if(!c||c.hasMessages!==true){return}var b=function(){try{localStorage.setItem("hermes.config.delivery-url",AJS.contextPath()+"/rest/whisper/1/messages");localStorage.setItem("hermes.config.store-url",AJS.contextPath()+"/rest/whisper/1/properties")}catch(d){return}require(["atlassian-whisper/hermes-init"],function(e){e(c)},undefined,c.syncInit)};if(c.syncInit){b()}else{AJS.$(function(){a("wr!com.atlassian.whisper.atlassian-whisper-plugin:atlassian-whisper-hermes",b)})}}});;
;
/* module-key = 'com.atlassian.administration.atlassian-admin-quicksearch-jira:admin-quicksearch-webresources', location = 'com/atlassian/administration/quicksearch/jira/js/adminQuickNav.js' */
/**
 * Shifter group for admin search
 */
require([
    'jquery',
    'underscore',
    'jira/ajs/ajax/smart-ajax',
    'jira/shifter',
    'wrm/context-path'
], function (jQuery,
             _,
             SmartAjax,
             Shifter,
             contextPath) {
    Shifter.register(function () {
        var suggestionsDeferred = jQuery.Deferred();

        function formatItem(item) {
            return {
                label: item.label,
                value: item.linkUrl,
                keywords: item.aliases
            };
        }

        function getItemsInSection(section) {
            return _.map(section.items, formatItem).concat(_.map(section.sections, getItemsInSection));
        }

        function formatResponse(data) {
            return _.flatten(getItemsInSection(data));
        }

        SmartAjax.makeRequest({
            dataType: 'json',
            url: contextPath() + '/rest/adminquicksearch/latest/links/default'
        })
            .pipe(formatResponse)
            .done(function (suggestions) {
                suggestionsDeferred.resolve(suggestions);
            })
            .fail(function () {
                suggestionsDeferred.reject();
            });

        return {
            id: 'admin',
            name: "Administration",
            weight: 500,
            getSuggestions: function () {
                return suggestionsDeferred;
            },
            onSelection: function (value) {
                window.location = value;
                return jQuery.Deferred();
            }
        };
    });
});
;
;
/* module-key = 'com.atlassian.plugins.browser.metrics.browser-metrics-plugin:api', location = 'probe.js' */
!function(){var n,t,e,r,i,o,u,a,c,s,f,l,h,d,y,p,v,m,w;n=function(){return window}(),t=function(n){return!(!n.performance||!n.performance.now)}(n),e=[],r=function(n){return function(t){n.unshift({addReporter:t})}}(e),i=function(n){return function(t){for(;n.length;)t(n.splice(0,1)[0]);n.unshift=t,n.push=t}}(e),o=function(n,t){return function(e){n.push({end:{key:e.key,timestamp:t.performance.now()}})}}(e,n),u=function(n){return n.document}(n),a=function(n){return n.Promise}(n),c=function(){function n(){this._={}}var t=function(e){var r=e[0],i=e[1];i instanceof n?e.length>=3?Object.keys(i._).forEach(function(n){t([r,i._[n],n].concat(e.slice(2)))}):Object.keys(i._).forEach(function(n){t([r,i._[n],n])}):Array.isArray(i)&&r.apply(null,[i].concat(e.slice(2)))};n.prototype.forEach=function(n){t([n,this])},n.prototype.add=function(){for(var t=this,e=null,r=null,i=0;i<arguments.length;i++){if(r=arguments[i],i===arguments.length-1&&Array.isArray(t)){t.push(r);break}i<arguments.length-2&&!t._.hasOwnProperty(r)?t._[r]=new n:i!==arguments.length-2||t._.hasOwnProperty(r)||(t._[r]=[]),t=t._[r],e=r}};var e=function(n,t){if(0!==n.length){var r=n.pop(),i=r[0],o=r[1];i===t?e(n,i):o._.hasOwnProperty(t)&&delete o._[t],0===Object.keys(o).length&&e(n,i)}};return n.prototype.remove=function(){for(var n,t=!1,r=null,i=this,o=[[r,i]],u=null,a=0;a<arguments.length;a++)if(u=arguments[a],Array.isArray(i))n=i.indexOf(u),n>-1&&(i.splice(n,1),0===i.length&&o.length>1&&e(o,r),t=!0);else{if(!i._.hasOwnProperty(u))break;a===arguments.length-1&&(delete i._[u],0===Object.keys(i).length&&o.length>1&&e(o,r),t=!0),r=u,i=i._[u],o.push([r,i])}return t},n.prototype.get=function(n){return this._.hasOwnProperty(n)?this._[n]:[]},n}(),s=function(n,t,e,r){function i(n){return!n||null==n||"null"===n||"undefined"===n}function o(t,e,r){l||(c.observe(n,{attributes:!0,childList:!0,subtree:!0}),l=!0),s.add(t,e,r)}function u(t,e){var r=n.querySelectorAll(t);return r.length&&(i(e)||Array.prototype.every.call(r,function(n){return!n.querySelector(e)}))}function a(n,e){var r;n.forEach||(n=[n]),!i(e)&&Array.isArray(e)&&(e=e.join(", "));var a=new t(function(i,a){var c=[],f=[];n.forEach(function(n){var r,i;u(n,e)||(r=new t(function(t){o(n,e,t),i=function(){s.remove(n,e,t)},f.push(i)}),c.push(r))});var l=function(){f.forEach(function(n){n()})};t.all(c).then(l).then(i,a),r=function(){l(),a()}});return a.dismiss=r,a}var c,s,f=r.MutationObserver,l=!1;return f&&t?(s=new e,c=new f(function(){s.forEach(function(n,t,e){u(e,t)&&(n.forEach(function(n){n()}),s.remove(e,t))})}),a):void 0}(u,a,c,n),f=function(n){return!!n}(s),l=function(n){function t(){c(),n.body.classList.add(u)}function e(){function e(){n.body.classList.remove(u),n.removeEventListener(i,s),n.removeEventListener(o,c),r=null}if(r)return r;var c,s,f=!1;return r=new Promise(function(e,r){"visible"!==n.visibilityState?r():(s=function(){f=!0},c=function(n){n.animationName===a&&(f?r():e())},n.addEventListener(i,s),n.addEventListener(o,c),t())}),r.then(e,e),r}var r,i="visibilitychange",o="animationend",u="browser-metrics-visibility-test",a="browser-metrics-visibility-animation",c=function(){var t=n.createElement("style"),e=["."+u+" {","-webkit-animation-duration: 0.001s;","animation-duration: 0.001s;","-webkit-animation-name: "+a+";","animation-name: "+a+";","-webkit-animation-iteration-count: 1;","animation-iteration-count: 1;","}","@keyframes "+a+" {}","@-webkit-keyframes "+a+" {","from {}","to {}","}"].join("\n");t.type="text/css",t.styleSheet?t.styleSheet.cssText=e:t.appendChild(n.createTextNode(e)),n.head.appendChild(t),c=function(){}};return e}(u),h=function(n,t,e,r,i){function o(n){return Array.isArray(n)||(n=[n]),n.map(function(n){return"string"==typeof n?{selector:n,hasNone:null}:n})}function u(n){return Array.isArray(n)||"string"==typeof n}function a(n){return u(n)&&(n={rules:n}),n.rules=o(n.rules),n.requirePaint="undefined"==typeof n.requirePaint?!1:n.requirePaint,n}return function(i,o){if(n){i=a(i);var u=function(){},c=new e(function(n,r){var o=[],a=i.rules.map(function(n){var e=new t(n.selector,n.hasNone);return o.push(function(){e.dismiss()}),e});u=function(){o.forEach(function(n){n()}),r()},e.all(a).then(function(n){}).then(n,r)});return c.cancel=u,i.requirePaint&&(c=c.then(r)),"function"==typeof o&&c.then(o),c}}}(f,s,a,l,n),d=function(n,t){function e(){return r}var r=!1;return n.addEventListener("DOMContentLoaded",function(){t.setTimeout(function(){r=!0})}),e}(u,n),y=function(n,t,e,r,i,o,u){function a(){c=null}var c;return function(o){var s="isInitial"in o?o.isInitial:i()===!1,f="threshold"in o?o.threshold:1e3,l="reporters"in o?o.reporters:[];r.push({start:{key:o.key,isInitial:s,threshold:f,timestamp:s?0:u.performance.now(),reporters:Array.isArray(l)?l:[l]}}),c&&(c.cancel(),a()),o.ready&&e&&(c=n(o.ready),c.then(function(){t({key:o.key})}).then(a,a))}}(h,o,f,e,d,a,n),p=function(n){return function(t){n.push({subscribe:t})}}(e),v=function(){return window}(),m=function(n){return n.performance}(v),w=function(n,t,e,r,i,o,u){var a=function(){};return u?{start:n?i:a,end:n?r:a,addReporter:n?t:a,delegateTo:n?e:a,subscribe:n?o:a}:void 0}(t,r,i,o,y,p,m),window["browser-metrics"]=w,window.define&&window.define("internal/browser-metrics",function(){return w})}();;
;
/* module-key = 'com.atlassian.plugins.browser.metrics.browser-metrics-plugin:api', location = 'internal/browser-metrics-aa-beacon.js' */
!function(){var e={};e=function(e){function n(e,n){Object.keys(n).forEach(function(r){e[r]=n[r]})}Object.defineProperty(e,"__esModule",{value:!0});var r,t=[],o=[];return e.addUrlCleaner=function(e){o.push(e)},e.cleanUrl=function(e){return o.reduce(function(n,r){var t=r(e);return t.length>n.length?t:n},"")},e.addReportMarshaller=function(e){t.push(e)},e.setEventQueue=function(e){r=e},e.beacon=function(e){var o={};t.forEach(function(r){var t=r(e);"object"==typeof t&&n(o,t)});var a={name:"browser.metrics.navigation",properties:o};(r||AJS.EventQueue).push(a)},e}(e),window["browser-metrics-aa-beacon"]=e,window.define&&window.define("internal/browser-metrics-aa-beacon",function(){return e})}();;
;
/* module-key = 'com.atlassian.plugins.browser.metrics.browser-metrics-plugin:api', location = 'loader.js' */
!function(){var n={},r={};r=function(n,r,i){function e(){t===u&&o&&(o(),o=null)}Object.defineProperty(n,"__esModule",{value:!0});var t=0,u=0,o=null,c={install:function(n){t+=1,n(function(){u+=1,e()})}};return r["browser-metrics-plugin"]=c,i.require(["wrc!browser-metrics-plugin.contrib"],function(){r.require(["internal/browser-metrics-plugin/collector"],function(n){o=function(){n.install()},e()})}),n}(r,n=window,n.WRM)}();;
;
/* module-key = 'com.atlassian.jira.plugins.jira-browser-metrics:sensors', location = 'sensors.js' */
require(["internal/browser-metrics","jira/util/events"],function(e,i){var a,o={},d={},t={};o=function(e,i,a){function o(){function e(e){return o.hasOwnProperty(e)?o[e]:null}var o={"bonfire_top_menu_dropdown-content":"jira.header.menu.capture","browse_link-content":"jira.header.menu.projects","find_link-content":"jira.header.menu.issues","greenhopper_menu-content":"jira.header.menu.agile","home_link-content":"jira.header.menu.dashboards","plugins-jira-webitem-main-content":"jira.header.menu.portfolio","servicedesk-section-content":"jira.header.menu.service-desk","system-admin-menu-content":"jira.header.menu.admin","system-help-menu-content":"jira.header.menu.help","user-options-content":"jira.header.menu.profile"};i.bind("aui-dropdown2-show-before",function(i){var o=i.target,d=e(o&&o.id);d&&a.start({key:d,isInitial:!1,threshold:250})}),i.bind("aui-dropdown2-show-after",function(i){var o=i.target,d=e(o&&o.id);d&&a.end({key:d})})}return e.applicationMenusSensorInit=o,e}(o,i,e),d=function(e){function i(e){var i;if(a.hasOwnProperty(e))return e;for(i=0;i<o.length;i++)if(e.match(o[i].pattern))return o[i].dialogId;return null}e.safeDialogId=i;var a=["about-dialog","add-basicuser-dialog","add-developer-dialog","add-field-configuration-dialog","add-field-configuration-scheme-dialog","add-field-dialog","add-field-screen-dialog","add-field-screen-scheme-dialog","add-incoming-mail-handler-dialog","add-issue-type-dialog","add-issue-type-field-configuration-association-dialog","add-issue-type-screen-scheme-configuration-association-dialog","add-issue-type-screen-scheme-dialog","add-new-issue-type-to-scheme-dialog","add-screen-scheme-item-dialog","add-subtask-type-dialog","add-workflow-dialog","add_workflowscheme-dialog","assign-dialog","assign-issue-types-dialog","assign-to-me-link-handler","attach-file-dialog","attach-screenshot-dialog","auditing-settings-dialog","clone-issue-dialog","comment-add-dialog","configure_wallboard_dialog","confluence-page-search-dialog","copy_classic default workflow-dialog","copy-filter-dialog","copy_jira-dialog","create-issue-dialog","create-issue-dialog.issueType","create-issue-dialog.projectId","create-request-dialog","create-service-desk-dialog","create-status-dialog","create-story-dialog","create-story-dialog.issueType","create-story-dialog.projectId","create-subtask-dialog","create-subtask-dialog.issueType","create-team-dialog","create_user-dialog","credits-dialog","delete-attachment-dialog","delete-comment-dialog","delete-dshboard","delete-filter-dialog","delete-issue-dialog","delete-issue-link-dialog","delete-log-work-dialog","delete-metric","delete-queue","delete-status-dialog","deleteuser_link-dialog","devstatus-branch-detail-dialog","devstatus-build-detail-dialog","devstatus-commit-detail-dialog","devstatus-cta-dialog","devstatus-deployment-detail-dialog","devstatus-pullrequest-detail-dialog","devstatus-review-detail-dialog","discard-draft-dialog","discard_draft_workflow-dialog","edit-attachments-dialog","edit-comment","editgroups_admin-dialog","editgroups_link-dialog","editgroups_sysadmin-dialog","edit-issue-dialog","edit-labels-dialog","edit-log-work-dialog","edit-status-dialog","edituser_link_admin-dialog","edit-workflow-dialog","gh-rapidboard-dialog","inline-issue-create-dialog","invite_user-dialog","issue-actions-dialog","issue-tab-error-dialog","jim-create-project-dialog","keyboard-shortcuts-dialog","link-issue-dialog","log-work-dialog","manage-attachment-dialog","metric-pre-save-dialog","modal-field-view","permission-helper-dialog","project-avatar-cropper","project-avatar-picker","project-config-details-project-category-dialog","project-config-project-edit-dialog","project-config-project-edit-lead-and-default-assignee-dialog","project-email-dialog","publish_draft_workflow-dialog","queue-dirty-edits","QuickCreateIssue.error","QuickCreateIssue.success","QuickCreateSubtask.error","QuickCreateSubtask.success","QuickEdit.error","QuickEdit.success","remote-jira-search-dialog","rename-filter-dialog","report-dirty-edits","save-filter-dialog","sd-add-default-value","sd-add-remove-agent-dialog","sd-remove-field-dialog","server-error-dialog","report-delete-confirm","tempo-add-hours-issue-dialog","tempo-add-internal-activity-form","tempo-core-medium-form","tempo-delete-form-dialog","tempo-grace-form","tempo-large-form","tempo-medium-form","tempo-move-form-dialog","tempo-pdf-form","tempo-small-form","tempo-split-form-dialog","tempo-user-settings-dialog","user-avatar-picker","user-defaults-edit-dialog","versionsMergeDialog","view-workflow-dialog","view-workflow-dialog-project-admin","view-workflow-dialog-workflow-schemes","wait-migrate-dialog","whereismycf-dialog","workflow-text-view"].reduce(function(e,i){return e[i]=!0,e},{}),o=[{dialogId:"component-delete-dialog",pattern:/^component-\d+-delete-dialog$/i},{dialogId:"version-delete-dialog",pattern:/^version-\d+-delete-dialog$/i},{dialogId:"workflow-transition-dialog",pattern:/^workflow-transition-\d+-dialog$/i}];return e}(d),t=function(e,i,a,o){function d(){i.bind("beforeShow",function(e,i){if("string"==typeof i){var d=(0,o.safeDialogId)(i);d&&a.start({key:"jira.dialog.open."+d,isInitial:!1,threshold:1e3})}}),i.bind("dialogContentReady",function(e,i){if("string"==typeof i.options.id){var d=(0,o.safeDialogId)(i.options.id);d&&a.end({key:"jira.dialog.open."+d})}})}return e.dialogsSensorInit=d,e}(t,i,e,d),a=function(e,i){(0,e.applicationMenusSensorInit)(),(0,i.dialogsSensorInit)()}(o,t)});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-quicksearch-plugin:commons_common', location = 'frontend/common.js' */
!function(e){function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var r=window.atlassianWebpackJsonpe5ed4b01bb42b7893d8aef5bda9bf664;window.atlassianWebpackJsonpe5ed4b01bb42b7893d8aef5bda9bf664=function(t,a,i){for(var c,u,s,f=0,l=[];f<t.length;f++)u=t[f],o[u]&&l.push(o[u][0]),o[u]=0;for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&(e[c]=a[c]);for(r&&r(t,a,i);l.length;)l.shift()();if(i)for(f=0;f<i.length;f++)s=n(n.s=i[f]);return s};var t={},o={2:0};n.e=function(e){function r(){c.onerror=c.onload=null,clearTimeout(u);var n=o[e];0!==n&&(n&&n[1](new Error("Loading chunk "+e+" failed.")),o[e]=void 0)}var t=o[e];if(0===t)return new Promise(function(e){e()});if(t)return t[2];var a=new Promise(function(n,r){t=o[e]=[n,r]});t[2]=a;var i=document.getElementsByTagName("head")[0];if({0:!0}[e])return WRM.require("wrc!com.atlassian.jira.plugins.jira-quicksearch-plugin:"+e),a;var c=document.createElement("script");c.type="text/javascript",c.charset="utf-8",c.async=!0,c.timeout=12e4,n.nc&&c.setAttribute("nonce",n.nc),c.src=n.p+"bundle."+e+".js";var u=setTimeout(r,12e4);return c.onerror=c.onload=r,i.appendChild(c),a},n.m=e,n.c=t,n.d=function(e,r,t){n.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:t})},n.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(r,"a",r),r},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n.oe=function(e){throw console.error(e),e},"undefined"!=typeof AJS&&(n.p=AJS.contextPath()+"/download/resources/com.atlassian.jira.plugins.jira-quicksearch-plugin:assets-b3fe616f-2e2b-4301-9aa4-7756c180c61a/")}([]);;
;
/* module-key = 'com.atlassian.jira.plugins.jira-quicksearch-plugin:entrypoint-jira-quicksearch-plugin', location = 'frontend/bundle.jira-quicksearch-plugin.js' */
atlassianWebpackJsonpe5ed4b01bb42b7893d8aef5bda9bf664([1],[function(e,t){e.exports=require("jquery")},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.QUICK_SEARCH_RESULTS_EMPTY_STATE=t.QUICK_SEARCH_PARENT_LOADING_CLASS=t.QUICK_SEARCH_SPINNER_LOCATOR_CLASS=t.QUICK_SEARCH_SPINNER_CLASS=t.QUICK_SEARCH_INPUT_LOCATOR=t.QUICK_SEARCH_INPUT_ID=t.QUICK_SEARCH_FEATURE_FLAG=void 0;var r=n(5),u=i(r),a=n(2),o=i(a),s=o.default,c=(t.QUICK_SEARCH_FEATURE_FLAG="jira.quick.search",t.QUICK_SEARCH_INPUT_ID="quickSearchInput"),l=t.QUICK_SEARCH_INPUT_LOCATOR="#"+c,_=t.QUICK_SEARCH_SPINNER_CLASS="quick-search-spinner";t.QUICK_SEARCH_SPINNER_LOCATOR_CLASS=l+" ~ ."+_,t.QUICK_SEARCH_PARENT_LOADING_CLASS="quicksearch-loading",t.QUICK_SEARCH_RESULTS_EMPTY_STATE=Object.freeze([{id:"quick-search-issues",items:[],name:"Issues",url:(0,u.default)()+"/issues/?jql=order+by+lastViewed+DESC",viewAllTitle:"View all issues"},{id:"quick-search-projects",items:[],name:"ultimate.search.group.projects.name",url:(0,u.default)()+"/projects?selectedCategory=all&selectedProjectType=all&contains=",viewAllTitle:"View all projects"}])},function(e,t){e.exports=require("jira/util/formatter")},function(e,t){e.exports=require("jira/analytics")},function(e,t){e.exports=require("underscore")},function(e,t){e.exports=require("wrm/context-path")},function(e,t,n){"use strict";function i(){return(0,c.default)(_.QUICK_SEARCH_SPINNER_LOCATOR_CLASS)}function r(){return(0,c.default)(_.QUICK_SEARCH_INPUT_LOCATOR)}function u(){return r().parent()}function a(){u().addClass(_.QUICK_SEARCH_PARENT_LOADING_CLASS),i().spin()}function o(){u().removeClass(_.QUICK_SEARCH_PARENT_LOADING_CLASS),i().spinStop()}Object.defineProperty(t,"__esModule",{value:!0}),t.spinStart=a,t.spinStop=o;var s=n(0),c=function(e){return e&&e.__esModule?e:{default:e}}(s),l=n(1),_=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(l);n(9)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=n(0),u=i(r),a=n(4),o=i(a),s=n(3),c=i(s);n(8);var l=n(6),_=n(1),d=n(10),f=i(d),C=n(11),S=o.default.once(function(){(0,l.spinStart)(),n.e(0).then(n.bind(null,13))});(0,u.default)(function(){if(f.default.isFeatureEnabled(_.QUICK_SEARCH_FEATURE_FLAG)){c.default.send({name:"quicksearch.enabled"});var e=(0,u.default)(_.QUICK_SEARCH_INPUT_LOCATOR);e.after('<div class="'+_.QUICK_SEARCH_SPINNER_CLASS+'"></div>'),e.on("beforeBlurInput",function(e){e.preventDefault()}),e.focus(S),e.is(":focus")&&S()}}),(0,u.default)(window).load(function(){f.default.isFeatureEnabled(_.QUICK_SEARCH_FEATURE_FLAG)&&(0,C.showOnboardingTip)()})},function(e,t){},function(e,t){e.exports=void 0},function(e,t){e.exports=require("jira/featureflags/feature-manager")},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){return"<div><p>"+e+"</p></div>"}function u(){if(0!==(0,f.default)(S).length){var e={anchor:S,id:"qs-onboarding-tip",isSequence:!1,showCloseButton:!0,closeButtonText:"OK, got it",callbacks:{hide:function(){return c.default.send({name:"quicksearch.onboarding.tip.dissmised"})}},title:"Find your work faster",bodyHtml:r("Search through all your issues and projects, and have the most important work always at your fingertips. Start typing to search...")},t=new o.default(e);if(!t.isDismissed()){if(t.show(),!t.isVisible())return void c.default.send({name:"quicksearch.onboarding.tip.notshown"});c.default.send({name:"quicksearch.onboarding.tip.shown"})}}}Object.defineProperty(t,"__esModule",{value:!0}),t.showOnboardingTip=u;var a=n(12),o=i(a),s=n(3),c=i(s),l=n(2),_=i(l),d=n(0),f=i(d),C=_.default,S="#quicksearch-menu:visible"},function(e,t){e.exports=require("jira-help-tips/feature/help-tip")}],[7]);;
;
/* module-key = 'com.atlassian.auiplugin:split_aui.component.dropdown2', location = 'aui.chunk.b7e891fa91a82da379d1--30b5902f9415f7a330ba.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.component.dropdown2"],[],[["XHZH","runtime","aui.splitchunk.vendors--52bf8654d5","aui.splitchunk.vendors--b47d4b691d","aui.splitchunk.vendors--9c48cc20a9","aui.splitchunk.vendors--084821f40b","aui.splitchunk.vendors--d2297af84a","aui.splitchunk.172ffb6da7","aui.splitchunk.b0831cc7d0","aui.splitchunk.087aba7911","aui.splitchunk.fbd1a5ab27","aui.splitchunk.54d3f16c20","aui.splitchunk.e54c7c7304","aui.splitchunk.bb051ea9dd","aui.splitchunk.fb15cffa72","aui.splitchunk.f1e06f97a4","aui.splitchunk.56dfb54d0c","aui.splitchunk.479fe6ee76","aui.splitchunk.f673ef53ac","aui.splitchunk.8659b532c1","aui.splitchunk.9c48cc20a9","aui.splitchunk.5f851f97df","aui.splitchunk.d0110a864f","aui.splitchunk.afa5039e04","aui.splitchunk.bff3715233","aui.splitchunk.c750721820","aui.splitchunk.6d6f245ed3","aui.splitchunk.ed86a19e01","aui.splitchunk.084821f40b","aui.splitchunk.5b8c290363","aui.splitchunk.baa83dbaf9","aui.splitchunk.e5af17b48e","aui.splitchunk.36cd9d521c","aui.splitchunk.4248e12b20","aui.splitchunk.b548966f06"]]]);
//# sourceMappingURL=aui.chunk.b7e891fa91a82da379d1--30b5902f9415f7a330ba.js.map;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher.soy' */
// This file was automatically generated from appswitcher.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace navlinks.templates.appswitcher.
 */

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.appswitcher == 'undefined') { navlinks.templates.appswitcher = {}; }


navlinks.templates.appswitcher.linkSection = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.list.length > 0) {
    output += '<div class="aui-nav-heading sidebar-section-header">' + soy.$$escapeHtml(opt_data.title) + '</div><ul class="aui-nav nav-links">';
    var linkList8 = opt_data.list;
    var linkListLen8 = linkList8.length;
    for (var linkIndex8 = 0; linkIndex8 < linkListLen8; linkIndex8++) {
      var linkData8 = linkList8[linkIndex8];
      output += navlinks.templates.appswitcher.applicationsItem(linkData8);
    }
    output += '</ul>';
  }
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.linkSection.soyTemplateName = 'navlinks.templates.appswitcher.linkSection';
}


navlinks.templates.appswitcher.applicationsItem = function(opt_data, opt_ignored) {
  return '<li class="nav-link"><a href="' + soy.$$escapeHtml(opt_data.link) + '" ' + ((opt_data.self) ? 'class="checked"' : '') + ' title="' + soy.$$escapeHtml(opt_data.link) + '"><span class="nav-link-label">' + soy.$$escapeHtml(opt_data.label) + '</span></a></li>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.applicationsItem.soyTemplateName = 'navlinks.templates.appswitcher.applicationsItem';
}


navlinks.templates.appswitcher.shortcutsItem = function(opt_data, opt_ignored) {
  return '<li class="nav-link"><a href="' + soy.$$escapeHtml(opt_data.link) + '" ' + ((opt_data.self) ? 'class="checked"' : '') + ' title="' + soy.$$escapeHtml(opt_data.link) + '"><span class="nav-link-label">' + soy.$$escapeHtml(opt_data.label) + '</span>' + ((opt_data.showDescription && opt_data.description) ? '<span class="nav-link-description">' + soy.$$escapeHtml(opt_data.description) + '</span>' : '') + '</a></li>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.shortcutsItem.soyTemplateName = 'navlinks.templates.appswitcher.shortcutsItem';
}


navlinks.templates.appswitcher.error = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-error">' + soy.$$filterNoAutoescape('Something went wrong, please \x3cspan class\x3d\x22app-switcher-retry\x22\x3etry again\x3c/span\x3e.') + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.error.soyTemplateName = 'navlinks.templates.appswitcher.error';
}


navlinks.templates.appswitcher.sidebarContents = function(opt_data, opt_ignored) {
  return '<div class="aui-page-panel-nav"><nav class="aui-navgroup aui-navgroup-vertical"><div class="app-switcher-section app-switcher-applications"><div class="aui-nav-heading">' + soy.$$escapeHtml('Application Links') + '</div><div class="app-switcher-loading">' + soy.$$filterNoAutoescape('Loading\x26hellip;') + '</div></div><div class="app-switcher-section app-switcher-shortcuts"><div class="aui-nav-heading">' + soy.$$escapeHtml('Shortcuts') + '</div><div class="app-switcher-loading">' + soy.$$filterNoAutoescape('Loading\x26hellip;') + '</div></div></nav></div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.sidebarContents.soyTemplateName = 'navlinks.templates.appswitcher.sidebarContents';
}


navlinks.templates.appswitcher.trigger = function(opt_data, opt_ignored) {
  return '<span class="aui-icon aui-icon-small aui-iconfont-appswitcher">' + soy.$$escapeHtml('Linked Applications') + '</span>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.trigger.soyTemplateName = 'navlinks.templates.appswitcher.trigger';
}


navlinks.templates.appswitcher.projectHeaderSection = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-title">' + aui.avatar.avatar({size: 'large', avatarImageUrl: opt_data.avatarUrl, isProject: true, title: opt_data.name}) + '<div class="sidebar-project-name">' + soy.$$escapeHtml(opt_data.name) + '</div></div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.projectHeaderSection.soyTemplateName = 'navlinks.templates.appswitcher.projectHeaderSection';
}


navlinks.templates.appswitcher.cogDropdown = function(opt_data, opt_ignored) {
  var output = '';
  var dropdownList__soy74 = '' + navlinks.templates.appswitcher.dropdownList({list: opt_data.links});
  output += aui.dropdown2.dropdown2({menu: {id: opt_data.id, content: dropdownList__soy74, extraClasses: 'aui-style-default sidebar-customize-section'}, trigger: {showIcon: false, content: '<span class="aui-icon aui-icon-small aui-iconfont-configure"></span>', container: '#app-switcher'}});
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.cogDropdown.soyTemplateName = 'navlinks.templates.appswitcher.cogDropdown';
}


navlinks.templates.appswitcher.dropdownList = function(opt_data, opt_ignored) {
  var output = '<ul class="sidebar-admin-links">';
  var linkList82 = opt_data.list;
  var linkListLen82 = linkList82.length;
  for (var linkIndex82 = 0; linkIndex82 < linkListLen82; linkIndex82++) {
    var linkData82 = linkList82[linkIndex82];
    output += '<li class="nav-link"><a href="' + soy.$$escapeHtml(linkData82.href) + '" title="' + soy.$$escapeHtml(linkData82.title) + '"><span class="nav-link-label">' + soy.$$escapeHtml(linkData82.label) + '</span></a></li>';
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.dropdownList.soyTemplateName = 'navlinks.templates.appswitcher.dropdownList';
}


navlinks.templates.appswitcher.switcher = function(opt_data, opt_ignored) {
  var output = '';
  if (true) {
    if (AJS.DarkFeatures.isEnabled('rotp.sidebar')) {
      var sidebarContents__soy97 = '' + navlinks.templates.appswitcher.sidebarContents(null);
      var triggerContent__soy99 = '' + navlinks.templates.appswitcher.trigger(null);
      output += navlinks.templates.appswitcher.sidebar({sidebar: {id: 'app-switcher', content: sidebarContents__soy97}, trigger: {showIcon: false, content: triggerContent__soy99}});
    } else {
      output += navlinks.templates.appswitcher_old.switcher(null);
    }
  }
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.switcher.soyTemplateName = 'navlinks.templates.appswitcher.switcher';
}


navlinks.templates.appswitcher.sidebar = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(opt_data.sidebar.id) + '" class="sidebar-trigger app-switcher-trigger" aria-owns="' + soy.$$escapeHtml(opt_data.sidebar.id) + '" aria-haspopup="true" data-is-user-admin="' + soy.$$escapeHtml(false) + '" data-is-sidebar="true" >' + soy.$$filterNoAutoescape(opt_data.trigger.content) + '</a><div id=' + soy.$$escapeHtml(opt_data.sidebar.id) + ' class="app-switcher-sidebar aui-style-default sidebar-offscreen">' + soy.$$filterNoAutoescape(opt_data.sidebar.content) + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.sidebar.soyTemplateName = 'navlinks.templates.appswitcher.sidebar';
}
;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher.js' */
(function(e,a){var d="is-user-admin";var c="#app-switcher";a.SideBar=function(f){var g=this;this.$sidebar=null;f=e.extend({sidebarContents:null},f);this.getLinks=function(){return e.ajax({url:AJS.contextPath()+"/rest/menu/latest/appswitcher",cache:false,dataType:"json"}).done(this.updateAppLinks).fail(this.showAppSwitcherError)};this.populateProjectHeader=function(i,h){g.getSidebar().find(".app-switcher-shortcuts .aui-nav-heading").after(navlinks.templates.appswitcher.projectHeaderSection({avatarUrl:h,name:i}))};this.getProjectData=function(){var h=e(".project-shortcut-dialog-trigger"),i=h.data("key"),j=h.data("entity-type");if(h.size()==0||!i||!j){e(".app-switcher-shortcuts").remove();return}var l,k;k=e.ajax({url:AJS.contextPath()+"/rest/project-shortcuts/1.0/local/"+i,cache:false,data:{entityType:j},dataType:"json"});l=e.ajax({url:AJS.contextPath()+"/rest/project-shortcuts/1.0/remote/"+i,cache:false,data:{entityType:j},dataType:"json"});e.when(k,l).then(function(n,m){g.updateProjectShortcuts(n,m,{key:i,entityType:j,name:h.data("name"),avatarUrl:h.find("img").prop("src")})},g.showProjectShortcutsError)};this.getSidebar=function(){if(!this.$sidebar){this.$sidebar=e(f.sidebarContents)}return this.$sidebar};this.addApplicationsCog=function(){e(".app-switcher-applications .aui-nav-heading").before(navlinks.templates.appswitcher.cogDropdown({id:"sidebar-applications-admin-dropdown",links:[{href:AJS.contextPath()+"/plugins/servlet/customize-application-navigator",label:"Customize navigator",title:"Add new entries, hide existing or restrict who sees what"},{href:AJS.contextPath()+"/plugins/servlet/applinks/listApplicationLinks",label:"Manage application links",title:"Link to more Atlassian applications"}]}))};this.addProjectShortcutsCog=function(h,j){var i=[{href:AJS.contextPath()+"/plugins/servlet/custom-content-links-admin?entityKey="+h,label:"Customize shortcuts",title:""}];if(g.entityMappings[j]){i.push({href:g.generateEntityLinksUrl(h,g.entityMappings[j]),label:"Manage product links",title:""})}g.getSidebar().find(".app-switcher-shortcuts .aui-nav-heading").before(navlinks.templates.appswitcher.cogDropdown({id:"sidebar-project-shortcuts-admin-dropdown",links:i}))};this.updateAppLinks=function(h){e(function(){g.getSidebar().find(".app-switcher-applications").html(navlinks.templates.appswitcher.linkSection({title:"Application Links",list:h}));if(g.getSidebar().data(d)){g.addApplicationsCog()}g.bindAnalyticsHandlers(g.getSidebar(),h)})};this.updateProjectShortcuts=function(k,i,j){var l=k[0].shortcuts,h=i[0].shortcuts;g.getSidebar().find(".app-switcher-shortcuts").html(navlinks.templates.appswitcher.linkSection({title:"Shortcuts",list:l.concat(h)}));if(g.getSidebar().data(d)){g.addProjectShortcutsCog(j.key,j.entityType)}g.populateProjectHeader(j.name,j.avatarUrl);g.bindAnalyticsHandlers(g.getSidebar(),data)};this.entityMappings={"confluence.space":"com.atlassian.applinks.api.application.confluence.ConfluenceSpaceEntityType","jira.project":"com.atlassian.applinks.api.application.jira.JiraProjectEntityType","bamboo.project":"com.atlassian.applinks.api.application.bamboo.BambooProjectEntityType","stash.project":"com.atlassian.applinks.api.application.stash.StashProjectEntityType"};this.generateEntityLinksUrl=function(h,i){if(i===g.entityMappings["confluence.space"]){return AJS.contextPath()+"/spaces/listentitylinks.action?typeId="+i+"&key="+h}else{return AJS.contextPath()+"/plugins/servlet/applinks/listEntityLinks/"+i+"/"+h}};this.showAppSwitcherError=function(){e(function(){var h=g.getSidebar();h.find(".app-switcher-applications .app-switcher-loading").replaceWith(navlinks.templates.appswitcher.error());h.off(".appswitcher").on("click.appswitcher",".app-switcher-retry",e.proxy(g.retryLoading,g))})};this.showProjectShortcutsError=function(){e(function(){var h=g.getSidebar();h.find(".app-switcher-shortcuts .app-switcher-loading").replaceWith(navlinks.templates.appswitcher.error());h.off(".appswitcher").on("click.appswitcher",".app-switcher-retry",e.proxy(g.retryLoading,g))})};this.retryLoading=function(h){this.getSidebar().html(navlinks.templates.appswitcher.sidebarContents());this.getLinks();this.getProjectData();h&&h.stopPropagation()};this.bindAnalyticsHandlers=function(h,i){};this.getLinks();e(this.getProjectData);this.toggleSidebar=function(j){var k=g.getSidebar(),i=e("body"),h=e(window.document);if(!i.hasClass("app-switcher-open")){var m=e("#header");k.css("left",-k.width());k.parent("body").length||k.appendTo("body");b({data:k});k.animate({left:0},300);function l(n){var p=n.target&&e(n.target),o=n.keyCode;if(n.originalEvent===j.originalEvent){return}if(p&&!o&&!(p.closest(k).length||p.closest(m).length)&&j.which==1&&!(n.shiftKey||n.ctrlKey||n.metaKey)){g.toggleSidebar()}else{if(o===27){g.toggleSidebar()}}}h.on("click.appSwitcher",l);h.on("keydown.appSwitcher",l);h.on("scroll.appSwitcher",k,b)}else{h.off(".appSwitcher")}i.toggleClass("app-switcher-open")};e("#header").on("click",".app-switcher-trigger",this.toggleSidebar)};function b(h){var f=e(document).scrollTop(),i=e("#header"),g=(i.height()+i.offset().top)-f;if(g>=0){h.data.css({top:g,position:"fixed"})}else{h.data.css({top:0,left:0,position:"fixed"})}}e(function(){if(e(c).data("is-sidebar")===true){new a.SideBar({sidebarContents:c})}})}(jQuery,window.NL=(window.NL||{})));;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher_old.js' */
var APPSWITCHER_TRIGGER_CLICK="appswitcher.trigger.click";var APPSWITCHER_DROPDOWN_SHOW="appswitcher.dropdown.show";var APPSWITCHER_DROPDOWN_DISPLAY_ERROR="appswitcher.dropdown.display.error";var APPSWITCHER_APP_LINK_CLICK="appswitcher.app.link.click";var APPSWITCHER_CONFIGURE_LINK_CLICK="appswitcher.configure.link.click";(function(c,f){var b="isAppSuggestionAvailable";var d="isSiteAdminUser";var e="isUserAdmin";var a="#app-switcher";f.AppSwitcher=function(j){var l=AJS.contextPath()+"/plugins/servlet/customize-application-navigator";var k="unified.usermanagement";var m=this;this.$dropdown=null;j=c.extend({dropdownContents:null},j);this.getLinks=function(){return c.ajax({url:AJS.contextPath()+"/rest/menu/latest/appswitcher",cache:false,dataType:"json"}).done(this.updateDropdown).fail(this.showError)};this.getDropdown=function(){if(!this.$dropdown){this.$dropdown=c(j.dropdownContents);this.envData=this.$dropdown.data("environment")}return this.$dropdown};this.updateDropdown=function(n){c(function(){m.getDropdown().html(navlinks.templates.appswitcher_old.applications({apps:n,showAdminLink:m.envData[e],adminLink:l}));m.bindAnalyticsHandlers();if(m.envData[b]===true){m.handleSuggestionApps(n)}})};this.bindAnalyticsHandlers=function(){c(".app-switcher-trigger").on("click",function(){AJS.trigger("analyticsEvent",{name:APPSWITCHER_TRIGGER_CLICK})});c("#app-switcher").on("aui-dropdown2-show",function(){AJS.trigger("analyticsEvent",{name:APPSWITCHER_DROPDOWN_SHOW})});c("#app-switcher .nav-link").on("click",function(){var p="custom";var q=c(this).find("a");var o=q.attr("href");var n=window.location.hostname;if(o&&o.indexOf("bitbucket.org")>-1){p="bitbucket-cloud"}else{if(o.indexOf(n+"/wiki")>-1){p="confluence"}else{if(o.indexOf(n+"/build")>-1){p="bamboo"}else{if(o.indexOf(n)>-1){p="jira"}}}}AJS.trigger("analyticsEvent",{name:APPSWITCHER_APP_LINK_CLICK,data:{product:p}})});c(".nav-link-edit-wrapper").on("click",function(){AJS.trigger("analyticsEvent",{name:APPSWITCHER_CONFIGURE_LINK_CLICK})})};this.isBillingSystemEnabled=function(){return(this.envData[d]===true)&&AJS.DarkFeatures.isEnabled(k)};this.handleSuggestionApps=function(q){var r=_.map(q,function(s){return s.applicationType.toLowerCase()});var o=c("<div id='app-switcher-suggestion-apps' class='aui-dropdown2-section'/>");o.html(navlinks.templates.appswitcher_old.suggestionApps);var p=o.find(".suggestion-apps");var n=false;_.each(g,function(s){if(!_.contains(r,s.appName)){n=true;p.append(navlinks.templates.appswitcher_old.suggestionApp({suggestionApp:s,isBillingSystemEnabled:m.isBillingSystemEnabled()}))}});if(!n){return}c("#app-switcher").append(o);c(".app-discovery-suggestion-app").click(function(){var t=c(this).find("a");var s;if(m.envData[d]===true){s="appswitcher.discovery.siteadmin.select.inproduct."}else{s="appswitcher.discovery.user.select."}s=s+t.attr("id").toLowerCase();AJS.trigger("analytics",{name:s})});c(".app-discovery-suggestion-app").hover(function(){c(this).find("a").removeClass("active").removeClass("aui-dropdown2-active")});c(".app-discovery-cancel-button").click(function(){AJS.trigger("analytics",{name:"appswitcher.discovery.nothanks.button.click"});i(h,"true");o.remove()})};this.showError=function(){c(function(){AJS.trigger("analyticsEvent",{name:APPSWITCHER_DROPDOWN_DISPLAY_ERROR});m.getDropdown().html(navlinks.templates.appswitcher_old.error()).off(".appswitcher").on("click.appswitcher",".app-switcher-retry",c.proxy(m.retryLoading,m))})};this.retryLoading=function(n){this.getDropdown().html(navlinks.templates.appswitcher_old.loading());this.getLinks();n&&n.stopPropagation()};this.getLinks()};var h="key-no-thanks";var g=[{appName:"jira",appDesc:"Issue & Project Tracking Software",discoveryUrl:"https://www.atlassian.com/software/jira",billingSystemDiscoveryUrl:"/admin/billing/addapplication"},{appName:"confluence",appDesc:"Collaboration and content sharing",discoveryUrl:"https://www.atlassian.com/software/confluence",billingSystemDiscoveryUrl:"/admin/billing/addapplication?product=confluence.ondemand"},{appName:"bamboo",appDesc:"Continuous integration",discoveryUrl:"https://www.atlassian.com/software/bamboo",billingSystemDiscoveryUrl:"/admin/billing/addapplication?product=bamboo.ondemand"}];var i=function(j,k){c.ajax({url:AJS.contextPath()+"/rest/menu/latest/userdata/",type:"PUT",contentType:"application/json",data:JSON.stringify({key:j,value:k})})};c(function(){if(c(a).data("is-switcher")===true){new f.AppSwitcher({dropdownContents:a})}})}(jQuery,window.NL=(window.NL||{})));;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher_old.soy' */
// This file was automatically generated from appswitcher_old.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace navlinks.templates.appswitcher_old.
 */

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.appswitcher_old == 'undefined') { navlinks.templates.appswitcher_old = {}; }


navlinks.templates.appswitcher_old.applications = function(opt_data, opt_ignored) {
  return '' + navlinks.templates.appswitcher_old.applicationsSection({list: opt_data.apps, listClass: 'nav-links', showDescription: opt_data.showDescription}) + ((opt_data.custom) ? navlinks.templates.appswitcher_old.applicationsSection({list: opt_data.custom, showDescription: opt_data.showDescription}) : '') + ((opt_data.showAdminLink) ? navlinks.templates.appswitcher_old.adminSection(opt_data) : '');
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.applications.soyTemplateName = 'navlinks.templates.appswitcher_old.applications';
}


navlinks.templates.appswitcher_old.applicationsSection = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.list.length > 0) {
    var param19 = '<ul' + ((opt_data.listClass) ? ' class="' + soy.$$escapeHtml(opt_data.listClass) + '"' : '') + '>';
    var linkList27 = opt_data.list;
    var linkListLen27 = linkList27.length;
    for (var linkIndex27 = 0; linkIndex27 < linkListLen27; linkIndex27++) {
      var linkData27 = linkList27[linkIndex27];
      param19 += navlinks.templates.appswitcher_old.applicationsItem(soy.$$augmentMap(linkData27, {showDescription: opt_data.showDescription}));
    }
    param19 += '</ul>';
    output += aui.dropdown2.section({content: param19});
  }
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.applicationsSection.soyTemplateName = 'navlinks.templates.appswitcher_old.applicationsSection';
}


navlinks.templates.appswitcher_old.applicationsItem = function(opt_data, opt_ignored) {
  return '<li class="nav-link' + ((opt_data.self) ? ' nav-link-local' : '') + '"><a href="' + soy.$$escapeHtml(opt_data.link) + '" class="aui-dropdown2-radio ' + ((opt_data.self) ? 'aui-dropdown2-checked' : '') + '" title="' + soy.$$escapeHtml(opt_data.link) + '"><span class="nav-link-label">' + soy.$$escapeHtml(opt_data.label) + '</span>' + ((opt_data.showDescription && opt_data.description) ? '<span class="nav-link-description">' + soy.$$escapeHtml(opt_data.description) + '</span>' : '') + '</a></li>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.applicationsItem.soyTemplateName = 'navlinks.templates.appswitcher_old.applicationsItem';
}


navlinks.templates.appswitcher_old.adminSection = function(opt_data, opt_ignored) {
  return '' + aui.dropdown2.section({content: '<ul class="nav-links"><li><a class="nav-link-edit-wrapper" href="' + soy.$$escapeHtml(opt_data.adminLink) + '"><span class="nav-link-edit">' + soy.$$filterNoAutoescape('Configure\x26hellip;') + '</span></a></li></ul>'});
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.adminSection.soyTemplateName = 'navlinks.templates.appswitcher_old.adminSection';
}


navlinks.templates.appswitcher_old.error = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-error">' + soy.$$filterNoAutoescape('Something went wrong, please \x3cspan class\x3d\x22app-switcher-retry\x22\x3etry again\x3c/span\x3e.') + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.error.soyTemplateName = 'navlinks.templates.appswitcher_old.error';
}


navlinks.templates.appswitcher_old.loading = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-loading">' + soy.$$filterNoAutoescape('Loading\x26hellip;') + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.loading.soyTemplateName = 'navlinks.templates.appswitcher_old.loading';
}


navlinks.templates.appswitcher_old.trigger = function(opt_data, opt_ignored) {
  return '<span class="aui-icon aui-icon-small aui-iconfont-appswitcher">' + soy.$$escapeHtml('Linked Applications') + '</span>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.trigger.soyTemplateName = 'navlinks.templates.appswitcher_old.trigger';
}


navlinks.templates.appswitcher_old.switcher = function(opt_data, opt_ignored) {
  var output = '';
  if (true) {
    var loadingContent__soy81 = '' + navlinks.templates.appswitcher_old.loading(null);
    var triggerContent__soy83 = '' + navlinks.templates.appswitcher_old.trigger(null);
    output += aui.dropdown2.dropdown2({menu: {id: 'app-switcher', content: loadingContent__soy81, extraClasses: 'aui-style-default', extraAttributes: {'data-environment': {}, 'data-is-switcher': 'true'}}, trigger: {showIcon: false, content: triggerContent__soy83, extraClasses: 'app-switcher-trigger', extraAttributes: {href: '#app-switcher'}}});
  }
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.switcher.soyTemplateName = 'navlinks.templates.appswitcher_old.switcher';
}


navlinks.templates.appswitcher_old.suggestionApp = function(opt_data, opt_ignored) {
  var output = '';
  var href__soy89 = opt_data.isBillingSystemEnabled == true ? opt_data.suggestionApp.billingSystemDiscoveryUrl : opt_data.suggestionApp.discoveryUrl;
  output += '<li class="app-discovery-suggestion-app"><a id="' + soy.$$escapeHtml(opt_data.suggestionApp.appName) + '" href="' + soy.$$escapeHtml(href__soy89) + '" class="app-discovery-link aui-icon-container app-discovery-' + soy.$$escapeHtml(opt_data.suggestionApp.appName) + '-product-icon" title="' + soy.$$escapeHtml(href__soy89) + '" target="_blank"/><div class="app-discovery-small">' + soy.$$escapeHtml(opt_data.suggestionApp.appDesc) + '</div></li>';
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.suggestionApp.soyTemplateName = 'navlinks.templates.appswitcher_old.suggestionApp';
}


navlinks.templates.appswitcher_old.suggestionApps = function(opt_data, opt_ignored) {
  return '<ul class=\'nav-links suggestion-apps\'><li><span class=\'app-discovery-suggest-title nav-link-label\'><h6>' + soy.$$escapeHtml('Try other Atlassian apps') + '</h6></span></li></ul><div class=\'buttons-container app-discovery-suggest-apps-buttons\'><div class=\'buttons\'><button class=\'aui-button aui-button-link app-discovery-cancel-button\' name=\'cancel\' accesskey=\'c\' href=\'#\'>' + soy.$$escapeHtml('Don\x27t show this again') + '</button></div></div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.suggestionApps.soyTemplateName = 'navlinks.templates.appswitcher_old.suggestionApps';
}
;
;
/* module-key = 'com.atlassian.jira.jira-header-plugin:header-templates', location = 'soy/headerDropdown.soy' */
// This file was automatically generated from headerDropdown.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Menu.Dropdowns.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Menu == 'undefined') { JIRA.Templates.Menu = {}; }
if (typeof JIRA.Templates.Menu.Dropdowns == 'undefined') { JIRA.Templates.Menu.Dropdowns = {}; }


JIRA.Templates.Menu.Dropdowns.dropdown2Fragment = function(opt_data, opt_ignored) {
  var output = '';
  var sectionList3 = opt_data.sections;
  var sectionListLen3 = sectionList3.length;
  for (var sectionIndex3 = 0; sectionIndex3 < sectionListLen3; sectionIndex3++) {
    var sectionData3 = sectionList3[sectionIndex3];
    output += JIRA.Templates.Menu.Dropdowns.dropdown2Section(sectionData3);
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Menu.Dropdowns.dropdown2Fragment.soyTemplateName = 'JIRA.Templates.Menu.Dropdowns.dropdown2Fragment';
}


JIRA.Templates.Menu.Dropdowns.dropdown2Section = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '';
  var hasItems__soy7 = opt_data.items && opt_data.items.length > 0;
  if (hasItems__soy7) {
    output += '<div' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-dropdown2-section' + ((opt_data.style) ? soy.$$escapeHtml(opt_data.style) : '') + '" >' + ((opt_data.label) ? '<strong>' + soy.$$escapeHtml(opt_data.label) + '</strong>' : '') + '<ul class="aui-list-truncate">';
    var itemList27 = opt_data.items;
    var itemListLen27 = itemList27.length;
    for (var itemIndex27 = 0; itemIndex27 < itemListLen27; itemIndex27++) {
      var itemData27 = itemList27[itemIndex27];
      output += '<li' + ((itemData27.id) ? ' id="' + soy.$$escapeHtml(itemData27.id) + '"' : '') + ((itemData27.style) ? ' class="' + soy.$$escapeHtml(itemData27.style) + '"' : '') + '>' + JIRA.Templates.Menu.Dropdowns.dropdown2Item(itemData27) + '</li>';
    }
    output += '</ul></div>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Menu.Dropdowns.dropdown2Section.soyTemplateName = 'JIRA.Templates.Menu.Dropdowns.dropdown2Section';
}


JIRA.Templates.Menu.Dropdowns.dropdown2Item = function(opt_data, opt_ignored) {
  var output = '<a href="' + soy.$$escapeHtml(opt_data.url) + '"' + ((opt_data.parameters && opt_data.parameters.trackClick) ? ' data-track-click="' + soy.$$escapeHtml(opt_data.parameters.trackClick) + '"' : '') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '_lnk"' : '') + ' class="' + ((opt_data.iconUrl) ? 'aui-icon-container' : '') + ((opt_data.parameters && opt_data.parameters['class']) ? ' ' + soy.$$escapeHtml(opt_data.parameters['class']) : '') + '"';
  if (opt_data.parameters) {
    var keyList69 = soy.$$getMapKeys(opt_data.parameters);
    var keyListLen69 = keyList69.length;
    for (var keyIndex69 = 0; keyIndex69 < keyListLen69; keyIndex69++) {
      var keyData69 = keyList69[keyIndex69];
      output += (keyData69 != 'class' && keyData69 != 'iconurl') ? ' ' + soy.$$escapeHtml(keyData69) + '="' + soy.$$escapeHtml(opt_data.parameters[keyData69]) + '"' : '';
    }
  }
  output += '>' + ((opt_data.iconUrl) ? '<img class="icon" src="' + soy.$$escapeHtml(opt_data.iconUrl) + '" alt="" />' : '') + soy.$$escapeHtml(opt_data.label) + '</a>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Menu.Dropdowns.dropdown2Item.soyTemplateName = 'JIRA.Templates.Menu.Dropdowns.dropdown2Item';
}
;
;
/* module-key = 'com.atlassian.jira.jira-header-plugin:analytics-header', location = 'js/header-analytics.js' */
define("jira/header/init-header-analytics",["jira/analytics","jira/util/logger","jquery"],function(n,t,e){"use strict";function i(n,t){var e=void 0;return n.forEach(function(n){n.id===t&&(e=n.analyticEventKey)}),e}function o(o){var m=e(o);m.on("click","#logo",function(){n.send({name:a+"home"}),t.trace(r)}),m.on("aui-dropdown2-show",l,function(){var n=e(this).attr("id");c(u,n)&&d(n,u,".open")}),m.on("aui-dropdown2-hide",l,function(){var n=e(this).attr("id");c(u,n)&&d(n,u,".close")}),m.on("aui-dropdown2-show",s,function(){var n=e(this);n.trigger("aui-dropdown2-show-before"),n.trigger("aui-dropdown2-show-after")}),m.on("click",y,function(){var n=this.getAttribute("aria-controls");c(u,n)&&d(n,u,".click")}),m.on("click",".aui-dropdown2 .aui-dropdown2-section a",function(o){var c=e(o.target).closest(l).first();if(null!==c){var d=c.find("a").index(o.target),s=c.attr("id"),y=i(u,s);n.send({name:a+y+".item.click",itemIndex:d}),t.trace(r)}})}var a="jira.navigation.header.",r="jira.header.analytics.event",c=function(n,t){return n.some(function(n){return n.id===t})},d=function(e,o,c){var d=i(o,e),u=a+d+c;n.send({name:u}),t.trace(r)},u=[{id:"home_link-content",analyticEventKey:"dashboards"},{id:"browse_link-content",analyticEventKey:"projects"},{id:"find_link-content",analyticEventKey:"issues"},{id:"tempo_menu-content",analyticEventKey:"tempo"},{id:"bonfire_top_menu_dropdown-content",analyticEventKey:"capture"},{id:"greenhopper_menu-content",analyticEventKey:"boards"},{id:"plugins-jira-webitem-main-content",analyticEventKey:"portfolio"},{id:"system-help-menu-content",analyticEventKey:"help"},{id:"system-admin-menu-content",analyticEventKey:"admin"}],s="#system-help-menu-content, #user-options-content, #system-admin-menu-content",l=u.map(function(n){return"#"+n.id}).join(", "),y=u.reduce(function(n,t){return n+"a.aui-dropdown2-trigger[aria-owns="+t.id+"]"},"");return{init:o}});;
;
/* module-key = 'com.atlassian.jira.jira-header-plugin:jira-header-assets', location = 'js/init-dropdown2.js' */
define("jira/header/dropdown/element",["jira/ajs/ajax/smart-ajax","jira/jquery/deferred","jira/skate","jira/util/data/meta","wrm/context-path","jquery"],function(e,a,t,o,n,r){"use strict";return t("aui-dropdown2-ajax",{type:t.type.CLASSNAME,attached:function(t){function d(){document.activeElement===s.get(0)&&u.get(0).focusItem(0)}function i(){s.data("kbd-interacted",!1)}var u=r(document.getElementById(t.getAttribute("aria-controls"))),s=r(t),c=u.data("aui-dropdown2-ajax-key");s.on("keydown.aui-dropdown2-ajax",function(){s.data("kbd-interacted",!0),setTimeout(i,4)}),u.on("aui-dropdown2-show-after.aui-dropdown2-ajax",i),i(),u.on("aui-dropdown2-show.aui-dropdown2-ajax",function(){if(u.trigger("aui-dropdown2-show-before"),c){var t=new a,i=new a;setTimeout(function(){t.resolve(s.data("kbd-interacted"))},0),u.empty(),u.addClass("aui-dropdown2-loading"),s.attr("aria-busy","true"),e.makeRequest({url:n()+"/rest/api/1.0/menus/"+c,data:{inAdminMode:o.getBoolean("in-admin-mode")},dataType:"json",cache:!1,success:function(e){i.resolve(e)},error:i.reject}),r.when(t,i).done(function(e,a){u.html(JIRA.Templates.Menu.Dropdowns.dropdown2Fragment(a)),e&&setTimeout(d,0)}).always(function(){s.attr("aria-busy","false"),u.removeClass("aui-dropdown2-loading"),u.trigger("aui-dropdown2-show-after")})}else u.trigger("aui-dropdown2-show-after")})},detached:function(e){var a=r(document.getElementById(e.getAttribute("aria-controls"))),t=r(e);a.off(".aui-dropdown2-ajax"),t.off(".aui-dropdown2-ajax")}})}),function(e){"use strict";e(document).on("aui-responsive-menu-item-created",".aui-header.aui-dropdown2-trigger-group",function(a){var t=a.originalEvent.detail;e(t.originalItem).find("> .aui-dropdown2-ajax").length>0&&e(t.newItem).find("> .aui-dropdown2-trigger").addClass("aui-dropdown2-ajax")})}(require("jquery"));;
;
/* module-key = 'com.atlassian.jira.jira-header-plugin:jira-header-assets', location = 'js/app-switcher-analytics.js' */
define("jira/header/init-app-switcher-analytics",["jira/analytics","jquery"],function(i,n){"use strict";function a(a){var e=n(a);e.on("aui-dropdown2-show-before","#app-switcher",function(){i.send({name:"navigation.header.appswitcher.open"})}),e.on("click","#app-switcher a, #app-switcher button",function(a){var e,t=n(a.target),o=t.closest("li").index();t.is(".nav-link-edit")?e="configure":t.is(".app-discovery-link")?e=this.id?this.id:"unknown.app.discovery":t.is(".app-discovery-cancel-button")?(e="dont.show",o=0):e="application",i.send({name:"navigation.header.appswitcher.click",data:{position:o,linkType:e}})}),e.on("aui-dropdown2-hide","#app-switcher",function(){i.send({name:"navigation.header.appswitcher.close"})})}return{init:a}});;
;
/* module-key = 'com.atlassian.jira.jira-header-plugin:jira-header', location = 'js/init-header.js' */
require(["jira/header/dropdown/element","jira/header/init-header-analytics","jira/header/init-app-switcher-analytics"],function(e,i,t){"use strict";i.init(document),t.init(document)});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:underscore', location = 'js/lib/underscore-adapter.js' */
define("workflow-designer/underscore",["underscore"],function(A){return A});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer-loader', location = 'js/require.js' */
define("workflow-designer/application-loader",["wrm/require","require"],function(A,B){return{load:function C(D){return A(["wrc!com.atlassian.jira.plugins.jira-workflow-designer.workflow-designer"],function(){D&&D(B("workflow-designer/application"))})}}});AJS.namespace("JIRA.WorkflowDesigner.require",null,require("workflow-designer/application-loader").load);;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer-templates', location = 'js/templates-amd.js' */
define("workflow-designer/templates",[],function(){AJS.namespace("JIRA.WorkflowDesigner.Templates");return JIRA.WorkflowDesigner.Templates});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:dialog', location = 'js/util/DialogSizeCalculator.js' */
define("workflow-designer/dialog-size-calculator",["workflow-designer/underscore","jquery"],function(A,B){return{DISTANCE_FROM_EDGE:100,calculateDialogSize:function(D,C){this.dialog=D;C=A.defaults(C||{},{windowHeight:this._getWindowHeight(),windowWidth:this._getWindowWidth(),dialogHeaderHeight:this._getDialogHeaderHeight(),dialogFooterHeight:this._getDialogFooterHeight()});return{height:this._calculateDialogHeight(C.windowHeight,C.dialogHeaderHeight,C.dialogFooterHeight),width:this._calculateDialogWidth(C.windowWidth)}},_calculateDialogHeight:function(E,C,D){return E-C-D-(this.DISTANCE_FROM_EDGE*2)},_calculateDialogWidth:function(C){return C-(this.DISTANCE_FROM_EDGE*2)},_getWindowHeight:function(){return B(window).height()},_getWindowWidth:function(){return B(window).width()},_getDialogHeaderHeight:function(){return this.dialog.$popupHeading.outerHeight()},_getDialogFooterHeight:function(){return this.dialog.$buttonContainer.outerHeight()}}});AJS.namespace("JIRA.WorkflowDesigner.DialogSizeCalculator",null,require("workflow-designer/dialog-size-calculator"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:dialog', location = 'js/views/dialogs/Dialog.js' */
define("workflow-designer/dialog",["workflow-designer/dialog-size-calculator","jira/dialog/form-dialog","workflow-designer/application-loader","workflow-designer/templates","jira/dialog/dialog","workflow-designer/underscore","jquery"],function(A,F,E,D,B,C,G){return F.extend({init:function(H){C.bindAll(this,"_sizeAndPositionDialog");H=C.defaults({},H,{content:this.createDialogContent,isDraft:false,onContentRefresh:this._showWorkflowDesigner,widthClass:"large"});this.options=H;this.sizeAndPositionDialog=C.throttle(this._sizeAndPositionDialog,100);this._super(H);this.onContentReady(this._addLabelHint)},createDialogContent:function(H){H(D.Dialog.workflowDialog({title:C.result(this.options,"workflowId")}))},show:function(){this._super.apply(this,arguments);G(window).on("resize",this.sizeAndPositionDialog)},hide:function(){this._designer&&this._designer.destroy();this._super.apply(this,arguments);G(window).off("resize",this.sizeAndPositionDialog)},_sizeAndPositionDialog:function(){var H,I;if(B.current===this){I=A.calculateDialogSize(this);this.options.width=I.width;H=this.$popup.find(".form-body");H.css({height:I.height,maxHeight:""});this._positionInCenter()}},_showWorkflowDesigner:function(){var H=this;this._sizeAndPositionDialog();E.load(function(I){if(H.isCurrent()){H._designer=new I({actions:false,element:H.get$popup().find(".form-body"),immutable:true,draft:C.result(H.options,"isDraft"),layoutData:C.result(H.options,"layoutData"),workflowId:C.result(H.options,"workflowId"),currentStepId:C.result(H.options,"currentStepId")})}})},_addLabelHint:function(){this.getButtonsContainer().prepend(D.Dialog.labelMouseOverHint())}})});AJS.namespace("JIRA.WorkflowDesigner.Dialog",null,require("workflow-designer/dialog"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:dialog', location = 'soy/Dialog.soy' */
// This file was automatically generated from Dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.WorkflowDesigner.Templates.Dialog.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.WorkflowDesigner == 'undefined') { JIRA.WorkflowDesigner = {}; }
if (typeof JIRA.WorkflowDesigner.Templates == 'undefined') { JIRA.WorkflowDesigner.Templates = {}; }
if (typeof JIRA.WorkflowDesigner.Templates.Dialog == 'undefined') { JIRA.WorkflowDesigner.Templates.Dialog = {}; }


JIRA.WorkflowDesigner.Templates.Dialog.workflowDialog = function(opt_data, opt_ignored) {
  return '<div class="aui-dialog-content"><h2 class="dialog-title">' + soy.$$escapeHtml(opt_data.title) + '</h2><div class="form-body"></div></div>';
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.Dialog.workflowDialog.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.Dialog.workflowDialog';
}


JIRA.WorkflowDesigner.Templates.Dialog.labelMouseOverHint = function(opt_data, opt_ignored) {
  return '<div class="buttons-container-left"><small>' + soy.$$escapeHtml('Mouse over objects to see transition names.') + '</small></div>';
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.Dialog.labelMouseOverHint.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.Dialog.labelMouseOverHint';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer-browser-is-supported', location = 'js/browserIsSupported.js' */
define("workflow-designer/browser-support",["jira/util/navigator"],function(A){return{browserIsSupported:function B(){return !(A.isIE()&&parseInt(A.majorVersion(),10)<10)}}});AJS.namespace("JIRA.WorkflowDesigner.browserIsSupported",null,require("workflow-designer/browser-support").browserIsSupported);;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:view-workflow-project-admin', location = 'soy/ProjectAdminWorkflows.soy' */
// This file was automatically generated from ProjectAdminWorkflows.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.WorkflowDesigner.Templates.ProjectAdminWorkflows.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.WorkflowDesigner == 'undefined') { JIRA.WorkflowDesigner = {}; }
if (typeof JIRA.WorkflowDesigner.Templates == 'undefined') { JIRA.WorkflowDesigner.Templates = {}; }
if (typeof JIRA.WorkflowDesigner.Templates.ProjectAdminWorkflows == 'undefined') { JIRA.WorkflowDesigner.Templates.ProjectAdminWorkflows = {}; }


JIRA.WorkflowDesigner.Templates.ProjectAdminWorkflows.link = function(opt_data, opt_ignored) {
  return '<a data-workflowname="' + soy.$$escapeHtml(opt_data.workflowName) + '" class="project-config-workflow-designer-link new-workflow-designer" href="#" data-mode="new-diagram"><span>' + soy.$$escapeHtml('diagram') + '</span></a>';
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.ProjectAdminWorkflows.link.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.ProjectAdminWorkflows.link';
}
;