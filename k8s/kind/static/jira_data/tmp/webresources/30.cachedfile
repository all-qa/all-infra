;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:commons_runtime', location = 'dist/runtime.9995922c9ff8e7e24e64.js' */
(function(a){function b(c){if(d[c])return d[c].exports;var e=d[c]={i:c,l:!1,exports:{}};return a[c].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c=window.jiraDevelopmentIntegrationPluginJsonp;window.jiraDevelopmentIntegrationPluginJsonp=function(d,f,g){for(var h,j,k,l=0,i=[];l<d.length;l++)j=d[l],e[j]&&i.push(e[j][0]),e[j]=0;for(h in f)Object.prototype.hasOwnProperty.call(f,h)&&(a[h]=f[h]);for(c&&c(d,f,g);i.length;)i.shift()();if(g)for(l=0;l<g.length;l++)k=b(b.s=g[l]);return k};var d={},e={runtime:0};b.e=function(a){function c(){h.onerror=h.onload=null,clearTimeout(i);var b=e[a];0!==b&&(b&&b[1](new Error("Loading chunk "+a+" failed.")),e[a]=void 0)}var d=e[a];if(0===d)return new Promise(function(a){a()});if(d)return d[2];var f=new Promise(function(b,c){d=e[a]=[b,c]});d[2]=f;var g=document.getElementsByTagName("head")[0];if({0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0,10:!0,11:!0,12:!0,13:!0,14:!0,15:!0}[a])return WRM.require("wrc!com.atlassian.jira.plugins.jira-development-integration-plugin:"+a),f;var h=document.createElement("script");h.type="text/javascript",h.charset="utf-8",h.async=!0,h.timeout=12e4,b.nc&&h.setAttribute("nonce",b.nc),h.src=b.p+""+({"card-module":"card-module","column-module":"column-module","devstatus-admin":"devstatus-admin","devstatus-admin-summary":"devstatus-admin-summary","devstatus-triggers":"devstatus-triggers","devstatus-view-issue":"devstatus-view-issue",releasereport:"releasereport","smart-commits":"smart-commits"}[a]||a)+"."+{0:"075180f0a8e207fec1f8",1:"fec0007dbcd89e6f3143",2:"195e7c6904d140d50b77",3:"0d345f285ffd2a7d8916",4:"05687710bd8a39ec358a",5:"abe8ed1052b516f3194d",6:"5ca3fd6a714624a67e6b",7:"1177d165aa98a228b4db",8:"4edca695b89465692a9a",9:"7fa01b8b3cd68c910671",10:"5e66066b698ab99da844",11:"4dbe74eebbcb499003a0",12:"0bcf0dde506c503eb999",13:"81f895f757db3e200dae",14:"2f8c736245a73b12a7d7",15:"9f9adc450b44a69ca456","card-module":"90d17a033f0bf73f48ff","column-module":"8ef50e6cb5d90eb66cd2","devstatus-admin":"762acd76e8a530cfb7c5","devstatus-admin-summary":"f0721f96e26c1970a60d","devstatus-triggers":"68cb1b64ec4835e567b8","devstatus-view-issue":"db31d611e52e0febdb0b",releasereport:"6e5d460bc7d74266f2c3","smart-commits":"c6e3879f47ab75ffa3ca"}[a]+".js";var i=setTimeout(c,12e4);return h.onerror=h.onload=c,g.appendChild(h),f},b.m=a,b.c=d,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a["default"]}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="",b.oe=function(a){throw console.error(a),a},"undefined"!=typeof AJS&&(b.p=AJS.contextPath()+"/download/resources/com.atlassian.jira.plugins.jira-development-integration-plugin:assets-DEV_PSEUDO_HASH/")})([]);
//# sourceMappingURL=runtime.9995922c9ff8e7e24e64.js.map;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:entrypoint-devstatus-admin-summary', location = 'dist/devstatus-admin-summary.f0721f96e26c1970a60d.js' */
jiraDevelopmentIntegrationPluginJsonp(["devstatus-admin-summary"],{"./js/admin/devstatus-admin-summary.js":function(a,b,c){"use strict";var d=c("jira.webresources:jquery/require('jquery')"),e=c("./js/analytics/devstatus-analytics.js");d(function(){e.AdminSummaryAnalytics.initialize()})},"./js/analytics/devstatus-analytics.js":function(a,b,c){"use strict";var d,e,f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};d=[c("jira.webresources:jira-global/require('jira/ajs/dark-features')"),c("jira.webresources:ajs-underscorejs-amd-shim/require('underscore')"),c("jira.webresources:jquery/require('jquery')"),c,b],e=function(a,b,d,e,g){function h(){return!a.isEnabled("jira.plugin.devstatus.analytics.disabled")}var i=c("jira.webresources:jira-events/require('jira/util/events')"),j=c("jira.webresources:jira-events/require('jira/util/events/types')"),k=c("jira.webresources:jira-metadata/require('jira/util/data/meta')"),l=c("./js/util/analytics.js"),m=".edit-permission-link";g.Analytics={fireEvent:function(a,b){if(h()){l.sendEvent("devstatus."+a,b)}},fireAgileDevStatusLinkClicked:function(){return g.Analytics.fireEvent("panel.agile.icon.clicked")}},g.LabsAnalytics={fireLabsEvent:function(a){var b=a?"on":"off";return g.Analytics.fireEvent("labs.toggle."+b)}},g.SummaryAnalytics={fireSummaryShownEvent:function(a,c,d,e){var f=a?"assignee":"nonassignee",h=b.extend({},e);return g.Analytics.fireEvent("summary.shown."+f,h)},fireSummaryClickedEvent:function(a,b){var c=k.get("fusion-analytics-new-context-link"),e=".clicked";return c&&(k.set("fusion-analytics-new-context-link",void 0),e+=".newcontext"),g.Analytics.fireEvent(a+".summary"+e,d.extend({},b))},fireDetailTabClicked:function(a,b){return g.Analytics.fireEvent(b+".detail."+a+".tab.clicked")}},g.BuildsAnalytics={fireSummaryClickedEvent:function(a){return g.SummaryAnalytics.fireSummaryClickedEvent("builds",a)},fireDetailProjectClicked:function(){return g.Analytics.fireEvent("builds.detail.project.clicked")},fireDetailPlanClicked:function(){return g.Analytics.fireEvent("builds.detail.plan.clicked")},fireDetailBuildClicked:function(){return g.Analytics.fireEvent("builds.detail.build.clicked")}},g.DeploymentsAnalytics={fireSummaryClickedEvent:function(a){return g.SummaryAnalytics.fireSummaryClickedEvent("deployments",a)},fireDetailProjectClicked:function(){return g.Analytics.fireEvent("deployments.detail.project.clicked")},fireDetailEnvironmentClicked:function(){return g.Analytics.fireEvent("deployments.detail.environment.clicked")},fireDetailReleaseClicked:function(){return g.Analytics.fireEvent("deployments.detail.release.clicked")}},g.CommitsAnalytics={fireSummaryClickedEvent:function(a){return g.SummaryAnalytics.fireSummaryClickedEvent("commits",a)},fireDetailRepoClicked:function(a){return g.Analytics.fireEvent("commits.detail."+a+".repo.clicked")},fireDetailCommitClicked:function(a){return g.Analytics.fireEvent("commits.detail."+a+".commit.clicked")},fireDetailTabClicked:function(a){return g.SummaryAnalytics.fireDetailTabClicked(a,"commits")},fireDetailFileExpandedClicked:function(a){return g.Analytics.fireEvent("commits.detail."+a+".file.expanded.clicked")},fireDetailFilesExpandedClicked:function(a){return g.Analytics.fireEvent("commits.detail."+a+".files.expanded.clicked")},fireDetailFileClicked:function(a){return g.Analytics.fireEvent("commits.detail."+a+".file.clicked")},fireDetailReviewsShown:function(a){return g.Analytics.fireEvent("commits.detail."+a+".reviews.shown")},fireDetailReviewClicked:function(a){return g.Analytics.fireEvent("commits.detail."+a+".review.clicked")},fireDetailBranchesShown:function(a){return g.Analytics.fireEvent("commits.detail."+a+".branches.shown")},fireDetailCreateReviewClicked:function(a,b){return g.Analytics.fireEvent("commits.detail."+a+".review.create"+(b?".all":""))}},g.ReviewsAnalytics={fireSummaryClickedEvent:function(a){return g.SummaryAnalytics.fireSummaryClickedEvent("reviews",a)},fireDetailReviewClicked:function(){return g.Analytics.fireEvent("reviews.detail.review.clicked")}},g.BranchesAnalytics={fireSummaryClickedEvent:function(a){return g.SummaryAnalytics.fireSummaryClickedEvent("branches",a)},_fireDetailClickedEvent:function(a,b){return g.Analytics.fireEvent("branches.detail."+a+"."+b+".clicked")},_fireDetailClickedEventAssignable:function(a,b,c,d){"undefined"!=typeof c&&"undefined"!=typeof d&&(c?a+=".assignee":(a+=".nonassignee",a+=d?".assignable":".nonassignable")),this._fireDetailClickedEvent(b,a)},fireDetailRepoClicked:function(a){this._fireDetailClickedEvent(a,"repo")},fireDetailBranchClicked:function(a){this._fireDetailClickedEvent(a,"branch")},fireDetailPullRequestLozengeClick:function(a){this._fireDetailClickedEvent(a,"pullrequest.lozenge")},fireDetailReviewLozengeClick:function(a){this._fireDetailClickedEvent(a,"review.lozenge")},fireDetailTabClicked:function(a){return g.SummaryAnalytics.fireDetailTabClicked(a,"branches")},fireDetailCreatePullRequestClicked:function(a,b,c){this._fireDetailClickedEventAssignable("pullrequest.create",a,b,c)},fireDetailCreateReviewClicked:function(a,b,c){this._fireDetailClickedEventAssignable("review.create",a,b,c)}},g.PullRequestsAnalytics={fireSummaryClickedEvent:function(a){return g.SummaryAnalytics.fireSummaryClickedEvent("pullrequests",a)},fireDetailPullRequestClicked:function(a){return g.Analytics.fireEvent("pullrequests.detail."+a+".pullrequest.clicked")},fireDetailTabClicked:function(a){return g.SummaryAnalytics.fireDetailTabClicked(a,"pullrequests")}},g.LearnMoreAnalytics={fireLearnMoreEvent:function(a,b){return g.Analytics.fireEvent("learnmore."+a,b)}},g.CtaDialogAnalytics={issueDetails:{},fireCreateBranchEvent:function(a,b){return b="object"===("undefined"==typeof b?"undefined":f(b))?d.extend({},b):{},g.Analytics.fireEvent("createbranch."+a+"."+(this.issueDetails.isAssignee?"assignee":"nonassignee"),b)},_populateIssueDetails:function(a){this.issueDetails={status:""+a.data("issueStatus"),type:""+a.data("issueType"),isAssignee:a.data("isAssignee")}},_initHandler:function(a,b,c,e){if(c&&b.not(document).is(c)){var f=this;b.find(e).on("simpleClick",function(){var a=d(this);f._fireCreateBranchEvent(a)})}},_fireCreateBranchEvent:function(a){this._populateIssueDetails(a);var b="click",c=k.get("fusion-analytics-new-context-link");c&&(k.set("fusion-analytics-new-context-link",void 0),b+=".newcontext"),this.fireCreateBranchEvent(b)},initialize:function(a,c,e){if(h()){var f=this;i.bind(j.NEW_CONTENT_ADDED,b.bind(function(b,d){this._initHandler(b,d,a,c)},this)),i.bind("GH.DetailView.updated",b.bind(function(b){this._initHandler(b,d(a),a,c)},this)),d(c).on("simpleClick",function(){var a=d(this);f._fireCreateBranchEvent(a)}),d(document).on("click","#"+e+" .jira-dialog-content .target",function(){var a=d(this);f.fireCreateBranchEvent("dialog.click",{title:a.find(".title").attr("title"),applicationType:a.data("applicationType")})}),d(document).on("click","#"+e+" .jira-dialog-content button.cancel",function(){f.fireCreateBranchEvent("dialog.cancel")}),d(document).on("click",".cta-tooltip .cta-learn-more-link",function(){g.LearnMoreAnalytics.fireLearnMoreEvent("click.ctahelptipbranching")})}}},g.AdminAnalytics={fireAdminEvent:function(a,b){return g.Analytics.fireEvent("admin."+a,b)},initialize:function(){if(h()){var a=this,b=d("#project-config-panel-dev-status");b.find(m).on("click",function(){a.fireAdminEvent("editpermissionlink.config."+(0<d("ul.permissions-list li.devstatus-admin-permission-item").length?"withpermissions":"nopermissions"))}),b.find(".learn-more-link").on("click",function(){g.LearnMoreAnalytics.fireLearnMoreEvent("click.adminappvertisementlink")}),b.find("#project-config-applinks-connect").on("click",function(){a.fireAdminEvent("connect")}),b.find(".devstatus-admin-connect-button-option").on("click",function(){var b=d(this).data("key")||"unknown";a.fireAdminEvent("connect."+b)})}}},g.AdminSummaryAnalytics={initialize:function(){h()&&d("#project-config-webpanel-devstatus-admin-summary-panel").find(m).on("click",function(){g.AdminAnalytics.fireAdminEvent("editpermissionlink.summary.nopermissions")})}}}.apply(b,d),!(void 0!==e&&(a.exports=e))},"./js/util/EventPublisher.js":function(a,b,c){"use strict";var d;d=function(){return{trigger:AJS.trigger}}.call(b,c,b,a),!(void 0!==d&&(a.exports=d))},"./js/util/analytics.js":function(a,b,c){"use strict";var d,e;d=[c("./js/util/EventPublisher.js"),b],e=function(a,b){b.sendEvent=function(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};a.trigger("analyticsEvent",{name:b,data:c})}}.apply(b,d),!(void 0!==e&&(a.exports=e))},"jira.webresources:ajs-underscorejs-amd-shim/require('underscore')":function(a){a.exports=require("underscore")},"jira.webresources:jira-events/require('jira/util/events')":function(a){a.exports=require("jira/util/events")},"jira.webresources:jira-events/require('jira/util/events/types')":function(a){a.exports=require("jira/util/events/types")},"jira.webresources:jira-global/require('jira/ajs/dark-features')":function(a){a.exports=require("jira/ajs/dark-features")},"jira.webresources:jira-metadata/require('jira/util/data/meta')":function(a){a.exports=require("jira/util/data/meta")},"jira.webresources:jquery/require('jquery')":function(a){a.exports=require("jquery")}},["./js/admin/devstatus-admin-summary.js"]);
//# sourceMappingURL=devstatus-admin-summary.f0721f96e26c1970a60d.js.map;
;
/* module-key = 'com.atlassian.auiplugin:split_aui.component.dialog2', location = 'aui.chunk.350b4869e63a13191536--c8442519abab14bffe03.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.component.dialog2"],{"0+IH":function(i,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dialog2=void 0;var t=a("p4ys");Object.defineProperty(e,"dialog2",{enumerable:!0,get:function(){return function(i){return i&&i.__esModule?i:{default:i}}(t).default}}),a("AehQ"),a("ZO0i")},ZO0i:function(i,e,a){},p4ys:function(i,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=f(a("+x/D")),u=f(a("TmQU")),n=f(a("KloK")),o=f(a("jEnx")),l=f(a("6RZY")),d=f(a("+ay7"));function f(i){return i&&i.__esModule?i:{default:i}}var s={"aui-focus":"false","aui-blanketed":"true"};var c='\n        <section role="dialog" class="aui-layer aui-dialog2 aui-dialog2-medium" aria-hidden="true">\n            <header class="aui-dialog2-header">\n                <h2 class="aui-dialog2-header-main"></h2>\n                <button class="aui-dialog2-header-close" aria-label="'+f(a("HH5i")).default.getText("aui.words.close")+'">\n                    <span class="aui-icon aui-icon-small aui-iconfont-close-dialog"></span>\n                </button>\n            </header>\n            <div class="aui-dialog2-content"></div>\n            <footer class="aui-dialog2-footer"></footer>\n        </section>';function r(i){this.$el=i?(0,t.default)(i):(0,t.default)(c),function(i){t.default.each(s,function(e,a){var t="data-"+e;i[0].hasAttribute(t)||i.attr(t,a)})}(this.$el)}r.prototype.on=function(i,e){return(0,o.default)(this.$el).on(i,e),this},r.prototype.off=function(i,e){return(0,o.default)(this.$el).off(i,e),this},r.prototype.show=function(){return(0,o.default)(this.$el).show(),this},r.prototype.hide=function(){return(0,o.default)(this.$el).hide(),this},r.prototype.remove=function(){return(0,o.default)(this.$el).remove(),this},r.prototype.isVisible=function(){return(0,o.default)(this.$el).isVisible()};var h=(0,l.default)("dialog2",r);h.on=function(i,e){return o.default.on(i,".aui-dialog2",e),this},h.off=function(i,e){return o.default.off(i,".aui-dialog2",e),this},(0,t.default)(document).on("click keydown",".aui-dialog2-header-close",function(i){("click"===i.type||i.keyCode===d.default.ENTER||i.keyCode===d.default.SPACE)&&(i.preventDefault(),h((0,t.default)(i.target).closest(".aui-dialog2")).hide())}),h.on("show",function(i,e){e.find(".aui-dialog2-header-close").attr("tabindex",0);var a;[".aui-dialog2-content",".aui-dialog2-footer",".aui-dialog2-header"].some(function(i){return(a=e.find(i).find(":aui-tabbable")).length}),a&&a.first().focus()}),h.on("hide",function(i,e){var a=(0,o.default)(e);e.data("aui-remove-on-hide")&&a.remove()}),(0,u.default)("aui/dialog2",h),(0,n.default)("dialog2",h),e.default=h,i.exports=e.default}},[["0+IH","runtime","aui.splitchunk.vendors--52bf8654d5","aui.splitchunk.172ffb6da7","aui.splitchunk.b0831cc7d0","aui.splitchunk.087aba7911","aui.splitchunk.fbd1a5ab27","aui.splitchunk.54d3f16c20","aui.splitchunk.e54c7c7304","aui.splitchunk.fb15cffa72","aui.splitchunk.f1e06f97a4","aui.splitchunk.479fe6ee76","aui.splitchunk.f673ef53ac","aui.splitchunk.8659b532c1","aui.splitchunk.5f851f97df","aui.splitchunk.d0110a864f","aui.splitchunk.afa5039e04","aui.splitchunk.bff3715233","aui.splitchunk.c750721820","aui.splitchunk.6d6f245ed3","aui.splitchunk.5b8c290363"]]]);
//# sourceMappingURL=aui.chunk.350b4869e63a13191536--c8442519abab14bffe03.js.map;
;
/* module-key = 'jira.webresources:change-project-type-dialog', location = '/includes/jira/dialog/changeProjectTypeDialog.soy' */
// This file was automatically generated from changeProjectTypeDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.project.ChangeType.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.project == 'undefined') { JIRA.Templates.project = {}; }
if (typeof JIRA.Templates.project.ChangeType == 'undefined') { JIRA.Templates.project.ChangeType = {}; }


JIRA.Templates.project.ChangeType.changeProjectTypeDialog = function(opt_data, opt_ignored) {
  return '<section role="dialog" id="change-project-type-dialog-' + soy.$$escapeHtml(opt_data.projectId) + '" class="aui-layer aui-dialog2 aui-dialog2-medium" aria-hidden="true"><header class="aui-dialog2-header"><h2 class="aui-dialog2-header-main">' + soy.$$escapeHtml('Change project type') + '</h2></header><div class="aui-dialog2-content"></div><footer class="aui-dialog2-footer"><div class="aui-dialog2-footer-actions form-footer"><div class="icon throbber"></div><button class="aui-button aui-button-primary dialog-change-button hidden">' + soy.$$escapeHtml('Change') + '</button><button class="aui-button aui-button-link dialog-close-button">' + soy.$$escapeHtml('Cancel') + '</button></div></footer></section>';
};
if (goog.DEBUG) {
  JIRA.Templates.project.ChangeType.changeProjectTypeDialog.soyTemplateName = 'JIRA.Templates.project.ChangeType.changeProjectTypeDialog';
}


JIRA.Templates.project.ChangeType.changeProjectTypeForm = function(opt_data, opt_ignored) {
  var output = '<form class="aui change-project-type-form"><div class="form-body"><div class="aui-group project-type-change-group"><div class="aui-item">' + JIRA.Templates.project.ChangeType.projectAvatar(opt_data) + '</div><div class="aui-item project-type-select-group">' + JIRA.Templates.project.ChangeType.projectTypeDropdown({projectTypeKey: opt_data.project.projectTypeKey, projectTypes: opt_data.projectTypes}) + '</div></div></div></form><p>';
  var helpLinkAnchor__soy21 = '<a href=' + soy.$$escapeHtml(opt_data.helpLink) + ' target="_blank">';
  output += soy.$$filterNoAutoescape(AJS.format('If you change the project type, you\x27\x27ll also change what your users can see and do with the project. {0}Check the differences here{1}',helpLinkAnchor__soy21,'</a>')) + '</p>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.project.ChangeType.changeProjectTypeForm.soyTemplateName = 'JIRA.Templates.project.ChangeType.changeProjectTypeForm';
}


JIRA.Templates.project.ChangeType.projectTypeDropdown = function(opt_data, opt_ignored) {
  var output = '<select class="project-type-select select" name="project-type">';
  var projectTypeList30 = opt_data.projectTypes;
  var projectTypeListLen30 = projectTypeList30.length;
  for (var projectTypeIndex30 = 0; projectTypeIndex30 < projectTypeListLen30; projectTypeIndex30++) {
    var projectTypeData30 = projectTypeList30[projectTypeIndex30];
    output += '<option class="imagebacked" data-icon="data:image/svg+xml;base64, ' + soy.$$escapeHtml(projectTypeData30.icon) + '" value="' + soy.$$escapeHtml(projectTypeData30.key) + '" ' + ((projectTypeData30.key == opt_data.projectTypeKey) ? ' selected ' : '') + '>' + soy.$$escapeHtml(projectTypeData30.formattedKey) + '</option>';
  }
  output += '</select>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.project.ChangeType.projectTypeDropdown.soyTemplateName = 'JIRA.Templates.project.ChangeType.projectTypeDropdown';
}


JIRA.Templates.project.ChangeType.updateTargetElement = function(opt_data, opt_ignored) {
  return '<img src="data:image/svg+xml;base64,' + soy.$$escapeHtml(opt_data.icon) + '" class="project-type-icon" /><span>' + soy.$$escapeHtml(opt_data.formattedKey) + '</span>';
};
if (goog.DEBUG) {
  JIRA.Templates.project.ChangeType.updateTargetElement.soyTemplateName = 'JIRA.Templates.project.ChangeType.updateTargetElement';
}


JIRA.Templates.project.ChangeType.projectAvatar = function(opt_data, opt_ignored) {
  return '<div class="project-avatar-header"><span class="aui-avatar aui-avatar-large aui-avatar-project"><span class="aui-avatar-inner"><img src="' + soy.$$escapeHtml(opt_data.project.avatarUrls['48x48']) + '" alt="' + soy.$$escapeHtml(opt_data.project.name) + '"></span></span><div class="project-header" title="' + soy.$$escapeHtml(opt_data.project.name) + '">' + soy.$$escapeHtml(opt_data.project.name) + '</div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.project.ChangeType.projectAvatar.soyTemplateName = 'JIRA.Templates.project.ChangeType.projectAvatar';
}


JIRA.Templates.project.ChangeType.dialogSpinner = function(opt_data, opt_ignored) {
  return '<div class="dialog-spinner"></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.project.ChangeType.dialogSpinner.soyTemplateName = 'JIRA.Templates.project.ChangeType.dialogSpinner';
}


JIRA.Templates.project.ChangeType.successMsg = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml(AJS.format('You have just changed {0} to a {1} project type.',opt_data.projectName,opt_data.projectTypeName));
};
if (goog.DEBUG) {
  JIRA.Templates.project.ChangeType.successMsg.soyTemplateName = 'JIRA.Templates.project.ChangeType.successMsg';
}
;
;
/* module-key = 'jira.webresources:change-project-type-dialog', location = '/includes/jira/dialog/changeProjectTypeDialog.js' */
define("jira/project/admin/change-project-type-dialog",["jira/util/formatter","jquery","underscore","jira/analytics","jira/message","jira/ajs/select/single-select","wrm/context-path"],function(e,t,o,n,a,r,c){"use strict";function p(e){return t.ajax({url:c()+"/rest/internal/2/projects/"+e+"/changetypedata",dataType:"json",contentType:"application/json",type:"GET"})}function i(r){var p=t(".project-type-select",r.dialogBody),i=p.val()[0],s=o.findWhere(r.projectTypes,{key:i});t(".dialog-change-button",r.dialogBody).attr("disabled","disabled"),t(t.ajax({url:c()+"/rest/api/2/project/"+r.projectId+"/type/"+i,dataType:"json",contentType:"application/json",type:"PUT"}).done(function(){r.changeProjectTypeDialog.hide(),r.onProjectTypeChanged&&r.onProjectTypeChanged(r.trigger,s),a.showSuccessMsg(JIRA.Templates.project.ChangeType.successMsg({projectName:r.projectName,projectTypeName:s.formattedKey})),n.send({name:"administration.projecttype.change",properties:{projectId:r.projectId,sourceProjectType:d(r.sourceProjectType),destinationProjectType:d(i)}})}).fail(function(){t(".aui-dialog2-content",r.dialogBody).prepend(aui.message.error({content:e.format("We haven\'\'t been able to complete the project conversion. You could refresh the page and try again. If this doesn\'\'t work, contact {0}Support{1}.",'<a href="https://support.atlassian.com/">',"</a>")}))})).throbber({target:t(".throbber",r.dialogBody)})}function d(e){return e&&e.replace("_","")}function s(e,t,o){e==t?o.find(".dialog-change-button").attr("disabled","disabled"):o.find(".dialog-change-button").removeAttr("disabled")}function l(o){var n=t(JIRA.Templates.project.ChangeType.changeProjectTypeDialog({projectId:o.projectId})),a=AJS.dialog2(n);a.on("show",function(){t(".aui-dialog2-content",n).html(JIRA.Templates.project.ChangeType.dialogSpinner()),t(".dialog-spinner",n).spin(),t(".dialog-change-button",n).unbind("click").addClass("hidden")}),t(o.trigger).click(function(c){c.preventDefault(),a.show(),p(o.projectId).done(function(e){n.find(".aui-dialog2-content").html(JIRA.Templates.project.ChangeType.changeProjectTypeForm(e)),new r({element:t(".project-type-select",n),revertOnInvalid:!0,width:165}),n.find(".dialog-change-button").removeClass("hidden"),s(t(".project-type-select",n).val(),e.project.projectTypeKey,n);var c={dialogBody:n,changeProjectTypeDialog:a,projectName:e.project.name,projectTypes:e.projectTypes,trigger:o.trigger,projectId:o.projectId,onProjectTypeChanged:o.onProjectTypeChanged,sourceProjectType:e.project.projectTypeKey};t(".dialog-change-button",n).click(function(e){e.preventDefault(),i(c)}),t(".change-project-type-form",n).on("submit",function(e){e.preventDefault(),i(c)}),t(".project-type-select",n).on("change",function(o){s(t(this).val(),e.project.projectTypeKey,n)})}).fail(function(){t(".aui-dialog2-content",n).html(aui.message.error({content:e.format("We were unable to load data required for the project type change. You could refresh the page and try again. If this doesn\'\'t work, contact {0}Support{1}.",'<a href="https://support.atlassian.com/">',"</a>")}))})}),t(".dialog-close-button",n).click(function(e){e.preventDefault(),a.hide()})}return function(e){l(e)}});;
;
/* module-key = 'jira.webresources:project-type-warning', location = '/static/projecttypes/warning/dialog/project-type-warning-dialog.js' */
define("jira/project/types/warning/dialog",["require"],function(e){"use strict";function t(t,a,r){var o=n(".project-type-warning-icon",r);i(o,"uninstalled-warning-dialog",function(i,r,o){return i.html(JIRA.Project.Types.Warning.dialog({title:t.title,firstParagraph:t.firstParagraph,secondParagraph:t.secondParagraph,callToActionText:t.callToActionText})),e("jira/project/admin/change-project-type-dialog")({trigger:n(".warning-dialog-change-project-type"),projectId:t.projectId,onProjectTypeChanged:a}),o(),!1},{width:375,gravity:"w"})}var n=e("jquery"),a=e("wrm/data"),i=e("aui/inline-dialog"),r=a.claim("project.type.warning.dialogs.data");return{init:function(e){e=e||{},e.sectionElement=e.sectionElement||n("body"),t(r,e.onProjectTypeChanged,e.sectionElement)}}});;
;
/* module-key = 'jira.webresources:project-type-warning', location = '/static/projecttypes/warning/dialog/templates/templates.soy' */
// This file was automatically generated from templates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Project.Types.Warning.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Project == 'undefined') { JIRA.Project = {}; }
if (typeof JIRA.Project.Types == 'undefined') { JIRA.Project.Types = {}; }
if (typeof JIRA.Project.Types.Warning == 'undefined') { JIRA.Project.Types.Warning = {}; }


JIRA.Project.Types.Warning.dialog = function(opt_data, opt_ignored) {
  return '<div class="project-type-warning-dialog"><p class="header"><span>' + soy.$$escapeHtml(opt_data.title) + '</span></p><p class="type-not-accessible-message">' + soy.$$escapeHtml(opt_data.firstParagraph) + '</p><p class="available-functionality-message">' + soy.$$escapeHtml(opt_data.secondParagraph) + '</p><div class="actions"><a class="warning-dialog-change-project-type" href="#">' + soy.$$escapeHtml(opt_data.callToActionText) + '</a></div></div>';
};
if (goog.DEBUG) {
  JIRA.Project.Types.Warning.dialog.soyTemplateName = 'JIRA.Project.Types.Warning.dialog';
}
;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-type-warning-dialog', location = 'global/js/init-project-type-warning-dialog.js' */
define("jira-project-config/init-project-type-warning-dialog",["require"],function(e){"use strict";function i(){n.init({onProjectTypeChanged:function(){window.location.reload()},sectionElement:r(".old-project-config-header")}),t.trace("project.types.warning.messages.init")}var n=e("jira/project/types/warning/dialog"),t=e("jira/util/logger"),r=e("jquery");return{init:i}});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:jquery-serializeobject', location = 'lib/jquery/jquery.ba-serializeobject.js' */
/*!
 * jQuery serializeObject - v0.2 - 1/20/2010
 * http://benalman.com/projects/jquery-misc-plugins/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
!function(n,e){"$:nomunge";n.fn.serializeObject=function(){var e={};return n.each(this.serializeArray(),function(r,a){var i=a.name,c=a.value;e[i]=void 0===e[i]?c:n.isArray(e[i])?e[i].concat(c):[e[i],c]}),e}}(jQuery);;
;
/* module-key = 'com.atlassian.auiplugin:split_aui.pattern.label', location = 'aui.chunk.4c4e082d13db69ce6136--46feba69635d4ca59965.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.pattern.label"],{XpI9:function(i,n,u){},Y5aH:function(i,n,u){"use strict";u("FStl"),u("Q0fs"),u("nqD9"),u("XpI9")}},[["Y5aH","runtime","aui.splitchunk.b0831cc7d0","aui.splitchunk.572a8bf5cd","aui.splitchunk.d49cf794d2"]]]);
//# sourceMappingURL=aui.chunk.4c4e082d13db69ce6136--46feba69635d4ca59965.js.map;
;
/* module-key = 'com.atlassian.auiplugin:split_aui.splitchunk.16f099a0da', location = 'aui.chunk.b8d538420d4f10a69910--057b5af785a9bd94d156.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.splitchunk.16f099a0da"],{jJ4L:function(i,n,o){"use strict";o("FStl"),o("Q0fs"),o("oTK+"),o("S3ao"),o("HNID"),o("YQ7q"),o("xjlV")},xjlV:function(i,n,o){}}]);
//# sourceMappingURL=aui.chunk.b8d538420d4f10a69910--057b5af785a9bd94d156.js.map;
;
/* module-key = 'com.atlassian.auiplugin:split_aui.pattern.table', location = 'aui.chunk.f811d39e5d935038628f--b52208891d79a8157502.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.pattern.table"],[],[["jJ4L","runtime","aui.splitchunk.b0831cc7d0","aui.splitchunk.572a8bf5cd","aui.splitchunk.d49cf794d2","aui.splitchunk.336ae4f9e7","aui.splitchunk.fb15cffa72","aui.splitchunk.ed80e00f15","aui.splitchunk.b2ecdd4179","aui.splitchunk.16f099a0da"]]]);
//# sourceMappingURL=aui.chunk.f811d39e5d935038628f--b52208891d79a8157502.js.map;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/dropdown/Dropdown.js' */
define("jira/dropdown",["require"],function(i){function o(){try{return Boolean(n.require("jira/dialog/dialog").current)}catch(i){}return!1}var n=i("jira/util/top-same-origin-window")(window),t=i("jira/ajs/layer/layer-interactions"),e=i("jquery"),d=i("jira/util/key-code"),r=[],s={current:null,addInstance:function(){r.push(this)},hideInstances:function(){var i=this;e(r).each(function(){i!==this&&this.hideDropdown()})},getHash:function(){return this.hash||(this.hash={container:this.dropdown,hide:this.hideDropdown,show:this.displayDropdown}),this.hash},displayDropdown:function(){if(this.current!==this){this.hideInstances(),this.current=this,this.dropdown.css({display:"block"}),this.displayed=!0;var i=this.dropdown;o()||setTimeout(function(){var o=e(window),n=i.offset().top+i.prop("offsetHeight")-o.height()+10;o.scrollTop()<n&&e("html,body").animate({scrollTop:n},300,"linear")},100)}},hideDropdown:function(){!1!==this.displayed&&(this.current=null,this.dropdown.css({display:"none"}),this.displayed=!1)},init:function(i,o){var n=this;this.addInstance(this),this.dropdown=e(o),this.dropdown.css({display:"none"}),e(document).keydown(function(i){i.keyCode===d.TAB&&n.hideDropdown()}),i.target?e.aop.before(i,function(){n.displayed||n.displayDropdown()}):(n.dropdown.css("top",e(i).outerHeight()+"px"),i.click(function(i){n.displayed?n.hideDropdown():(n.displayDropdown(),i.stopPropagation()),i.preventDefault()})),e(document.body).click(function(){n.displayed&&n.hideDropdown()})}};return t.preventDialogHide(s),t.hideBeforeDialogShown(s),s}),AJS.namespace("JIRA.Dropdown",null,require("jira/dropdown")),AJS.namespace("jira.widget.dropdown",null,require("jira/dropdown"));;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/AutoComplete.js' */
define("jira/autocomplete/autocomplete",["jira/ajs/ajax/smart-ajax","jira/util/key-code","jira/util/objects","jquery"],function(e,t,o,n){return function(){var i,s=function e(t,o){e.t&&(clearTimeout(e.t),e.t=void 0),e.t=setTimeout(t,1e3*o)},r={9:!0,13:!0,14:!0,25:!0,27:!0,38:!0,40:!0,224:!0};return{dispatcher:function(){},getSavedResponse:function(){},saveResponse:function(){},renderSuggestions:function(){},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1},set:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])},completeField:function(e){e&&(this.field.val(e).focus(),this.field.trigger("change"))},textToSuggestionCursorPosition:function(){return this.field.val()},_makeRequest:function(t){var n=this,i=o.copyObject(t);return this.pendingRequest&&this.pendingRequest.abort(),i.complete=function(){n.pendingRequest=null},i.error=function(e){!e.aborted&&0!==e.status&&t.error&&t.error.apply(this,arguments)},this.pendingRequest=e.makeRequest(i)},addSuggestionControls:function(e){function o(e){d.dropdownController.displayed&&a(e.data.index)}function s(e){0===e.data.index&&(d.selectedIndex=-1),n(this).removeClass("active")}function r(e){d.completeField(d.suggestionNodes[e.data.index][1])}var d=this,l=function(e,t){var o=!1===d.autoSelectFirst?-1:0;return d.allowArrowCarousel?e>t?o:e<o?t:e:e>t?t:e<o?(d.responseContainer.scrollTop(0),o):e},a=function(e){void 0!==d.selectedIndex&&d.selectedIndex>-1&&d.suggestionNodes[d.selectedIndex][0].removeClass("active"),d.selectedIndex=l(e,d.suggestionNodes.length-1),d.selectedIndex>-1&&d.suggestionNodes[d.selectedIndex][0].addClass("active")},u=function(){return d.suggestionNodes&&d.suggestionNodes[d.selectedIndex]&&d.suggestionNodes[d.selectedIndex][0].hasClass("active")},p=function(e){d.responseContainer.is(":visible")&&e.keyCode===t.ENTER&&(u()&&!d.pendingRequest&&d.completeField(d.suggestionNodes[d.selectedIndex][1]),e.preventDefault(),e.stopPropagation())},c=function(e){if(d.responseContainer.is(":visible"))if(d.field[0]!==document.activeElement&&d.field.focus(),e.keyCode===t.DOWN){if(a(d.selectedIndex+1),d.selectedIndex>=0){var o=d.responseContainer.height(),n=d.suggestionNodes[d.selectedIndex][0].position().top+d.suggestionNodes[d.selectedIndex][0].outerHeight();n-o>0&&d.responseContainer.scrollTop(d.responseContainer.scrollTop()+n-o+2)}else d.responseContainer.scrollTop(0);e.preventDefault()}else if(e.keyCode===t.UP){if(a(d.selectedIndex-1),d.selectedIndex>=0){var i=d.suggestionNodes[d.selectedIndex][0].position().top;i<0&&d.responseContainer.scrollTop(d.responseContainer.scrollTop()+i-2)}e.preventDefault()}else e.keyCode===t.TAB&&(u()?(d.completeField(d.suggestionNodes[d.selectedIndex][1]),e.preventDefault()):d.dropdownController.hideDropdown())};if(e.length){this.selectedIndex=0,this.suggestionNodes=e;for(var h=0;h<d.suggestionNodes.length;h++){var f={instance:this,index:h};this.suggestionNodes[h][0].bind("mouseover",f,o).bind("mouseout",f,s).bind("click",f,r).bind("mousedown",function(e){e.preventDefault()})}this.keyboardHandlerBinded||(n(this.field).keypress(p),n(this.field).keydown(c),this.keyboardHandlerBinded=!0),a(!1===d.autoSelectFirst?-1:0),i=this}},clearResponseContainer:function(){this.responseContainer.empty(),this.suggestionNodes=void 0},delay:s,buildResponseContainer:function(){var e=this.field.parent().addClass("atlassian-autocomplete");this.responseContainer=n(document.createElement("div")),this.responseContainer.addClass("suggestions"),this.positionResponseContainer(),this.responseContainer.appendTo(e)},positionResponseContainer:function(){this.responseContainer.css({top:this.field.outerHeight()})},keyUpHandler:function(){function e(){this.responseContainer||this.buildResponseContainer(),this.dispatcher(this.field.val())}return function(o){return this.field.val().length>=this.minQueryLength&&(o.keyCode in r&&(!this.responseContainer||this.responseContainer.is(":visible")||o.keyCode!==t.UP&&o.keyCode!==t.DOWN)||e.call(this)),o}}(),addMultiSelectAdvice:function(e){var t=this,o=function e(o){if(!e.isAlerting){e.isAlerting=!0;var i=n(document.createElement("div")).css({float:"left",display:"none"}).addClass("warningBox").html("Oops! You have already entered the value <em>"+o+"</em>").appendTo(t.field.parent()).show("fast",function(){t.delay(function(){i.hide("fast",function(){i.remove(),e.isAlerting=!1})},4)})}};n.aop.before({target:this,method:"dispatcher"},function(t){var o=this.field.val();return t[0]=n.trim(o.slice(o.lastIndexOf(e)+1)),t}),n.aop.before({target:this,method:"completeField"},function(t){var i=t[0],s=this.field.val().split(e),r=n(s).map(function(){return n.trim(this)}).get();return!this.allowDuplicates&&new RegExp("(?:^|[\\s"+e+"])"+i+"\\s*"+e).test(this.field.val())?(o(i),r[r.length-1]=""):(r[r.length-1]=i,r[r.length]=""),t[0]=r.join(e.replace(/([^\s]$)/,"$1 ")),t})},addDropdownAdvice:function(){n.aop.after({target:this,method:"buildResponseContainer"},function(e){return this.dropdownController=JIRA.Dropdown.AutoComplete({target:this,method:"renderSuggestions"},this.responseContainer),n.aop.after({target:this.dropdownController,method:"hideDropdown"},function(){this.dropdown.removeClass("dropdown-ready"),clearTimeout(s.t)}),e}),n.aop.after({target:this,method:"renderSuggestions"},function(e){return e&&e.length>0?(this.dropdownController.displayDropdown(),this.maxHeight&&this.dropdownController.dropdown.prop("scrollHeight")>this.maxHeight?this.dropdownController.dropdown.css({height:this.maxHeight,overflowX:"visible",overflowY:"scroll"}):this.maxHeight&&this.dropdownController.dropdown.css({height:"",overflowX:"",overflowY:""}),this.dropdownController.dropdown.addClass("dropdown-ready")):this.dropdownController.hideDropdown(),e}),n.aop.after({target:this,method:"completeField"},this._afterCompleteField),n.aop.after({target:this,method:"keyUpHandler"},function(e){return this.field.val().length>=this.minQueryLength&&e.keyCode!==t.ESCAPE||!this.dropdownController||!this.dropdownController.displayed||(this.dropdownController.hideDropdown(),e.keyCode===t.ESCAPE&&e.stopPropagation()),e})},_afterCompleteField:function(e){return this.dropdownController.hideDropdown(),e},init:function(e){var o=this;this.set(e),this.field=this.field||n("#"+this.fieldID),this.field.attr("autocomplete","off").keyup(function(e){o.disabled||o.keyUpHandler(e)}).keydown(function(e){e.keyCode===t.ESCAPE&&o.responseContainer&&o.responseContainer.is(":visible")&&e.preventDefault()}).click(function(){i===o&&setTimeout(function(){o.dispatcher(o.field.val())},0)}).blur(function(){o.pendingRequest&&o.pendingRequest.abort()}).focus(function(e){o.disabled||(e.originalEvent&&e.originalEvent.relatedTarget&&setTimeout(function(){o.dispatcher(o.field.val())},0),i=o)}),this.addDropdownAdvice(),e.delimChar&&this.addMultiSelectAdvice(e.delimChar)}}}()}),AJS.namespace("jira.widget.autocomplete",null,require("jira/autocomplete/autocomplete")),AJS.namespace("JIRA.AutoComplete",null,require("jira/autocomplete/autocomplete"));;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/RESTAutoComplete.js' */
var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};define("jira/autocomplete/rest-autocomplete",["jira/autocomplete/autocomplete","jira/util/objects"],function(e,t){return function(){var o=t.begetObject(e);return o.dispatcher=function(e){var t=this;e.length<this.minQueryLength||(this.getSavedResponse(e)?(t.renderSuggestions(t.getSavedResponse(e)),t.responseContainer.scrollTop(0)):this.delay(function(){var o=t.getAjaxParams();o.data.query=e,o.success=function(o){t.saveResponse(e,o),t.responseContainer.scrollTop(0),t.renderSuggestions(o)},t._makeRequest(o)},t.queryDelay))},o.getAjaxParams=function(){},o.getSavedResponse=function(e){return this.requested||(this.requested={}),this.requested[e]},o.saveResponse=function(e,t){"string"==typeof e&&"object"===(void 0===t?"undefined":_typeof(t))&&(this.requested||(this.requested={}),this.requested[e]=t)},o}()}),AJS.namespace("jira.widget.autocomplete.REST",null,require("jira/autocomplete/rest-autocomplete")),AJS.namespace("JIRA.RESTAutoComplete",null,require("jira/autocomplete/rest-autocomplete"));;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/IssueAutoComplete.js' */
define("jira/autocomplete/issue-autocomplete",["jira/data/parse-options-from-fieldset","jira/field/issue-picker","jira/autocomplete/rest-autocomplete","jira/util/objects","wrm/context-path","jquery"],function(e,t,s,a,i,n){var r=i(),d=function(e){var t=a.begetObject(s);return t.getAjaxParams=function(){return{url:r+"/rest/api/2/issue/picker",data:e.ajaxData,dataType:"json",type:"GET"}},t.renderSuggestions=function(s){var a,i=[];if(this.clearResponseContainer(),s&&s.sections&&s.sections.length>0)return a=n("<ul/>").appendTo(this.responseContainer),n(s.sections).each(function(){var t=this,s=n("<div/>").attr("id",e.fieldID+"_s_"+t.id).addClass("yag").text(t.label);if(t.sub&&s.append(n("<span/>").addClass("yagt").text("("+t.sub+")")),a.append(n("<li/>").append(s).mouseover(function(){n(this).addClass("active")}).mouseout(function(){n(this).removeClass("active")})),t.msg){var d=n("<div/>").attr("id",e.fieldID+"_i_"+t.id+"_n").addClass("yad").text(t.msg);a.append(n("<li/>").append(d).mouseover(function(){n(this).addClass("active")}).mouseout(function(){n(this).removeClass("active")}))}t.issues&&t.issues.length>0&&n(t.issues).each(function(){var s;s=/^http/.test(this.img)?this.img:r+this.img;var d=n("<li/>").append(n("<div/>").attr("id",e.fieldID+"_i_"+t.id+"_"+this.key).addClass("yad").append(n("<table/>").addClass("yat").attr({cellpadding:"0",cellspacing:"0"}).append(n("<tr/>").append(n("<td/>").append(n("<img/>").attr("src",s))).append(n("<td/>").append(n("<div/>").addClass("yak").html(this.keyHtml))).append(n("<td/>").css("width","100%").html(this.summary)))));a.append(d),i.push([d,this.key])})}),t.addSuggestionControls(i),i},e.minQueryLength=1,e.queryDelay=.25,t.init(e),t};return d.init=function(){n("fieldset.issue-picker-params").each(function(){var s=e(n(this));n("#"+s.fieldId+"-container").add("#"+s.fieldName+"_container").find("a.popup-trigger").click(function(e){var a=r+"/secure/popups/IssuePicker.jspa?";a+="currentIssue="+s.currentIssueKey+"&",a+="singleSelectOnly="+s.singleSelectOnly+"&",a+="showSubTasks="+s.showSubTasks+"&",a+="showSubTasksParent="+s.showSubTaskParent,s.currentProjectId&&""!==s.currentProjectId&&(a+="&selectedProjectId="+s.currentProjectId),t.callback=function(e){var t,a=[];e=JSON.parse(e),s.fieldId&&a&&(t=n("#"+s.fieldId))&&(n.each(e,function(){a.push(this.value)}),t.val(a.join(", ")))};var i=window.open(a,"IssueSelectorPopup","status=no,resizable=yes,top=100,left=200,width=620,height=500,scrollbars=yes,resizable");i.opener=self,i.focus(),e.preventDefault()}),s.fieldId||(s.fieldId=s.fieldName),!0===s.issuePickerEnabled&&d({fieldID:s.fieldId,delimChar:!0===s.singleSelectOnly?void 0:",",ajaxData:s})})},d}),AJS.namespace("jira.widget.autocomplete.Issues",null,require("jira/autocomplete/issue-autocomplete")),AJS.namespace("JIRA.IssueAutoComplete",null,require("jira/autocomplete/issue-autocomplete"));;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/UserAutoComplete.js' */
define("jira/autocomplete/user-autocomplete",["jira/autocomplete/rest-autocomplete","jira/data/parse-options-from-fieldset","jira/util/browser","jira/util/elements","jira/util/objects","wrm/context-path","jquery"],function(e,t,i,r,o,a,s){"use strict";var n=a(),l=function(t){function a(e){var t=!1,i=e.closest("form");return i.length&&i.hasClass("submitting")&&(t=!0),t}var l=o.begetObject(e);return l.getAjaxParams=function(){return{url:n+"/rest/api/1.0/users/picker",data:{fieldName:t.fieldID,fieldConfigId:t.fieldConfigID,projectId:t.projectId},dataType:"json",type:"GET"}},l.renderSuggestions=function(e){if(a(this.field)||!i.isSelenium()&&!r.elementIsFocused(this.field))return!1;var t,o=[];return this.clearResponseContainer(),e&&e.users&&e.users.length>0&&(t=s("<ul/>").appendTo(this.responseContainer),s(e.users).each(function(){o.push([s("<li/>").html(this.html).appendTo(t),this.name])})),e.footer&&this.responseContainer.append(s("<div/>").addClass("yui-ac-ft").html(e.footer).css("display","block")),o.length>0&&(l.addSuggestionControls(o),s(".atlassian-autocomplete div.yad, .atlassian-autocomplete .labels li").textOverflow({autoUpdate:!0})),o},t.minQueryLength=2,t.queryDelay=.25,l.init(t),l};return l.init=function(e){s("fieldset.user-picker-params",e).each(function(){var i=t(s(this)),r=i.fieldId||i.fieldName,o=s("#"+r+"_container");o.find("a.popup-trigger").click(function(e){var t,a=n;if(e.preventDefault(),i.formName||(i.formName=o.find("#"+r).parents("form").attr("name")),i.actionToOpen?a+=i.actionToOpen:a+="/secure/popups/UserPickerBrowser.jspa",a+="?formName="+i.formName+"&",a+="multiSelect="+i.multiSelect+"&",a+="decorator=popup&",a+="element="+r,i.fieldConfigId&&(a+="&fieldConfigId="+i.fieldConfigId),i.projectId)if(s.isArray(i.projectId))for(var l in i.projectId)a+="&projectId="+l;else a+="&projectId="+i.projectId;t=window.open(a,"UserPicker","status=yes,resizable=yes,top=100,left=100,width=800,height=750,scrollbars=yes"),t.opener=self,t.focus()}),!0===i.userPickerEnabled&&l({field:e?e.find("#"+r):null,fieldID:r,fieldConfigID:i.fieldConfigId,projectId:i.projectId,delimChar:!1===i.multiSelect?void 0:",",ajaxData:{fieldName:i.fieldName}})})},l}),AJS.namespace("jira.widget.autocomplete.Users",null,require("jira/autocomplete/user-autocomplete")),AJS.namespace("JIRA.UserAutoComplete",null,require("jira/autocomplete/user-autocomplete"));;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/initAutoCompleteFields.js' */
!function(){"use strict";var e=require("jquery"),r=require("jira/data/parse-options-from-fieldset"),i=require("jira/util/events"),t=require("jira/util/events/reasons"),a=require("jira/util/events/types"),s=require("jira/autocomplete/issue-autocomplete"),l=require("jira/autocomplete/user-autocomplete"),o=require("wrm/context-path"),u=o();i.bind(a.NEW_CONTENT_ADDED,function(e,r,i){i!==t.panelRefreshed&&(l.init(r),s.init(r))}),i.bind(a.NEW_CONTENT_ADDED,function(i,a,s){s!==t.panelRefreshed&&e("fieldset.user-searcher-params",a).each(function(){var i=r(e(this)),t=e("#"+i.fieldId+"_container",a);if(!0===i.userPickerEnabled)var s=l({fieldID:i.fieldId,delimChar:!0===i.multiSelect?",":void 0,ajaxData:{fieldName:i.fieldName}});var o=function(r){var t=e("#"+i.fieldId,a),l=e("#"+i.fieldId+"Image",a),o=e("#"+i.fieldId+"GroupImage",a),u=e("#"+i.fieldId+"_desc",a);"select.list.none"===r?(t.val("").attr("disabled","true"),l.hide(),o.hide(),u.hide()):(t.removeAttr("disabled"),"select.list.group"===r?(l.hide(),o.show(),!0===i.userPickerEnabled&&(s.disable(),u.hide())):(l.show(),o.hide(),!0===i.userPickerEnabled&&(s.enable(),u.show())))};e("#"+i.userSelect,a).change(function(){var r=e(this).find("option:selected").attr("rel");o(r)}).find("option:selected").each(function(){o(e(this).attr("rel"))}),t.find("a.user-popup-trigger").click(function(e){var r=u+"/secure/popups/UserPickerBrowser.jspa?";r+="formName="+i.formName+"&",r+="multiSelect="+i.multiSelect+"&",r+="decorator=popup&",r+="element="+i.fieldId;var t=window.open(r,"UserPicker","status=yes,resizable=yes,top=100,left=100,width=800,height=750,scrollbars=yes");t.opener=self,t.focus(),e.preventDefault()}),t.find("a.group-popup-trigger").click(function(e){var r=u+"/secure/popups/GroupPickerBrowser.jspa?";r+="formName="+i.formName+"&",r+="multiSelect="+i.multiSelect+"&",r+="decorator=popup&",r+="element="+i.fieldId;var t=window.open(r,"GroupPicker","status=yes,resizable=yes,top=100,left=100,width=800,height=750,scrollbars=yes");t.opener=self,t.focus(),e.preventDefault()})})})}();;
;
/* module-key = 'jira.webresources:calendar-lib', location = '/includes/lib/calendar/Calendar.js' */
Calendar=function(e,t,a,n,r){if(this.activeDiv=null,this.currentDateEl=null,this.getDateStatus=null,this.getDateToolTip=null,this.getDateText=null,this.timeout=null,this.onSelected=n||null,this.onClose=r||null,this.dragging=!1,this.hidden=!1,this.minYear=1970,this.maxYear=2050,this.dateFormat=Calendar._TT.DEF_DATE_FORMAT,this.ttDateFormat=Calendar._TT.TT_DATE_FORMAT,this.isPopup=!0,this.weekNumbers=!0,this.firstDayOfWeek="number"==typeof e?e:Calendar._FD,this.showsOtherMonths=!1,this.dateStr=t,this.todayDateStr=a,this.ar_days=null,this.showsTime=!1,this.time24=!0,this.yearStep=2,this.hiliteToday=!0,this.multiple=null,this.table=null,this.element=null,this.tbody=null,this.firstdayname=null,this.monthsCombo=null,this.yearsCombo=null,this.hilitedMonth=null,this.activeMonth=null,this.hilitedYear=null,this.activeYear=null,this.dateClicked=!1,void 0===Calendar._SDN){void 0===Calendar._SDN_len&&(Calendar._SDN_len=3);for(var l=new Array,i=8;i>0;)l[--i]=Calendar._DN[i].substr(0,Calendar._SDN_len);Calendar._SDN=l,void 0===Calendar._SMN_len&&(Calendar._SMN_len=3),l=new Array;for(var i=12;i>0;)l[--i]=Calendar._MN[i].substr(0,Calendar._SMN_len);Calendar._SMN=l}},Calendar._C=null,Calendar.is_ie=/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent),Calendar.is_ie5=Calendar.is_ie&&/msie 5\.0/i.test(navigator.userAgent),Calendar.is_ie6=Calendar.is_ie&&/msie 6\.0/i.test(navigator.userAgent),Calendar.is_opera=/opera/i.test(navigator.userAgent),Calendar.is_khtml=/Konqueror|Safari|KHTML/i.test(navigator.userAgent),Calendar.getAbsolutePos=function(e){var t=jQuery(e).offset();return t.x=t.left,t.y=t.top,t},Calendar.isRelated=function(e,t){var a=t.relatedTarget;if(!a){var n=t.type;"mouseover"==n?a=t.fromElement:"mouseout"==n&&(a=t.toElement)}for(;a;){if(a==e)return!0;a=a.parentNode}return!1},Calendar.removeClass=function(e,t){if(e&&e.className){for(var a=e.className.split(" "),n=new Array,r=a.length;r>0;)a[--r]!=t&&(n[n.length]=a[r]);e.className=n.join(" ")}},Calendar.addClass=function(e,t){Calendar.removeClass(e,t),e.className+=" "+t},Calendar.getElement=function(e){for(var t=e.currentTarget;1!==t.nodeType||/^div$/i.test(t.tagName);)t=t.parentNode;return t},Calendar.getTargetElement=function(e){for(var t=e.target;1!==t.nodeType;)t=t.parentNode;return t},Calendar.stopEvent=function(e){return e||(e=window.event),e.stopPropagation?(e.preventDefault(),e.stopPropagation()):(e.cancelBubble=!0,e.returnValue=!1),!1},Calendar.addEvent=function(e,t,a){e.attachEvent?e.attachEvent("on"+t,a):e.addEventListener?e.addEventListener(t,a,!0):e["on"+t]=a},Calendar.removeEvent=function(e,t,a){e.detachEvent?e.detachEvent("on"+t,a):e.removeEventListener?e.removeEventListener(t,a,!0):e["on"+t]=null},Calendar.createElement=function(e,t){var a=null;return a=document.createElementNS?document.createElementNS("http://www.w3.org/1999/xhtml",e):document.createElement(e),void 0!==t&&t.appendChild(a),a},Calendar._add_evs=function(el){with(Calendar)addEvent(el,"mouseover",dayMouseOver),addEvent(el,"mousedown",dayMouseDown),addEvent(el,"mouseout",dayMouseOut),is_ie&&(addEvent(el,"dblclick",dayMouseDblClick),el.setAttribute("unselectable",!0))},Calendar.findMonth=function(e){return void 0!==e.month?e:void 0!==e.parentNode.month?e.parentNode:null},Calendar.findYear=function(e){return void 0!==e.year?e:void 0!==e.parentNode.year?e.parentNode:null},Calendar.showMonthsCombo=function(){var e=Calendar._C;if(!e)return!1;var e=e,t=e.activeDiv,a=e.monthsCombo;e.hilitedMonth&&Calendar.removeClass(e.hilitedMonth,"hilite"),e.activeMonth&&Calendar.removeClass(e.activeMonth,"active");var n=e.monthsCombo.getElementsByTagName("div")[e.date.getMonth()];Calendar.addClass(n,"active"),e.activeMonth=n;var r=a.style;if(r.display="block",t.navtype<0)r.left=t.offsetLeft+"px";else{var l=a.offsetWidth;void 0===l&&(l=50),r.left=t.offsetLeft+t.offsetWidth-l+"px"}r.top=t.offsetTop+t.offsetHeight+"px"},Calendar.showYearsCombo=function(e){var t=Calendar._C;if(!t)return!1;var t=t,a=t.activeDiv,n=t.yearsCombo;t.hilitedYear&&Calendar.removeClass(t.hilitedYear,"hilite"),t.activeYear&&Calendar.removeClass(t.activeYear,"active"),t.activeYear=null;for(var r=t.date.getFullYear()+(e?1:-1),l=n.firstChild,i=!1,s=12;s>0;--s)r>=t.minYear&&r<=t.maxYear?(l.innerHTML=r,l.year=r,l.style.display="block",i=!0):l.style.display="none",l=l.nextSibling,r+=e?t.yearStep:-t.yearStep;if(i){var o=n.style;if(o.display="block",a.navtype<0)o.left=a.offsetLeft+"px";else{var d=n.offsetWidth;void 0===d&&(d=50),o.left=a.offsetLeft+a.offsetWidth-d+"px"}o.top=a.offsetTop+a.offsetHeight+"px"}},Calendar.tableMouseUp=function(ev){var cal=Calendar._C;if(!cal)return!1;cal.timeout&&clearTimeout(cal.timeout);var el=cal.activeDiv;if(!el)return!1;var target=Calendar.getTargetElement(ev);ev||(ev=window.event),Calendar.removeClass(el,"active"),target!=el&&target.parentNode!=el||Calendar.cellClick(el,ev);var mon=Calendar.findMonth(target),date=null;if(mon)date=new Date(cal.date),mon.month!=date.getMonth()&&(date.setMonth(mon.month),cal.setDate(date),cal.dateClicked=!1,cal.callHandler());else{var year=Calendar.findYear(target);year&&(date=new Date(cal.date),year.year!=date.getFullYear()&&(date.setFullYear(year.year),cal.setDate(date),cal.dateClicked=!1,cal.callHandler()))}with(Calendar)return removeEvent(document,"mouseup",tableMouseUp),removeEvent(document,"mouseover",tableMouseOver),removeEvent(document,"mousemove",tableMouseOver),cal._hideCombos(),_C=null,stopEvent(ev)},Calendar.tableMouseOver=function(e){var t=Calendar._C;if(t){var a=t.activeDiv,n=Calendar.getTargetElement(e);if(n==a||n.parentNode==a?(Calendar.addClass(a,"hilite active"),Calendar.addClass(a.parentNode,"rowhilite")):((void 0===a.navtype||50!=a.navtype&&(0==a.navtype||Math.abs(a.navtype)>2))&&Calendar.removeClass(a,"active"),Calendar.removeClass(a,"hilite"),Calendar.removeClass(a.parentNode,"rowhilite")),e||(e=window.event),50==a.navtype&&n!=a){var r,l=Calendar.getAbsolutePos(a),i=a.offsetWidth,s=e.clientX,o=!0;s>l.x+i?(r=s-l.x-i,o=!1):r=l.x-s,r<0&&(r=0);for(var d=a._range,h=a._current,u=Math.floor(r/10)%d.length,c=d.length;--c>=0&&d[c]!=h;);for(;u-- >0;)o?--c<0&&(c=d.length-1):++c>=d.length&&(c=0);var m=d[c];a.innerHTML=m,t.onUpdateTime()}var C=Calendar.findMonth(n);if(C)C.month!=t.date.getMonth()?(t.hilitedMonth&&Calendar.removeClass(t.hilitedMonth,"hilite"),Calendar.addClass(C,"hilite"),t.hilitedMonth=C):t.hilitedMonth&&Calendar.removeClass(t.hilitedMonth,"hilite");else{t.hilitedMonth&&Calendar.removeClass(t.hilitedMonth,"hilite");var p=Calendar.findYear(n);p&&p.year!=t.date.getFullYear()?(t.hilitedYear&&Calendar.removeClass(t.hilitedYear,"hilite"),Calendar.addClass(p,"hilite"),t.hilitedYear=p):t.hilitedYear&&Calendar.removeClass(t.hilitedYear,"hilite")}return Calendar.stopEvent(e)}},Calendar.tableMouseDown=function(e){if(Calendar.getTargetElement(e)==Calendar.getElement(e))return Calendar.stopEvent(e)},Calendar.calDragIt=function(e){var t=Calendar._C;if(!t||!t.dragging)return!1;var a,n;Calendar.is_ie?(n=window.event.clientY+document.body.scrollTop,a=window.event.clientX+document.body.scrollLeft):(a=e.pageX,n=e.pageY);var r=t.element.style;return r.left=a-t.xOffs+"px",r.top=n-t.yOffs+"px",Calendar.stopEvent(e)},Calendar.calDragEnd=function(ev){var cal=Calendar._C;if(!cal)return!1;with(cal.dragging=!1,Calendar)removeEvent(document,"mousemove",calDragIt),removeEvent(document,"mouseup",calDragEnd),tableMouseUp(ev)},Calendar.dayMouseDown=function(ev){var el=Calendar.getElement(ev);if(el.disabled)return!1;var cal=el.calendar;if(cal.activeDiv=el,Calendar._C=cal,300!=el.navtype)with(Calendar)50==el.navtype?(el._current=el.innerHTML,addEvent(document,"mousemove",tableMouseOver)):addEvent(document,Calendar.is_ie5?"mousemove":"mouseover",tableMouseOver),addClass(el,"hilite active"),addEvent(document,"mouseup",tableMouseUp);else cal.isPopup&&cal._dragStart(ev);return-1==el.navtype||1==el.navtype?(cal.timeout&&clearTimeout(cal.timeout),cal.timeout=setTimeout("Calendar.showMonthsCombo()",250)):-2==el.navtype||2==el.navtype?(cal.timeout&&clearTimeout(cal.timeout),cal.timeout=setTimeout(el.navtype>0?"Calendar.showYearsCombo(true)":"Calendar.showYearsCombo(false)",250)):cal.timeout=null,Calendar.stopEvent(ev)},Calendar.dayMouseDblClick=function(e){Calendar.cellClick(Calendar.getElement(e),e||window.event),Calendar.is_ie&&document.selection.empty()},Calendar.dayMouseOver=function(e){var t=Calendar.getElement(e);return!(Calendar.isRelated(t,e)||Calendar._C||t.disabled)&&(t.ttip&&("_"==t.ttip.substr(0,1)&&(t.ttip=t.caldate.print(t.calendar.ttDateFormat)+t.ttip.substr(1)),t.calendar.tooltips.innerHTML=t.ttip),300!=t.navtype&&(Calendar.addClass(t,"hilite"),t.caldate&&Calendar.addClass(t.parentNode,"rowhilite")),Calendar.stopEvent(e))},Calendar.dayMouseOut=function(ev){with(Calendar){var el=getElement(ev);return!(isRelated(el,ev)||_C||el.disabled)&&(removeClass(el,"hilite"),el.caldate&&removeClass(el.parentNode,"rowhilite"),el.calendar&&(el.calendar.tooltips.innerHTML=_TT.SEL_DATE),stopEvent(ev))}},Calendar.cellClick=function(e,t){function a(e){var t=i.getDate(),a=i.getMonthDays(e);t>a&&i.setDate(a),i.setMonth(e)}var n=e.calendar,r=!1,l=!1,i=null;if(void 0===e.navtype){n.currentDateEl&&(Calendar.removeClass(n.currentDateEl,"selected"),Calendar.addClass(e,"selected"),(r=n.currentDateEl==e)||(n.currentDateEl=e)),n.date.setDateOnly(e.caldate),i=n.date;var s=!(n.dateClicked=!e.otherMonth);s||n.currentDateEl?l=!e.disabled:n._toggleMultipleDate(new Date(i)),s&&n._init(n.firstDayOfWeek,i)}else{if(200==e.navtype)return Calendar.removeClass(e,"hilite"),void n.callCloseHandler();i=new Date(n.date),0==e.navtype&&(n.todayDateStr?i=new Date(n.todayDateStr):i.setDateOnly(new Date)),n.dateClicked=!1;var o=i.getFullYear(),d=i.getMonth();switch(e.navtype){case 400:Calendar.removeClass(e,"hilite");var h=Calendar._TT.ABOUT;return void 0!==h?h+=n.showsTime?Calendar._TT.ABOUT_TIME:"":h='Help and about box text is not translated into this language.\nIf you know this language and you feel generous please update\nthe corresponding file in "lang" subdir to match calendar-en.js\nand send it back to <mihai_bazon@yahoo.com> to get it into the distribution  ;-)\n\nThank you!\nhttp://dynarch.com/mishoo/calendar.epl\n',void alert(h);case-2:o>n.minYear&&i.setFullYear(o-1);break;case-1:d>0?a(d-1):o-- >n.minYear&&(i.setFullYear(o),a(11));break;case 1:d<11?a(d+1):o<n.maxYear&&(i.setFullYear(o+1),a(0));break;case 2:o<n.maxYear&&i.setFullYear(o+1);break;case 100:return void n.setFirstDayOfWeek(e.fdow);case 50:for(var u=e._range,c=e.innerHTML,m=u.length;--m>=0&&u[m]!=c;);t&&t.shiftKey?--m<0&&(m=u.length-1):++m>=u.length&&(m=0);var C=u[m];return e.innerHTML=C,void n.onUpdateTime();case 0:if("function"==typeof n.getDateStatus&&n.getDateStatus(i,i.getFullYear(),i.getMonth(),i.getDate()))return!1}i.equalsTo(n.date)?0==e.navtype&&(l=r=!0):(n.setDate(i),l=!0)}l&&t&&n.callHandler(),r&&(Calendar.removeClass(e,"hilite"),t&&n.callCloseHandler())},Calendar.prototype.create=function(e){var t=null;e?(t=e,this.isPopup=!1):(t=document.getElementsByTagName("body")[0],this.isPopup=!0),this.dateStr&&(this.date=new Date(this.dateStr)),this.date&&!isNaN(this.date)||(this.date=new Date);var a=Calendar.createElement("table");this.table=a,a.cellSpacing=0,a.cellPadding=0,a.calendar=this,Calendar.addEvent(a,"mousedown",Calendar.tableMouseDown);var n=Calendar.createElement("div");this.element=n,n.className="calendar",this.isPopup&&(n.style.position="absolute",n.style.display="none"),n.appendChild(a);var r=Calendar.createElement("thead",a),l=null,i=null,s=this,o=function(e,t,a){return l=Calendar.createElement("td",i),l.colSpan=t,l.className="button",0!=a&&Math.abs(a)<=2&&(l.className+=" nav"),Calendar._add_evs(l),l.calendar=s,l.navtype=a,l.innerHTML="<div unselectable='on'>"+e+"</div>",l};i=Calendar.createElement("tr",r);var d=6;this.isPopup&&--d,this.weekNumbers&&++d,o("?",1,400).ttip=Calendar._TT.INFO,this.title=o("",d,300),this.title.className="title",this.isPopup&&(this.title.ttip=Calendar._TT.DRAG_TO_MOVE,this.title.style.cursor="move",o("&#x00d7;",1,200).ttip=Calendar._TT.CLOSE),i=Calendar.createElement("tr",r),i.className="headrow",this._nav_py=o("&#x00ab;",1,-2),this._nav_py.ttip=Calendar._TT.PREV_YEAR,this._nav_pm=o("&#x2039;",1,-1),this._nav_pm.ttip=Calendar._TT.PREV_MONTH,this._nav_now=o(Calendar._TT.TODAY,this.weekNumbers?4:3,0),this._nav_now.ttip=Calendar._TT.GO_TODAY,this._nav_nm=o("&#x203a;",1,1),this._nav_nm.ttip=Calendar._TT.NEXT_MONTH,this._nav_ny=o("&#x00bb;",1,2),this._nav_ny.ttip=Calendar._TT.NEXT_YEAR,i=Calendar.createElement("tr",r),i.className="daynames",this.weekNumbers&&(l=Calendar.createElement("td",i),l.className="name wn",l.innerHTML=Calendar._TT.WK);for(var h=7;h>0;--h)l=Calendar.createElement("td",i),h||(l.navtype=100,l.calendar=this,Calendar._add_evs(l));this.firstdayname=this.weekNumbers?i.firstChild.nextSibling:i.firstChild,this._displayWeekdays();var u=Calendar.createElement("tbody",a);for(this.tbody=u,h=6;h>0;--h){i=Calendar.createElement("tr",u),this.weekNumbers&&(l=Calendar.createElement("td",i));for(var c=7;c>0;--c)l=Calendar.createElement("td",i),l.calendar=this,Calendar._add_evs(l)}this.showsTime?(i=Calendar.createElement("tr",u),i.className="time",l=Calendar.createElement("td",i),l.className="time",l.colSpan=2,l.innerHTML=Calendar._TT.TIME||"&nbsp;",l=Calendar.createElement("td",i),l.className="time",l.colSpan=this.weekNumbers?4:3,function(){function e(e,t,a,n){var r=Calendar.createElement("span",l);if(r.className=e,r.innerHTML=t,r.calendar=s,r.ttip=Calendar._TT.TIME_PART,r.navtype=50,r._range=[],"number"!=typeof a)r._range=a;else for(var i=a;i<=n;++i){var o;o=i<10&&n>=10?"0"+i:""+i,r._range[r._range.length]=o}return Calendar._add_evs(r),r}var t=s.date.getHours(),a=s.date.getMinutes(),n=!s.time24,r=t>12;n&&r&&(t-=12);var o=e("hour",t,n?1:0,n?12:23),d=Calendar.createElement("span",l);d.innerHTML=":",d.className="colon";var h=e("minute",a,0,59),u=null;l=Calendar.createElement("td",i),l.className="time",l.colSpan=2,n?u=e("ampm",r?Calendar._TT.PM:Calendar._TT.AM,[Calendar._TT.am,Calendar._TT.pm]):l.innerHTML="&nbsp;",s.onSetTime=function(){var e,t=this.date.getHours(),a=this.date.getMinutes();n&&(e=t>=12,e&&(t-=12),0==t&&(t=12),u.innerHTML=e?Calendar._TT.pm:Calendar._TT.am),o.innerHTML=t<10?"0"+t:t,h.innerHTML=a<10?"0"+a:a},s.onUpdateTime=function(){var e=this.date,t=parseInt(o.innerHTML,10);n&&(new RegExp(Calendar._TT.pm,"i").test(u.innerHTML)&&t<12?t+=12:new RegExp(Calendar._TT.am,"i").test(u.innerHTML)&&12==t&&(t=0));var a=e.getDate(),r=e.getMonth(),l=e.getFullYear();e.setHours(t),e.setMinutes(parseInt(h.innerHTML,10)),e.setFullYear(l),e.setMonth(r),e.setDate(a),this.dateClicked=!1,this.callHandler()}}()):this.onSetTime=this.onUpdateTime=function(){};var m=Calendar.createElement("tfoot",a);for(i=Calendar.createElement("tr",m),i.className="footrow",l=o(Calendar._TT.SEL_DATE,this.weekNumbers?8:7,300),l.className="ttip",this.isPopup&&(l.ttip=Calendar._TT.DRAG_TO_MOVE,l.style.cursor="move"),this.tooltips=l,n=Calendar.createElement("div",this.element),this.monthsCombo=n,n.className="combo",h=0;h<Calendar._MN.length;++h){var C=Calendar.createElement("div");C.className=Calendar.is_ie?"label-IEfix":"label",C.month=h,C.innerHTML=Calendar._SMN[h],n.appendChild(C)}for(n=Calendar.createElement("div",this.element),this.yearsCombo=n,n.className="combo",h=12;h>0;--h){var p=Calendar.createElement("div");p.className=Calendar.is_ie?"label-IEfix":"label",n.appendChild(p)}this._init(this.firstDayOfWeek,this.date),t.appendChild(this.element),Calendar.addEvent(this.element,"mousedown",function(e){e.preventDefault?e.preventDefault():e.returnValue=!1})},Calendar._upkeyEvent=function(e){27===e.keyCode&&window.setTimeout(function(){var e=window._dynarch_popupCalendar;if(!e||e.multiple)return!1;e.callCloseHandler()},0)},Calendar._keyEvent=function(e){function t(){u=r.currentDateEl;var e=u.pos;o=15&e,d=e>>4,h=r.ar_days[d][o]}function a(){var e=new Date(r.date);e.setDate(e.getDate()-c),r.setDate(e)}function n(){var e=new Date(r.date);e.setDate(e.getDate()+c),r.setDate(e)}var r=window._dynarch_popupCalendar;if(!r||r.multiple)return!1;var l=Calendar.is_ie||"keydown"==e.type,i=e.keyCode;if(e.ctrlKey)switch(i){case 37:l&&Calendar.cellClick(r._nav_pm);break;case 38:l&&Calendar.cellClick(r._nav_py);break;case 39:l&&Calendar.cellClick(r._nav_nm);break;case 40:l&&Calendar.cellClick(r._nav_ny)}else switch(i){case 32:Calendar.cellClick(r._nav_now);break;case 37:case 38:case 39:case 40:if(l){var s,o,d,h,u,c;for(s=37==i||38==i,c=37==i||39==i?1:7,t();;){switch(i){case 37:if(!(--o>=0)){o=6,i=38;continue}h=r.ar_days[d][o];break;case 38:--d>=0?h=r.ar_days[d][o]:(a(),t());break;case 39:if(!(++o<7)){o=0,i=40;continue}h=r.ar_days[d][o];break;case 40:++d<r.ar_days.length?h=r.ar_days[d][o]:(n(),t())}break}h&&(h.disabled?s?a():n():Calendar.cellClick(h))}break;case 13:l&&Calendar.cellClick(r.currentDateEl,e)}return Calendar.stopEvent(e)},Calendar.prototype._init=function(e,t){var a=new Date(t);a.setHours(13);var n=new Date,r=n.getFullYear(),l=n.getMonth(),i=n.getDate();this.table.style.visibility="hidden";var s=a.getFullYear();s<this.minYear?(s=this.minYear,a.setFullYear(s)):s>this.maxYear&&(s=this.maxYear,a.setFullYear(s)),this.firstDayOfWeek=e;var o=a.getMonth(),d=a.getDate();a.getMonthDays();a.setDate(1);var h=(a.getDay()-this.firstDayOfWeek)%7;h<0&&(h+=7),a.setDate(-h),a.setDate(a.getDate()+1);for(var u=this.tbody.firstChild,c=(Calendar._SMN[o],this.ar_days=new Array),m=Calendar._TT.WEEKEND,C=this.multiple?this.datesCells={}:null,p=0;p<6;++p,u=u.nextSibling){var v=u.firstChild;if(this.weekNumbers){v.className="day wn";var f=a;0==o&&0==p&&0==Date.useISO8601WeekNumbers&&(f=new Date(s,o,1)),v.innerHTML=f.getWeekNumber(this.firstDayOfWeek),v=v.nextSibling}u.className="daysrow";for(var y,g=!1,_=c[p]=[],D=0;D<7;++D,v=v.nextSibling,a.setDate(y+1)){y=a.getDate();var b=a.getDay();v.className="day day-"+y,v.pos=p<<4|D,_[D]=v;var T=a.getMonth()==o;if(T)v.otherMonth=!1,g=!0;else{if(!this.showsOtherMonths){v.className="emptycell",v.innerHTML="&nbsp;",v.disabled=!0;continue}v.className+=" othermonth",v.otherMonth=!0}if(v.disabled=!1,v.innerHTML=this.getDateText?this.getDateText(a,y):y,C&&(C[a.print("%Y%m%d")]=v),this.getDateStatus){var w=this.getDateStatus(a,s,o,y);if(this.getDateToolTip){var M=this.getDateToolTip(a,s,o,y);M&&(v.title=M)}!0===w?(v.className+=" disabled",v.disabled=!0):(/disabled/i.test(w)&&(v.disabled=!0),v.className+=" "+w)}v.disabled||(v.caldate=new Date(a),v.ttip="_",!this.multiple&&T&&y==d&&this.hiliteToday&&(v.className+=" selected",this.currentDateEl=v),a.getFullYear()==r&&a.getMonth()==l&&y==i&&(v.className+=" today",v.ttip+=Calendar._TT.PART_TODAY),-1!=m.indexOf(b.toString())&&(v.className+=v.otherMonth?" oweekend":" weekend"))}g||this.showsOtherMonths||(u.className="emptyrow")}this.date=new Date(t),this.onSetTime(),this.title.innerHTML=Calendar._MN[o]+", "+s,this.table.style.visibility="visible",this._initMultipleDates()},Calendar.prototype._initMultipleDates=function(){if(this.multiple)for(var e in this.multiple){var t=this.datesCells[e],a=this.multiple[e];a&&(t&&(t.className+=" selected"))}},Calendar.prototype._toggleMultipleDate=function(e){if(this.multiple){var t=e.print("%Y%m%d"),a=this.datesCells[t];if(a){this.multiple[t]?(Calendar.removeClass(a,"selected"),delete this.multiple[t]):(Calendar.addClass(a,"selected"),this.multiple[t]=e)}}},Calendar.prototype.setDateToolTipHandler=function(e){this.getDateToolTip=e},Calendar.prototype.setDate=function(e){e.equalsTo(this.date)||this._init(this.firstDayOfWeek,e)},Calendar.prototype.refresh=function(){this._init(this.firstDayOfWeek,this.date)},Calendar.prototype.setFirstDayOfWeek=function(e){this._init(e,this.date),this._displayWeekdays()},Calendar.prototype.setDateStatusHandler=Calendar.prototype.setDisabledHandler=function(e){this.getDateStatus=e},Calendar.prototype.setRange=function(e,t){this.minYear=e,this.maxYear=t},Calendar.prototype.callHandler=function(){this.onSelected&&this.onSelected(this,this.date.print(this.dateFormat))},Calendar.prototype.callCloseHandler=function(){this.onClose&&this.onClose(this)},Calendar.prototype.destroy=function(){this.element.parentNode.removeChild(this.element),Calendar._C=null,window._dynarch_popupCalendar=null},Calendar.prototype.reparent=function(e){var t=this.element;t.parentNode.removeChild(t),e.appendChild(t)},Calendar._checkCalendar=function(e){var t=window._dynarch_popupCalendar;if(!t)return!1;for(var a=Calendar.is_ie?Calendar.getElement(e):Calendar.getTargetElement(e);null!=a&&a!=t.element;a=a.parentNode);return null==a?(window._dynarch_popupCalendar.callCloseHandler(),Calendar.stopEvent(e)):void 0},Calendar.prototype.show=function(){if(!this.params.inputField.disabled){for(var e=this.table.getElementsByTagName("tr"),t=e.length;t>0;){var a=e[--t];Calendar.removeClass(a,"rowhilite");for(var n=a.getElementsByTagName("td"),r=n.length;r>0;){var l=n[--r];Calendar.removeClass(l,"hilite"),Calendar.removeClass(l,"active")}}Calendar.current=this,this.element.style.display="block",this.element.className+=" active",this.hidden=!1,this.isPopup&&(window._dynarch_popupCalendar=this,Calendar.addEvent(document,"keyup",Calendar._upkeyEvent),Calendar.addEvent(document,"keydown",Calendar._keyEvent),Calendar.addEvent(document,"mousedown",Calendar._checkCalendar))}},Calendar.prototype.hide=function(){this.isPopup&&(Calendar.removeEvent(document,"keyup",Calendar._upkeyEvent),Calendar.removeEvent(document,"keydown",Calendar._keyEvent),Calendar.removeEvent(document,"mousedown",Calendar._checkCalendar)),Calendar.current=null,this.element.style.display="none",this.element.className=this.element.className.replace(/active/gi,""),this.hidden=!0},Calendar.prototype.showAt=function(e,t){var a=this.element.style;a.left=e+"px",a.top=t+"px",this.show()},Calendar.prototype.showAtElement=function(e,t){function a(e){e.x<0&&(e.x=0),e.y<0&&(e.y=0);var t=document.createElement("div"),a=t.style;a.position="absolute",a.right=a.bottom=a.width=a.height="0px",document.body.appendChild(t);var n=Calendar.getAbsolutePos(t);document.body.removeChild(t),n.y+=jQuery(window).scrollTop(),n.x+=jQuery(window).scrollLeft();var r=e.x+e.width-n.x;r>0&&(e.x-=r),(r=e.y+e.height-n.y)>0&&(e.y-=r)}var n=this,r=Calendar.getAbsolutePos(e);if(!t||"string"!=typeof t)return this.showAt(r.x,r.y+e.offsetHeight),!0;this.element.style.display="block",Calendar.continuation_for_the_khtml_browser=function(){var l=jQuery(n.element).outerWidth(),i=jQuery(n.element).outerHeight();n.element.style.display="none";var s=t.substr(0,1),o="l";switch(t.length>1&&(o=t.substr(1,1)),s){case"T":r.y-=i;break;case"B":r.y+=jQuery(e).outerHeight();break;case"C":r.y+=(jQuery(e).outerHeight()-i)/2;break;case"t":r.y+=jQuery(e).outerHeight()-i}switch(o){case"L":r.x-=l;break;case"R":r.x+=jQuery(e).outerWidth();break;case"C":r.x+=(jQuery(e).outerWidth()-l)/2;break;case"l":r.x+=jQuery(e).outerWidth()-l}r.width=l,r.height=i+40,n.monthsCombo.style.display="none",a(r),n.showAt(r.x,r.y)},Calendar.continuation_for_the_khtml_browser()},Calendar.prototype.setDateFormat=function(e){this.dateFormat=e},Calendar.prototype.setTtDateFormat=function(e){this.ttDateFormat=e},Calendar.prototype.parseDate=function(e,t){t||(t=this.dateFormat),this.setDate(Date.parseDate(e,t))},Calendar.prototype._displayWeekdays=function(){for(var e=this.firstDayOfWeek,t=this.firstdayname,a=Calendar._TT.WEEKEND,n=0;n<7;++n){t.className="day name";var r=(n+e)%7;n&&(t.ttip=Calendar._TT.DAY_FIRST.replace("%s",Calendar._DN[r]),t.navtype=100,t.calendar=this,t.fdow=r,Calendar._add_evs(t)),-1!=a.indexOf(r.toString())&&Calendar.addClass(t,"weekend"),t.innerHTML=Calendar._SDN[(n+e)%7],t=t.nextSibling}},Calendar.prototype._hideCombos=function(){this.monthsCombo.style.display="none",this.yearsCombo.style.display="none"},Calendar.prototype._dragStart=function(ev){if(!this.dragging){this.dragging=!0;var posX,posY;Calendar.is_ie?(posY=window.event.clientY+document.body.scrollTop,posX=window.event.clientX+document.body.scrollLeft):(posY=ev.clientY+window.scrollY,posX=ev.clientX+window.scrollX);var st=this.element.style;with(this.xOffs=posX-parseInt(st.left),this.yOffs=posY-parseInt(st.top),Calendar)addEvent(document,"mousemove",calDragIt),addEvent(document,"mouseup",calDragEnd)}},Date._MD=new Array(31,28,31,30,31,30,31,31,30,31,30,31),Date.SECOND=1e3,Date.MINUTE=60*Date.SECOND,Date.HOUR=60*Date.MINUTE,Date.DAY=24*Date.HOUR,Date.WEEK=7*Date.DAY,Date._multisplit=function(e,t){if(null==e)return null;null==t&&(t="");var a=[],n=e.length,r="",l=!1;for(i=0;i<n;i++){var s=e.charAt(i);-1==t.indexOf(s)?(l=!0,r+=s):l&&(a[a.length]=r,r="",l=!1)}return r.length>0&&(a[a.length]=r),0==a.length&&(a[a.length]=""),a},Date._parseNonDateFormatChars=function(e){var t="",a=e.length;for(i=0;i<a;i++){var n=e.charAt(i);if("%"==n){var r="";if(i+1<a&&(r=e.charAt(i+1)),i+=1,r.length>0&&-1!="aAbBCdeHIJklmMnpPRSstUWVuwyY%".indexOf(r))continue;-1==t.indexOf(n)&&(t+=n),r.length>0&&-1==t.indexOf(r)&&(t+=r)}else-1==t.indexOf(n)&&(t+=n)}return t},Date.splitDate=function(e,t){var a=(new Date,0),n=-1,r=0,l=Date._parseNonDateFormatChars(t),i=Date._multisplit(e,l),s=t.match(/%./g),o=0,d=0,h=0,u=0;for(o=0;o<i.length;++o)if(i[o])switch(s[o]){case"%d":case"%e":r=Number(i[o]);break;case"%m":n=Number(i[o])-1;break;case"%Y":case"%y":a=Number(i[o]),a<100&&(a+=a>29?1900:2e3);break;case"%b":case"%B":var c=i[o].toLowerCase(),m=!1;if("%b"==s[o])for(d=0;d<12;++d)if(Calendar._SMN[d].substr(0,c.length).toLowerCase()==c){n=d,m=!0;break}if(!m)for(d=0;d<12;++d)if(Calendar._MN[d].substr(0,c.length).toLowerCase()==c){n=d;break}break;case"%H":case"%I":case"%k":case"%l":h=Number(i[o]);break;case"%P":case"%p":/pm/i.test(i[o])&&h<12?h+=12:/am/i.test(i[o])&&h>=12&&(h-=12);break;case"%M":u=Number(i[o]);break;case"%R":var C=i[o],p=C.indexOf(":"),v=C.substring(0,p),f=-1==p?0:C.substring(p+1);h=Number(v),u=Number(f)}return{parts:i,year:a,month:n,day:r,hour:h,minute:u}},Date.parseDate=function(e,t){var a=new Date,n=Date.splitDate(e,t),r=n.parts,l=n.year,i=n.month,s=n.day,o=n.hour,d=n.minute,h=0,u=0;if(isNaN(l)&&(l=a.getFullYear()),isNaN(i)&&(i=a.getMonth()),isNaN(s)&&(s=a.getDate()),isNaN(o)&&(o=a.getHours()),isNaN(d)&&(d=a.getMinutes()),0!=l&&-1!=i&&0!=s)return new Date(l,i,s,o,d,0);for(l=0,i=-1,s=0,h=0;h<r.length;++h)if(-1!=r[h].search(/[a-zA-Z]+/)){var c=-1;for(u=0;u<12;++u)if(Calendar._MN[u].substr(0,r[h].length).toLowerCase()==r[h].toLowerCase()){c=u;break}-1!=c&&(-1!=i&&(s=i+1),i=c)}else Number(r[h])<=12&&-1==i?i=r[h]-1:Number(r[h])>31&&0==l?(l=Number(r[h]))<100&&(l+=l>29?1900:2e3):0==s&&(s=r[h]);return 0==l&&(l=a.getFullYear()),-1!=i&&0!=s?new Date(l,i,s,o,d,0):a},Date.prototype.getMonthDays=function(e){var t=this.getFullYear();return void 0===e&&(e=this.getMonth()),0!=t%4||0==t%100&&0!=t%400||1!=e?Date._MD[e]:29},Date.prototype.getDayOfYear=function(){var e=new Date(this.getFullYear(),this.getMonth(),this.getDate(),13,0,0),t=new Date(this.getFullYear(),0,0,13,0,0),a=e-t;return Math.floor(a/Date.DAY)},Date.prototype.getWeekNumber=function(e){return Date.useISO8601WeekNumbers?this.getISO8601WeekNumber():this.getSimpleWeekNumber(e)},Date.prototype.getISO8601WeekNumber=function(){function e(e,t,a){return y=e,m=t,t<3&&(y-=1),t<3&&(m+=12),Math.floor(365.25*y)-Math.floor(y/100)+Math.floor(y/400)+Math.floor(30.6*(m+1))+a-62}return function(t){return year=t.getFullYear(),month=t.getMonth(),day=t.getDate(),wday=t.getDay(),weekday=(wday+6)%7+1,isoyear=year,d0=e(year,1,0),weekday0=(d0+4)%7+1,d=e(year,month+1,day),isoweeknr=Math.floor((d-d0+weekday0+6)/7)-Math.floor((weekday0+3)/7),11==month&&day-weekday>27&&(isoweeknr=1,isoyear+=1),0==month&&weekday-day>3&&(d0=e(year-1,1,0),weekday0=(d0+4)%7+1,isoweeknr=Math.floor((d-d0+weekday0+6)/7)-Math.floor((weekday0+3)/7),isoyear-=1),isoweeknr}(this)},Date.prototype.getSimpleWeekNumber=function(e){return function(e,t,a){var n,r=e.getFullYear(),l=new Date(r,0,1);return n=Math.round((e-l)/864e5),null!=t&&(n-=(7+t-l.getDay())%7),null!=a&&(n+=a),[r,1+n/7|0,1+(7+n)%7]}(this,e||6,6)[1]},Date.prototype.equalsTo=function(e){return this.getFullYear()==e.getFullYear()&&this.getMonth()==e.getMonth()&&this.getDate()==e.getDate()&&this.getHours()==e.getHours()&&this.getMinutes()==e.getMinutes()},Date.prototype.setDateOnly=function(e){var t=new Date(e);this.setDate(1),this.setFullYear(t.getFullYear()),this.setMonth(t.getMonth()),this.setDate(t.getDate())},Date.prototype.print=function(e){var t=this.getMonth(),a=this.getDate(),n=this.getFullYear(),r=this.getWeekNumber(),l=this.getDay(),i={},s=this.getHours(),o=s>=12,d=o?s-12:s,h=this.getDayOfYear();0==d&&(d=12);var u=this.getMinutes(),c=this.getSeconds();i["%a"]=Calendar._SDN[l],i["%A"]=Calendar._DN[l],i["%b"]=Calendar._SMN[t],i["%B"]=Calendar._MN[t],i["%C"]=1+Math.floor(n/100),i["%d"]=a<10?"0"+a:a,i["%e"]=a,i["%H"]=s<10?"0"+s:s,i["%I"]=d<10?"0"+d:d,i["%j"]=h<100?h<10?"00"+h:"0"+h:h,i["%k"]=s,i["%l"]=d,i["%m"]=t<9?"0"+(1+t):1+t,i["%M"]=u<10?"0"+u:u,i["%n"]="\n",i["%p"]=o?Calendar._TT.PM:Calendar._TT.AM,i["%P"]=o?Calendar._TT.PM:Calendar._TT.AM,i["%R"]=i["%k"]+":"+i["%M"],i["%s"]=Math.floor(this.getTime()/1e3),i["%S"]=c<10?"0"+c:c,i["%t"]="\t",i["%U"]=i["%W"]=i["%V"]=r<10?"0"+r:r,i["%u"]=l+1,i["%w"]=l,i["%y"]=(""+n).slice(-2),i["%Y"]=n,i["%%"]="%";var m=/%./g;if(!Calendar.is_ie5&&!Calendar.is_khtml)return e.replace(m,function(e){return i[e]||e});for(var C=e.match(m),p=0;p<C.length;p++){var v=i[C[p]];v&&(m=new RegExp(C[p],"g"),e=e.replace(m,v))}return e},Date.prototype.__msh_oldSetFullYear=Date.prototype.setFullYear,Date.prototype.setFullYear=function(){var e=new Date(this);e.__msh_oldSetFullYear.apply(this,arguments),e.getMonth()!=this.getMonth()&&this.setDate(28),this.__msh_oldSetFullYear.apply(this,arguments)},window._dynarch_popupCalendar=null;;
;
/* module-key = 'jira.webresources:calendar-lib', location = '/includes/lib/calendar/Calendar.setup.js' */
!function(e,t){Calendar.setup=function(a){function n(e,t){void 0===a[e]&&(a[e]=t)}function l(t){var a=t.params,n=t.dateClicked||a.electric;n&&a.inputField&&(a.inputField.value=t.date.print(a.ifFormat),e(a.inputField).change()),n&&a.displayArea&&(a.displayArea.innerHTML=t.date.print(a.daFormat)),n&&"function"==typeof a.onUpdate&&a.onUpdate(t),n&&a.flat&&"function"==typeof a.flatCallback&&a.flatCallback(t),"true"===a.singleClick?a.singleClick=!0:"false"===a.singleClick&&(a.singleClick=!1),n&&a.singleClick&&t.dateClicked&&t.callCloseHandler()}function i(){if(!0===Calendar._UNSUPPORTED)return void alert("The JIRA Calendar does not currently support your language.");var e=a.inputField||a.displayArea,t=a.inputField?a.ifFormat:a.daFormat,n=!1,i=window.calendar;if(i&&i.hide(),e&&(e.value||e.innerHTML)&&(a.date=Date.parseDate(e.value||e.innerHTML,t)),i&&a.cache?(a.date&&i.setDate(a.date),i.hide()):(window.calendar=i=new Calendar(a.firstDay,a.date,a.todayDate,a.onSelect||l,a.onClose||function(e){e.hide()}),i.showsTime=a.showsTime,i.time24="24"==a.timeFormat,i.weekNumbers=a.weekNumbers,Date.useISO8601WeekNumbers=a.useISO8601WeekNumbers,a.useISO8601WeekNumbers&&(i.firstDayOfWeek=1),n=!0),a.multiple){i.multiple={};for(var r=a.multiple.length;--r>=0;){var u=a.multiple[r],o=u.print("%Y%m%d");i.multiple[o]=u}}return i.showsOtherMonths=a.showOthers,i.yearStep=a.step,i.setRange(a.range[0],a.range[1]),i.params=a,i.setDateStatusHandler(a.dateStatusFunc),i.getDateText=a.dateText,i.setDateFormat(t),n&&i.create(),i.refresh(),a.position?i.showAt(a.position[0],a.position[1]):i.showAtElement(a.button||a.displayArea||a.inputField,a.align),!1}a=a||{},n("inputField",null),n("context",null),n("displayArea",null),n("button",null),n("eventName","click"),n("ifFormat","%Y/%m/%d"),n("daFormat","%Y/%m/%d"),n("singleClick",!0),n("disableFunc",null),n("dateStatusFunc",a.disableFunc),n("dateText",null),n("firstDay",null),n("align","Br"),n("range",[1900,2999]),n("weekNumbers",!0),n("useISO8601WeekNumbers",!1),n("flat",null),n("flatCallback",null),n("onSelect",null),n("onClose",null),n("onUpdate",null),n("date",null),n("todayDate",null),n("showsTime",!1),n("timeFormat","24"),n("electric",!0),n("step",1),n("position",null),n("cache",!1),n("showOthers",!1),n("multiple",null);var r,u,o=["context","inputField","button","displayArea"];for(r in o)u=o[r],a[u]instanceof e&&(a[u]=a[u][0]);var s=["inputField","displayArea","button"];for(r in s)if(u=s[r],"string"==typeof a[u]){var d="#"+e.escapeSelector(a[u]),p=e(a.context||document.body).find(d);a[u]=p[0]}if(!(a.flat||a.multiple||a.inputField||a.displayArea||a.button))return t.log("Calendar.setup:\n  Nothing to setup (no fields found).  Please check your code"),!1;if(a.firstDay&&null!==a.firstDay&&(a.firstDay=+a.firstDay),null!=a.flat){if("string"==typeof a.flat&&(a.flat=document.getElementById(a.flat)),!a.flat)return t.log("Calendar.setup:\n  Flat specified but can't find parent."),!1;var c=new Calendar(a.firstDay,a.date,a.todayDate,a.onSelect||l);return c.showsOtherMonths=a.showOthers,c.showsTime=a.showsTime,c.time24="24"==a.timeFormat,c.params=a,c.weekNumbers=a.weekNumbers,c.setRange(a.range[0],a.range[1]),c.setDateStatusHandler(a.dateStatusFunc),c.getDateText=a.dateText,a.ifFormat&&c.setDateFormat(a.ifFormat),a.inputField&&"string"==typeof a.inputField.value&&c.parseDate(a.inputField.value),c.create(a.flat),c.show(),!1}var f=a.button||a.displayArea||a.inputField;return e(f).bind(a.eventName,function(e){e.preventDefault(),i()}),a.inputField&&function(){var t=e(a.inputField);a.button&&e(a.button).mousedown(function(e){e.preventDefault(),!t.is(":focus")&&t.is(":enabled")&&t.focus()}),t.keydown(function(e){var t=window.calendar;40===e.keyCode&&(t&&!t.hidden||setTimeout(function(){i()},1))})}(),c}}(require("jquery"),require("jira/util/logger"));;
;
/* module-key = 'jira.webresources:calendar', location = '/includes/lib/calendar/Calendar-layerable.js' */
define("jira/libs/calendar-layerable-mixin",["jira/ajs/layer/layer-interactions","jira/ajs/layer/inline-layer","jira/util/events"],function(e,n,i){"use strict";function r(r){e.preventDialogHide(r),e.preventInputBlur(r),e.preventInlineEditCancel(r),i.bind(n.EVENTS.beforeHide,function(e){r.current&&e.preventDefault()})}return{layerableExtensions:r}});;
;
/* module-key = 'jira.webresources:calendar', location = '/includes/lib/calendar/Calendar-amd.js' */
define("jira/libs/calendar",["require"],function(a){"use strict";var e=window.Calendar;return a("jira/libs/calendar-layerable-mixin").layerableExtensions(e),e}),function(){"use strict";var a=require("jira/libs/calendar");AJS.namespace("window.Calendar",window,a)}();;
;
/* module-key = 'jira.webresources:group-label-lozenge', location = '/includes/jira/admin/group-browser/group-label-lozenge.js' */
define("jira/admin/group-browser/group-label-lozenge",["jquery","jira/skate"],function(e,t){t("group-label-lozenge",{type:t.type.CLASSNAME,attached:function(t){e(t).tooltip({gravity:"w",html:!0})}})});;
;
/* module-key = 'jira.webresources:group-label-lozenge', location = '/includes/jira/admin/group-browser/group-label-lozenge.soy' */
// This file was automatically generated from group-label-lozenge.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }


JIRA.Templates.groupLabelLozenge = function(opt_data, opt_ignored) {
  return '' + aui.lozenges.lozenge({text: opt_data.label.text, title: opt_data.label.title, isSubtle: true, extraClasses: 'group-label-lozenge'});
};
if (goog.DEBUG) {
  JIRA.Templates.groupLabelLozenge.soyTemplateName = 'JIRA.Templates.groupLabelLozenge';
}
;
;
/* module-key = 'jira.webresources:groupbrowser', location = '/includes/jira/admin/group-browser/group-browser.js' */
require(["jquery","jira/admin/group-browser/group-label-lozenge"],function(i){i(function(){i(".operations-list .aui-button[disabled]").tooltip({gravity:"e",html:!1})})});;
;
/* module-key = 'jira.webresources:group-pickers', location = '/includes/jira/field/groupPickerUtil.js' */
define("jira/field/group-picker-util",["jira/ajs/list/item-descriptor","jira/ajs/list/group-descriptor","jquery"],function(e,i,r){var t=function(t,a){var n=[],s=a?JIRA.Templates.GroupPickerUtil.formatResponseWithLabels:JIRA.Templates.GroupPickerUtil.formatResponse;return r(t).each(function(t,a){var u=new i({weight:t,label:a.header});r(a.groups).each(function(){u.addItem(new e({value:this.name,label:this.name,title:this.name,html:s(this),highlighted:!0}))}),n.push(u)}),n};return{formatResponseWithLabels:function(e){return t(e,!0)},formatResponse:function(e,i){return t(e,i)}}}),AJS.namespace("JIRA.GroupPickerUtil",null,require("jira/field/group-picker-util"));;
;
/* module-key = 'jira.webresources:group-pickers', location = '/includes/jira/field/templates/groupPickerUtil.soy' */
// This file was automatically generated from groupPickerUtil.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.GroupPickerUtil.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.GroupPickerUtil == 'undefined') { JIRA.Templates.GroupPickerUtil = {}; }


JIRA.Templates.GroupPickerUtil.formatResponseWithLabels = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.GroupPickerUtil.formatResponse(soy.$$augmentMap(opt_data, {showLabels: true}));
};
if (goog.DEBUG) {
  JIRA.Templates.GroupPickerUtil.formatResponseWithLabels.soyTemplateName = 'JIRA.Templates.GroupPickerUtil.formatResponseWithLabels';
}


JIRA.Templates.GroupPickerUtil.formatResponse = function(opt_data, opt_ignored) {
  var output = '<div class="group-suggestion-item"><span class="group-suggestion-item__name">' + soy.$$filterNoAutoescape(opt_data.html) + '</span>';
  if (opt_data.showLabels) {
    output += '<span class="group-suggestion-item__labels group-labels-lozenges">';
    var labelList13 = opt_data.labels;
    var labelListLen13 = labelList13.length;
    for (var labelIndex13 = 0; labelIndex13 < labelListLen13; labelIndex13++) {
      var labelData13 = labelList13[labelIndex13];
      output += JIRA.Templates.groupLabelLozenge({label: labelData13}) + ' ';
    }
    output += '</span>';
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.GroupPickerUtil.formatResponse.soyTemplateName = 'JIRA.Templates.GroupPickerUtil.formatResponse';
}
;
;
/* module-key = 'jira.webresources:group-pickers', location = '/includes/jira/field/initMultiGroupPickers.js' */
define("jira/field/init-multi-group-pickers",["jquery","wrm/context-path","jira/ajs/select/multi-select","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/field/group-picker-util"],function(e,t,i,r,a,s,n){"use strict";function u(t){t.find(".js-default-multi-group-picker").each(function(){var t=e(this),r=!0===t.data("show-labels"),a=t.data("user-name");new i({element:this,itemAttrDisplayed:"label",showDropdownButton:!1,ajaxOptions:{data:function(e){return{userName:a,query:e,exclude:t.val()}},url:l+"/rest/api/2/groups/picker",query:!0,formatResponse:r?n.formatResponseWithLabels:n.formatResponse}})})}var l=t();s.bind(a.NEW_CONTENT_ADDED,function(e,t,i){i!==r.panelRefreshed&&u(t)})});;
;
/* module-key = 'jira.webresources:group-pickers', location = '/includes/jira/field/initSingleGroupPickers.js' */
define("jira/field/init-single-group-pickers",["jira/ajs/select/single-select","jquery","wrm/context-path","jira/ajs/list/item-descriptor","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/field/group-picker-util"],function(e,t,i,a,n,r,s,l){"use strict";function u(i){i.find(".js-default-single-group-picker").each(function(){var i=t(this),n=i.find("option[data-empty]"),r=!0===i.data("show-labels"),s=i.data("user-name");new e({element:this,itemAttrDisplayed:"label",revertOnInvalid:!0,ajaxOptions:{data:function(e){return{userName:s,query:e,exclude:i.val()}},url:o+"/rest/api/2/groups/picker",query:!0,formatResponse:function(e){var t=l.formatResponse(e,r);return n.length&&""!==i.val()&&t.unshift(new a({value:"",label:n.text(),highlighted:!0})),t}}})})}var o=i();s.bind(r.NEW_CONTENT_ADDED,function(e,t,i){i!==n.panelRefreshed&&u(t)})});;
;
/* module-key = 'jira.webresources:group-pickers', location = '/includes/jira/field/init/init-group-pickers-webresource.js' */
require("jira/field/init-multi-group-pickers"),require("jira/field/init-single-group-pickers");;
;
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/userPickerUtil.js' */
define("jira/field/user-picker-util",["jira/ajs/list/item-descriptor","jira/ajs/list/group-descriptor","jquery"],function(e,i,r){return{formatResponse:function(t){var a=[];return r(t).each(function(t,l){var s=new i({weight:t,label:l.footer});r(l.users).each(function(){s.addItem(new e({value:this.name,label:this.displayName,html:this.html,icon:this.avatarUrl,allowDuplicate:!1,highlighted:!0,userKey:this.key}))}),a.push(s)}),a}}}),AJS.namespace("JIRA.UserPickerUtil",null,require("jira/field/user-picker-util"));;
;
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/initSingleUserPickers.js' */
define("jira/field/init-single-user-pickers",["jquery","wrm/context-path","jira/ajs/select/single-select","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/field/user-picker-util","jira/util/formatter"],function(e,t,i,r,a,s,n,u){"use strict";function o(t){e(".js-default-user-picker",t).each(function(){var t=e(this);if(!t.data("aui-ss")){var r={showAvatar:!0},a=t.data("inputValue");new i({element:t,submitInputVal:!0,showDropdownButton:!!t.data("show-dropdown-button"),errorMessage:u.format("There is no user \'\'{0}\'\'.","'{0}'"),ajaxOptions:{url:l+"/rest/api/2/user/picker",query:!0,data:r,formatResponse:n.formatResponse},inputText:a})}})}var l=t();s.bind(a.NEW_CONTENT_ADDED,function(e,t,i){i!==r.panelRefreshed&&o(t)})});;
;
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/NoBrowseUserNamePicker.js' */
define("jira/field/no-browser-user-name-picker",["require"],function(e){"use strict";var t=e("jquery"),r=e("jira/ajs/list/item-descriptor"),i=e("jira/ajs/select/multi-select"),a=e("jira/util/formatter"),n=e("wrm/context-path"),s=n();return i.extend({_getDefaultOptions:function(){return t.extend(!0,this._super(),{errorMessage:"The requested user does not exist.",showDropdownButton:!1,removeOnUnSelect:!0,itemAttrDisplayed:"label"})},_handleCharacterInput:function(){},_setSuggestions:function(){},_handleServerError:function(e){404===e.status?this.showErrorMessage():this._super()},_deactivate:function(){this.validateAndAdd()},validateAndAdd:function(){var e=this;""===t.trim(this.$field.val())?this.hideErrorMessage():t.ajax({url:s+"/rest/api/2/user",data:{username:t.trim(e.getQueryVal())},success:function(t){e.hideErrorMessage(),e.$field.val(""),e.addItem(new r({label:t.displayName,value:t.name}))},error:function(){e.showErrorMessage()}})},_handleSpace:function(){this.validate()},_handleServerSuggestions:function(){this.hideErrorMessage(),this.handleFreeInput()},handleFreeInput:function(){var e=t.trim(this.$field.val());""!==e&&(this.addItem({value:e,label:e}),this.model.$element.trigger("change")),this.$field.val("")},keys:{Return:function(e){e.preventDefault(),this.validateAndAdd()},Spacebar:function(e){e.preventDefault(),this.validateAndAdd()}}})}),AJS.namespace("AJS.NoBrowseUserNamePicker",null,require("jira/field/no-browser-user-name-picker"));;
;
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/initMultiUserPickers.js' */
define("jira/field/init-multi-user-pickers",["jquery","wrm/context-path","jira/ajs/select/multi-select","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/field/no-browser-user-name-picker","jira/field/user-picker-util"],function(e,t,r,i,n,s,a,u){function l(t){t.find(".js-default-multi-user-picker").each(function(){var t=e(this);AJS.params.currentUserCanBrowseUsers?new r({element:this,itemAttrDisplayed:"label",showDropdownButton:!1,removeOnUnSelect:!0,submitInputVal:!0,ajaxOptions:{url:o+"/rest/api/1.0/users/picker",query:!0,data:function(e){return{showAvatar:!0,query:e,exclude:t.val()}},formatResponse:u.formatResponse}}):new a({element:this})})}var o=t();s.bind(n.NEW_CONTENT_ADDED,function(e,t,r){r!==i.panelRefreshed&&l(t)})});;
;
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/init/init-user-pickers-webresource.js' */
require("jira/field/init-multi-user-pickers"),require("jira/field/init-single-user-pickers");;
;
/* module-key = 'jira.webresources:jira-project-issuetype-fields', location = '/includes/jira/field/ProjectIssueTypeSelect.js' */
define("jira/field/project-issue-type-select",["jira/lib/class"],function(e){return e.extend({init:function(e){var s,t=this;this.$project=e.project,this.issueTypeSelect=e.issueTypeSelect,this.$projectIssueTypesSchemes=e.projectIssueTypesSchemes,this.$issueTypeSchemeIssueDefaults=e.issueTypeSchemeIssueDefaults,this.projectIssueTypeSchemes=JSON.parse(this.$projectIssueTypesSchemes.html()),this.issueTypesSchemeDefaults=JSON.parse(this.$issueTypeSchemeIssueDefaults.html()||"[]"),t.$project.length>0&&(s=t.$project.val(),t.setIssueTypeScheme(t.getIssueTypeSchemeForProject(s)),this.$project.change(function(){var e=t.$project.val();t.setIssueTypeScheme(t.getIssueTypeSchemeForProject(e))}))},getIssueTypeSchemeForProject:function(e){return this.projectIssueTypeSchemes[e]},getDefaultIssueTypeForScheme:function(e){return this.issueTypesSchemeDefaults[e]},setIssueTypeScheme:function(e){var s=this.issueTypeSelect.model.getValue();this.issueTypeSelect.model.setFilterGroup(e),this.issueTypeSelect.model.setSelected(s,!1)||this.setDefaultIssueType(e),this.issueTypeSelect.model.$element.data("project",this.$project.val())},setDefaultIssueType:function(e){var s=this.getDefaultIssueTypeForScheme(e),t=this.issueTypeSelect.model.getDescriptor(s);t||(t=this.issueTypeSelect.model.getAllDescriptors()[0]),this.issueTypeSelect.setSelection(t,!1)}})}),AJS.namespace("JIRA.ProjectIssueTypeSelect",null,require("jira/field/project-issue-type-select"));;
;
/* module-key = 'jira.webresources:jira-project-issuetype-fields', location = '/includes/jira/field/initProjectIssueTypeSelect.js' */
define("jira/field/init-project-issue-type-select",["jira/ajs/select/suggestion-collection-model","jquery","jira/ajs/select/single-select","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/field/project-issue-type-select"],function(e,t,i,s,n,l,r){function c(s){var n=s||t("body");n.find(".issuetype-field").each(function(s){var l=n.find(".project-field, .project-field-readonly"),c=t(this),d=n.find("#"+c.attr("id")+"-projects"),o=n.find("#"+c.attr("id")+"-defaults"),a=new i({element:c,revertOnInvalid:!0,model:e});a.model.remove(""),l.length>0&&new r({project:l.eq(s),issueTypeSelect:a,projectIssueTypesSchemes:d,issueTypeSchemeIssueDefaults:o})})}l.bind(n.NEW_CONTENT_ADDED,function(e,t,i){i!==s.panelRefreshed&&c(t)})});;
;
/* module-key = 'jira.webresources:jira-project-issuetype-fields', location = '/includes/jira/field/initProjectPickers.js' */
define("jira/field/init-project-pickers",["jira/ajs/select/scrollable-single-select","jira/ajs/select/suggestion-collection-model","jira/util/events/reasons","jira/util/events/types","jira/util/events"],function(e,i,n,t,l){function s(n){n.find(".project-field").each(function(){new e({element:this,revertOnInvalid:!0,pageSize:50,pagingThreshold:100,model:i})})}l.bind(t.NEW_CONTENT_ADDED,function(e,i,t){t!==n.panelRefreshed&&s(i)})});;
;
/* module-key = 'jira.webresources:jira-project-issuetype-fields', location = '/includes/jira/field/init/init-jira-project-issuetype-fields-webresource.js' */
require("jira/field/init-project-issue-type-select"),require("jira/field/init-project-pickers");;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/field-templates.soy' */
// This file was automatically generated from field-templates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Fields.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Fields == 'undefined') { JIRA.Templates.Fields = {}; }


JIRA.Templates.Fields.username = function(opt_data, opt_ignored) {
  return '' + ((opt_data.escape) ? soy.$$escapeHtml(opt_data.displayName) : soy.$$filterNoAutoescape(opt_data.displayName));
};
if (goog.DEBUG) {
  JIRA.Templates.Fields.username.soyTemplateName = 'JIRA.Templates.Fields.username';
}


JIRA.Templates.Fields.recipientUsername = function(opt_data, opt_ignored) {
  return '<li data-username="' + soy.$$escapeHtml(opt_data.username) + '" title=' + soy.$$escapeHtml(opt_data.username) + '><span><span class="user-hover" rel="' + soy.$$escapeHtml(opt_data.username) + '"><img alt="" src="' + soy.$$escapeHtml(opt_data.icon) + '" title="' + JIRA.Templates.Fields.username(opt_data) + '"><span title="' + JIRA.Templates.Fields.username(opt_data) + '">' + JIRA.Templates.Fields.username(opt_data) + '</span></span>' + ((! opt_data.readOnly) ? '<button type="button" class="remove-recipient item-delete"><span class="icon-default aui-icon aui-icon-small aui-iconfont-delete">' + soy.$$escapeHtml(AJS.format('Remove watcher: {0}',opt_data.username)) + '</span></button>' : '') + '</span></li>';
};
if (goog.DEBUG) {
  JIRA.Templates.Fields.recipientUsername.soyTemplateName = 'JIRA.Templates.Fields.recipientUsername';
}


JIRA.Templates.Fields.recipientEmail = function(opt_data, opt_ignored) {
  return '<li data-email="' + soy.$$escapeHtml(opt_data.email) + '" title=' + soy.$$escapeHtml(opt_data.email) + '><span><img src="' + soy.$$escapeHtml(opt_data.icon) + '" title="' + soy.$$escapeHtml(opt_data.email) + '"><span title="' + soy.$$escapeHtml(opt_data.email) + '">' + soy.$$escapeHtml(opt_data.email) + '</span><span class="remove-recipient item-delete"><span class="icon-default aui-icon aui-icon-small aui-iconfont-delete"></span></span></span></li>';
};
if (goog.DEBUG) {
  JIRA.Templates.Fields.recipientEmail.soyTemplateName = 'JIRA.Templates.Fields.recipientEmail';
}
;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/LabelPicker.js' */
define("jira/field/label-picker",["jira/util/formatter","jira/ajs/select/multi-select","jira/ajs/list/group-descriptor","jira/ajs/list/item-descriptor","wrm/context-path","jquery"],function(e,t,i,s,a,l){var n=a();return t.extend({_getDefaultOptions:function(){return l.extend(!0,this._super(),{ajaxOptions:{url:n+"/includes/js/ajs/layer/labeldata.js",query:!0,formatResponse:this._formatResponse},removeDuplicates:!0,removeOnUnSelect:!0,userEnteredOptionsMsg:"New Label"})},isValidItem:function(e){return!/\s/.test(e)},_handleServerSuggestions:function(e){e&&e.token&&l.trim(this.$field.val())!==e.token||this._super(e)},_handleSpace:function(){""!==l.trim(this.$field.val())&&this.handleFreeInput()&&this.hideSuggestions()},keys:{Spacebar:function(e){this._handleSpace(),e.preventDefault()}},_formatResponse:function(t){var a=new i({label:"Suggestions",type:"optgroup",styleClass:"labels-suggested"});return t&&t.suggestions&&l.each(t.suggestions,function(){a.addItem(new s({value:this.label,label:this.label,html:this.html,highlighted:!0}))}),[a]},handleFreeInput:function(){var e=l.trim(this.$field.val()).match(/\S+/g);if(e){for(var t,i=0;t=e[i];i++)this.addItem({value:t,label:t});this.model.$element.trigger("change")}this.$field.val("")}})}),AJS.namespace("AJS.LabelPicker",null,require("jira/field/label-picker")),AJS.namespace("JIRA.LabelPicker",null,require("jira/field/label-picker"));;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/LabelPickerFactory.js' */
define("jira/field/label-picker-factory",["jira/field/label-picker","jira/data/parse-options-from-fieldset","wrm/context-path","jquery","exports"],function(e,t,i,a,r){"use strict";r.createPicker=function(r,s){var d=t(r),l=a("#"+d.id,s),c=d.issueId,o={};/customfield_\d/.test(d.id)&&(o.customFieldId=parseInt(d.id.replace("customfield_",""),10)),new e({element:l,ajaxOptions:{url:i()+"/rest/api/1.0/labels"+(c?"/"+c:"")+"/suggest",data:o}})}});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/MultiUserListPicker.Item.js' */
define("jira/field/multi-user-list-picker/item",["jira/util/data/meta","jira/util/strings","jira/ajs/control","jquery"],function(e,t,i,n){"use strict";return i.extend({init:function(e){this._setOptions(e),this.$lozenge=this._render("item"),this.$removeButton=this.$lozenge.find(".remove-recipient"),this._assignEvents("instance",this),this._assignEvents("lozenge",this.$lozenge),this._assignEvents("removeButton",this.$removeButton),this.$lozenge.prependTo(this.options.container)},_getDefaultOptions:function(){return{label:null,title:null,container:null,focusClass:"focused"}},_renders:{item:function(){var i,s=this.options.descriptor;return!0!==s.noExactMatch()?(i={escape:!1,username:s.value(),icon:s.icon(),displayName:t.escapeHtml(s.label())},n(JIRA.Templates.Fields.recipientUsername(i))):(i={email:s.value(),icon:e.get("default-avatar-url")},n(JIRA.Templates.Fields.recipientEmail(i)))}},_events:{instance:{remove:function(){this.$lozenge.remove()}},removeButton:{click:function(e){e.stopPropagation(),this.trigger("remove")}}}})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/MultiUserListPicker.js' */
define("jira/field/multi-user-list-picker",["jira/util/formatter","jira/field/multi-user-list-picker/item","jira/ajs/select/suggestions/user-list-suggest-handler","jira/ajs/select/multi-select","jira/ajs/list/item-descriptor","jira/ajs/list/group-descriptor","jira/ajs/group","wrm/context-path","jquery"],function(e,t,i,r,s,n,a,l,u){"use strict";var o=l();return r.extend({init:function(r){function l(e){var t=[];return u(e).each(function(e,i){var r=new n({weight:e,label:i.footer});u(i.users).each(function(){r.addItem(new s({value:this.name,label:this.displayName,html:this.html,icon:this.avatarUrl,allowDuplicate:!1,highlighted:!0}))}),t.push(r)}),t}u.extend(r,{itemAttrDisplayed:"label",userEnteredOptionsMsg:"Email address",showDropdownButton:!1,removeOnUnSelect:!0,ajaxOptions:{url:o+"/rest/api/1.0/users/picker",query:!0,data:{showAvatar:!0},formatResponse:l},suggestionsHandler:i,itemGroup:new a,itemBuilder:function(e){return new t({descriptor:e,container:this.$selectedItemsContainer})}}),this._super(r)},_createFurniture:function(e){this._super(e),this.options.description&&this._render("description",this.options.description).insertAfter(this.$field)},updateItemsIndent:u.noop,_renders:{selectedItemsWrapper:function(){return u('<div class="recipients" />')},selectedItemsContainer:function(){return u("<ol />")},description:function(e){return u("<div />").addClass("description").text(e)}}})}),AJS.namespace("JIRA.MultiUserListPicker",null,require("jira/field/multi-user-list-picker")),AJS.namespace("JIRA.MultiUserListPicker.Item",null,require("jira/field/multi-user-list-picker/item"));;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initCascadingSelects.js' */
define("jira/field/init-cascading-selects",["jquery","jira/util/events/reasons","jira/util/events/types","jira/util/events"],function(e,i,n,t){function a(i){e(i||document.body).find("div.aui-field-cascadingselect").add("tr.aui-field-cascadingselect").add("td.aui-field-cascadingselect").each(function(){function i(){var i,n=t.find("option:selected").attr("class");n!==a&&(i=e("<span />").insertAfter(d),d.detach(),d.find("option").each(function(e,i){i.parentNode.removeChild(this)}),d.insertAfter(i),i.remove(),c.filter("."+t.find("option:selected").attr("class")).appendTo(d),s.hasClass(t.find("option:selected").attr("class"))?d.val(s.val()):d.val(d.find("option:first").val()),a=n)}var n=e(this),t=n.find(".cascadingselect-parent"),a=(t.find("option"),""),d=n.find(".cascadingselect-child"),c=d.find("option"),s=d.find(":selected");t.bind("cascadingSelectChanged",i).change(function(){e(this).trigger("cascadingSelectChanged")}).trigger("cascadingSelectChanged")})}t.bind(n.NEW_CONTENT_ADDED,function(e,n,t){t!==i.panelRefreshed&&a(n)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/ComponentPicker.js' */
define("jira/field/component-picker",["jira/util/formatter","jira/util/events","jira/ajs/select/suggestions/only-new-items-suggest-handler","jira/ajs/select/multi-select","underscore","jquery"],function(e,t,n,s,i,r){return s.extend({init:function(e){this._super(e),this.suggestionsHandler=new n(this.options,this.model)},_getDefaultOptions:function(t){var n=!1;return t&&t.element&&(n=r(t.element).data("create-permission")),n?r.extend(!0,this._super(),{userEnteredOptionsMsg:"New Component"}):this._super(t)},_selectionHandler:function(e,n){var s=this.model.getDisplayableSelectedDescriptors().concat(this.model.getDisplayableUnSelectedDescriptors()),r=e.data("descriptor");i.find(s,function(e){return e.label()===r.label()})||(r.properties.value="nv_"+r.value(),t.trigger("Issue.Component.new.selected",[r.value()])),this._super(e,n)}})}),AJS.namespace("JIRA.ComponentPicker",null,require("jira/field/component-picker"));;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initComponentPickers.js' */
define("jira/field/init-component-pickers",["jira/field/component-picker","jira/util/formatter","jira/util/events","jira/util/events/types","jira/util/events/reasons","jquery"],function(e,n,r,t,i,o){function l(r){new e({element:r,itemAttrDisplayed:"label",errorMessage:"{0} is not a valid component.",maxInlineResultsDisplayed:15,expandAllResults:!0})}function a(e){var n=o(e);return n.is("select")?n:n.find("select")}function c(e,n){n=n||s.join(", "),o(n,e).each(function(){var e=a(this);e.length&&l(e)})}var s=["div.aui-field-componentspicker.frother-control-renderer","td.aui-field-componentspicker.frother-control-renderer","tr.aui-field-componentspicker.frother-control-renderer"];r.bind(t.NEW_CONTENT_ADDED,function(e,n,r){r!==i.panelRefreshed&&c(n)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initMultiselectPickers.js' */
define("jira/field/init-multi-select-pickers",["jquery","jira/ajs/select/multi-select","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/util/formatter"],function(e,t,i,n,l,r){function s(e){new t({element:e,itemAttrDisplayed:"label",errorMessage:"{0} is not a valid value.",maxInlineResultsDisplayed:15,submitInputVal:!0,expandAllResults:!0})}function a(t){var i=e(t);return i.is("select")?i:i.find("select")}function u(t,i){i=i||c.join(", "),e(i,t).each(function(){var e=a(this);e.length&&s(e)})}var c=["div.aui-field-multiselectpicker.frother-control-renderer"];l.bind(n.NEW_CONTENT_ADDED,function(e,t,n){n!==i.panelRefreshed&&u(t)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initDatePickers.js' */
define("jira/field/init-date-pickers",["jquery","jira/data/parse-options-from-fieldset","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/libs/calendar"],function(e,i,t,d,a,n){"use strict";function r(t){e(t||document.body).find("div.aui-field-datepicker").add("tr.aui-field-datepicker").add("td.aui-field-datepicker").each(function(){function d(){r.prop("disabled",s.is(":checked"))}var a=e(this),r=a.find("input:text"),s=a.find("#useCurrentDate"),c=i(a.find("fieldset.datepicker-params"));c.context=t,n.setup(c),s.length&&(d(),s.click(d))})}a.bind(d.NEW_CONTENT_ADDED,function(e,i,d){d!==t.panelRefreshed&&r(i)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initLegacyGroupPickers.js' */
define("jira/field/init-legacy-group-pickers",["jquery","jira/util/events/reasons","jira/util/events/types","jira/util/events"],function(e,i,r,t){function n(i){e(i||document.body).find("div.aui-field-grouppicker").add("tr.aui-field-grouppicker").add("td.aui-field-grouppicker").each(function(){function i(e){e.preventDefault(),window.open(n,"GroupPicker","status=yes,resizable=yes,top=100,left=100,width=800,height=750,scrollbars=yes")}var r=e(this),t=r.find("a.grouppicker-trigger"),n=t.attr("href");t.click(i)})}t.bind(r.NEW_CONTENT_ADDED,function(e,r,t){t!==i.panelRefreshed&&n(r)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initIssuePickers.js' */
define("jira/field/init-issue-pickers",["jira/field/issue-picker","jira/util/events","jira/util/events/types","jira/util/events/reasons","jquery","jira/util/formatter"],function(e,i,n,t,s,r){function u(i){s(i||document.body).find(".aui-field-issuepicker").each(function(){new e({element:s(this),userEnteredOptionsMsg:"Enter issue key",uppercaseUserEnteredOnSelect:!0})})}i.bind(n.NEW_CONTENT_ADDED,function(e,i,n){n!==t.panelRefreshed&&u(i)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initLabelPickers.js' */
define("jira/field/init-label-pickers",["jira/field/label-picker-factory","jira/util/events","jira/util/events/types","jira/util/events/reasons","jquery"],function(e,i,n,r,a){function t(e){var i=a(e);return i.is(c)?i:i.find(c)}function l(i,n){n=n||".aui-field-labelpicker",a(n,i).each(function(){var n=t(this);n.length>0&&e.createPicker(n,i)})}var c="fieldset.labelpicker-params";i.bind(n.NEW_CONTENT_ADDED,function(e,i,n){n!==r.panelRefreshed&&l(i)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/VersionPicker.js' */
define("jira/field/version-picker",["jira/util/formatter","jira/util/events","jira/ajs/select/suggestions/only-new-items-suggest-handler","jira/ajs/select/multi-select","underscore","jquery"],function(e,t,s,i,n,r){return i.extend({init:function(e){this._super(e),this.suggestionsHandler=new s(this.options,this.model)},_getDefaultOptions:function(t){var s=!1;return t&&t.element&&(s=r(t.element).data("create-permission")),s?r.extend(!0,this._super(),{userEnteredOptionsMsg:"New Version"}):this._super(t)},_selectionHandler:function(e,s){var i=this.model.getDisplayableSelectedDescriptors().concat(this.model.getDisplayableUnSelectedDescriptors()),r=e.data("descriptor");n.find(i,function(e){return e.label()===r.label()})||(r.properties.value="nv_"+r.value(),t.trigger("Issue.Version.new.selected",[r.value()])),this._super(e,s)}})}),AJS.namespace("JIRA.VersionPicker",null,require("jira/field/version-picker"));;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initVersionPickers.js' */
define("jira/field/init-version-pickers",["jira/field/version-picker","jira/util/formatter","jira/util/events","jira/util/events/types","jira/util/events/reasons","jquery"],function(e,i,n,r,t,s){function l(n){new e({element:n,itemAttrDisplayed:"label",removeOnUnSelect:!1,submitInputVal:!0,errorMessage:"{0} is not a valid version.",maxInlineResultsDisplayed:15,expandAllResults:!0})}function a(e){var i=s(e);return i.is("select")?i:i.find("select")}function o(e,i){i=i||".aui-field-versionspicker.frother-control-renderer",s(i,e).each(function(){var e=a(this);e.length&&l(e)})}n.bind(r.NEW_CONTENT_ADDED,function(e,i,n){n!==t.panelRefreshed&&o(i)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initCommentControls.js' */
define("jira/field/init-comment-controls",["jira/skate","jira/ajs/select/security-level-select","jira/wikipreview/wiki-preview"],function(e,i,t){e("jira-wikifield",{type:e.type.CLASSNAME,created:function(e){var i={fieldId:e.getAttribute("field-id"),trigger:e.querySelector(".wiki-preview").id,issueKey:e.getAttribute("issue-key"),rendererType:e.getAttribute("renderer-type")};t(i,e).init()}}),e("security-level",{type:e.type.CLASSNAME,created:function(e){var t=e.querySelector("#commentLevel");t&&new i(t)}})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initLogWorkControls.js' */
define("jira/field/init-log-work-controls",["jira/util/events","jira/util/events/types","jira/util/events/reasons","jquery"],function(e,t,a,i){function n(e,t){var a=i(e).find("#worklog-logworkcontainer"),n=i(e).find("#worklog-timetrackingcontainer"),d=i(e).find("#log-work-activate");t?(a.removeClass("hidden"),n.addClass("hidden"),d.prop("checked",!0)):(a.addClass("hidden"),n.removeClass("hidden"),d.prop("checked",!1))}function d(e){i("#log-work-adjust-estimate-new-value, #log-work-adjust-estimate-manual-value",e).attr("disabled","disabled"),i("#log-work-adjust-estimate-"+i("input[name=worklog_adjustEstimate]:checked,input[name=adjustEstimate]:checked",e).val()+"-value",e).removeAttr("disabled"),i("input[name=worklog_adjustEstimate],input[name=adjustEstimate]",e).change(function(){i("#log-work-adjust-estimate-new-value,#log-work-adjust-estimate-manual-value",e).attr("disabled","disabled"),i("#log-work-adjust-estimate-"+i(this).val()+"-value",e).removeAttr("disabled")}),i("#delete-log-work-adjust-estimate-new-value").change(function(){i("#delete-log-work-adjust-estimate-new").prop("checked",!0)}),i("#delete-log-work-adjust-estimate-manual-value").change(function(){i("#delete-log-work-adjust-estimate-manual").prop("checked",!0)}),i(e).find("#log-work-activate").change(function(){n(e,i(this).is(":checked"))})}e.bind(t.VALIDATE_TIMETRACKING,function(e,t){n(t,!0)}),e.bind(t.NEW_CONTENT_ADDED,function(e,t,i){i!==a.panelRefreshed&&d(t)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initPriorityPickers.js' */
define("jira/field/init-priority-pickers",["jira/ajs/select/single-select","jira/util/events/reasons","jira/util/events/types","jira/util/events"],function(e,i,n,t){function r(i){i.find("select#priority").each(function(i,n){new e({element:n,revertOnInvalid:!0})})}t.bind(n.NEW_CONTENT_ADDED,function(e,n,t){t!==i.panelRefreshed&&r(n)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initInlineAttach.js' */
define("jira/field/init-inline-attach",["jira/util/events","jira/util/events/types","jira/util/events/reasons","jquery","jira/jquery/plugins/attachment/inline-attach"],function(i,n,t){"use strict";function e(i){i.find("input[type=file]:not('.ignore-inline-attach')").inlineAttach()}i.bind(n.NEW_CONTENT_ADDED,function(i,n,a){a!==t.panelRefreshed&&e(n)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/init/init-jira-fields-webresource.js' */
require("jira/field/init-cascading-selects"),require("jira/field/init-component-pickers"),require("jira/field/init-multi-select-pickers"),require("jira/field/init-date-pickers"),require("jira/field/init-legacy-group-pickers"),require("jira/field/init-issue-pickers"),require("jira/field/init-label-pickers"),require("jira/field/init-version-pickers"),require("jira/field/init-comment-controls"),require("jira/field/init-log-work-controls"),require("jira/field/init-priority-pickers"),require("jira/field/init-inline-attach");;
;
/* module-key = 'com.atlassian.plugin.jslibs:marionette-1.6.1-factory', location = 'factories/marionette/1.6.1/marionette-1.6.1-factory.js' */
/*
 Includes BabySitter
 https://github.com/marionettejs/backbone.babysitter/

 Includes Wreqr
 https://github.com/marionettejs/backbone.wreqr/
*/
'use strict';(function(p){define("atlassian/libs/factories/marionette-1.6.1",function(){return function(h,m){var q=m.Marionette;p.call({_:h,Backbone:m});h=m.Marionette;h.VERSION="1.6.1";m.Marionette=q;return h}})})(function(){var p=this.Backbone,h=this._,m=function(h,e){var d=function(d){this._views={};this._indexByModel={};this._indexByCustom={};this._updateLength();e.each(d,this.add,this)};e.extend(d.prototype,{add:function(d,b){var g=d.cid;this._views[g]=d;d.model&&(this._indexByModel[d.model.cid]=
g);b&&(this._indexByCustom[b]=g);this._updateLength()},findByModel:function(d){return this.findByModelCid(d.cid)},findByModelCid:function(d){return this.findByCid(this._indexByModel[d])},findByCustom:function(d){return this.findByCid(this._indexByCustom[d])},findByIndex:function(d){return e.values(this._views)[d]},findByCid:function(d){return this._views[d]},remove:function(d){var b=d.cid;d.model&&delete this._indexByModel[d.model.cid];e.any(this._indexByCustom,function(d,a){if(d===b)return delete this._indexByCustom[a],
!0},this);delete this._views[b];this._updateLength()},call:function(d){this.apply(d,e.tail(arguments))},apply:function(d,b){e.each(this._views,function(g){e.isFunction(g[d])&&g[d].apply(g,b||[])})},_updateLength:function(){this.length=e.size(this._views)}});e.each("forEach each map find detect filter select reject every all some any include contains invoke toArray first initial rest last without isEmpty pluck".split(" "),function(l){d.prototype[l]=function(){var b=[e.values(this._views)].concat(e.toArray(arguments));
return e[l].apply(e,b)}});return d}(p,h),q=function(h,e,d){e={};e.Handlers=function(d,b){var g=function(a){this.options=a;this._wreqrHandlers={};b.isFunction(this.initialize)&&this.initialize(a)};g.extend=d.Model.extend;b.extend(g.prototype,d.Events,{setHandlers:function(a){b.each(a,function(a,f){var c=null;b.isObject(a)&&!b.isFunction(a)&&(c=a.context,a=a.callback);this.setHandler(f,a,c)},this)},setHandler:function(a,c,b){this._wreqrHandlers[a]={callback:c,context:b};this.trigger("handler:add",a,
c,b)},hasHandler:function(a){return!!this._wreqrHandlers[a]},getHandler:function(a){var c=this._wreqrHandlers[a];if(!c)throw Error("Handler not found for '"+a+"'");return function(){var a=Array.prototype.slice.apply(arguments);return c.callback.apply(c.context,a)}},removeHandler:function(a){delete this._wreqrHandlers[a]},removeAllHandlers:function(){this._wreqrHandlers={}}});return g}(h,d);e.CommandStorage=function(){var e=function(b){this.options=b;this._commands={};d.isFunction(this.initialize)&&
this.initialize(b)};d.extend(e.prototype,h.Events,{getCommands:function(b){var d=this._commands[b];d||(d={command:b,instances:[]},this._commands[b]=d);return d},addCommand:function(b,d){this.getCommands(b).instances.push(d)},clearCommands:function(b){this.getCommands(b).instances=[]}});return e}();e.Commands=function(e){return e.Handlers.extend({storageType:e.CommandStorage,constructor:function(b){this.options=b||{};this._initializeStorage(this.options);this.on("handler:add",this._executeCommands,
this);var d=Array.prototype.slice.call(arguments);e.Handlers.prototype.constructor.apply(this,d)},execute:function(b,d){b=arguments[0];d=Array.prototype.slice.call(arguments,1);this.hasHandler(b)?this.getHandler(b).apply(this,d):this.storage.addCommand(b,d)},_executeCommands:function(b,e,a){var c=this.storage.getCommands(b);d.each(c.instances,function(c){e.apply(a,c)});this.storage.clearCommands(b)},_initializeStorage:function(b){b=b.storageType||this.storageType;this.storage=d.isFunction(b)?new b:
b}})}(e);e.RequestResponse=function(d){return d.Handlers.extend({request:function(){var b=arguments[0],d=Array.prototype.slice.call(arguments,1);return this.getHandler(b).apply(this,d)}})}(e);e.EventAggregator=function(d,b){var e=function(){};e.extend=d.Model.extend;b.extend(e.prototype,d.Events);return e}(h,d);return e}(p,p.Marionette,h);(function(h,e,d){function l(a,c){a=Error(a);a.name=c||"Error";throw a;}var b={};e.Marionette=b;b.$=e.$;var g=Array.prototype.slice;b.extend=e.Model.extend;b.getOption=
function(a,c){if(a&&c)return a.options&&c in a.options&&void 0!==a.options[c]?a.options[c]:a[c]};b.triggerMethod=function(){function a(a,c,b){return b.toUpperCase()}var c=/(^|:)(\w)/gi;return function(b){var f=this["on"+b.replace(c,a)];d.isFunction(this.trigger)&&this.trigger.apply(this,arguments);if(d.isFunction(f))return f.apply(this,d.tail(arguments))}}();b.MonitorDOMRefresh=function(a){function c(c){c._isShown&&c._isRendered&&a.contains(c.el)&&d.isFunction(c.triggerMethod)&&c.triggerMethod("dom:refresh")}
return function(a){a.listenTo(a,"show",function(){a._isShown=!0;c(a)});a.listenTo(a,"render",function(){a._isRendered=!0;c(a)})}}(document.documentElement);(function(a){function c(a,c,b,f){f=f.split(/\s+/);d.each(f,function(d){var f=a[d];f||l("Method '"+d+"' was configured as an event handler, but does not exist.");a.listenTo(c,b,f,a)})}function b(a,c,b,d){a.listenTo(c,b,d,a)}function k(a,c,b,f){f=f.split(/\s+/);d.each(f,function(d){a.stopListening(c,b,a[d],a)})}function e(a,c,b,d){a.stopListening(c,
b,d,a)}function n(a,c,b,f,k){c&&b&&(d.isFunction(b)&&(b=b.call(a)),d.each(b,function(b,e){d.isFunction(b)?f(a,c,e,b):k(a,c,e,b)}))}a.bindEntityEvents=function(a,d,f){n(a,d,f,b,c)};a.unbindEntityEvents=function(a,c,b){n(a,c,b,e,k)}})(b);b.Callbacks=function(){this._deferred=b.$.Deferred();this._callbacks=[]};d.extend(b.Callbacks.prototype,{add:function(a,c){this._callbacks.push({cb:a,ctx:c});this._deferred.done(function(b,d){c&&(b=c);a.call(b,d)})},run:function(a,c){this._deferred.resolve(c,a)},reset:function(){var a=
this._callbacks;this._deferred=b.$.Deferred();this._callbacks=[];d.each(a,function(a){this.add(a.cb,a.ctx)},this)}});b.Controller=function(a){this.triggerMethod=b.triggerMethod;this.options=a||{};d.isFunction(this.initialize)&&this.initialize(this.options)};b.Controller.extend=b.extend;d.extend(b.Controller.prototype,e.Events,{close:function(){this.stopListening();this.triggerMethod("close");this.unbind()}});b.Region=function(a){this.options=a||{};this.el=b.getOption(this,"el");if(!this.el){var c=
Error("An 'el' must be specified for a region.");c.name="NoElError";throw c;}this.initialize&&(c=Array.prototype.slice.apply(arguments),this.initialize.apply(this,c))};d.extend(b.Region,{buildRegion:function(a,c){var b="string"===typeof a,k="string"===typeof a.selector,e="undefined"===typeof a.regionType,n="function"===typeof a;if(!n&&!b&&!k)throw Error("Region must be specified as a Region type, a selector string or an object with selector property");var g,h;b&&(g=a);a.selector&&(g=a.selector,delete a.selector);
n&&(h=a);!n&&e&&(h=c);a.regionType&&(h=a.regionType,delete a.regionType);if(b||n)a={};a.el=g;c=new h(a);a.parentEl&&(c.getEl=function(c){var b=a.parentEl;d.isFunction(b)&&(b=b());return b.find(c)});return c}});d.extend(b.Region.prototype,e.Events,{show:function(a){this.ensureEl();var c=a.isClosed||d.isUndefined(a.$el),f=a!==this.currentView;f&&this.close();a.render();(f||c)&&this.open(a);this.currentView=a;b.triggerMethod.call(this,"show",a);b.triggerMethod.call(a,"show")},ensureEl:function(){this.$el&&
0!==this.$el.length||(this.$el=this.getEl(this.el))},getEl:function(a){return b.$(a)},open:function(a){this.$el.empty().append(a.el)},close:function(){var a=this.currentView;a&&!a.isClosed&&(a.close?a.close():a.remove&&a.remove(),b.triggerMethod.call(this,"close",a),delete this.currentView)},attachView:function(a){this.currentView=a},reset:function(){this.close();delete this.$el}});b.Region.extend=b.extend;b.RegionManager=function(a){var c=a.Controller.extend({constructor:function(c){this._regions=
{};a.Controller.prototype.constructor.call(this,c)},addRegions:function(a,c){var b={};d.each(a,function(a,f){"string"===typeof a&&(a={selector:a});a.selector&&(a=d.defaults({},a,c));a=this.addRegion(f,a);b[f]=a},this);return b},addRegion:function(c,b){var f=d.isObject(b),e=d.isString(b),k=!!b.selector;b=e||f&&k?a.Region.buildRegion(b,a.Region):d.isFunction(b)?a.Region.buildRegion(b,a.Region):b;this._store(c,b);this.triggerMethod("region:add",c,b);return b},get:function(a){return this._regions[a]},
removeRegion:function(a){this._remove(a,this._regions[a])},removeRegions:function(){d.each(this._regions,function(a,c){this._remove(c,a)},this)},closeRegions:function(){d.each(this._regions,function(a,c){a.close()},this)},close:function(){this.removeRegions();var c=Array.prototype.slice.call(arguments);a.Controller.prototype.close.apply(this,c)},_store:function(a,c){this._regions[a]=c;this._setLength()},_remove:function(a,c){c.close();delete this._regions[a];this._setLength();this.triggerMethod("region:remove",
a,c)},_setLength:function(){this.length=d.size(this._regions)}});d.each("forEach each map find detect filter select reject every all some any include contains invoke toArray first initial rest last without isEmpty pluck".split(" "),function(a){c.prototype[a]=function(){var c=[d.values(this._regions)].concat(d.toArray(arguments));return d[a].apply(d,c)}});return c}(b);b.TemplateCache=function(a){this.templateId=a};d.extend(b.TemplateCache,{templateCaches:{},get:function(a){var c=this.templateCaches[a];
c||(c=new b.TemplateCache(a),this.templateCaches[a]=c);return c.load()},clear:function(){var a,c=g.call(arguments),b=c.length;if(0<b)for(a=0;a<b;a++)delete this.templateCaches[c[a]];else this.templateCaches={}}});d.extend(b.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var a=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(a)},loadTemplate:function(a){var c=b.$(a).html();c&&0!==c.length||l("Could not find template: '"+
a+"'","NoTemplateError");return c},compileTemplate:function(a){return d.template(a)}});b.Renderer={render:function(a,c){if(!a)throw a=Error("Cannot render the template since it's false, null or undefined."),a.name="TemplateNotFoundError",a;return("function"===typeof a?a:b.TemplateCache.get(a))(c)}};b.View=e.View.extend({constructor:function(a){d.bindAll(this,"render");var c=Array.prototype.slice.apply(arguments);this.options=d.extend({},d.result(this,"options"),d.isFunction(a)?a.call(this):a);this.events=
this.normalizeUIKeys(d.result(this,"events"));e.View.prototype.constructor.apply(this,c);b.MonitorDOMRefresh(this);this.listenTo(this,"show",this.onShowCalled,this)},triggerMethod:b.triggerMethod,getTemplate:function(){return b.getOption(this,"template")},mixinTemplateHelpers:function(a){a=a||{};var c=b.getOption(this,"templateHelpers");d.isFunction(c)&&(c=c.call(this));return d.extend(a,c)},normalizeUIKeys:function(a){if("undefined"!==typeof a)return d.each(d.keys(a),function(c){var b=c.split("@ui.");
2===b.length&&(a[b[0]+this.ui[b[1]]]=a[c],delete a[c])},this),a},configureTriggers:function(){if(this.triggers){var a={},c=this.normalizeUIKeys(d.result(this,"triggers"));d.each(c,function(c,b){var f=d.isObject(c),e=f?c.event:c;a[b]=function(a){if(a){var b=a.preventDefault,d=a.stopPropagation,k=f?c.stopPropagation:d;(f?c.preventDefault:b)&&b&&b.apply(a);k&&d&&d.apply(a)}this.triggerMethod(e,{view:this,model:this.model,collection:this.collection})}},this);return a}},delegateEvents:function(a){this._delegateDOMEvents(a);
b.bindEntityEvents(this,this.model,b.getOption(this,"modelEvents"));b.bindEntityEvents(this,this.collection,b.getOption(this,"collectionEvents"))},_delegateDOMEvents:function(a){a=a||this.events;d.isFunction(a)&&(a=a.call(this));var c={},b=this.configureTriggers();d.extend(c,a,b);e.View.prototype.delegateEvents.call(this,c)},undelegateEvents:function(){var a=Array.prototype.slice.call(arguments);e.View.prototype.undelegateEvents.apply(this,a);b.unbindEntityEvents(this,this.model,b.getOption(this,
"modelEvents"));b.unbindEntityEvents(this,this.collection,b.getOption(this,"collectionEvents"))},onShowCalled:function(){},close:function(){this.isClosed||!1===this.triggerMethod("before:close")||(this.isClosed=!0,this.triggerMethod("close"),this.unbindUIElements(),this.remove())},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var a=d.result(this,"_uiBindings");this.ui={};d.each(d.keys(a),function(c){this.ui[c]=this.$(a[c])},this)}},unbindUIElements:function(){this.ui&&
this._uiBindings&&(d.each(this.ui,function(a,c){delete this.ui[c]},this),this.ui=this._uiBindings,delete this._uiBindings)}});b.ItemView=b.View.extend({constructor:function(){b.View.prototype.constructor.apply(this,g.call(arguments))},serializeData:function(){var a={};this.model?a=this.model.toJSON():this.collection&&(a={items:this.collection.toJSON()});return a},render:function(){this.isClosed=!1;this.triggerMethod("before:render",this);this.triggerMethod("item:before:render",this);var a=this.serializeData();
a=this.mixinTemplateHelpers(a);var c=this.getTemplate();a=b.Renderer.render(c,a);this.$el.html(a);this.bindUIElements();this.triggerMethod("render",this);this.triggerMethod("item:rendered",this);return this},close:function(){this.isClosed||(this.triggerMethod("item:before:close"),b.View.prototype.close.apply(this,g.call(arguments)),this.triggerMethod("item:closed"))}});b.CollectionView=b.View.extend({itemViewEventPrefix:"itemview",constructor:function(a){this._initChildViewStorage();b.View.prototype.constructor.apply(this,
g.call(arguments));this._initialEvents();this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment();this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer();this.isBuffering=!0},endBuffering:function(){this.isBuffering=!1;this.appendBuffer(this,this.elBuffer);this._triggerShowBufferedChildren();this.initRenderBuffer()},_triggerShowBufferedChildren:function(){this._isShown&&(d.each(this._bufferedChildren,function(a){b.triggerMethod.call(a,
"show")}),this._bufferedChildren=[])},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this.render,this))},addChildView:function(a,c,b){this.closeEmptyView();c=this.getItemView(a);b=this.collection.indexOf(a);this.addItemView(a,c,b)},onShowCalled:function(){this.children.each(function(a){b.triggerMethod.call(a,"show")})},triggerBeforeRender:function(){this.triggerMethod("before:render",
this);this.triggerMethod("collection:before:render",this)},triggerRendered:function(){this.triggerMethod("render",this);this.triggerMethod("collection:rendered",this)},render:function(){this.isClosed=!1;this.triggerBeforeRender();this._renderChildren();this.triggerRendered();return this},_renderChildren:function(){this.startBuffering();this.closeEmptyView();this.closeChildren();this.isEmpty(this.collection)?this.showEmptyView():this.showCollection();this.endBuffering()},showCollection:function(){var a;
this.collection.each(function(c,b){a=this.getItemView(c);this.addItemView(c,a,b)},this)},showEmptyView:function(){var a=this.getEmptyView();if(a&&!this._showingEmptyView){this._showingEmptyView=!0;var b=new e.Model;this.addItemView(b,a,0)}},closeEmptyView:function(){this._showingEmptyView&&(this.closeChildren(),delete this._showingEmptyView)},getEmptyView:function(){return b.getOption(this,"emptyView")},getItemView:function(a){(a=b.getOption(this,"itemView"))||l("An `itemView` must be specified",
"NoItemViewError");return a},addItemView:function(a,c,f){var e=b.getOption(this,"itemViewOptions");d.isFunction(e)&&(e=e.call(this,a,f));a=this.buildItemView(a,c,e);this.addChildViewEventForwarding(a);this.triggerMethod("before:item:added",a);this.children.add(a);this.renderItemView(a,f);this._isShown&&!this.isBuffering&&b.triggerMethod.call(a,"show");this.triggerMethod("after:item:added",a);return a},addChildViewEventForwarding:function(a){var c=b.getOption(this,"itemViewEventPrefix");this.listenTo(a,
"all",function(){var f=g.call(arguments),e=f[0],h=this.getItemEvents();f[0]=c+":"+e;f.splice(1,0,a);"undefined"!==typeof h&&d.isFunction(h[e])&&h[e].apply(this,f);b.triggerMethod.apply(this,f)},this)},getItemEvents:function(){return d.isFunction(this.itemEvents)?this.itemEvents.call(this):this.itemEvents},renderItemView:function(a,b){a.render();this.appendHtml(this,a,b)},buildItemView:function(a,b,f){a=d.extend({model:a},f);return new b(a)},removeItemView:function(a){a=this.children.findByModel(a);
this.removeChildView(a);this.checkEmpty()},removeChildView:function(a){a&&(this.stopListening(a),a.close?a.close():a.remove&&a.remove(),this.children.remove(a));this.triggerMethod("item:removed",a)},isEmpty:function(a){return!this.collection||0===this.collection.length},checkEmpty:function(){this.isEmpty(this.collection)&&this.showEmptyView()},appendBuffer:function(a,b){a.$el.append(b)},appendHtml:function(a,b,d){a.isBuffering?(a.elBuffer.appendChild(b.el),a._bufferedChildren.push(b)):a.$el.append(b.el)},
_initChildViewStorage:function(){this.children=new m},close:function(){this.isClosed||(this.triggerMethod("collection:before:close"),this.closeChildren(),this.triggerMethod("collection:closed"),b.View.prototype.close.apply(this,g.call(arguments)))},closeChildren:function(){this.children.each(function(a){this.removeChildView(a)},this);this.checkEmpty()}});b.CompositeView=b.CollectionView.extend({constructor:function(){b.CollectionView.prototype.constructor.apply(this,g.call(arguments))},_initialEvents:function(){this.once("render",
function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this._renderChildren,this))})},getItemView:function(a){(a=b.getOption(this,"itemView")||this.constructor)||l("An `itemView` must be specified","NoItemViewError");return a},serializeData:function(){var a={};this.model&&(a=this.model.toJSON());return a},render:function(){this.isRendered=!0;this.isClosed=!1;this.resetItemViewContainer();
this.triggerBeforeRender();var a=this.renderModel();this.$el.html(a);this.bindUIElements();this.triggerMethod("composite:model:rendered");this._renderChildren();this.triggerMethod("composite:rendered");this.triggerRendered();return this},_renderChildren:function(){this.isRendered&&(this.triggerMethod("composite:collection:before:render"),b.CollectionView.prototype._renderChildren.call(this),this.triggerMethod("composite:collection:rendered"))},renderModel:function(){var a=this.serializeData();a=this.mixinTemplateHelpers(a);
var c=this.getTemplate();return b.Renderer.render(c,a)},appendBuffer:function(a,b){this.getItemViewContainer(a).append(b)},appendHtml:function(a,b,d){a.isBuffering?(a.elBuffer.appendChild(b.el),a._bufferedChildren.push(b)):this.getItemViewContainer(a).append(b.el)},getItemViewContainer:function(a){if("$itemViewContainer"in a)return a.$itemViewContainer;var c;(c=b.getOption(a,"itemViewContainer"))?(c=d.isFunction(c)?c.call(this):c,c=a.$(c),0>=c.length&&l("The specified `itemViewContainer` was not found: "+
a.itemViewContainer,"ItemViewContainerMissingError")):c=a.$el;return a.$itemViewContainer=c},resetItemViewContainer:function(){this.$itemViewContainer&&delete this.$itemViewContainer}});b.Layout=b.ItemView.extend({regionType:b.Region,constructor:function(a){a=a||{};this._firstRender=!0;this._initializeRegions(a);b.ItemView.prototype.constructor.call(this,a)},render:function(){this.isClosed&&this._initializeRegions();this._firstRender?this._firstRender=!1:this.isClosed||this._reInitializeRegions();
var a=Array.prototype.slice.apply(arguments);return b.ItemView.prototype.render.apply(this,a)},close:function(){if(!this.isClosed){this.regionManager.close();var a=Array.prototype.slice.apply(arguments);b.ItemView.prototype.close.apply(this,a)}},addRegion:function(a,b){var c={};c[a]=b;return this._buildRegions(c)[a]},addRegions:function(a){this.regions=d.extend({},this.regions,a);return this._buildRegions(a)},removeRegion:function(a){delete this.regions[a];return this.regionManager.removeRegion(a)},
_buildRegions:function(a){var c=this,d={regionType:b.getOption(this,"regionType"),parentEl:function(){return c.$el}};return this.regionManager.addRegions(a,d)},_initializeRegions:function(a){this._initRegionManager();a=d.isFunction(this.regions)?this.regions(a):this.regions||{};this.addRegions(a)},_reInitializeRegions:function(){this.regionManager.closeRegions();this.regionManager.each(function(a){a.reset()})},_initRegionManager:function(){this.regionManager=new b.RegionManager;this.listenTo(this.regionManager,
"region:add",function(a,b){this[a]=b;this.trigger("region:add",a,b)});this.listenTo(this.regionManager,"region:remove",function(a,b){delete this[a];this.trigger("region:remove",a,b)})}});b.AppRouter=e.Router.extend({constructor:function(a){e.Router.prototype.constructor.apply(this,g.call(arguments));this.options=a||{};var c=b.getOption(this,"appRoutes"),d=this._getController();this.processAppRoutes(d,c)},appRoute:function(a,b){var c=this._getController();this._addAppRoute(c,a,b)},processAppRoutes:function(a,
b){if(b){var c=d.keys(b).reverse();d.each(c,function(c){this._addAppRoute(a,c,b[c])},this)}},_getController:function(){return b.getOption(this,"controller")},_addAppRoute:function(a,b,e){var c=a[e];if(!c)throw Error("Method '"+e+"' was not found on the controller");this.route(b,e,d.bind(c,a))}});b.Application=function(a){this._initRegionManager();this._initCallbacks=new b.Callbacks;this.vent=new q.EventAggregator;this.commands=new q.Commands;this.reqres=new q.RequestResponse;this.submodules={};d.extend(this,
a);this.triggerMethod=b.triggerMethod};d.extend(b.Application.prototype,e.Events,{execute:function(){var a=Array.prototype.slice.apply(arguments);this.commands.execute.apply(this.commands,a)},request:function(){var a=Array.prototype.slice.apply(arguments);return this.reqres.request.apply(this.reqres,a)},addInitializer:function(a){this._initCallbacks.add(a)},start:function(a){this.triggerMethod("initialize:before",a);this._initCallbacks.run(a,this);this.triggerMethod("initialize:after",a);this.triggerMethod("start",
a)},addRegions:function(a){return this._regionManager.addRegions(a)},closeRegions:function(){this._regionManager.closeRegions()},removeRegion:function(a){this._regionManager.removeRegion(a)},getRegion:function(a){return this._regionManager.get(a)},module:function(a,c){var d=b.Module;c&&(d=c.moduleClass||d);var e=g.call(arguments);e.unshift(this);return d.create.apply(d,e)},_initRegionManager:function(){this._regionManager=new b.RegionManager;this.listenTo(this._regionManager,"region:add",function(a,
b){this[a]=b});this.listenTo(this._regionManager,"region:remove",function(a,b){delete this[a]})}});b.Application.extend=b.extend;b.Module=function(a,c,e){this.moduleName=a;this.options=d.extend({},this.options,e);this.initialize=e.initialize||this.initialize;this.submodules={};this._setupInitializersAndFinalizers();this.app=c;this.startWithParent=!0;this.triggerMethod=b.triggerMethod;d.isFunction(this.initialize)&&this.initialize(this.options)};b.Module.extend=b.extend;d.extend(b.Module.prototype,
e.Events,{initialize:function(){},addInitializer:function(a){this._initializerCallbacks.add(a)},addFinalizer:function(a){this._finalizerCallbacks.add(a)},start:function(a){this._isInitialized||(d.each(this.submodules,function(b){b.startWithParent&&b.start(a)}),this.triggerMethod("before:start",a),this._initializerCallbacks.run(a,this),this._isInitialized=!0,this.triggerMethod("start",a))},stop:function(){this._isInitialized&&(this._isInitialized=!1,b.triggerMethod.call(this,"before:stop"),d.each(this.submodules,
function(a){a.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),b.triggerMethod.call(this,"stop"))},addDefinition:function(a,b){this._runModuleDefinition(a,b)},_runModuleDefinition:function(a,c){a&&(c=d.flatten([this,this.app,e,b,b.$,d,c]),a.apply(this,c))},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new b.Callbacks;this._finalizerCallbacks=new b.Callbacks}});d.extend(b.Module,{create:function(a,b,e){var c=
a,f=g.call(arguments);f.splice(0,3);b=b.split(".");var h=[];h[b.length-1]=e;d.each(b,function(b,d){var g=c;c=this._getModule(g,b,a,e);this._addModuleDefinition(g,c,h[d],f)},this);return c},_getModule:function(a,c,e,g,h){h=b.Module;var f=d.extend({},g);g&&(h=g.moduleClass||h);g=a[c];g||(g=new h(c,e,f),a[c]=g,a.submodules[c]=g);return g},_addModuleDefinition:function(a,b,e,g){if(d.isFunction(e)){var c=e;e=!0}else d.isObject(e)?(c=e.define,e="undefined"!==typeof e.startWithParent?e.startWithParent:!0):
e=!0;c&&b.addDefinition(c,g);b.startWithParent=b.startWithParent&&e;b.startWithParent&&!b.startWithParentIsConfigured&&(b.startWithParentIsConfigured=!0,a.addInitializer(function(a){b.startWithParent&&b.start(a)}))}});b.Wreqr=q;b.ChildViewContainer=m;return b})(this,p,h)});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:backbone-marionette', location = 'lib/backbone/backbone-amd.js' */
define("jira-project-config/backbone",["require"],function(e){"use strict";return e("atlassian/libs/factories/backbone-1.0.0")(e("underscore"),e("jquery"))});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:backbone-marionette', location = 'lib/marionettejs/marionette-amd.js' */
define("jira-project-config/marionette",["require"],function(e){"use strict";var r=e("atlassian/libs/factories/marionette-1.6.1"),i=e("jira-project-config/backbone");return r(e("underscore"),i)});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:backbone-marionette', location = 'lib/namespace.js' */
AJS.namespace("JIRA.ProjectConfig.Backbone",null,require("jira-project-config/backbone")),AJS.namespace("JIRA.ProjectConfig.Backbone.Marionette",null,require("jira-project-config/marionette"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:backbone-navigate', location = 'global/js/navigate.js' */
define("jira-project-config/navigate",["jira-project-config/backbone","underscore","jquery"],function(n,e,o){"use strict";function r(e){return 0===e.indexOf(n.history.root)&&(e=e.slice(n.history.root.length)),e}var t=function t(i,a){a||(a={});var c,u,s,f=i,d=a.location||window.location;return f=r(f),s=window.onbeforeunload,c=o.Event("beforeunload"),(!(u="function"==typeof s&&s(c))||!1!==window.confirm(u))&&(f=n.history.getFragment(f),t.hasHandler(f)?(delete a.location,n.history.navigate(f,e.extend({trigger:!0},a))):void d.assign(n.history.root+f))};return t.hasHandler=function(o){return o=r(o),e.any(n.history.handlers,function(n){return n.route.test(o)})},t}),AJS.namespace("JIRA.ProjectConfig.navigate",null,require("jira-project-config/navigate"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:progress-indicator', location = 'utilities/widgets/progressindicator/template.soy' */
// This file was automatically generated from template.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.ProjectConfig.ProgressIndicator.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.ProjectConfig == 'undefined') { JIRA.Templates.ProjectConfig = {}; }
if (typeof JIRA.Templates.ProjectConfig.ProgressIndicator == 'undefined') { JIRA.Templates.ProjectConfig.ProgressIndicator = {}; }


JIRA.Templates.ProjectConfig.ProgressIndicator.render = function(opt_data, opt_ignored) {
  return '<div class="project-config-blanket"></div><div class="project-config-spinner"></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectConfig.ProgressIndicator.render.soyTemplateName = 'JIRA.Templates.ProjectConfig.ProgressIndicator.render';
}
;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:progress-indicator', location = 'utilities/widgets/progressindicator/template-wrapper.js' */
define("jira-project-config/utils/widgets/progress-indicator/templates",[],function(){"use strict";return window.JIRA.Templates.ProjectConfig.ProgressIndicator});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:progress-indicator', location = 'utilities/widgets/progressindicator/view.js' */
define("jira-project-config/utils/widgets/progress-indicator",["require"],function(e){"use strict";var r=e("jira-project-config/marionette"),i=e("jira-project-config/utils/widgets/progress-indicator/templates");return r.ItemView.extend({className:"project-config-progress-indicator-blanket",template:i.render,ui:{spinner:".project-config-spinner"},onBeforeClose:function(){clearInterval(this._intervalID)},onRender:function(){function e(){r=(r-40)%440,i.ui.spinner.css("background-position","0 "+r+"px")}var r=0,i=this;clearInterval(this._intervalID),this._intervalID=setInterval(e,50)}})}),AJS.namespace("JIRA.ProjectConfig.ProgressIndicator.View",null,require("jira-project-config/utils/widgets/progress-indicator"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-utilities', location = 'utilities/region.js' */
define("jira-project-config/utils/region",["jira-project-config/marionette","jira/util/events","jira/util/events/types","jira/util/events/reasons"],function(e,i,t,n){"use strict";return e.Region.extend({initialize:function(){this.listenTo(this,"show",function(){i.trigger(t.NEW_CONTENT_ADDED,[this.$el,n.contentRefreshed])})}})}),AJS.namespace("JIRA.ProjectConfig.Region",null,require("jira-project-config/utils/region"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-utilities', location = 'utilities/virtual-region.js' */
define("jira-project-config/utils/virtual-region",["jira-project-config/utils/region","jira-project-config/marionette","underscore","jquery"],function(i,e,t,r){"use strict";return i.extend({initialize:function(e){this.target=e.target,delete e.target,i.prototype.initialize.apply(this,arguments)},show:function(i){var n=i.isClosed||t.isUndefined(i.$el),o=i!==this.currentView;return this.currentView&&(n||o)&&(this.stub=r('<div style="display: none"></div>'),this.currentView.$el.replaceWith(this.stub)),e.Region.prototype.show.apply(this,arguments)},open:function(i){(this.stub||this.$el.find(this.target)).replaceWith(i.el)}})}),AJS.namespace("JIRA.ProjectConfig.VirtualRegion",null,require("jira-project-config/utils/virtual-region"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-utilities', location = 'utilities/utils.js' */
define("jira-project-config/utils",["jira/dialog/form-dialog","jira/ajs/ajax/smart-ajax","wrm/context-path","underscore","jquery"],function(e,t,r,n,o){var a=r()+"/rest/api/2";return{REST_VERSION:"2",REST_BASE_URL:a,getRestVersion:function(){return"2"},getRestBaseUrl:function(){return a},getProjectKey:function(){return o("meta[name=projectKey]").attr("content")},getKey:function(){return o("meta[name=projectKey]").attr("content")},getProjectId:function(){return o("meta[name=projectId]").attr("content")},getId:function(){return o("meta[name=projectId]").attr("content")},convertXHRToSmartAjaxResult:function(e){var r=e.status>=400?"error":"success";return t.SmartAjaxResult(e,(new Date).getTime(),r,JSON.parse(e.responseText))},openDialogForRow:function(t,r,o,a){a=a||{};var i=new t({model:r.model}),c=new e(n.extend({id:o,content:function(e){i.render(function(t){e(t)})},submitHandler:function(e){i.submit(this.$form.serializeObject(),r,function(){c.hide()}),e.preventDefault()}},a));return c.show(),c}}}),AJS.namespace("JIRA.REST_VERSION",null,require("jira-project-config/utils").getRestVersion()),AJS.namespace("JIRA.REST_BASE_URL",null,require("jira-project-config/utils").getRestBaseUrl()),AJS.namespace("JIRA.ProjectConfig.getKey",null,require("jira-project-config/utils").getProjectKey),AJS.namespace("JIRA.ProjectConfig.getId",null,require("jira-project-config/utils").getProjectId),AJS.namespace("AJS.convertXHRToSmartAjaxResult",null,require("jira-project-config/utils").convertXHRToSmartAjaxResult),AJS.namespace("AJS.openDialogForRow",null,require("jira-project-config/utils").openDialogForRow);;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:application', location = 'Application.js' */
define("jira-project-config/application",["jira-project-config/utils/virtual-region","jira-project-config/utils/region","wrm/data","jira/util/data/meta","wrm/context-path","jira-project-config/backbone","jira-project-config/marionette"],function(t,e,i,n,a,o,r){"use strict";var c=i.claim("com.atlassian.jira.jira-project-config-plugin:app-data"),p=new r.Application;return p.reqres.setHandler("projectKey",function(){return c.projectKey}),p.title=function(t){document.title=t+" - "+n.get("app-title")},p.addRegions({issueTypesSideNav:new t({el:"#content .admin-menu-links:visible",target:"#project_issuetypes"}),content:{selector:"section.aui-page-panel-content",regionType:e}}),p.on("initialize:after",function(){o.history.start({hashChange:!0,pushState:window.history.pushState,root:a()+"/"})}),p}),AJS.namespace("JIRA.ProjectConfig.Application",null,require("jira-project-config/application"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:error-module', location = 'error/controller.js' */
define("jira-project-config/error/controller",["require"],function(){"use strict";var r=require("jira-project-config/marionette"),e=require("jira-project-config/error/generic"),i=require("jira-project-config/error/page-not-found"),t=require("jira/util/formatter");return r.Controller.extend({initialize:function(r){this.application=r.application},error404:function(r){var e=new i;r.show(e),this.application.title("Error - Page not found")},genericError:function(r,i){var n=new e({message:i});r.show(n),this.application.title("Error")}})});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:error-module', location = 'error/module.js' */
define("jira-project-config/error/module",["require"],function(r){"use strict";var e=r("underscore"),n=r("jira-project-config/error/controller");return function(r,o){var i=o.commands;r.addInitializer(function(){var r=new n({application:o}),a=e.bind(r.error404,r),c=e.bind(r.genericError,r);i.setHandler("error:404",a),i.setHandler("error:generic",c)}),r.addFinalizer(function(){i.removeHandler("error:404"),i.removeHandler("error:generic")})}});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:error-module', location = 'error/generic/template.soy' */
// This file was automatically generated from template.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.ProjectConfig.Error.Generic.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.ProjectConfig == 'undefined') { JIRA.Templates.ProjectConfig = {}; }
if (typeof JIRA.Templates.ProjectConfig.Error == 'undefined') { JIRA.Templates.ProjectConfig.Error = {}; }
if (typeof JIRA.Templates.ProjectConfig.Error.Generic == 'undefined') { JIRA.Templates.ProjectConfig.Error.Generic = {}; }


JIRA.Templates.ProjectConfig.Error.Generic.render = function(opt_data, opt_ignored) {
  return '<div class="aui-message aui-message-error"><p>' + soy.$$escapeHtml(opt_data.message) + '</p></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectConfig.Error.Generic.render.soyTemplateName = 'JIRA.Templates.ProjectConfig.Error.Generic.render';
}
;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:error-module', location = 'error/generic/template-wrapper.js' */
define("jira-project-config/error/generic/templates",[],function(){"use strict";return window.JIRA.Templates.ProjectConfig.Error.Generic});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:error-module', location = 'error/generic/view.js' */
define("jira-project-config/error/generic",["require"],function(){var e=require("jira-project-config/marionette"),r=require("jira-project-config/error/generic/templates");return e.ItemView.extend({serializeData:function(){return{message:this.options.message}},template:r.render})});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:error-module', location = 'error/pagenotfound/template.soy' */
// This file was automatically generated from template.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.ProjectConfig.Error.PageNotFound.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.ProjectConfig == 'undefined') { JIRA.Templates.ProjectConfig = {}; }
if (typeof JIRA.Templates.ProjectConfig.Error == 'undefined') { JIRA.Templates.ProjectConfig.Error = {}; }
if (typeof JIRA.Templates.ProjectConfig.Error.PageNotFound == 'undefined') { JIRA.Templates.ProjectConfig.Error.PageNotFound = {}; }


JIRA.Templates.ProjectConfig.Error.PageNotFound.render = function(opt_data, opt_ignored) {
  return '<div id="project-config-page-not-found"><h2>' + soy.$$escapeHtml('This page you are trying to view doesn\x27t exist.') + '</h2><p><a href="#" id="page-not-found-go-back" class="aui-button aui-button-primary">' + soy.$$escapeHtml('Return to previous page') + '</a><a href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri("")) + '/plugins/servlet/project-config/' + soy.$$escapeHtmlAttribute(opt_data.projectKey) + '" class="aui-button aui-button-link">' + soy.$$escapeHtml('View project summary') + '</a></p></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectConfig.Error.PageNotFound.render.soyTemplateName = 'JIRA.Templates.ProjectConfig.Error.PageNotFound.render';
}
;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:error-module', location = 'error/pagenotfound/template-wrapper.js' */
define("jira-project-config/error/page-not-found/template",[],function(){"use strict";return window.JIRA.Templates.ProjectConfig.Error.PageNotFound});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:error-module', location = 'error/pagenotfound/view.js' */
define("jira-project-config/error/page-not-found",["require"],function(e){"use strict";var r=e("jquery"),t=e("jira-project-config/marionette"),o=e("jira-project-config/backbone"),n=e("jira-project-config/error/page-not-found/template");return t.ItemView.extend({events:{"click #page-not-found-go-back":"_goToPreviousPage"},_goToPreviousPage:function(e){e.preventDefault(),o.history.history.back()},serializeData:function(){return{projectKey:r("meta[name=projectKey]").attr("content")}},template:n.render})});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:error-module', location = 'error/namespaces.js' */
AJS.namespace("JIRA.Templates.ProjectConfig.Error.Generic",null,require("jira-project-config/error/generic/templates")),AJS.namespace("JIRA.Templates.ProjectConfig.Error.PageNotFound",null,require("jira-project-config/error/page-not-found/template")),AJS.namespace("JIRA.ProjectConfig.Error.Generic.View",null,require("jira-project-config/error/generic")),AJS.namespace("JIRA.ProjectConfig.Error.PageNotFound.View",null,require("jira-project-config/error/page-not-found")),AJS.namespace("JIRA.ProjectConfig.Error.Controller",null,require("jira-project-config/error/controller")),AJS.namespace("JIRA.ProjectConfig.Error.Module",null,require("jira-project-config/error/module"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:workflow-module-templates', location = 'workflow/workflow.soy' */
// This file was automatically generated from workflow.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Workflow.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Workflow == 'undefined') { JIRA.Templates.Workflow = {}; }


JIRA.Templates.Workflow.page = function(opt_data, opt_ignored) {
  return '<div id="project-config-panel-issuetypes" class="project-config-panel"><div class="aui-page-header project-config-panel-header" id="project-issuetypes-header"></div>' + JIRA.Templates.Workflow.content(null) + '</div>';
};
if (goog.DEBUG) {
  JIRA.Templates.Workflow.page.soyTemplateName = 'JIRA.Templates.Workflow.page';
}


JIRA.Templates.Workflow.content = function(opt_data, opt_ignored) {
  return '<div id="project-issuetypes-perspective-container"><div id="project-issuetypes-perspective-content"></div><div id="project-issuetypes-perspective-progress"></div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.Workflow.content.soyTemplateName = 'JIRA.Templates.Workflow.content';
}
;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:workflow-module-templates', location = 'workflow/templates.js' */
define("jira-project-config/workflow/templates",[],function(){"use strict";return window.JIRA.Templates.Workflow});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:urls-module', location = 'global/js/projectconfig/modules/urls/issuetypes/urls.soy' */
// This file was automatically generated from urls.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.IssueTypeConfig.Urls.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.IssueTypeConfig == 'undefined') { JIRA.Templates.IssueTypeConfig = {}; }
if (typeof JIRA.Templates.IssueTypeConfig.Urls == 'undefined') { JIRA.Templates.IssueTypeConfig.Urls = {}; }


JIRA.Templates.IssueTypeConfig.Urls.viewWorkflow = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml("") + '/plugins/servlet/project-config/' + soy.$$escapeUri(opt_data.projectKey) + '/issuetypes/' + soy.$$escapeUri(opt_data.issueTypeId) + '/workflow';
};
if (goog.DEBUG) {
  JIRA.Templates.IssueTypeConfig.Urls.viewWorkflow.soyTemplateName = 'JIRA.Templates.IssueTypeConfig.Urls.viewWorkflow';
}


JIRA.Templates.IssueTypeConfig.Urls.editWorkflow = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml("") + '/plugins/servlet/project-config/' + soy.$$escapeUri(opt_data.projectKey) + '/issuetypes/' + soy.$$escapeUri(opt_data.issueTypeId) + '/workflow/edit';
};
if (goog.DEBUG) {
  JIRA.Templates.IssueTypeConfig.Urls.editWorkflow.soyTemplateName = 'JIRA.Templates.IssueTypeConfig.Urls.editWorkflow';
}


JIRA.Templates.IssueTypeConfig.Urls.viewFields = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml("") + '/plugins/servlet/project-config/' + soy.$$escapeUri(opt_data.projectKey) + '/issuetypes/' + soy.$$escapeUri(opt_data.issueTypeId) + '/fields';
};
if (goog.DEBUG) {
  JIRA.Templates.IssueTypeConfig.Urls.viewFields.soyTemplateName = 'JIRA.Templates.IssueTypeConfig.Urls.viewFields';
}


JIRA.Templates.IssueTypeConfig.Urls.base = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml("") + '/plugins/servlet/project-config/' + soy.$$escapeUri(opt_data.projectKey) + '/issuetypes/' + soy.$$escapeUri(opt_data.issueTypeId);
};
if (goog.DEBUG) {
  JIRA.Templates.IssueTypeConfig.Urls.base.soyTemplateName = 'JIRA.Templates.IssueTypeConfig.Urls.base';
}


JIRA.Templates.IssueTypeConfig.Urls.projectIssueTypeFields = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml("") + '/rest/projectconfig/latest/issuetype/' + soy.$$escapeUri(opt_data.projectKey) + '/' + soy.$$escapeUri(opt_data.issueTypeId) + '/fields';
};
if (goog.DEBUG) {
  JIRA.Templates.IssueTypeConfig.Urls.projectIssueTypeFields.soyTemplateName = 'JIRA.Templates.IssueTypeConfig.Urls.projectIssueTypeFields';
}


JIRA.Templates.IssueTypeConfig.Urls.projectIssueTypeWorkflow = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml("") + '/rest/projectconfig/latest/issuetype/' + soy.$$escapeUri(opt_data.projectKey) + '/' + soy.$$escapeUri(opt_data.issueTypeId) + '/workflow';
};
if (goog.DEBUG) {
  JIRA.Templates.IssueTypeConfig.Urls.projectIssueTypeWorkflow.soyTemplateName = 'JIRA.Templates.IssueTypeConfig.Urls.projectIssueTypeWorkflow';
}


JIRA.Templates.IssueTypeConfig.Urls.login = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return soy.$$escapeHtml("") + '/login.jsp' + ((opt_data.returnUrl) ? '?os_destination=' + soy.$$escapeUri(opt_data.returnUrl) : '');
};
if (goog.DEBUG) {
  JIRA.Templates.IssueTypeConfig.Urls.login.soyTemplateName = 'JIRA.Templates.IssueTypeConfig.Urls.login';
}
;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:urls-module', location = 'global/js/projectconfig/modules/urls/issuetypes/manager.js' */
define("jira-project-config/project-config/urls/issue-types/manager",["underscore"],function(e){"use strict";function r(e){return{projectKey:"string"==typeof e.project?e.project:e.project.get("key"),issueTypeId:"number"==typeof e.issueType?e.issueType:e.issueType.get("id"),screenType:e.screenType}}function o(){}var s=JIRA.Templates.IssueTypeConfig.Urls;return e.extend(o.prototype,{base:function(e){return s.base(r(e))},viewWorkflow:function(e){return s.viewWorkflow(r(e))},editWorkflow:function(e){return s.editWorkflow(r(e))},viewFields:function(e){return s.viewFields(r(e))},projectIssueTypeFields:function(e){return s.projectIssueTypeFields(r(e))},projectIssueTypeWorkflow:function(e){return s.projectIssueTypeWorkflow(r(e))}}),o}),AJS.namespace("JIRA.ProjectConfig.Urls.IssueTypes.Manager",null,require("jira-project-config/project-config/urls/issue-types/manager"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:urls-module', location = 'global/js/projectconfig/modules/urls/workflow/urls.soy' */
// This file was automatically generated from urls.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Workflow.Urls.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Workflow == 'undefined') { JIRA.Templates.Workflow = {}; }
if (typeof JIRA.Templates.Workflow.Urls == 'undefined') { JIRA.Templates.Workflow.Urls = {}; }


JIRA.Templates.Workflow.Urls.viewWorkflow = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml("") + '/plugins/servlet/project-config/' + soy.$$escapeUri(opt_data.projectKey) + '/workflow/?name=' + soy.$$escapeUri(opt_data.workflowName);
};
if (goog.DEBUG) {
  JIRA.Templates.Workflow.Urls.viewWorkflow.soyTemplateName = 'JIRA.Templates.Workflow.Urls.viewWorkflow';
}


JIRA.Templates.Workflow.Urls.editWorkflow = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml("") + '/plugins/servlet/project-config/' + soy.$$escapeUri(opt_data.projectKey) + '/workflow/edit/?name=' + soy.$$escapeUri(opt_data.workflowName);
};
if (goog.DEBUG) {
  JIRA.Templates.Workflow.Urls.editWorkflow.soyTemplateName = 'JIRA.Templates.Workflow.Urls.editWorkflow';
}


JIRA.Templates.Workflow.Urls.projectWorkflow = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml("") + '/rest/projectconfig/latest/workflow/project/' + soy.$$escapeUri(opt_data.projectKey) + '/?workflowName=' + soy.$$escapeUri(opt_data.workflowName);
};
if (goog.DEBUG) {
  JIRA.Templates.Workflow.Urls.projectWorkflow.soyTemplateName = 'JIRA.Templates.Workflow.Urls.projectWorkflow';
}


JIRA.Templates.Workflow.Urls.login = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return soy.$$escapeHtml("") + '/login.jsp' + ((opt_data.returnUrl) ? '?os_destination=' + soy.$$escapeUri(opt_data.returnUrl) : '');
};
if (goog.DEBUG) {
  JIRA.Templates.Workflow.Urls.login.soyTemplateName = 'JIRA.Templates.Workflow.Urls.login';
}
;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:urls-module', location = 'global/js/projectconfig/modules/urls/workflow/manager.js' */
define("jira-project-config/global/js/projectconfig/modules/urls/workflow/manager",["jira-project-config/workflow/templates","underscore"],function(r,o){"use strict";function e(r){return{projectKey:"string"==typeof r.project?r.project:r.project.get("key"),workflowName:"string"==typeof r.workflow?r.workflow:r.workflow.get("name")}}function t(){}return o.extend(t.prototype,{projectWorkflow:function(o){return r.Urls.projectWorkflow(e(o))},viewWorkflow:function(o){return r.Urls.viewWorkflow(e(o))},editWorkflow:function(o){return r.Urls.editWorkflow(e(o))},login:function(o){return r.Urls.login({returnUrl:o.returnUrl})}}),t});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:urls-module', location = 'global/js/projectconfig/modules/urls/module.js' */
define("jira-project-config/project-config/urls/module",["jira-project-config/project-config/urls/issue-types/manager","jira-project-config/global/js/projectconfig/modules/urls/workflow/manager"],function(e,r){"use strict";return function(s,o){s.addInitializer(function(){var s=new e,l=new r;o.reqres.setHandlers({"urls:issueTypes:base":{callback:s.base,context:s},"urls:issueTypes:viewWorkflow":{callback:s.viewWorkflow,context:s},"urls:issueTypes:editWorkflow":{callback:s.editWorkflow,context:s},"urls:issueTypes:viewFields":{callback:s.viewFields,context:s},"urls:issueTypes:rest:fields":{callback:s.projectIssueTypeFields,context:s},"urls:issueTypes:rest:workflow":{callback:s.projectIssueTypeWorkflow,context:s},"urls:workflows:rest:workflow":{callback:l.projectWorkflow,context:l},"urls:workflows:viewWorkflow":{callback:l.viewWorkflow,context:l},"urls:workflows:editWorkflow":{callback:l.editWorkflow,context:l},"urls:workflows:login":{callback:l.login,context:l}})}),s.addFinalizer(function(){o.reqres.removeHandler("urls:issueTypes:base"),o.reqres.removeHandler("urls:issueTypes:viewWorkflow"),o.reqres.removeHandler("urls:issueTypes:editWorkflow"),o.reqres.removeHandler("urls:issueTypes:viewFields"),o.reqres.removeHandler("urls:issueTypes:rest:fields"),o.reqres.removeHandler("urls:issueTypes:rest:workflow"),o.reqres.removeHandler("urls:workflows:rest:workflow"),o.reqres.removeHandler("urls:workflows:viewWorkflow"),o.reqres.removeHandler("urls:workflows:editWorkflow"),o.reqres.removeHandler("urls:workflows:login")})}});;
;
/* module-key = 'com.atlassian.auiplugin:split_aui.component.expander', location = 'aui.chunk.8de3505c535ba3bcd956--07d0e4be166aa46a027e.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.component.expander"],{HTrG:function(e,t,r){},iFnW:function(e,t,r){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(r("+x/D"));var n=(0,a.default)(document),i=function(e){var t={};return t.$trigger=(0,a.default)(e.currentTarget),t.$content=n.find("#"+t.$trigger.attr("aria-controls")),t.triggerIsParent=0!==t.$content.parent().filter(t.$trigger).length,t.$shortContent=t.triggerIsParent?t.$trigger.find(".aui-expander-short-content"):null,t.height=t.$content.css("min-height"),t.isCollapsible=!1!==t.$trigger.data("collapsible"),t.replaceText=t.$trigger.attr("data-replace-text"),t.replaceSelector=t.$trigger.data("replace-selector"),t},o=function(e){if(e.replaceText){var t=e.replaceSelector?e.$trigger.find(e.replaceSelector):e.$trigger;e.$trigger.attr("data-replace-text",t.text()),t.text(e.replaceText)}},d={"aui-expander-invoke":function(e){var t=(0,a.default)(e.currentTarget),r=n.find("#"+t.attr("aria-controls")),i=!1!==t.data("collapsible");"true"===r.attr("aria-expanded")&&i?t.trigger("aui-expander-collapse"):t.trigger("aui-expander-expand")},"aui-expander-expand":function(e){var t=i(e);"true"!==t.$content.attr("aria-expanded")&&(t.$content.attr("aria-expanded","true"),t.$trigger.attr("aria-expanded","true"),t.$content.outerHeight()>0&&t.$content.attr("aria-hidden","false"),o(t),t.triggerIsParent&&t.$shortContent.hide(),t.$trigger.trigger("aui-expander-expanded"))},"aui-expander-collapse":function(e){var t=i(e);"true"===t.$content.attr("aria-expanded")&&(o(t),t.$content.attr("aria-expanded","false"),t.$trigger.attr("aria-expanded","false"),t.triggerIsParent&&t.$shortContent.show(),0===t.$content.outerHeight()&&t.$content.attr("aria-hidden","true"),t.$trigger.trigger("aui-expander-collapsed"))},"click.aui-expander":function(e){(0,a.default)(e.currentTarget).trigger("aui-expander-invoke",e.currentTarget)}};n.on(d,".aui-expander-trigger")},ufFX:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r("HTrG"),r("iFnW")}},[["ufFX","runtime","aui.splitchunk.172ffb6da7","aui.splitchunk.fbd1a5ab27"]]]);
//# sourceMappingURL=aui.chunk.8de3505c535ba3bcd956--07d0e4be166aa46a027e.js.map;
;
/* module-key = 'com.atlassian.auiplugin:split_aui.page.iconography', location = 'aui.chunk.bdafbba768eff22233fc--8f22190d7e95afd6cbd1.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.page.iconography"],[],[["rSV2","runtime","aui.splitchunk.b0831cc7d0","aui.splitchunk.336ae4f9e7","aui.splitchunk.56dfb54d0c","aui.splitchunk.908fe798b4"]]]);
//# sourceMappingURL=aui.chunk.bdafbba768eff22233fc--8f22190d7e95afd6cbd1.js.map;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:underscore', location = 'js/lib/underscore-adapter.js' */
define("workflow-designer/underscore",["underscore"],function(A){return A});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:backbone.marionette', location = 'js/lib/backbone-1.0.0.js' */
(function(){var U=this;var b=U.Backbone;var G=[];var d=G.push;var N=G.slice;var T=G.splice;var Z;if(typeof exports!=="undefined"){Z=exports}else{Z=U.Backbone={}}Z.VERSION="1.0.0";var l=U._;if(!l&&(typeof require!=="undefined")){l=require("underscore")}Z.$=U.jQuery||U.Zepto||U.ender||U.$;Z.noConflict=function(){U.Backbone=b;return this};Z.emulateHTTP=false;Z.emulateJSON=false;var j=Z.Events={on:function(m,p,o){if(!X(this,"on",m,[p,o])||!p){return this}this._events||(this._events={});var n=this._events[m]||(this._events[m]=[]);n.push({callback:p,context:o,ctx:o||this});return this},once:function(n,q,o){if(!X(this,"once",n,[q,o])||!q){return this}var m=this;var p=l.once(function(){m.off(n,p);q.apply(this,arguments)});p._callback=q;return this.on(n,p,o)},off:function(m,v,n){var t,u,w,s,r,o,q,p;if(!this._events||!X(this,"off",m,[v,n])){return this}if(!m&&!v&&!n){this._events={};return this}s=m?[m]:l.keys(this._events);for(r=0,o=s.length;r<o;r++){m=s[r];if(w=this._events[m]){this._events[m]=t=[];if(v||n){for(q=0,p=w.length;q<p;q++){u=w[q];if((v&&v!==u.callback&&v!==u.callback._callback)||(n&&n!==u.context)){t.push(u)}}}if(!t.length){delete this._events[m]}}}return this},trigger:function(o){if(!this._events){return this}var n=N.call(arguments,1);if(!X(this,"trigger",o,n)){return this}var p=this._events[o];var m=this._events.all;if(p){B(p,n)}if(m){B(m,arguments)}return this},stopListening:function(p,m,r){var n=this._listeners;if(!n){return this}var o=!m&&!r;if(typeof m==="object"){r=this}if(p){(n={})[p._listenerId]=p}for(var q in n){n[q].off(m,r,this);if(o){delete this._listeners[q]}}return this}};var W=/\s+/;var X=function(t,r,n,q){if(!n){return true}if(typeof n==="object"){for(var p in n){t[r].apply(t,[p,n[p]].concat(q))}return false}if(W.test(n)){var s=n.split(W);for(var o=0,m=s.length;o<m;o++){t[r].apply(t,[s[o]].concat(q))}return false}return true};var B=function(r,p){var s,q=-1,o=r.length,n=p[0],m=p[1],t=p[2];switch(p.length){case 0:while(++q<o){(s=r[q]).callback.call(s.ctx)}return ;case 1:while(++q<o){(s=r[q]).callback.call(s.ctx,n)}return ;case 2:while(++q<o){(s=r[q]).callback.call(s.ctx,n,m)}return ;case 3:while(++q<o){(s=r[q]).callback.call(s.ctx,n,m,t)}return ;default:while(++q<o){(s=r[q]).callback.apply(s.ctx,p)}}};var c={listenTo:"on",listenToOnce:"once"};l.each(c,function(m,n){j[n]=function(q,o,s){var p=this._listeners||(this._listeners={});var r=q._listenerId||(q._listenerId=l.uniqueId("l"));p[r]=q;if(typeof o==="object"){s=this}q[m](o,s,this);return this}});j.bind=j.on;j.unbind=j.off;l.extend(Z,j);var e=Z.Model=function(m,o){var p;var n=m||{};o||(o={});this.cid=l.uniqueId("c");this.attributes={};l.extend(this,l.pick(o,f));if(o.parse){n=this.parse(n,o)||{}}if(p=l.result(this,"defaults")){n=l.defaults({},n,p)}this.set(n,o);this.changed={};this.initialize.apply(this,arguments)};var f=["url","urlRoot","collection"];l.extend(e.prototype,j,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(m){return l.clone(this.attributes)},sync:function(){return Z.sync.apply(this,arguments)},get:function(m){return this.attributes[m]},escape:function(m){return l.escape(this.get(m))},has:function(m){return this.get(m)!=null},set:function(u,m,y){var s,v,w,t,r,x,o,q;if(u==null){return this}if(typeof u==="object"){v=u;y=m}else{(v={})[u]=m}y||(y={});if(!this._validate(v,y)){return false}w=y.unset;r=y.silent;t=[];x=this._changing;this._changing=true;if(!x){this._previousAttributes=l.clone(this.attributes);this.changed={}}q=this.attributes,o=this._previousAttributes;if(this.idAttribute in v){this.id=v[this.idAttribute]}for(s in v){m=v[s];if(!l.isEqual(q[s],m)){t.push(s)}if(!l.isEqual(o[s],m)){this.changed[s]=m}else{delete this.changed[s]}w?delete q[s]:q[s]=m}if(!r){if(t.length){this._pending=true}for(var p=0,n=t.length;p<n;p++){this.trigger("change:"+t[p],this,q[t[p]],y)}}if(x){return this}if(!r){while(this._pending){this._pending=false;this.trigger("change",this,y)}}this._pending=false;this._changing=false;return this},unset:function(m,n){return this.set(m,void 0,l.extend({},n,{unset:true}))},clear:function(n){var m={};for(var o in this.attributes){m[o]=void 0}return this.set(m,l.extend({},n,{unset:true}))},hasChanged:function(m){if(m==null){return !l.isEmpty(this.changed)}return l.has(this.changed,m)},changedAttributes:function(o){if(!o){return this.hasChanged()?l.clone(this.changed):false}var q,p=false;var n=this._changing?this._previousAttributes:this.attributes;for(var m in o){if(l.isEqual(n[m],(q=o[m]))){continue}(p||(p={}))[m]=q}return p},previous:function(m){if(m==null||!this._previousAttributes){return null}return this._previousAttributes[m]},previousAttributes:function(){return l.clone(this._previousAttributes)},fetch:function(n){n=n?l.clone(n):{};if(n.parse===void 0){n.parse=true}var m=this;var o=n.success;n.success=function(p){if(!m.set(m.parse(p,n),n)){return false}if(o){o(m,p,n)}m.trigger("sync",m,p,n)};h(this,n);return this.sync("read",this,n)},save:function(q,n,u){var r,m,t,o=this.attributes;if(q==null||typeof q==="object"){r=q;u=n}else{(r={})[q]=n}if(r&&(!u||!u.wait)&&!this.set(r,u)){return false}u=l.extend({validate:true},u);if(!this._validate(r,u)){return false}if(r&&u.wait){this.attributes=l.extend({},o,r)}if(u.parse===void 0){u.parse=true}var p=this;var s=u.success;u.success=function(w){p.attributes=o;var v=p.parse(w,u);if(u.wait){v=l.extend(r||{},v)}if(l.isObject(v)&&!p.set(v,u)){return false}if(s){s(p,w,u)}p.trigger("sync",p,w,u)};h(this,u);m=this.isNew()?"create":(u.patch?"patch":"update");if(m==="patch"){u.attrs=r}t=this.sync(m,this,u);if(r&&u.wait){this.attributes=o}return t},destroy:function(n){n=n?l.clone(n):{};var m=this;var q=n.success;var o=function(){m.trigger("destroy",m,m.collection,n)};n.success=function(r){if(n.wait||m.isNew()){o()}if(q){q(m,r,n)}if(!m.isNew()){m.trigger("sync",m,r,n)}};if(this.isNew()){n.success();return false}h(this,n);var p=this.sync("delete",this,n);if(!n.wait){o()}return p},url:function(){var m=l.result(this,"urlRoot")||l.result(this.collection,"url")||R();if(this.isNew()){return m}return m+(m.charAt(m.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(n,m){return n},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},isValid:function(m){return this._validate({},l.extend(m||{},{validate:true}))},_validate:function(o,n){if(!n.validate||!this.validate){return true}o=l.extend({},this.attributes,o);var m=this.validationError=this.validate(o,n)||null;if(!m){return true}this.trigger("invalid",this,m,l.extend(n||{},{validationError:m}));return false}});var A=["keys","values","pairs","invert","pick","omit"];l.each(A,function(m){e.prototype[m]=function(){var n=N.call(arguments);n.unshift(this.attributes);return l[m].apply(l,n)}});var C=Z.Collection=function(n,m){m||(m={});if(m.url){this.url=m.url}if(m.model){this.model=m.model}if(m.comparator!==void 0){this.comparator=m.comparator}this._reset();this.initialize.apply(this,arguments);if(n){this.reset(n,l.extend({silent:true},m))}};var O={add:true,remove:true,merge:true};var k={add:true,merge:false,remove:false};l.extend(C.prototype,j,{model:e,initialize:function(){},toJSON:function(m){return this.map(function(n){return n.toJSON(m)})},sync:function(){return Z.sync.apply(this,arguments)},add:function(n,m){return this.set(n,l.defaults(m||{},k))},remove:function(r,p){r=l.isArray(r)?r.slice():[r];p||(p={});var q,m,o,n;for(q=0,m=r.length;q<m;q++){n=this.get(r[q]);if(!n){continue}delete this._byId[n.id];delete this._byId[n.cid];o=this.indexOf(n);this.models.splice(o,1);this.length--;if(!p.silent){p.index=o;n.trigger("remove",n,this,p)}this._removeReference(n)}return this},set:function(n,z){z=l.defaults(z||{},O);if(z.parse){n=this.parse(n,z)}if(!l.isArray(n)){n=n?[n]:[]}var u,q,w,x,o,v;var p=z.at;var t=this.comparator&&(p==null)&&z.sort!==false;var r=l.isString(this.comparator)?this.comparator:null;var y=[],m=[],s={};for(u=0,q=n.length;u<q;u++){if(!(w=this._prepareModel(n[u],z))){continue}if(o=this.get(w)){if(z.remove){s[o.cid]=true}if(z.merge){o.set(w.attributes,z);if(t&&!v&&o.hasChanged(r)){v=true}}}else{if(z.add){y.push(w);w.on("all",this._onModelEvent,this);this._byId[w.cid]=w;if(w.id!=null){this._byId[w.id]=w}}}}if(z.remove){for(u=0,q=this.length;u<q;++u){if(!s[(w=this.models[u]).cid]){m.push(w)}}if(m.length){this.remove(m,z)}}if(y.length){if(t){v=true}this.length+=y.length;if(p!=null){T.apply(this.models,[p,0].concat(y))}else{d.apply(this.models,y)}}if(v){this.sort({silent:true})}if(z.silent){return this}for(u=0,q=y.length;u<q;u++){(w=y[u]).trigger("add",w,this,z)}if(v){this.trigger("sort",this,z)}return this},reset:function(p,n){n||(n={});for(var o=0,m=this.models.length;o<m;o++){this._removeReference(this.models[o])}n.previousModels=this.models;this._reset();this.add(p,l.extend({silent:true},n));if(!n.silent){this.trigger("reset",this,n)}return this},push:function(n,m){n=this._prepareModel(n,m);this.add(n,l.extend({at:this.length},m));return n},pop:function(n){var m=this.at(this.length-1);this.remove(m,n);return m},unshift:function(n,m){n=this._prepareModel(n,m);this.add(n,l.extend({at:0},m));return n},shift:function(n){var m=this.at(0);this.remove(m,n);return m},slice:function(n,m){return this.models.slice(n,m)},get:function(m){if(m==null){return void 0}return this._byId[m.id!=null?m.id:m.cid||m]},at:function(m){return this.models[m]},where:function(m,n){if(l.isEmpty(m)){return n?void 0:[]}return this[n?"find":"filter"](function(o){for(var p in m){if(m[p]!==o.get(p)){return false}}return true})},findWhere:function(m){return this.where(m,true)},sort:function(m){if(!this.comparator){throw new Error("Cannot sort a set without a comparator")}m||(m={});if(l.isString(this.comparator)||this.comparator.length===1){this.models=this.sortBy(this.comparator,this)}else{this.models.sort(l.bind(this.comparator,this))}if(!m.silent){this.trigger("sort",this,m)}return this},sortedIndex:function(m,p,n){p||(p=this.comparator);var o=l.isFunction(p)?p:function(q){return q.get(p)};return l.sortedIndex(this.models,m,o,n)},pluck:function(m){return l.invoke(this.models,"get",m)},fetch:function(m){m=m?l.clone(m):{};if(m.parse===void 0){m.parse=true}var o=m.success;var n=this;m.success=function(p){var q=m.reset?"reset":"set";n[q](p,m);if(o){o(n,p,m)}n.trigger("sync",n,p,m)};h(this,m);return this.sync("read",this,m)},create:function(n,m){m=m?l.clone(m):{};if(!(n=this._prepareModel(n,m))){return false}if(!m.wait){this.add(n,m)}var p=this;var o=m.success;m.success=function(q){if(m.wait){p.add(n,m)}if(o){o(n,q,m)}};n.save(null,m);return n},parse:function(n,m){return n},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(o,n){if(o instanceof e){if(!o.collection){o.collection=this}return o}n||(n={});n.collection=this;var m=new this.model(o,n);if(!m._validate(o,n)){this.trigger("invalid",this,o,n);return false}return m},_removeReference:function(m){if(this===m.collection){delete m.collection}m.off("all",this._onModelEvent,this)},_onModelEvent:function(o,n,p,m){if((o==="add"||o==="remove")&&p!==this){return }if(o==="destroy"){this.remove(n,m)}if(n&&o==="change:"+n.idAttribute){delete this._byId[n.previous(n.idAttribute)];if(n.id!=null){this._byId[n.id]=n}}this.trigger.apply(this,arguments)}});var Y=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];l.each(Y,function(m){C.prototype[m]=function(){var n=N.call(arguments);n.unshift(this.models);return l[m].apply(l,n)}});var K=["groupBy","countBy","sortBy"];l.each(K,function(m){C.prototype[m]=function(p,n){var o=l.isFunction(p)?p:function(q){return q.get(p)};return l[m](this.models,o,n)}});var g=Z.View=function(m){this.cid=l.uniqueId("view");this._configure(m||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()};var V=/^(\S+)\s*(.*)$/;var E=["model","collection","el","id","attributes","className","tagName","events"];l.extend(g.prototype,j,{tagName:"div",$:function(m){return this.$el.find(m)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();this.stopListening();return this},setElement:function(m,n){if(this.$el){this.undelegateEvents()}this.$el=m instanceof Z.$?m:Z.$(m);this.el=this.$el[0];if(n!==false){this.delegateEvents()}return this},delegateEvents:function(q){if(!(q||(q=l.result(this,"events")))){return this}this.undelegateEvents();for(var p in q){var r=q[p];if(!l.isFunction(r)){r=this[q[p]]}if(!r){continue}var o=p.match(V);var n=o[1],m=o[2];r=l.bind(r,this);n+=".delegateEvents"+this.cid;if(m===""){this.$el.on(n,r)}else{this.$el.on(n,m,r)}}return this},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid);return this},_configure:function(m){if(this.options){m=l.extend({},l.result(this,"options"),m)}l.extend(this,l.pick(m,E));this.options=m},_ensureElement:function(){if(!this.el){var m=l.extend({},l.result(this,"attributes"));if(this.id){m.id=l.result(this,"id")}if(this.className){m["class"]=l.result(this,"className")}var n=Z.$("<"+l.result(this,"tagName")+">").attr(m);this.setElement(n,false)}else{this.setElement(l.result(this,"el"),false)}}});Z.sync=function(s,n,m){var p=J[s];l.defaults(m||(m={}),{emulateHTTP:Z.emulateHTTP,emulateJSON:Z.emulateJSON});var r={type:p,dataType:"json"};if(!m.url){r.url=l.result(n,"url")||R()}if(m.data==null&&n&&(s==="create"||s==="update"||s==="patch")){r.contentType="application/json";r.data=JSON.stringify(m.attrs||n.toJSON(m))}if(m.emulateJSON){r.contentType="application/x-www-form-urlencoded";r.data=r.data?{model:r.data}:{}}if(m.emulateHTTP&&(p==="PUT"||p==="DELETE"||p==="PATCH")){r.type="POST";if(m.emulateJSON){r.data._method=p}var o=m.beforeSend;m.beforeSend=function(t){t.setRequestHeader("X-HTTP-Method-Override",p);if(o){return o.apply(this,arguments)}}}if(r.type!=="GET"&&!m.emulateJSON){r.processData=false}if(r.type==="PATCH"&&window.ActiveXObject&&!(window.external&&window.external.msActiveXFilteringEnabled)){r.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}var q=m.xhr=Z.ajax(l.extend(r,m));n.trigger("request",n,q,m);return q};var J={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};Z.ajax=function(){return Z.$.ajax.apply(Z.$,arguments)};var P=Z.Router=function(m){m||(m={});if(m.routes){this.routes=m.routes}this._bindRoutes();this.initialize.apply(this,arguments)};var Q=/\((.*?)\)/g;var S=/(\(\?)?:\w+/g;var D=/\*\w+/g;var H=/[\-{}\[\]+?.,\\\^$|#\s]/g;l.extend(P.prototype,j,{initialize:function(){},route:function(n,o,p){if(!l.isRegExp(n)){n=this._routeToRegExp(n)}if(l.isFunction(o)){p=o;o=""}if(!p){p=this[o]}var m=this;Z.history.route(n,function(r){var q=m._extractParameters(n,r);p&&p.apply(m,q);m.trigger.apply(m,["route:"+o].concat(q));m.trigger("route",o,q);Z.history.trigger("route",m,o,q)});return this},navigate:function(n,m){Z.history.navigate(n,m);return this},_bindRoutes:function(){if(!this.routes){return }this.routes=l.result(this,"routes");var n,m=l.keys(this.routes);while((n=m.pop())!=null){this.route(n,this.routes[n])}},_routeToRegExp:function(m){m=m.replace(H,"\\$&").replace(Q,"(?:$1)?").replace(S,function(o,n){return n?o:"([^/]+)"}).replace(D,"(.*?)");return new RegExp("^"+m+"$")},_extractParameters:function(m,n){var o=m.exec(n).slice(1);return l.map(o,function(p){return p?decodeURIComponent(p):null})}});var I=Z.History=function(){this.handlers=[];l.bindAll(this,"checkUrl");if(typeof window!=="undefined"){this.location=window.location;this.history=window.history}};var a=/^[#\/]|\s+$/g;var F=/^\/+|\/+$/g;var i=/msie [\w.]+/;var M=/\/$/;I.started=false;l.extend(I.prototype,j,{interval:50,getHash:function(n){var m=(n||this).location.href.match(/#(.*)$/);return m?m[1]:""},getFragment:function(o,n){if(o==null){if(this._hasPushState||!this._wantsHashChange||n){o=this.location.pathname;var m=this.root.replace(M,"");if(!o.indexOf(m)){o=o.substr(m.length)}}else{o=this.getHash()}}return o.replace(a,"")},start:function(o){if(I.started){throw new Error("Backbone.history has already been started")}I.started=true;this.options=l.extend({},{root:"/"},this.options,o);this.root=this.options.root;this._wantsHashChange=this.options.hashChange!==false;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment();var m=document.documentMode;var q=(i.exec(navigator.userAgent.toLowerCase())&&(!m||m<=7));this.root=("/"+this.root+"/").replace(F,"/");if(q&&this._wantsHashChange){this.iframe=Z.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow;this.navigate(n)}if(this._hasPushState){Z.$(window).on("popstate",this.checkUrl)}else{if(this._wantsHashChange&&("onhashchange" in window)&&!q){Z.$(window).on("hashchange",this.checkUrl)}else{if(this._wantsHashChange){this._checkUrlInterval=setInterval(this.checkUrl,this.interval)}}}this.fragment=n;var r=this.location;var p=r.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!p){this.fragment=this.getFragment(null,true);this.location.replace(this.root+this.location.search+"#"+this.fragment);return true}else{if(this._wantsPushState&&this._hasPushState&&p&&r.hash){this.fragment=this.getHash().replace(a,"");this.history.replaceState({},document.title,this.root+this.fragment+r.search)}}if(!this.options.silent){return this.loadUrl()}},stop:function(){Z.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl);clearInterval(this._checkUrlInterval);I.started=false},route:function(m,n){this.handlers.unshift({route:m,callback:n})},checkUrl:function(n){var m=this.getFragment();if(m===this.fragment&&this.iframe){m=this.getFragment(this.getHash(this.iframe))}if(m===this.fragment){return false}if(this.iframe){this.navigate(m)}this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(o){var n=this.fragment=this.getFragment(o);var m=l.any(this.handlers,function(p){if(p.route.test(n)){p.callback(n);return true}});return m},navigate:function(o,n){if(!I.started){return false}if(!n||n===true){n={trigger:n}}o=this.getFragment(o||"");if(this.fragment===o){return }this.fragment=o;var m=this.root+o;if(this._hasPushState){this.history[n.replace?"replaceState":"pushState"]({},document.title,m)}else{if(this._wantsHashChange){this._updateHash(this.location,o,n.replace);if(this.iframe&&(o!==this.getFragment(this.getHash(this.iframe)))){if(!n.replace){this.iframe.document.open().close()}this._updateHash(this.iframe.location,o,n.replace)}}else{return this.location.assign(m)}}if(n.trigger){this.loadUrl(o)}},_updateHash:function(m,o,p){if(p){var n=m.href.replace(/(javascript:|#).*$/,"");m.replace(n+"#"+o)}else{m.hash="#"+o}}});Z.history=new I;var L=function(m,o){var n=this;var q;if(m&&l.has(m,"constructor")){q=m.constructor}else{q=function(){return n.apply(this,arguments)}}l.extend(q,n,o);var p=function(){this.constructor=q};p.prototype=n.prototype;q.prototype=new p;if(m){l.extend(q.prototype,m)}q.__super__=n.prototype;return q};e.extend=C.extend=P.extend=g.extend=I.extend=L;var R=function(){throw new Error('A "url" property or function must be specified')};var h=function(o,n){var m=n.error;n.error=function(p){if(m){m(o,p,n)}o.trigger("error",o,p,n)}}}).call(this);;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:backbone.marionette', location = 'js/lib/backbone.marionette-1.1.0.js' */
/*
 * Includes BabySitter
 * https://github.com/marionettejs/backbone.babysitter/
 *
 * Includes Wreqr
 * https://github.com/marionettejs/backbone.wreqr/
 */
Backbone.ChildViewContainer=(function(D,C){var A=function(E){this._views={};this._indexByModel={};this._indexByCustom={};this._updateLength();C.each(E,this.add,this)};C.extend(A.prototype,{add:function(E,G){var F=E.cid;this._views[F]=E;if(E.model){this._indexByModel[E.model.cid]=F}if(G){this._indexByCustom[G]=F}this._updateLength()},findByModel:function(E){return this.findByModelCid(E.cid)},findByModelCid:function(E){var F=this._indexByModel[E];return this.findByCid(F)},findByCustom:function(F){var E=this._indexByCustom[F];return this.findByCid(E)},findByIndex:function(E){return C.values(this._views)[E]},findByCid:function(E){return this._views[E]},remove:function(E){var F=E.cid;if(E.model){delete this._indexByModel[E.model.cid]}C.any(this._indexByCustom,function(H,G){if(H===F){delete this._indexByCustom[G];return true}},this);delete this._views[F];this._updateLength()},call:function(E){this.apply(E,C.tail(arguments))},apply:function(F,E){C.each(this._views,function(G){if(C.isFunction(G[F])){G[F].apply(G,E||[])}})},_updateLength:function(){this.length=C.size(this._views)}});var B=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];C.each(B,function(E){A.prototype[E]=function(){var F=C.values(this._views);var G=[F].concat(C.toArray(arguments));return C[E].apply(C,G)}});return A})(Backbone,_);Backbone.Wreqr=(function(D,C,A){var B={};B.Handlers=(function(G,F){var E=function(H){this.options=H;this._wreqrHandlers={};if(F.isFunction(this.initialize)){this.initialize(H)}};E.extend=G.Model.extend;F.extend(E.prototype,G.Events,{setHandlers:function(H){F.each(H,function(K,I){var J=null;if(F.isObject(K)&&!F.isFunction(K)){J=K.context;K=K.callback}this.setHandler(I,K,J)},this)},setHandler:function(I,K,J){var H={callback:K,context:J};this._wreqrHandlers[I]=H;this.trigger("handler:add",I,K,J)},hasHandler:function(H){return !!this._wreqrHandlers[H]},getHandler:function(I){var H=this._wreqrHandlers[I];if(!H){throw new Error("Handler not found for '"+I+"'")}return function(){var J=Array.prototype.slice.apply(arguments);return H.callback.apply(H.context,J)}},removeHandler:function(H){delete this._wreqrHandlers[H]},removeAllHandlers:function(){this._wreqrHandlers={}}});return E})(D,A);B.CommandStorage=(function(){var E=function(F){this.options=F;this._commands={};if(A.isFunction(this.initialize)){this.initialize(F)}};A.extend(E.prototype,D.Events,{getCommands:function(G){var F=this._commands[G];if(!F){F={command:G,instances:[]};this._commands[G]=F}return F},addCommand:function(G,F){var H=this.getCommands(G);H.instances.push(F)},clearCommands:function(F){var G=this.getCommands(F);G.instances=[]}});return E})();B.Commands=(function(E){return E.Handlers.extend({storageType:E.CommandStorage,constructor:function(G){this.options=G||{};this._initializeStorage(this.options);this.on("handler:add",this._executeCommands,this);var F=Array.prototype.slice.call(arguments);E.Handlers.prototype.constructor.apply(this,F)},execute:function(G,F){G=arguments[0];F=Array.prototype.slice.call(arguments,1);if(this.hasHandler(G)){this.getHandler(G).apply(this,F)}else{this.storage.addCommand(G,F)}},_executeCommands:function(F,H,G){var I=this.storage.getCommands(F);A.each(I.instances,function(J){H.apply(G,J)});this.storage.clearCommands(F)},_initializeStorage:function(F){var H;var G=F.storageType||this.storageType;if(A.isFunction(G)){H=new G()}else{H=G}this.storage=H}})})(B);B.RequestResponse=(function(E){return E.Handlers.extend({request:function(){var G=arguments[0];var F=Array.prototype.slice.call(arguments,1);return this.getHandler(G).apply(this,F)}})})(B);B.EventAggregator=(function(G,E){var F=function(){};F.extend=G.Model.extend;E.extend(F.prototype,G.Events);return F})(D,A);return B})(Backbone,Backbone.Marionette,_);var Marionette=(function(B,G,A){var F={};G.Marionette=F;F.$=G.$;var C=Array.prototype.slice;function D(H){return C.call(H)}function E(J,I){var H=new Error(J);H.name=I||"Error";throw H}F.extend=G.Model.extend;F.getOption=function(J,H){if(!J||!H){return }var I;if(J.options&&(H in J.options)&&(J.options[H]!==undefined)){I=J.options[H]}else{I=J[H]}return I};F.triggerMethod=(function(){var I=/(^|:)(\w)/gi;function J(L,M,K){return K.toUpperCase()}var H=function(L){var K="on"+L.replace(I,J);var M=this[K];if(A.isFunction(this.trigger)){this.trigger.apply(this,arguments)}if(A.isFunction(M)){return M.apply(this,A.tail(arguments))}};return H})();F.MonitorDOMRefresh=(function(){function J(K){K._isShown=true;H(K)}function I(K){K._isRendered=true;H(K)}function H(K){if(K._isShown&&K._isRendered){if(A.isFunction(K.triggerMethod)){K.triggerMethod("dom:refresh")}}}return function(K){K.listenTo(K,"show",function(){J(K)});K.listenTo(K,"render",function(){I(K)})}})();(function(M){function L(R,P,N,O){var Q=O.split(/\s+/);A.each(Q,function(S){var T=R[S];if(!T){E("Method '"+S+"' was configured as an event handler, but does not exist.")}R.listenTo(P,N,T,R)})}function H(P,O,N,Q){P.listenTo(O,N,Q,P)}function J(R,P,N,O){var Q=O.split(/\s+/);A.each(Q,function(S){var T=R[S];R.stopListening(P,N,T,R)})}function I(P,O,N,Q){P.stopListening(O,N,Q,P)}function K(Q,N,R,P,O){if(!N||!R){return }if(A.isFunction(R)){R=R.call(Q)}A.each(R,function(T,S){if(A.isFunction(T)){P(Q,N,S,T)}else{O(Q,N,S,T)}})}M.bindEntityEvents=function(O,N,P){K(O,N,P,H,L)};M.unbindEntityEvents=function(O,N,P){K(O,N,P,I,J)}})(F);F.Callbacks=function(){this._deferred=F.$.Deferred();this._callbacks=[]};A.extend(F.Callbacks.prototype,{add:function(I,H){this._callbacks.push({cb:I,ctx:H});this._deferred.done(function(K,J){if(H){K=H}I.call(K,J)})},run:function(H,I){this._deferred.resolve(I,H)},reset:function(){var H=this._callbacks;this._deferred=F.$.Deferred();this._callbacks=[];A.each(H,function(I){this.add(I.cb,I.ctx)},this)}});F.Controller=function(H){this.triggerMethod=F.triggerMethod;this.options=H||{};if(A.isFunction(this.initialize)){this.initialize(this.options)}};F.Controller.extend=F.extend;A.extend(F.Controller.prototype,G.Events,{close:function(){this.stopListening();this.triggerMethod("close");this.unbind()}});F.Region=function(I){this.options=I||{};this.el=F.getOption(this,"el");if(!this.el){var J=new Error("An 'el' must be specified for a region.");J.name="NoElError";throw J}if(this.initialize){var H=Array.prototype.slice.apply(arguments);this.initialize.apply(this,H)}};A.extend(F.Region,{buildRegion:function(I,O){var M=(typeof I==="string");var L=(typeof I.selector==="string");var P=(typeof I.regionType==="undefined");var J=(typeof I==="function");if(!J&&!M&&!L){throw new Error("Region must be specified as a Region type, a selector string or an object with selector property")}var H,K;if(M){H=I}if(I.selector){H=I.selector}if(J){K=I}if(!J&&P){K=O}if(I.regionType){K=I.regionType}var N=new K({el:H});if(I.parentEl){N.getEl=function(Q){var R=I.parentEl;if(A.isFunction(R)){R=R()}return R.find(Q)}}return N}});A.extend(F.Region.prototype,G.Events,{show:function(J){this.ensureEl();var H=J.isClosed||A.isUndefined(J.$el);var I=J!==this.currentView;if(I){this.close()}J.render();if(I||H){this.open(J)}this.currentView=J;F.triggerMethod.call(this,"show",J);F.triggerMethod.call(J,"show")},ensureEl:function(){if(!this.$el||this.$el.length===0){this.$el=this.getEl(this.el)}},getEl:function(H){return F.$(H)},open:function(H){this.$el.empty().append(H.el)},close:function(){var H=this.currentView;if(!H||H.isClosed){return }if(H.close){H.close()}else{if(H.remove){H.remove()}}F.triggerMethod.call(this,"close");delete this.currentView},attachView:function(H){this.currentView=H},reset:function(){this.close();delete this.$el}});F.Region.extend=F.extend;F.RegionManager=(function(J){var I=J.Controller.extend({constructor:function(K){this._regions={};J.Controller.prototype.constructor.call(this,K)},addRegions:function(K,L){var M={};A.each(K,function(O,N){if(typeof O==="string"){O={selector:O}}if(O.selector){O=A.defaults({},O,L)}var P=this.addRegion(N,O);M[N]=P},this);return M},addRegion:function(M,N){var P;var L=A.isObject(N);var K=A.isString(N);var O=!!N.selector;if(K||(L&&O)){P=J.Region.buildRegion(N,J.Region)}else{if(A.isFunction(N)){P=J.Region.buildRegion(N,J.Region)}else{P=N}}this._store(M,P);this.triggerMethod("region:add",M,P);return P},get:function(K){return this._regions[K]},removeRegion:function(K){var L=this._regions[K];this._remove(K,L)},removeRegions:function(){A.each(this._regions,function(L,K){this._remove(K,L)},this)},closeRegions:function(){A.each(this._regions,function(L,K){L.close()},this)},close:function(){this.removeRegions();var K=Array.prototype.slice.call(arguments);J.Controller.prototype.close.apply(this,K)},_store:function(K,L){this._regions[K]=L;this._setLength()},_remove:function(K,L){L.close();delete this._regions[K];this._setLength();this.triggerMethod("region:remove",K,L)},_setLength:function(){this.length=A.size(this._regions)}});var H=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];A.each(H,function(K){I.prototype[K]=function(){var M=A.values(this._regions);var L=[M].concat(A.toArray(arguments));return A[K].apply(A,L)}});return I})(F);F.TemplateCache=function(H){this.templateId=H};A.extend(F.TemplateCache,{templateCaches:{},get:function(H){var I=this.templateCaches[H];if(!I){I=new F.TemplateCache(H);this.templateCaches[H]=I}return I.load()},clear:function(){var I;var H=D(arguments);var J=H.length;if(J>0){for(I=0;I<J;I++){delete this.templateCaches[H[I]]}}else{this.templateCaches={}}}});A.extend(F.TemplateCache.prototype,{load:function(){if(this.compiledTemplate){return this.compiledTemplate}var H=this.loadTemplate(this.templateId);this.compiledTemplate=this.compileTemplate(H);return this.compiledTemplate},loadTemplate:function(H){var I=F.$(H).html();if(!I||I.length===0){E("Could not find template: '"+H+"'","NoTemplateError")}return I},compileTemplate:function(H){return A.template(H)}});F.Renderer={render:function(J,K){if(!J){var H=new Error("Cannot render the template since it's false, null or undefined.");H.name="TemplateNotFoundError";throw H}var I;if(typeof J==="function"){I=J}else{I=F.TemplateCache.get(J)}return I(K)}};F.View=G.View.extend({constructor:function(){A.bindAll(this,"render");var H=Array.prototype.slice.apply(arguments);G.View.prototype.constructor.apply(this,H);F.MonitorDOMRefresh(this);this.listenTo(this,"show",this.onShowCalled,this)},triggerMethod:F.triggerMethod,getTemplate:function(){return F.getOption(this,"template")},mixinTemplateHelpers:function(H){H=H||{};var I=F.getOption(this,"templateHelpers");if(A.isFunction(I)){I=I.call(this)}return A.extend(H,I)},configureTriggers:function(){if(!this.triggers){return }var I={};var H=A.result(this,"triggers");A.each(H,function(K,J){I[J]=function(M){if(M&&M.preventDefault){M.preventDefault()}if(M&&M.stopPropagation){M.stopPropagation()}var L={view:this,model:this.model,collection:this.collection};this.triggerMethod(K,L)}},this);return I},delegateEvents:function(H){this._delegateDOMEvents(H);F.bindEntityEvents(this,this.model,F.getOption(this,"modelEvents"));F.bindEntityEvents(this,this.collection,F.getOption(this,"collectionEvents"))},_delegateDOMEvents:function(H){H=H||this.events;if(A.isFunction(H)){H=H.call(this)}var J={};var I=this.configureTriggers();A.extend(J,H,I);G.View.prototype.delegateEvents.call(this,J)},undelegateEvents:function(){var H=Array.prototype.slice.call(arguments);G.View.prototype.undelegateEvents.apply(this,H);F.unbindEntityEvents(this,this.model,F.getOption(this,"modelEvents"));F.unbindEntityEvents(this,this.collection,F.getOption(this,"collectionEvents"))},onShowCalled:function(){},close:function(){if(this.isClosed){return }var H=this.triggerMethod("before:close");if(H===false){return }this.isClosed=true;this.triggerMethod("close");this.unbindUIElements();this.remove()},bindUIElements:function(){if(!this.ui){return }if(!this._uiBindings){this._uiBindings=this.ui}var H=A.result(this,"_uiBindings");this.ui={};A.each(A.keys(H),function(J){var I=H[J];this.ui[J]=this.$(I)},this)},unbindUIElements:function(){if(!this.ui||!this._uiBindings){return }A.each(this.ui,function(I,H){delete this.ui[H]},this);this.ui=this._uiBindings;delete this._uiBindings}});F.ItemView=F.View.extend({constructor:function(){F.View.prototype.constructor.apply(this,D(arguments))},serializeData:function(){var H={};if(this.model){H=this.model.toJSON()}else{if(this.collection){H={items:this.collection.toJSON()}}}return H},render:function(){this.isClosed=false;this.triggerMethod("before:render",this);this.triggerMethod("item:before:render",this);var J=this.serializeData();J=this.mixinTemplateHelpers(J);var I=this.getTemplate();var H=F.Renderer.render(I,J);this.$el.html(H);this.bindUIElements();this.triggerMethod("render",this);this.triggerMethod("item:rendered",this);return this},close:function(){if(this.isClosed){return }this.triggerMethod("item:before:close");F.View.prototype.close.apply(this,D(arguments));this.triggerMethod("item:closed")}});F.CollectionView=F.View.extend({itemViewEventPrefix:"itemview",constructor:function(H){this._initChildViewStorage();F.View.prototype.constructor.apply(this,D(arguments));this._initialEvents()},_initialEvents:function(){if(this.collection){this.listenTo(this.collection,"add",this.addChildView,this);this.listenTo(this.collection,"remove",this.removeItemView,this);this.listenTo(this.collection,"reset",this.render,this)}},addChildView:function(K,L,I){this.closeEmptyView();var J=this.getItemView(K);var H=this.collection.indexOf(K);this.addItemView(K,J,H)},onShowCalled:function(){this.children.each(function(H){F.triggerMethod.call(H,"show")})},triggerBeforeRender:function(){this.triggerMethod("before:render",this);this.triggerMethod("collection:before:render",this)},triggerRendered:function(){this.triggerMethod("render",this);this.triggerMethod("collection:rendered",this)},render:function(){this.isClosed=false;this.triggerBeforeRender();this._renderChildren();this.triggerRendered();return this},_renderChildren:function(){this.closeEmptyView();this.closeChildren();if(this.collection&&this.collection.length>0){this.showCollection()}else{this.showEmptyView()}},showCollection:function(){var H;this.collection.each(function(J,I){H=this.getItemView(J);this.addItemView(J,H,I)},this)},showEmptyView:function(){var I=F.getOption(this,"emptyView");if(I&&!this._showingEmptyView){this._showingEmptyView=true;var H=new G.Model();this.addItemView(H,I,0)}},closeEmptyView:function(){if(this._showingEmptyView){this.closeChildren();delete this._showingEmptyView}},getItemView:function(I){var H=F.getOption(this,"itemView");if(!H){E("An `itemView` must be specified","NoItemViewError")}return H},addItemView:function(K,J,I){var L=F.getOption(this,"itemViewOptions");if(A.isFunction(L)){L=L.call(this,K,I)}var H=this.buildItemView(K,J,L);this.addChildViewEventForwarding(H);this.triggerMethod("before:item:added",H);this.children.add(H);this.renderItemView(H,I);if(this._isShown){F.triggerMethod.call(H,"show")}this.triggerMethod("after:item:added",H)},addChildViewEventForwarding:function(H){var I=F.getOption(this,"itemViewEventPrefix");this.listenTo(H,"all",function(){var J=D(arguments);J[0]=I+":"+J[0];J.splice(1,0,H);F.triggerMethod.apply(this,J)},this)},renderItemView:function(H,I){H.render();this.appendHtml(this,H,I)},buildItemView:function(J,H,K){var I=A.extend({model:J},K);return new H(I)},removeItemView:function(I){var H=this.children.findByModel(I);this.removeChildView(H);this.checkEmpty()},removeChildView:function(H){if(H){this.stopListening(H);if(H.close){H.close()}else{if(H.remove){H.remove()}}this.children.remove(H)}this.triggerMethod("item:removed",H)},checkEmpty:function(){if(!this.collection||this.collection.length===0){this.showEmptyView()}},appendHtml:function(H,J,I){H.$el.append(J.el)},_initChildViewStorage:function(){this.children=new G.ChildViewContainer()},close:function(){if(this.isClosed){return }this.triggerMethod("collection:before:close");this.closeChildren();this.triggerMethod("collection:closed");F.View.prototype.close.apply(this,D(arguments))},closeChildren:function(){this.children.each(function(H){this.removeChildView(H)},this);this.checkEmpty()}});F.CompositeView=F.CollectionView.extend({constructor:function(){F.CollectionView.prototype.constructor.apply(this,D(arguments))},_initialEvents:function(){if(this.collection){this.listenTo(this.collection,"add",this.addChildView,this);this.listenTo(this.collection,"remove",this.removeItemView,this);this.listenTo(this.collection,"reset",this._renderChildren,this)}},getItemView:function(I){var H=F.getOption(this,"itemView")||this.constructor;if(!H){E("An `itemView` must be specified","NoItemViewError")}return H},serializeData:function(){var H={};if(this.model){H=this.model.toJSON()}return H},render:function(){this.isRendered=true;this.isClosed=false;this.resetItemViewContainer();this.triggerBeforeRender();var H=this.renderModel();this.$el.html(H);this.bindUIElements();this.triggerMethod("composite:model:rendered");this._renderChildren();this.triggerMethod("composite:rendered");this.triggerRendered();return this},_renderChildren:function(){if(this.isRendered){F.CollectionView.prototype._renderChildren.call(this);this.triggerMethod("composite:collection:rendered")}},renderModel:function(){var I={};I=this.serializeData();I=this.mixinTemplateHelpers(I);var H=this.getTemplate();return F.Renderer.render(H,I)},appendHtml:function(H,J,I){var K=this.getItemViewContainer(H);K.append(J.el)},getItemViewContainer:function(K){if("$itemViewContainer" in K){return K.$itemViewContainer}var I;var J=F.getOption(K,"itemViewContainer");if(J){var H=A.isFunction(J)?J():J;I=K.$(H);if(I.length<=0){E("The specified `itemViewContainer` was not found: "+K.itemViewContainer,"ItemViewContainerMissingError")}}else{I=K.$el}K.$itemViewContainer=I;return I},resetItemViewContainer:function(){if(this.$itemViewContainer){delete this.$itemViewContainer}}});F.Layout=F.ItemView.extend({regionType:F.Region,constructor:function(H){H=H||{};this._firstRender=true;this._initializeRegions(H);F.ItemView.prototype.constructor.call(this,H)},render:function(){if(this.isClosed){this._initializeRegions()}if(this._firstRender){this._firstRender=false}else{if(!this.isClosed){this._reInitializeRegions()}}var I=Array.prototype.slice.apply(arguments);var H=F.ItemView.prototype.render.apply(this,I);return H},close:function(){if(this.isClosed){return }this.regionManager.close();var H=Array.prototype.slice.apply(arguments);F.ItemView.prototype.close.apply(this,H)},addRegion:function(H,I){var J={};J[H]=I;return this._buildRegions(J)[H]},addRegions:function(H){this.regions=A.extend({},this.regions,H);return this._buildRegions(H)},removeRegion:function(H){delete this.regions[H];return this.regionManager.removeRegion(H)},_buildRegions:function(J){var H=this;var I={regionType:F.getOption(this,"regionType"),parentEl:function(){return H.$el}};return this.regionManager.addRegions(J,I)},_initializeRegions:function(H){var I;this._initRegionManager();if(A.isFunction(this.regions)){I=this.regions(H)}else{I=this.regions||{}}this.addRegions(I)},_reInitializeRegions:function(){this.regionManager.closeRegions();this.regionManager.each(function(H){H.reset()})},_initRegionManager:function(){this.regionManager=new F.RegionManager();this.listenTo(this.regionManager,"region:add",function(H,I){this[H]=I;this.trigger("region:add",H,I)});this.listenTo(this.regionManager,"region:remove",function(H,I){delete this[H];this.trigger("region:remove",H,I)})}});F.AppRouter=G.Router.extend({constructor:function(I){G.Router.prototype.constructor.apply(this,D(arguments));this.options=I||{};var J=F.getOption(this,"appRoutes");var H=this._getController();this.processAppRoutes(H,J)},appRoute:function(J,I){var H=this._getController();this._addAppRoute(H,J,I)},processAppRoutes:function(H,J){if(!J){return }var I=A.keys(J).reverse();A.each(I,function(K){this._addAppRoute(H,K,J[K])},this)},_getController:function(){return F.getOption(this,"controller")},_addAppRoute:function(H,J,I){var K=H[I];if(!K){throw new Error("Method '"+I+"' was not found on the controller")}this.route(J,I,A.bind(K,H))}});F.Application=function(H){this._initRegionManager();this._initCallbacks=new F.Callbacks();this.vent=new G.Wreqr.EventAggregator();this.commands=new G.Wreqr.Commands();this.reqres=new G.Wreqr.RequestResponse();this.submodules={};A.extend(this,H);this.triggerMethod=F.triggerMethod};A.extend(F.Application.prototype,G.Events,{execute:function(){var H=Array.prototype.slice.apply(arguments);this.commands.execute.apply(this.commands,H)},request:function(){var H=Array.prototype.slice.apply(arguments);return this.reqres.request.apply(this.reqres,H)},addInitializer:function(H){this._initCallbacks.add(H)},start:function(H){this.triggerMethod("initialize:before",H);this._initCallbacks.run(H,this);this.triggerMethod("initialize:after",H);this.triggerMethod("start",H)},addRegions:function(H){return this._regionManager.addRegions(H)},closeRegions:function(){this._regionManager.closeRegions()},removeRegion:function(H){this._regionManager.removeRegion(H)},getRegion:function(H){return this._regionManager.get(H)},module:function(H,J){var I=D(arguments);I.unshift(this);return F.Module.create.apply(F.Module,I)},_initRegionManager:function(){this._regionManager=new F.RegionManager();this.listenTo(this._regionManager,"region:add",function(H,I){this[H]=I});this.listenTo(this._regionManager,"region:remove",function(H,I){delete this[H]})}});F.Application.extend=F.extend;F.Module=function(H,I){this.moduleName=H;this.submodules={};this._setupInitializersAndFinalizers();this.app=I;this.startWithParent=true;this.triggerMethod=F.triggerMethod};A.extend(F.Module.prototype,G.Events,{addInitializer:function(H){this._initializerCallbacks.add(H)},addFinalizer:function(H){this._finalizerCallbacks.add(H)},start:function(H){if(this._isInitialized){return }A.each(this.submodules,function(I){if(I.startWithParent){I.start(H)}});this.triggerMethod("before:start",H);this._initializerCallbacks.run(H,this);this._isInitialized=true;this.triggerMethod("start",H)},stop:function(){if(!this._isInitialized){return }this._isInitialized=false;F.triggerMethod.call(this,"before:stop");A.each(this.submodules,function(H){H.stop()});this._finalizerCallbacks.run(undefined,this);this._initializerCallbacks.reset();this._finalizerCallbacks.reset();F.triggerMethod.call(this,"stop")},addDefinition:function(H,I){this._runModuleDefinition(H,I)},_runModuleDefinition:function(I,J){if(!I){return }var H=A.flatten([this,this.app,G,F,F.$,A,J]);I.apply(this,H)},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new F.Callbacks();this._finalizerCallbacks=new F.Callbacks()}});A.extend(F.Module,{create:function(N,H,I){var J=N;var L=D(arguments);L.splice(0,3);H=H.split(".");var K=H.length;var M=[];M[K-1]=I;A.each(H,function(O,P){var Q=J;J=this._getModule(Q,O,N);this._addModuleDefinition(Q,J,M[P],L)},this);return J},_getModule:function(L,I,M,K,H){var J=L[I];if(!J){J=new F.Module(I,M);L[I]=J;L.submodules[I]=J}return J},_addModuleDefinition:function(M,I,L,H){var K;var J;if(A.isFunction(L)){K=L;J=true}else{if(A.isObject(L)){K=L.define;J=L.startWithParent}else{J=true}}if(K){I.addDefinition(K,H)}I.startWithParent=I.startWithParent&&J;if(I.startWithParent&&!I.startWithParentIsConfigured){I.startWithParentIsConfigured=true;M.addInitializer(function(N){if(I.startWithParent){I.start(N)}})}}});return F})(this,Backbone,_);;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:backbone.marionette', location = 'js/lib/backbone.noconflict.js' */
(function(){var A=Backbone.noConflict();define("workflow-designer/backbone",[],function(){return A})})();AJS.namespace("JIRA.WorkflowDesigner.Backbone",null,require("workflow-designer/backbone"));;
;
/* module-key = 'com.atlassian.auiplugin:split_aui.splitchunk.vendors--9c8c8c1546', location = 'aui.chunk.5dea31f049d6c4f0c3de--2aa0019581c68055c6ea.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.splitchunk.vendors--9c8c8c1546"],{lSwU:function(n,o,i){var p,e,u;e=[i("oDIA"),i("O+lX")],void 0===(u="function"==typeof(p=function(n){return n.ui.plugin={add:function(o,i,p){var e,u=n.ui[o].prototype;for(e in p)u.plugins[e]=u.plugins[e]||[],u.plugins[e].push([i,p[e]])},call:function(n,o,i,p){var e,u=n.plugins[o];if(u&&(p||n.element[0].parentNode&&11!==n.element[0].parentNode.nodeType))for(e=0;e<u.length;e++)n.options[u[e][0]]&&u[e][1].apply(n.element,i)}}})?p.apply(o,e):p)||(n.exports=u)}}]);
//# sourceMappingURL=aui.chunk.5dea31f049d6c4f0c3de--2aa0019581c68055c6ea.js.map;
;
/* module-key = 'com.atlassian.auiplugin:split_aui.splitchunk.vendors--06bc6ae5d7', location = 'aui.chunk.604fd3e8f834244da4a6--3b7718afeb87134077c9.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.splitchunk.vendors--06bc6ae5d7"],{"0Hbr":function(t,e,s){var i,o,n;o=[s("oDIA"),s("O+lX")],void 0===(n="function"==typeof(i=function(t){return t.ui.safeActiveElement=function(t){var e;try{e=t.activeElement}catch(s){e=t.body}return e||(e=t.body),e.nodeName||(e=t.body),e}})?i.apply(e,o):i)||(t.exports=n)},pTG0:function(t,e,s){var i,o,n;o=[s("oDIA"),s("O+lX")],void 0===(n="function"==typeof(i=function(t){return t.ui.safeBlur=function(e){e&&"body"!==e.nodeName.toLowerCase()&&t(e).trigger("blur")}})?i.apply(e,o):i)||(t.exports=n)},"z+ct":function(t,e,s){var i,o,n;o=[s("oDIA"),s("XPYc"),s("5h+3"),s("lSwU"),s("0Hbr"),s("pTG0"),s("0kPy"),s("O+lX"),s("yIBB")],void 0===(n="function"==typeof(i=function(t){return t.widget("ui.draggable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(e){var s=this.options;return!(this.helper||s.disabled||t(e.target).closest(".ui-resizable-handle").length>0||(this.handle=this._getHandle(e),!this.handle||(this._blurActiveElement(e),this._blockFrames(!0===s.iframeFix?"iframe":s.iframeFix),0)))},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map(function(){var e=t(this);return t("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var s=t.ui.safeActiveElement(this.document[0]);t(e.target).closest(s).length||t.ui.safeBlur(s)},_mouseStart:function(e){var s=this.options;return this.helper=this._createHelper(e),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===t(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,s.cursorAt&&this._adjustOffsetFromHelper(s.cursorAt),this._setContainment(),!1===this._trigger("start",e)?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!s.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(e,s){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!s){var i=this._uiHash();if(!1===this._trigger("drag",e,i))return this._mouseUp(new t.Event("mouseup",e)),!1;this.position=i.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var s=this,i=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(i=t.ui.ddmanager.drop(this,e)),this.dropped&&(i=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||!0===this.options.revert||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==s._trigger("stop",e)&&s._clear()}):!1!==this._trigger("stop",e)&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.trigger("focus"),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new t.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(e){return!this.options.handle||!!t(e.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(e){var s=this.options,i=t.isFunction(s.helper),o=i?t(s.helper.apply(this.element[0],[e])):"clone"===s.helper?this.element.clone().removeAttr("id"):this.element;return o.parents("body").length||o.appendTo("parent"===s.appendTo?this.element[0].parentNode:s.appendTo),i&&o[0]===this.element[0]&&this._setPositionRelative(),o[0]===this.element[0]||/(fixed|absolute)/.test(o.css("position"))||o.css("position","absolute"),o},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),s=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==s&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,s,i,o=this.options,n=this.document[0];this.relativeContainer=null,o.containment?"window"!==o.containment?"document"!==o.containment?o.containment.constructor!==Array?("parent"===o.containment&&(o.containment=this.helper[0].parentNode),(i=(s=t(o.containment))[0])&&(e=/(scroll|auto)/.test(s.css("overflow")),this.containment=[(parseInt(s.css("borderLeftWidth"),10)||0)+(parseInt(s.css("paddingLeft"),10)||0),(parseInt(s.css("borderTopWidth"),10)||0)+(parseInt(s.css("paddingTop"),10)||0),(e?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(s.css("borderRightWidth"),10)||0)-(parseInt(s.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(s.css("borderBottomWidth"),10)||0)-(parseInt(s.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=s)):this.containment=o.containment:this.containment=[0,0,t(n).width()-this.helperProportions.width-this.margins.left,(t(n).height()||n.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||n.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=null},_convertPositionTo:function(t,e){e||(e=this.position);var s="absolute"===t?1:-1,i=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.offset.scroll.top:i?0:this.offset.scroll.top)*s,left:e.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.offset.scroll.left:i?0:this.offset.scroll.left)*s}},_generatePosition:function(t,e){var s,i,o,n,r=this.options,l=this._isRootNode(this.scrollParent[0]),a=t.pageX,h=t.pageY;return l&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(this.relativeContainer?(i=this.relativeContainer.offset(),s=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):s=this.containment,t.pageX-this.offset.click.left<s[0]&&(a=s[0]+this.offset.click.left),t.pageY-this.offset.click.top<s[1]&&(h=s[1]+this.offset.click.top),t.pageX-this.offset.click.left>s[2]&&(a=s[2]+this.offset.click.left),t.pageY-this.offset.click.top>s[3]&&(h=s[3]+this.offset.click.top)),r.grid&&(o=r.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/r.grid[1])*r.grid[1]:this.originalPageY,h=s?o-this.offset.click.top>=s[1]||o-this.offset.click.top>s[3]?o:o-this.offset.click.top>=s[1]?o-r.grid[1]:o+r.grid[1]:o,n=r.grid[0]?this.originalPageX+Math.round((a-this.originalPageX)/r.grid[0])*r.grid[0]:this.originalPageX,a=s?n-this.offset.click.left>=s[0]||n-this.offset.click.left>s[2]?n:n-this.offset.click.left>=s[0]?n-r.grid[0]:n+r.grid[0]:n),"y"===r.axis&&(a=this.originalPageX),"x"===r.axis&&(h=this.originalPageY)),{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:l?0:this.offset.scroll.top),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:l?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(e,s,i){return i=i||this._uiHash(),t.ui.plugin.call(this,e,[s,i,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),i.offset=this.positionAbs),t.Widget.prototype._trigger.call(this,e,s,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,s,i){var o=t.extend({},s,{item:i.element});i.sortables=[],t(i.options.connectToSortable).each(function(){var s=t(this).sortable("instance");s&&!s.options.disabled&&(i.sortables.push(s),s.refreshPositions(),s._trigger("activate",e,o))})},stop:function(e,s,i){var o=t.extend({},s,{item:i.element});i.cancelHelperRemoval=!1,t.each(i.sortables,function(){this.isOver?(this.isOver=0,i.cancelHelperRemoval=!0,this.cancelHelperRemoval=!1,this._storedCSS={position:this.placeholder.css("position"),top:this.placeholder.css("top"),left:this.placeholder.css("left")},this._mouseStop(e),this.options.helper=this.options._helper):(this.cancelHelperRemoval=!0,this._trigger("deactivate",e,o))})},drag:function(e,s,i){t.each(i.sortables,function(){var o=!1,n=this;n.positionAbs=i.positionAbs,n.helperProportions=i.helperProportions,n.offset.click=i.offset.click,n._intersectsWith(n.containerCache)&&(o=!0,t.each(i.sortables,function(){return this.positionAbs=i.positionAbs,this.helperProportions=i.helperProportions,this.offset.click=i.offset.click,this!==n&&this._intersectsWith(this.containerCache)&&t.contains(n.element[0],this.element[0])&&(o=!1),o})),o?(n.isOver||(n.isOver=1,i._parent=s.helper.parent(),n.currentItem=s.helper.appendTo(n.element).data("ui-sortable-item",!0),n.options._helper=n.options.helper,n.options.helper=function(){return s.helper[0]},e.target=n.currentItem[0],n._mouseCapture(e,!0),n._mouseStart(e,!0,!0),n.offset.click.top=i.offset.click.top,n.offset.click.left=i.offset.click.left,n.offset.parent.left-=i.offset.parent.left-n.offset.parent.left,n.offset.parent.top-=i.offset.parent.top-n.offset.parent.top,i._trigger("toSortable",e),i.dropped=n.element,t.each(i.sortables,function(){this.refreshPositions()}),i.currentItem=i.element,n.fromOutside=i),n.currentItem&&(n._mouseDrag(e),s.position=n.position)):n.isOver&&(n.isOver=0,n.cancelHelperRemoval=!0,n.options._revert=n.options.revert,n.options.revert=!1,n._trigger("out",e,n._uiHash(n)),n._mouseStop(e,!0),n.options.revert=n.options._revert,n.options.helper=n.options._helper,n.placeholder&&n.placeholder.remove(),s.helper.appendTo(i._parent),i._refreshOffsets(e),s.position=i._generatePosition(e,!0),i._trigger("fromSortable",e),i.dropped=!1,t.each(i.sortables,function(){this.refreshPositions()}))})}}),t.ui.plugin.add("draggable","cursor",{start:function(e,s,i){var o=t("body"),n=i.options;o.css("cursor")&&(n._cursor=o.css("cursor")),o.css("cursor",n.cursor)},stop:function(e,s,i){var o=i.options;o._cursor&&t("body").css("cursor",o._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,s,i){var o=t(s.helper),n=i.options;o.css("opacity")&&(n._opacity=o.css("opacity")),o.css("opacity",n.opacity)},stop:function(e,s,i){var o=i.options;o._opacity&&t(s.helper).css("opacity",o._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(t,e,s){s.scrollParentNotHidden||(s.scrollParentNotHidden=s.helper.scrollParent(!1)),s.scrollParentNotHidden[0]!==s.document[0]&&"HTML"!==s.scrollParentNotHidden[0].tagName&&(s.overflowOffset=s.scrollParentNotHidden.offset())},drag:function(e,s,i){var o=i.options,n=!1,r=i.scrollParentNotHidden[0],l=i.document[0];r!==l&&"HTML"!==r.tagName?(o.axis&&"x"===o.axis||(i.overflowOffset.top+r.offsetHeight-e.pageY<o.scrollSensitivity?r.scrollTop=n=r.scrollTop+o.scrollSpeed:e.pageY-i.overflowOffset.top<o.scrollSensitivity&&(r.scrollTop=n=r.scrollTop-o.scrollSpeed)),o.axis&&"y"===o.axis||(i.overflowOffset.left+r.offsetWidth-e.pageX<o.scrollSensitivity?r.scrollLeft=n=r.scrollLeft+o.scrollSpeed:e.pageX-i.overflowOffset.left<o.scrollSensitivity&&(r.scrollLeft=n=r.scrollLeft-o.scrollSpeed))):(o.axis&&"x"===o.axis||(e.pageY-t(l).scrollTop()<o.scrollSensitivity?n=t(l).scrollTop(t(l).scrollTop()-o.scrollSpeed):t(window).height()-(e.pageY-t(l).scrollTop())<o.scrollSensitivity&&(n=t(l).scrollTop(t(l).scrollTop()+o.scrollSpeed))),o.axis&&"y"===o.axis||(e.pageX-t(l).scrollLeft()<o.scrollSensitivity?n=t(l).scrollLeft(t(l).scrollLeft()-o.scrollSpeed):t(window).width()-(e.pageX-t(l).scrollLeft())<o.scrollSensitivity&&(n=t(l).scrollLeft(t(l).scrollLeft()+o.scrollSpeed)))),!1!==n&&t.ui.ddmanager&&!o.dropBehaviour&&t.ui.ddmanager.prepareOffsets(i,e)}}),t.ui.plugin.add("draggable","snap",{start:function(e,s,i){var o=i.options;i.snapElements=[],t(o.snap.constructor!==String?o.snap.items||":data(ui-draggable)":o.snap).each(function(){var e=t(this),s=e.offset();this!==i.element[0]&&i.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:s.top,left:s.left})})},drag:function(e,s,i){var o,n,r,l,a,h,p,c,f,d,g=i.options,u=g.snapTolerance,m=s.offset.left,v=m+i.helperProportions.width,_=s.offset.top,P=_+i.helperProportions.height;for(f=i.snapElements.length-1;f>=0;f--)h=(a=i.snapElements[f].left-i.margins.left)+i.snapElements[f].width,c=(p=i.snapElements[f].top-i.margins.top)+i.snapElements[f].height,v<a-u||m>h+u||P<p-u||_>c+u||!t.contains(i.snapElements[f].item.ownerDocument,i.snapElements[f].item)?(i.snapElements[f].snapping&&i.options.snap.release&&i.options.snap.release.call(i.element,e,t.extend(i._uiHash(),{snapItem:i.snapElements[f].item})),i.snapElements[f].snapping=!1):("inner"!==g.snapMode&&(o=Math.abs(p-P)<=u,n=Math.abs(c-_)<=u,r=Math.abs(a-v)<=u,l=Math.abs(h-m)<=u,o&&(s.position.top=i._convertPositionTo("relative",{top:p-i.helperProportions.height,left:0}).top),n&&(s.position.top=i._convertPositionTo("relative",{top:c,left:0}).top),r&&(s.position.left=i._convertPositionTo("relative",{top:0,left:a-i.helperProportions.width}).left),l&&(s.position.left=i._convertPositionTo("relative",{top:0,left:h}).left)),d=o||n||r||l,"outer"!==g.snapMode&&(o=Math.abs(p-_)<=u,n=Math.abs(c-P)<=u,r=Math.abs(a-m)<=u,l=Math.abs(h-v)<=u,o&&(s.position.top=i._convertPositionTo("relative",{top:p,left:0}).top),n&&(s.position.top=i._convertPositionTo("relative",{top:c-i.helperProportions.height,left:0}).top),r&&(s.position.left=i._convertPositionTo("relative",{top:0,left:a}).left),l&&(s.position.left=i._convertPositionTo("relative",{top:0,left:h-i.helperProportions.width}).left)),!i.snapElements[f].snapping&&(o||n||r||l||d)&&i.options.snap.snap&&i.options.snap.snap.call(i.element,e,t.extend(i._uiHash(),{snapItem:i.snapElements[f].item})),i.snapElements[f].snapping=o||n||r||l||d)}}),t.ui.plugin.add("draggable","stack",{start:function(e,s,i){var o,n=i.options,r=t.makeArray(t(n.stack)).sort(function(e,s){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(s).css("zIndex"),10)||0)});r.length&&(o=parseInt(t(r[0]).css("zIndex"),10)||0,t(r).each(function(e){t(this).css("zIndex",o+e)}),this.css("zIndex",o+r.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,s,i){var o=t(s.helper),n=i.options;o.css("zIndex")&&(n._zIndex=o.css("zIndex")),o.css("zIndex",n.zIndex)},stop:function(e,s,i){var o=i.options;o._zIndex&&t(s.helper).css("zIndex",o._zIndex)}}),t.ui.draggable})?i.apply(e,o):i)||(t.exports=n)}}]);
//# sourceMappingURL=aui.chunk.604fd3e8f834244da4a6--3b7718afeb87134077c9.js.map;
;
/* module-key = 'com.atlassian.auiplugin:split_aui.splitchunk.vendors--825acd7236', location = 'aui.chunk.30cfc3ee698da81b10f9--0731854b3b05e314e279.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.splitchunk.vendors--825acd7236"],{PTCr:function(e,t,i){var s,o,n;o=[i("oDIA"),i("z+ct"),i("XPYc"),i("O+lX"),i("yIBB")],void 0===(n="function"==typeof(s=function(e){e.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,i=this.options,s=i.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(s)?s:function(e){return e.is(s)},this.proportions=function(){if(!arguments.length)return t||(t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight});t=arguments[0]},this._addToManager(i.scope),i.addClasses&&this._addClass("ui-droppable")},_addToManager:function(t){e.ui.ddmanager.droppables[t]=e.ui.ddmanager.droppables[t]||[],e.ui.ddmanager.droppables[t].push(this)},_splice:function(e){for(var t=0;t<e.length;t++)e[t]===this&&e.splice(t,1)},_destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];this._splice(t)},_setOption:function(t,i){if("accept"===t)this.accept=e.isFunction(i)?i:function(e){return e.is(i)};else if("scope"===t){var s=e.ui.ddmanager.droppables[this.options.scope];this._splice(s),this._addToManager(i)}this._super(t,i)},_activate:function(t){var i=e.ui.ddmanager.current;this._addActiveClass(),i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=e.ui.ddmanager.current;this._removeActiveClass(),i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this._addHoverClass(),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this._removeHoverClass(),this._trigger("out",t,this.ui(i)))},_drop:function(i,s){var o=s||e.ui.ddmanager.current,n=!1;return!(!o||(o.currentItem||o.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var s=e(this).droppable("instance");if(s.options.greedy&&!s.options.disabled&&s.options.scope===o.options.scope&&s.accept.call(s.element[0],o.currentItem||o.element)&&t(o,e.extend(s,{offset:s.element.offset()}),s.options.tolerance,i))return n=!0,!1}),!n&&!!this.accept.call(this.element[0],o.currentItem||o.element)&&(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",i,this.ui(o)),this.element))},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});var t=e.ui.intersect=function(){function e(e,t,i){return e>=t&&e<t+i}return function(t,i,s,o){if(!i.offset)return!1;var n=(t.positionAbs||t.position.absolute).left+t.margins.left,r=(t.positionAbs||t.position.absolute).top+t.margins.top,a=n+t.helperProportions.width,l=r+t.helperProportions.height,p=i.offset.left,c=i.offset.top,d=p+i.proportions().width,h=c+i.proportions().height;switch(s){case"fit":return p<=n&&a<=d&&c<=r&&l<=h;case"intersect":return p<n+t.helperProportions.width/2&&a-t.helperProportions.width/2<d&&c<r+t.helperProportions.height/2&&l-t.helperProportions.height/2<h;case"pointer":return e(o.pageY,c,i.proportions().height)&&e(o.pageX,p,i.proportions().width);case"touch":return(r>=c&&r<=h||l>=c&&l<=h||r<c&&l>h)&&(n>=p&&n<=d||a>=p&&a<=d||n<p&&a>d);default:return!1}}}();return e.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(t,i){var s,o,n=e.ui.ddmanager.droppables[t.options.scope]||[],r=i?i.type:null,a=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(s=0;s<n.length;s++)if(!(n[s].options.disabled||t&&!n[s].accept.call(n[s].element[0],t.currentItem||t.element))){for(o=0;o<a.length;o++)if(a[o]===n[s].element[0]){n[s].proportions().height=0;continue e}n[s].visible="none"!==n[s].element.css("display"),n[s].visible&&("mousedown"===r&&n[s]._activate.call(n[s],i),n[s].offset=n[s].element.offset(),n[s].proportions({width:n[s].element[0].offsetWidth,height:n[s].element[0].offsetHeight}))}},drop:function(i,s){var o=!1;return e.each((e.ui.ddmanager.droppables[i.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&t(i,this,this.options.tolerance,s)&&(o=this._drop.call(this,s)||o),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,s)))}),o},dragStart:function(t,i){t.element.parentsUntil("body").on("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)})},drag:function(i,s){i.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(i,s),e.each(e.ui.ddmanager.droppables[i.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var o,n,r,a=t(i,this,this.options.tolerance,s),l=!a&&this.isover?"isout":a&&!this.isover?"isover":null;l&&(this.options.greedy&&(n=this.options.scope,(r=this.element.parents(":data(ui-droppable)").filter(function(){return e(this).droppable("instance").options.scope===n})).length&&((o=e(r[0]).droppable("instance")).greedyChild="isover"===l)),o&&"isover"===l&&(o.isover=!1,o.isout=!0,o._out.call(o,s)),this[l]=!0,this["isout"===l?"isover":"isout"]=!1,this["isover"===l?"_over":"_out"].call(this,s),o&&"isout"===l&&(o.isout=!1,o.isover=!0,o._over.call(o,s)))}})},dragStop:function(t,i){t.element.parentsUntil("body").off("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)}},!1!==e.uiBackCompat&&e.widget("ui.droppable",e.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}}),e.ui.droppable})?s.apply(t,o):s)||(e.exports=n)}}]);
//# sourceMappingURL=aui.chunk.30cfc3ee698da81b10f9--0731854b3b05e314e279.js.map;
;
/* module-key = 'com.atlassian.auiplugin:split_jquery.ui.droppable', location = 'aui.chunk.5976981f3956e6072e63--b76bd90276ad9a25b9fb.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["jquery.ui.droppable"],{qe8r:function(u,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i("PTCr"),e.default="jquery",u.exports=e.default}},[["qe8r","runtime","aui.splitchunk.vendors--20a97d6a33","aui.splitchunk.vendors--d18e3cafa7","aui.splitchunk.vendors--db57146687","aui.splitchunk.vendors--51504ebf10","aui.splitchunk.vendors--9c8c8c1546","aui.splitchunk.vendors--351ae504d7","aui.splitchunk.vendors--06bc6ae5d7","aui.splitchunk.vendors--825acd7236","aui.splitchunk.172ffb6da7"]]]);
//# sourceMappingURL=aui.chunk.5976981f3956e6072e63--b76bd90276ad9a25b9fb.js.map;
;
/* module-key = 'com.atlassian.auiplugin:split_aui.splitchunk.vendors--f29b9b9def', location = 'aui.chunk.25d29ac3a5db8655ba18--0c97ad24864d45f4b264.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.splitchunk.vendors--f29b9b9def"],{zxTg:function(n,i,o){}}]);
//# sourceMappingURL=aui.chunk.25d29ac3a5db8655ba18--0c97ad24864d45f4b264.js.map;
;
/* module-key = 'com.atlassian.auiplugin:split_jquery.ui.draggable', location = 'aui.chunk.05b7bcc68c25281d0731--3ad7dcf9c4cebedef46a.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["jquery.ui.draggable"],{duoV:function(u,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i("zxTg"),i("z+ct"),e.default="jquery",u.exports=e.default}},[["duoV","runtime","aui.splitchunk.vendors--20a97d6a33","aui.splitchunk.vendors--d18e3cafa7","aui.splitchunk.vendors--db57146687","aui.splitchunk.vendors--51504ebf10","aui.splitchunk.vendors--9c8c8c1546","aui.splitchunk.vendors--351ae504d7","aui.splitchunk.vendors--06bc6ae5d7","aui.splitchunk.vendors--f29b9b9def","aui.splitchunk.172ffb6da7"]]]);
//# sourceMappingURL=aui.chunk.05b7bcc68c25281d0731--3ad7dcf9c4cebedef46a.js.map;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d-api', location = 'js/lib/eve-0.2.4.js' */
(function(H){var E="0.2.4",I="hasOwnProperty",B=/[\.\/]/,A="*",G=function(){},F=function(L,K){return L-K},D,J={n:{}},C=function(K,W){var Q=J,R=Array.prototype.slice.call(arguments,2),T=C.listeners(K),S=0,P=false,M,L=[],O={},U=[];D=K;for(var N=0,V=T.length;N<V;N++){if("zIndex" in T[N]){L.push(T[N].zIndex);if(T[N].zIndex<0){O[T[N].zIndex]=T[N]}}}L.sort(F);while(L[S]<0){M=O[L[S++]];if(M.apply(W,R)===P){return P}}for(N=0;N<V;N++){M=T[N];if("zIndex" in M){if(M.zIndex==L[S]){if(M.apply(W,R)===P){return P}do{S++;M=O[L[S]];if(M&&M.apply(W,R)===P){return P}}while(M)}else{O[M.zIndex]=M}}else{if(M.apply(W,R)===P){return P}}}};C.listeners=function(K){var S=K.split(B),Q=J,W,R,L,O,V,N,P,T,U=[Q],M=[];for(O=0,V=S.length;O<V;O++){T=[];for(N=0,P=U.length;N<P;N++){Q=U[N].n;R=[Q[S[O]],Q[A]];L=2;while(L--){W=R[L];if(W){T.push(W);M=M.concat(W.f||[])}}}U=T}return M};C.on=function(K,N){var P=K.split(B),O=J;for(var L=0,M=P.length;L<M;L++){O=O.n;!O[P[L]]&&(O[P[L]]={n:{}});O=O[P[L]]}O.f=O.f||[];for(L=0,M=O.f.length;L<M;L++){if(O.f[L]==N){return G}}O.f.push(N);return function(Q){if(+Q==+Q){N.zIndex=+Q}}};C.nt=function(K){if(K){return new RegExp("(?:\\.|\\/|^)"+K+"(?:\\.|\\/|$)").test(D)}return D};C.unbind=function(L,P){var R=L.split(B),Q,T,M,S=[J];for(var O=0,U=R.length;O<U;O++){for(var N=0;N<S.length;N+=M.length-2){M=[N,1];Q=S[N].n;if(R[O]!=A){if(Q[R[O]]){M.push(Q[R[O]])}}else{for(T in Q){if(Q[I](T)){M.push(Q[T])}}}S.splice.apply(S,M)}}for(O=0,U=S.length;O<U;O++){Q=S[O];while(Q.n){if(P){if(Q.f){for(O=0,U=Q.f.length;O<U;O++){if(Q.f[O]==P){Q.f.splice(O,1);break}}!Q.f.length&&delete Q.f}for(T in Q.n){if(Q.n[I](T)&&Q.n[T].f){var K=Q.n[T].f;for(O=0,U=K.length;O<U;O++){if(K[O]==P){K.splice(O,1);break}}!K.length&&delete Q.n[T].f}}}else{delete Q.f;for(T in Q.n){if(Q.n[I](T)&&Q.n[T].f){delete Q.n[T].f}}}Q=Q.n}}};C.version=E;C.toString=function(){return"You are running Eve "+E};(typeof module!="undefined"&&module.exports)?(module.exports=C):(H.eve=C)})(this);;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d-api', location = 'js/lib/raphael-2.1.0.js' */
/* THIS FILE HAS BEEN MODIFIED BY ATLASSIAN. See https://ecosystem.atlassian.net/browse/AUI-1535 for details. Modified lines are marked below, search "ATLASSIAN" */
(function(){
/* THIS FILE HAS BEEN MODIFIED BY ATLASSIAN. See https://ecosystem.atlassian.net/browse/AUI-1535 for details. Modified lines are marked below, search "ATLASSIAN" */
(function(){function R(first){if(R.is(first,"function")){return loaded?first():eve.on("raphael.DOMload",first)}else{if(R.is(first,array)){return R._engine.create[apply](R,first.splice(0,3+R.is(first[0],nu))).add(first)}else{var args=Array.prototype.slice.call(arguments,0);if(R.is(args[args.length-1],"function")){var f=args.pop();return loaded?f.call(R._engine.create[apply](R,args)):eve.on("raphael.DOMload",function(){f.call(R._engine.create[apply](R,args))})}else{return R._engine.create[apply](R,arguments)}}}}R.version="2.1.0";R.eve=eve;var loaded,separator=/[, ]+/,elements={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},formatrg=/\{(\d+)\}/g,proto="prototype",has="hasOwnProperty",g={doc:document,win:window},oldRaphael={was:Object.prototype[has].call(g.win,"Raphael"),is:g.win.Raphael},Paper=function(){this.ca=this.customAttributes={}},paperproto,appendChild="appendChild",apply="apply",concat="concat",supportsTouch="createTouch" in g.doc,E="",S=" ",Str=String,split="split",events="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[split](S),touchMap={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},lowerCase=Str.prototype.toLowerCase,math=Math,mmax=math.max,mmin=math.min,abs=math.abs,pow=math.pow,PI=math.PI,nu="number",string="string",array="array",toString="toString",fillString="fill",objectToString=Object.prototype.toString,paper={},push="push",ISURL=R._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i,colourRegExp=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,isnan={"NaN":1,"Infinity":1,"-Infinity":1},bezierrg=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,round=math.round,setAttribute="setAttribute",toFloat=parseFloat,toInt=parseInt,upperCase=Str.prototype.toUpperCase,availableAttrs=R._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},availableAnimAttrs=R._availableAnimAttrs={blur:nu,"clip-rect":"csv",cx:nu,cy:nu,fill:"colour","fill-opacity":nu,"font-size":nu,height:nu,opacity:nu,path:"path",r:nu,rx:nu,ry:nu,stroke:"colour","stroke-opacity":nu,"stroke-width":nu,transform:"transform",width:nu,x:nu,y:nu},whitespace=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]/g,commaSpaces=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,hsrg={hs:1,rg:1},p2s=/,?([achlmqrstvxz]),?/gi,pathCommand=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/ig,tCommand=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/ig,pathValues=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/ig,radial_gradient=R._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,eldata={},sortByKey=function(a,b){return a.key-b.key},sortByNumber=function(a,b){return toFloat(a)-toFloat(b)},fun=function(){},pipe=function(x){return x},rectPath=R._rectPath=function(x,y,w,h,r){if(r){return[["M",x+r,y],["l",w-r*2,0],["a",r,r,0,0,1,r,r],["l",0,h-r*2],["a",r,r,0,0,1,-r,r],["l",r*2-w,0],["a",r,r,0,0,1,-r,-r],["l",0,r*2-h],["a",r,r,0,0,1,r,-r],["z"]]}return[["M",x,y],["l",w,0],["l",0,h],["l",-w,0],["z"]]},ellipsePath=function(x,y,rx,ry){if(ry==null){ry=rx}return[["M",x,y],["m",0,-ry],["a",rx,ry,0,1,1,0,2*ry],["a",rx,ry,0,1,1,0,-2*ry],["z"]]},getPath=R._getPath={path:function(el){return el.attr("path")},circle:function(el){var a=el.attrs;return ellipsePath(a.cx,a.cy,a.r)},ellipse:function(el){var a=el.attrs;return ellipsePath(a.cx,a.cy,a.rx,a.ry)},rect:function(el){var a=el.attrs;return rectPath(a.x,a.y,a.width,a.height,a.r)},image:function(el){var a=el.attrs;return rectPath(a.x,a.y,a.width,a.height)},text:function(el){var bbox=el._getBBox();return rectPath(bbox.x,bbox.y,bbox.width,bbox.height)}},mapPath=R.mapPath=function(path,matrix){if(!matrix){return path}var x,y,i,j,ii,jj,pathi;path=path2curve(path);for(i=0,ii=path.length;i<ii;i++){pathi=path[i];for(j=1,jj=pathi.length;j<jj;j+=2){x=matrix.x(pathi[j],pathi[j+1]);y=matrix.y(pathi[j],pathi[j+1]);pathi[j]=x;pathi[j+1]=y}}return path};R._g=g;R.type=(g.win.SVGAngle||g.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML");if(R.type=="VML"){var d=g.doc.createElement("div"),b;d.innerHTML='<v:shape adj="1"/>';b=d.firstChild;b.style.behavior="url(#default#VML)";if(!(b&&typeof b.adj=="object")){return(R.type=E)}d=null}R.svg=!(R.vml=R.type=="VML");R._Paper=Paper;R.fn=paperproto=Paper.prototype=R.prototype;R._id=0;R._oid=0;R.is=function(o,type){type=lowerCase.call(type);if(type=="finite"){return !isnan[has](+o)}if(type=="array"){return o instanceof Array}return(type=="null"&&o===null)||(type==typeof o&&o!==null)||(type=="object"&&o===Object(o))||(type=="array"&&Array.isArray&&Array.isArray(o))||objectToString.call(o).slice(8,-1).toLowerCase()==type};function clone(obj){if(Object(obj)!==obj){return obj}var res=new obj.constructor;for(var key in obj){if(obj[has](key)){res[key]=clone(obj[key])}}return res}R.angle=function(x1,y1,x2,y2,x3,y3){if(x3==null){var x=x1-x2,y=y1-y2;if(!x&&!y){return 0}return(180+math.atan2(-y,-x)*180/PI+360)%360}else{return R.angle(x1,y1,x3,y3)-R.angle(x2,y2,x3,y3)}};R.rad=function(deg){return deg%360*PI/180};R.deg=function(rad){return rad*180/PI%360};R.snapTo=function(values,value,tolerance){tolerance=R.is(tolerance,"finite")?tolerance:10;if(R.is(values,array)){var i=values.length;while(i--){if(abs(values[i]-value)<=tolerance){return values[i]}}}else{values=+values;var rem=value%values;if(rem<tolerance){return value-rem}if(rem>values-tolerance){return value-rem+values}}return value};var createUUID=R.createUUID=(function(uuidRegEx,uuidReplacer){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(uuidRegEx,uuidReplacer).toUpperCase()}})(/[xy]/g,function(c){var r=math.random()*16|0,v=c=="x"?r:(r&3|8);return v.toString(16)});R.setWindow=function(newwin){eve("raphael.setWindow",R,g.win,newwin);g.win=newwin;g.doc=g.win.document;if(R._engine.initWin){R._engine.initWin(g.win)}};var toHex=function(color){if(R.vml){var trim=/^\s+|\s+$/g;var bod;try{var docum=new ActiveXObject("htmlfile");docum.write("<body>");docum.close();bod=docum.body}catch(e){bod=createPopup().document.body}var range=bod.createTextRange();toHex=cacher(function(color){try{bod.style.color=Str(color).replace(trim,E);var value=range.queryCommandValue("ForeColor");value=((value&255)<<16)|(value&65280)|((value&16711680)>>>16);return"#"+("000000"+value.toString(16)).slice(-6)}catch(e){return"none"}})}else{var i=g.doc.createElement("i");i.title="Rapha\xebl Colour Picker";i.style.display="none";g.doc.body.appendChild(i);toHex=cacher(function(color){i.style.color=color;return g.doc.defaultView.getComputedStyle(i,E).getPropertyValue("color")})}return toHex(color)},hsbtoString=function(){return"hsb("+[this.h,this.s,this.b]+")"},hsltoString=function(){return"hsl("+[this.h,this.s,this.l]+")"},rgbtoString=function(){return this.hex},prepareRGB=function(r,g,b){if(g==null&&R.is(r,"object")&&"r" in r&&"g" in r&&"b" in r){b=r.b;g=r.g;r=r.r}if(g==null&&R.is(r,string)){var clr=R.getRGB(r);r=clr.r;g=clr.g;b=clr.b}if(r>1||g>1||b>1){r/=255;g/=255;b/=255}return[r,g,b]},packageRGB=function(r,g,b,o){r*=255;g*=255;b*=255;var rgb={r:r,g:g,b:b,hex:R.rgb(r,g,b),toString:rgbtoString};R.is(o,"finite")&&(rgb.opacity=o);return rgb};R.color=function(clr){var rgb;if(R.is(clr,"object")&&"h" in clr&&"s" in clr&&"b" in clr){rgb=R.hsb2rgb(clr);clr.r=rgb.r;clr.g=rgb.g;clr.b=rgb.b;clr.hex=rgb.hex}else{if(R.is(clr,"object")&&"h" in clr&&"s" in clr&&"l" in clr){rgb=R.hsl2rgb(clr);clr.r=rgb.r;clr.g=rgb.g;clr.b=rgb.b;clr.hex=rgb.hex}else{if(R.is(clr,"string")){clr=R.getRGB(clr)}if(R.is(clr,"object")&&"r" in clr&&"g" in clr&&"b" in clr){rgb=R.rgb2hsl(clr);clr.h=rgb.h;clr.s=rgb.s;clr.l=rgb.l;rgb=R.rgb2hsb(clr);clr.v=rgb.b}else{clr={hex:"none"};clr.r=clr.g=clr.b=clr.h=clr.s=clr.v=clr.l=-1}}}clr.toString=rgbtoString;return clr};R.hsb2rgb=function(h,s,v,o){if(this.is(h,"object")&&"h" in h&&"s" in h&&"b" in h){v=h.b;s=h.s;h=h.h;o=h.o}h*=360;var R,G,B,X,C;h=(h%360)/60;C=v*s;X=C*(1-abs(h%2-1));R=G=B=v-C;h=~~h;R+=[C,X,0,0,X,C][h];G+=[X,C,C,X,0,0][h];B+=[0,0,X,C,C,X][h];return packageRGB(R,G,B,o)};R.hsl2rgb=function(h,s,l,o){if(this.is(h,"object")&&"h" in h&&"s" in h&&"l" in h){l=h.l;s=h.s;h=h.h}if(h>1||s>1||l>1){h/=360;s/=100;l/=100}h*=360;var R,G,B,X,C;h=(h%360)/60;C=2*s*(l<0.5?l:1-l);X=C*(1-abs(h%2-1));R=G=B=l-C/2;h=~~h;R+=[C,X,0,0,X,C][h];G+=[X,C,C,X,0,0][h];B+=[0,0,X,C,C,X][h];return packageRGB(R,G,B,o)};R.rgb2hsb=function(r,g,b){b=prepareRGB(r,g,b);r=b[0];g=b[1];b=b[2];var H,S,V,C;V=mmax(r,g,b);C=V-mmin(r,g,b);H=(C==0?null:V==r?(g-b)/C:V==g?(b-r)/C+2:(r-g)/C+4);H=((H+360)%6)*60/360;S=C==0?0:C/V;return{h:H,s:S,b:V,toString:hsbtoString}};R.rgb2hsl=function(r,g,b){b=prepareRGB(r,g,b);r=b[0];g=b[1];b=b[2];var H,S,L,M,m,C;M=mmax(r,g,b);m=mmin(r,g,b);C=M-m;H=(C==0?null:M==r?(g-b)/C:M==g?(b-r)/C+2:(r-g)/C+4);H=((H+360)%6)*60/360;L=(M+m)/2;S=(C==0?0:L<0.5?C/(2*L):C/(2-2*L));return{h:H,s:S,l:L,toString:hsltoString}};R._path2string=function(){return this.join(",").replace(p2s,"$1")};function repush(array,item){for(var i=0,ii=array.length;i<ii;i++){if(array[i]===item){return array.push(array.splice(i,1)[0])}}}function cacher(f,scope,postprocessor){function newf(){var arg=Array.prototype.slice.call(arguments,0),args=arg.join("\u2400"),cache=newf.cache=newf.cache||{},count=newf.count=newf.count||[];if(cache[has](args)){repush(count,args);return postprocessor?postprocessor(cache[args]):cache[args]}count.length>=1000&&delete cache[count.shift()];count.push(args);cache[args]=f[apply](scope,arg);return postprocessor?postprocessor(cache[args]):cache[args]}return newf}var preload=R._preload=function(src,f){var img=g.doc.createElement("img");img.style.cssText="position:absolute;left:-9999em;top:-9999em";img.onload=function(){f.call(this);this.onload=null;g.doc.body.removeChild(this)};img.onerror=function(){g.doc.body.removeChild(this)};g.doc.body.appendChild(img);img.src=src};function clrToString(){return this.hex}R.getRGB=cacher(function(colour){if(!colour||!!((colour=Str(colour)).indexOf("-")+1)){return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:clrToString}}if(colour=="none"){return{r:-1,g:-1,b:-1,hex:"none",toString:clrToString}}!(hsrg[has](colour.toLowerCase().substring(0,2))||colour.charAt()=="#")&&(colour=toHex(colour));var res,red,green,blue,opacity,t,values,rgb=colour.match(colourRegExp);if(rgb){if(rgb[2]){blue=toInt(rgb[2].substring(5),16);green=toInt(rgb[2].substring(3,5),16);red=toInt(rgb[2].substring(1,3),16)}if(rgb[3]){blue=toInt((t=rgb[3].charAt(3))+t,16);green=toInt((t=rgb[3].charAt(2))+t,16);red=toInt((t=rgb[3].charAt(1))+t,16)}if(rgb[4]){values=rgb[4][split](commaSpaces);red=toFloat(values[0]);values[0].slice(-1)=="%"&&(red*=2.55);green=toFloat(values[1]);values[1].slice(-1)=="%"&&(green*=2.55);blue=toFloat(values[2]);values[2].slice(-1)=="%"&&(blue*=2.55);rgb[1].toLowerCase().slice(0,4)=="rgba"&&(opacity=toFloat(values[3]));values[3]&&values[3].slice(-1)=="%"&&(opacity/=100)}if(rgb[5]){values=rgb[5][split](commaSpaces);red=toFloat(values[0]);values[0].slice(-1)=="%"&&(red*=2.55);green=toFloat(values[1]);values[1].slice(-1)=="%"&&(green*=2.55);blue=toFloat(values[2]);values[2].slice(-1)=="%"&&(blue*=2.55);(values[0].slice(-3)=="deg"||values[0].slice(-1)=="\xb0")&&(red/=360);rgb[1].toLowerCase().slice(0,4)=="hsba"&&(opacity=toFloat(values[3]));values[3]&&values[3].slice(-1)=="%"&&(opacity/=100);return R.hsb2rgb(red,green,blue,opacity)}if(rgb[6]){values=rgb[6][split](commaSpaces);red=toFloat(values[0]);values[0].slice(-1)=="%"&&(red*=2.55);green=toFloat(values[1]);values[1].slice(-1)=="%"&&(green*=2.55);blue=toFloat(values[2]);values[2].slice(-1)=="%"&&(blue*=2.55);(values[0].slice(-3)=="deg"||values[0].slice(-1)=="\xb0")&&(red/=360);rgb[1].toLowerCase().slice(0,4)=="hsla"&&(opacity=toFloat(values[3]));values[3]&&values[3].slice(-1)=="%"&&(opacity/=100);return R.hsl2rgb(red,green,blue,opacity)}rgb={r:red,g:green,b:blue,toString:clrToString};rgb.hex="#"+(16777216|blue|(green<<8)|(red<<16)).toString(16).slice(1);R.is(opacity,"finite")&&(rgb.opacity=opacity);return rgb}return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:clrToString}},R);R.hsb=cacher(function(h,s,b){return R.hsb2rgb(h,s,b).hex});R.hsl=cacher(function(h,s,l){return R.hsl2rgb(h,s,l).hex});R.rgb=cacher(function(r,g,b){return"#"+(16777216|b|(g<<8)|(r<<16)).toString(16).slice(1)});R.getColor=function(value){var start=this.getColor.start=this.getColor.start||{h:0,s:1,b:value||0.75},rgb=this.hsb2rgb(start.h,start.s,start.b);start.h+=0.075;if(start.h>1){start.h=0;start.s-=0.2;start.s<=0&&(this.getColor.start={h:0,s:1,b:start.b})}return rgb.hex};R.getColor.reset=function(){delete this.start};function catmullRom2bezier(crp,z){var d=[];for(var i=0,iLen=crp.length;iLen-2*!z>i;i+=2){var p=[{x:+crp[i-2],y:+crp[i-1]},{x:+crp[i],y:+crp[i+1]},{x:+crp[i+2],y:+crp[i+3]},{x:+crp[i+4],y:+crp[i+5]}];if(z){if(!i){p[0]={x:+crp[iLen-2],y:+crp[iLen-1]}}else{if(iLen-4==i){p[3]={x:+crp[0],y:+crp[1]}}else{if(iLen-2==i){p[2]={x:+crp[0],y:+crp[1]};p[3]={x:+crp[2],y:+crp[3]}}}}}else{if(iLen-4==i){p[3]=p[2]}else{if(!i){p[0]={x:+crp[i],y:+crp[i+1]}}}}d.push(["C",(-p[0].x+6*p[1].x+p[2].x)/6,(-p[0].y+6*p[1].y+p[2].y)/6,(p[1].x+6*p[2].x-p[3].x)/6,(p[1].y+6*p[2].y-p[3].y)/6,p[2].x,p[2].y])}return d}R.parsePathString=function(pathString){if(!pathString){return null}var pth=paths(pathString);if(pth.arr){return pathClone(pth.arr)}var paramCounts={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},data=[];if(R.is(pathString,array)&&R.is(pathString[0],array)){data=pathClone(pathString)}if(!data.length){Str(pathString).replace(pathCommand,function(a,b,c){var params=[],name=b.toLowerCase();c.replace(pathValues,function(a,b){b&&params.push(+b)});if(name=="m"&&params.length>2){data.push([b][concat](params.splice(0,2)));name="l";b=b=="m"?"l":"L"}if(name=="r"){data.push([b][concat](params))}else{while(params.length>=paramCounts[name]){data.push([b][concat](params.splice(0,paramCounts[name])));if(!paramCounts[name]){break}}}})}data.toString=R._path2string;pth.arr=pathClone(data);return data};R.parseTransformString=cacher(function(TString){if(!TString){return null}var paramCounts={r:3,s:4,t:2,m:6},data=[];if(R.is(TString,array)&&R.is(TString[0],array)){data=pathClone(TString)}if(!data.length){Str(TString).replace(tCommand,function(a,b,c){var params=[],name=lowerCase.call(b);c.replace(pathValues,function(a,b){b&&params.push(+b)});data.push([b][concat](params))})}data.toString=R._path2string;return data});var paths=function(ps){var p=paths.ps=paths.ps||{};if(p[ps]){p[ps].sleep=100}else{p[ps]={sleep:100}}setTimeout(function(){for(var key in p){if(p[has](key)&&key!=ps){p[key].sleep--;!p[key].sleep&&delete p[key]}}});return p[ps]};R.findDotsAtSegment=function(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t){var t1=1-t,t13=pow(t1,3),t12=pow(t1,2),t2=t*t,t3=t2*t,x=t13*p1x+t12*3*t*c1x+t1*3*t*t*c2x+t3*p2x,y=t13*p1y+t12*3*t*c1y+t1*3*t*t*c2y+t3*p2y,mx=p1x+2*t*(c1x-p1x)+t2*(c2x-2*c1x+p1x),my=p1y+2*t*(c1y-p1y)+t2*(c2y-2*c1y+p1y),nx=c1x+2*t*(c2x-c1x)+t2*(p2x-2*c2x+c1x),ny=c1y+2*t*(c2y-c1y)+t2*(p2y-2*c2y+c1y),ax=t1*p1x+t*c1x,ay=t1*p1y+t*c1y,cx=t1*c2x+t*p2x,cy=t1*c2y+t*p2y,alpha=(90-math.atan2(mx-nx,my-ny)*180/PI);(mx>nx||my<ny)&&(alpha+=180);return{x:x,y:y,m:{x:mx,y:my},n:{x:nx,y:ny},start:{x:ax,y:ay},end:{x:cx,y:cy},alpha:alpha}};R.bezierBBox=function(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y){if(!R.is(p1x,"array")){p1x=[p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y]}var bbox=curveDim.apply(null,p1x);return{x:bbox.min.x,y:bbox.min.y,x2:bbox.max.x,y2:bbox.max.y,width:bbox.max.x-bbox.min.x,height:bbox.max.y-bbox.min.y}};R.isPointInsideBBox=function(bbox,x,y){return x>=bbox.x&&x<=bbox.x2&&y>=bbox.y&&y<=bbox.y2};R.isBBoxIntersect=function(bbox1,bbox2){var i=R.isPointInsideBBox;return i(bbox2,bbox1.x,bbox1.y)||i(bbox2,bbox1.x2,bbox1.y)||i(bbox2,bbox1.x,bbox1.y2)||i(bbox2,bbox1.x2,bbox1.y2)||i(bbox1,bbox2.x,bbox2.y)||i(bbox1,bbox2.x2,bbox2.y)||i(bbox1,bbox2.x,bbox2.y2)||i(bbox1,bbox2.x2,bbox2.y2)||(bbox1.x<bbox2.x2&&bbox1.x>bbox2.x||bbox2.x<bbox1.x2&&bbox2.x>bbox1.x)&&(bbox1.y<bbox2.y2&&bbox1.y>bbox2.y||bbox2.y<bbox1.y2&&bbox2.y>bbox1.y)};function base3(t,p1,p2,p3,p4){var t1=-3*p1+9*p2-9*p3+3*p4,t2=t*t1+6*p1-12*p2+6*p3;return t*t2-3*p1+3*p2}function bezlen(x1,y1,x2,y2,x3,y3,x4,y4,z){if(z==null){z=1}z=z>1?1:z<0?0:z;var z2=z/2,n=12,Tvalues=[-0.1252,0.1252,-0.3678,0.3678,-0.5873,0.5873,-0.7699,0.7699,-0.9041,0.9041,-0.9816,0.9816],Cvalues=[0.2491,0.2491,0.2335,0.2335,0.2032,0.2032,0.1601,0.1601,0.1069,0.1069,0.0472,0.0472],sum=0;for(var i=0;i<n;i++){var ct=z2*Tvalues[i]+z2,xbase=base3(ct,x1,x2,x3,x4),ybase=base3(ct,y1,y2,y3,y4),comb=xbase*xbase+ybase*ybase;sum+=Cvalues[i]*math.sqrt(comb)}return z2*sum}function getTatLen(x1,y1,x2,y2,x3,y3,x4,y4,ll){if(ll<0||bezlen(x1,y1,x2,y2,x3,y3,x4,y4)<ll){return }var t=1,step=t/2,t2=t-step,l,e=0.01;l=bezlen(x1,y1,x2,y2,x3,y3,x4,y4,t2);while(abs(l-ll)>e){step/=2;t2+=(l<ll?1:-1)*step;l=bezlen(x1,y1,x2,y2,x3,y3,x4,y4,t2)}return t2}function intersect(x1,y1,x2,y2,x3,y3,x4,y4){if(mmax(x1,x2)<mmin(x3,x4)||mmin(x1,x2)>mmax(x3,x4)||mmax(y1,y2)<mmin(y3,y4)||mmin(y1,y2)>mmax(y3,y4)){return }var nx=(x1*y2-y1*x2)*(x3-x4)-(x1-x2)*(x3*y4-y3*x4),ny=(x1*y2-y1*x2)*(y3-y4)-(y1-y2)*(x3*y4-y3*x4),denominator=(x1-x2)*(y3-y4)-(y1-y2)*(x3-x4);if(!denominator){return }var px=nx/denominator,py=ny/denominator,px2=+px.toFixed(2),py2=+py.toFixed(2);if(px2<+mmin(x1,x2).toFixed(2)||px2>+mmax(x1,x2).toFixed(2)||px2<+mmin(x3,x4).toFixed(2)||px2>+mmax(x3,x4).toFixed(2)||py2<+mmin(y1,y2).toFixed(2)||py2>+mmax(y1,y2).toFixed(2)||py2<+mmin(y3,y4).toFixed(2)||py2>+mmax(y3,y4).toFixed(2)){return }return{x:px,y:py}}function inter(bez1,bez2){return interHelper(bez1,bez2)}function interCount(bez1,bez2){return interHelper(bez1,bez2,1)}function interHelper(bez1,bez2,justCount){var bbox1=R.bezierBBox(bez1),bbox2=R.bezierBBox(bez2);if(!R.isBBoxIntersect(bbox1,bbox2)){return justCount?0:[]}var l1=bezlen.apply(0,bez1),l2=bezlen.apply(0,bez2),n1=~~(l1/5),n2=~~(l2/5),dots1=[],dots2=[],xy={},res=justCount?0:[];for(var i=0;i<n1+1;i++){var p=R.findDotsAtSegment.apply(R,bez1.concat(i/n1));dots1.push({x:p.x,y:p.y,t:i/n1})}for(i=0;i<n2+1;i++){p=R.findDotsAtSegment.apply(R,bez2.concat(i/n2));dots2.push({x:p.x,y:p.y,t:i/n2})}for(i=0;i<n1;i++){for(var j=0;j<n2;j++){var di=dots1[i],di1=dots1[i+1],dj=dots2[j],dj1=dots2[j+1],ci=abs(di1.x-di.x)<0.001?"y":"x",cj=abs(dj1.x-dj.x)<0.001?"y":"x",is=intersect(di.x,di.y,di1.x,di1.y,dj.x,dj.y,dj1.x,dj1.y);if(is){if(xy[is.x.toFixed(4)]==is.y.toFixed(4)){continue}xy[is.x.toFixed(4)]=is.y.toFixed(4);var t1=di.t+abs((is[ci]-di[ci])/(di1[ci]-di[ci]))*(di1.t-di.t),t2=dj.t+abs((is[cj]-dj[cj])/(dj1[cj]-dj[cj]))*(dj1.t-dj.t);if(t1>=0&&t1<=1&&t2>=0&&t2<=1){if(justCount){res++}else{res.push({x:is.x,y:is.y,t1:t1,t2:t2})}}}}}return res}R.pathIntersection=function(path1,path2){return interPathHelper(path1,path2)};R.pathIntersectionNumber=function(path1,path2){return interPathHelper(path1,path2,1)};function interPathHelper(path1,path2,justCount){path1=R._path2curve(path1);path2=R._path2curve(path2);var x1,y1,x2,y2,x1m,y1m,x2m,y2m,bez1,bez2,res=justCount?0:[];for(var i=0,ii=path1.length;i<ii;i++){var pi=path1[i];if(pi[0]=="M"){x1=x1m=pi[1];y1=y1m=pi[2]}else{if(pi[0]=="C"){bez1=[x1,y1].concat(pi.slice(1));x1=bez1[6];y1=bez1[7]}else{bez1=[x1,y1,x1,y1,x1m,y1m,x1m,y1m];x1=x1m;y1=y1m}for(var j=0,jj=path2.length;j<jj;j++){var pj=path2[j];if(pj[0]=="M"){x2=x2m=pj[1];y2=y2m=pj[2]}else{if(pj[0]=="C"){bez2=[x2,y2].concat(pj.slice(1));x2=bez2[6];y2=bez2[7]}else{bez2=[x2,y2,x2,y2,x2m,y2m,x2m,y2m];x2=x2m;y2=y2m}var intr=interHelper(bez1,bez2,justCount);if(justCount){res+=intr}else{for(var k=0,kk=intr.length;k<kk;k++){intr[k].segment1=i;intr[k].segment2=j;intr[k].bez1=bez1;intr[k].bez2=bez2}res=res.concat(intr)}}}}}return res}R.isPointInsidePath=function(path,x,y){var bbox=R.pathBBox(path);return R.isPointInsideBBox(bbox,x,y)&&interPathHelper(path,[["M",x,y],["H",bbox.x2+10]],1)%2==1};R._removedFactory=function(methodname){return function(){eve("raphael.log",null,"Rapha\xebl: you are calling to method \u201c"+methodname+"\u201d of removed object",methodname)}};var pathDimensions=R.pathBBox=function(path){var pth=paths(path);if(pth.bbox){return pth.bbox}if(!path){return{x:0,y:0,width:0,height:0,x2:0,y2:0}}path=path2curve(path);var x=0,y=0,X=[],Y=[],p;for(var i=0,ii=path.length;i<ii;i++){p=path[i];if(p[0]=="M"){x=p[1];y=p[2];X.push(x);Y.push(y)}else{var dim=curveDim(x,y,p[1],p[2],p[3],p[4],p[5],p[6]);X=X[concat](dim.min.x,dim.max.x);Y=Y[concat](dim.min.y,dim.max.y);x=p[5];y=p[6]}}var xmin=mmin[apply](0,X),ymin=mmin[apply](0,Y),xmax=mmax[apply](0,X),ymax=mmax[apply](0,Y),bb={x:xmin,y:ymin,x2:xmax,y2:ymax,width:xmax-xmin,height:ymax-ymin};pth.bbox=clone(bb);return bb},pathClone=function(pathArray){var res=clone(pathArray);res.toString=R._path2string;return res},pathToRelative=R._pathToRelative=function(pathArray){var pth=paths(pathArray);if(pth.rel){return pathClone(pth.rel)}if(!R.is(pathArray,array)||!R.is(pathArray&&pathArray[0],array)){pathArray=R.parsePathString(pathArray)}var res=[],x=0,y=0,mx=0,my=0,start=0;if(pathArray[0][0]=="M"){x=pathArray[0][1];y=pathArray[0][2];mx=x;my=y;start++;res.push(["M",x,y])}for(var i=start,ii=pathArray.length;i<ii;i++){var r=res[i]=[],pa=pathArray[i];if(pa[0]!=lowerCase.call(pa[0])){r[0]=lowerCase.call(pa[0]);switch(r[0]){case"a":r[1]=pa[1];r[2]=pa[2];r[3]=pa[3];r[4]=pa[4];r[5]=pa[5];r[6]=+(pa[6]-x).toFixed(3);r[7]=+(pa[7]-y).toFixed(3);break;case"v":r[1]=+(pa[1]-y).toFixed(3);break;case"m":mx=pa[1];my=pa[2];default:for(var j=1,jj=pa.length;j<jj;j++){r[j]=+(pa[j]-((j%2)?x:y)).toFixed(3)}}}else{r=res[i]=[];if(pa[0]=="m"){mx=pa[1]+x;my=pa[2]+y}for(var k=0,kk=pa.length;k<kk;k++){res[i][k]=pa[k]}}var len=res[i].length;switch(res[i][0]){case"z":x=mx;y=my;break;case"h":x+=+res[i][len-1];break;case"v":y+=+res[i][len-1];break;default:x+=+res[i][len-2];y+=+res[i][len-1]}}res.toString=R._path2string;pth.rel=pathClone(res);return res},pathToAbsolute=R._pathToAbsolute=function(pathArray){var pth=paths(pathArray);if(pth.abs){return pathClone(pth.abs)}if(!R.is(pathArray,array)||!R.is(pathArray&&pathArray[0],array)){pathArray=R.parsePathString(pathArray)}if(!pathArray||!pathArray.length){return[["M",0,0]]}var res=[],x=0,y=0,mx=0,my=0,start=0;if(pathArray[0][0]=="M"){x=+pathArray[0][1];y=+pathArray[0][2];mx=x;my=y;start++;res[0]=["M",x,y]}var crz=pathArray.length==3&&pathArray[0][0]=="M"&&pathArray[1][0].toUpperCase()=="R"&&pathArray[2][0].toUpperCase()=="Z";for(var r,pa,i=start,ii=pathArray.length;i<ii;i++){res.push(r=[]);pa=pathArray[i];if(pa[0]!=upperCase.call(pa[0])){r[0]=upperCase.call(pa[0]);switch(r[0]){case"A":r[1]=pa[1];r[2]=pa[2];r[3]=pa[3];r[4]=pa[4];r[5]=pa[5];r[6]=+(pa[6]+x);r[7]=+(pa[7]+y);break;case"V":r[1]=+pa[1]+y;break;case"H":r[1]=+pa[1]+x;break;case"R":var dots=[x,y][concat](pa.slice(1));for(var j=2,jj=dots.length;j<jj;j++){dots[j]=+dots[j]+x;dots[++j]=+dots[j]+y}res.pop();res=res[concat](catmullRom2bezier(dots,crz));break;case"M":mx=+pa[1]+x;my=+pa[2]+y;default:for(j=1,jj=pa.length;j<jj;j++){r[j]=+pa[j]+((j%2)?x:y)}}}else{if(pa[0]=="R"){dots=[x,y][concat](pa.slice(1));res.pop();res=res[concat](catmullRom2bezier(dots,crz));r=["R"][concat](pa.slice(-2))}else{for(var k=0,kk=pa.length;k<kk;k++){r[k]=pa[k]}}}switch(r[0]){case"Z":x=mx;y=my;break;case"H":x=r[1];break;case"V":y=r[1];break;case"M":mx=r[r.length-2];my=r[r.length-1];default:x=r[r.length-2];y=r[r.length-1]}}res.toString=R._path2string;pth.abs=pathClone(res);return res},l2c=function(x1,y1,x2,y2){return[x1,y1,x2,y2,x2,y2]},q2c=function(x1,y1,ax,ay,x2,y2){var _13=1/3,_23=2/3;return[_13*x1+_23*ax,_13*y1+_23*ay,_13*x2+_23*ax,_13*y2+_23*ay,x2,y2]},a2c=function(x1,y1,rx,ry,angle,large_arc_flag,sweep_flag,x2,y2,recursive){var _120=PI*120/180,rad=PI/180*(+angle||0),res=[],xy,rotate=cacher(function(x,y,rad){var X=x*math.cos(rad)-y*math.sin(rad),Y=x*math.sin(rad)+y*math.cos(rad);return{x:X,y:Y}});if(!recursive){xy=rotate(x1,y1,-rad);x1=xy.x;y1=xy.y;xy=rotate(x2,y2,-rad);x2=xy.x;y2=xy.y;var cos=math.cos(PI/180*angle),sin=math.sin(PI/180*angle),x=(x1-x2)/2,y=(y1-y2)/2;var h=(x*x)/(rx*rx)+(y*y)/(ry*ry);if(h>1){h=math.sqrt(h);rx=h*rx;ry=h*ry}var rx2=rx*rx,ry2=ry*ry,k=(large_arc_flag==sweep_flag?-1:1)*math.sqrt(abs((rx2*ry2-rx2*y*y-ry2*x*x)/(rx2*y*y+ry2*x*x))),cx=k*rx*y/ry+(x1+x2)/2,cy=k*-ry*x/rx+(y1+y2)/2,f1=math.asin(((y1-cy)/ry).toFixed(9)),f2=math.asin(((y2-cy)/ry).toFixed(9));f1=x1<cx?PI-f1:f1;f2=x2<cx?PI-f2:f2;f1<0&&(f1=PI*2+f1);f2<0&&(f2=PI*2+f2);if(sweep_flag&&f1>f2){f1=f1-PI*2}if(!sweep_flag&&f2>f1){f2=f2-PI*2}}else{f1=recursive[0];f2=recursive[1];cx=recursive[2];cy=recursive[3]}var df=f2-f1;if(abs(df)>_120){var f2old=f2,x2old=x2,y2old=y2;f2=f1+_120*(sweep_flag&&f2>f1?1:-1);x2=cx+rx*math.cos(f2);y2=cy+ry*math.sin(f2);res=a2c(x2,y2,rx,ry,angle,0,sweep_flag,x2old,y2old,[f2,f2old,cx,cy])}df=f2-f1;var c1=math.cos(f1),s1=math.sin(f1),c2=math.cos(f2),s2=math.sin(f2),t=math.tan(df/4),hx=4/3*rx*t,hy=4/3*ry*t,m1=[x1,y1],m2=[x1+hx*s1,y1-hy*c1],m3=[x2+hx*s2,y2-hy*c2],m4=[x2,y2];m2[0]=2*m1[0]-m2[0];m2[1]=2*m1[1]-m2[1];if(recursive){return[m2,m3,m4][concat](res)}else{res=[m2,m3,m4][concat](res).join()[split](",");var newres=[];for(var i=0,ii=res.length;i<ii;i++){newres[i]=i%2?rotate(res[i-1],res[i],rad).y:rotate(res[i],res[i+1],rad).x}return newres}},findDotAtSegment=function(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t){var t1=1-t;return{x:pow(t1,3)*p1x+pow(t1,2)*3*t*c1x+t1*3*t*t*c2x+pow(t,3)*p2x,y:pow(t1,3)*p1y+pow(t1,2)*3*t*c1y+t1*3*t*t*c2y+pow(t,3)*p2y}},curveDim=cacher(function(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y){var a=(c2x-2*c1x+p1x)-(p2x-2*c2x+c1x),b=2*(c1x-p1x)-2*(c2x-c1x),c=p1x-c1x,t1=(-b+math.sqrt(b*b-4*a*c))/2/a,t2=(-b-math.sqrt(b*b-4*a*c))/2/a,y=[p1y,p2y],x=[p1x,p2x],dot;abs(t1)>"1e12"&&(t1=0.5);abs(t2)>"1e12"&&(t2=0.5);if(t1>0&&t1<1){dot=findDotAtSegment(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t1);x.push(dot.x);y.push(dot.y)}if(t2>0&&t2<1){dot=findDotAtSegment(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t2);x.push(dot.x);y.push(dot.y)}a=(c2y-2*c1y+p1y)-(p2y-2*c2y+c1y);b=2*(c1y-p1y)-2*(c2y-c1y);c=p1y-c1y;t1=(-b+math.sqrt(b*b-4*a*c))/2/a;t2=(-b-math.sqrt(b*b-4*a*c))/2/a;abs(t1)>"1e12"&&(t1=0.5);abs(t2)>"1e12"&&(t2=0.5);if(t1>0&&t1<1){dot=findDotAtSegment(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t1);x.push(dot.x);y.push(dot.y)}if(t2>0&&t2<1){dot=findDotAtSegment(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t2);x.push(dot.x);y.push(dot.y)}return{min:{x:mmin[apply](0,x),y:mmin[apply](0,y)},max:{x:mmax[apply](0,x),y:mmax[apply](0,y)}}}),path2curve=R._path2curve=cacher(function(path,path2){var pth=!path2&&paths(path);if(!path2&&pth.curve){return pathClone(pth.curve)}var p=pathToAbsolute(path),p2=path2&&pathToAbsolute(path2),attrs={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},attrs2={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},processPath=function(path,d){var nx,ny;if(!path){return["C",d.x,d.y,d.x,d.y,d.x,d.y]}!(path[0] in {T:1,Q:1})&&(d.qx=d.qy=null);switch(path[0]){case"M":d.X=path[1];d.Y=path[2];break;case"A":path=["C"][concat](a2c[apply](0,[d.x,d.y][concat](path.slice(1))));break;case"S":nx=d.x+(d.x-(d.bx||d.x));ny=d.y+(d.y-(d.by||d.y));path=["C",nx,ny][concat](path.slice(1));break;case"T":d.qx=d.x+(d.x-(d.qx||d.x));d.qy=d.y+(d.y-(d.qy||d.y));path=["C"][concat](q2c(d.x,d.y,d.qx,d.qy,path[1],path[2]));break;case"Q":d.qx=path[1];d.qy=path[2];path=["C"][concat](q2c(d.x,d.y,path[1],path[2],path[3],path[4]));break;case"L":path=["C"][concat](l2c(d.x,d.y,path[1],path[2]));break;case"H":path=["C"][concat](l2c(d.x,d.y,path[1],d.y));break;case"V":path=["C"][concat](l2c(d.x,d.y,d.x,path[1]));break;case"Z":path=["C"][concat](l2c(d.x,d.y,d.X,d.Y));break}return path},fixArc=function(pp,i){if(pp[i].length>7){pp[i].shift();var pi=pp[i];while(pi.length){pp.splice(i++,0,["C"][concat](pi.splice(0,6)))}pp.splice(i,1);ii=mmax(p.length,p2&&p2.length||0)}},fixM=function(path1,path2,a1,a2,i){if(path1&&path2&&path1[i][0]=="M"&&path2[i][0]!="M"){path2.splice(i,0,["M",a2.x,a2.y]);a1.bx=0;a1.by=0;a1.x=path1[i][1];a1.y=path1[i][2];ii=mmax(p.length,p2&&p2.length||0)}};for(var i=0,ii=mmax(p.length,p2&&p2.length||0);i<ii;i++){p[i]=processPath(p[i],attrs);fixArc(p,i);p2&&(p2[i]=processPath(p2[i],attrs2));p2&&fixArc(p2,i);fixM(p,p2,attrs,attrs2,i);fixM(p2,p,attrs2,attrs,i);var seg=p[i],seg2=p2&&p2[i],seglen=seg.length,seg2len=p2&&seg2.length;attrs.x=seg[seglen-2];attrs.y=seg[seglen-1];attrs.bx=toFloat(seg[seglen-4])||attrs.x;attrs.by=toFloat(seg[seglen-3])||attrs.y;attrs2.bx=p2&&(toFloat(seg2[seg2len-4])||attrs2.x);attrs2.by=p2&&(toFloat(seg2[seg2len-3])||attrs2.y);attrs2.x=p2&&seg2[seg2len-2];attrs2.y=p2&&seg2[seg2len-1]}if(!p2){pth.curve=pathClone(p)}return p2?[p,p2]:p},null,pathClone),parseDots=R._parseDots=cacher(function(gradient){var dots=[];for(var i=0,ii=gradient.length;i<ii;i++){var dot={},par=gradient[i].match(/^([^:]*):?([\d\.]*)/);dot.color=R.getRGB(par[1]);if(dot.color.error){return null}dot.color=dot.color.hex;par[2]&&(dot.offset=par[2]+"%");dots.push(dot)}for(i=1,ii=dots.length-1;i<ii;i++){if(!dots[i].offset){var start=toFloat(dots[i-1].offset||0),end=0;for(var j=i+1;j<ii;j++){if(dots[j].offset){end=dots[j].offset;break}}if(!end){end=100;j=ii}end=toFloat(end);var d=(end-start)/(j-i+1);for(;i<j;i++){start+=d;dots[i].offset=start+"%"}}}return dots}),tear=R._tear=function(el,paper){el==paper.top&&(paper.top=el.prev);el==paper.bottom&&(paper.bottom=el.next);el.next&&(el.next.prev=el.prev);el.prev&&(el.prev.next=el.next)},tofront=R._tofront=function(el,paper){if(paper.top===el){return }tear(el,paper);el.next=null;el.prev=paper.top;paper.top.next=el;paper.top=el},toback=R._toback=function(el,paper){if(paper.bottom===el){return }tear(el,paper);el.next=paper.bottom;el.prev=null;paper.bottom.prev=el;paper.bottom=el},insertafter=R._insertafter=function(el,el2,paper){tear(el,paper);el2==paper.top&&(paper.top=el);el2.next&&(el2.next.prev=el);el.next=el2.next;el.prev=el2;el2.next=el},insertbefore=R._insertbefore=function(el,el2,paper){tear(el,paper);el2==paper.bottom&&(paper.bottom=el);el2.prev&&(el2.prev.next=el);el.prev=el2.prev;el2.prev=el;el.next=el2},toMatrix=R.toMatrix=function(path,transform){var bb=pathDimensions(path),el={_:{transform:E},getBBox:function(){return bb}};extractTransform(el,transform);return el.matrix},transformPath=R.transformPath=function(path,transform){return mapPath(path,toMatrix(path,transform))},extractTransform=R._extractTransform=function(el,tstr){if(tstr==null){return el._.transform}tstr=Str(tstr).replace(/\.{3}|\u2026/g,el._.transform||E);var tdata=R.parseTransformString(tstr),deg=0,dx=0,dy=0,sx=1,sy=1,_=el._,m=new Matrix;_.transform=tdata||[];if(tdata){for(var i=0,ii=tdata.length;i<ii;i++){var t=tdata[i],tlen=t.length,command=Str(t[0]).toLowerCase(),absolute=t[0]!=command,inver=absolute?m.invert():0,x1,y1,x2,y2,bb;if(command=="t"&&tlen==3){if(absolute){x1=inver.x(0,0);y1=inver.y(0,0);x2=inver.x(t[1],t[2]);y2=inver.y(t[1],t[2]);m.translate(x2-x1,y2-y1)}else{m.translate(t[1],t[2])}}else{if(command=="r"){if(tlen==2){bb=bb||el.getBBox(1);m.rotate(t[1],bb.x+bb.width/2,bb.y+bb.height/2);deg+=t[1]}else{if(tlen==4){if(absolute){x2=inver.x(t[2],t[3]);y2=inver.y(t[2],t[3]);m.rotate(t[1],x2,y2)}else{m.rotate(t[1],t[2],t[3])}deg+=t[1]}}}else{if(command=="s"){if(tlen==2||tlen==3){bb=bb||el.getBBox(1);m.scale(t[1],t[tlen-1],bb.x+bb.width/2,bb.y+bb.height/2);sx*=t[1];sy*=t[tlen-1]}else{if(tlen==5){if(absolute){x2=inver.x(t[3],t[4]);y2=inver.y(t[3],t[4]);m.scale(t[1],t[2],x2,y2)}else{m.scale(t[1],t[2],t[3],t[4])}sx*=t[1];sy*=t[2]}}}else{if(command=="m"&&tlen==7){m.add(t[1],t[2],t[3],t[4],t[5],t[6])}}}}_.dirtyT=1;el.matrix=m}}el.matrix=m;_.sx=sx;_.sy=sy;_.deg=deg;_.dx=dx=m.e;_.dy=dy=m.f;if(sx==1&&sy==1&&!deg&&_.bbox){_.bbox.x+=+dx;_.bbox.y+=+dy}else{_.dirtyT=1}},getEmpty=function(item){var l=item[0];switch(l.toLowerCase()){case"t":return[l,0,0];case"m":return[l,1,0,0,1,0,0];case"r":if(item.length==4){return[l,0,item[2],item[3]]}else{return[l,0]}case"s":if(item.length==5){return[l,1,1,item[3],item[4]]}else{if(item.length==3){return[l,1,1]}else{return[l,1]}}}},equaliseTransform=R._equaliseTransform=function(t1,t2){t2=Str(t2).replace(/\.{3}|\u2026/g,t1);t1=R.parseTransformString(t1)||[];t2=R.parseTransformString(t2)||[];var maxlength=mmax(t1.length,t2.length),from=[],to=[],i=0,j,jj,tt1,tt2;for(;i<maxlength;i++){tt1=t1[i]||getEmpty(t2[i]);tt2=t2[i]||getEmpty(tt1);if((tt1[0]!=tt2[0])||(tt1[0].toLowerCase()=="r"&&(tt1[2]!=tt2[2]||tt1[3]!=tt2[3]))||(tt1[0].toLowerCase()=="s"&&(tt1[3]!=tt2[3]||tt1[4]!=tt2[4]))){return }from[i]=[];to[i]=[];for(j=0,jj=mmax(tt1.length,tt2.length);j<jj;j++){j in tt1&&(from[i][j]=tt1[j]);j in tt2&&(to[i][j]=tt2[j])}}return{from:from,to:to}};R._getContainer=function(x,y,w,h){var container;container=h==null&&!R.is(x,"object")?g.doc.getElementById(x):x;if(container==null){return }if(container.tagName){if(y==null){return{container:container,width:container.style.pixelWidth||container.offsetWidth,height:container.style.pixelHeight||container.offsetHeight}}else{return{container:container,width:y,height:w}}}return{container:1,x:x,y:y,width:w,height:h}};R.pathToRelative=pathToRelative;R._engine={};R.path2curve=path2curve;R.matrix=function(a,b,c,d,e,f){return new Matrix(a,b,c,d,e,f)};function Matrix(a,b,c,d,e,f){if(a!=null){this.a=+a;this.b=+b;this.c=+c;this.d=+d;this.e=+e;this.f=+f}else{this.a=1;this.b=0;this.c=0;this.d=1;this.e=0;this.f=0}}(function(matrixproto){matrixproto.add=function(a,b,c,d,e,f){var out=[[],[],[]],m=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],matrix=[[a,c,e],[b,d,f],[0,0,1]],x,y,z,res;if(a&&a instanceof Matrix){matrix=[[a.a,a.c,a.e],[a.b,a.d,a.f],[0,0,1]]}for(x=0;x<3;x++){for(y=0;y<3;y++){res=0;for(z=0;z<3;z++){res+=m[x][z]*matrix[z][y]}out[x][y]=res}}this.a=out[0][0];this.b=out[1][0];this.c=out[0][1];this.d=out[1][1];this.e=out[0][2];this.f=out[1][2]};matrixproto.invert=function(){var me=this,x=me.a*me.d-me.b*me.c;return new Matrix(me.d/x,-me.b/x,-me.c/x,me.a/x,(me.c*me.f-me.d*me.e)/x,(me.b*me.e-me.a*me.f)/x)};matrixproto.clone=function(){return new Matrix(this.a,this.b,this.c,this.d,this.e,this.f)};matrixproto.translate=function(x,y){this.add(1,0,0,1,x,y)};matrixproto.scale=function(x,y,cx,cy){y==null&&(y=x);(cx||cy)&&this.add(1,0,0,1,cx,cy);this.add(x,0,0,y,0,0);(cx||cy)&&this.add(1,0,0,1,-cx,-cy)};matrixproto.rotate=function(a,x,y){a=R.rad(a);x=x||0;y=y||0;var cos=+math.cos(a).toFixed(9),sin=+math.sin(a).toFixed(9);this.add(cos,sin,-sin,cos,x,y);this.add(1,0,0,1,-x,-y)};matrixproto.x=function(x,y){return x*this.a+y*this.c+this.e};matrixproto.y=function(x,y){return x*this.b+y*this.d+this.f};matrixproto.get=function(i){return +this[Str.fromCharCode(97+i)].toFixed(4)};matrixproto.toString=function(){return R.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()};matrixproto.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"};matrixproto.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]};function norm(a){return a[0]*a[0]+a[1]*a[1]}function normalize(a){var mag=math.sqrt(norm(a));a[0]&&(a[0]/=mag);a[1]&&(a[1]/=mag)}matrixproto.split=function(){var out={};out.dx=this.e;out.dy=this.f;var row=[[this.a,this.c],[this.b,this.d]];out.scalex=math.sqrt(norm(row[0]));normalize(row[0]);out.shear=row[0][0]*row[1][0]+row[0][1]*row[1][1];row[1]=[row[1][0]-row[0][0]*out.shear,row[1][1]-row[0][1]*out.shear];out.scaley=math.sqrt(norm(row[1]));normalize(row[1]);out.shear/=out.scaley;var sin=-row[0][1],cos=row[1][1];if(cos<0){out.rotate=R.deg(math.acos(cos));if(sin<0){out.rotate=360-out.rotate}}else{out.rotate=R.deg(math.asin(sin))}out.isSimple=!+out.shear.toFixed(9)&&(out.scalex.toFixed(9)==out.scaley.toFixed(9)||!out.rotate);out.isSuperSimple=!+out.shear.toFixed(9)&&out.scalex.toFixed(9)==out.scaley.toFixed(9)&&!out.rotate;out.noRotation=!+out.shear.toFixed(9)&&!out.rotate;return out};matrixproto.toTransformString=function(shorter){var s=shorter||this[split]();if(s.isSimple){s.scalex=+s.scalex.toFixed(4);s.scaley=+s.scaley.toFixed(4);s.rotate=+s.rotate.toFixed(4);return(s.dx||s.dy?"t"+[s.dx,s.dy]:E)+(s.scalex!=1||s.scaley!=1?"s"+[s.scalex,s.scaley,0,0]:E)+(s.rotate?"r"+[s.rotate,0,0]:E)}else{return"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}})(Matrix.prototype);var version=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);if((navigator.vendor=="Apple Computer, Inc.")&&(version&&version[1]<4||navigator.platform.slice(0,2)=="iP")||(navigator.vendor=="Google Inc."&&version&&version[1]<8)){paperproto.safari=function(){var rect=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){rect.remove()})}}else{paperproto.safari=fun}var preventDefault=function(){this.returnValue=false},preventTouch=function(){return this.originalEvent.preventDefault()},stopPropagation=function(){this.cancelBubble=true},stopTouch=function(){return this.originalEvent.stopPropagation()},addEvent=(function(){if(g.doc.addEventListener){return function(obj,type,fn,element){var realName=supportsTouch&&touchMap[type]?touchMap[type]:type,f=function(e){var scrollY=g.doc.documentElement.scrollTop||g.doc.body.scrollTop,scrollX=g.doc.documentElement.scrollLeft||g.doc.body.scrollLeft,x=e.clientX+scrollX,y=e.clientY+scrollY;if(supportsTouch&&touchMap[has](type)){for(var i=0,ii=e.targetTouches&&e.targetTouches.length;i<ii;i++){if(e.targetTouches[i].target==obj){var olde=e;e=e.targetTouches[i];e.originalEvent=olde;e.preventDefault=preventTouch;e.stopPropagation=stopTouch;break}}}return fn.call(element,e,x,y)};obj.addEventListener(realName,f,false);return function(){obj.removeEventListener(realName,f,false);return true}}}else{if(g.doc.attachEvent){return function(obj,type,fn,element){var f=function(e){e=e||g.win.event;var scrollY=g.doc.documentElement.scrollTop||g.doc.body.scrollTop,scrollX=g.doc.documentElement.scrollLeft||g.doc.body.scrollLeft,x=e.clientX+scrollX,y=e.clientY+scrollY;e.preventDefault=e.preventDefault||preventDefault;e.stopPropagation=e.stopPropagation||stopPropagation;return fn.call(element,e,x,y)};obj.attachEvent("on"+type,f);var detacher=function(){obj.detachEvent("on"+type,f);return true};return detacher}}}})(),drag=[],dragMove=function(e){var x=e.clientX,y=e.clientY,scrollY=g.doc.documentElement.scrollTop||g.doc.body.scrollTop,scrollX=g.doc.documentElement.scrollLeft||g.doc.body.scrollLeft,dragi,j=drag.length;while(j--){dragi=drag[j];if(supportsTouch){var i=e.touches.length,touch;while(i--){touch=e.touches[i];if(touch.identifier==dragi.el._drag.id){x=touch.clientX;y=touch.clientY;(e.originalEvent?e.originalEvent:e).preventDefault();break}}}else{e.preventDefault()}var node=dragi.el.node,o,next=node.nextSibling,parent=node.parentNode,display=node.style.display;g.win.opera&&parent.removeChild(node);node.style.display="none";o=dragi.el.paper.getElementByPoint(x,y);node.style.display=display;g.win.opera&&(next?parent.insertBefore(node,next):parent.appendChild(node));o&&eve("raphael.drag.over."+dragi.el.id,dragi.el,o);x+=scrollX;y+=scrollY;eve("raphael.drag.move."+dragi.el.id,dragi.move_scope||dragi.el,x-dragi.el._drag.x,y-dragi.el._drag.y,x,y,e)}},dragUp=function(e){R.unmousemove(dragMove).unmouseup(dragUp);var i=drag.length,dragi;while(i--){dragi=drag[i];dragi.el._drag={};eve("raphael.drag.end."+dragi.el.id,dragi.end_scope||dragi.start_scope||dragi.move_scope||dragi.el,e)}drag=[]},elproto=R.el={};for(var i=events.length;i--;){(function(eventName){R[eventName]=elproto[eventName]=function(fn,scope){if(R.is(fn,"function")){this.events=this.events||[];this.events.push({name:eventName,f:fn,unbind:addEvent(this.shape||this.node||g.doc,eventName,fn,scope||this)})}return this};R["un"+eventName]=elproto["un"+eventName]=function(fn){var events=this.events||[],l=events.length;while(l--){if(events[l].name==eventName&&events[l].f==fn){events[l].unbind();events.splice(l,1);!events.length&&delete this.events;return this}}return this}})(events[i])}elproto.data=function(key,value){var data=eldata[this.id]=eldata[this.id]||{};if(arguments.length==1){if(R.is(key,"object")){for(var i in key){if(key[has](i)){this.data(i,key[i])}}return this}eve("raphael.data.get."+this.id,this,data[key],key);return data[key]}data[key]=value;eve("raphael.data.set."+this.id,this,value,key);return this};elproto.removeData=function(key){if(key==null){eldata[this.id]={}}else{eldata[this.id]&&delete eldata[this.id][key]}return this};elproto.hover=function(f_in,f_out,scope_in,scope_out){return this.mouseover(f_in,scope_in).mouseout(f_out,scope_out||scope_in)};elproto.unhover=function(f_in,f_out){return this.unmouseover(f_in).unmouseout(f_out)};var draggable=[];elproto.drag=function(onmove,onstart,onend,move_scope,start_scope,end_scope){function start(e){(e.originalEvent||e).preventDefault();var scrollY=g.doc.documentElement.scrollTop||g.doc.body.scrollTop,scrollX=g.doc.documentElement.scrollLeft||g.doc.body.scrollLeft;this._drag.x=e.clientX+scrollX;this._drag.y=e.clientY+scrollY;this._drag.id=e.identifier;!drag.length&&R.mousemove(dragMove).mouseup(dragUp);drag.push({el:this,move_scope:move_scope,start_scope:start_scope,end_scope:end_scope});onstart&&eve.on("raphael.drag.start."+this.id,onstart);onmove&&eve.on("raphael.drag.move."+this.id,onmove);onend&&eve.on("raphael.drag.end."+this.id,onend);eve("raphael.drag.start."+this.id,start_scope||move_scope||this,e.clientX+scrollX,e.clientY+scrollY,e)}this._drag={};draggable.push({el:this,start:start});this.mousedown(start);return this};elproto.onDragOver=function(f){f?eve.on("raphael.drag.over."+this.id,f):eve.unbind("raphael.drag.over."+this.id)};elproto.undrag=function(){var i=draggable.length;while(i--){if(draggable[i].el==this){this.unmousedown(draggable[i].start);draggable.splice(i,1);eve.unbind("raphael.drag.*."+this.id)}}!draggable.length&&R.unmousemove(dragMove).unmouseup(dragUp)};paperproto.circle=function(x,y,r){var out=R._engine.circle(this,x||0,y||0,r||0);this.__set__&&this.__set__.push(out);return out};paperproto.rect=function(x,y,w,h,r){var out=R._engine.rect(this,x||0,y||0,w||0,h||0,r||0);this.__set__&&this.__set__.push(out);return out};paperproto.ellipse=function(x,y,rx,ry){var out=R._engine.ellipse(this,x||0,y||0,rx||0,ry||0);this.__set__&&this.__set__.push(out);return out};paperproto.path=function(pathString){pathString&&!R.is(pathString,string)&&!R.is(pathString[0],array)&&(pathString+=E);var out=R._engine.path(R.format[apply](R,arguments),this);this.__set__&&this.__set__.push(out);return out};paperproto.image=function(src,x,y,w,h){var out=R._engine.image(this,src||"about:blank",x||0,y||0,w||0,h||0);this.__set__&&this.__set__.push(out);return out};paperproto.text=function(x,y,text){var out=R._engine.text(this,x||0,y||0,Str(text));this.__set__&&this.__set__.push(out);return out};paperproto.set=function(itemsArray){!R.is(itemsArray,"array")&&(itemsArray=Array.prototype.splice.call(arguments,0,arguments.length));var out=new Set(itemsArray);this.__set__&&this.__set__.push(out);return out};paperproto.setStart=function(set){this.__set__=set||this.set()};paperproto.setFinish=function(set){var out=this.__set__;delete this.__set__;return out};paperproto.setSize=function(width,height){return R._engine.setSize.call(this,width,height)};paperproto.setViewBox=function(x,y,w,h,fit){return R._engine.setViewBox.call(this,x,y,w,h,fit)};paperproto.top=paperproto.bottom=null;paperproto.raphael=R;var getOffset=function(elem){var box=elem.getBoundingClientRect(),doc=elem.ownerDocument,body=doc.body,docElem=doc.documentElement,clientTop=docElem.clientTop||body.clientTop||0,clientLeft=docElem.clientLeft||body.clientLeft||0,top=box.top+(g.win.pageYOffset||docElem.scrollTop||body.scrollTop)-clientTop,left=box.left+(g.win.pageXOffset||docElem.scrollLeft||body.scrollLeft)-clientLeft;return{y:top,x:left}};paperproto.getElementByPoint=function(x,y){var paper=this,svg=paper.canvas,target=g.doc.elementFromPoint(x,y);if(g.win.opera&&target.tagName=="svg"){var so=getOffset(svg),sr=svg.createSVGRect();sr.x=x-so.x;sr.y=y-so.y;sr.width=sr.height=1;var hits=svg.getIntersectionList(sr,null);if(hits.length){target=hits[hits.length-1]}}if(!target){return null}while(target.parentNode&&target!=svg.parentNode&&!target.raphael){target=target.parentNode}target==paper.canvas.parentNode&&(target=svg);target=target&&target.raphael?paper.getById(target.raphaelid):null;return target};paperproto.getById=function(id){var bot=this.bottom;while(bot){if(bot.id==id){return bot}bot=bot.next}return null};paperproto.forEach=function(callback,thisArg){var bot=this.bottom;while(bot){if(callback.call(thisArg,bot)===false){return this}bot=bot.next}return this};paperproto.getElementsByPoint=function(x,y){var set=this.set();this.forEach(function(el){if(el.isPointInside(x,y)){set.push(el)}});return set};function x_y(){return this.x+S+this.y}function x_y_w_h(){return this.x+S+this.y+S+this.width+" \xd7 "+this.height}elproto.isPointInside=function(x,y){var rp=this.realPath=this.realPath||getPath[this.type](this);return R.isPointInsidePath(rp,x,y)};elproto.getBBox=function(isWithoutTransform){if(this.removed){return{}}var _=this._;if(isWithoutTransform){if(_.dirty||!_.bboxwt){this.realPath=getPath[this.type](this);_.bboxwt=pathDimensions(this.realPath);_.bboxwt.toString=x_y_w_h;_.dirty=0}return _.bboxwt}if(_.dirty||_.dirtyT||!_.bbox){if(_.dirty||!this.realPath){_.bboxwt=0;this.realPath=getPath[this.type](this)}_.bbox=pathDimensions(mapPath(this.realPath,this.matrix));_.bbox.toString=x_y_w_h;_.dirty=_.dirtyT=0}return _.bbox};elproto.clone=function(){if(this.removed){return null}var out=this.paper[this.type]().attr(this.attr());this.__set__&&this.__set__.push(out);return out};elproto.glow=function(glow){if(this.type=="text"){return null}glow=glow||{};var s={width:(glow.width||10)+(+this.attr("stroke-width")||1),fill:glow.fill||false,opacity:glow.opacity||0.5,offsetx:glow.offsetx||0,offsety:glow.offsety||0,color:glow.color||"#000"},c=s.width/2,r=this.paper,out=r.set(),path=this.realPath||getPath[this.type](this);path=this.matrix?mapPath(path,this.matrix):path;for(var i=1;i<c+1;i++){out.push(r.path(path).attr({stroke:s.color,fill:s.fill?s.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(s.width/c*i).toFixed(3),opacity:+(s.opacity/c).toFixed(3)}))}return out.insertBefore(this).translate(s.offsetx,s.offsety)};var curveslengths={},getPointAtSegmentLength=function(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,length){if(length==null){return bezlen(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y)}else{return R.findDotsAtSegment(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,getTatLen(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,length))}},getLengthFactory=function(istotal,subpath){return function(path,length,onlystart){path=path2curve(path);var x,y,p,l,sp="",subpaths={},point,len=0;for(var i=0,ii=path.length;i<ii;i++){p=path[i];if(p[0]=="M"){x=+p[1];y=+p[2]}else{l=getPointAtSegmentLength(x,y,p[1],p[2],p[3],p[4],p[5],p[6]);if(len+l>length){if(subpath&&!subpaths.start){point=getPointAtSegmentLength(x,y,p[1],p[2],p[3],p[4],p[5],p[6],length-len);sp+=["C"+point.start.x,point.start.y,point.m.x,point.m.y,point.x,point.y];if(onlystart){return sp}subpaths.start=sp;sp=["M"+point.x,point.y+"C"+point.n.x,point.n.y,point.end.x,point.end.y,p[5],p[6]].join();len+=l;x=+p[5];y=+p[6];continue}if(!istotal&&!subpath){point=getPointAtSegmentLength(x,y,p[1],p[2],p[3],p[4],p[5],p[6],length-len);return{x:point.x,y:point.y,alpha:point.alpha}}}len+=l;x=+p[5];y=+p[6]}sp+=p.shift()+p}subpaths.end=sp;point=istotal?len:subpath?subpaths:R.findDotsAtSegment(x,y,p[0],p[1],p[2],p[3],p[4],p[5],1);point.alpha&&(point={x:point.x,y:point.y,alpha:point.alpha});return point}};var getTotalLength=getLengthFactory(1),getPointAtLength=getLengthFactory(),getSubpathsAtLength=getLengthFactory(0,1);R.getTotalLength=getTotalLength;R.getPointAtLength=getPointAtLength;R.getSubpath=function(path,from,to){if(this.getTotalLength(path)-to<0.000001){return getSubpathsAtLength(path,from).end}var a=getSubpathsAtLength(path,to,1);return from?getSubpathsAtLength(a,from).end:a};elproto.getTotalLength=function(){if(this.type!="path"){return }if(this.node.getTotalLength){return this.node.getTotalLength()}return getTotalLength(this.attrs.path)};elproto.getPointAtLength=function(length){if(this.type!="path"){return }return getPointAtLength(this.attrs.path,length)};elproto.getSubpath=function(from,to){if(this.type!="path"){return }return R.getSubpath(this.attrs.path,from,to)};var ef=R.easing_formulas={linear:function(n){return n},"<":function(n){return pow(n,1.7)},">":function(n){return pow(n,0.48)},"<>":function(n){var q=0.48-n/1.04,Q=math.sqrt(0.1734+q*q),x=Q-q,X=pow(abs(x),1/3)*(x<0?-1:1),y=-Q-q,Y=pow(abs(y),1/3)*(y<0?-1:1),t=X+Y+0.5;return(1-t)*3*t*t+t*t*t},backIn:function(n){var s=1.70158;return n*n*((s+1)*n-s)},backOut:function(n){n=n-1;var s=1.70158;return n*n*((s+1)*n+s)+1},elastic:function(n){if(n==!!n){return n}return pow(2,-10*n)*math.sin((n-0.075)*(2*PI)/0.3)+1},bounce:function(n){var s=7.5625,p=2.75,l;if(n<(1/p)){l=s*n*n}else{if(n<(2/p)){n-=(1.5/p);l=s*n*n+0.75}else{if(n<(2.5/p)){n-=(2.25/p);l=s*n*n+0.9375}else{n-=(2.625/p);l=s*n*n+0.984375}}}return l}};ef.easeIn=ef["ease-in"]=ef["<"];ef.easeOut=ef["ease-out"]=ef[">"];ef.easeInOut=ef["ease-in-out"]=ef["<>"];ef["back-in"]=ef.backIn;ef["back-out"]=ef.backOut;var animationElements=[],requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){setTimeout(callback,16)},animation=function(){var Now=+new Date,l=0;for(;l<animationElements.length;l++){var e=animationElements[l];if(e.el.removed||e.paused){continue}var time=Now-e.start,ms=e.ms,easing=e.easing,from=e.from,diff=e.diff,to=e.to,t=e.t,that=e.el,set={},now,init={},key;if(e.initstatus){time=(e.initstatus*e.anim.top-e.prev)/(e.percent-e.prev)*ms;e.status=e.initstatus;delete e.initstatus;e.stop&&animationElements.splice(l--,1)}else{e.status=(e.prev+(e.percent-e.prev)*(time/ms))/e.anim.top}if(time<0){continue}if(time<ms){var pos=easing(time/ms);for(var attr in from){if(from[has](attr)){switch(availableAnimAttrs[attr]){case nu:now=+from[attr]+pos*ms*diff[attr];break;case"colour":now="rgb("+[upto255(round(from[attr].r+pos*ms*diff[attr].r)),upto255(round(from[attr].g+pos*ms*diff[attr].g)),upto255(round(from[attr].b+pos*ms*diff[attr].b))].join(",")+")";break;case"path":now=[];for(var i=0,ii=from[attr].length;i<ii;i++){now[i]=[from[attr][i][0]];for(var j=1,jj=from[attr][i].length;j<jj;j++){now[i][j]=+from[attr][i][j]+pos*ms*diff[attr][i][j]}now[i]=now[i].join(S)}now=now.join(S);break;case"transform":if(diff[attr].real){now=[];for(i=0,ii=from[attr].length;i<ii;i++){now[i]=[from[attr][i][0]];for(j=1,jj=from[attr][i].length;j<jj;j++){now[i][j]=from[attr][i][j]+pos*ms*diff[attr][i][j]}}}else{var get=function(i){return +from[attr][i]+pos*ms*diff[attr][i]};now=[["m",get(0),get(1),get(2),get(3),get(4),get(5)]]}break;case"csv":if(attr=="clip-rect"){now=[];i=4;while(i--){now[i]=+from[attr][i]+pos*ms*diff[attr][i]}}break;default:var from2=[][concat](from[attr]);now=[];i=that.paper.customAttributes[attr].length;while(i--){now[i]=+from2[i]+pos*ms*diff[attr][i]}break}set[attr]=now}}that.attr(set);(function(id,that,anim){setTimeout(function(){eve("raphael.anim.frame."+id,that,anim)})})(that.id,that,e.anim)}else{(function(f,el,a){setTimeout(function(){eve("raphael.anim.frame."+el.id,el,a);eve("raphael.anim.finish."+el.id,el,a);R.is(f,"function")&&f.call(el)})})(e.callback,that,e.anim);that.attr(to);animationElements.splice(l--,1);if(e.repeat>1&&!e.next){for(key in to){if(to[has](key)){init[key]=e.totalOrigin[key]}}e.el.attr(init);runAnimation(e.anim,e.el,e.anim.percents[0],null,e.totalOrigin,e.repeat-1)}if(e.next&&!e.stop){runAnimation(e.anim,e.el,e.next,null,e.totalOrigin,e.repeat)}}}R.svg&&that&&that.paper&&that.paper.safari();animationElements.length&&requestAnimFrame(animation)},upto255=function(color){return color>255?255:color<0?0:color};elproto.animateWith=function(el,anim,params,ms,easing,callback){var element=this;if(element.removed){callback&&callback.call(element);return element}var a=params instanceof Animation?params:R.animation(params,ms,easing,callback),x,y;runAnimation(a,element,a.percents[0],null,element.attr());for(var i=0,ii=animationElements.length;i<ii;i++){if(animationElements[i].anim==anim&&animationElements[i].el==el){animationElements[ii-1].start=animationElements[i].start;break}}return element};function CubicBezierAtTime(t,p1x,p1y,p2x,p2y,duration){var cx=3*p1x,bx=3*(p2x-p1x)-cx,ax=1-cx-bx,cy=3*p1y,by=3*(p2y-p1y)-cy,ay=1-cy-by;function sampleCurveX(t){return((ax*t+bx)*t+cx)*t}function solve(x,epsilon){var t=solveCurveX(x,epsilon);return((ay*t+by)*t+cy)*t}function solveCurveX(x,epsilon){var t0,t1,t2,x2,d2,i;for(t2=x,i=0;i<8;i++){x2=sampleCurveX(t2)-x;if(abs(x2)<epsilon){return t2}d2=(3*ax*t2+2*bx)*t2+cx;if(abs(d2)<0.000001){break}t2=t2-x2/d2}t0=0;t1=1;t2=x;if(t2<t0){return t0}if(t2>t1){return t1}while(t0<t1){x2=sampleCurveX(t2);if(abs(x2-x)<epsilon){return t2}if(x>x2){t0=t2}else{t1=t2}t2=(t1-t0)/2+t0}return t2}return solve(t,1/(200*duration))}elproto.onAnimation=function(f){f?eve.on("raphael.anim.frame."+this.id,f):eve.unbind("raphael.anim.frame."+this.id);return this};function Animation(anim,ms){var percents=[],newAnim={};this.ms=ms;this.times=1;if(anim){for(var attr in anim){if(anim[has](attr)){newAnim[toFloat(attr)]=anim[attr];percents.push(toFloat(attr))}}percents.sort(sortByNumber)}this.anim=newAnim;this.top=percents[percents.length-1];this.percents=percents}Animation.prototype.delay=function(delay){var a=new Animation(this.anim,this.ms);a.times=this.times;a.del=+delay||0;return a};Animation.prototype.repeat=function(times){var a=new Animation(this.anim,this.ms);a.del=this.del;a.times=math.floor(mmax(times,0))||1;return a};function runAnimation(anim,element,percent,status,totalOrigin,times){percent=toFloat(percent);var params,isInAnim,isInAnimSet,percents=[],next,prev,timestamp,ms=anim.ms,from={},to={},diff={};if(status){for(i=0,ii=animationElements.length;i<ii;i++){var e=animationElements[i];if(e.el.id==element.id&&e.anim==anim){if(e.percent!=percent){animationElements.splice(i,1);isInAnimSet=1}else{isInAnim=e}element.attr(e.totalOrigin);break}}}else{status=+to}for(var i=0,ii=anim.percents.length;i<ii;i++){if(anim.percents[i]==percent||anim.percents[i]>status*anim.top){percent=anim.percents[i];prev=anim.percents[i-1]||0;ms=ms/anim.top*(percent-prev);next=anim.percents[i+1];params=anim.anim[percent];break}else{if(status){element.attr(anim.anim[anim.percents[i]])}}}if(!params){return }if(!isInAnim){for(var attr in params){if(params[has](attr)){if(availableAnimAttrs[has](attr)||element.paper.customAttributes[has](attr)){from[attr]=element.attr(attr);(from[attr]==null)&&(from[attr]=availableAttrs[attr]);to[attr]=params[attr];switch(availableAnimAttrs[attr]){case nu:diff[attr]=(to[attr]-from[attr])/ms;break;case"colour":from[attr]=R.getRGB(from[attr]);var toColour=R.getRGB(to[attr]);diff[attr]={r:(toColour.r-from[attr].r)/ms,g:(toColour.g-from[attr].g)/ms,b:(toColour.b-from[attr].b)/ms};break;case"path":var pathes=path2curve(from[attr],to[attr]),toPath=pathes[1];from[attr]=pathes[0];diff[attr]=[];for(i=0,ii=from[attr].length;i<ii;i++){diff[attr][i]=[0];for(var j=1,jj=from[attr][i].length;j<jj;j++){diff[attr][i][j]=(toPath[i][j]-from[attr][i][j])/ms}}break;case"transform":var _=element._,eq=equaliseTransform(_[attr],to[attr]);if(eq){from[attr]=eq.from;to[attr]=eq.to;diff[attr]=[];diff[attr].real=true;for(i=0,ii=from[attr].length;i<ii;i++){diff[attr][i]=[from[attr][i][0]];for(j=1,jj=from[attr][i].length;j<jj;j++){diff[attr][i][j]=(to[attr][i][j]-from[attr][i][j])/ms}}}else{var m=(element.matrix||new Matrix),to2={_:{transform:_.transform},getBBox:function(){return element.getBBox(1)}};from[attr]=[m.a,m.b,m.c,m.d,m.e,m.f];extractTransform(to2,to[attr]);to[attr]=to2._.transform;diff[attr]=[(to2.matrix.a-m.a)/ms,(to2.matrix.b-m.b)/ms,(to2.matrix.c-m.c)/ms,(to2.matrix.d-m.d)/ms,(to2.matrix.e-m.e)/ms,(to2.matrix.f-m.f)/ms]}break;case"csv":var values=Str(params[attr])[split](separator),from2=Str(from[attr])[split](separator);if(attr=="clip-rect"){from[attr]=from2;diff[attr]=[];i=from2.length;while(i--){diff[attr][i]=(values[i]-from[attr][i])/ms}}to[attr]=values;break;default:values=[][concat](params[attr]);from2=[][concat](from[attr]);diff[attr]=[];i=element.paper.customAttributes[attr].length;while(i--){diff[attr][i]=((values[i]||0)-(from2[i]||0))/ms}break}}}}var easing=params.easing,easyeasy=R.easing_formulas[easing];if(!easyeasy){easyeasy=Str(easing).match(bezierrg);if(easyeasy&&easyeasy.length==5){var curve=easyeasy;easyeasy=function(t){return CubicBezierAtTime(t,+curve[1],+curve[2],+curve[3],+curve[4],ms)}}else{easyeasy=pipe}}timestamp=params.start||anim.start||+new Date;e={anim:anim,percent:percent,timestamp:timestamp,start:timestamp+(anim.del||0),status:0,initstatus:status||0,stop:false,ms:ms,easing:easyeasy,from:from,diff:diff,to:to,el:element,callback:params.callback,prev:prev,next:next,repeat:times||anim.times,origin:element.attr(),totalOrigin:totalOrigin};animationElements.push(e);if(status&&!isInAnim&&!isInAnimSet){e.stop=true;e.start=new Date-ms*status;if(animationElements.length==1){return animation()}}if(isInAnimSet){e.start=new Date-e.ms*status}animationElements.length==1&&requestAnimFrame(animation)}else{isInAnim.initstatus=status;isInAnim.start=new Date-isInAnim.ms*status}eve("raphael.anim.start."+element.id,element,anim)}R.animation=function(params,ms,easing,callback){if(params instanceof Animation){return params}if(R.is(easing,"function")||!easing){callback=callback||easing||null;easing=null}params=Object(params);ms=+ms||0;var p={},json,attr;for(attr in params){if(params[has](attr)&&toFloat(attr)!=attr&&toFloat(attr)+"%"!=attr){json=true;p[attr]=params[attr]}}if(!json){return new Animation(params,ms)}else{easing&&(p.easing=easing);callback&&(p.callback=callback);return new Animation({100:p},ms)}};elproto.animate=function(params,ms,easing,callback){var element=this;if(element.removed){callback&&callback.call(element);return element}var anim=params instanceof Animation?params:R.animation(params,ms,easing,callback);runAnimation(anim,element,anim.percents[0],null,element.attr());return element};elproto.setTime=function(anim,value){if(anim&&value!=null){this.status(anim,mmin(value,anim.ms)/anim.ms)}return this};elproto.status=function(anim,value){var out=[],i=0,len,e;if(value!=null){runAnimation(anim,this,-1,mmin(value,1));return this}else{len=animationElements.length;for(;i<len;i++){e=animationElements[i];if(e.el.id==this.id&&(!anim||e.anim==anim)){if(anim){return e.status}out.push({anim:e.anim,status:e.status})}}if(anim){return 0}return out}};elproto.pause=function(anim){for(var i=0;i<animationElements.length;i++){if(animationElements[i].el.id==this.id&&(!anim||animationElements[i].anim==anim)){if(eve("raphael.anim.pause."+this.id,this,animationElements[i].anim)!==false){animationElements[i].paused=true}}}return this};elproto.resume=function(anim){for(var i=0;i<animationElements.length;i++){if(animationElements[i].el.id==this.id&&(!anim||animationElements[i].anim==anim)){var e=animationElements[i];if(eve("raphael.anim.resume."+this.id,this,e.anim)!==false){delete e.paused;this.status(e.anim,e.status)}}}return this};elproto.stop=function(anim){for(var i=0;i<animationElements.length;i++){if(animationElements[i].el.id==this.id&&(!anim||animationElements[i].anim==anim)){if(eve("raphael.anim.stop."+this.id,this,animationElements[i].anim)!==false){animationElements.splice(i--,1)}}}return this};function stopAnimation(paper){for(var i=0;i<animationElements.length;i++){if(animationElements[i].el.paper==paper){animationElements.splice(i--,1)}}}eve.on("raphael.remove",stopAnimation);eve.on("raphael.clear",stopAnimation);elproto.toString=function(){return"Rapha\xebl\u2019s object"};var Set=function(items){this.items=[];this.length=0;this.type="set";if(items){for(var i=0,ii=items.length;i<ii;i++){if(items[i]&&(items[i].constructor==elproto.constructor||items[i].constructor==Set)){this[this.items.length]=this.items[this.items.length]=items[i];this.length++}}}},setproto=Set.prototype;setproto.push=function(){var item,len;for(var i=0,ii=arguments.length;i<ii;i++){item=arguments[i];if(item&&(item.constructor==elproto.constructor||item.constructor==Set)){len=this.items.length;this[len]=this.items[len]=item;this.length++}}return this};setproto.pop=function(){this.length&&delete this[this.length--];return this.items.pop()};setproto.forEach=function(callback,thisArg){for(var i=0,ii=this.items.length;i<ii;i++){if(callback.call(thisArg,this.items[i],i)===false){return this}}return this};for(var method in elproto){if(elproto[has](method)){setproto[method]=(function(methodname){return function(){var arg=arguments;return this.forEach(function(el){el[methodname][apply](el,arg)})}})(method)}}setproto.attr=function(name,value){if(name&&R.is(name,array)&&R.is(name[0],"object")){for(var j=0,jj=name.length;j<jj;j++){this.items[j].attr(name[j])}}else{for(var i=0,ii=this.items.length;i<ii;i++){this.items[i].attr(name,value)}}return this};setproto.clear=function(){while(this.length){this.pop()}};setproto.splice=function(index,count,insertion){index=index<0?mmax(this.length+index,0):index;count=mmax(0,mmin(this.length-index,count));var tail=[],todel=[],args=[],i;for(i=2;i<arguments.length;i++){args.push(arguments[i])}for(i=0;i<count;i++){todel.push(this[index+i])}for(;i<this.length-index;i++){tail.push(this[index+i])}var arglen=args.length;for(i=0;i<arglen+tail.length;i++){this.items[index+i]=this[index+i]=i<arglen?args[i]:tail[i-arglen]}i=this.items.length=this.length-=count-arglen;while(this[i]){delete this[i++]}return new Set(todel)};setproto.exclude=function(el){for(var i=0,ii=this.length;i<ii;i++){if(this[i]==el){this.splice(i,1);return true}}};setproto.animate=function(params,ms,easing,callback){(R.is(easing,"function")||!easing)&&(callback=easing||null);var len=this.items.length,i=len,item,set=this,collector;if(!len){return this}callback&&(collector=function(){!--len&&callback.call(set)});easing=R.is(easing,string)?easing:collector;var anim=R.animation(params,ms,easing,collector);item=this.items[--i].animate(anim);while(i--){this.items[i]&&!this.items[i].removed&&this.items[i].animateWith(item,anim,anim)}return this};setproto.insertAfter=function(el){var i=this.items.length;while(i--){this.items[i].insertAfter(el)}return this};setproto.getBBox=function(){var x=[],y=[],x2=[],y2=[];for(var i=this.items.length;i--;){if(!this.items[i].removed){var box=this.items[i].getBBox();x.push(box.x);y.push(box.y);x2.push(box.x+box.width);y2.push(box.y+box.height)}}x=mmin[apply](0,x);y=mmin[apply](0,y);x2=mmax[apply](0,x2);y2=mmax[apply](0,y2);return{x:x,y:y,x2:x2,y2:y2,width:x2-x,height:y2-y}};setproto.clone=function(s){s=new Set;for(var i=0,ii=this.items.length;i<ii;i++){s.push(this.items[i].clone())}return s};setproto.toString=function(){return"Rapha\xebl\u2018s set"};R.registerFont=function(font){if(!font.face){return font}this.fonts=this.fonts||{};var fontcopy={w:font.w,face:{},glyphs:{}},family=font.face["font-family"];for(var prop in font.face){if(font.face[has](prop)){fontcopy.face[prop]=font.face[prop]}}if(this.fonts[family]){this.fonts[family].push(fontcopy)}else{this.fonts[family]=[fontcopy]}if(!font.svg){fontcopy.face["units-per-em"]=toInt(font.face["units-per-em"],10);for(var glyph in font.glyphs){if(font.glyphs[has](glyph)){var path=font.glyphs[glyph];fontcopy.glyphs[glyph]={w:path.w,k:{},d:path.d&&"M"+path.d.replace(/[mlcxtrv]/g,function(command){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[command]||"M"})+"z"};if(path.k){for(var k in path.k){if(path[has](k)){fontcopy.glyphs[glyph].k[k]=path.k[k]}}}}}}return font};paperproto.getFont=function(family,weight,style,stretch){stretch=stretch||"normal";style=style||"normal";weight=+weight||{normal:400,bold:700,lighter:300,bolder:800}[weight]||400;if(!R.fonts){return }var font=R.fonts[family];if(!font){var name=new RegExp("(^|\\s)"+family.replace(/[^\w\d\s+!~.:_-]/g,E)+"(\\s|$)","i");for(var fontName in R.fonts){if(R.fonts[has](fontName)){if(name.test(fontName)){font=R.fonts[fontName];break}}}}var thefont;if(font){for(var i=0,ii=font.length;i<ii;i++){thefont=font[i];if(thefont.face["font-weight"]==weight&&(thefont.face["font-style"]==style||!thefont.face["font-style"])&&thefont.face["font-stretch"]==stretch){break}}}return thefont};paperproto.print=function(x,y,string,font,size,origin,letter_spacing){origin=origin||"middle";letter_spacing=mmax(mmin(letter_spacing||0,1),-1);var letters=Str(string)[split](E),shift=0,notfirst=0,path=E,scale;R.is(font,string)&&(font=this.getFont(font));if(font){scale=(size||16)/font.face["units-per-em"];var bb=font.face.bbox[split](separator),top=+bb[0],lineHeight=bb[3]-bb[1],shifty=0,height=+bb[1]+(origin=="baseline"?lineHeight+(+font.face.descent):lineHeight/2);for(var i=0,ii=letters.length;i<ii;i++){if(letters[i]=="\n"){shift=0;curr=0;notfirst=0;shifty+=lineHeight}else{var prev=notfirst&&font.glyphs[letters[i-1]]||{},curr=font.glyphs[letters[i]];shift+=notfirst?(prev.w||font.w)+(prev.k&&prev.k[letters[i]]||0)+(font.w*letter_spacing):0;notfirst=1}if(curr&&curr.d){path+=R.transformPath(curr.d,["t",shift*scale,shifty*scale,"s",scale,scale,top,height,"t",(x-top)/scale,(y-height)/scale])}}}return this.path(path).attr({fill:"#000",stroke:"none"})};paperproto.add=function(json){if(R.is(json,"array")){var res=this.set(),i=0,ii=json.length,j;for(;i<ii;i++){j=json[i]||{};elements[has](j.type)&&res.push(this[j.type]().attr(j))}}return res};R.format=function(token,params){var args=R.is(params,array)?[0][concat](params):arguments;token&&R.is(token,string)&&args.length-1&&(token=token.replace(formatrg,function(str,i){return args[++i]==null?E:args[i]}));return token||E};R.fullfill=(function(){var tokenRegex=/\{([^\}]+)\}/g,objNotationRegex=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,replacer=function(all,key,obj){var res=obj;key.replace(objNotationRegex,function(all,name,quote,quotedName,isFunc){name=name||quotedName;if(res){if(name in res){res=res[name]}typeof res=="function"&&isFunc&&(res=res())}});res=(res==null||res==obj?all:res)+"";return res};return function(str,obj){return String(str).replace(tokenRegex,function(all,key){return replacer(all,key,obj)})}})();R.ninja=function(){oldRaphael.was?(g.win.Raphael=oldRaphael.is):delete Raphael;return R};R.st=setproto;(function(doc,loaded,f){if(doc.readyState==null&&doc.addEventListener){doc.addEventListener(loaded,f=function(){doc.removeEventListener(loaded,f,false);doc.readyState="complete"},false);doc.readyState="loading"}function isLoaded(){(/in/).test(doc.readyState)?setTimeout(isLoaded,9):R.eve("raphael.DOMload")}isLoaded()})(document,"DOMContentLoaded");oldRaphael.was?(g.win.Raphael=R):(Raphael=R);eve.on("raphael.DOMload",function(){loaded=true})})();window.Raphael&&window.Raphael.svg&&function(R){var has="hasOwnProperty",Str=String,toFloat=parseFloat,toInt=parseInt,math=Math,mmax=math.max,abs=math.abs,pow=math.pow,separator=/[, ]+/,eve=R.eve,E="",S=" ";var xlink="http://www.w3.org/1999/xlink",markers={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},markerCounter={};R.toString=function(){return"Your browser supports SVG.\nYou are running Rapha\xebl "+this.version};var $=function(el,attr){if(attr){if(typeof el=="string"){el=$(el)}for(var key in attr){if(attr[has](key)){if(key.substring(0,6)=="xlink:"){el.setAttributeNS(xlink,key.substring(6),Str(attr[key]))}else{el.setAttribute(key,Str(attr[key]))}}}}else{el=R._g.doc.createElementNS("http://www.w3.org/2000/svg",el);el.style&&(el.style.webkitTapHighlightColor="rgba(0,0,0,0)")}return el},addGradientFill=function(element,gradient){var type="linear",id=element.id+gradient,fx=0.5,fy=0.5,o=element.node,SVG=element.paper,s=o.style,el=R._g.doc.getElementById(id);if(!el){gradient=Str(gradient).replace(R._radial_gradient,function(all,_fx,_fy){type="radial";if(_fx&&_fy){fx=toFloat(_fx);fy=toFloat(_fy);var dir=((fy>0.5)*2-1);pow(fx-0.5,2)+pow(fy-0.5,2)>0.25&&(fy=math.sqrt(0.25-pow(fx-0.5,2))*dir+0.5)&&fy!=0.5&&(fy=fy.toFixed(5)-0.00001*dir)}return E});gradient=gradient.split(/\s*\-\s*/);if(type=="linear"){var angle=gradient.shift();angle=-toFloat(angle);if(isNaN(angle)){return null}var vector=[0,0,math.cos(R.rad(angle)),math.sin(R.rad(angle))],max=1/(mmax(abs(vector[2]),abs(vector[3]))||1);vector[2]*=max;vector[3]*=max;if(vector[2]<0){vector[0]=-vector[2];vector[2]=0}if(vector[3]<0){vector[1]=-vector[3];vector[3]=0}}var dots=R._parseDots(gradient);if(!dots){return null}id=id.replace(/[\(\)\s,\xb0#]/g,"_");if(element.gradient&&id!=element.gradient.id){SVG.defs.removeChild(element.gradient);delete element.gradient}if(!element.gradient){el=$(type+"Gradient",{id:id});element.gradient=el;$(el,type=="radial"?{fx:fx,fy:fy}:{x1:vector[0],y1:vector[1],x2:vector[2],y2:vector[3],gradientTransform:element.matrix.invert()});SVG.defs.appendChild(el);for(var i=0,ii=dots.length;i<ii;i++){el.appendChild($("stop",{offset:dots[i].offset?dots[i].offset:i?"100%":"0%","stop-color":dots[i].color||"#fff"}))}}}$(o,{fill:"url(#"+id+")",opacity:1,"fill-opacity":1});s.fill=E;s.opacity=1;s.fillOpacity=1;return 1},updatePosition=function(o){var bbox=o.getBBox(1);$(o.pattern,{patternTransform:o.matrix.invert()+" translate("+bbox.x+","+bbox.y+")"})},addArrow=function(o,value,isEnd){if(o.type=="path"){var values=Str(value).toLowerCase().split("-"),p=o.paper,se=isEnd?"end":"start",node=o.node,attrs=o.attrs,stroke=attrs["stroke-width"],i=values.length,type="classic",from,to,dx,refX,attr,w=3,h=3,t=5;while(i--){switch(values[i]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":type=values[i];break;case"wide":h=5;break;case"narrow":h=2;break;case"long":w=5;break;case"short":w=2;break}}if(type=="open"){w+=2;h+=2;t+=2;dx=1;refX=isEnd?4:1;attr={fill:"none",stroke:attrs.stroke}}else{refX=dx=w/2;attr={fill:attrs.stroke,stroke:"none"}}if(o._.arrows){if(isEnd){o._.arrows.endPath&&markerCounter[o._.arrows.endPath]--;o._.arrows.endMarker&&markerCounter[o._.arrows.endMarker]--}else{o._.arrows.startPath&&markerCounter[o._.arrows.startPath]--;o._.arrows.startMarker&&markerCounter[o._.arrows.startMarker]--}}else{o._.arrows={}}if(type!="none"){var pathId="raphael-marker-"+type,markerId="raphael-marker-"+se+type+w+h;if(!R._g.doc.getElementById(pathId)){p.defs.appendChild($($("path"),{"stroke-linecap":"round",d:markers[type],id:pathId}));markerCounter[pathId]=1}else{markerCounter[pathId]++}var marker=R._g.doc.getElementById(markerId),use;if(!marker){marker=$($("marker"),{id:markerId,markerHeight:h,markerWidth:w,orient:"auto",refX:refX,refY:h/2});use=$($("use"),{"xlink:href":"#"+pathId,transform:(isEnd?"rotate(180 "+w/2+" "+h/2+") ":E)+"scale("+w/t+","+h/t+")","stroke-width":(1/((w/t+h/t)/2)).toFixed(4)});marker.appendChild(use);p.defs.appendChild(marker);markerCounter[markerId]=1}else{markerCounter[markerId]++;use=marker.getElementsByTagName("use")[0]}$(use,attr);var delta=dx*(type!="diamond"&&type!="oval");if(isEnd){from=o._.arrows.startdx*stroke||0;to=R.getTotalLength(attrs.path)-delta*stroke}else{from=delta*stroke;to=R.getTotalLength(attrs.path)-(o._.arrows.enddx*stroke||0)}attr={};attr["marker-"+se]="url(#"+markerId+")";if(to||from){attr.d=Raphael.getSubpath(attrs.path,from,to)}$(node,attr);o._.arrows[se+"Path"]=pathId;o._.arrows[se+"Marker"]=markerId;o._.arrows[se+"dx"]=delta;o._.arrows[se+"Type"]=type;o._.arrows[se+"String"]=value}else{if(isEnd){from=o._.arrows.startdx*stroke||0;to=R.getTotalLength(attrs.path)-from}else{from=0;to=R.getTotalLength(attrs.path)-(o._.arrows.enddx*stroke||0)}o._.arrows[se+"Path"]&&$(node,{d:Raphael.getSubpath(attrs.path,from,to)});delete o._.arrows[se+"Path"];delete o._.arrows[se+"Marker"];delete o._.arrows[se+"dx"];delete o._.arrows[se+"Type"];delete o._.arrows[se+"String"]}for(attr in markerCounter){if(markerCounter[has](attr)&&!markerCounter[attr]){var item=R._g.doc.getElementById(attr);item&&item.parentNode.removeChild(item)}}}},dasharray={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},addDashes=function(o,value,params){value=dasharray[Str(value).toLowerCase()];if(value){var width=o.attrs["stroke-width"]||"1",butt={round:width,square:width,butt:0}[o.attrs["stroke-linecap"]||params["stroke-linecap"]]||0,dashes=[],i=value.length;while(i--){dashes[i]=value[i]*width+((i%2)?1:-1)*butt}$(o.node,{"stroke-dasharray":dashes.join(",")})}},setFillAndStroke=function(o,params){var node=o.node,attrs=o.attrs,vis=node.style.visibility;node.style.visibility="hidden";for(var att in params){if(params[has](att)){if(!R._availableAttrs[has](att)){continue}var value=params[att];attrs[att]=value;switch(att){case"blur":o.blur(value);break;case"href":case"title":case"target":var pn=node.parentNode;if(pn.tagName.toLowerCase()!="a"){var hl=$("a");pn.insertBefore(hl,node);hl.appendChild(node);pn=hl}if(att=="target"){pn.setAttributeNS(xlink,"show",value=="blank"?"new":value)}else{pn.setAttributeNS(xlink,att,value)}break;case"cursor":node.style.cursor=value;break;case"transform":o.transform(value);break;case"arrow-start":addArrow(o,value);break;case"arrow-end":addArrow(o,value,1);break;case"clip-rect":var rect=Str(value).split(separator);if(rect.length==4){o.clip&&o.clip.parentNode.parentNode.removeChild(o.clip.parentNode);var el=$("clipPath"),rc=$("rect");el.id=R.createUUID();$(rc,{x:rect[0],y:rect[1],width:rect[2],height:rect[3]});el.appendChild(rc);o.paper.defs.appendChild(el);$(node,{"clip-path":"url(#"+el.id+")"});o.clip=rc}if(!value){var path=node.getAttribute("clip-path");if(path){var clip=R._g.doc.getElementById(path.replace(/(^url\(#|\)$)/g,E));clip&&clip.parentNode.removeChild(clip);$(node,{"clip-path":E});delete o.clip}}break;case"path":if(o.type=="path"){$(node,{d:value?attrs.path=R._pathToAbsolute(value):"M0,0"});o._.dirty=1;if(o._.arrows){"startString" in o._.arrows&&addArrow(o,o._.arrows.startString);"endString" in o._.arrows&&addArrow(o,o._.arrows.endString,1)}}break;case"width":node.setAttribute(att,value);o._.dirty=1;if(attrs.fx){att="x";value=attrs.x}else{break}case"x":if(attrs.fx){value=-attrs.x-(attrs.width||0)}case"rx":if(att=="rx"&&o.type=="rect"){break}case"cx":node.setAttribute(att,value);o.pattern&&updatePosition(o);o._.dirty=1;break;case"height":node.setAttribute(att,value);o._.dirty=1;if(attrs.fy){att="y";value=attrs.y}else{break}case"y":if(attrs.fy){value=-attrs.y-(attrs.height||0)}case"ry":if(att=="ry"&&o.type=="rect"){break}case"cy":node.setAttribute(att,value);o.pattern&&updatePosition(o);o._.dirty=1;break;case"r":if(o.type=="rect"){$(node,{rx:value,ry:value})}else{node.setAttribute(att,value)}o._.dirty=1;break;case"src":if(o.type=="image"){node.setAttributeNS(xlink,"href",value)}break;case"stroke-width":if(o._.sx!=1||o._.sy!=1){value/=mmax(abs(o._.sx),abs(o._.sy))||1}if(o.paper._vbSize){value*=o.paper._vbSize}node.setAttribute(att,value);if(attrs["stroke-dasharray"]){addDashes(o,attrs["stroke-dasharray"],params)}if(o._.arrows){"startString" in o._.arrows&&addArrow(o,o._.arrows.startString);"endString" in o._.arrows&&addArrow(o,o._.arrows.endString,1)}break;case"stroke-dasharray":addDashes(o,value,params);break;case"fill":var isURL=Str(value).match(R._ISURL);if(isURL){el=$("pattern");var ig=$("image");el.id=R.createUUID();$(el,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1});$(ig,{x:0,y:0,"xlink:href":isURL[1]});el.appendChild(ig);(function(el){R._preload(isURL[1],function(){var w=this.offsetWidth,h=this.offsetHeight;$(el,{width:w,height:h});$(ig,{width:w,height:h});o.paper.safari()})})(el);o.paper.defs.appendChild(el);$(node,{fill:"url(#"+el.id+")"});o.pattern=el;o.pattern&&updatePosition(o);break}var clr=R.getRGB(value);if(!clr.error){delete params.gradient;delete attrs.gradient;!R.is(attrs.opacity,"undefined")&&R.is(params.opacity,"undefined")&&$(node,{opacity:attrs.opacity});!R.is(attrs["fill-opacity"],"undefined")&&R.is(params["fill-opacity"],"undefined")&&$(node,{"fill-opacity":attrs["fill-opacity"]})}else{if((o.type=="circle"||o.type=="ellipse"||Str(value).charAt()!="r")&&addGradientFill(o,value)){if("opacity" in attrs||"fill-opacity" in attrs){var gradient=R._g.doc.getElementById(node.getAttribute("fill").replace(/^url\(#|\)$/g,E));if(gradient){var stops=gradient.getElementsByTagName("stop");$(stops[stops.length-1],{"stop-opacity":("opacity" in attrs?attrs.opacity:1)*("fill-opacity" in attrs?attrs["fill-opacity"]:1)})}}attrs.gradient=value;attrs.fill="none";break}}clr[has]("opacity")&&$(node,{"fill-opacity":clr.opacity>1?clr.opacity/100:clr.opacity});case"stroke":clr=R.getRGB(value);node.setAttribute(att,clr.hex);att=="stroke"&&clr[has]("opacity")&&$(node,{"stroke-opacity":clr.opacity>1?clr.opacity/100:clr.opacity});if(att=="stroke"&&o._.arrows){"startString" in o._.arrows&&addArrow(o,o._.arrows.startString);"endString" in o._.arrows&&addArrow(o,o._.arrows.endString,1)}break;case"gradient":(o.type=="circle"||o.type=="ellipse"||Str(value).charAt()!="r")&&addGradientFill(o,value);break;case"opacity":if(attrs.gradient&&!attrs[has]("stroke-opacity")){$(node,{"stroke-opacity":value>1?value/100:value})}case"fill-opacity":if(attrs.gradient){gradient=R._g.doc.getElementById(node.getAttribute("fill").replace(/^url\(#|\)$/g,E));if(gradient){stops=gradient.getElementsByTagName("stop");$(stops[stops.length-1],{"stop-opacity":value})}break}default:att=="font-size"&&(value=toInt(value,10)+"px");var cssrule=att.replace(/(\-.)/g,function(w){return w.substring(1).toUpperCase()});node.style[cssrule]=value;o._.dirty=1;node.setAttribute(att,value);break}}}tuneText(o,params);node.style.visibility=vis},leading=1.2,tuneText=function(el,params){if(el.type!="text"||!(params[has]("text")||params[has]("font")||params[has]("font-size")||params[has]("x")||params[has]("y"))){return }var a=el.attrs,node=el.node,fontSize=node.firstChild?toInt(R._g.doc.defaultView.getComputedStyle(node.firstChild,E).getPropertyValue("font-size"),10):10;if(params[has]("text")){a.text=params.text;while(node.firstChild){node.removeChild(node.firstChild)}var texts=Str(params.text).split("\n"),tspans=[],tspan;for(var i=0,ii=texts.length;i<ii;i++){tspan=$("tspan");i&&$(tspan,{dy:fontSize*leading,x:a.x});tspan.appendChild(R._g.doc.createTextNode(texts[i]));node.appendChild(tspan);tspans[i]=tspan}}else{tspans=node.getElementsByTagName("tspan");for(i=0,ii=tspans.length;i<ii;i++){if(i){$(tspans[i],{dy:fontSize*leading,x:a.x})}else{$(tspans[0],{dy:0})}}}$(node,{x:a.x,y:a.y});el._.dirty=1;var bb=el._getBBox(),dif=a.y-(bb.y+bb.height/2);dif&&R.is(dif,"finite")&&$(tspans[0],{dy:dif})},Element=function(node,svg){var X=0,Y=0;this[0]=this.node=node;node.raphael=true;this.id=R._oid++;node.raphaelid=this.id;this.matrix=R.matrix();this.realPath=null;this.paper=svg;this.attrs=this.attrs||{};this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1};!svg.bottom&&(svg.bottom=this);this.prev=svg.top;svg.top&&(svg.top.next=this);svg.top=this;this.next=null},elproto=R.el;Element.prototype=elproto;elproto.constructor=Element;R._engine.path=function(pathString,SVG){var el=$("path");SVG.canvas&&SVG.canvas.appendChild(el);var p=new Element(el,SVG);p.type="path";setFillAndStroke(p,{fill:"none",stroke:"#000",path:pathString});return p};elproto.rotate=function(deg,cx,cy){if(this.removed){return this}deg=Str(deg).split(separator);if(deg.length-1){cx=toFloat(deg[1]);cy=toFloat(deg[2])}deg=toFloat(deg[0]);(cy==null)&&(cx=cy);if(cx==null||cy==null){var bbox=this.getBBox(1);cx=bbox.x+bbox.width/2;cy=bbox.y+bbox.height/2}this.transform(this._.transform.concat([["r",deg,cx,cy]]));return this};elproto.scale=function(sx,sy,cx,cy){if(this.removed){return this}sx=Str(sx).split(separator);if(sx.length-1){sy=toFloat(sx[1]);cx=toFloat(sx[2]);cy=toFloat(sx[3])}sx=toFloat(sx[0]);(sy==null)&&(sy=sx);(cy==null)&&(cx=cy);if(cx==null||cy==null){var bbox=this.getBBox(1)}cx=cx==null?bbox.x+bbox.width/2:cx;cy=cy==null?bbox.y+bbox.height/2:cy;this.transform(this._.transform.concat([["s",sx,sy,cx,cy]]));return this};elproto.translate=function(dx,dy){if(this.removed){return this}dx=Str(dx).split(separator);if(dx.length-1){dy=toFloat(dx[1])}dx=toFloat(dx[0])||0;dy=+dy||0;this.transform(this._.transform.concat([["t",dx,dy]]));return this};elproto.transform=function(tstr){var _=this._;if(tstr==null){return _.transform}R._extractTransform(this,tstr);this.clip&&$(this.clip,{transform:this.matrix.invert()});this.pattern&&updatePosition(this);this.node&&$(this.node,{transform:this.matrix});if(_.sx!=1||_.sy!=1){var sw=this.attrs[has]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":sw})}return this};elproto.hide=function(){!this.removed&&this.paper.safari(this.node.style.display="none");return this};elproto.show=function(){!this.removed&&this.paper.safari(this.node.style.display="");return this};elproto.remove=function(){if(this.removed||!this.node.parentNode){return }var paper=this.paper;paper.__set__&&paper.__set__.exclude(this);eve.unbind("raphael.*.*."+this.id);if(this.gradient){paper.defs.removeChild(this.gradient)}R._tear(this,paper);if(this.node.parentNode.tagName.toLowerCase()=="a"){this.node.parentNode.parentNode.removeChild(this.node.parentNode)}else{this.node.parentNode.removeChild(this.node)}for(var i in this){this[i]=typeof this[i]=="function"?R._removedFactory(i):null}this.removed=true};elproto._getBBox=function(){if(this.node.style.display=="none"){this.show();var hide=true}var bbox={};try{bbox=this.node.getBBox()}catch(e){}finally{bbox=bbox||{}}hide&&this.hide();return bbox};elproto.attr=function(name,value){if(this.removed){return this}if(name==null){var res={};for(var a in this.attrs){if(this.attrs[has](a)){res[a]=this.attrs[a]}}res.gradient&&res.fill=="none"&&(res.fill=res.gradient)&&delete res.gradient;res.transform=this._.transform;return res}if(value==null&&R.is(name,"string")){if(name=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient){return this.attrs.gradient}if(name=="transform"){return this._.transform}var names=name.split(separator),out={};for(var i=0,ii=names.length;i<ii;i++){name=names[i];if(name in this.attrs){out[name]=this.attrs[name]}else{if(R.is(this.paper.customAttributes[name],"function")){out[name]=this.paper.customAttributes[name].def}else{out[name]=R._availableAttrs[name]}}}return ii-1?out:out[names[0]]}if(value==null&&R.is(name,"array")){out={};for(i=0,ii=name.length;i<ii;i++){out[name[i]]=this.attr(name[i])}return out}if(value!=null){var params={};params[name]=value}else{if(name!=null&&R.is(name,"object")){params=name}}for(var key in params){eve("raphael.attr."+key+"."+this.id,this,params[key])}for(key in this.paper.customAttributes){if(this.paper.customAttributes[has](key)&&params[has](key)&&R.is(this.paper.customAttributes[key],"function")){var par=this.paper.customAttributes[key].apply(this,[].concat(params[key]));this.attrs[key]=params[key];for(var subkey in par){if(par[has](subkey)){params[subkey]=par[subkey]}}}}setFillAndStroke(this,params);return this};elproto.toFront=function(){if(this.removed){return this}if(this.node.parentNode.tagName.toLowerCase()=="a"){this.node.parentNode.parentNode.appendChild(this.node.parentNode)}else{this.node.parentNode.appendChild(this.node)}var svg=this.paper;svg.top!=this&&R._tofront(this,svg);return this};elproto.toBack=function(){if(this.removed){return this}var parent=this.node.parentNode;if(parent.tagName.toLowerCase()=="a"){parent.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild)}else{if(parent.firstChild!=this.node){parent.insertBefore(this.node,this.node.parentNode.firstChild)}}R._toback(this,this.paper);var svg=this.paper;return this};elproto.insertAfter=function(element){if(this.removed){return this}var node=element.node||element[element.length-1].node;if(node.nextSibling){node.parentNode.insertBefore(this.node,node.nextSibling)}else{node.parentNode.appendChild(this.node)}R._insertafter(this,element,this.paper);return this};elproto.insertBefore=function(element){if(this.removed){return this}var node=element.node||element[0].node;node.parentNode.insertBefore(this.node,node);R._insertbefore(this,element,this.paper);return this};elproto.blur=function(size){var t=this;if(+size!==0){var fltr=$("filter"),blur=$("feGaussianBlur");t.attrs.blur=size;fltr.id=R.createUUID();$(blur,{stdDeviation:+size||1.5});fltr.appendChild(blur);t.paper.defs.appendChild(fltr);t._blur=fltr;$(t.node,{filter:"url(#"+fltr.id+")"})}else{if(t._blur){t._blur.parentNode.removeChild(t._blur);delete t._blur;delete t.attrs.blur}t.node.removeAttribute("filter")}};R._engine.circle=function(svg,x,y,r){var el=$("circle");svg.canvas&&svg.canvas.appendChild(el);var res=new Element(el,svg);res.attrs={cx:x,cy:y,r:r,fill:"none",stroke:"#000"};res.type="circle";$(el,res.attrs);return res};R._engine.rect=function(svg,x,y,w,h,r){var el=$("rect");svg.canvas&&svg.canvas.appendChild(el);var res=new Element(el,svg);res.attrs={x:x,y:y,width:w,height:h,r:r||0,rx:r||0,ry:r||0,fill:"none",stroke:"#000"};res.type="rect";$(el,res.attrs);return res};R._engine.ellipse=function(svg,x,y,rx,ry){var el=$("ellipse");svg.canvas&&svg.canvas.appendChild(el);var res=new Element(el,svg);res.attrs={cx:x,cy:y,rx:rx,ry:ry,fill:"none",stroke:"#000"};res.type="ellipse";$(el,res.attrs);return res};R._engine.image=function(svg,src,x,y,w,h){var el=$("image");$(el,{x:x,y:y,width:w,height:h,preserveAspectRatio:"none"});el.setAttributeNS(xlink,"href",src);svg.canvas&&svg.canvas.appendChild(el);var res=new Element(el,svg);res.attrs={x:x,y:y,width:w,height:h,src:src};res.type="image";return res};R._engine.text=function(svg,x,y,text){var el=$("text");svg.canvas&&svg.canvas.appendChild(el);var res=new Element(el,svg);res.attrs={x:x,y:y,"text-anchor":"middle",text:text,font:R._availableAttrs.font,stroke:"none",fill:"#000"};res.type="text";setFillAndStroke(res,res.attrs);return res};R._engine.setSize=function(width,height){this.width=width||this.width;this.height=height||this.height;this.canvas.setAttribute("width",this.width);this.canvas.setAttribute("height",this.height);if(this._viewBox){this.setViewBox.apply(this,this._viewBox)}return this};R._engine.create=function(){var con=R._getContainer.apply(0,arguments),container=con&&con.container,x=con.x,y=con.y,width=con.width,height=con.height;if(!container){throw new Error("SVG container not found.")}var cnvs=$("svg"),css="overflow:hidden;",isFloating;x=x||0;y=y||0;width=width||512;height=height||342;$(cnvs,{height:height,version:1.1,width:width,xmlns:"http://www.w3.org/2000/svg"});if(container==1){cnvs.style.cssText=css+"position:absolute;left:"+x+"px;top:"+y+"px";R._g.doc.body.appendChild(cnvs);isFloating=1}else{cnvs.style.cssText=css+"position:relative";if(container.firstChild){container.insertBefore(cnvs,container.firstChild)}else{container.appendChild(cnvs)}}container=new R._Paper;container.width=width;container.height=height;container.canvas=cnvs;container.clear();container._left=container._top=0;isFloating&&(container.renderfix=function(){});container.renderfix();return container};R._engine.setViewBox=function(x,y,w,h,fit){eve("raphael.setViewBox",this,this._viewBox,[x,y,w,h,fit]);var size=mmax(w/this.width,h/this.height),top=this.top,aspectRatio=fit?"meet":"xMinYMin",vb,sw;if(x==null){if(this._vbSize){size=1}delete this._vbSize;vb="0 0 "+this.width+S+this.height}else{this._vbSize=size;vb=x+S+y+S+w+S+h}$(this.canvas,{viewBox:vb,preserveAspectRatio:aspectRatio});while(size&&top){sw="stroke-width" in top.attrs?top.attrs["stroke-width"]:1;top.attr({"stroke-width":sw});top._.dirty=1;top._.dirtyT=1;top=top.prev}this._viewBox=[x,y,w,h,!!fit];return this};R.prototype.renderfix=function(){var cnvs=this.canvas,s=cnvs.style,pos;try{pos=cnvs.getScreenCTM()||cnvs.createSVGMatrix()}catch(e){pos=cnvs.createSVGMatrix()}var left=-pos.e%1,top=-pos.f%1;if(left||top){if(left){this._left=(this._left+left)%1;s.left=this._left+"px"}if(top){this._top=(this._top+top)%1;s.top=this._top+"px"}}};R.prototype.clear=function(){R.eve("raphael.clear",this);var c=this.canvas;while(c.firstChild){c.removeChild(c.firstChild)}this.bottom=this.top=null;(this.desc=$("desc")).appendChild(R._g.doc.createTextNode("Created with Rapha\xebl "+R.version));c.appendChild(this.desc);c.appendChild(this.defs=$("defs"))};R.prototype.remove=function(){eve("raphael.remove",this);this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var i in this){this[i]=typeof this[i]=="function"?R._removedFactory(i):null}};var setproto=R.st;for(var method in elproto){if(elproto[has](method)&&!setproto[has](method)){setproto[method]=(function(methodname){return function(){var arg=arguments;return this.forEach(function(el){el[methodname].apply(el,arg)})}})(method)}}}(window.Raphael);window.Raphael&&window.Raphael.vml&&function(R){var has="hasOwnProperty",Str=String,toFloat=parseFloat,math=Math,round=math.round,mmax=math.max,mmin=math.min,abs=math.abs,fillString="fill",separator=/[, ]+/,eve=R.eve,ms=" progid:DXImageTransform.Microsoft",S=" ",E="",map={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},bites=/([clmz]),?([^clmz]*)/gi,blurregexp=/ progid:\S+Blur\([^\)]+\)/g,val=/-?[^,\s-]+/g,cssDot="position:absolute;left:0;top:0;width:1px;height:1px",zoom=21600,pathTypes={path:1,rect:1,image:1},ovalTypes={circle:1,ellipse:1},path2vml=function(path){var total=/[ahqstv]/ig,command=R._pathToAbsolute;Str(path).match(total)&&(command=R._path2curve);total=/[clmz]/g;if(command==R._pathToAbsolute&&!Str(path).match(total)){var res=Str(path).replace(bites,function(all,command,args){var vals=[],isMove=command.toLowerCase()=="m",res=map[command];args.replace(val,function(value){if(isMove&&vals.length==2){res+=vals+map[command=="m"?"l":"L"];vals=[]}vals.push(round(value*zoom))});return res+vals});return res}var pa=command(path),p,r;res=[];for(var i=0,ii=pa.length;i<ii;i++){p=pa[i];r=pa[i][0].toLowerCase();r=="z"&&(r="x");for(var j=1,jj=p.length;j<jj;j++){r+=round(p[j]*zoom)+(j!=jj-1?",":E)}res.push(r)}return res.join(S)},compensation=function(deg,dx,dy){var m=R.matrix();m.rotate(-deg,0.5,0.5);return{dx:m.x(dx,dy),dy:m.y(dx,dy)}},setCoords=function(p,sx,sy,dx,dy,deg){var _=p._,m=p.matrix,fillpos=_.fillpos,o=p.node,s=o.style,y=1,flip="",dxdy,kx=zoom/sx,ky=zoom/sy;s.visibility="hidden";if(!sx||!sy){return }o.coordsize=abs(kx)+S+abs(ky);s.rotation=deg*(sx*sy<0?-1:1);if(deg){var c=compensation(deg,dx,dy);dx=c.dx;dy=c.dy}sx<0&&(flip+="x");sy<0&&(flip+=" y")&&(y=-1);s.flip=flip;o.coordorigin=(dx*-kx)+S+(dy*-ky);if(fillpos||_.fillsize){var fill=o.getElementsByTagName(fillString);fill=fill&&fill[0];o.removeChild(fill);if(fillpos){c=compensation(deg,m.x(fillpos[0],fillpos[1]),m.y(fillpos[0],fillpos[1]));fill.position=c.dx*y+S+c.dy*y}if(_.fillsize){fill.size=_.fillsize[0]*abs(sx)+S+_.fillsize[1]*abs(sy)}o.appendChild(fill)}s.visibility="visible"};R.toString=function(){return"Your browser doesn\u2019t support SVG. Falling down to VML.\nYou are running Rapha\xebl "+this.version};var addArrow=function(o,value,isEnd){var values=Str(value).toLowerCase().split("-"),se=isEnd?"end":"start",i=values.length,type="classic",w="medium",h="medium";while(i--){switch(values[i]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":type=values[i];break;case"wide":case"narrow":h=values[i];break;case"long":case"short":w=values[i];break}}var stroke=o.node.getElementsByTagName("stroke")[0];stroke[se+"arrow"]=type;stroke[se+"arrowlength"]=w;stroke[se+"arrowwidth"]=h},setFillAndStroke=function(o,params){o.attrs=o.attrs||{};var node=o.node,a=o.attrs,s=node.style,xy,newpath=pathTypes[o.type]&&(params.x!=a.x||params.y!=a.y||params.width!=a.width||params.height!=a.height||params.cx!=a.cx||params.cy!=a.cy||params.rx!=a.rx||params.ry!=a.ry||params.r!=a.r),isOval=ovalTypes[o.type]&&(a.cx!=params.cx||a.cy!=params.cy||a.r!=params.r||a.rx!=params.rx||a.ry!=params.ry),res=o;for(var par in params){if(params[has](par)){a[par]=params[par]}}if(newpath){a.path=R._getPath[o.type](o);o._.dirty=1}params.href&&(node.href=params.href);params.title&&(node.title=params.title);params.target&&(node.target=params.target);params.cursor&&(s.cursor=params.cursor);"blur" in params&&o.blur(params.blur);if(params.path&&o.type=="path"||newpath){node.path=path2vml(~Str(a.path).toLowerCase().indexOf("r")?R._pathToAbsolute(a.path):a.path);if(o.type=="image"){o._.fillpos=[a.x,a.y];o._.fillsize=[a.width,a.height];setCoords(o,1,1,0,0,0)}}"transform" in params&&o.transform(params.transform);if(isOval){var cx=+a.cx,cy=+a.cy,rx=+a.rx||+a.r||0,ry=+a.ry||+a.r||0;node.path=R.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",round((cx-rx)*zoom),round((cy-ry)*zoom),round((cx+rx)*zoom),round((cy+ry)*zoom),round(cx*zoom))}if("clip-rect" in params){var rect=Str(params["clip-rect"]).split(separator);if(rect.length==4){rect[2]=+rect[2]+(+rect[0]);rect[3]=+rect[3]+(+rect[1]);var div=node.clipRect||R._g.doc.createElement("div"),dstyle=div.style;dstyle.clip=R.format("rect({1}px {2}px {3}px {0}px)",rect);if(!node.clipRect){dstyle.position="absolute";dstyle.top=0;dstyle.left=0;dstyle.width=o.paper.width+"px";dstyle.height=o.paper.height+"px";node.parentNode.insertBefore(div,node);div.appendChild(node);node.clipRect=div}}if(!params["clip-rect"]){node.clipRect&&(node.clipRect.style.clip="auto")}}if(o.textpath){var textpathStyle=o.textpath.style;params.font&&(textpathStyle.font=params.font);params["font-family"]&&(textpathStyle.fontFamily='"'+params["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,E)+'"');params["font-size"]&&(textpathStyle.fontSize=params["font-size"]);params["font-weight"]&&(textpathStyle.fontWeight=params["font-weight"]);params["font-style"]&&(textpathStyle.fontStyle=params["font-style"])}if("arrow-start" in params){addArrow(res,params["arrow-start"])}if("arrow-end" in params){addArrow(res,params["arrow-end"],1)}if(params.opacity!=null||params["stroke-width"]!=null||params.fill!=null||params.src!=null||params.stroke!=null||params["stroke-width"]!=null||params["stroke-opacity"]!=null||params["fill-opacity"]!=null||params["stroke-dasharray"]!=null||params["stroke-miterlimit"]!=null||params["stroke-linejoin"]!=null||params["stroke-linecap"]!=null){var fill=node.getElementsByTagName(fillString),newfill=false;fill=fill&&fill[0];!fill&&(newfill=fill=createNode(fillString));if(o.type=="image"&&params.src){fill.src=params.src}params.fill&&(fill.on=true);if(fill.on==null||params.fill=="none"||params.fill===null){fill.on=false}if(fill.on&&params.fill){var isURL=Str(params.fill).match(R._ISURL);if(isURL){fill.parentNode==node&&node.removeChild(fill);fill.rotate=true;fill.src=isURL[1];fill.type="tile";var bbox=o.getBBox(1);fill.position=bbox.x+S+bbox.y;o._.fillpos=[bbox.x,bbox.y];R._preload(isURL[1],function(){o._.fillsize=[this.offsetWidth,this.offsetHeight]})}else{fill.color=R.getRGB(params.fill).hex;fill.src=E;fill.type="solid";if(R.getRGB(params.fill).error&&(res.type in {circle:1,ellipse:1}||Str(params.fill).charAt()!="r")&&addGradientFill(res,params.fill,fill)){a.fill="none";a.gradient=params.fill;fill.rotate=false}}}if("fill-opacity" in params||"opacity" in params){var opacity=((+a["fill-opacity"]+1||2)-1)*((+a.opacity+1||2)-1)*((+R.getRGB(params.fill).o+1||2)-1);opacity=mmin(mmax(opacity,0),1);fill.opacity=opacity;if(fill.src){fill.color="none"}}node.appendChild(fill);var stroke=(node.getElementsByTagName("stroke")&&node.getElementsByTagName("stroke")[0]),newstroke=false;!stroke&&(newstroke=stroke=createNode("stroke"));if((params.stroke&&params.stroke!="none")||params["stroke-width"]||params["stroke-opacity"]!=null||params["stroke-dasharray"]||params["stroke-miterlimit"]||params["stroke-linejoin"]||params["stroke-linecap"]){stroke.on=true}(params.stroke=="none"||params.stroke===null||stroke.on==null||params.stroke==0||params["stroke-width"]==0)&&(stroke.on=false);var strokeColor=R.getRGB(params.stroke);stroke.on&&params.stroke&&(stroke.color=strokeColor.hex);opacity=((+a["stroke-opacity"]+1||2)-1)*((+a.opacity+1||2)-1)*((+strokeColor.o+1||2)-1);var width=(toFloat(params["stroke-width"])||1)*0.75;opacity=mmin(mmax(opacity,0),1);params["stroke-width"]==null&&(width=a["stroke-width"]);params["stroke-width"]&&(stroke.weight=width);width&&width<1&&(opacity*=width)&&(stroke.weight=1);stroke.opacity=opacity;params["stroke-linejoin"]&&(stroke.joinstyle=params["stroke-linejoin"]||"miter");stroke.miterlimit=params["stroke-miterlimit"]||8;params["stroke-linecap"]&&(stroke.endcap=params["stroke-linecap"]=="butt"?"flat":params["stroke-linecap"]=="square"?"square":"round");if(params["stroke-dasharray"]){var dasharray={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};stroke.dashstyle=dasharray[has](params["stroke-dasharray"])?dasharray[params["stroke-dasharray"]]:E}newstroke&&node.appendChild(stroke)}if(res.type=="text"){res.paper.canvas.style.display=E;var span=res.paper.span,m=100,fontSize=a.font&&a.font.match(/\d+(?:\.\d*)?(?=px)/);s=span.style;a.font&&(s.font=a.font);a["font-family"]&&(s.fontFamily=a["font-family"]);a["font-weight"]&&(s.fontWeight=a["font-weight"]);a["font-style"]&&(s.fontStyle=a["font-style"]);fontSize=toFloat(a["font-size"]||fontSize&&fontSize[0])||10;s.fontSize=fontSize*m+"px";res.textpath.string&&(span.innerHTML=Str(res.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var brect=span.getBoundingClientRect();res.W=a.w=(brect.right-brect.left)/m;res.H=a.h=(brect.bottom-brect.top)/m;res.X=a.x;res.Y=a.y+res.H/2;("x" in params||"y" in params)&&(res.path.v=R.format("m{0},{1}l{2},{1}",round(a.x*zoom),round(a.y*zoom),round(a.x*zoom)+1));var dirtyattrs=["x","y","text","font","font-family","font-weight","font-style","font-size"];for(var d=0,dd=dirtyattrs.length;d<dd;d++){if(dirtyattrs[d] in params){res._.dirty=1;break}}switch(a["text-anchor"]){case"start":res.textpath.style["v-text-align"]="left";res.bbx=res.W/2;break;case"end":res.textpath.style["v-text-align"]="right";res.bbx=-res.W/2;break;default:res.textpath.style["v-text-align"]="center";res.bbx=0;break}res.textpath.style["v-text-kern"]=true}},addGradientFill=function(o,gradient,fill){o.attrs=o.attrs||{};var attrs=o.attrs,pow=Math.pow,opacity,oindex,type="linear",fxfy=".5 .5";o.attrs.gradient=gradient;gradient=Str(gradient).replace(R._radial_gradient,function(all,fx,fy){type="radial";if(fx&&fy){fx=toFloat(fx);fy=toFloat(fy);pow(fx-0.5,2)+pow(fy-0.5,2)>0.25&&(fy=math.sqrt(0.25-pow(fx-0.5,2))*((fy>0.5)*2-1)+0.5);fxfy=fx+S+fy}return E});gradient=gradient.split(/\s*\-\s*/);if(type=="linear"){var angle=gradient.shift();angle=-toFloat(angle);if(isNaN(angle)){return null}}var dots=R._parseDots(gradient);if(!dots){return null}o=o.shape||o.node;if(dots.length){o.removeChild(fill);fill.on=true;fill.method="none";fill.color=dots[0].color;fill.color2=dots[dots.length-1].color;var clrs=[];for(var i=0,ii=dots.length;i<ii;i++){dots[i].offset&&clrs.push(dots[i].offset+S+dots[i].color)}fill.colors=clrs.length?clrs.join():"0% "+fill.color;if(type=="radial"){fill.type="gradientTitle";fill.focus="100%";fill.focussize="0 0";fill.focusposition=fxfy;fill.angle=0}else{fill.type="gradient";fill.angle=(270-angle)%360}o.appendChild(fill)}return 1},Element=function(node,vml){this[0]=this.node=node;node.raphael=true;this.id=R._oid++;node.raphaelid=this.id;this.X=0;this.Y=0;this.attrs={};this.paper=vml;this.matrix=R.matrix();this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1};!vml.bottom&&(vml.bottom=this);this.prev=vml.top;vml.top&&(vml.top.next=this);vml.top=this;this.next=null};var elproto=R.el;Element.prototype=elproto;elproto.constructor=Element;elproto.transform=function(tstr){if(tstr==null){return this._.transform}var vbs=this.paper._viewBoxShift,vbt=vbs?"s"+[vbs.scale,vbs.scale]+"-1-1t"+[vbs.dx,vbs.dy]:E,oldt;if(vbs){oldt=tstr=Str(tstr).replace(/\.{3}|\u2026/g,this._.transform||E)}R._extractTransform(this,vbt+tstr);var matrix=this.matrix.clone(),skew=this.skew,o=this.node,split,isGrad=~Str(this.attrs.fill).indexOf("-"),isPatt=!Str(this.attrs.fill).indexOf("url(");matrix.translate(-0.5,-0.5);if(isPatt||isGrad||this.type=="image"){skew.matrix="1 0 0 1";skew.offset="0 0";split=matrix.split();if((isGrad&&split.noRotation)||!split.isSimple){o.style.filter=matrix.toFilter();var bb=this.getBBox(),bbt=this.getBBox(1),dx=bb.x-bbt.x,dy=bb.y-bbt.y;o.coordorigin=(dx*-zoom)+S+(dy*-zoom);setCoords(this,1,1,dx,dy,0)}else{o.style.filter=E;setCoords(this,split.scalex,split.scaley,split.dx,split.dy,split.rotate)}}else{o.style.filter=E;skew.matrix=Str(matrix);skew.offset=matrix.offset()}oldt&&(this._.transform=oldt);return this};elproto.rotate=function(deg,cx,cy){if(this.removed){return this}if(deg==null){return }deg=Str(deg).split(separator);if(deg.length-1){cx=toFloat(deg[1]);cy=toFloat(deg[2])}deg=toFloat(deg[0]);(cy==null)&&(cx=cy);if(cx==null||cy==null){var bbox=this.getBBox(1);cx=bbox.x+bbox.width/2;cy=bbox.y+bbox.height/2}this._.dirtyT=1;this.transform(this._.transform.concat([["r",deg,cx,cy]]));return this};elproto.translate=function(dx,dy){if(this.removed){return this}dx=Str(dx).split(separator);if(dx.length-1){dy=toFloat(dx[1])}dx=toFloat(dx[0])||0;dy=+dy||0;if(this._.bbox){this._.bbox.x+=dx;this._.bbox.y+=dy}this.transform(this._.transform.concat([["t",dx,dy]]));return this};elproto.scale=function(sx,sy,cx,cy){if(this.removed){return this}sx=Str(sx).split(separator);if(sx.length-1){sy=toFloat(sx[1]);cx=toFloat(sx[2]);cy=toFloat(sx[3]);isNaN(cx)&&(cx=null);isNaN(cy)&&(cy=null)}sx=toFloat(sx[0]);(sy==null)&&(sy=sx);(cy==null)&&(cx=cy);if(cx==null||cy==null){var bbox=this.getBBox(1)}cx=cx==null?bbox.x+bbox.width/2:cx;cy=cy==null?bbox.y+bbox.height/2:cy;this.transform(this._.transform.concat([["s",sx,sy,cx,cy]]));this._.dirtyT=1;return this};elproto.hide=function(){!this.removed&&(this.node.style.display="none");return this};elproto.show=function(){!this.removed&&(this.node.style.display=E);return this};elproto._getBBox=function(){if(this.removed){return{}}return{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}};elproto.remove=function(){if(this.removed||!this.node.parentNode){return }this.paper.__set__&&this.paper.__set__.exclude(this);R.eve.unbind("raphael.*.*."+this.id);R._tear(this,this.paper);this.node.parentNode.removeChild(this.node);this.shape&&this.shape.parentNode.removeChild(this.shape);for(var i in this){this[i]=typeof this[i]=="function"?R._removedFactory(i):null}this.removed=true};elproto.attr=function(name,value){if(this.removed){return this}if(name==null){var res={};for(var a in this.attrs){if(this.attrs[has](a)){res[a]=this.attrs[a]}}res.gradient&&res.fill=="none"&&(res.fill=res.gradient)&&delete res.gradient;res.transform=this._.transform;return res}if(value==null&&R.is(name,"string")){if(name==fillString&&this.attrs.fill=="none"&&this.attrs.gradient){return this.attrs.gradient}var names=name.split(separator),out={};for(var i=0,ii=names.length;i<ii;i++){name=names[i];if(name in this.attrs){out[name]=this.attrs[name]}else{if(R.is(this.paper.customAttributes[name],"function")){out[name]=this.paper.customAttributes[name].def}else{out[name]=R._availableAttrs[name]}}}return ii-1?out:out[names[0]]}if(this.attrs&&value==null&&R.is(name,"array")){out={};for(i=0,ii=name.length;i<ii;i++){out[name[i]]=this.attr(name[i])}return out}var params;if(value!=null){params={};params[name]=value}value==null&&R.is(name,"object")&&(params=name);for(var key in params){eve("raphael.attr."+key+"."+this.id,this,params[key])}if(params){for(key in this.paper.customAttributes){if(this.paper.customAttributes[has](key)&&params[has](key)&&R.is(this.paper.customAttributes[key],"function")){var par=this.paper.customAttributes[key].apply(this,[].concat(params[key]));this.attrs[key]=params[key];for(var subkey in par){if(par[has](subkey)){params[subkey]=par[subkey]}}}}if(params.text&&this.type=="text"){this.textpath.string=params.text}setFillAndStroke(this,params)}return this};elproto.toFront=function(){!this.removed&&this.node.parentNode.appendChild(this.node);this.paper&&this.paper.top!=this&&R._tofront(this,this.paper);return this};elproto.toBack=function(){if(this.removed){return this}if(this.node.parentNode.firstChild!=this.node){this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild);R._toback(this,this.paper)}return this};elproto.insertAfter=function(element){if(this.removed){return this}if(element.constructor==R.st.constructor){element=element[element.length-1]}if(element.node.nextSibling){element.node.parentNode.insertBefore(this.node,element.node.nextSibling)}else{element.node.parentNode.appendChild(this.node)}R._insertafter(this,element,this.paper);return this};elproto.insertBefore=function(element){if(this.removed){return this}if(element.constructor==R.st.constructor){element=element[0]}element.node.parentNode.insertBefore(this.node,element.node);R._insertbefore(this,element,this.paper);return this};elproto.blur=function(size){var s=this.node.runtimeStyle,f=s.filter;f=f.replace(blurregexp,E);if(+size!==0){this.attrs.blur=size;s.filter=f+S+ms+".Blur(pixelradius="+(+size||1.5)+")";s.margin=R.format("-{0}px 0 0 -{0}px",round(+size||1.5))}else{s.filter=f;s.margin=0;delete this.attrs.blur}};R._engine.path=function(pathString,vml){var el=createNode("shape");el.style.cssText=cssDot;el.coordsize=zoom+S+zoom;el.coordorigin=vml.coordorigin;var p=new Element(el,vml),attr={fill:"none",stroke:"#000"};pathString&&(attr.path=pathString);p.type="path";p.path=[];p.Path=E;setFillAndStroke(p,attr);vml.canvas.appendChild(el);var skew=createNode("skew");skew.on=true;el.appendChild(skew);p.skew=skew;p.transform(E);return p};R._engine.rect=function(vml,x,y,w,h,r){var path=R._rectPath(x,y,w,h,r),res=vml.path(path),a=res.attrs;res.X=a.x=x;res.Y=a.y=y;res.W=a.width=w;res.H=a.height=h;a.r=r;a.path=path;res.type="rect";return res};R._engine.ellipse=function(vml,x,y,rx,ry){var res=vml.path(),a=res.attrs;res.X=x-rx;res.Y=y-ry;res.W=rx*2;res.H=ry*2;res.type="ellipse";setFillAndStroke(res,{cx:x,cy:y,rx:rx,ry:ry});return res};R._engine.circle=function(vml,x,y,r){var res=vml.path(),a=res.attrs;res.X=x-r;res.Y=y-r;res.W=res.H=r*2;res.type="circle";setFillAndStroke(res,{cx:x,cy:y,r:r});return res};R._engine.image=function(vml,src,x,y,w,h){var path=R._rectPath(x,y,w,h),res=vml.path(path).attr({stroke:"none"}),a=res.attrs,node=res.node,fill=node.getElementsByTagName(fillString)[0];a.src=src;res.X=a.x=x;res.Y=a.y=y;res.W=a.width=w;res.H=a.height=h;a.path=path;res.type="image";fill.parentNode==node&&node.removeChild(fill);fill.rotate=true;fill.src=src;fill.type="tile";res._.fillpos=[x,y];res._.fillsize=[w,h];node.appendChild(fill);setCoords(res,1,1,0,0,0);return res};R._engine.text=function(vml,x,y,text){var el=createNode("shape"),path=createNode("path"),o=createNode("textpath");x=x||0;y=y||0;text=text||"";path.v=R.format("m{0},{1}l{2},{1}",round(x*zoom),round(y*zoom),round(x*zoom)+1);path.textpathok=true;o.string=Str(text);o.on=true;el.style.cssText=cssDot;el.coordsize=zoom+S+zoom;el.coordorigin="0 0";var p=new Element(el,vml),attr={fill:"#000",stroke:"none",font:R._availableAttrs.font,text:text};p.shape=el;p.path=path;p.textpath=o;p.type="text";p.attrs.text=Str(text);p.attrs.x=x;p.attrs.y=y;p.attrs.w=1;p.attrs.h=1;setFillAndStroke(p,attr);el.appendChild(o);el.appendChild(path);vml.canvas.appendChild(el);var skew=createNode("skew");skew.on=true;el.appendChild(skew);p.skew=skew;p.transform(E);return p};R._engine.setSize=function(width,height){var cs=this.canvas.style;this.width=width;this.height=height;width==+width&&(width+="px");height==+height&&(height+="px");cs.width=width;cs.height=height;cs.clip="rect(0 "+width+" "+height+" 0)";if(this._viewBox){R._engine.setViewBox.apply(this,this._viewBox)}return this};R._engine.setViewBox=function(x,y,w,h,fit){R.eve("raphael.setViewBox",this,this._viewBox,[x,y,w,h,fit]);var width=this.width,height=this.height,size=1/mmax(w/width,h/height),H,W;if(fit){H=height/h;W=width/w;if(w*H<width){x-=(width-w*H)/2/H}if(h*W<height){y-=(height-h*W)/2/W}}this._viewBox=[x,y,w,h,!!fit];this._viewBoxShift={dx:-x,dy:-y,scale:size};this.forEach(function(el){el.transform("...")});return this};var createNode;R._engine.initWin=function(win){var doc=win.document;doc.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!doc.namespaces.rvml&&doc.namespaces.add("rvml","urn:schemas-microsoft-com:vml");createNode=function(tagName){return doc.createElement("<rvml:"+tagName+' class="rvml">')}}catch(e){createNode=function(tagName){return doc.createElement("<"+tagName+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}};R._engine.initWin(R._g.win);R._engine.create=function(){var con=R._getContainer.apply(0,arguments),container=con.container,height=con.height,s,width=con.width,x=con.x,y=con.y;if(!container){throw new Error("VML container not found.")}var res=new R._Paper,c=res.canvas=R._g.doc.createElement("div"),cs=c.style;x=x||0;y=y||0;width=width||512;height=height||342;res.width=width;res.height=height;width==+width&&(width+="px");height==+height&&(height+="px");res.coordsize=zoom*1000+S+zoom*1000;res.coordorigin="0 0";res.span=R._g.doc.createElement("span");res.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;";c.appendChild(res.span);cs.cssText=R.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",width,height);if(container==1){R._g.doc.body.appendChild(c);cs.left=x+"px";cs.top=y+"px";cs.position="absolute"}else{if(container.firstChild){container.insertBefore(c,container.firstChild)}else{container.appendChild(c)}}res.renderfix=function(){};return res};R.prototype.clear=function(){R.eve("raphael.clear",this);this.canvas.innerHTML=E;this.span=R._g.doc.createElement("span");this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";this.canvas.appendChild(this.span);this.bottom=this.top=null};R.prototype.remove=function(){R.eve("raphael.remove",this);this.canvas.parentNode.removeChild(this.canvas);for(var i in this){this[i]=typeof this[i]=="function"?R._removedFactory(i):null}return true};var setproto=R.st;for(var method in elproto){if(elproto[has](method)&&!setproto[has](method)){setproto[method]=(function(methodname){return function(){var arg=arguments;return this.forEach(function(el){el[methodname].apply(el,arg)})}})(method)}}}(window.Raphael);function R(first){if(R.is(first,"function")){return loaded?first():eve.on("raphael.DOMload",first)}else{if(R.is(first,array)){return R._engine.create[apply](R,first.splice(0,3+R.is(first[0],nu))).add(first)}else{var args=Array.prototype.slice.call(arguments,0);if(R.is(args[args.length-1],"function")){var f=args.pop();return loaded?f.call(R._engine.create[apply](R,args)):eve.on("raphael.DOMload",function(){f.call(R._engine.create[apply](R,args))})}else{return R._engine.create[apply](R,arguments)}}}}R.version="2.1.0";R.eve=eve;var loaded,separator=/[, ]+/,elements={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},formatrg=/\{(\d+)\}/g,proto="prototype",has="hasOwnProperty",g={doc:document,win:window},oldRaphael={was:Object.prototype[has].call(g.win,"Raphael"),is:g.win.Raphael},Paper=function(){this.ca=this.customAttributes={}},paperproto,appendChild="appendChild",apply="apply",concat="concat",supportsTouch="createTouch" in g.doc,E="",S=" ",Str=String,split="split",events="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[split](S),touchMap={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},lowerCase=Str.prototype.toLowerCase,math=Math,mmax=math.max,mmin=math.min,abs=math.abs,pow=math.pow,PI=math.PI,nu="number",string="string",array="array",toString="toString",fillString="fill",objectToString=Object.prototype.toString,paper={},push="push",ISURL=R._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i,colourRegExp=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,isnan={"NaN":1,"Infinity":1,"-Infinity":1},bezierrg=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,round=math.round,setAttribute="setAttribute",toFloat=parseFloat,toInt=parseInt,upperCase=Str.prototype.toUpperCase,availableAttrs=R._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},availableAnimAttrs=R._availableAnimAttrs={blur:nu,"clip-rect":"csv",cx:nu,cy:nu,fill:"colour","fill-opacity":nu,"font-size":nu,height:nu,opacity:nu,path:"path",r:nu,rx:nu,ry:nu,stroke:"colour","stroke-opacity":nu,"stroke-width":nu,transform:"transform",width:nu,x:nu,y:nu},whitespace=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]/g,commaSpaces=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,hsrg={hs:1,rg:1},p2s=/,?([achlmqrstvxz]),?/gi,pathCommand=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/ig,tCommand=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/ig,pathValues=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/ig,radial_gradient=R._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,eldata={},sortByKey=function(a,b){return a.key-b.key},sortByNumber=function(a,b){return toFloat(a)-toFloat(b)},fun=function(){},pipe=function(x){return x},rectPath=R._rectPath=function(x,y,w,h,r){if(r){return[["M",x+r,y],["l",w-r*2,0],["a",r,r,0,0,1,r,r],["l",0,h-r*2],["a",r,r,0,0,1,-r,r],["l",r*2-w,0],["a",r,r,0,0,1,-r,-r],["l",0,r*2-h],["a",r,r,0,0,1,r,-r],["z"]]}return[["M",x,y],["l",w,0],["l",0,h],["l",-w,0],["z"]]},ellipsePath=function(x,y,rx,ry){if(ry==null){ry=rx}return[["M",x,y],["m",0,-ry],["a",rx,ry,0,1,1,0,2*ry],["a",rx,ry,0,1,1,0,-2*ry],["z"]]},getPath=R._getPath={path:function(el){return el.attr("path")},circle:function(el){var a=el.attrs;return ellipsePath(a.cx,a.cy,a.r)},ellipse:function(el){var a=el.attrs;return ellipsePath(a.cx,a.cy,a.rx,a.ry)},rect:function(el){var a=el.attrs;return rectPath(a.x,a.y,a.width,a.height,a.r)},image:function(el){var a=el.attrs;return rectPath(a.x,a.y,a.width,a.height)},text:function(el){var bbox=el._getBBox();return rectPath(bbox.x,bbox.y,bbox.width,bbox.height)}},mapPath=R.mapPath=function(path,matrix){if(!matrix){return path}var x,y,i,j,ii,jj,pathi;path=path2curve(path);for(i=0,ii=path.length;i<ii;i++){pathi=path[i];for(j=1,jj=pathi.length;j<jj;j+=2){x=matrix.x(pathi[j],pathi[j+1]);y=matrix.y(pathi[j],pathi[j+1]);pathi[j]=x;pathi[j+1]=y}}return path};R._g=g;R.type=(g.win.SVGAngle||g.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML");if(R.type=="VML"){var d=g.doc.createElement("div"),b;d.innerHTML='<v:shape adj="1"/>';b=d.firstChild;b.style.behavior="url(#default#VML)";if(!(b&&typeof b.adj=="object")){return(R.type=E)}d=null}R.svg=!(R.vml=R.type=="VML");R._Paper=Paper;R.fn=paperproto=Paper.prototype=R.prototype;R._id=0;R._oid=0;R.is=function(o,type){type=lowerCase.call(type);if(type=="finite"){return !isnan[has](+o)}if(type=="array"){return o instanceof Array}return(type=="null"&&o===null)||(type==typeof o&&o!==null)||(type=="object"&&o===Object(o))||(type=="array"&&Array.isArray&&Array.isArray(o))||objectToString.call(o).slice(8,-1).toLowerCase()==type};function clone(obj){if(Object(obj)!==obj){return obj}var res=new obj.constructor;for(var key in obj){if(obj[has](key)){res[key]=clone(obj[key])}}return res}R.angle=function(x1,y1,x2,y2,x3,y3){if(x3==null){var x=x1-x2,y=y1-y2;if(!x&&!y){return 0}return(180+math.atan2(-y,-x)*180/PI+360)%360}else{return R.angle(x1,y1,x3,y3)-R.angle(x2,y2,x3,y3)}};R.rad=function(deg){return deg%360*PI/180};R.deg=function(rad){return rad*180/PI%360};R.snapTo=function(values,value,tolerance){tolerance=R.is(tolerance,"finite")?tolerance:10;if(R.is(values,array)){var i=values.length;while(i--){if(abs(values[i]-value)<=tolerance){return values[i]}}}else{values=+values;var rem=value%values;if(rem<tolerance){return value-rem}if(rem>values-tolerance){return value-rem+values}}return value};var createUUID=R.createUUID=(function(uuidRegEx,uuidReplacer){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(uuidRegEx,uuidReplacer).toUpperCase()}})(/[xy]/g,function(c){var r=math.random()*16|0,v=c=="x"?r:(r&3|8);return v.toString(16)});R.setWindow=function(newwin){eve("raphael.setWindow",R,g.win,newwin);g.win=newwin;g.doc=g.win.document;if(R._engine.initWin){R._engine.initWin(g.win)}};var toHex=function(color){if(R.vml){var trim=/^\s+|\s+$/g;var bod;try{var docum=new ActiveXObject("htmlfile");docum.write("<body>");docum.close();bod=docum.body}catch(e){bod=createPopup().document.body}var range=bod.createTextRange();toHex=cacher(function(color){try{bod.style.color=Str(color).replace(trim,E);var value=range.queryCommandValue("ForeColor");value=((value&255)<<16)|(value&65280)|((value&16711680)>>>16);return"#"+("000000"+value.toString(16)).slice(-6)}catch(e){return"none"}})}else{var i=g.doc.createElement("i");i.title="Rapha\xebl Colour Picker";i.style.display="none";g.doc.body.appendChild(i);toHex=cacher(function(color){i.style.color=color;return g.doc.defaultView.getComputedStyle(i,E).getPropertyValue("color")})}return toHex(color)},hsbtoString=function(){return"hsb("+[this.h,this.s,this.b]+")"},hsltoString=function(){return"hsl("+[this.h,this.s,this.l]+")"},rgbtoString=function(){return this.hex},prepareRGB=function(r,g,b){if(g==null&&R.is(r,"object")&&"r" in r&&"g" in r&&"b" in r){b=r.b;g=r.g;r=r.r}if(g==null&&R.is(r,string)){var clr=R.getRGB(r);r=clr.r;g=clr.g;b=clr.b}if(r>1||g>1||b>1){r/=255;g/=255;b/=255}return[r,g,b]},packageRGB=function(r,g,b,o){r*=255;g*=255;b*=255;var rgb={r:r,g:g,b:b,hex:R.rgb(r,g,b),toString:rgbtoString};R.is(o,"finite")&&(rgb.opacity=o);return rgb};R.color=function(clr){var rgb;if(R.is(clr,"object")&&"h" in clr&&"s" in clr&&"b" in clr){rgb=R.hsb2rgb(clr);clr.r=rgb.r;clr.g=rgb.g;clr.b=rgb.b;clr.hex=rgb.hex}else{if(R.is(clr,"object")&&"h" in clr&&"s" in clr&&"l" in clr){rgb=R.hsl2rgb(clr);clr.r=rgb.r;clr.g=rgb.g;clr.b=rgb.b;clr.hex=rgb.hex}else{if(R.is(clr,"string")){clr=R.getRGB(clr)}if(R.is(clr,"object")&&"r" in clr&&"g" in clr&&"b" in clr){rgb=R.rgb2hsl(clr);clr.h=rgb.h;clr.s=rgb.s;clr.l=rgb.l;rgb=R.rgb2hsb(clr);clr.v=rgb.b}else{clr={hex:"none"};clr.r=clr.g=clr.b=clr.h=clr.s=clr.v=clr.l=-1}}}clr.toString=rgbtoString;return clr};R.hsb2rgb=function(h,s,v,o){if(this.is(h,"object")&&"h" in h&&"s" in h&&"b" in h){v=h.b;s=h.s;h=h.h;o=h.o}h*=360;var R,G,B,X,C;h=(h%360)/60;C=v*s;X=C*(1-abs(h%2-1));R=G=B=v-C;h=~~h;R+=[C,X,0,0,X,C][h];G+=[X,C,C,X,0,0][h];B+=[0,0,X,C,C,X][h];return packageRGB(R,G,B,o)};R.hsl2rgb=function(h,s,l,o){if(this.is(h,"object")&&"h" in h&&"s" in h&&"l" in h){l=h.l;s=h.s;h=h.h}if(h>1||s>1||l>1){h/=360;s/=100;l/=100}h*=360;var R,G,B,X,C;h=(h%360)/60;C=2*s*(l<0.5?l:1-l);X=C*(1-abs(h%2-1));R=G=B=l-C/2;h=~~h;R+=[C,X,0,0,X,C][h];G+=[X,C,C,X,0,0][h];B+=[0,0,X,C,C,X][h];return packageRGB(R,G,B,o)};R.rgb2hsb=function(r,g,b){b=prepareRGB(r,g,b);r=b[0];g=b[1];b=b[2];var H,S,V,C;V=mmax(r,g,b);C=V-mmin(r,g,b);H=(C==0?null:V==r?(g-b)/C:V==g?(b-r)/C+2:(r-g)/C+4);H=((H+360)%6)*60/360;S=C==0?0:C/V;return{h:H,s:S,b:V,toString:hsbtoString}};R.rgb2hsl=function(r,g,b){b=prepareRGB(r,g,b);r=b[0];g=b[1];b=b[2];var H,S,L,M,m,C;M=mmax(r,g,b);m=mmin(r,g,b);C=M-m;H=(C==0?null:M==r?(g-b)/C:M==g?(b-r)/C+2:(r-g)/C+4);H=((H+360)%6)*60/360;L=(M+m)/2;S=(C==0?0:L<0.5?C/(2*L):C/(2-2*L));return{h:H,s:S,l:L,toString:hsltoString}};R._path2string=function(){return this.join(",").replace(p2s,"$1")};function repush(array,item){for(var i=0,ii=array.length;i<ii;i++){if(array[i]===item){return array.push(array.splice(i,1)[0])}}}function cacher(f,scope,postprocessor){function newf(){var arg=Array.prototype.slice.call(arguments,0),args=arg.join("\u2400"),cache=newf.cache=newf.cache||{},count=newf.count=newf.count||[];if(cache[has](args)){repush(count,args);return postprocessor?postprocessor(cache[args]):cache[args]}count.length>=1000&&delete cache[count.shift()];count.push(args);cache[args]=f[apply](scope,arg);return postprocessor?postprocessor(cache[args]):cache[args]}return newf}var preload=R._preload=function(src,f){var img=g.doc.createElement("img");img.style.cssText="position:absolute;left:-9999em;top:-9999em";img.onload=function(){f.call(this);this.onload=null;g.doc.body.removeChild(this)};img.onerror=function(){g.doc.body.removeChild(this)};g.doc.body.appendChild(img);img.src=src};function clrToString(){return this.hex}R.getRGB=cacher(function(colour){if(!colour||!!((colour=Str(colour)).indexOf("-")+1)){return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:clrToString}}if(colour=="none"){return{r:-1,g:-1,b:-1,hex:"none",toString:clrToString}}!(hsrg[has](colour.toLowerCase().substring(0,2))||colour.charAt()=="#")&&(colour=toHex(colour));var res,red,green,blue,opacity,t,values,rgb=colour.match(colourRegExp);if(rgb){if(rgb[2]){blue=toInt(rgb[2].substring(5),16);green=toInt(rgb[2].substring(3,5),16);red=toInt(rgb[2].substring(1,3),16)}if(rgb[3]){blue=toInt((t=rgb[3].charAt(3))+t,16);green=toInt((t=rgb[3].charAt(2))+t,16);red=toInt((t=rgb[3].charAt(1))+t,16)}if(rgb[4]){values=rgb[4][split](commaSpaces);red=toFloat(values[0]);values[0].slice(-1)=="%"&&(red*=2.55);green=toFloat(values[1]);values[1].slice(-1)=="%"&&(green*=2.55);blue=toFloat(values[2]);values[2].slice(-1)=="%"&&(blue*=2.55);rgb[1].toLowerCase().slice(0,4)=="rgba"&&(opacity=toFloat(values[3]));values[3]&&values[3].slice(-1)=="%"&&(opacity/=100)}if(rgb[5]){values=rgb[5][split](commaSpaces);red=toFloat(values[0]);values[0].slice(-1)=="%"&&(red*=2.55);green=toFloat(values[1]);values[1].slice(-1)=="%"&&(green*=2.55);blue=toFloat(values[2]);values[2].slice(-1)=="%"&&(blue*=2.55);(values[0].slice(-3)=="deg"||values[0].slice(-1)=="\xb0")&&(red/=360);rgb[1].toLowerCase().slice(0,4)=="hsba"&&(opacity=toFloat(values[3]));values[3]&&values[3].slice(-1)=="%"&&(opacity/=100);return R.hsb2rgb(red,green,blue,opacity)}if(rgb[6]){values=rgb[6][split](commaSpaces);red=toFloat(values[0]);values[0].slice(-1)=="%"&&(red*=2.55);green=toFloat(values[1]);values[1].slice(-1)=="%"&&(green*=2.55);blue=toFloat(values[2]);values[2].slice(-1)=="%"&&(blue*=2.55);(values[0].slice(-3)=="deg"||values[0].slice(-1)=="\xb0")&&(red/=360);rgb[1].toLowerCase().slice(0,4)=="hsla"&&(opacity=toFloat(values[3]));values[3]&&values[3].slice(-1)=="%"&&(opacity/=100);return R.hsl2rgb(red,green,blue,opacity)}rgb={r:red,g:green,b:blue,toString:clrToString};rgb.hex="#"+(16777216|blue|(green<<8)|(red<<16)).toString(16).slice(1);R.is(opacity,"finite")&&(rgb.opacity=opacity);return rgb}return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:clrToString}},R);R.hsb=cacher(function(h,s,b){return R.hsb2rgb(h,s,b).hex});R.hsl=cacher(function(h,s,l){return R.hsl2rgb(h,s,l).hex});R.rgb=cacher(function(r,g,b){return"#"+(16777216|b|(g<<8)|(r<<16)).toString(16).slice(1)});R.getColor=function(value){var start=this.getColor.start=this.getColor.start||{h:0,s:1,b:value||0.75},rgb=this.hsb2rgb(start.h,start.s,start.b);start.h+=0.075;if(start.h>1){start.h=0;start.s-=0.2;start.s<=0&&(this.getColor.start={h:0,s:1,b:start.b})}return rgb.hex};R.getColor.reset=function(){delete this.start};function catmullRom2bezier(crp,z){var d=[];for(var i=0,iLen=crp.length;iLen-2*!z>i;i+=2){var p=[{x:+crp[i-2],y:+crp[i-1]},{x:+crp[i],y:+crp[i+1]},{x:+crp[i+2],y:+crp[i+3]},{x:+crp[i+4],y:+crp[i+5]}];if(z){if(!i){p[0]={x:+crp[iLen-2],y:+crp[iLen-1]}}else{if(iLen-4==i){p[3]={x:+crp[0],y:+crp[1]}}else{if(iLen-2==i){p[2]={x:+crp[0],y:+crp[1]};p[3]={x:+crp[2],y:+crp[3]}}}}}else{if(iLen-4==i){p[3]=p[2]}else{if(!i){p[0]={x:+crp[i],y:+crp[i+1]}}}}d.push(["C",(-p[0].x+6*p[1].x+p[2].x)/6,(-p[0].y+6*p[1].y+p[2].y)/6,(p[1].x+6*p[2].x-p[3].x)/6,(p[1].y+6*p[2].y-p[3].y)/6,p[2].x,p[2].y])}return d}R.parsePathString=function(pathString){if(!pathString){return null}var pth=paths(pathString);if(pth.arr){return pathClone(pth.arr)}var paramCounts={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},data=[];if(R.is(pathString,array)&&R.is(pathString[0],array)){data=pathClone(pathString)}if(!data.length){Str(pathString).replace(pathCommand,function(a,b,c){var params=[],name=b.toLowerCase();c.replace(pathValues,function(a,b){b&&params.push(+b)});if(name=="m"&&params.length>2){data.push([b][concat](params.splice(0,2)));name="l";b=b=="m"?"l":"L"}if(name=="r"){data.push([b][concat](params))}else{while(params.length>=paramCounts[name]){data.push([b][concat](params.splice(0,paramCounts[name])));if(!paramCounts[name]){break}}}})}data.toString=R._path2string;pth.arr=pathClone(data);return data};R.parseTransformString=cacher(function(TString){if(!TString){return null}var paramCounts={r:3,s:4,t:2,m:6},data=[];if(R.is(TString,array)&&R.is(TString[0],array)){data=pathClone(TString)}if(!data.length){Str(TString).replace(tCommand,function(a,b,c){var params=[],name=lowerCase.call(b);c.replace(pathValues,function(a,b){b&&params.push(+b)});data.push([b][concat](params))})}data.toString=R._path2string;return data});var paths=function(ps){var p=paths.ps=paths.ps||{};if(p[ps]){p[ps].sleep=100}else{p[ps]={sleep:100}}setTimeout(function(){for(var key in p){if(p[has](key)&&key!=ps){p[key].sleep--;!p[key].sleep&&delete p[key]}}});return p[ps]};R.findDotsAtSegment=function(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t){var t1=1-t,t13=pow(t1,3),t12=pow(t1,2),t2=t*t,t3=t2*t,x=t13*p1x+t12*3*t*c1x+t1*3*t*t*c2x+t3*p2x,y=t13*p1y+t12*3*t*c1y+t1*3*t*t*c2y+t3*p2y,mx=p1x+2*t*(c1x-p1x)+t2*(c2x-2*c1x+p1x),my=p1y+2*t*(c1y-p1y)+t2*(c2y-2*c1y+p1y),nx=c1x+2*t*(c2x-c1x)+t2*(p2x-2*c2x+c1x),ny=c1y+2*t*(c2y-c1y)+t2*(p2y-2*c2y+c1y),ax=t1*p1x+t*c1x,ay=t1*p1y+t*c1y,cx=t1*c2x+t*p2x,cy=t1*c2y+t*p2y,alpha=(90-math.atan2(mx-nx,my-ny)*180/PI);(mx>nx||my<ny)&&(alpha+=180);return{x:x,y:y,m:{x:mx,y:my},n:{x:nx,y:ny},start:{x:ax,y:ay},end:{x:cx,y:cy},alpha:alpha}};R.bezierBBox=function(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y){if(!R.is(p1x,"array")){p1x=[p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y]}var bbox=curveDim.apply(null,p1x);return{x:bbox.min.x,y:bbox.min.y,x2:bbox.max.x,y2:bbox.max.y,width:bbox.max.x-bbox.min.x,height:bbox.max.y-bbox.min.y}};R.isPointInsideBBox=function(bbox,x,y){return x>=bbox.x&&x<=bbox.x2&&y>=bbox.y&&y<=bbox.y2};R.isBBoxIntersect=function(bbox1,bbox2){var i=R.isPointInsideBBox;return i(bbox2,bbox1.x,bbox1.y)||i(bbox2,bbox1.x2,bbox1.y)||i(bbox2,bbox1.x,bbox1.y2)||i(bbox2,bbox1.x2,bbox1.y2)||i(bbox1,bbox2.x,bbox2.y)||i(bbox1,bbox2.x2,bbox2.y)||i(bbox1,bbox2.x,bbox2.y2)||i(bbox1,bbox2.x2,bbox2.y2)||(bbox1.x<bbox2.x2&&bbox1.x>bbox2.x||bbox2.x<bbox1.x2&&bbox2.x>bbox1.x)&&(bbox1.y<bbox2.y2&&bbox1.y>bbox2.y||bbox2.y<bbox1.y2&&bbox2.y>bbox1.y)};function base3(t,p1,p2,p3,p4){var t1=-3*p1+9*p2-9*p3+3*p4,t2=t*t1+6*p1-12*p2+6*p3;return t*t2-3*p1+3*p2}function bezlen(x1,y1,x2,y2,x3,y3,x4,y4,z){if(z==null){z=1}z=z>1?1:z<0?0:z;var z2=z/2,n=12,Tvalues=[-0.1252,0.1252,-0.3678,0.3678,-0.5873,0.5873,-0.7699,0.7699,-0.9041,0.9041,-0.9816,0.9816],Cvalues=[0.2491,0.2491,0.2335,0.2335,0.2032,0.2032,0.1601,0.1601,0.1069,0.1069,0.0472,0.0472],sum=0;for(var i=0;i<n;i++){var ct=z2*Tvalues[i]+z2,xbase=base3(ct,x1,x2,x3,x4),ybase=base3(ct,y1,y2,y3,y4),comb=xbase*xbase+ybase*ybase;sum+=Cvalues[i]*math.sqrt(comb)}return z2*sum}function getTatLen(x1,y1,x2,y2,x3,y3,x4,y4,ll){if(ll<0||bezlen(x1,y1,x2,y2,x3,y3,x4,y4)<ll){return }var t=1,step=t/2,t2=t-step,l,e=0.01;l=bezlen(x1,y1,x2,y2,x3,y3,x4,y4,t2);while(abs(l-ll)>e){step/=2;t2+=(l<ll?1:-1)*step;l=bezlen(x1,y1,x2,y2,x3,y3,x4,y4,t2)}return t2}function intersect(x1,y1,x2,y2,x3,y3,x4,y4){if(mmax(x1,x2)<mmin(x3,x4)||mmin(x1,x2)>mmax(x3,x4)||mmax(y1,y2)<mmin(y3,y4)||mmin(y1,y2)>mmax(y3,y4)){return }var nx=(x1*y2-y1*x2)*(x3-x4)-(x1-x2)*(x3*y4-y3*x4),ny=(x1*y2-y1*x2)*(y3-y4)-(y1-y2)*(x3*y4-y3*x4),denominator=(x1-x2)*(y3-y4)-(y1-y2)*(x3-x4);if(!denominator){return }var px=nx/denominator,py=ny/denominator,px2=+px.toFixed(2),py2=+py.toFixed(2);if(px2<+mmin(x1,x2).toFixed(2)||px2>+mmax(x1,x2).toFixed(2)||px2<+mmin(x3,x4).toFixed(2)||px2>+mmax(x3,x4).toFixed(2)||py2<+mmin(y1,y2).toFixed(2)||py2>+mmax(y1,y2).toFixed(2)||py2<+mmin(y3,y4).toFixed(2)||py2>+mmax(y3,y4).toFixed(2)){return }return{x:px,y:py}}function inter(bez1,bez2){return interHelper(bez1,bez2)}function interCount(bez1,bez2){return interHelper(bez1,bez2,1)}function interHelper(bez1,bez2,justCount){var bbox1=R.bezierBBox(bez1),bbox2=R.bezierBBox(bez2);if(!R.isBBoxIntersect(bbox1,bbox2)){return justCount?0:[]}var l1=bezlen.apply(0,bez1),l2=bezlen.apply(0,bez2),n1=~~(l1/5),n2=~~(l2/5),dots1=[],dots2=[],xy={},res=justCount?0:[];for(var i=0;i<n1+1;i++){var p=R.findDotsAtSegment.apply(R,bez1.concat(i/n1));dots1.push({x:p.x,y:p.y,t:i/n1})}for(i=0;i<n2+1;i++){p=R.findDotsAtSegment.apply(R,bez2.concat(i/n2));dots2.push({x:p.x,y:p.y,t:i/n2})}for(i=0;i<n1;i++){for(var j=0;j<n2;j++){var di=dots1[i],di1=dots1[i+1],dj=dots2[j],dj1=dots2[j+1],ci=abs(di1.x-di.x)<0.001?"y":"x",cj=abs(dj1.x-dj.x)<0.001?"y":"x",is=intersect(di.x,di.y,di1.x,di1.y,dj.x,dj.y,dj1.x,dj1.y);if(is){if(xy[is.x.toFixed(4)]==is.y.toFixed(4)){continue}xy[is.x.toFixed(4)]=is.y.toFixed(4);var t1=di.t+abs((is[ci]-di[ci])/(di1[ci]-di[ci]))*(di1.t-di.t),t2=dj.t+abs((is[cj]-dj[cj])/(dj1[cj]-dj[cj]))*(dj1.t-dj.t);if(t1>=0&&t1<=1&&t2>=0&&t2<=1){if(justCount){res++}else{res.push({x:is.x,y:is.y,t1:t1,t2:t2})}}}}}return res}R.pathIntersection=function(path1,path2){return interPathHelper(path1,path2)};R.pathIntersectionNumber=function(path1,path2){return interPathHelper(path1,path2,1)};function interPathHelper(path1,path2,justCount){path1=R._path2curve(path1);path2=R._path2curve(path2);var x1,y1,x2,y2,x1m,y1m,x2m,y2m,bez1,bez2,res=justCount?0:[];for(var i=0,ii=path1.length;i<ii;i++){var pi=path1[i];if(pi[0]=="M"){x1=x1m=pi[1];y1=y1m=pi[2]}else{if(pi[0]=="C"){bez1=[x1,y1].concat(pi.slice(1));x1=bez1[6];y1=bez1[7]}else{bez1=[x1,y1,x1,y1,x1m,y1m,x1m,y1m];x1=x1m;y1=y1m}for(var j=0,jj=path2.length;j<jj;j++){var pj=path2[j];if(pj[0]=="M"){x2=x2m=pj[1];y2=y2m=pj[2]}else{if(pj[0]=="C"){bez2=[x2,y2].concat(pj.slice(1));x2=bez2[6];y2=bez2[7]}else{bez2=[x2,y2,x2,y2,x2m,y2m,x2m,y2m];x2=x2m;y2=y2m}var intr=interHelper(bez1,bez2,justCount);if(justCount){res+=intr}else{for(var k=0,kk=intr.length;k<kk;k++){intr[k].segment1=i;intr[k].segment2=j;intr[k].bez1=bez1;intr[k].bez2=bez2}res=res.concat(intr)}}}}}return res}R.isPointInsidePath=function(path,x,y){var bbox=R.pathBBox(path);return R.isPointInsideBBox(bbox,x,y)&&interPathHelper(path,[["M",x,y],["H",bbox.x2+10]],1)%2==1};R._removedFactory=function(methodname){return function(){eve("raphael.log",null,"Rapha\xebl: you are calling to method \u201c"+methodname+"\u201d of removed object",methodname)}};var pathDimensions=R.pathBBox=function(path){var pth=paths(path);if(pth.bbox){return pth.bbox}if(!path){return{x:0,y:0,width:0,height:0,x2:0,y2:0}}path=path2curve(path);var x=0,y=0,X=[],Y=[],p;for(var i=0,ii=path.length;i<ii;i++){p=path[i];if(p[0]=="M"){x=p[1];y=p[2];X.push(x);Y.push(y)}else{var dim=curveDim(x,y,p[1],p[2],p[3],p[4],p[5],p[6]);X=X[concat](dim.min.x,dim.max.x);Y=Y[concat](dim.min.y,dim.max.y);x=p[5];y=p[6]}}var xmin=mmin[apply](0,X),ymin=mmin[apply](0,Y),xmax=mmax[apply](0,X),ymax=mmax[apply](0,Y),bb={x:xmin,y:ymin,x2:xmax,y2:ymax,width:xmax-xmin,height:ymax-ymin};pth.bbox=clone(bb);return bb},pathClone=function(pathArray){var res=clone(pathArray);res.toString=R._path2string;return res},pathToRelative=R._pathToRelative=function(pathArray){var pth=paths(pathArray);if(pth.rel){return pathClone(pth.rel)}if(!R.is(pathArray,array)||!R.is(pathArray&&pathArray[0],array)){pathArray=R.parsePathString(pathArray)}var res=[],x=0,y=0,mx=0,my=0,start=0;if(pathArray[0][0]=="M"){x=pathArray[0][1];y=pathArray[0][2];mx=x;my=y;start++;res.push(["M",x,y])}for(var i=start,ii=pathArray.length;i<ii;i++){var r=res[i]=[],pa=pathArray[i];if(pa[0]!=lowerCase.call(pa[0])){r[0]=lowerCase.call(pa[0]);switch(r[0]){case"a":r[1]=pa[1];r[2]=pa[2];r[3]=pa[3];r[4]=pa[4];r[5]=pa[5];r[6]=+(pa[6]-x).toFixed(3);r[7]=+(pa[7]-y).toFixed(3);break;case"v":r[1]=+(pa[1]-y).toFixed(3);break;case"m":mx=pa[1];my=pa[2];default:for(var j=1,jj=pa.length;j<jj;j++){r[j]=+(pa[j]-((j%2)?x:y)).toFixed(3)}}}else{r=res[i]=[];if(pa[0]=="m"){mx=pa[1]+x;my=pa[2]+y}for(var k=0,kk=pa.length;k<kk;k++){res[i][k]=pa[k]}}var len=res[i].length;switch(res[i][0]){case"z":x=mx;y=my;break;case"h":x+=+res[i][len-1];break;case"v":y+=+res[i][len-1];break;default:x+=+res[i][len-2];y+=+res[i][len-1]}}res.toString=R._path2string;pth.rel=pathClone(res);return res},pathToAbsolute=R._pathToAbsolute=function(pathArray){var pth=paths(pathArray);if(pth.abs){return pathClone(pth.abs)}if(!R.is(pathArray,array)||!R.is(pathArray&&pathArray[0],array)){pathArray=R.parsePathString(pathArray)}if(!pathArray||!pathArray.length){return[["M",0,0]]}var res=[],x=0,y=0,mx=0,my=0,start=0;if(pathArray[0][0]=="M"){x=+pathArray[0][1];y=+pathArray[0][2];mx=x;my=y;start++;res[0]=["M",x,y]}var crz=pathArray.length==3&&pathArray[0][0]=="M"&&pathArray[1][0].toUpperCase()=="R"&&pathArray[2][0].toUpperCase()=="Z";for(var r,pa,i=start,ii=pathArray.length;i<ii;i++){res.push(r=[]);pa=pathArray[i];if(pa[0]!=upperCase.call(pa[0])){r[0]=upperCase.call(pa[0]);switch(r[0]){case"A":r[1]=pa[1];r[2]=pa[2];r[3]=pa[3];r[4]=pa[4];r[5]=pa[5];r[6]=+(pa[6]+x);r[7]=+(pa[7]+y);break;case"V":r[1]=+pa[1]+y;break;case"H":r[1]=+pa[1]+x;break;case"R":var dots=[x,y][concat](pa.slice(1));for(var j=2,jj=dots.length;j<jj;j++){dots[j]=+dots[j]+x;dots[++j]=+dots[j]+y}res.pop();res=res[concat](catmullRom2bezier(dots,crz));break;case"M":mx=+pa[1]+x;my=+pa[2]+y;default:for(j=1,jj=pa.length;j<jj;j++){r[j]=+pa[j]+((j%2)?x:y)}}}else{if(pa[0]=="R"){dots=[x,y][concat](pa.slice(1));res.pop();res=res[concat](catmullRom2bezier(dots,crz));r=["R"][concat](pa.slice(-2))}else{for(var k=0,kk=pa.length;k<kk;k++){r[k]=pa[k]}}}switch(r[0]){case"Z":x=mx;y=my;break;case"H":x=r[1];break;case"V":y=r[1];break;case"M":mx=r[r.length-2];my=r[r.length-1];default:x=r[r.length-2];y=r[r.length-1]}}res.toString=R._path2string;pth.abs=pathClone(res);return res},l2c=function(x1,y1,x2,y2){return[x1,y1,x2,y2,x2,y2]},q2c=function(x1,y1,ax,ay,x2,y2){var _13=1/3,_23=2/3;return[_13*x1+_23*ax,_13*y1+_23*ay,_13*x2+_23*ax,_13*y2+_23*ay,x2,y2]},a2c=function(x1,y1,rx,ry,angle,large_arc_flag,sweep_flag,x2,y2,recursive){var _120=PI*120/180,rad=PI/180*(+angle||0),res=[],xy,rotate=cacher(function(x,y,rad){var X=x*math.cos(rad)-y*math.sin(rad),Y=x*math.sin(rad)+y*math.cos(rad);return{x:X,y:Y}});if(!recursive){xy=rotate(x1,y1,-rad);x1=xy.x;y1=xy.y;xy=rotate(x2,y2,-rad);x2=xy.x;y2=xy.y;var cos=math.cos(PI/180*angle),sin=math.sin(PI/180*angle),x=(x1-x2)/2,y=(y1-y2)/2;var h=(x*x)/(rx*rx)+(y*y)/(ry*ry);if(h>1){h=math.sqrt(h);rx=h*rx;ry=h*ry}var rx2=rx*rx,ry2=ry*ry,k=(large_arc_flag==sweep_flag?-1:1)*math.sqrt(abs((rx2*ry2-rx2*y*y-ry2*x*x)/(rx2*y*y+ry2*x*x))),cx=k*rx*y/ry+(x1+x2)/2,cy=k*-ry*x/rx+(y1+y2)/2,f1=math.asin(((y1-cy)/ry).toFixed(9)),f2=math.asin(((y2-cy)/ry).toFixed(9));f1=x1<cx?PI-f1:f1;f2=x2<cx?PI-f2:f2;f1<0&&(f1=PI*2+f1);f2<0&&(f2=PI*2+f2);if(sweep_flag&&f1>f2){f1=f1-PI*2}if(!sweep_flag&&f2>f1){f2=f2-PI*2}}else{f1=recursive[0];f2=recursive[1];cx=recursive[2];cy=recursive[3]}var df=f2-f1;if(abs(df)>_120){var f2old=f2,x2old=x2,y2old=y2;f2=f1+_120*(sweep_flag&&f2>f1?1:-1);x2=cx+rx*math.cos(f2);y2=cy+ry*math.sin(f2);res=a2c(x2,y2,rx,ry,angle,0,sweep_flag,x2old,y2old,[f2,f2old,cx,cy])}df=f2-f1;var c1=math.cos(f1),s1=math.sin(f1),c2=math.cos(f2),s2=math.sin(f2),t=math.tan(df/4),hx=4/3*rx*t,hy=4/3*ry*t,m1=[x1,y1],m2=[x1+hx*s1,y1-hy*c1],m3=[x2+hx*s2,y2-hy*c2],m4=[x2,y2];m2[0]=2*m1[0]-m2[0];m2[1]=2*m1[1]-m2[1];if(recursive){return[m2,m3,m4][concat](res)}else{res=[m2,m3,m4][concat](res).join()[split](",");var newres=[];for(var i=0,ii=res.length;i<ii;i++){newres[i]=i%2?rotate(res[i-1],res[i],rad).y:rotate(res[i],res[i+1],rad).x}return newres}},findDotAtSegment=function(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t){var t1=1-t;return{x:pow(t1,3)*p1x+pow(t1,2)*3*t*c1x+t1*3*t*t*c2x+pow(t,3)*p2x,y:pow(t1,3)*p1y+pow(t1,2)*3*t*c1y+t1*3*t*t*c2y+pow(t,3)*p2y}},curveDim=cacher(function(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y){var a=(c2x-2*c1x+p1x)-(p2x-2*c2x+c1x),b=2*(c1x-p1x)-2*(c2x-c1x),c=p1x-c1x,t1=(-b+math.sqrt(b*b-4*a*c))/2/a,t2=(-b-math.sqrt(b*b-4*a*c))/2/a,y=[p1y,p2y],x=[p1x,p2x],dot;abs(t1)>"1e12"&&(t1=0.5);abs(t2)>"1e12"&&(t2=0.5);if(t1>0&&t1<1){dot=findDotAtSegment(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t1);x.push(dot.x);y.push(dot.y)}if(t2>0&&t2<1){dot=findDotAtSegment(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t2);x.push(dot.x);y.push(dot.y)}a=(c2y-2*c1y+p1y)-(p2y-2*c2y+c1y);b=2*(c1y-p1y)-2*(c2y-c1y);c=p1y-c1y;t1=(-b+math.sqrt(b*b-4*a*c))/2/a;t2=(-b-math.sqrt(b*b-4*a*c))/2/a;abs(t1)>"1e12"&&(t1=0.5);abs(t2)>"1e12"&&(t2=0.5);if(t1>0&&t1<1){dot=findDotAtSegment(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t1);x.push(dot.x);y.push(dot.y)}if(t2>0&&t2<1){dot=findDotAtSegment(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t2);x.push(dot.x);y.push(dot.y)}return{min:{x:mmin[apply](0,x),y:mmin[apply](0,y)},max:{x:mmax[apply](0,x),y:mmax[apply](0,y)}}}),path2curve=R._path2curve=cacher(function(path,path2){var pth=!path2&&paths(path);if(!path2&&pth.curve){return pathClone(pth.curve)}var p=pathToAbsolute(path),p2=path2&&pathToAbsolute(path2),attrs={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},attrs2={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},processPath=function(path,d){var nx,ny;if(!path){return["C",d.x,d.y,d.x,d.y,d.x,d.y]}!(path[0] in {T:1,Q:1})&&(d.qx=d.qy=null);switch(path[0]){case"M":d.X=path[1];d.Y=path[2];break;case"A":path=["C"][concat](a2c[apply](0,[d.x,d.y][concat](path.slice(1))));break;case"S":nx=d.x+(d.x-(d.bx||d.x));ny=d.y+(d.y-(d.by||d.y));path=["C",nx,ny][concat](path.slice(1));break;case"T":d.qx=d.x+(d.x-(d.qx||d.x));d.qy=d.y+(d.y-(d.qy||d.y));path=["C"][concat](q2c(d.x,d.y,d.qx,d.qy,path[1],path[2]));break;case"Q":d.qx=path[1];d.qy=path[2];path=["C"][concat](q2c(d.x,d.y,path[1],path[2],path[3],path[4]));break;case"L":path=["C"][concat](l2c(d.x,d.y,path[1],path[2]));break;case"H":path=["C"][concat](l2c(d.x,d.y,path[1],d.y));break;case"V":path=["C"][concat](l2c(d.x,d.y,d.x,path[1]));break;case"Z":path=["C"][concat](l2c(d.x,d.y,d.X,d.Y));break}return path},fixArc=function(pp,i){if(pp[i].length>7){pp[i].shift();var pi=pp[i];while(pi.length){pp.splice(i++,0,["C"][concat](pi.splice(0,6)))}pp.splice(i,1);ii=mmax(p.length,p2&&p2.length||0)}},fixM=function(path1,path2,a1,a2,i){if(path1&&path2&&path1[i][0]=="M"&&path2[i][0]!="M"){path2.splice(i,0,["M",a2.x,a2.y]);a1.bx=0;a1.by=0;a1.x=path1[i][1];a1.y=path1[i][2];ii=mmax(p.length,p2&&p2.length||0)}};for(var i=0,ii=mmax(p.length,p2&&p2.length||0);i<ii;i++){p[i]=processPath(p[i],attrs);fixArc(p,i);p2&&(p2[i]=processPath(p2[i],attrs2));p2&&fixArc(p2,i);fixM(p,p2,attrs,attrs2,i);fixM(p2,p,attrs2,attrs,i);var seg=p[i],seg2=p2&&p2[i],seglen=seg.length,seg2len=p2&&seg2.length;attrs.x=seg[seglen-2];attrs.y=seg[seglen-1];attrs.bx=toFloat(seg[seglen-4])||attrs.x;attrs.by=toFloat(seg[seglen-3])||attrs.y;attrs2.bx=p2&&(toFloat(seg2[seg2len-4])||attrs2.x);attrs2.by=p2&&(toFloat(seg2[seg2len-3])||attrs2.y);attrs2.x=p2&&seg2[seg2len-2];attrs2.y=p2&&seg2[seg2len-1]}if(!p2){pth.curve=pathClone(p)}return p2?[p,p2]:p},null,pathClone),parseDots=R._parseDots=cacher(function(gradient){var dots=[];for(var i=0,ii=gradient.length;i<ii;i++){var dot={},par=gradient[i].match(/^([^:]*):?([\d\.]*)/);dot.color=R.getRGB(par[1]);if(dot.color.error){return null}dot.color=dot.color.hex;par[2]&&(dot.offset=par[2]+"%");dots.push(dot)}for(i=1,ii=dots.length-1;i<ii;i++){if(!dots[i].offset){var start=toFloat(dots[i-1].offset||0),end=0;for(var j=i+1;j<ii;j++){if(dots[j].offset){end=dots[j].offset;break}}if(!end){end=100;j=ii}end=toFloat(end);var d=(end-start)/(j-i+1);for(;i<j;i++){start+=d;dots[i].offset=start+"%"}}}return dots}),tear=R._tear=function(el,paper){el==paper.top&&(paper.top=el.prev);el==paper.bottom&&(paper.bottom=el.next);el.next&&(el.next.prev=el.prev);el.prev&&(el.prev.next=el.next)},tofront=R._tofront=function(el,paper){if(paper.top===el){return }tear(el,paper);el.next=null;el.prev=paper.top;paper.top.next=el;paper.top=el},toback=R._toback=function(el,paper){if(paper.bottom===el){return }tear(el,paper);el.next=paper.bottom;el.prev=null;paper.bottom.prev=el;paper.bottom=el},insertafter=R._insertafter=function(el,el2,paper){tear(el,paper);el2==paper.top&&(paper.top=el);el2.next&&(el2.next.prev=el);el.next=el2.next;el.prev=el2;el2.next=el},insertbefore=R._insertbefore=function(el,el2,paper){tear(el,paper);el2==paper.bottom&&(paper.bottom=el);el2.prev&&(el2.prev.next=el);el.prev=el2.prev;el2.prev=el;el.next=el2},toMatrix=R.toMatrix=function(path,transform){var bb=pathDimensions(path),el={_:{transform:E},getBBox:function(){return bb}};extractTransform(el,transform);return el.matrix},transformPath=R.transformPath=function(path,transform){return mapPath(path,toMatrix(path,transform))},extractTransform=R._extractTransform=function(el,tstr){if(tstr==null){return el._.transform}tstr=Str(tstr).replace(/\.{3}|\u2026/g,el._.transform||E);var tdata=R.parseTransformString(tstr),deg=0,dx=0,dy=0,sx=1,sy=1,_=el._,m=new Matrix;_.transform=tdata||[];if(tdata){for(var i=0,ii=tdata.length;i<ii;i++){var t=tdata[i],tlen=t.length,command=Str(t[0]).toLowerCase(),absolute=t[0]!=command,inver=absolute?m.invert():0,x1,y1,x2,y2,bb;if(command=="t"&&tlen==3){if(absolute){x1=inver.x(0,0);y1=inver.y(0,0);x2=inver.x(t[1],t[2]);y2=inver.y(t[1],t[2]);m.translate(x2-x1,y2-y1)}else{m.translate(t[1],t[2])}}else{if(command=="r"){if(tlen==2){bb=bb||el.getBBox(1);m.rotate(t[1],bb.x+bb.width/2,bb.y+bb.height/2);deg+=t[1]}else{if(tlen==4){if(absolute){x2=inver.x(t[2],t[3]);y2=inver.y(t[2],t[3]);m.rotate(t[1],x2,y2)}else{m.rotate(t[1],t[2],t[3])}deg+=t[1]}}}else{if(command=="s"){if(tlen==2||tlen==3){bb=bb||el.getBBox(1);m.scale(t[1],t[tlen-1],bb.x+bb.width/2,bb.y+bb.height/2);sx*=t[1];sy*=t[tlen-1]}else{if(tlen==5){if(absolute){x2=inver.x(t[3],t[4]);y2=inver.y(t[3],t[4]);m.scale(t[1],t[2],x2,y2)}else{m.scale(t[1],t[2],t[3],t[4])}sx*=t[1];sy*=t[2]}}}else{if(command=="m"&&tlen==7){m.add(t[1],t[2],t[3],t[4],t[5],t[6])}}}}_.dirtyT=1;el.matrix=m}}el.matrix=m;_.sx=sx;_.sy=sy;_.deg=deg;_.dx=dx=m.e;_.dy=dy=m.f;if(sx==1&&sy==1&&!deg&&_.bbox){_.bbox.x+=+dx;_.bbox.y+=+dy}else{_.dirtyT=1}},getEmpty=function(item){var l=item[0];switch(l.toLowerCase()){case"t":return[l,0,0];case"m":return[l,1,0,0,1,0,0];case"r":if(item.length==4){return[l,0,item[2],item[3]]}else{return[l,0]}case"s":if(item.length==5){return[l,1,1,item[3],item[4]]}else{if(item.length==3){return[l,1,1]}else{return[l,1]}}}},equaliseTransform=R._equaliseTransform=function(t1,t2){t2=Str(t2).replace(/\.{3}|\u2026/g,t1);t1=R.parseTransformString(t1)||[];t2=R.parseTransformString(t2)||[];var maxlength=mmax(t1.length,t2.length),from=[],to=[],i=0,j,jj,tt1,tt2;for(;i<maxlength;i++){tt1=t1[i]||getEmpty(t2[i]);tt2=t2[i]||getEmpty(tt1);if((tt1[0]!=tt2[0])||(tt1[0].toLowerCase()=="r"&&(tt1[2]!=tt2[2]||tt1[3]!=tt2[3]))||(tt1[0].toLowerCase()=="s"&&(tt1[3]!=tt2[3]||tt1[4]!=tt2[4]))){return }from[i]=[];to[i]=[];for(j=0,jj=mmax(tt1.length,tt2.length);j<jj;j++){j in tt1&&(from[i][j]=tt1[j]);j in tt2&&(to[i][j]=tt2[j])}}return{from:from,to:to}};R._getContainer=function(x,y,w,h){var container;container=h==null&&!R.is(x,"object")?g.doc.getElementById(x):x;if(container==null){return }if(container.tagName){if(y==null){return{container:container,width:container.style.pixelWidth||container.offsetWidth,height:container.style.pixelHeight||container.offsetHeight}}else{return{container:container,width:y,height:w}}}return{container:1,x:x,y:y,width:w,height:h}};R.pathToRelative=pathToRelative;R._engine={};R.path2curve=path2curve;R.matrix=function(a,b,c,d,e,f){return new Matrix(a,b,c,d,e,f)};function Matrix(a,b,c,d,e,f){if(a!=null){this.a=+a;this.b=+b;this.c=+c;this.d=+d;this.e=+e;this.f=+f}else{this.a=1;this.b=0;this.c=0;this.d=1;this.e=0;this.f=0}}(function(matrixproto){matrixproto.add=function(a,b,c,d,e,f){var out=[[],[],[]],m=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],matrix=[[a,c,e],[b,d,f],[0,0,1]],x,y,z,res;if(a&&a instanceof Matrix){matrix=[[a.a,a.c,a.e],[a.b,a.d,a.f],[0,0,1]]}for(x=0;x<3;x++){for(y=0;y<3;y++){res=0;for(z=0;z<3;z++){res+=m[x][z]*matrix[z][y]}out[x][y]=res}}this.a=out[0][0];this.b=out[1][0];this.c=out[0][1];this.d=out[1][1];this.e=out[0][2];this.f=out[1][2]};matrixproto.invert=function(){var me=this,x=me.a*me.d-me.b*me.c;return new Matrix(me.d/x,-me.b/x,-me.c/x,me.a/x,(me.c*me.f-me.d*me.e)/x,(me.b*me.e-me.a*me.f)/x)};matrixproto.clone=function(){return new Matrix(this.a,this.b,this.c,this.d,this.e,this.f)};matrixproto.translate=function(x,y){this.add(1,0,0,1,x,y)};matrixproto.scale=function(x,y,cx,cy){y==null&&(y=x);(cx||cy)&&this.add(1,0,0,1,cx,cy);this.add(x,0,0,y,0,0);(cx||cy)&&this.add(1,0,0,1,-cx,-cy)};matrixproto.rotate=function(a,x,y){a=R.rad(a);x=x||0;y=y||0;var cos=+math.cos(a).toFixed(9),sin=+math.sin(a).toFixed(9);this.add(cos,sin,-sin,cos,x,y);this.add(1,0,0,1,-x,-y)};matrixproto.x=function(x,y){return x*this.a+y*this.c+this.e};matrixproto.y=function(x,y){return x*this.b+y*this.d+this.f};matrixproto.get=function(i){return +this[Str.fromCharCode(97+i)].toFixed(4)};matrixproto.toString=function(){return R.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()};matrixproto.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"};matrixproto.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]};function norm(a){return a[0]*a[0]+a[1]*a[1]}function normalize(a){var mag=math.sqrt(norm(a));a[0]&&(a[0]/=mag);a[1]&&(a[1]/=mag)}matrixproto.split=function(){var out={};out.dx=this.e;out.dy=this.f;var row=[[this.a,this.c],[this.b,this.d]];out.scalex=math.sqrt(norm(row[0]));normalize(row[0]);out.shear=row[0][0]*row[1][0]+row[0][1]*row[1][1];row[1]=[row[1][0]-row[0][0]*out.shear,row[1][1]-row[0][1]*out.shear];out.scaley=math.sqrt(norm(row[1]));normalize(row[1]);out.shear/=out.scaley;var sin=-row[0][1],cos=row[1][1];if(cos<0){out.rotate=R.deg(math.acos(cos));if(sin<0){out.rotate=360-out.rotate}}else{out.rotate=R.deg(math.asin(sin))}out.isSimple=!+out.shear.toFixed(9)&&(out.scalex.toFixed(9)==out.scaley.toFixed(9)||!out.rotate);out.isSuperSimple=!+out.shear.toFixed(9)&&out.scalex.toFixed(9)==out.scaley.toFixed(9)&&!out.rotate;out.noRotation=!+out.shear.toFixed(9)&&!out.rotate;return out};matrixproto.toTransformString=function(shorter){var s=shorter||this[split]();if(s.isSimple){s.scalex=+s.scalex.toFixed(4);s.scaley=+s.scaley.toFixed(4);s.rotate=+s.rotate.toFixed(4);return(s.dx||s.dy?"t"+[s.dx,s.dy]:E)+(s.scalex!=1||s.scaley!=1?"s"+[s.scalex,s.scaley,0,0]:E)+(s.rotate?"r"+[s.rotate,0,0]:E)}else{return"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}})(Matrix.prototype);var version=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);if((navigator.vendor=="Apple Computer, Inc.")&&(version&&version[1]<4||navigator.platform.slice(0,2)=="iP")||(navigator.vendor=="Google Inc."&&version&&version[1]<8)){paperproto.safari=function(){var rect=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){rect.remove()})}}else{paperproto.safari=fun}var preventDefault=function(){this.returnValue=false},preventTouch=function(){return this.originalEvent.preventDefault()},stopPropagation=function(){this.cancelBubble=true},stopTouch=function(){return this.originalEvent.stopPropagation()},addEvent=(function(){if(g.doc.addEventListener){return function(obj,type,fn,element){var realName=supportsTouch&&touchMap[type]?touchMap[type]:type,f=function(e){var scrollY=g.doc.documentElement.scrollTop||g.doc.body.scrollTop,scrollX=g.doc.documentElement.scrollLeft||g.doc.body.scrollLeft,x=e.clientX+scrollX,y=e.clientY+scrollY;if(supportsTouch&&touchMap[has](type)){for(var i=0,ii=e.targetTouches&&e.targetTouches.length;i<ii;i++){if(e.targetTouches[i].target==obj){var olde=e;e=e.targetTouches[i];e.originalEvent=olde;e.preventDefault=preventTouch;e.stopPropagation=stopTouch;break}}}return fn.call(element,e,x,y)};obj.addEventListener(realName,f,false);return function(){obj.removeEventListener(realName,f,false);return true}}}else{if(g.doc.attachEvent){return function(obj,type,fn,element){var f=function(e){e=e||g.win.event;var scrollY=g.doc.documentElement.scrollTop||g.doc.body.scrollTop,scrollX=g.doc.documentElement.scrollLeft||g.doc.body.scrollLeft,x=e.clientX+scrollX,y=e.clientY+scrollY;e.preventDefault=e.preventDefault||preventDefault;e.stopPropagation=e.stopPropagation||stopPropagation;return fn.call(element,e,x,y)};obj.attachEvent("on"+type,f);var detacher=function(){obj.detachEvent("on"+type,f);return true};return detacher}}}})(),drag=[],dragMove=function(e){var x=e.clientX,y=e.clientY,scrollY=g.doc.documentElement.scrollTop||g.doc.body.scrollTop,scrollX=g.doc.documentElement.scrollLeft||g.doc.body.scrollLeft,dragi,j=drag.length;while(j--){dragi=drag[j];if(supportsTouch){var i=e.touches.length,touch;while(i--){touch=e.touches[i];if(touch.identifier==dragi.el._drag.id){x=touch.clientX;y=touch.clientY;(e.originalEvent?e.originalEvent:e).preventDefault();break}}}else{e.preventDefault()}var node=dragi.el.node,o,next=node.nextSibling,parent=node.parentNode,display=node.style.display;g.win.opera&&parent.removeChild(node);node.style.display="none";o=dragi.el.paper.getElementByPoint(x,y);node.style.display=display;g.win.opera&&(next?parent.insertBefore(node,next):parent.appendChild(node));o&&eve("raphael.drag.over."+dragi.el.id,dragi.el,o);x+=scrollX;y+=scrollY;eve("raphael.drag.move."+dragi.el.id,dragi.move_scope||dragi.el,x-dragi.el._drag.x,y-dragi.el._drag.y,x,y,e)}},dragUp=function(e){R.unmousemove(dragMove).unmouseup(dragUp);var i=drag.length,dragi;while(i--){dragi=drag[i];dragi.el._drag={};eve("raphael.drag.end."+dragi.el.id,dragi.end_scope||dragi.start_scope||dragi.move_scope||dragi.el,e)}drag=[]},elproto=R.el={};for(var i=events.length;i--;){(function(eventName){R[eventName]=elproto[eventName]=function(fn,scope){if(R.is(fn,"function")){this.events=this.events||[];this.events.push({name:eventName,f:fn,unbind:addEvent(this.shape||this.node||g.doc,eventName,fn,scope||this)})}return this};R["un"+eventName]=elproto["un"+eventName]=function(fn){var events=this.events||[],l=events.length;while(l--){if(events[l].name==eventName&&events[l].f==fn){events[l].unbind();events.splice(l,1);!events.length&&delete this.events;return this}}return this}})(events[i])}elproto.data=function(key,value){var data=eldata[this.id]=eldata[this.id]||{};if(arguments.length==1){if(R.is(key,"object")){for(var i in key){if(key[has](i)){this.data(i,key[i])}}return this}eve("raphael.data.get."+this.id,this,data[key],key);return data[key]}data[key]=value;eve("raphael.data.set."+this.id,this,value,key);return this};elproto.removeData=function(key){if(key==null){eldata[this.id]={}}else{eldata[this.id]&&delete eldata[this.id][key]}return this};elproto.hover=function(f_in,f_out,scope_in,scope_out){return this.mouseover(f_in,scope_in).mouseout(f_out,scope_out||scope_in)};elproto.unhover=function(f_in,f_out){return this.unmouseover(f_in).unmouseout(f_out)};var draggable=[];elproto.drag=function(onmove,onstart,onend,move_scope,start_scope,end_scope){function start(e){(e.originalEvent||e).preventDefault();var scrollY=g.doc.documentElement.scrollTop||g.doc.body.scrollTop,scrollX=g.doc.documentElement.scrollLeft||g.doc.body.scrollLeft;this._drag.x=e.clientX+scrollX;this._drag.y=e.clientY+scrollY;this._drag.id=e.identifier;!drag.length&&R.mousemove(dragMove).mouseup(dragUp);drag.push({el:this,move_scope:move_scope,start_scope:start_scope,end_scope:end_scope});onstart&&eve.on("raphael.drag.start."+this.id,onstart);onmove&&eve.on("raphael.drag.move."+this.id,onmove);onend&&eve.on("raphael.drag.end."+this.id,onend);eve("raphael.drag.start."+this.id,start_scope||move_scope||this,e.clientX+scrollX,e.clientY+scrollY,e)}this._drag={};draggable.push({el:this,start:start});this.mousedown(start);return this};elproto.onDragOver=function(f){f?eve.on("raphael.drag.over."+this.id,f):eve.unbind("raphael.drag.over."+this.id)};elproto.undrag=function(){var i=draggable.length;while(i--){if(draggable[i].el==this){this.unmousedown(draggable[i].start);draggable.splice(i,1);eve.unbind("raphael.drag.*."+this.id)}}!draggable.length&&R.unmousemove(dragMove).unmouseup(dragUp)};paperproto.circle=function(x,y,r){var out=R._engine.circle(this,x||0,y||0,r||0);this.__set__&&this.__set__.push(out);return out};paperproto.rect=function(x,y,w,h,r){var out=R._engine.rect(this,x||0,y||0,w||0,h||0,r||0);this.__set__&&this.__set__.push(out);return out};paperproto.ellipse=function(x,y,rx,ry){var out=R._engine.ellipse(this,x||0,y||0,rx||0,ry||0);this.__set__&&this.__set__.push(out);return out};paperproto.path=function(pathString){pathString&&!R.is(pathString,string)&&!R.is(pathString[0],array)&&(pathString+=E);var out=R._engine.path(R.format[apply](R,arguments),this);this.__set__&&this.__set__.push(out);return out};paperproto.image=function(src,x,y,w,h){var out=R._engine.image(this,src||"about:blank",x||0,y||0,w||0,h||0);this.__set__&&this.__set__.push(out);return out};paperproto.text=function(x,y,text){var out=R._engine.text(this,x||0,y||0,Str(text));this.__set__&&this.__set__.push(out);return out};paperproto.set=function(itemsArray){!R.is(itemsArray,"array")&&(itemsArray=Array.prototype.splice.call(arguments,0,arguments.length));var out=new Set(itemsArray);this.__set__&&this.__set__.push(out);return out};paperproto.setStart=function(set){this.__set__=set||this.set()};paperproto.setFinish=function(set){var out=this.__set__;delete this.__set__;return out};paperproto.setSize=function(width,height){return R._engine.setSize.call(this,width,height)};paperproto.setViewBox=function(x,y,w,h,fit){return R._engine.setViewBox.call(this,x,y,w,h,fit)};paperproto.top=paperproto.bottom=null;paperproto.raphael=R;var getOffset=function(elem){var box=elem.getBoundingClientRect(),doc=elem.ownerDocument,body=doc.body,docElem=doc.documentElement,clientTop=docElem.clientTop||body.clientTop||0,clientLeft=docElem.clientLeft||body.clientLeft||0,top=box.top+(g.win.pageYOffset||docElem.scrollTop||body.scrollTop)-clientTop,left=box.left+(g.win.pageXOffset||docElem.scrollLeft||body.scrollLeft)-clientLeft;return{y:top,x:left}};paperproto.getElementByPoint=function(x,y){var paper=this,svg=paper.canvas,target=g.doc.elementFromPoint(x,y);if(g.win.opera&&target.tagName=="svg"){var so=getOffset(svg),sr=svg.createSVGRect();sr.x=x-so.x;sr.y=y-so.y;sr.width=sr.height=1;var hits=svg.getIntersectionList(sr,null);if(hits.length){target=hits[hits.length-1]}}if(!target){return null}while(target.parentNode&&target!=svg.parentNode&&!target.raphael){target=target.parentNode}target==paper.canvas.parentNode&&(target=svg);target=target&&target.raphael?paper.getById(target.raphaelid):null;return target};paperproto.getById=function(id){var bot=this.bottom;while(bot){if(bot.id==id){return bot}bot=bot.next}return null};paperproto.forEach=function(callback,thisArg){var bot=this.bottom;while(bot){if(callback.call(thisArg,bot)===false){return this}bot=bot.next}return this};paperproto.getElementsByPoint=function(x,y){var set=this.set();this.forEach(function(el){if(el.isPointInside(x,y)){set.push(el)}});return set};function x_y(){return this.x+S+this.y}function x_y_w_h(){return this.x+S+this.y+S+this.width+" \xd7 "+this.height}elproto.isPointInside=function(x,y){var rp=this.realPath=this.realPath||getPath[this.type](this);return R.isPointInsidePath(rp,x,y)};elproto.getBBox=function(isWithoutTransform){if(this.removed){return{}}var _=this._;if(isWithoutTransform){if(_.dirty||!_.bboxwt){this.realPath=getPath[this.type](this);_.bboxwt=pathDimensions(this.realPath);_.bboxwt.toString=x_y_w_h;_.dirty=0}return _.bboxwt}if(_.dirty||_.dirtyT||!_.bbox){if(_.dirty||!this.realPath){_.bboxwt=0;this.realPath=getPath[this.type](this)}_.bbox=pathDimensions(mapPath(this.realPath,this.matrix));_.bbox.toString=x_y_w_h;_.dirty=_.dirtyT=0}return _.bbox};elproto.clone=function(){if(this.removed){return null}var out=this.paper[this.type]().attr(this.attr());this.__set__&&this.__set__.push(out);return out};elproto.glow=function(glow){if(this.type=="text"){return null}glow=glow||{};var s={width:(glow.width||10)+(+this.attr("stroke-width")||1),fill:glow.fill||false,opacity:glow.opacity||0.5,offsetx:glow.offsetx||0,offsety:glow.offsety||0,color:glow.color||"#000"},c=s.width/2,r=this.paper,out=r.set(),path=this.realPath||getPath[this.type](this);path=this.matrix?mapPath(path,this.matrix):path;for(var i=1;i<c+1;i++){out.push(r.path(path).attr({stroke:s.color,fill:s.fill?s.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(s.width/c*i).toFixed(3),opacity:+(s.opacity/c).toFixed(3)}))}return out.insertBefore(this).translate(s.offsetx,s.offsety)};var curveslengths={},getPointAtSegmentLength=function(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,length){if(length==null){return bezlen(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y)}else{return R.findDotsAtSegment(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,getTatLen(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,length))}},getLengthFactory=function(istotal,subpath){return function(path,length,onlystart){path=path2curve(path);var x,y,p,l,sp="",subpaths={},point,len=0;for(var i=0,ii=path.length;i<ii;i++){p=path[i];if(p[0]=="M"){x=+p[1];y=+p[2]}else{l=getPointAtSegmentLength(x,y,p[1],p[2],p[3],p[4],p[5],p[6]);if(len+l>length){if(subpath&&!subpaths.start){point=getPointAtSegmentLength(x,y,p[1],p[2],p[3],p[4],p[5],p[6],length-len);sp+=["C"+point.start.x,point.start.y,point.m.x,point.m.y,point.x,point.y];if(onlystart){return sp}subpaths.start=sp;sp=["M"+point.x,point.y+"C"+point.n.x,point.n.y,point.end.x,point.end.y,p[5],p[6]].join();len+=l;x=+p[5];y=+p[6];continue}if(!istotal&&!subpath){point=getPointAtSegmentLength(x,y,p[1],p[2],p[3],p[4],p[5],p[6],length-len);return{x:point.x,y:point.y,alpha:point.alpha}}}len+=l;x=+p[5];y=+p[6]}sp+=p.shift()+p}subpaths.end=sp;point=istotal?len:subpath?subpaths:R.findDotsAtSegment(x,y,p[0],p[1],p[2],p[3],p[4],p[5],1);point.alpha&&(point={x:point.x,y:point.y,alpha:point.alpha});return point}};var getTotalLength=getLengthFactory(1),getPointAtLength=getLengthFactory(),getSubpathsAtLength=getLengthFactory(0,1);R.getTotalLength=getTotalLength;R.getPointAtLength=getPointAtLength;R.getSubpath=function(path,from,to){if(this.getTotalLength(path)-to<0.000001){return getSubpathsAtLength(path,from).end}var a=getSubpathsAtLength(path,to,1);return from?getSubpathsAtLength(a,from).end:a};elproto.getTotalLength=function(){if(this.type!="path"){return }if(this.node.getTotalLength){return this.node.getTotalLength()}return getTotalLength(this.attrs.path)};elproto.getPointAtLength=function(length){if(this.type!="path"){return }return getPointAtLength(this.attrs.path,length)};elproto.getSubpath=function(from,to){if(this.type!="path"){return }return R.getSubpath(this.attrs.path,from,to)};var ef=R.easing_formulas={linear:function(n){return n},"<":function(n){return pow(n,1.7)},">":function(n){return pow(n,0.48)},"<>":function(n){var q=0.48-n/1.04,Q=math.sqrt(0.1734+q*q),x=Q-q,X=pow(abs(x),1/3)*(x<0?-1:1),y=-Q-q,Y=pow(abs(y),1/3)*(y<0?-1:1),t=X+Y+0.5;return(1-t)*3*t*t+t*t*t},backIn:function(n){var s=1.70158;return n*n*((s+1)*n-s)},backOut:function(n){n=n-1;var s=1.70158;return n*n*((s+1)*n+s)+1},elastic:function(n){if(n==!!n){return n}return pow(2,-10*n)*math.sin((n-0.075)*(2*PI)/0.3)+1},bounce:function(n){var s=7.5625,p=2.75,l;if(n<(1/p)){l=s*n*n}else{if(n<(2/p)){n-=(1.5/p);l=s*n*n+0.75}else{if(n<(2.5/p)){n-=(2.25/p);l=s*n*n+0.9375}else{n-=(2.625/p);l=s*n*n+0.984375}}}return l}};ef.easeIn=ef["ease-in"]=ef["<"];ef.easeOut=ef["ease-out"]=ef[">"];ef.easeInOut=ef["ease-in-out"]=ef["<>"];ef["back-in"]=ef.backIn;ef["back-out"]=ef.backOut;var animationElements=[],requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){setTimeout(callback,16)},animation=function(){var Now=+new Date,l=0;for(;l<animationElements.length;l++){var e=animationElements[l];if(e.el.removed||e.paused){continue}var time=Now-e.start,ms=e.ms,easing=e.easing,from=e.from,diff=e.diff,to=e.to,t=e.t,that=e.el,set={},now,init={},key;if(e.initstatus){time=(e.initstatus*e.anim.top-e.prev)/(e.percent-e.prev)*ms;e.status=e.initstatus;delete e.initstatus;e.stop&&animationElements.splice(l--,1)}else{e.status=(e.prev+(e.percent-e.prev)*(time/ms))/e.anim.top}if(time<0){continue}if(time<ms){var pos=easing(time/ms);for(var attr in from){if(from[has](attr)){switch(availableAnimAttrs[attr]){case nu:now=+from[attr]+pos*ms*diff[attr];break;case"colour":now="rgb("+[upto255(round(from[attr].r+pos*ms*diff[attr].r)),upto255(round(from[attr].g+pos*ms*diff[attr].g)),upto255(round(from[attr].b+pos*ms*diff[attr].b))].join(",")+")";break;case"path":now=[];for(var i=0,ii=from[attr].length;i<ii;i++){now[i]=[from[attr][i][0]];for(var j=1,jj=from[attr][i].length;j<jj;j++){now[i][j]=+from[attr][i][j]+pos*ms*diff[attr][i][j]}now[i]=now[i].join(S)}now=now.join(S);break;case"transform":if(diff[attr].real){now=[];for(i=0,ii=from[attr].length;i<ii;i++){now[i]=[from[attr][i][0]];for(j=1,jj=from[attr][i].length;j<jj;j++){now[i][j]=from[attr][i][j]+pos*ms*diff[attr][i][j]}}}else{var get=function(i){return +from[attr][i]+pos*ms*diff[attr][i]};now=[["m",get(0),get(1),get(2),get(3),get(4),get(5)]]}break;case"csv":if(attr=="clip-rect"){now=[];i=4;while(i--){now[i]=+from[attr][i]+pos*ms*diff[attr][i]}}break;default:var from2=[][concat](from[attr]);now=[];i=that.paper.customAttributes[attr].length;while(i--){now[i]=+from2[i]+pos*ms*diff[attr][i]}break}set[attr]=now}}that.attr(set);(function(id,that,anim){setTimeout(function(){eve("raphael.anim.frame."+id,that,anim)})})(that.id,that,e.anim)}else{(function(f,el,a){setTimeout(function(){eve("raphael.anim.frame."+el.id,el,a);eve("raphael.anim.finish."+el.id,el,a);R.is(f,"function")&&f.call(el)})})(e.callback,that,e.anim);that.attr(to);animationElements.splice(l--,1);if(e.repeat>1&&!e.next){for(key in to){if(to[has](key)){init[key]=e.totalOrigin[key]}}e.el.attr(init);runAnimation(e.anim,e.el,e.anim.percents[0],null,e.totalOrigin,e.repeat-1)}if(e.next&&!e.stop){runAnimation(e.anim,e.el,e.next,null,e.totalOrigin,e.repeat)}}}R.svg&&that&&that.paper&&that.paper.safari();animationElements.length&&requestAnimFrame(animation)},upto255=function(color){return color>255?255:color<0?0:color};elproto.animateWith=function(el,anim,params,ms,easing,callback){var element=this;if(element.removed){callback&&callback.call(element);return element}var a=params instanceof Animation?params:R.animation(params,ms,easing,callback),x,y;runAnimation(a,element,a.percents[0],null,element.attr());for(var i=0,ii=animationElements.length;i<ii;i++){if(animationElements[i].anim==anim&&animationElements[i].el==el){animationElements[ii-1].start=animationElements[i].start;break}}return element};function CubicBezierAtTime(t,p1x,p1y,p2x,p2y,duration){var cx=3*p1x,bx=3*(p2x-p1x)-cx,ax=1-cx-bx,cy=3*p1y,by=3*(p2y-p1y)-cy,ay=1-cy-by;function sampleCurveX(t){return((ax*t+bx)*t+cx)*t}function solve(x,epsilon){var t=solveCurveX(x,epsilon);return((ay*t+by)*t+cy)*t}function solveCurveX(x,epsilon){var t0,t1,t2,x2,d2,i;for(t2=x,i=0;i<8;i++){x2=sampleCurveX(t2)-x;if(abs(x2)<epsilon){return t2}d2=(3*ax*t2+2*bx)*t2+cx;if(abs(d2)<0.000001){break}t2=t2-x2/d2}t0=0;t1=1;t2=x;if(t2<t0){return t0}if(t2>t1){return t1}while(t0<t1){x2=sampleCurveX(t2);if(abs(x2-x)<epsilon){return t2}if(x>x2){t0=t2}else{t1=t2}t2=(t1-t0)/2+t0}return t2}return solve(t,1/(200*duration))}elproto.onAnimation=function(f){f?eve.on("raphael.anim.frame."+this.id,f):eve.unbind("raphael.anim.frame."+this.id);return this};function Animation(anim,ms){var percents=[],newAnim={};this.ms=ms;this.times=1;if(anim){for(var attr in anim){if(anim[has](attr)){newAnim[toFloat(attr)]=anim[attr];percents.push(toFloat(attr))}}percents.sort(sortByNumber)}this.anim=newAnim;this.top=percents[percents.length-1];this.percents=percents}Animation.prototype.delay=function(delay){var a=new Animation(this.anim,this.ms);a.times=this.times;a.del=+delay||0;return a};Animation.prototype.repeat=function(times){var a=new Animation(this.anim,this.ms);a.del=this.del;a.times=math.floor(mmax(times,0))||1;return a};function runAnimation(anim,element,percent,status,totalOrigin,times){percent=toFloat(percent);var params,isInAnim,isInAnimSet,percents=[],next,prev,timestamp,ms=anim.ms,from={},to={},diff={};if(status){for(i=0,ii=animationElements.length;i<ii;i++){var e=animationElements[i];if(e.el.id==element.id&&e.anim==anim){if(e.percent!=percent){animationElements.splice(i,1);isInAnimSet=1}else{isInAnim=e}element.attr(e.totalOrigin);break}}}else{status=+to}for(var i=0,ii=anim.percents.length;i<ii;i++){if(anim.percents[i]==percent||anim.percents[i]>status*anim.top){percent=anim.percents[i];prev=anim.percents[i-1]||0;ms=ms/anim.top*(percent-prev);next=anim.percents[i+1];params=anim.anim[percent];break}else{if(status){element.attr(anim.anim[anim.percents[i]])}}}if(!params){return }if(!isInAnim){for(var attr in params){if(params[has](attr)){if(availableAnimAttrs[has](attr)||element.paper.customAttributes[has](attr)){from[attr]=element.attr(attr);(from[attr]==null)&&(from[attr]=availableAttrs[attr]);to[attr]=params[attr];switch(availableAnimAttrs[attr]){case nu:diff[attr]=(to[attr]-from[attr])/ms;break;case"colour":from[attr]=R.getRGB(from[attr]);var toColour=R.getRGB(to[attr]);diff[attr]={r:(toColour.r-from[attr].r)/ms,g:(toColour.g-from[attr].g)/ms,b:(toColour.b-from[attr].b)/ms};break;case"path":var pathes=path2curve(from[attr],to[attr]),toPath=pathes[1];from[attr]=pathes[0];diff[attr]=[];for(i=0,ii=from[attr].length;i<ii;i++){diff[attr][i]=[0];for(var j=1,jj=from[attr][i].length;j<jj;j++){diff[attr][i][j]=(toPath[i][j]-from[attr][i][j])/ms}}break;case"transform":var _=element._,eq=equaliseTransform(_[attr],to[attr]);if(eq){from[attr]=eq.from;to[attr]=eq.to;diff[attr]=[];diff[attr].real=true;for(i=0,ii=from[attr].length;i<ii;i++){diff[attr][i]=[from[attr][i][0]];for(j=1,jj=from[attr][i].length;j<jj;j++){diff[attr][i][j]=(to[attr][i][j]-from[attr][i][j])/ms}}}else{var m=(element.matrix||new Matrix),to2={_:{transform:_.transform},getBBox:function(){return element.getBBox(1)}};from[attr]=[m.a,m.b,m.c,m.d,m.e,m.f];extractTransform(to2,to[attr]);to[attr]=to2._.transform;diff[attr]=[(to2.matrix.a-m.a)/ms,(to2.matrix.b-m.b)/ms,(to2.matrix.c-m.c)/ms,(to2.matrix.d-m.d)/ms,(to2.matrix.e-m.e)/ms,(to2.matrix.f-m.f)/ms]}break;case"csv":var values=Str(params[attr])[split](separator),from2=Str(from[attr])[split](separator);if(attr=="clip-rect"){from[attr]=from2;diff[attr]=[];i=from2.length;while(i--){diff[attr][i]=(values[i]-from[attr][i])/ms}}to[attr]=values;break;default:values=[][concat](params[attr]);from2=[][concat](from[attr]);diff[attr]=[];i=element.paper.customAttributes[attr].length;while(i--){diff[attr][i]=((values[i]||0)-(from2[i]||0))/ms}break}}}}var easing=params.easing,easyeasy=R.easing_formulas[easing];if(!easyeasy){easyeasy=Str(easing).match(bezierrg);if(easyeasy&&easyeasy.length==5){var curve=easyeasy;easyeasy=function(t){return CubicBezierAtTime(t,+curve[1],+curve[2],+curve[3],+curve[4],ms)}}else{easyeasy=pipe}}timestamp=params.start||anim.start||+new Date;e={anim:anim,percent:percent,timestamp:timestamp,start:timestamp+(anim.del||0),status:0,initstatus:status||0,stop:false,ms:ms,easing:easyeasy,from:from,diff:diff,to:to,el:element,callback:params.callback,prev:prev,next:next,repeat:times||anim.times,origin:element.attr(),totalOrigin:totalOrigin};animationElements.push(e);if(status&&!isInAnim&&!isInAnimSet){e.stop=true;e.start=new Date-ms*status;if(animationElements.length==1){return animation()}}if(isInAnimSet){e.start=new Date-e.ms*status}animationElements.length==1&&requestAnimFrame(animation)}else{isInAnim.initstatus=status;isInAnim.start=new Date-isInAnim.ms*status}eve("raphael.anim.start."+element.id,element,anim)}R.animation=function(params,ms,easing,callback){if(params instanceof Animation){return params}if(R.is(easing,"function")||!easing){callback=callback||easing||null;easing=null}params=Object(params);ms=+ms||0;var p={},json,attr;for(attr in params){if(params[has](attr)&&toFloat(attr)!=attr&&toFloat(attr)+"%"!=attr){json=true;p[attr]=params[attr]}}if(!json){return new Animation(params,ms)}else{easing&&(p.easing=easing);callback&&(p.callback=callback);return new Animation({100:p},ms)}};elproto.animate=function(params,ms,easing,callback){var element=this;if(element.removed){callback&&callback.call(element);return element}var anim=params instanceof Animation?params:R.animation(params,ms,easing,callback);runAnimation(anim,element,anim.percents[0],null,element.attr());return element};elproto.setTime=function(anim,value){if(anim&&value!=null){this.status(anim,mmin(value,anim.ms)/anim.ms)}return this};elproto.status=function(anim,value){var out=[],i=0,len,e;if(value!=null){runAnimation(anim,this,-1,mmin(value,1));return this}else{len=animationElements.length;for(;i<len;i++){e=animationElements[i];if(e.el.id==this.id&&(!anim||e.anim==anim)){if(anim){return e.status}out.push({anim:e.anim,status:e.status})}}if(anim){return 0}return out}};elproto.pause=function(anim){for(var i=0;i<animationElements.length;i++){if(animationElements[i].el.id==this.id&&(!anim||animationElements[i].anim==anim)){if(eve("raphael.anim.pause."+this.id,this,animationElements[i].anim)!==false){animationElements[i].paused=true}}}return this};elproto.resume=function(anim){for(var i=0;i<animationElements.length;i++){if(animationElements[i].el.id==this.id&&(!anim||animationElements[i].anim==anim)){var e=animationElements[i];if(eve("raphael.anim.resume."+this.id,this,e.anim)!==false){delete e.paused;this.status(e.anim,e.status)}}}return this};elproto.stop=function(anim){for(var i=0;i<animationElements.length;i++){if(animationElements[i].el.id==this.id&&(!anim||animationElements[i].anim==anim)){if(eve("raphael.anim.stop."+this.id,this,animationElements[i].anim)!==false){animationElements.splice(i--,1)}}}return this};function stopAnimation(paper){for(var i=0;i<animationElements.length;i++){if(animationElements[i].el.paper==paper){animationElements.splice(i--,1)}}}eve.on("raphael.remove",stopAnimation);eve.on("raphael.clear",stopAnimation);elproto.toString=function(){return"Rapha\xebl\u2019s object"};var Set=function(items){this.items=[];this.length=0;this.type="set";if(items){for(var i=0,ii=items.length;i<ii;i++){if(items[i]&&(items[i].constructor==elproto.constructor||items[i].constructor==Set)){this[this.items.length]=this.items[this.items.length]=items[i];this.length++}}}},setproto=Set.prototype;setproto.push=function(){var item,len;for(var i=0,ii=arguments.length;i<ii;i++){item=arguments[i];if(item&&(item.constructor==elproto.constructor||item.constructor==Set)){len=this.items.length;this[len]=this.items[len]=item;this.length++}}return this};setproto.pop=function(){this.length&&delete this[this.length--];return this.items.pop()};setproto.forEach=function(callback,thisArg){for(var i=0,ii=this.items.length;i<ii;i++){if(callback.call(thisArg,this.items[i],i)===false){return this}}return this};for(var method in elproto){if(elproto[has](method)){setproto[method]=(function(methodname){return function(){var arg=arguments;return this.forEach(function(el){el[methodname][apply](el,arg)})}})(method)}}setproto.attr=function(name,value){if(name&&R.is(name,array)&&R.is(name[0],"object")){for(var j=0,jj=name.length;j<jj;j++){this.items[j].attr(name[j])}}else{for(var i=0,ii=this.items.length;i<ii;i++){this.items[i].attr(name,value)}}return this};setproto.clear=function(){while(this.length){this.pop()}};setproto.splice=function(index,count,insertion){index=index<0?mmax(this.length+index,0):index;count=mmax(0,mmin(this.length-index,count));var tail=[],todel=[],args=[],i;for(i=2;i<arguments.length;i++){args.push(arguments[i])}for(i=0;i<count;i++){todel.push(this[index+i])}for(;i<this.length-index;i++){tail.push(this[index+i])}var arglen=args.length;for(i=0;i<arglen+tail.length;i++){this.items[index+i]=this[index+i]=i<arglen?args[i]:tail[i-arglen]}i=this.items.length=this.length-=count-arglen;while(this[i]){delete this[i++]}return new Set(todel)};setproto.exclude=function(el){for(var i=0,ii=this.length;i<ii;i++){if(this[i]==el){this.splice(i,1);return true}}};setproto.animate=function(params,ms,easing,callback){(R.is(easing,"function")||!easing)&&(callback=easing||null);var len=this.items.length,i=len,item,set=this,collector;if(!len){return this}callback&&(collector=function(){!--len&&callback.call(set)});easing=R.is(easing,string)?easing:collector;var anim=R.animation(params,ms,easing,collector);item=this.items[--i].animate(anim);while(i--){this.items[i]&&!this.items[i].removed&&this.items[i].animateWith(item,anim,anim)}return this};setproto.insertAfter=function(el){var i=this.items.length;while(i--){this.items[i].insertAfter(el)}return this};setproto.getBBox=function(){var x=[],y=[],x2=[],y2=[];for(var i=this.items.length;i--;){if(!this.items[i].removed){var box=this.items[i].getBBox();x.push(box.x);y.push(box.y);x2.push(box.x+box.width);y2.push(box.y+box.height)}}x=mmin[apply](0,x);y=mmin[apply](0,y);x2=mmax[apply](0,x2);y2=mmax[apply](0,y2);return{x:x,y:y,x2:x2,y2:y2,width:x2-x,height:y2-y}};setproto.clone=function(s){s=new Set;for(var i=0,ii=this.items.length;i<ii;i++){s.push(this.items[i].clone())}return s};setproto.toString=function(){return"Rapha\xebl\u2018s set"};R.registerFont=function(font){if(!font.face){return font}this.fonts=this.fonts||{};var fontcopy={w:font.w,face:{},glyphs:{}},family=font.face["font-family"];for(var prop in font.face){if(font.face[has](prop)){fontcopy.face[prop]=font.face[prop]}}if(this.fonts[family]){this.fonts[family].push(fontcopy)}else{this.fonts[family]=[fontcopy]}if(!font.svg){fontcopy.face["units-per-em"]=toInt(font.face["units-per-em"],10);for(var glyph in font.glyphs){if(font.glyphs[has](glyph)){var path=font.glyphs[glyph];fontcopy.glyphs[glyph]={w:path.w,k:{},d:path.d&&"M"+path.d.replace(/[mlcxtrv]/g,function(command){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[command]||"M"})+"z"};if(path.k){for(var k in path.k){if(path[has](k)){fontcopy.glyphs[glyph].k[k]=path.k[k]}}}}}}return font};paperproto.getFont=function(family,weight,style,stretch){stretch=stretch||"normal";style=style||"normal";weight=+weight||{normal:400,bold:700,lighter:300,bolder:800}[weight]||400;if(!R.fonts){return }var font=R.fonts[family];if(!font){var name=new RegExp("(^|\\s)"+family.replace(/[^\w\d\s+!~.:_-]/g,E)+"(\\s|$)","i");for(var fontName in R.fonts){if(R.fonts[has](fontName)){if(name.test(fontName)){font=R.fonts[fontName];break}}}}var thefont;if(font){for(var i=0,ii=font.length;i<ii;i++){thefont=font[i];if(thefont.face["font-weight"]==weight&&(thefont.face["font-style"]==style||!thefont.face["font-style"])&&thefont.face["font-stretch"]==stretch){break}}}return thefont};paperproto.print=function(x,y,string,font,size,origin,letter_spacing){origin=origin||"middle";letter_spacing=mmax(mmin(letter_spacing||0,1),-1);var letters=Str(string)[split](E),shift=0,notfirst=0,path=E,scale;R.is(font,string)&&(font=this.getFont(font));if(font){scale=(size||16)/font.face["units-per-em"];var bb=font.face.bbox[split](separator),top=+bb[0],lineHeight=bb[3]-bb[1],shifty=0,height=+bb[1]+(origin=="baseline"?lineHeight+(+font.face.descent):lineHeight/2);for(var i=0,ii=letters.length;i<ii;i++){if(letters[i]=="\n"){shift=0;curr=0;notfirst=0;shifty+=lineHeight}else{var prev=notfirst&&font.glyphs[letters[i-1]]||{},curr=font.glyphs[letters[i]];shift+=notfirst?(prev.w||font.w)+(prev.k&&prev.k[letters[i]]||0)+(font.w*letter_spacing):0;notfirst=1}if(curr&&curr.d){path+=R.transformPath(curr.d,["t",shift*scale,shifty*scale,"s",scale,scale,top,height,"t",(x-top)/scale,(y-height)/scale])}}}return this.path(path).attr({fill:"#000",stroke:"none"})};paperproto.add=function(json){if(R.is(json,"array")){var res=this.set(),i=0,ii=json.length,j;for(;i<ii;i++){j=json[i]||{};elements[has](j.type)&&res.push(this[j.type]().attr(j))}}return res};R.format=function(token,params){var args=R.is(params,array)?[0][concat](params):arguments;token&&R.is(token,string)&&args.length-1&&(token=token.replace(formatrg,function(str,i){return args[++i]==null?E:args[i]}));return token||E};R.fullfill=(function(){var tokenRegex=/\{([^\}]+)\}/g,objNotationRegex=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,replacer=function(all,key,obj){var res=obj;key.replace(objNotationRegex,function(all,name,quote,quotedName,isFunc){name=name||quotedName;if(res){if(name in res){res=res[name]}typeof res=="function"&&isFunc&&(res=res())}});res=(res==null||res==obj?all:res)+"";return res};return function(str,obj){return String(str).replace(tokenRegex,function(all,key){return replacer(all,key,obj)})}})();R.ninja=function(){oldRaphael.was?(g.win.Raphael=oldRaphael.is):delete Raphael;return R};R.st=setproto;(function(doc,loaded,f){if(doc.readyState==null&&doc.addEventListener){doc.addEventListener(loaded,f=function(){doc.removeEventListener(loaded,f,false);doc.readyState="complete"},false);doc.readyState="loading"}function isLoaded(){(/in/).test(doc.readyState)?setTimeout(isLoaded,9):R.eve("raphael.DOMload")}isLoaded()})(document,"DOMContentLoaded");oldRaphael.was?(g.win.Raphael=R):(Raphael=R);eve.on("raphael.DOMload",function(){loaded=true})})();window.Raphael&&window.Raphael.svg&&function(M){var D="hasOwnProperty",e=String,O=parseFloat,T=parseInt,G=Math,f=G.max,V=G.abs,I=G.pow,H=/[, ]+/,c=M.eve,U="",K=" ";var P="http://www.w3.org/1999/xlink",b={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},X={};M.toString=function(){return"Your browser supports SVG.\nYou are running Rapha\xebl "+this.version};var J=function(S,E){if(E){if(typeof S=="string"){S=J(S)}for(var R in E){if(E[D](R)){if(R.substring(0,6)=="xlink:"){S.setAttributeNS(P,R.substring(6),e(E[R]))}else{S.setAttribute(R,e(E[R]))}}}}else{S=M._g.doc.createElementNS("http://www.w3.org/2000/svg",S);S.style&&(S.style.webkitTapHighlightColor="rgba(0,0,0,0)")}return S},A=function(n,t){var q="linear",R=n.id+t,l=0.5,j=0.5,g=n.node,E=n.paper,v=g.style,S=M._g.doc.getElementById(R);if(!S){t=e(t).replace(M._radial_gradient,function(s,i,w){q="radial";if(i&&w){l=O(i);j=O(w);var o=((j>0.5)*2-1);I(l-0.5,2)+I(j-0.5,2)>0.25&&(j=G.sqrt(0.25-I(l-0.5,2))*o+0.5)&&j!=0.5&&(j=j.toFixed(5)-0.00001*o)}return U});t=t.split(/\s*\-\s*/);if(q=="linear"){var k=t.shift();k=-O(k);if(isNaN(k)){return null}var h=[0,0,G.cos(M.rad(k)),G.sin(M.rad(k))],r=1/(f(V(h[2]),V(h[3]))||1);h[2]*=r;h[3]*=r;if(h[2]<0){h[0]=-h[2];h[2]=0}if(h[3]<0){h[1]=-h[3];h[3]=0}}var p=M._parseDots(t);if(!p){return null}R=R.replace(/[\(\)\s,\xb0#]/g,"_");if(n.gradient&&R!=n.gradient.id){E.defs.removeChild(n.gradient);delete n.gradient}if(!n.gradient){S=J(q+"Gradient",{id:R});n.gradient=S;J(S,q=="radial"?{fx:l,fy:j}:{x1:h[0],y1:h[1],x2:h[2],y2:h[3],gradientTransform:n.matrix.invert()});E.defs.appendChild(S);for(var m=0,u=p.length;m<u;m++){S.appendChild(J("stop",{offset:p[m].offset?p[m].offset:m?"100%":"0%","stop-color":p[m].color||"#fff"}))}}}J(g,{fill:"url(#"+R+")",opacity:1,"fill-opacity":1});v.fill=U;v.opacity=1;v.fillOpacity=1;return 1},B=function(R){var E=R.getBBox(1);J(R.pattern,{patternTransform:R.matrix.invert()+" translate("+E.x+","+E.y+")"})},C=function(s,v,l){if(s.type=="path"){var E=e(v).toLowerCase().split("-"),r=s.paper,AH=l?"end":"start",y=s.node,u=s.attrs,k=u["stroke-width"],AC=E.length,g="classic",AB,S,n,z,x,m=3,AD=3,q=5;while(AC--){switch(E[AC]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":g=E[AC];break;case"wide":AD=5;break;case"narrow":AD=2;break;case"long":m=5;break;case"short":m=2;break}}if(g=="open"){m+=2;AD+=2;q+=2;n=1;z=l?4:1;x={fill:"none",stroke:u.stroke}}else{z=n=m/2;x={fill:u.stroke,stroke:"none"}}if(s._.arrows){if(l){s._.arrows.endPath&&X[s._.arrows.endPath]--;s._.arrows.endMarker&&X[s._.arrows.endMarker]--}else{s._.arrows.startPath&&X[s._.arrows.startPath]--;s._.arrows.startMarker&&X[s._.arrows.startMarker]--}}else{s._.arrows={}}if(g!="none"){var R="raphael-marker-"+g,AG="raphael-marker-"+AH+g+m+AD;if(!M._g.doc.getElementById(R)){r.defs.appendChild(J(J("path"),{"stroke-linecap":"round",d:b[g],id:R}));X[R]=1}else{X[R]++}var j=M._g.doc.getElementById(AG),AA;if(!j){j=J(J("marker"),{id:AG,markerHeight:AD,markerWidth:m,orient:"auto",refX:z,refY:AD/2});AA=J(J("use"),{"xlink:href":"#"+R,transform:(l?"rotate(180 "+m/2+" "+AD/2+") ":U)+"scale("+m/q+","+AD/q+")","stroke-width":(1/((m/q+AD/q)/2)).toFixed(4)});j.appendChild(AA);r.defs.appendChild(j);X[AG]=1}else{X[AG]++;AA=j.getElementsByTagName("use")[0]}J(AA,x);var AF=n*(g!="diamond"&&g!="oval");if(l){AB=s._.arrows.startdx*k||0;S=M.getTotalLength(u.path)-AF*k}else{AB=AF*k;S=M.getTotalLength(u.path)-(s._.arrows.enddx*k||0)}x={};x["marker-"+AH]="url(#"+AG+")";if(S||AB){x.d=Raphael.getSubpath(u.path,AB,S)}J(y,x);s._.arrows[AH+"Path"]=R;s._.arrows[AH+"Marker"]=AG;s._.arrows[AH+"dx"]=AF;s._.arrows[AH+"Type"]=g;s._.arrows[AH+"String"]=v}else{if(l){AB=s._.arrows.startdx*k||0;S=M.getTotalLength(u.path)-AB}else{AB=0;S=M.getTotalLength(u.path)-(s._.arrows.enddx*k||0)}s._.arrows[AH+"Path"]&&J(y,{d:Raphael.getSubpath(u.path,AB,S)});delete s._.arrows[AH+"Path"];delete s._.arrows[AH+"Marker"];delete s._.arrows[AH+"dx"];delete s._.arrows[AH+"Type"];delete s._.arrows[AH+"String"]}for(x in X){if(X[D](x)&&!X[x]){var AE=M._g.doc.getElementById(x);AE&&AE.parentNode.removeChild(AE)}}}},Y={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},L=function(k,h,j){h=Y[e(h).toLowerCase()];if(h){var S=k.attrs["stroke-width"]||"1",E={round:S,square:S,butt:0}[k.attrs["stroke-linecap"]||j["stroke-linecap"]]||0,g=[],R=h.length;while(R--){g[R]=h[R]*S+((R%2)?1:-1)*E}J(k.node,{"stroke-dasharray":g.join(",")})}},Z=function(p,x){var t=p.node,q=p.attrs,m=t.style.visibility;t.style.visibility="hidden";for(var s in x){if(x[D](s)){if(!M._availableAttrs[D](s)){continue}var r=x[s];q[s]=r;switch(s){case"blur":p.blur(r);break;case"href":case"title":case"target":var v=t.parentNode;if(v.tagName.toLowerCase()!="a"){var h=J("a");v.insertBefore(h,t);h.appendChild(t);v=h}if(s=="target"){v.setAttributeNS(P,"show",r=="blank"?"new":r)}else{v.setAttributeNS(P,s,r)}break;case"cursor":t.style.cursor=r;break;case"transform":p.transform(r);break;case"arrow-start":C(p,r);break;case"arrow-end":C(p,r,1);break;case"clip-rect":var R=e(r).split(H);if(R.length==4){p.clip&&p.clip.parentNode.parentNode.removeChild(p.clip.parentNode);var S=J("clipPath"),u=J("rect");S.id=M.createUUID();J(u,{x:R[0],y:R[1],width:R[2],height:R[3]});S.appendChild(u);p.paper.defs.appendChild(S);J(t,{"clip-path":"url(#"+S.id+")"});p.clip=u}if(!r){var n=t.getAttribute("clip-path");if(n){var w=M._g.doc.getElementById(n.replace(/(^url\(#|\)$)/g,U));w&&w.parentNode.removeChild(w);J(t,{"clip-path":U});delete p.clip}}break;case"path":if(p.type=="path"){J(t,{d:r?q.path=M._pathToAbsolute(r):"M0,0"});p._.dirty=1;if(p._.arrows){"startString" in p._.arrows&&C(p,p._.arrows.startString);"endString" in p._.arrows&&C(p,p._.arrows.endString,1)}}break;case"width":t.setAttribute(s,r);p._.dirty=1;if(q.fx){s="x";r=q.x}else{break}case"x":if(q.fx){r=-q.x-(q.width||0)}case"rx":if(s=="rx"&&p.type=="rect"){break}case"cx":t.setAttribute(s,r);p.pattern&&B(p);p._.dirty=1;break;case"height":t.setAttribute(s,r);p._.dirty=1;if(q.fy){s="y";r=q.y}else{break}case"y":if(q.fy){r=-q.y-(q.height||0)}case"ry":if(s=="ry"&&p.type=="rect"){break}case"cy":t.setAttribute(s,r);p.pattern&&B(p);p._.dirty=1;break;case"r":if(p.type=="rect"){J(t,{rx:r,ry:r})}else{t.setAttribute(s,r)}p._.dirty=1;break;case"src":if(p.type=="image"){t.setAttributeNS(P,"href",r)}break;case"stroke-width":if(p._.sx!=1||p._.sy!=1){r/=f(V(p._.sx),V(p._.sy))||1}if(p.paper._vbSize){r*=p.paper._vbSize}t.setAttribute(s,r);if(q["stroke-dasharray"]){L(p,q["stroke-dasharray"],x)}if(p._.arrows){"startString" in p._.arrows&&C(p,p._.arrows.startString);"endString" in p._.arrows&&C(p,p._.arrows.endString,1)}break;case"stroke-dasharray":L(p,r,x);break;case"fill":var i=e(r).match(M._ISURL);if(i){S=J("pattern");var l=J("image");S.id=M.createUUID();J(S,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1});J(l,{x:0,y:0,"xlink:href":i[1]});S.appendChild(l);(function(o){M._preload(i[1],function(){var y=this.offsetWidth,z=this.offsetHeight;J(o,{width:y,height:z});J(l,{width:y,height:z});p.paper.safari()})})(S);p.paper.defs.appendChild(S);J(t,{fill:"url(#"+S.id+")"});p.pattern=S;p.pattern&&B(p);break}var g=M.getRGB(r);if(!g.error){delete x.gradient;delete q.gradient;!M.is(q.opacity,"undefined")&&M.is(x.opacity,"undefined")&&J(t,{opacity:q.opacity});!M.is(q["fill-opacity"],"undefined")&&M.is(x["fill-opacity"],"undefined")&&J(t,{"fill-opacity":q["fill-opacity"]})}else{if((p.type=="circle"||p.type=="ellipse"||e(r).charAt()!="r")&&A(p,r)){if("opacity" in q||"fill-opacity" in q){var E=M._g.doc.getElementById(t.getAttribute("fill").replace(/^url\(#|\)$/g,U));if(E){var j=E.getElementsByTagName("stop");J(j[j.length-1],{"stop-opacity":("opacity" in q?q.opacity:1)*("fill-opacity" in q?q["fill-opacity"]:1)})}}q.gradient=r;q.fill="none";break}}g[D]("opacity")&&J(t,{"fill-opacity":g.opacity>1?g.opacity/100:g.opacity});case"stroke":g=M.getRGB(r);t.setAttribute(s,g.hex);s=="stroke"&&g[D]("opacity")&&J(t,{"stroke-opacity":g.opacity>1?g.opacity/100:g.opacity});if(s=="stroke"&&p._.arrows){"startString" in p._.arrows&&C(p,p._.arrows.startString);"endString" in p._.arrows&&C(p,p._.arrows.endString,1)}break;case"gradient":(p.type=="circle"||p.type=="ellipse"||e(r).charAt()!="r")&&A(p,r);break;case"opacity":if(q.gradient&&!q[D]("stroke-opacity")){J(t,{"stroke-opacity":r>1?r/100:r})}case"fill-opacity":if(q.gradient){E=M._g.doc.getElementById(t.getAttribute("fill").replace(/^url\(#|\)$/g,U));if(E){j=E.getElementsByTagName("stop");J(j[j.length-1],{"stop-opacity":r})}break}default:s=="font-size"&&(r=T(r,10)+"px");var k=s.replace(/(\-.)/g,function(o){return o.substring(1).toUpperCase()});t.style[k]=r;p._.dirty=1;t.setAttribute(s,r);break}}}Q(p,x);t.style.visibility=m},d=1.2,Q=function(E,h){if(E.type!="text"||!(h[D]("text")||h[D]("font")||h[D]("font-size")||h[D]("x")||h[D]("y"))){return }var n=E.attrs,S=E.node,p=S.firstChild?T(M._g.doc.defaultView.getComputedStyle(S.firstChild,U).getPropertyValue("font-size"),10):10;if(h[D]("text")){n.text=h.text;while(S.firstChild){S.removeChild(S.firstChild)}var g=e(h.text).split("\n"),R=[],l;for(var j=0,o=g.length;j<o;j++){l=J("tspan");j&&J(l,{dy:p*d,x:n.x});l.appendChild(M._g.doc.createTextNode(g[j]));S.appendChild(l);R[j]=l}}else{R=S.getElementsByTagName("tspan");for(j=0,o=R.length;j<o;j++){if(j){J(R[j],{dy:p*d,x:n.x})}else{J(R[0],{dy:0})}}}J(S,{x:n.x,y:n.y});E._.dirty=1;var k=E._getBBox(),m=n.y-(k.y+k.height/2);m&&M.is(m,"finite")&&J(R[0],{dy:m})},W=function(R,E){var g=0,S=0;this[0]=this.node=R;R.raphael=true;this.id=M._oid++;R.raphaelid=this.id;this.matrix=M.matrix();this.realPath=null;this.paper=E;this.attrs=this.attrs||{};this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1};!E.bottom&&(E.bottom=this);this.prev=E.top;E.top&&(E.top.next=this);E.top=this;this.next=null},N=M.el;W.prototype=N;N.constructor=W;M._engine.path=function(E,g){var R=J("path");g.canvas&&g.canvas.appendChild(R);var S=new W(R,g);S.type="path";Z(S,{fill:"none",stroke:"#000",path:E});return S};N.rotate=function(R,E,g){if(this.removed){return this}R=e(R).split(H);if(R.length-1){E=O(R[1]);g=O(R[2])}R=O(R[0]);(g==null)&&(E=g);if(E==null||g==null){var S=this.getBBox(1);E=S.x+S.width/2;g=S.y+S.height/2}this.transform(this._.transform.concat([["r",R,E,g]]));return this};N.scale=function(h,S,E,g){if(this.removed){return this}h=e(h).split(H);if(h.length-1){S=O(h[1]);E=O(h[2]);g=O(h[3])}h=O(h[0]);(S==null)&&(S=h);(g==null)&&(E=g);if(E==null||g==null){var R=this.getBBox(1)}E=E==null?R.x+R.width/2:E;g=g==null?R.y+R.height/2:g;this.transform(this._.transform.concat([["s",h,S,E,g]]));return this};N.translate=function(R,E){if(this.removed){return this}R=e(R).split(H);if(R.length-1){E=O(R[1])}R=O(R[0])||0;E=+E||0;this.transform(this._.transform.concat([["t",R,E]]));return this};N.transform=function(R){var S=this._;if(R==null){return S.transform}M._extractTransform(this,R);this.clip&&J(this.clip,{transform:this.matrix.invert()});this.pattern&&B(this);this.node&&J(this.node,{transform:this.matrix});if(S.sx!=1||S.sy!=1){var E=this.attrs[D]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":E})}return this};N.hide=function(){!this.removed&&this.paper.safari(this.node.style.display="none");return this};N.show=function(){!this.removed&&this.paper.safari(this.node.style.display="");return this};N.remove=function(){if(this.removed||!this.node.parentNode){return }var R=this.paper;R.__set__&&R.__set__.exclude(this);c.unbind("raphael.*.*."+this.id);if(this.gradient){R.defs.removeChild(this.gradient)}M._tear(this,R);if(this.node.parentNode.tagName.toLowerCase()=="a"){this.node.parentNode.parentNode.removeChild(this.node.parentNode)}else{this.node.parentNode.removeChild(this.node)}for(var E in this){this[E]=typeof this[E]=="function"?M._removedFactory(E):null}this.removed=true};N._getBBox=function(){if(this.node.style.display=="none"){this.show();var E=true}var S={};try{S=this.node.getBBox()}catch(R){}finally{S=S||{}}E&&this.hide();return S};N.attr=function(E,n){if(this.removed){return this}if(E==null){var k={};for(var m in this.attrs){if(this.attrs[D](m)){k[m]=this.attrs[m]}}k.gradient&&k.fill=="none"&&(k.fill=k.gradient)&&delete k.gradient;k.transform=this._.transform;return k}if(n==null&&M.is(E,"string")){if(E=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient){return this.attrs.gradient}if(E=="transform"){return this._.transform}var l=E.split(H),g={};for(var h=0,p=l.length;h<p;h++){E=l[h];if(E in this.attrs){g[E]=this.attrs[E]}else{if(M.is(this.paper.customAttributes[E],"function")){g[E]=this.paper.customAttributes[E].def}else{g[E]=M._availableAttrs[E]}}}return p-1?g:g[l[0]]}if(n==null&&M.is(E,"array")){g={};for(h=0,p=E.length;h<p;h++){g[E[h]]=this.attr(E[h])}return g}if(n!=null){var R={};R[E]=n}else{if(E!=null&&M.is(E,"object")){R=E}}for(var o in R){c("raphael.attr."+o+"."+this.id,this,R[o])}for(o in this.paper.customAttributes){if(this.paper.customAttributes[D](o)&&R[D](o)&&M.is(this.paper.customAttributes[o],"function")){var j=this.paper.customAttributes[o].apply(this,[].concat(R[o]));this.attrs[o]=R[o];for(var S in j){if(j[D](S)){R[S]=j[S]}}}}Z(this,R);return this};N.toFront=function(){if(this.removed){return this}if(this.node.parentNode.tagName.toLowerCase()=="a"){this.node.parentNode.parentNode.appendChild(this.node.parentNode)}else{this.node.parentNode.appendChild(this.node)}var E=this.paper;E.top!=this&&M._tofront(this,E);return this};N.toBack=function(){if(this.removed){return this}var R=this.node.parentNode;if(R.tagName.toLowerCase()=="a"){R.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild)}else{if(R.firstChild!=this.node){R.insertBefore(this.node,this.node.parentNode.firstChild)}}M._toback(this,this.paper);var E=this.paper;return this};N.insertAfter=function(E){if(this.removed){return this}var R=E.node||E[E.length-1].node;if(R.nextSibling){R.parentNode.insertBefore(this.node,R.nextSibling)}else{R.parentNode.appendChild(this.node)}M._insertafter(this,E,this.paper);return this};N.insertBefore=function(E){if(this.removed){return this}var R=E.node||E[0].node;R.parentNode.insertBefore(this.node,R);M._insertbefore(this,E,this.paper);return this};N.blur=function(R){var E=this;if(+R!==0){var S=J("filter"),g=J("feGaussianBlur");E.attrs.blur=R;S.id=M.createUUID();J(g,{stdDeviation:+R||1.5});S.appendChild(g);E.paper.defs.appendChild(S);E._blur=S;J(E.node,{filter:"url(#"+S.id+")"})}else{if(E._blur){E._blur.parentNode.removeChild(E._blur);delete E._blur;delete E.attrs.blur}E.node.removeAttribute("filter")}};M._engine.circle=function(R,E,i,h){var g=J("circle");R.canvas&&R.canvas.appendChild(g);var S=new W(g,R);S.attrs={cx:E,cy:i,r:h,fill:"none",stroke:"#000"};S.type="circle";J(g,S.attrs);return S};M._engine.rect=function(S,E,l,R,j,k){var i=J("rect");S.canvas&&S.canvas.appendChild(i);var g=new W(i,S);g.attrs={x:E,y:l,width:R,height:j,r:k||0,rx:k||0,ry:k||0,fill:"none",stroke:"#000"};g.type="rect";J(i,g.attrs);return g};M._engine.ellipse=function(R,E,j,i,h){var g=J("ellipse");R.canvas&&R.canvas.appendChild(g);var S=new W(g,R);S.attrs={cx:E,cy:j,rx:i,ry:h,fill:"none",stroke:"#000"};S.type="ellipse";J(g,S.attrs);return S};M._engine.image=function(S,k,E,l,R,j){var i=J("image");J(i,{x:E,y:l,width:R,height:j,preserveAspectRatio:"none"});i.setAttributeNS(P,"href",k);S.canvas&&S.canvas.appendChild(i);var g=new W(i,S);g.attrs={x:E,y:l,width:R,height:j,src:k};g.type="image";return g};M._engine.text=function(R,E,i,h){var g=J("text");R.canvas&&R.canvas.appendChild(g);var S=new W(g,R);S.attrs={x:E,y:i,"text-anchor":"middle",text:h,font:M._availableAttrs.font,stroke:"none",fill:"#000"};S.type="text";Z(S,S.attrs);return S};M._engine.setSize=function(R,E){this.width=R||this.width;this.height=E||this.height;this.canvas.setAttribute("width",this.width);this.canvas.setAttribute("height",this.height);if(this._viewBox){this.setViewBox.apply(this,this._viewBox)}return this};M._engine.create=function(){var g=M._getContainer.apply(0,arguments),R=g&&g.container,k=g.x,j=g.y,S=g.width,l=g.height;if(!R){throw new Error("SVG container not found.")}var E=J("svg"),i="overflow:hidden;",h;k=k||0;j=j||0;S=S||512;l=l||342;J(E,{height:l,version:1.1,width:S,xmlns:"http://www.w3.org/2000/svg"});if(R==1){E.style.cssText=i+"position:absolute;left:"+k+"px;top:"+j+"px";M._g.doc.body.appendChild(E);h=1}else{E.style.cssText=i+"position:relative";if(R.firstChild){R.insertBefore(E,R.firstChild)}else{R.appendChild(E)}}R=new M._Paper;R.width=S;R.height=l;R.canvas=E;R.clear();R._left=R._top=0;h&&(R.renderfix=function(){});R.renderfix();return R};M._engine.setViewBox=function(j,g,l,E,R){c("raphael.setViewBox",this,this._viewBox,[j,g,l,E,R]);var n=f(l/this.width,E/this.height),i=this.top,m=R?"meet":"xMinYMin",S,k;if(j==null){if(this._vbSize){n=1}delete this._vbSize;S="0 0 "+this.width+K+this.height}else{this._vbSize=n;S=j+K+g+K+l+K+E}J(this.canvas,{viewBox:S,preserveAspectRatio:m});while(n&&i){k="stroke-width" in i.attrs?i.attrs["stroke-width"]:1;i.attr({"stroke-width":k});i._.dirty=1;i._.dirtyT=1;i=i.prev}this._viewBox=[j,g,l,E,!!R];return this};M.prototype.renderfix=function(){var i=this.canvas,E=i.style,h;try{h=i.getScreenCTM()||i.createSVGMatrix()}catch(g){h=i.createSVGMatrix()}var S=-h.e%1,R=-h.f%1;if(S||R){if(S){this._left=(this._left+S)%1;E.left=this._left+"px"}if(R){this._top=(this._top+R)%1;E.top=this._top+"px"}}};M.prototype.clear=function(){M.eve("raphael.clear",this);var E=this.canvas;while(E.firstChild){E.removeChild(E.firstChild)}this.bottom=this.top=null;(this.desc=J("desc")).appendChild(M._g.doc.createTextNode("Created with Rapha\xebl "+M.version));E.appendChild(this.desc);E.appendChild(this.defs=J("defs"))};M.prototype.remove=function(){c("raphael.remove",this);this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var E in this){this[E]=typeof this[E]=="function"?M._removedFactory(E):null}};var a=M.st;for(var F in N){if(N[D](F)&&!a[D](F)){a[F]=(function(E){return function(){var R=arguments;return this.forEach(function(S){S[E].apply(S,R)})}})(F)}}}(window.Raphael);window.Raphael&&window.Raphael.vml&&function(M){var F="hasOwnProperty",h=String,O=parseFloat,I=Math,e=I.round,k=I.max,f=I.min,V=I.abs,Y="fill",J=/[, ]+/,d=M.eve,Z=" progid:DXImageTransform.Microsoft",L=" ",T="",g={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},K=/([clmz]),?([^clmz]*)/gi,W=/ progid:\S+Blur\([^\)]+\)/g,j=/-?[^,\s-]+/g,D="position:absolute;left:0;top:0;width:1px;height:1px",B=21600,c={path:1,rect:1,image:1},U={circle:1,ellipse:1},G=function(u){var q=/[ahqstv]/ig,S=M._pathToAbsolute;h(u).match(q)&&(S=M._path2curve);q=/[clmz]/g;if(S==M._pathToAbsolute&&!h(u).match(q)){var o=h(u).replace(K,function(w,y,r){var x=[],p=y.toLowerCase()=="m",v=g[y];r.replace(j,function(z){if(p&&x.length==2){v+=x+g[y=="m"?"l":"L"];x=[]}x.push(e(z*B))});return v+x});return o}var s=S(u),R,E;o=[];for(var m=0,t=s.length;m<t;m++){R=s[m];E=s[m][0].toLowerCase();E=="z"&&(E="x");for(var l=1,n=R.length;l<n;l++){E+=e(R[l]*B)+(l!=n-1?",":T)}o.push(E)}return o.join(L)},P=function(l,S,R){var E=M.matrix();E.rotate(-l,0.5,0.5);return{dx:E.x(S,R),dy:E.y(S,R)}},Q=function(v,u,t,n,l,q){var AE=v._,x=v.matrix,E=AE.fillpos,w=v.node,r=w.style,S=1,R="",AA,AC=B/u,AB=B/t;r.visibility="hidden";if(!u||!t){return }w.coordsize=V(AC)+L+V(AB);r.rotation=q*(u*t<0?-1:1);if(q){var AD=P(q,n,l);n=AD.dx;l=AD.dy}u<0&&(R+="x");t<0&&(R+=" y")&&(S=-1);r.flip=R;w.coordorigin=(n*-AC)+L+(l*-AB);if(E||AE.fillsize){var z=w.getElementsByTagName(Y);z=z&&z[0];w.removeChild(z);if(E){AD=P(q,x.x(E[0],E[1]),x.y(E[0],E[1]));z.position=AD.dx*S+L+AD.dy*S}if(AE.fillsize){z.size=AE.fillsize[0]*V(u)+L+AE.fillsize[1]*V(t)}w.appendChild(z)}r.visibility="visible"};M.toString=function(){return"Your browser doesn\u2019t support SVG. Falling down to VML.\nYou are running Rapha\xebl "+this.version};var C=function(E,p,R){var r=h(p).toLowerCase().split("-"),m=R?"end":"start",S=r.length,n="classic",q="medium",l="medium";while(S--){switch(r[S]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":n=r[S];break;case"wide":case"narrow":l=r[S];break;case"long":case"short":q=r[S];break}}var s=E.node.getElementsByTagName("stroke")[0];s[m+"arrow"]=n;s[m+"arrowlength"]=q;s[m+"arrowwidth"]=l},a=function(AC,AM){AC.attrs=AC.attrs||{};var AH=AC.node,AQ=AC.attrs,y=AH.style,u,AK=c[AC.type]&&(AM.x!=AQ.x||AM.y!=AQ.y||AM.width!=AQ.width||AM.height!=AQ.height||AM.cx!=AQ.cx||AM.cy!=AQ.cy||AM.rx!=AQ.rx||AM.ry!=AQ.ry||AM.r!=AQ.r),AB=U[AC.type]&&(AQ.cx!=AM.cx||AQ.cy!=AM.cy||AQ.r!=AM.r||AQ.rx!=AM.rx||AQ.ry!=AM.ry),AT=AC;for(var z in AM){if(AM[F](z)){AQ[z]=AM[z]}}if(AK){AQ.path=M._getPath[AC.type](AC);AC._.dirty=1}AM.href&&(AH.href=AM.href);AM.title&&(AH.title=AM.title);AM.target&&(AH.target=AM.target);AM.cursor&&(y.cursor=AM.cursor);"blur" in AM&&AC.blur(AM.blur);if(AM.path&&AC.type=="path"||AK){AH.path=G(~h(AQ.path).toLowerCase().indexOf("r")?M._pathToAbsolute(AQ.path):AQ.path);if(AC.type=="image"){AC._.fillpos=[AQ.x,AQ.y];AC._.fillsize=[AQ.width,AQ.height];Q(AC,1,1,0,0,0)}}"transform" in AM&&AC.transform(AM.transform);if(AB){var n=+AQ.cx,S=+AQ.cy,t=+AQ.rx||+AQ.r||0,r=+AQ.ry||+AQ.r||0;AH.path=M.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",e((n-t)*B),e((S-r)*B),e((n+t)*B),e((S+r)*B),e(n*B))}if("clip-rect" in AM){var R=h(AM["clip-rect"]).split(J);if(R.length==4){R[2]=+R[2]+(+R[0]);R[3]=+R[3]+(+R[1]);var AA=AH.clipRect||M._g.doc.createElement("div"),AS=AA.style;AS.clip=M.format("rect({1}px {2}px {3}px {0}px)",R);if(!AH.clipRect){AS.position="absolute";AS.top=0;AS.left=0;AS.width=AC.paper.width+"px";AS.height=AC.paper.height+"px";AH.parentNode.insertBefore(AA,AH);AA.appendChild(AH);AH.clipRect=AA}}if(!AM["clip-rect"]){AH.clipRect&&(AH.clipRect.style.clip="auto")}}if(AC.textpath){var AO=AC.textpath.style;AM.font&&(AO.font=AM.font);AM["font-family"]&&(AO.fontFamily='"'+AM["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,T)+'"');AM["font-size"]&&(AO.fontSize=AM["font-size"]);AM["font-weight"]&&(AO.fontWeight=AM["font-weight"]);AM["font-style"]&&(AO.fontStyle=AM["font-style"])}if("arrow-start" in AM){C(AT,AM["arrow-start"])}if("arrow-end" in AM){C(AT,AM["arrow-end"],1)}if(AM.opacity!=null||AM["stroke-width"]!=null||AM.fill!=null||AM.src!=null||AM.stroke!=null||AM["stroke-width"]!=null||AM["stroke-opacity"]!=null||AM["fill-opacity"]!=null||AM["stroke-dasharray"]!=null||AM["stroke-miterlimit"]!=null||AM["stroke-linejoin"]!=null||AM["stroke-linecap"]!=null){var AI=AH.getElementsByTagName(Y),AP=false;AI=AI&&AI[0];!AI&&(AP=AI=i(Y));if(AC.type=="image"&&AM.src){AI.src=AM.src}AM.fill&&(AI.on=true);if(AI.on==null||AM.fill=="none"||AM.fill===null){AI.on=false}if(AI.on&&AM.fill){var q=h(AM.fill).match(M._ISURL);if(q){AI.parentNode==AH&&AH.removeChild(AI);AI.rotate=true;AI.src=q[1];AI.type="tile";var E=AC.getBBox(1);AI.position=E.x+L+E.y;AC._.fillpos=[E.x,E.y];M._preload(q[1],function(){AC._.fillsize=[this.offsetWidth,this.offsetHeight]})}else{AI.color=M.getRGB(AM.fill).hex;AI.src=T;AI.type="solid";if(M.getRGB(AM.fill).error&&(AT.type in {circle:1,ellipse:1}||h(AM.fill).charAt()!="r")&&A(AT,AM.fill,AI)){AQ.fill="none";AQ.gradient=AM.fill;AI.rotate=false}}}if("fill-opacity" in AM||"opacity" in AM){var p=((+AQ["fill-opacity"]+1||2)-1)*((+AQ.opacity+1||2)-1)*((+M.getRGB(AM.fill).o+1||2)-1);p=f(k(p,0),1);AI.opacity=p;if(AI.src){AI.color="none"}}AH.appendChild(AI);var v=(AH.getElementsByTagName("stroke")&&AH.getElementsByTagName("stroke")[0]),AR=false;!v&&(AR=v=i("stroke"));if((AM.stroke&&AM.stroke!="none")||AM["stroke-width"]||AM["stroke-opacity"]!=null||AM["stroke-dasharray"]||AM["stroke-miterlimit"]||AM["stroke-linejoin"]||AM["stroke-linecap"]){v.on=true}(AM.stroke=="none"||AM.stroke===null||v.on==null||AM.stroke==0||AM["stroke-width"]==0)&&(v.on=false);var AG=M.getRGB(AM.stroke);v.on&&AM.stroke&&(v.color=AG.hex);p=((+AQ["stroke-opacity"]+1||2)-1)*((+AQ.opacity+1||2)-1)*((+AG.o+1||2)-1);var AD=(O(AM["stroke-width"])||1)*0.75;p=f(k(p,0),1);AM["stroke-width"]==null&&(AD=AQ["stroke-width"]);AM["stroke-width"]&&(v.weight=AD);AD&&AD<1&&(p*=AD)&&(v.weight=1);v.opacity=p;AM["stroke-linejoin"]&&(v.joinstyle=AM["stroke-linejoin"]||"miter");v.miterlimit=AM["stroke-miterlimit"]||8;AM["stroke-linecap"]&&(v.endcap=AM["stroke-linecap"]=="butt"?"flat":AM["stroke-linecap"]=="square"?"square":"round");if(AM["stroke-dasharray"]){var AF={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};v.dashstyle=AF[F](AM["stroke-dasharray"])?AF[AM["stroke-dasharray"]]:T}AR&&AH.appendChild(v)}if(AT.type=="text"){AT.paper.canvas.style.display=T;var AJ=AT.paper.span,AE=100,l=AQ.font&&AQ.font.match(/\d+(?:\.\d*)?(?=px)/);y=AJ.style;AQ.font&&(y.font=AQ.font);AQ["font-family"]&&(y.fontFamily=AQ["font-family"]);AQ["font-weight"]&&(y.fontWeight=AQ["font-weight"]);AQ["font-style"]&&(y.fontStyle=AQ["font-style"]);l=O(AQ["font-size"]||l&&l[0])||10;y.fontSize=l*AE+"px";AT.textpath.string&&(AJ.innerHTML=h(AT.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var x=AJ.getBoundingClientRect();AT.W=AQ.w=(x.right-x.left)/AE;AT.H=AQ.h=(x.bottom-x.top)/AE;AT.X=AQ.x;AT.Y=AQ.y+AT.H/2;("x" in AM||"y" in AM)&&(AT.path.v=M.format("m{0},{1}l{2},{1}",e(AQ.x*B),e(AQ.y*B),e(AQ.x*B)+1));var w=["x","y","text","font","font-family","font-weight","font-style","font-size"];for(var AL=0,AN=w.length;AL<AN;AL++){if(w[AL] in AM){AT._.dirty=1;break}}switch(AQ["text-anchor"]){case"start":AT.textpath.style["v-text-align"]="left";AT.bbx=AT.W/2;break;case"end":AT.textpath.style["v-text-align"]="right";AT.bbx=-AT.W/2;break;default:AT.textpath.style["v-text-align"]="center";AT.bbx=0;break}AT.textpath.style["v-text-kern"]=true}},A=function(E,s,v){E.attrs=E.attrs||{};var t=E.attrs,l=Math.pow,m,n,q="linear",r=".5 .5";E.attrs.gradient=s;s=h(s).replace(M._radial_gradient,function(x,y,o){q="radial";if(y&&o){y=O(y);o=O(o);l(y-0.5,2)+l(o-0.5,2)>0.25&&(o=I.sqrt(0.25-l(y-0.5,2))*((o>0.5)*2-1)+0.5);r=y+L+o}return T});s=s.split(/\s*\-\s*/);if(q=="linear"){var R=s.shift();R=-O(R);if(isNaN(R)){return null}}var p=M._parseDots(s);if(!p){return null}E=E.shape||E.node;if(p.length){E.removeChild(v);v.on=true;v.method="none";v.color=p[0].color;v.color2=p[p.length-1].color;var w=[];for(var S=0,u=p.length;S<u;S++){p[S].offset&&w.push(p[S].offset+L+p[S].color)}v.colors=w.length?w.join():"0% "+v.color;if(q=="radial"){v.type="gradientTitle";v.focus="100%";v.focussize="0 0";v.focusposition=r;v.angle=0}else{v.type="gradient";v.angle=(270-R)%360}E.appendChild(v)}return 1},X=function(R,E){this[0]=this.node=R;R.raphael=true;this.id=M._oid++;R.raphaelid=this.id;this.X=0;this.Y=0;this.attrs={};this.paper=E;this.matrix=M.matrix();this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1};!E.bottom&&(E.bottom=this);this.prev=E.top;E.top&&(E.top.next=this);E.top=this;this.next=null};var N=M.el;X.prototype=N;N.constructor=X;N.transform=function(m){if(m==null){return this._.transform}var p=this.paper._viewBoxShift,n=p?"s"+[p.scale,p.scale]+"-1-1t"+[p.dx,p.dy]:T,s;if(p){s=m=h(m).replace(/\.{3}|\u2026/g,this._.transform||T)}M._extractTransform(this,n+m);var t=this.matrix.clone(),v=this.skew,S=this.node,r,l=~h(this.attrs.fill).indexOf("-"),E=!h(this.attrs.fill).indexOf("url(");t.translate(-0.5,-0.5);if(E||l||this.type=="image"){v.matrix="1 0 0 1";v.offset="0 0";r=t.split();if((l&&r.noRotation)||!r.isSimple){S.style.filter=t.toFilter();var q=this.getBBox(),R=this.getBBox(1),w=q.x-R.x,u=q.y-R.y;S.coordorigin=(w*-B)+L+(u*-B);Q(this,1,1,w,u,0)}else{S.style.filter=T;Q(this,r.scalex,r.scaley,r.dx,r.dy,r.rotate)}}else{S.style.filter=T;v.matrix=h(t);v.offset=t.offset()}s&&(this._.transform=s);return this};N.rotate=function(R,E,l){if(this.removed){return this}if(R==null){return }R=h(R).split(J);if(R.length-1){E=O(R[1]);l=O(R[2])}R=O(R[0]);(l==null)&&(E=l);if(E==null||l==null){var S=this.getBBox(1);E=S.x+S.width/2;l=S.y+S.height/2}this._.dirtyT=1;this.transform(this._.transform.concat([["r",R,E,l]]));return this};N.translate=function(R,E){if(this.removed){return this}R=h(R).split(J);if(R.length-1){E=O(R[1])}R=O(R[0])||0;E=+E||0;if(this._.bbox){this._.bbox.x+=R;this._.bbox.y+=E}this.transform(this._.transform.concat([["t",R,E]]));return this};N.scale=function(m,S,E,l){if(this.removed){return this}m=h(m).split(J);if(m.length-1){S=O(m[1]);E=O(m[2]);l=O(m[3]);isNaN(E)&&(E=null);isNaN(l)&&(l=null)}m=O(m[0]);(S==null)&&(S=m);(l==null)&&(E=l);if(E==null||l==null){var R=this.getBBox(1)}E=E==null?R.x+R.width/2:E;l=l==null?R.y+R.height/2:l;this.transform(this._.transform.concat([["s",m,S,E,l]]));this._.dirtyT=1;return this};N.hide=function(){!this.removed&&(this.node.style.display="none");return this};N.show=function(){!this.removed&&(this.node.style.display=T);return this};N._getBBox=function(){if(this.removed){return{}}return{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}};N.remove=function(){if(this.removed||!this.node.parentNode){return }this.paper.__set__&&this.paper.__set__.exclude(this);M.eve.unbind("raphael.*.*."+this.id);M._tear(this,this.paper);this.node.parentNode.removeChild(this.node);this.shape&&this.shape.parentNode.removeChild(this.shape);for(var E in this){this[E]=typeof this[E]=="function"?M._removedFactory(E):null}this.removed=true};N.attr=function(E,r){if(this.removed){return this}if(E==null){var o={};for(var q in this.attrs){if(this.attrs[F](q)){o[q]=this.attrs[q]}}o.gradient&&o.fill=="none"&&(o.fill=o.gradient)&&delete o.gradient;o.transform=this._.transform;return o}if(r==null&&M.is(E,"string")){if(E==Y&&this.attrs.fill=="none"&&this.attrs.gradient){return this.attrs.gradient}var p=E.split(J),l={};for(var m=0,t=p.length;m<t;m++){E=p[m];if(E in this.attrs){l[E]=this.attrs[E]}else{if(M.is(this.paper.customAttributes[E],"function")){l[E]=this.paper.customAttributes[E].def}else{l[E]=M._availableAttrs[E]}}}return t-1?l:l[p[0]]}if(this.attrs&&r==null&&M.is(E,"array")){l={};for(m=0,t=E.length;m<t;m++){l[E[m]]=this.attr(E[m])}return l}var R;if(r!=null){R={};R[E]=r}r==null&&M.is(E,"object")&&(R=E);for(var s in R){d("raphael.attr."+s+"."+this.id,this,R[s])}if(R){for(s in this.paper.customAttributes){if(this.paper.customAttributes[F](s)&&R[F](s)&&M.is(this.paper.customAttributes[s],"function")){var n=this.paper.customAttributes[s].apply(this,[].concat(R[s]));this.attrs[s]=R[s];for(var S in n){if(n[F](S)){R[S]=n[S]}}}}if(R.text&&this.type=="text"){this.textpath.string=R.text}a(this,R)}return this};N.toFront=function(){!this.removed&&this.node.parentNode.appendChild(this.node);this.paper&&this.paper.top!=this&&M._tofront(this,this.paper);return this};N.toBack=function(){if(this.removed){return this}if(this.node.parentNode.firstChild!=this.node){this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild);M._toback(this,this.paper)}return this};N.insertAfter=function(E){if(this.removed){return this}if(E.constructor==M.st.constructor){E=E[E.length-1]}if(E.node.nextSibling){E.node.parentNode.insertBefore(this.node,E.node.nextSibling)}else{E.node.parentNode.appendChild(this.node)}M._insertafter(this,E,this.paper);return this};N.insertBefore=function(E){if(this.removed){return this}if(E.constructor==M.st.constructor){E=E[0]}E.node.parentNode.insertBefore(this.node,E.node);M._insertbefore(this,E,this.paper);return this};N.blur=function(E){var R=this.node.runtimeStyle,S=R.filter;S=S.replace(W,T);if(+E!==0){this.attrs.blur=E;R.filter=S+L+Z+".Blur(pixelradius="+(+E||1.5)+")";R.margin=M.format("-{0}px 0 0 -{0}px",e(+E||1.5))}else{R.filter=S;R.margin=0;delete this.attrs.blur}};M._engine.path=function(l,R){var m=i("shape");m.style.cssText=D;m.coordsize=B+L+B;m.coordorigin=R.coordorigin;var n=new X(m,R),E={fill:"none",stroke:"#000"};l&&(E.path=l);n.type="path";n.path=[];n.Path=T;a(n,E);R.canvas.appendChild(m);var S=i("skew");S.on=true;m.appendChild(S);n.skew=S;n.transform(T);return n};M._engine.rect=function(R,o,m,p,S,E){var q=M._rectPath(o,m,p,S,E),l=R.path(q),n=l.attrs;l.X=n.x=o;l.Y=n.y=m;l.W=n.width=p;l.H=n.height=S;n.r=E;n.path=q;l.type="rect";return l};M._engine.ellipse=function(R,E,o,n,m){var l=R.path(),S=l.attrs;l.X=E-n;l.Y=o-m;l.W=n*2;l.H=m*2;l.type="ellipse";a(l,{cx:E,cy:o,rx:n,ry:m});return l};M._engine.circle=function(R,E,n,m){var l=R.path(),S=l.attrs;l.X=E-m;l.Y=n-m;l.W=l.H=m*2;l.type="circle";a(l,{cx:E,cy:n,r:m});return l};M._engine.image=function(R,E,p,n,q,l){var s=M._rectPath(p,n,q,l),m=R.path(s).attr({stroke:"none"}),o=m.attrs,S=m.node,r=S.getElementsByTagName(Y)[0];o.src=E;m.X=o.x=p;m.Y=o.y=n;m.W=o.width=q;m.H=o.height=l;o.path=s;m.type="image";r.parentNode==S&&S.removeChild(r);r.rotate=true;r.src=E;r.type="tile";m._.fillpos=[p,n];m._.fillsize=[q,l];S.appendChild(r);Q(m,1,1,0,0,0);return m};M._engine.text=function(E,q,n,r){var l=i("shape"),t=i("path"),S=i("textpath");q=q||0;n=n||0;r=r||"";t.v=M.format("m{0},{1}l{2},{1}",e(q*B),e(n*B),e(q*B)+1);t.textpathok=true;S.string=h(r);S.on=true;l.style.cssText=D;l.coordsize=B+L+B;l.coordorigin="0 0";var R=new X(l,E),m={fill:"#000",stroke:"none",font:M._availableAttrs.font,text:r};R.shape=l;R.path=t;R.textpath=S;R.type="text";R.attrs.text=h(r);R.attrs.x=q;R.attrs.y=n;R.attrs.w=1;R.attrs.h=1;a(R,m);l.appendChild(S);l.appendChild(t);E.canvas.appendChild(l);var s=i("skew");s.on=true;l.appendChild(s);R.skew=s;R.transform(T);return R};M._engine.setSize=function(S,E){var R=this.canvas.style;this.width=S;this.height=E;S==+S&&(S+="px");E==+E&&(E+="px");R.width=S;R.height=E;R.clip="rect(0 "+S+" "+E+" 0)";if(this._viewBox){M._engine.setViewBox.apply(this,this._viewBox)}return this};M._engine.setViewBox=function(n,m,o,S,l){M.eve("raphael.setViewBox",this,this._viewBox,[n,m,o,S,l]);var E=this.width,q=this.height,r=1/k(o/E,S/q),p,R;if(l){p=q/S;R=E/o;if(o*p<E){n-=(E-o*p)/2/p}if(S*R<q){m-=(q-S*R)/2/R}}this._viewBox=[n,m,o,S,!!l];this._viewBoxShift={dx:-n,dy:-m,scale:r};this.forEach(function(s){s.transform("...")});return this};var i;M._engine.initWin=function(S){var R=S.document;R.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!R.namespaces.rvml&&R.namespaces.add("rvml","urn:schemas-microsoft-com:vml");i=function(l){return R.createElement("<rvml:"+l+' class="rvml">')}}catch(E){i=function(l){return R.createElement("<"+l+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}};M._engine.initWin(M._g.win);M._engine.create=function(){var S=M._getContainer.apply(0,arguments),E=S.container,q=S.height,r,R=S.width,p=S.x,o=S.y;if(!E){throw new Error("VML container not found.")}var m=new M._Paper,n=m.canvas=M._g.doc.createElement("div"),l=n.style;p=p||0;o=o||0;R=R||512;q=q||342;m.width=R;m.height=q;R==+R&&(R+="px");q==+q&&(q+="px");m.coordsize=B*1000+L+B*1000;m.coordorigin="0 0";m.span=M._g.doc.createElement("span");m.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;";n.appendChild(m.span);l.cssText=M.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",R,q);if(E==1){M._g.doc.body.appendChild(n);l.left=p+"px";l.top=o+"px";l.position="absolute"}else{if(E.firstChild){E.insertBefore(n,E.firstChild)}else{E.appendChild(n)}}m.renderfix=function(){};return m};M.prototype.clear=function(){M.eve("raphael.clear",this);this.canvas.innerHTML=T;this.span=M._g.doc.createElement("span");this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";this.canvas.appendChild(this.span);this.bottom=this.top=null};M.prototype.remove=function(){M.eve("raphael.remove",this);this.canvas.parentNode.removeChild(this.canvas);for(var E in this){this[E]=typeof this[E]=="function"?M._removedFactory(E):null}return true};var b=M.st;for(var H in N){if(N[F](H)&&!b[F](H)){b[H]=(function(E){return function(){var R=arguments;return this.forEach(function(S){S[E].apply(S,R)})}})(H)}}}(window.Raphael);;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d-api', location = 'js/lib/draw2d/draw2d.js' */
var draw2d={geo:{},io:{json:{},png:{},svg:{}},util:{spline:{}},shape:{basic:{},arrow:{},node:{},note:{},diagram:{},analog:{},icon:{},layout:{},pert:{},state:{},widget:{}},policy:{canvas:{},port:{},figure:{}},command:{},decoration:{connection:{}},layout:{connection:{},anchor:{},mesh:{},locator:{}},ui:{},isTouchDevice:((navigator.platform.indexOf("iPhone")!=-1)||(navigator.platform.indexOf("iPod")!=-1)||(navigator.platform.indexOf("iPad")!=-1))};(function(){Raphael.fn.group=function(D,C){var A=document.getElementsByTagName("svg").length>0;if(!A){return{add:function(){}}}var B;this.svg="http://www.w3.org/2000/svg";this.defs=document.getElementsByTagName("defs")[D];this.svgcanv=document.getElementsByTagName("svg")[D];this.group=document.createElementNS(this.svg,"g");for(B=0;B<C.length;B++){this.group.appendChild(C[B].node)}this.svgcanv.appendChild(this.group);this.group.translate=function(F,E){this.setAttribute("transform","translate("+F+","+E+") scale("+this.getAttr("scale").x+","+this.getAttr("scale").y+")")};this.group.rotate=function(G,E,F){this.setAttribute("transform","translate("+this.getAttr("translate").x+","+this.getAttr("translate").y+") scale("+this.getAttr("scale").x+","+this.getAttr("scale").y+") rotate("+G+","+E+","+F+")")};this.group.scale=function(F,E){this.setAttribute("transform","scale("+F+","+E+") translate("+this.getAttr("translate").x+","+this.getAttr("translate").y+")")};this.group.push=function(E){this.appendChild(E.node)};this.group.getAttr=function(L){this.previous=this.getAttribute("transform")?this.getAttribute("transform"):"";var F=[],J,I,H;F=this.previous.split(" ");for(B=0;B<F.length;B++){if(F[B].substring(0,1)=="t"){var K=F[B],E=[];E=K.split("(");K=E[1].substring(0,E[1].length-1);E=[];E=K.split(",");J=E.length===0?{x:0,y:0}:{x:E[0],y:E[1]}}else{if(F[B].substring(0,1)==="r"){K=F[B];E=K.split("(");K=E[1].substring(0,E[1].length-1);E=K.split(",");I=E.length===0?{x:0,y:0,z:0}:{x:E[0],y:E[1],z:E[2]}}else{if(F[B].substring(0,1)==="s"){K=F[B];E=K.split("(");K=E[1].substring(0,E[1].length-1);E=K.split(",");H=E.length===0?{x:1,y:1}:{x:E[0],y:E[1]}}}}}if(typeof J==="undefined"){J={x:0,y:0}}if(typeof I==="undefined"){I={x:0,y:0,z:0}}if(typeof H==="undefined"){H={x:1,y:1}}if(L=="translate"){var G=J}else{if(L=="rotate"){G=I}else{if(L=="scale"){G=H}}}return G};this.group.copy=function(E){this.copy=E.node.cloneNode(true);this.appendChild(this.copy)};return this.group}})();Math.sign=function(){if(this<0){return -1}return 1};;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/shifty-0.6.1.js' */
(function ($) {(function(){var A;(function(D){var E,H="linear",K;if(typeof SHIFTY_DEBUG_NOW==="function"){E=SHIFTY_DEBUG_NOW}else{E=function(){return +new Date()}}function N(R,Q){var S;for(S in R){if(R.hasOwnProperty(S)){Q(R,S)}}}function L(R,Q){N(Q,function(S,T){R[T]=S[T]});return R}function G(R,Q){N(Q,function(S,T){if(typeof R[T]==="undefined"){R[T]=S[T]}});return R}function B(S,T,R){var U,Q;Q=(S-T.timestamp)/T.duration;for(U in R.current){if(R.current.hasOwnProperty(U)&&T.to.hasOwnProperty(U)){R.current[U]=J(T.originalState[U],T.to[U],K[T.easing[U]],Q)}}return R.current}function J(T,S,R,Q){return T+(S-T)*R(Q)}function F(Q,R){return setTimeout(Q,1000/R)}function M(T,Q,U,R){var S;for(S=0;S<Q[T].length;S++){Q[T][S].apply(U,R)}}function I(R,S,Q){N(A.prototype.filter,function(U,T){if(U[T][R]){U[T][R].apply(S,Q)}})}function P(U,T){var R=U.timestamp+U.duration,S=Math.min(E(),R),Q=S>=R;if(T.isTweening){if(!Q){T.loopId=F(function(){P(U,T)},U.owner.fps)}I("beforeTween",U.owner,[T.current,U.originalState,U.to]);B(S,U,T);I("afterTween",U.owner,[T.current,U.originalState,U.to]);if(U.hook.step){M("step",U.hook,U.owner,[T.current])}if(U.step){U.step.call(T.current,T.current)}}if(Q||!T.isTweening){U.owner.stop(true)}}if(typeof SHIFTY_DEBUG_NOW==="function"){D.timeoutHandler=P}function C(S,R){var Q;Q={};if(typeof R==="string"){N(S,function(T,U){Q[U]=R})}else{N(S,function(T,U){if(!Q[U]){Q[U]=R[U]||H}})}return Q}A=function(Q){Q=Q||{};this._hook={};this._tweenParams={owner:this,hook:this._hook,data:{}};this._state={};this._state.current=Q.initialState||{};this.fps=Q.fps||30;this.easing=Q.easing||H;this.duration=Q.duration||500;return this};A.prototype.tween=function(X,W,S,V,U){var Q,T,R;if(this._state.isTweening){return }Q=this;T=this._tweenParams;R=this._state;this._state.loopId=0;this._state.pausedAtTime=null;if(W){T.to=W||{};T.duration=S||this.duration;T.callback=V;T.easing=U||this.easing;R.current=X||{}}else{T.step=X.step;T.callback=X.callback;T.to=X.to||X.target||{};T.duration=X.duration||this.duration;T.easing=X.easing||this.easing;R.current=X.from||{}}T.timestamp=E();G(R.current,T.to);G(T.to,R.current);T.easing=C(R.current,T.easing);I("tweenCreated",T.owner,[R.current,T.originalState,T.to]);T.originalState=L({},R.current);R.isTweening=true;this.resume();if(X.start){X.start()}return this};A.prototype.to=function O(R,Q,T,S){if(arguments.length===1){if("to" in R){R.from=this.get();this.tween(R)}else{this.tween(this.get(),R)}}else{this.tween(this.get(),R,Q,T,S)}return this};A.prototype.get=function(){return this._state.current};A.prototype.set=function(Q){this._state.current=Q||{};return this};A.prototype.stop=function(Q){clearTimeout(this._state.loopId);this._state.isTweening=false;if(Q){L(this._state.current,this._tweenParams.to);I("afterTweenEnd",this,[this._state.current,this._tweenParams.originalState,this._tweenParams.to]);if(this._tweenParams.callback){this._tweenParams.callback.call(this._state.current,this._state.current)}}return this};A.prototype.pause=function(){clearTimeout(this._state.loopId);this._state.pausedAtTime=E();this._state.isPaused=true;return this};A.prototype.resume=function(){var Q;Q=this;if(this._state.isPaused){this._tweenParams.timestamp+=E()-this._state.pausedAtTime}P(Q._tweenParams,Q._state);return this};A.prototype.hookAdd=function(Q,R){if(!this._hook.hasOwnProperty(Q)){this._hook[Q]=[]}this._hook[Q].push(R)};A.prototype.hookRemove=function(R,S){var Q;if(!this._hook.hasOwnProperty(R)){return }if(!S){this._hook[R]=[];return }for(Q=this._hook[R].length;Q>=0;Q++){if(this._hook[R][Q]===S){this._hook[R].splice(Q,1)}}};A.prototype.filter={};A.util={now:E,each:N,tweenProps:B,tweenProp:J,applyFilter:I,simpleCopy:L,weakCopy:G,composeEasingObject:C};K=A.prototype.formula={linear:function(Q){return Q}};if(typeof exports==="object"){module.exports=A}else{if(typeof define==="function"&&define.amd){define(function(){return A})}else{if(typeof D.Tweenable==="undefined"){D.Tweenable=A}}}}(this));(function(){A.util.simpleCopy(A.prototype.formula,{easeInQuad:function(B){return Math.pow(B,2)},easeOutQuad:function(B){return -(Math.pow((B-1),2)-1)},easeInOutQuad:function(B){if((B/=0.5)<1){return 0.5*Math.pow(B,2)}return -0.5*((B-=2)*B-2)},easeInCubic:function(B){return Math.pow(B,3)},easeOutCubic:function(B){return(Math.pow((B-1),3)+1)},easeInOutCubic:function(B){if((B/=0.5)<1){return 0.5*Math.pow(B,3)}return 0.5*(Math.pow((B-2),3)+2)},easeInQuart:function(B){return Math.pow(B,4)},easeOutQuart:function(B){return -(Math.pow((B-1),4)-1)},easeInOutQuart:function(B){if((B/=0.5)<1){return 0.5*Math.pow(B,4)}return -0.5*((B-=2)*Math.pow(B,3)-2)},easeInQuint:function(B){return Math.pow(B,5)},easeOutQuint:function(B){return(Math.pow((B-1),5)+1)},easeInOutQuint:function(B){if((B/=0.5)<1){return 0.5*Math.pow(B,5)}return 0.5*(Math.pow((B-2),5)+2)},easeInSine:function(B){return -Math.cos(B*(Math.PI/2))+1},easeOutSine:function(B){return Math.sin(B*(Math.PI/2))},easeInOutSine:function(B){return(-0.5*(Math.cos(Math.PI*B)-1))},easeInExpo:function(B){return(B==0)?0:Math.pow(2,10*(B-1))},easeOutExpo:function(B){return(B==1)?1:-Math.pow(2,-10*B)+1},easeInOutExpo:function(B){if(B==0){return 0}if(B==1){return 1}if((B/=0.5)<1){return 0.5*Math.pow(2,10*(B-1))}return 0.5*(-Math.pow(2,-10*--B)+2)},easeInCirc:function(B){return -(Math.sqrt(1-(B*B))-1)},easeOutCirc:function(B){return Math.sqrt(1-Math.pow((B-1),2))},easeInOutCirc:function(B){if((B/=0.5)<1){return -0.5*(Math.sqrt(1-B*B)-1)}return 0.5*(Math.sqrt(1-(B-=2)*B)+1)},easeOutBounce:function(B){if((B)<(1/2.75)){return(7.5625*B*B)}else{if(B<(2/2.75)){return(7.5625*(B-=(1.5/2.75))*B+0.75)}else{if(B<(2.5/2.75)){return(7.5625*(B-=(2.25/2.75))*B+0.9375)}else{return(7.5625*(B-=(2.625/2.75))*B+0.984375)}}}},easeInBack:function(C){var B=1.70158;return(C)*C*((B+1)*C-B)},easeOutBack:function(C){var B=1.70158;return(C=C-1)*C*((B+1)*C+B)+1},easeInOutBack:function(C){var B=1.70158;if((C/=0.5)<1){return 0.5*(C*C*(((B*=(1.525))+1)*C-B))}return 0.5*((C-=2)*C*(((B*=(1.525))+1)*C+B)+2)},elastic:function(B){return -1*Math.pow(4,-8*B)*Math.sin((B*6-1)*(2*Math.PI)/2)+1},swingFromTo:function(C){var B=1.70158;return((C/=0.5)<1)?0.5*(C*C*(((B*=(1.525))+1)*C-B)):0.5*((C-=2)*C*(((B*=(1.525))+1)*C+B)+2)},swingFrom:function(C){var B=1.70158;return C*C*((B+1)*C-B)},swingTo:function(C){var B=1.70158;return(C-=1)*C*((B+1)*C+B)+1},bounce:function(B){if(B<(1/2.75)){return(7.5625*B*B)}else{if(B<(2/2.75)){return(7.5625*(B-=(1.5/2.75))*B+0.75)}else{if(B<(2.5/2.75)){return(7.5625*(B-=(2.25/2.75))*B+0.9375)}else{return(7.5625*(B-=(2.625/2.75))*B+0.984375)}}}},bouncePast:function(B){if(B<(1/2.75)){return(7.5625*B*B)}else{if(B<(2/2.75)){return 2-(7.5625*(B-=(1.5/2.75))*B+0.75)}else{if(B<(2.5/2.75)){return 2-(7.5625*(B-=(2.25/2.75))*B+0.9375)}else{return 2-(7.5625*(B-=(2.625/2.75))*B+0.984375)}}}},easeFromTo:function(B){if((B/=0.5)<1){return 0.5*Math.pow(B,4)}return -0.5*((B-=2)*Math.pow(B,3)-2)},easeFrom:function(B){return Math.pow(B,4)},easeTo:function(B){return Math.pow(B,0.25)}})}());(function(){var C=function(){};function E(F){F.shift();if(F.length){F[0]()}else{F.running=false}}function D(G,F){return function(){G();E(F)}}function B(F,K,J,G,I,H){return function(){if(J){F.tween(K,J,G,I,H)}else{K.callback=I;if(K.from){F.tween(K)}else{F.to(K)}}}}A.prototype.queue=function(K,J,F,I,H){var G;if(!this._tweenQueue){this._tweenQueue=[]}I=I||K.callback||C;G=D(I,this._tweenQueue);this._tweenQueue.push(B(this,K,J,F,G,H));return this};A.prototype.queueStart=function(){if(!this._tweenQueue.running&&this._tweenQueue.length>0){this._tweenQueue[0]();this._tweenQueue.running=true}return this};A.prototype.queueShift=function(){this._tweenQueue.shift();return this};A.prototype.queuePop=function(){this._tweenQueue.pop();return this};A.prototype.queueEmpty=function(){this._tweenQueue.length=0;return this};A.prototype.queueLength=function(){return this._tweenQueue.length}}());(function(){var B=/^#([0-9]|[a-f]){3}$/i,M=/^#([0-9]|[a-f]){6}$/i,E=/^rgb\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*\)\s*$/i,Q;if(!A){return }function P(R){return parseInt(R,16)}function G(R){R=R.replace(/#/g,"");if(R.length===3){R=R.split("");R=R[0]+R[0]+R[1]+R[1]+R[2]+R[2]}return[P(R.substr(0,2)),P(R.substr(2,2)),P(R.substr(4,2))]}function N(S){var T,R;T=G(S);R="rgb("+T[0]+","+T[1]+","+T[2]+")";return R}function J(R){return(typeof R==="string")&&(B.test(R)||M.test(R)||E.test(R))}function H(R){return(typeof R==="string")&&(B.test(R)||M.test(R))}function I(R){A.util.each(R,function(S,T){if(H(S[T])){S[T]=N(S[T])}})}function D(S){var R;R=[];A.util.each(S,function(T,U){if(J(T[U])){R.push(U)}});return R}function K(R){return R.match(/(\d+)/g)}function F(V,T){var U,S,R;S=T.length;for(U=0;U<S;U++){R=K(V[T[U]]);V["__r__"+T[U]]=+R[0];V["__g__"+T[U]]=+R[1];V["__b__"+T[U]]=+R[2];delete V[T[U]]}}function C(U,S){var T,R;R=S.length;for(T=0;T<R;T++){U[S[T]]="rgb("+parseInt(U["__r__"+S[T]],10)+","+parseInt(U["__g__"+S[T]],10)+","+parseInt(U["__b__"+S[T]],10)+")";delete U["__r__"+S[T]];delete U["__g__"+S[T]];delete U["__b__"+S[T]]}}function O(U,S){var T,R;R=S.length;for(T=0;T<R;T++){U["__r__"+S[T]]=U[S[T]];U["__g__"+S[T]]=U[S[T]];U["__b__"+S[T]]=U[S[T]]}}function L(U,S){var T,R;R=S.length;for(T=0;T<R;T++){delete U["__r__"+S[T]];delete U["__g__"+S[T]];delete U["__b__"+S[T]]}}A.prototype.filter.color={tweenCreated:function(S,T,R){I(S);I(T);I(R)},beforeTween:function(S,T,R){Q=D(T);F(S,Q);F(T,Q);F(R,Q);O(this._tweenParams.easing,Q)},afterTween:function(S,T,R){C(S,Q);C(T,Q);C(R,Q);L(this._tweenParams.easing,Q)}}}());(function(){var D=/\D+/g;var G;function B(I){return typeof I==="string"&&I.match(D)}function F(I){return I.replace(/\(/g,"\\(").replace(/\)/g,"\\)")}function H(I){var J;J={};A.util.each(I,function(M,N){var L=M[N];if(B(L)){var K=L.match(D);if(K.length===1){K.unshift("")}J[N]=K}});return J}function C(J,I){A.util.each(I,function(P,L){var M=I[L];var O;var K=F(M[0]);var N=F(M[1]);if(M[0]===""){O=new RegExp(N,"g")}else{O=new RegExp("("+K+"|"+N+")","g")}J[L]=+(J[L].replace(O,""))})}function E(J,I){A.util.each(I,function(M,L){var K=M[L];J[L]=K[0]+J[L]+K[1]})}A.prototype.filter.token={beforeTween:function(J,K,I){G=H(K);C(J,G);C(K,G);C(I,G)},afterTween:function(J,K,I){E(J,G);E(K,G);E(I,G)}}}());(function(){if(!A){return }function B(H,D,G,C,F){var E;E=A.util.composeEasingObject(H,F);return A.util.tweenProps(C,{originalState:H,to:G,timestamp:0,duration:1,easing:E},{current:D})}A.util.interpolate=function(I,H,C,G){var F,E,D;if(I&&I.from){H=I.to;C=I.position;G=I.easing;I=I.from}D=new A();D._tweenParams.easing=G||"linear";F=A.util.simpleCopy({},I);A.util.applyFilter("tweenCreated",D,[F,I,H]);A.util.applyFilter("beforeTween",D,[F,I,H]);E=B(I,F,H,C,D._tweenParams.easing);A.util.applyFilter("afterTween",D,[E,I,H]);return E};A.prototype.interpolate=function(F,C,E){var D;D=A.util.interpolate(this.get(),F,C,E);this.set(D);return D}}());(function(){var B=false;A.util.enableRounding=function(){B=true};A.util.disableRounding=function(){B=false};A.util.isRoundingEnabled=function(){return B};A.prototype.filter.round={afterTween:function(D,E,C){if(B){A.util.each(D,function(F,G){if(!F[G].replace){F[G]=Math.round(F[G])}})}}}}())}());}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/util/Color.js' */
(function ($) {draw2d.util.Color=Class.extend({init:function(D,C,A){this.hashString=null;if(typeof D==="undefined"||D===null){this.hashString="none"}else{if(D instanceof draw2d.util.Color){this.red=D.red;this.green=D.green;this.blue=D.blue}else{if(typeof C==="undefined"){var B=this.hex2rgb(D);this.red=B[0];this.green=B[1];this.blue=B[2]}else{this.red=D;this.green=C;this.blue=A}}}},getHTMLStyle:function(){return"rgb("+this.red+","+this.green+","+this.blue+")"},getRed:function(){return this.red},getGreen:function(){return this.green},getBlue:function(){return this.blue},getIdealTextColor:function(){var A=105;var B=(this.red*0.299)+(this.green*0.587)+(this.blue*0.114);return(255-B<A)?new draw2d.util.Color(0,0,0):new draw2d.util.Color(255,255,255)},hex2rgb:function(A){A=A.replace("#","");return({0:parseInt(A.substr(0,2),16),1:parseInt(A.substr(2,2),16),2:parseInt(A.substr(4,2),16)})},hex:function(){return(this.int2hex(this.red)+this.int2hex(this.green)+this.int2hex(this.blue))},hash:function(){if(this.hashString===null){this.hashString="#"+this.hex()}return this.hashString},int2hex:function(A){A=Math.round(Math.min(Math.max(0,A),255));return("0123456789ABCDEF".charAt((A-A%16)/16)+"0123456789ABCDEF".charAt(A%16))},darker:function(B){if(this.hashString==="none"){return this}var D=parseInt(Math.round(this.getRed()*(1-B)));var C=parseInt(Math.round(this.getGreen()*(1-B)));var A=parseInt(Math.round(this.getBlue()*(1-B)));if(D<0){D=0}else{if(D>255){D=255}}if(C<0){C=0}else{if(C>255){C=255}}if(A<0){A=0}else{if(A>255){A=255}}return new draw2d.util.Color(D,C,A)},lighter:function(B){if(this.hashString==="none"){return this}var D=parseInt(Math.round(this.getRed()*(1+B)));var C=parseInt(Math.round(this.getGreen()*(1+B)));var A=parseInt(Math.round(this.getBlue()*(1+B)));if(D<0){D=0}else{if(D>255){D=255}}if(C<0){C=0}else{if(C>255){C=255}}if(A<0){A=0}else{if(A>255){A=255}}return new draw2d.util.Color(D,C,A)},fadeTo:function(B,C){var E=Math.floor(this.red+(C*(B.red-this.red))+0.5);var D=Math.floor(this.green+(C*(B.green-this.green))+0.5);var A=Math.floor(this.blue+(C*(B.blue-this.blue))+0.5);return new draw2d.util.Color(E,D,A)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/util/ArrayList.js' */
(function ($) {draw2d.util.ArrayList=Class.extend({init:function(A){this.increment=10;this.size=0;this.data=new Array(this.increment);if(typeof A!=="undefined"){$.each(A,$.proxy(function(B,C){this.add(C)},this))}},reverse:function(){var B=new Array(this.size);for(var A=0;A<this.size;A++){B[A]=this.data[this.size-A-1]}this.data=B;return this},getCapacity:function(){return this.data.length},getSize:function(){return this.size},isEmpty:function(){return this.getSize()===0},getLastElement:function(){if(this.data[this.getSize()-1]!==null){return this.data[this.getSize()-1]}return null},asArray:function(){this.trimToSize();return this.data},getFirstElement:function(){if(this.data[0]!==null&&typeof this.data[0]!=="undefined"){return this.data[0]}return null},get:function(A){return this.data[A]},add:function(A){if(this.getSize()==this.data.length){this.resize()}this.data[this.size++]=A;return this},grep:function(A){this.data=$.grep(this.data,A);this.data=$.grep(this.data,function(B){return(typeof B!=="undefined")});this.size=this.data.length;return this},addAll:function(B){if(!(B instanceof draw2d.util.ArrayList)){throw"Unable to handle unknown object type in ArrayList.addAll"}for(var A=0;A<B.getSize();A++){this.add(B.get(A))}return this},pop:function(){return this.removeElementAt(this.getSize()-1)},push:function(A){this.add(A)},remove:function(B){var A=this.indexOf(B);if(A>=0){return this.removeElementAt(A)}return null},insertElementAt:function(C,A){if(this.size==this.capacity){this.resize()}for(var B=this.getSize();B>A;B--){this.data[B]=this.data[B-1]}this.data[A]=C;this.size++;return this},removeElementAt:function(A){var C=this.data[A];for(var B=A;B<(this.size-1);B++){this.data[B]=this.data[B+1]}this.data[this.size-1]=null;this.size--;return C},removeAll:function(A){$.each(A,$.proxy(function(B,C){this.remove(C)},this));return this},indexOf:function(B){for(var A=0;A<this.getSize();A++){if(this.data[A]==B){return A}}return -1},contains:function(B){for(var A=0;A<this.getSize();A++){if(this.data[A]==B){return true}}return false},resize:function(){newData=new Array(this.data.length+this.increment);for(var A=0;A<this.data.length;A++){newData[A]=this.data[A]}this.data=newData;return this},trimToSize:function(){if(this.data.length==this.size){return this}var A=new Array(this.getSize());for(var B=0;B<this.getSize();B++){A[B]=this.data[B]}this.size=A.length;this.data=A;return this},sort:function(F){var D,C;var E;var B;var G;var A;for(D=1;D<this.getSize();D++){B=this.data[D];E=B[F];C=D-1;G=this.data[C];A=G[F];while(C>=0&&A>E){this.data[C+1]=this.data[C];C--;if(C>=0){G=this.data[C];A=G[F]}}this.data[C+1]=B}return this},clone:function(){var A=new draw2d.util.ArrayList();for(var B=0;B<this.size;B++){A.add(this.data[B])}return A},each:function(B){for(var A=0;A<this.size;A++){if(B(A,this.data[A])===false){break}}},overwriteElementAt:function(B,A){this.data[A]=B;return this},getPersistentAttributes:function(){return{data:this.data,increment:this.increment,size:this.getSize()}},setPersistentAttributes:function(A){this.data=A.data;this.increment=A.increment;this.size=A.size}});draw2d.util.ArrayList.EMPTY_LIST=new draw2d.util.ArrayList();}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/util/SVGUtil.js' */
(function ($) {Raphael.fn.polygon=function(F){var D=["M"],A=F.split(" ");for(var C=0;C<A.length;C++){var G=A[C].split(",");for(var B=0;B<G.length;B++){var E=parseFloat(G[B]);if(E){D.push(E)}}if(C==0){D.push("L")}}D.push("Z");return this.path(D)};}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/util/UUID.js' */
(function ($) {draw2d.util.UUID=function(){};draw2d.util.UUID.create=function(){var A=function(){return(((1+Math.random())*65536)|0).toString(16).substring(1)};return(A()+A()+"-"+A()+"-"+A()+"-"+A()+"-"+A()+A()+A())};}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/util/spline/Spline.js' */
(function ($) {draw2d.util.spline.Spline=Class.extend({NAME:"draw2d.util.spline.Spline",init:function(){},generate:function(A,B){throw"inherit classes must implement the method 'draw2d.util.spline.Spline.generate()'"}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/util/spline/CubicSpline.js' */
(function ($) {draw2d.util.spline.CubicSpline=draw2d.util.spline.Spline.extend({NAME:"draw2d.util.spline.CubicSpline",init:function(){this._super()},generate:function(A,E){var D=new draw2d.util.ArrayList();D.add(A.get(0));D.addAll(A);D.add(A.get(A.getSize()-1));var G=D.getSize();var F=new draw2d.util.ArrayList();F.add(A.get(0));F.add(this.p(1,0,D));for(var C=1;C<G-2;C++){for(var B=1;B<=E;B++){F.add(this.p(C,B/E,D))}}F.add(A.get(A.getSize()-1));return F},p:function(D,I,E){var H=0;var F=0;var B=D-1;for(var C=-2;C<=1;C++){var G=this.blend(C,I);var A=E.get(B++);H+=G*A.x;F+=G*A.y}return new draw2d.geo.Point(H,F)},blend:function(B,A){if(B===-2){return(((-A+3)*A-3)*A+1)/6}else{if(B===-1){return(((3*A-6)*A)*A+4)/6}else{if(B===0){return(((-3*A+3)*A+3)*A+1)/6}}}return(A*A*A)/6}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/util/spline/CatmullRomSpline.js' */
(function ($) {draw2d.util.spline.CatmullRomSpline=draw2d.util.spline.CubicSpline.extend({NAME:"draw2d.util.spline.CatmullRomSpline",init:function(){this._super()},blend:function(B,A){if(B==-2){return((-A+2)*A-1)*A/2}else{if(B==-1){return(((3*A-5)*A)*A+2)/2}else{if(B==0){return((-3*A+4)*A+1)*A/2}else{return((A-1)*A*A)/2}}}}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/util/spline/BezierSpline.js' */
(function ($) {draw2d.util.spline.BezierSpline=draw2d.util.spline.Spline.extend({NAME:"draw2d.util.spline.BezierSpline",init:function(){this._super()},generate:function(A,D){var F=A.getSize();var E=new draw2d.util.ArrayList();E.add(this.p(0,0,A));for(var C=0;C<F-3;C+=3){for(var B=1;B<=D;B++){E.add(this.p(C,B/D,A))}}return E},p:function(D,I,E){var H=0;var F=0;var B=D;for(var C=0;C<=3;C++){var G=this.blend(C,I);var A=E.get(B++);H+=G*A.x;F+=G*A.y}return new draw2d.geo.Point(H,F)},blend:function(B,A){if(B==0){return(1-A)*(1-A)*(1-A)}else{if(B==1){return 3*A*(1-A)*(1-A)}else{if(B==2){return 3*A*A*(1-A)}else{return A*A*A}}}}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/geo/PositionConstants.js' */
(function ($) {draw2d.geo.PositionConstants=function(){};draw2d.geo.PositionConstants.NORTH=1;draw2d.geo.PositionConstants.SOUTH=4;draw2d.geo.PositionConstants.WEST=8;draw2d.geo.PositionConstants.EAST=16;}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/geo/Point.js' */
(function ($) {draw2d.geo.Point=Class.extend({NAME:"draw2d.geo.Point",init:function(A,B){this.x=A;this.y=B;this.bx=null;this.by=null;this.bw=null;this.bh=null},setBoundary:function(C,B,D,A){if(C instanceof draw2d.geo.Rectangle){this.bx=C.x;this.by=C.y;this.bw=C.w;this.bh=C.h}else{this.bx=C;this.by=B;this.bw=D;this.bh=A}this.adjustBoundary();return this},adjustBoundary:function(){if(this.bx===null){return }this.x=Math.min(Math.max(this.bx,this.x),this.bw);this.y=Math.min(Math.max(this.by,this.y),this.bh);return this},translate:function(B,A){this.x+=B;this.y+=A;this.adjustBoundary();return this},getX:function(){return this.x},getY:function(){return this.y},setX:function(A){this.x=A;this.adjustBoundary();return this},setY:function(A){this.y=A;this.adjustBoundary();return this},setPosition:function(A,B){if(A instanceof draw2d.geo.Point){this.x=A.x;this.y=A.y}else{this.x=A;this.y=B}this.adjustBoundary();return this},getPosition:function(C){var B=C.x-this.x;var A=C.y-this.y;if(Math.abs(B)>Math.abs(A)){if(B<0){return draw2d.geo.PositionConstants.WEST}return draw2d.geo.PositionConstants.EAST}if(A<0){return draw2d.geo.PositionConstants.NORTH}return draw2d.geo.PositionConstants.SOUTH},equals:function(A){return this.x===A.x&&this.y===A.y},getDistance:function(A){return Math.sqrt((this.x-A.x)*(this.x-A.x)+(this.y-A.y)*(this.y-A.y))},getTranslated:function(A){return new draw2d.geo.Point(this.x+A.x,this.y+A.y)},getPersistentAttributes:function(){return{x:this.x,y:this.y}},setPersistentAttributes:function(A){this.x=A.x;this.y=A.y},subtract:function(A){return new draw2d.geo.Point(this.x-A.x,this.y-A.y)},dot:function(A){return this.x*A.x+this.y*A.y},cross:function(A){return this.x*A.y-this.y*A.x},lerp:function(B,A){return new draw2d.geo.Point(this.x+(B.x-this.x)*A,this.y+(B.y-this.y)*A)},clone:function(){return new draw2d.geo.Point(this.x,this.y)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/geo/Rectangle.js' */
(function ($) {draw2d.geo.Rectangle=draw2d.geo.Point.extend({NAME:"draw2d.geo.Rectangle",init:function(A,D,B,C){this._super(A,D);this.w=B;this.h=C},adjustBoundary:function(){if(this.bx===null){return }this.x=Math.min(Math.max(this.bx,this.x),this.bw-this.w);this.y=Math.min(Math.max(this.by,this.y),this.bh-this.h);this.w=Math.min(this.w,this.bw);this.h=Math.min(this.h,this.bh)},resize:function(A,B){this.w+=A;this.h+=B;this.adjustBoundary();return this},scale:function(A,B){this.w+=(A);this.h+=(B);this.x-=(A/2);this.y-=(B/2);this.adjustBoundary();return this},setBounds:function(A){this.setPosition(A.x,A.y);this.w=A.w;this.h=A.h;return this},isEmpty:function(){return this.w<=0||this.h<=0},getWidth:function(){return this.w},setWidth:function(A){this.w=A;this.adjustBoundary();return this},getHeight:function(){return this.h},setHeight:function(A){this.h=A;this.adjustBoundary();return this},getLeft:function(){return this.x},getRight:function(){return this.x+this.w},getTop:function(){return this.y},getBottom:function(){return this.y+this.h},getTopLeft:function(){return new draw2d.geo.Point(this.x,this.y)},getTopCenter:function(){return new draw2d.geo.Point(this.x+(this.w/2),this.y)},getTopRight:function(){return new draw2d.geo.Point(this.x+this.w,this.y)},getBottomLeft:function(){return new draw2d.geo.Point(this.x,this.y+this.h)},getBottomCenter:function(){return new draw2d.geo.Point(this.x+(this.w/2),this.y+this.h)},getCenter:function(){return new draw2d.geo.Point(this.x+this.w/2,this.y+this.h/2)},getBottomRight:function(){return new draw2d.geo.Point(this.x+this.w,this.y+this.h)},getPoints:function(){var A=new draw2d.util.ArrayList();A.add(this.getTopLeft());A.add(this.getTopRight());A.add(this.getBottomRight());A.add(this.getBottomLeft());return A},moveInside:function(B){var A=new draw2d.geo.Rectangle(B.x,B.y,B.w,B.h);A.x=Math.max(A.x,this.x);A.y=Math.max(A.y,this.y);if(A.w<this.w){A.x=Math.min(A.x+A.w,this.x+this.w)-A.w}else{A.x=this.x}if(A.h<this.h){A.y=Math.min(A.y+A.h,this.y+this.h)-A.h}else{A.y=this.y}return A},getDistance:function(H){var F=this.x;var E=this.y;var G=this.w;var A=this.h;var C=H.getX();var B=H.getY();var D=1;var J=1;if(H instanceof draw2d.geo.Rectangle){D=H.getWidth();J=H.getHeight()}var I=9;if(F+G<=C){if((E+A)<=B){I=0}else{if(E>=(B+J)){I=6}else{I=7}}}else{if(F>=C+D){if(E+A<=B){I=2}else{if(E>=B+J){I=4}else{I=3}}}else{if(E+A<=B){I=1}else{if(E>=B+J){I=5}else{return 0}}}}switch(I){case 0:F=(F+G)-C;E=(E+A)-B;return -(F+E);case 1:return -((E+A)-B);case 2:F=(C+D)-F;E=(E+A)-B;return -(F+E);case 3:return -((C+D)-F);case 4:F=(C+D)-F;E=(B+J)-E;return -(F+E);case 5:return -((B+J)-E);case 6:F=(F+G)-C;E=(B+J)-E;return -(F+E);case 7:return -((F+G)-C)}throw"Unknown data type of parameter for distance calculation in draw2d.geo.Rectangle.getDistnace(..)"},determineOctant:function(D){var J=3;var C=this.x+J;var B=this.y+J;var E=this.w-(J*2);var K=this.h-(J*2);var G=D.x;var F=D.y;var H=2;var A=2;if(D instanceof draw2d.geo.Rectangle){H=D.w;A=D.h}var I=0;if(G+H<=C){if((F+A)<=B){I=0}else{if(F>=(B+K)){I=6}else{I=7}}}else{if(G>=C+E){if(F+A<=B){I=2}else{if(F>=B+K){I=4}else{I=3}}}else{if(F+A<=B){I=1}else{if(F>=B+K){I=5}else{I=8}}}}return I},getDirection:function(A){var B=this.getTopLeft();switch(this.determineOctant(A)){case 0:if((B.x-A.x)<(B.y-A.y)){return 0}return 3;case 1:return 0;case 2:B=this.getTopRight();if((A.x-B.x)<(B.y-A.y)){return 0}return 1;case 3:return 1;case 4:B=this.getBottomRight();if((A.x-B.x)<(A.y-B.y)){return 2}return 1;case 5:return 2;case 6:B=this.getBottomLeft();if((B.x-A.x)<(A.y-B.y)){return 2}return 3;case 7:return 3;case 8:if(A.y>this.y){return 2}return 0}return 0},equals:function(A){return this.x==A.x&&this.y==A.y&&this.w==A.w&&this.h==A.h},hitTest:function(A,D){if(A instanceof draw2d.geo.Point){D=A.y;A=A.x}var B=this.x+this.getWidth();var C=this.y+this.getHeight();return(A>=this.x&&A<=B&&D>=this.y&&D<=C)},isInside:function(A){return A.hitTest(this.getTopLeft())&&A.hitTest(this.getTopRight())&&A.hitTest(this.getBottomLeft())&&A.hitTest(this.getBottomRight())},intersects:function(A){x11=A.x,y11=A.y,x12=A.x+A.w,y12=A.y+A.h,x21=this.x,y21=this.y,x22=this.x+this.w,y22=this.y+this.h;x_overlap=Math.max(0,Math.min(x12,x22)-Math.max(x11,x21));y_overlap=Math.max(0,Math.min(y12,y22)-Math.max(y11,y21));return x_overlap*y_overlap!==0},toJSON:function(){return{width:this.w,height:this.h,x:this.x,y:this.y}}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/command/CommandType.js' */
(function ($) {draw2d.command.CommandType=Class.extend({NAME:"draw2d.command.CommandType",init:function(A){this.policy=A},getPolicy:function(){return this.policy}});draw2d.command.CommandType.DELETE="DELETE";draw2d.command.CommandType.MOVE="MOVE";draw2d.command.CommandType.CONNECT="CONNECT";draw2d.command.CommandType.MOVE_BASEPOINT="MOVE_BASEPOINT";draw2d.command.CommandType.RESIZE="RESIZE";draw2d.command.CommandType.RESET="RESET";}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/command/Command.js' */
(function ($) {draw2d.command.Command=Class.extend({NAME:"draw2d.command.Command",init:function(A){this.label=A},getLabel:function(){return this.label},canExecute:function(){return true},execute:function(){},cancel:function(){},undo:function(){},redo:function(){}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/command/CommandCollection.js' */
(function ($) {draw2d.command.CommandCollection=draw2d.command.Command.extend({NAME:"draw2d.command.CommandCollection",init:function(){this._super("Execute Commands");this.commands=new draw2d.util.ArrayList()},add:function(A){this.commands.add(A)},execute:function(){this.commands.each(function(A,B){B.execute()})},redo:function(){this.commands.each(function(A,B){B.redo()})},undo:function(){this.commands.reverse();this.commands.each(function(A,B){B.undo()});this.commands.reverse()}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/command/CommandStack.js' */
(function ($) {draw2d.command.CommandStack=Class.extend({NAME:"draw2d.command.CommandStack",init:function(){this.undostack=[];this.redostack=[];this.maxundo=50;this.transactionCommand=null;this.eventListeners=new draw2d.util.ArrayList()},setUndoLimit:function(A){this.maxundo=A},markSaveLocation:function(){this.undostack=[];this.redostack=[];this.notifyListeners(new draw2d.command.Command(),draw2d.command.CommandStack.POST_EXECUTE)},execute:function(A){if(A===null){return }if(typeof A==="undefined"){throw"Missing parameter [command] for method call CommandStack.execute"}if(A.canExecute()===false){return }if(this.transactionCommand!==null){this.transactionCommand.add(A);return }this.notifyListeners(A,draw2d.command.CommandStack.PRE_EXECUTE);this.undostack.push(A);A.execute();this.redostack=[];if(this.undostack.length>this.maxundo){this.undostack=this.undostack.slice(this.undostack.length-this.maxundo)}this.notifyListeners(A,draw2d.command.CommandStack.POST_EXECUTE)},startTransaction:function(){this.transactionCommand=new draw2d.command.CommandCollection()},commitTransaction:function(){if(this.transactionCommand===null){return }var A=this.transactionCommand;this.transactionCommand=null;this.execute(A)},undo:function(){var A=this.undostack.pop();if(A){this.notifyListeners(A,draw2d.command.CommandStack.PRE_UNDO);this.redostack.push(A);A.undo();this.notifyListeners(A,draw2d.command.CommandStack.POST_UNDO)}},redo:function(){var A=this.redostack.pop();if(A){this.notifyListeners(A,draw2d.command.CommandStack.PRE_REDO);this.undostack.push(A);A.redo();this.notifyListeners(A,draw2d.command.CommandStack.POST_REDO)}},getRedoLabel:function(){if(this.redostack.lenght===0){return""}var A=this.redostack[this.redostack.length-1];if(A){return A.getLabel()}return""},getUndoLabel:function(){if(this.undostack.lenght===0){return""}var A=this.undostack[this.undostack.length-1];if(A){return A.getLabel()}return""},canRedo:function(){return this.redostack.length>0},canUndo:function(){return this.undostack.length>0},addEventListener:function(A){if(A instanceof draw2d.command.CommandStackEventListener){this.eventListeners.add(A)}else{if(typeof A.stackChanged==="function"){this.eventListeners.add(A)}else{if(typeof A==="function"){this.eventListeners.add({stackChanged:A})}else{throw"Object doesn't implement required callback interface [draw2d.command.CommandStackListener]"}}}},removeEventListener:function(C){for(var A=0;A<size;A++){var B=this.eventListeners.get(A);if(B===C||B.stackChanged===C){this.eventListeners.remove(B);return }}},notifyListeners:function(E,D){var C=new draw2d.command.CommandStackEvent(this,E,D);var B=this.eventListeners.getSize();for(var A=0;A<B;A++){this.eventListeners.get(A).stackChanged(C)}}});draw2d.command.CommandStack.PRE_EXECUTE=1;draw2d.command.CommandStack.PRE_REDO=2;draw2d.command.CommandStack.PRE_UNDO=4;draw2d.command.CommandStack.POST_EXECUTE=8;draw2d.command.CommandStack.POST_REDO=16;draw2d.command.CommandStack.POST_UNDO=32;draw2d.command.CommandStack.POST_INIT=64;draw2d.command.CommandStack.POST_MASK=draw2d.command.CommandStack.POST_EXECUTE|draw2d.command.CommandStack.POST_UNDO|draw2d.command.CommandStack.POST_REDO;draw2d.command.CommandStack.PRE_MASK=draw2d.command.CommandStack.PRE_EXECUTE|draw2d.command.CommandStack.PRE_UNDO|draw2d.command.CommandStack.PRE_REDO;}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/command/CommandStackEvent.js' */
(function ($) {draw2d.command.CommandStackEvent=Class.extend({NAME:"draw2d.command.CommandStackEvent",init:function(A,C,B){this.stack=A;this.command=C;this.details=B},getStack:function(){return this.stack},getCommand:function(){return this.command},getDetails:function(){return this.details},isPostChangeEvent:function(){return 0!=(this.getDetails()&draw2d.command.CommandStack.POST_MASK)},isPreChangeEvent:function(){return 0!=(this.getDetails()&draw2d.command.CommandStack.PRE_MASK)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/command/CommandStackEventListener.js' */
(function ($) {draw2d.command.CommandStackEventListener=Class.extend({NAME:"draw2d.command.CommandStackEventListener",init:function(){},stackChanged:function(A){}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/command/CommandMove.js' */
(function ($) {draw2d.command.CommandMove=draw2d.command.Command.extend({NAME:"draw2d.command.CommandMove",init:function(B,A,C){this._super("Shape moved");this.figure=B;if(typeof A==="undefined"){this.oldX=B.getX();this.oldY=B.getY()}else{this.oldX=A;this.oldY=C}},setStartPosition:function(A,B){this.oldX=A;this.oldY=B},setPosition:function(A,B){this.newX=A;this.newY=B},canExecute:function(){return this.newX!=this.oldX||this.newY!=this.oldY},execute:function(){this.redo()},undo:function(){this.figure.setPosition(this.oldX,this.oldY)},redo:function(){this.figure.setPosition(this.newX,this.newY)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/command/CommandMoveLine.js' */
(function ($) {draw2d.command.CommandMoveLine=draw2d.command.Command.extend({NAME:"draw2d.command.CommandMoveLine",init:function(B,C,A,E,D){this._super("Line moved");this.line=B;this.startX1=C;this.startY1=A;this.endX1=E;this.endY1=D;this.startX2=-1;this.startY2=-1;this.endX2=-1;this.endY2=-1},canExecute:function(){return this.startX1!=this.startX2||this.startY1!=this.startY2||this.endX1!=this.endX2||this.endY1!=this.endY2},execute:function(){this.startX2=this.line.getStartX();this.startY2=this.line.getStartY();this.endX2=this.line.getEndX();this.endY2=this.line.getEndY();this.redo()},undo:function(){this.line.setStartPoint(this.startX1,this.startY1);this.line.setEndPoint(this.endX1,this.endY1)},redo:function(){this.line.setStartPoint(this.startX2,this.startY2);this.line.setEndPoint(this.endX2,this.endY2)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/command/CommandResize.js' */
(function ($) {draw2d.command.CommandResize=draw2d.command.Command.extend({NAME:"draw2d.command.CommandResize",init:function(B,C,A){this._super("Resize Shape");this.figure=B;if(typeof C==="undefined"){this.oldWidth=B.getWidth();this.oldHeight=B.getHeight()}else{this.oldWidth=C;this.oldHeight=A}},setDimension:function(B,A){this.newWidth=B|0;this.newHeight=A|0},canExecute:function(){return this.newWidth!=this.oldWidth||this.newHeight!=this.oldHeight},execute:function(){this.redo()},undo:function(){this.figure.setDimension(this.oldWidth,this.oldHeight)},redo:function(){this.figure.setDimension(this.newWidth,this.newHeight)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/command/CommandConnect.js' */
(function ($) {draw2d.command.CommandConnect=draw2d.command.Command.extend({NAME:"draw2d.command.CommandConnect",init:function(A,B,C){this._super("Connecting Ports");this.canvas=A;this.source=B;this.target=C;this.connection=null},setConnection:function(A){this.connection=A},execute:function(){if(this.connection===null){this.connection=draw2d.Connection.createConnection(this.source,this.target)}this.connection.setSource(this.source);this.connection.setTarget(this.target);this.canvas.addFigure(this.connection);this.canvas.onNewConnection(this.connection)},redo:function(){this.canvas.addFigure(this.connection);this.connection.reconnect()},undo:function(){this.canvas.removeFigure(this.connection)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/command/CommandReconnect.js' */
(function ($) {draw2d.command.CommandReconnect=draw2d.command.Command.extend({NAME:"draw2d.command.CommandReconnect",init:function(A){this._super("Connecting Ports");this.con=A;this.oldSourcePort=A.getSource();this.oldTargetPort=A.getTarget();this.oldRouter=A.getRouter()},canExecute:function(){return true},setNewPorts:function(A,B){this.newSourcePort=A;this.newTargetPort=B},execute:function(){this.redo()},cancel:function(){this.con.calculatePath();this.con.setRouter(this.oldRouter)},undo:function(){this.con.setSource(this.oldSourcePort);this.con.setTarget(this.oldTargetPort);this.con.setRouter(this.oldRouter);this.con.onReconnect(this.con.getSource(),this.con.getTarget())},redo:function(){this.con.setSource(this.newSourcePort);this.con.setTarget(this.newTargetPort);this.con.setRouter(this.oldRouter);this.con.onReconnect(this.con.getSource(),this.con.getTarget())}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/command/CommandDelete.js' */
(function ($) {draw2d.command.CommandDelete=draw2d.command.Command.extend({init:function(A){this._super("Deleting Shape");this.parent=A.getParent();this.figure=A;this.canvas=A.getCanvas();this.connections=null},execute:function(){this.redo()},undo:function(){this.canvas.addFigure(this.figure);if(this.figure instanceof draw2d.Connection){this.figure.reconnect()}this.canvas.setCurrentSelection(this.figure);if(this.parent!==null){this.parent.addChild(this.figure)}for(var A=0;A<this.connections.getSize();++A){this.canvas.addFigure(this.connections.get(A));this.connections.get(A).reconnect()}},redo:function(){this.canvas.setCurrentSelection(null);if(this.figure instanceof draw2d.shape.node.Node&&this.connections===null){this.connections=new draw2d.util.ArrayList();var E=this.figure.getPorts();for(var C=0;C<E.getSize();C++){var A=E.get(C);for(var D=0,B=A.getConnections().getSize();D<B;D++){if(!this.connections.contains(A.getConnections().get(D))){this.connections.add(A.getConnections().get(D))}}}for(var C=0;C<E.getSize();C++){var A=E.get(C);A.setCanvas(null)}}this.canvas.removeFigure(this.figure);if(this.connections===null){this.connections=new draw2d.util.ArrayList()}if(this.parent!==null){this.parent.removeChild(this.figure)}for(var C=0;C<this.connections.getSize();++C){this.canvas.removeFigure(this.connections.get(C))}}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/command/CommandAdd.js' */
(function ($) {draw2d.command.CommandAdd=draw2d.command.Command.extend({init:function(C,B,A,D){this._super("Add Shape");this.figure=B;this.canvas=C;this.x=A;this.y=D},execute:function(){this.canvas.addFigure(this.figure,this.x,this.y)},redo:function(){this.execute()},undo:function(){this.canvas.removeFigure(this.figure)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/layout/connection/ConnectionRouter.js' */
(function ($) {draw2d.layout.connection.ConnectionRouter=Class.extend({NAME:"draw2d.layout.connection.ConnectionRouter",init:function(){},route:function(A){throw"subclasses must implement the method [ConnectionRouter.route]"}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/layout/connection/DirectRouter.js' */
(function ($) {draw2d.layout.connection.DirectRouter=draw2d.layout.connection.ConnectionRouter.extend({NAME:"draw2d.layout.connection.DirectRouter",init:function(){},invalidate:function(){},route:function(B){var D=B.getStartPoint();var A=B.getEndPoint();B.addPoint(D);B.addPoint(A);var C=["M",D.x," ",D.y];C.push("L",A.x," ",A.y);B.svgPathString=C.join("")}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/layout/connection/ManhattanConnectionRouter.js' */
(function ($) {draw2d.layout.connection.ManhattanConnectionRouter=draw2d.layout.connection.ConnectionRouter.extend({NAME:"draw2d.layout.connection.ManhattanConnectionRouter",MINDIST:20,TOL:0.1,TOLxTOL:0.01,TOGGLE_DIST:5,init:function(){},route:function(D){var E=D.getStartPoint();var G=D.getSource().getConnectionDirection(D,D.getTarget());var H=D.getEndPoint();var C=D.getTarget().getConnectionDirection(D,D.getSource());this._route(D,H,C,E,G);var A=D.getPoints();var B=A.get(0);var I=["M",(B.x|0)+0.5," ",(B.y|0)+0.5];for(var F=1;F<A.getSize();F++){B=A.get(F);I.push("L",(B.x|0)+0.5," ",(B.y|0)+0.5)}D.svgPathString=I.join("")},_route:function(D,E,F,N,C){var M=0;var G=1;var K=2;var A=3;var J=E.x-N.x;var H=E.y-N.y;var L;var B;if(((J*J)<(this.TOLxTOL))&&((H*H)<(this.TOLxTOL))){D.addPoint(new draw2d.geo.Point(N.x,N.y));return }if(F===A){if((J>0)&&((H*H)<this.TOL)&&(C===G)){L=N;B=C}else{if(J<0){L=new draw2d.geo.Point(E.x-this.MINDIST,E.y)}else{if(((H>0)&&(C===K))||((H<0)&&(C===M))){L=new draw2d.geo.Point(N.x,E.y)}else{if(F==C){var I=Math.min(E.x,N.x)-this.MINDIST;L=new draw2d.geo.Point(I,E.y)}else{L=new draw2d.geo.Point(E.x-(J/2),E.y)}}}if(H>0){B=M}else{B=K}}}else{if(F===G){if((J<0)&&((H*H)<this.TOL)&&(C===A)){L=N;B=C}else{if(J>0){L=new draw2d.geo.Point(E.x+this.MINDIST,E.y)}else{if(((H>0)&&(C===K))||((H<0)&&(C===M))){L=new draw2d.geo.Point(N.x,E.y)}else{if(F===C){var I=Math.max(E.x,N.x)+this.MINDIST;L=new draw2d.geo.Point(I,E.y)}else{L=new draw2d.geo.Point(E.x-(J/2),E.y)}}}if(H>0){B=M}else{B=K}}}else{if(F===K){if(((J*J)<this.TOL)&&(H<0)&&(C===M)){L=N;B=C}else{if(H>0){L=new draw2d.geo.Point(E.x,E.y+this.MINDIST)}else{if(((J>0)&&(C===G))||((J<0)&&(C===A))){L=new draw2d.geo.Point(E.x,N.y)}else{if(F===C){var I=Math.max(E.y,N.y)+this.MINDIST;L=new draw2d.geo.Point(E.x,I)}else{L=new draw2d.geo.Point(E.x,E.y-(H/2))}}}if(J>0){B=A}else{B=G}}}else{if(F===M){if(((J*J)<this.TOL)&&(H>0)&&(C===K)){L=N;B=C}else{if(H<0){L=new draw2d.geo.Point(E.x,E.y-this.MINDIST)}else{if(((J>0)&&(C===G))||((J<0)&&(C===A))){L=new draw2d.geo.Point(E.x,N.y)}else{if(F===C){var I=Math.min(E.y,N.y)-this.MINDIST;L=new draw2d.geo.Point(E.x,I)}else{L=new draw2d.geo.Point(E.x,E.y-(H/2))}}}if(J>0){B=A}else{B=G}}}}}}this._route(D,L,B,N,C);D.addPoint(E)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/layout/connection/ManhattanBridgedConnectionRouter.js' */
(function ($) {draw2d.layout.connection.ManhattanBridgedConnectionRouter=draw2d.layout.connection.ManhattanConnectionRouter.extend({NAME:"draw2d.layout.connection.ManhattanBridgedConnectionRouter",BRIDGE_HORIZONTAL_LR:" r 0 0 3 -4 7 -4 10 0 13 0 ",BRIDGE_HORIZONTAL_RL:" r 0 0 -3 -4 -7 -4 -10 0 -13 0 ",init:function(){},route:function(E){var F=E.getStartPoint();var K=E.getSource().getConnectionDirection(E,E.getTarget());var N=E.getEndPoint();var D=E.getTarget().getConnectionDirection(E,E.getSource());this._route(E,N,D,F,K);var O=E.getCanvas().getIntersection(E).sort("x");var L=O.clone().reverse();var G=O;var I=0;var A=E.getPoints();var B=A.get(0);var M=["M",(B.x|0)+0.5," ",(B.y|0)+0.5];var C=B;for(I=1;I<A.getSize();I++){B=A.get(I);var J=5;var H=this.BRIDGE_HORIZONTAL_LR;if(C.x>B.x){G=L;H=this.BRIDGE_HORIZONTAL_RL;J=-J}G.each(function(P,Q){if(Q.justTouching==false&&draw2d.shape.basic.Line.hit(1,C.x,C.y,B.x,B.y,Q.x,Q.y)===true){if(B.y===Q.y){M.push(" L",((Q.x-J)|0)+0.5," ",(Q.y|0)+0.5);M.push(H)}}});M.push(" L",(B.x|0)+0.5," ",(B.y|0)+0.5);C=B}E.svgPathString=M.join("")}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/layout/connection/CircuitConnectionRouter.js' */
(function ($) {draw2d.layout.connection.CircuitConnectionRouter=draw2d.layout.connection.ManhattanConnectionRouter.extend({NAME:"draw2d.layout.connection.CircuitConnectionRouter",init:function(){this.setBridgeRadius(4);this.setJunctionRadius(2);this.abortRoutingOnFirstJunctionNode=false},setJunctionRadius:function(A){this.junctionRadius=A},setBridgeRadius:function(A){this.bridgeRadius=A;this.bridge_LR=[" r",0.5,-0.5,A-(A/2),-(A-A/4),A,-A,A+(A/2),-(A-A/4),A*2,"0 "].join(" ");this.bridge_RL=[" r",-0.5,-0.5,-(A-(A/2)),-(A-A/4),-A,-A,-(A+(A/2)),-(A-A/4),-A*2,"0 "].join(" ")},route:function(E){var F=E.getStartPoint();var L=E.getSource().getConnectionDirection(E,E.getTarget());var O=E.getEndPoint();var D=E.getTarget().getConnectionDirection(E,E.getSource());this._route(E,O,D,F,L);var P=E.getCanvas().getIntersection(E).sort("x");var M=P.clone().reverse();var G=P;var J=0;if(typeof E.junctionNodes!=="undefined"&&E.junctionNodes!==null){E.junctionNodes.remove()}E.junctionNodes=E.canvas.paper.set();var A=E.getPoints();var B=A.get(0);var N=["M",(B.x|0)+0.5," ",(B.y|0)+0.5];var C=B;var K=null;var I=null;var H=null;for(J=1;J<A.getSize();J++){B=A.get(J);if(C.x>B.x){G=M;I=this.bridge_RL;K=-this.bridgeRadius}else{G=P;I=this.bridge_LR;K=this.bridgeRadius}G.each($.proxy(function(S,U){if(draw2d.shape.basic.Line.hit(1,C.x,C.y,B.x,B.y,U.x,U.y)===true){if(E.sharingPorts(U.other)){var Q=U.other;var V=Q.getZOrder();var R=E.getZOrder();if(R<V){var T=E.canvas.paper.ellipse(U.x,U.y,this.junctionRadius,this.junctionRadius).attr({fill:E.lineColor.hash()});E.junctionNodes.push(T);if(this.abortRoutingOnFirstJunctionNode===true){if(E.getSource()==Q.getSource()||E.getSource()==Q.getTarget()){N=["M",(U.x|0)+0.5," ",(U.y|0)+0.5];if(H!==null){H.remove();E.junctionNodes.exclude(H)}}H=T}}}else{if(B.y===U.y){N.push(" L",((U.x-K)|0)+0.5," ",(U.y|0)+0.5);N.push(I)}}}},this));N.push(" L",(B.x|0)+0.5," ",(B.y|0)+0.5);C=B}E.svgPathString=N.join("")}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/layout/connection/SplineConnectionRouter.js' */
(function ($) {draw2d.layout.connection.SplineConnectionRouter=draw2d.layout.connection.ManhattanConnectionRouter.extend({NAME:"draw2d.layout.connection.SplineConnectionRouter",init:function(){this.spline=new draw2d.util.spline.CubicSpline();this.MINDIST=50,this.cheapRouter=null},route:function(D){var F=0;var E=D.getStartPoint();var G=D.getSource().getConnectionDirection(D,D.getTarget());var J=D.getEndPoint();var C=D.getTarget().getConnectionDirection(D,D.getSource());this._route(D,J,C,E,G);var A=D.getPoints();D.oldPoint=null;D.lineSegments=new draw2d.util.ArrayList();D.basePoints=new draw2d.util.ArrayList();var H=this.spline.generate(A,8);H.each(function(K,L){D.addPoint(L)});var A=D.getPoints();length=A.getSize();var B=A.get(0);var I=["M",B.x," ",B.y];for(F=1;F<length;F++){B=A.get(F);I.push("L",B.x," ",B.y)}D.svgPathString=I.join("")}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/layout/connection/FanConnectionRouter.js' */
(function ($) {draw2d.layout.connection.FanConnectionRouter=draw2d.layout.connection.DirectRouter.extend({NAME:"gdraw2d.layout.connection.FanConnectionRouter",init:function(){},route:function(F){var B=F.getSource().getConnections();var E=new draw2d.util.ArrayList();var C=0;for(var D=0;D<B.getSize();D++){var A=B.get(D);if(A.getTarget()===F.getTarget()||A.getSource()===F.getTarget()){E.add(A);if(F===A){C=E.getSize()}}}if(E.getSize()>1){this.routeCollision(F,C)}else{this._super(F)}},routeCollision:function(F,L){var C=F.getStartPoint();var I=F.getEndPoint();var H=15;var N=new draw2d.geo.Point((I.x+C.x)/2,(I.y+C.y)/2);var K=I.getPosition(C);var O;if(K==draw2d.geo.PositionConstants.SOUTH||K==draw2d.geo.PositionConstants.EAST){O=new draw2d.geo.Point(I.x-C.x,I.y-C.y)}else{O=new draw2d.geo.Point(C.x-I.x,C.y-I.y)}var D=Math.sqrt(O.x*O.x+O.y*O.y);var M=H*O.x/D;var G=H*O.y/D;var E;if(L%2===0){E=new draw2d.geo.Point(N.x+(L/2)*(-1*G),N.y+(L/2)*M)}else{E=new draw2d.geo.Point(N.x+(L/2)*G,N.y+(L/2)*(-1*M))}F.addPoint(C);F.addPoint(E);F.addPoint(I);var A=F.getPoints();var B=A.get(0);var P=["M",B.x," ",B.y];for(var J=1;J<A.getSize();J++){B=A.get(J);P.push("L",B.x," ",B.y)}F.svgPathString=P.join("")}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/layout/connection/MazeConnectionRouter.js' */
(function ($) {var ROUTER_RECTS=null;draw2d.layout.connection.MazeConnectionRouter=draw2d.layout.connection.ConnectionRouter.extend({NAME:"draw2d.layout.connection.MazeConnectionRouter",init:function(){this.useSpline=false;this.useSimplify=true;this.useSimplifyValue=2;this.useDebug=false;this.useShift=4;this.portOutletOffset=15;this.finder=new PF.JumpPointFinder({allowDiagonal:false,dontCrossCorners:true})},route:function(D){var E=D.getStartPoint();var G=D.getSource().getConnectionDirection(D,D.getTarget());var H=D.getEndPoint();var C=D.getTarget().getConnectionDirection(D,D.getSource());this._route(D,H,C,E,G);var A=D.getPoints();var B=A.get(0);var I=["M",(B.x|0)+0.5," ",(B.y|0)+0.5];for(var F=1;F<A.getSize();F++){B=A.get(F);I.push("L",(B.x|0)+0.5," ",(B.y|0)+0.5)}D.svgPathString=I.join("")},_route:function(E,F,J,M,D){var C=this.useShift;oldToPt=M;oldFromPt=F;F=this.getAddjustedPoint(F,J,this.portOutletOffset);M=this.getAddjustedPoint(M,D,this.portOutletOffset);var A=this.generateNoGoGrid(E,F,J,M,D);var N=this.finder.findPath(F.x>>C,F.y>>C,M.x>>C,M.y>>C,A);$.each(N,function(O,P){P.x=P[0]=P[0]<<C;P.y=P[1]=P[1]<<C});if(this.useDebug){if(ROUTER_RECTS!==null){ROUTER_RECTS.remove()}ROUTER_RECTS=E.canvas.paper.set();for(var H=0;H<A.width;H++){for(var G=0;G<A.height;G++){if(!A.isWalkableAt(H,G)){ROUTER_RECTS.push(E.canvas.paper.rect(H<<C,G<<C,1<<C,1<<C).attr({fill:"red",opacity:"0.1"}))}}}ROUTER_RECTS.push(E.canvas.paper.rect(F.x-3,F.y-3,6,6).attr({fill:"#ff0000",opacity:"0.8"}));ROUTER_RECTS.push(E.canvas.paper.rect(M.x-3,M.y-3,6,6).attr({fill:"#ff0000",opacity:"0.8"}));$.each(N,function(O,P){ROUTER_RECTS.push(E.canvas.paper.rect(P.x-3,P.y-3,6,6).attr({fill:"#0000ff",opacity:"0.8"}))});var B=N[0];var K=["M",B.x," ",B.y];for(var H=1;H<N.length;H++){B=N[H];K.push("L",B.x," ",B.y)}K=K.join("");ROUTER_RECTS.push(E.canvas.paper.path(K).attr({stroke:"#0000ff"}))}this.adjustPath(F,N,J);N.reverse();this.adjustPath(M,N,D);N.reverse();$.each(N,function(O,P){P.x=P[0];P.y=P[1]});if(this.useSpline){var B=new draw2d.util.ArrayList();B.add(oldFromPt);$.each(N,function(O,P){B.add(new draw2d.geo.Point(P[0],P[1]))});B.add(oldToPt);if(this.useDebug){$.each(N,function(O,P){ROUTER_RECTS.push(E.canvas.paper.rect(P.x-3,P.y-3,6,6).attr({fill:"#00ff00",opacity:"0.8"}))});var L=N[0];var K=["M",L.x," ",L.y];for(var H=1;H<N.length;H++){L=N[H];K.push("L",L.x," ",L.y)}K=K.join("");ROUTER_RECTS.push(E.canvas.paper.path(K).attr({stroke:"#00ff00"}))}this.spline=new draw2d.util.spline.CubicSpline();var I=this.spline.generate(B,8);if(this.useSimplify){N=[];I.each(function(O,P){N.push({x:P.x,y:P.y})});N=this.simplify(N,this.useSimplifyValue,true);$.each(N,function(O,P){E.addPoint(P.x,P.y)})}else{I.each(function(O,P){E.addPoint(P)})}}else{if(this.useSimplify){N=this.simplify(N,this.useSimplifyValue,true)}if(this.useDebug){$.each(N,function(O,P){ROUTER_RECTS.push(E.canvas.paper.rect(P.x-3,P.y-3,6,6).attr({fill:"#00ff00",opacity:"0.8"}))});var B=N[0];var K=["M",B.x," ",B.y];for(var H=1;H<N.length;H++){B=N[H];K.push("L",B.x," ",B.y)}K=K.join("");ROUTER_RECTS.push(E.canvas.paper.path(K).attr({stroke:"#00ff00"}))}E.addPoint(oldFromPt);$.each(N,function(O,P){E.addPoint(P[0],P[1])});E.addPoint(oldToPt)}},generateNoGoGrid:function(F,G,C,I,B){var Q=this.useShift;var L=(1<<Q)/2;var R=F.getCanvas().paper.width>>Q;var D=F.getCanvas().paper.height>>Q;var A=new PF.Grid(R,D);var E=F.getCanvas().getFigures();E.each(function(V,Y){var X=Y.getBoundingBox();if(X.hitTest(G.x,G.y)===true||X.hitTest(I.x,I.y)){return }var T=X.x>>Q;var Z=X.y>>Q;if(T<1||Z<1){return }var W=(X.x+X.w+L)>>Q;var S=(X.y+X.h+L)>>Q;for(var V=T;V<=W;V++){for(var U=Z;U<=S;U++){A.setWalkableAt(V,U,false)}}});var K=F.getSource().getParent().getBoundingBox();if(B===1||B===3){var H=K.y>>Q;if(H>0){var M=K.y+K.h;var P=(I.x>>Q);for(var N=H-1;N<<Q<=M;N++){A.setWalkableAt(P,N,true)}}}else{var J=K.x>>Q;if(J>0){var O=K.x+K.w;var N=(I.x>>Q);for(var P=J-1;P<<Q<=O;P++){A.setWalkableAt(P,N,true)}}}K=F.getTarget().getParent().getBoundingBox();if(C===1||C===3){var H=K.y>>Q;if(H>0){var M=K.y+K.h;var P=(G.x>>Q);for(var N=H-1;N<<Q<=M;N++){A.setWalkableAt(P,N,true)}}}else{var J=K.x>>Q;if(J>0){var O=K.x+K.w;var N=(G.x>>Q);for(var P=J-1;P<<Q<=O;P++){A.setWalkableAt(P,N,true)}}}return A},getAddjustedPoint:function(C,B,A){switch(B){case 0:return new draw2d.geo.Point(C.x,C.y-A);case 1:return new draw2d.geo.Point(C.x+A,C.y);case 2:return new draw2d.geo.Point(C.x,C.y+A);case 3:return new draw2d.geo.Point(C.x-A,C.y)}},adjustPath:function(E,D,C){var B=this.useShift;var A=E.x>>B;var F=E.y>>B;$.each(D,function(G,H){if(F===(H[1]>>B)){H[1]=E.y}else{return false}});$.each(D,function(G,H){if(A===(H[0]>>B)){H[0]=E.x}else{return false}})},getSquareDistance:function(D,C){var B=D.x-C.x,A=D.y-C.y;return B*B+A*A},getSquareSegmentDistance:function(F,G,E){var A=G.x,H=G.y,C=E.x-A,B=E.y-H,D;if(C!==0||B!==0){D=((F.x-A)*C+(F.y-H)*B)/(C*C+B*B);if(D>1){A=E.x;H=E.y}else{if(D>0){A+=C*D;H+=B*D}}}C=F.x-A;B=F.y-H;return C*C+B*B},simplifyRadialDistance:function(F,D){var E,B=F.length,A,C=F[0],G=[C];for(E=1;E<B;E++){A=F[E];if(this.getSquareDistance(A,C)>D){G.push(A);C=A}}if(C!==A){G.push(A)}return G},simplifyDouglasPeucker:function(M,A){var I=M.length,K=(typeof Uint8Array!==undefined+"")?Uint8Array:Array,C=new K(I),G=0,L=I-1,E,D,F,H,B=[],J=[],N=[];C[G]=C[L]=1;while(L){D=0;for(E=G+1;E<L;E++){F=this.getSquareSegmentDistance(M[E],M[G],M[L]);if(F>D){H=E;D=F}}if(D>A){C[H]=1;B.push(G);J.push(H);B.push(H);J.push(L)}G=B.pop();L=J.pop()}for(E=0;E<I;E++){if(C[E]){N.push(M[E])}}return N},simplify:function(C,A,D){var B=(A!==undefined)?A*A:1;if(!D){C=this.simplifyRadialDistance(C,B)}C=this.simplifyDouglasPeucker(C,B);return C}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/layout/connection/SketchConnectionRouter.js' */
(function ($) {draw2d.layout.connection.SketchConnectionRouter=draw2d.layout.connection.MazeConnectionRouter.extend({NAME:"draw2d.layout.connection.SketchConnectionRouter",init:function(){this._super();this.useSpline=true;this.useShift=5;this.useSimplifyValue=0.2;this.finder=new PF.JumpPointFinder({allowDiagonal:false,dontCrossCorners:true})}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/layout/mesh/MeshLayouter.js' */
(function ($) {draw2d.layout.mesh.MeshLayouter=Class.extend({init:function(){},add:function(B,A){return new draw2d.util.ArrayList()}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/layout/mesh/ExplodeLayouter.js' */
(function ($) {draw2d.layout.mesh.ExplodeLayouter=draw2d.layout.mesh.MeshLayouter.extend({MIN_MARGIN:40,init:function(){},add:function(A,E){var J=[];J[0]={x:0,y:0};J[1]={x:0,y:0};J[2]={x:0,y:0};J[3]={x:0,y:0};J[4]={x:0,y:0};J[5]={x:0,y:0};J[6]={x:0,y:0};J[7]={x:0,y:0};J[8]={x:0,y:0};var C=E.getBoundingBox();var H=A.getFigures();var I=null;var B=0;var G=0;var F=null;var D=0;for(D=0;D<H.getSize();D++){I=H.get(D);if(I!==E){B=I.getBoundingBox().getDistance(C);if(B<this.MIN_MARGIN){G=this.determineOctant(C,I.getBoundingBox());switch(G){case 2:J[2].x=Math.max(J[2].x,this.MIN_MARGIN-B);J[3].x=Math.max(J[3].x,this.MIN_MARGIN-B);J[4].x=Math.max(J[4].x,this.MIN_MARGIN-B);break;case 3:J[2].x=Math.max(J[2].x,this.MIN_MARGIN-B);J[3].x=Math.max(J[3].x,this.MIN_MARGIN-B);J[4].x=Math.max(J[4].x,this.MIN_MARGIN-B);break;case 4:J[2].x=Math.max(J[2].x,this.MIN_MARGIN-B);J[3].x=Math.max(J[3].x,this.MIN_MARGIN-B);J[4].x=Math.max(J[4].x,this.MIN_MARGIN-B);J[4].y=Math.max(J[4].y,this.MIN_MARGIN-B);J[5].y=Math.max(J[5].y,this.MIN_MARGIN-B);J[6].y=Math.max(J[6].y,this.MIN_MARGIN-B);break;case 5:J[4].y=Math.max(J[4].y,this.MIN_MARGIN-B);J[5].y=Math.max(J[5].y,this.MIN_MARGIN-B);J[6].y=Math.max(J[6].y,this.MIN_MARGIN-B);break;case 6:J[4].y=Math.max(J[4].y,this.MIN_MARGIN-B);J[5].y=Math.max(J[5].y,this.MIN_MARGIN-B);J[6].y=Math.max(J[6].y,this.MIN_MARGIN-B);break;case 8:B=(C.getBottomRight().getDistance(I.getBoundingBox().getTopLeft()))|0;J[2].x=Math.max(J[2].x,this.MIN_MARGIN+B);J[3].x=Math.max(J[3].x,this.MIN_MARGIN+B);J[4].x=Math.max(J[4].x,this.MIN_MARGIN+B);J[4].y=Math.max(J[4].y,this.MIN_MARGIN+B);J[5].y=Math.max(J[5].y,this.MIN_MARGIN+B);J[6].y=Math.max(J[6].y,this.MIN_MARGIN+B);J[8].x=Math.max(J[8].x,this.MIN_MARGIN+B)}}}}var K=new draw2d.util.ArrayList();for(D=0;D<H.getSize();D++){I=H.get(D);if(I!==E){G=this.determineOctant(C,I.getBoundingBox());F=J[G];if(F.x!==0||F.y!==0){K.add(new draw2d.layout.mesh.ProposedMeshChange(I,F.x,F.y))}}}return K},determineOctant:function(F,D){var C=F.x;var B=F.y;var E=F.w;var K=F.h;var H=D.x;var G=D.y;var I=D.w;var A=D.h;var J=0;if(H+I<=C){if((G+A)<=B){J=0}else{if(G>=(B+K)){J=6}else{J=7}}}else{if(H>=C+E){if(G+A<=B){J=2}else{if(G>=B+K){J=4}else{J=3}}}else{if(G+A<=B){J=1}else{if(G>=B+K){J=5}else{J=8}}}}return J}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/layout/mesh/ProposedMeshChange.js' */
(function ($) {draw2d.layout.mesh.ProposedMeshChange=Class.extend({init:function(B,A,C){this.figure=B;this.x=A;this.y=C},getFigure:function(){return this.figure},getX:function(){return this.x},getY:function(){return this.y}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/layout/locator/Locator.js' */
(function ($) {draw2d.layout.locator.Locator=Class.extend({NAME:"draw2d.layout.locator.Locator",init:function(A){this.parent=A},getParent:function(){return this.parent},setParent:function(A){this.parent=A},relocate:function(B,A){}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/layout/locator/PortLocator.js' */
(function ($) {draw2d.layout.locator.PortLocator=draw2d.layout.locator.Locator.extend({NAME:"draw2d.layout.locator.PortLocator",init:function(){this._super()},applyConsiderRotation:function(A,G,F){var H=A.getParent();var I=H.getWidth()/2;var D=H.getHeight()/2;var C=H.getRotationAngle();var B=Raphael.matrix();B.rotate(C,I,D);if(C===90||C===270){var E=H.getHeight()/H.getWidth();B.scale(E,1/E,I,D)}A.setPosition(B.x(G,F),B.y(G,F))}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/layout/locator/InputPortLocator.js' */
(function ($) {draw2d.layout.locator.InputPortLocator=draw2d.layout.locator.PortLocator.extend({NAME:"draw2d.layout.locator.InputPortLocator",init:function(){this._super()},relocate:function(B,A){var D=A.getParent();var C=D.getHeight();var E=C/(D.getInputPorts().getSize()+1);this.applyConsiderRotation(A,0,E*(B+1))}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/layout/locator/OutputPortLocator.js' */
(function ($) {draw2d.layout.locator.OutputPortLocator=draw2d.layout.locator.PortLocator.extend({NAME:"draw2d.layout.locator.OutputPortLocator",init:function(){this._super()},relocate:function(B,A){var C=A.getParent();var D=C.getHeight()/(C.getOutputPorts().getSize()+1);this.applyConsiderRotation(A,C.getWidth(),D*(B+1))}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/layout/locator/ConnectionLocator.js' */
(function ($) {draw2d.layout.locator.ConnectionLocator=draw2d.layout.locator.Locator.extend({NAME:"draw2d.layout.locator.ConnectionLocator",init:function(A){this._super(A)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/layout/locator/ManhattanMidpointLocator.js' */
(function ($) {draw2d.layout.locator.ManhattanMidpointLocator=draw2d.layout.locator.ConnectionLocator.extend({NAME:"draw2d.layout.locator.ManhattanMidpointLocator",init:function(A){this._super(A)},relocate:function(C,D){var A=this.getParent();var H=A.getPoints();var B=Math.floor((H.getSize()-2)/2);if(H.getSize()<=B+1){return }var I=H.get(B);var G=H.get(B+1);if(!I||!G){return }var F=((G.x-I.x)/2+I.x-D.getWidth()/2)|0;var E=((G.y-I.y)/2+I.y-D.getHeight()/2)|0;D.setPosition(F,E)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/layout/locator/PolylineMidpointLocator.js' */
(function ($) {draw2d.layout.locator.PolylineMidpointLocator=draw2d.layout.locator.ManhattanMidpointLocator.extend({NAME:"draw2d.layout.locator.PolylineMidpointLocator",init:function(A){this._super(A)},relocate:function(A,D){var C=this.getParent();var B=C.getPoints();if(B.getSize()%2===0){this._super(A,D)}else{var A=Math.floor(B.getSize()/2);var E=B.get(A);D.setPosition(E.x-(D.getWidth()/2),E.y-(D.getHeight()/2))}}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/layout/locator/TopLocator.js' */
(function ($) {draw2d.layout.locator.TopLocator=draw2d.layout.locator.Locator.extend({NAME:"draw2d.layout.locator.TopLocator",init:function(A){this._super(A)},relocate:function(B,D){var C=this.getParent();var A=C.getBoundingBox();var E=D.getBoundingBox();if(D instanceof draw2d.Port){D.setPosition(A.w/2,2)}else{D.setPosition(A.w/2-(E.w/2),-(E.h+2))}}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/layout/locator/BottomLocator.js' */
(function ($) {draw2d.layout.locator.BottomLocator=draw2d.layout.locator.Locator.extend({NAME:"draw2d.layout.locator.BottomLocator",init:function(A){this._super(A)},relocate:function(B,D){var C=this.getParent();var A=C.getBoundingBox();var E=D.getBoundingBox();if(D instanceof draw2d.Port){D.setPosition(A.w/2,A.h-2)}else{D.setPosition(A.w/2-E.w/2,2+A.h)}}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/layout/locator/LeftLocator.js' */
(function ($) {draw2d.layout.locator.LeftLocator=draw2d.layout.locator.Locator.extend({NAME:"draw2d.layout.locator.LeftLocator",init:function(A){this._super(A)},relocate:function(B,D){var C=this.getParent();var A=C.getBoundingBox();var E=D.getBoundingBox();if(D instanceof draw2d.Port){D.setPosition(2,A.h/2)}else{D.setPosition(-E.w-5,(A.h/2)-(E.h/2))}}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/layout/locator/RightLocator.js' */
(function ($) {draw2d.layout.locator.RightLocator=draw2d.layout.locator.Locator.extend({NAME:"draw2d.layout.locator.RightLocator",init:function(A){this._super(A)},relocate:function(B,D){var C=this.getParent();var A=C.getBoundingBox();var E=D.getBoundingBox();if(D instanceof draw2d.Port){D.setPosition(A.w-2,A.h/2)}else{D.setPosition(A.w+5,(A.h/2)-(E.h/2))}}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/layout/locator/CenterLocator.js' */
(function ($) {draw2d.layout.locator.CenterLocator=draw2d.layout.locator.Locator.extend({NAME:"draw2d.layout.locator.CenterLocator",init:function(A){this._super(A)},relocate:function(B,D){var C=this.getParent();var A=C.getBoundingBox();if(D instanceof draw2d.Port){D.setPosition(A.w/2,A.h/2)}else{var E=D.getBoundingBox();D.setPosition(A.w/2-E.w/2,A.h/2-(E.h/2))}}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/EditPolicy.js' */
(function ($) {draw2d.policy.EditPolicy=Class.extend({NAME:"draw2d.policy.EditPolicy",init:function(){},onInstall:function(A){},onUninstall:function(A){}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/canvas/CanvasPolicy.js' */
(function ($) {draw2d.policy.canvas.CanvasPolicy=draw2d.policy.EditPolicy.extend({NAME:"draw2d.policy.canvas.CanvasPolicy",init:function(){this._super()},onInstall:function(A){},onUninstall:function(A){},onClick:function(A,B){},onMouseMove:function(B,A,C){},snap:function(C,A,B){return B},onMouseDown:function(B,A,C){},onMouseDrag:function(D,C,B,E,A){},onMouseUp:function(B,A,C){}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/canvas/SelectionPolicy.js' */
(function ($) {draw2d.policy.canvas.SelectionPolicy=draw2d.policy.canvas.CanvasPolicy.extend({NAME:"draw2d.policy.canvas.SelectionPolicy",init:function(){this._super()},unselect:function(B,A){A.unselect();B.getSelection().remove(A)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/canvas/SingleSelectionPolicy.js' */
(function ($) {draw2d.policy.canvas.SingleSelectionPolicy=draw2d.policy.canvas.SelectionPolicy.extend({NAME:"draw2d.policy.canvas.SingleSelectionPolicy",init:function(){this._super();this.mouseMovedDuringMouseDown=false;this.mouseDraggingElement=null;this.mouseDownElement=null},select:function(C,A,E){var B=C.getSelection().getPrimary(),D=C.getSelection().getAll().contains(A);if(D&&A.allowSelectionIfAlreadySelected===false){return }if(B!==A){C.getSelection().setPrimary(A);if(B!==null){this.unselect(C,B)}}if(A!==null){A.select(true,E)}C.selectionListeners.each(function(G,F){F.onSelectionChanged(A,B)})},onMouseDown:function(C,B,F){this.mouseMovedDuringMouseDown=false;var D=true;var A=C.getBestFigure(B,F);var E=[A];while((A!==null&&A.getParent()!==null)&&!(A instanceof draw2d.Port)){A=A.getParent();E.push(A)}if(A!==null&&A.isDraggable()){D=A.onDragStart(B-A.getAbsoluteX(),F-A.getAbsoluteY());if(D===false){this.mouseDraggingElement=null;this.mouseDownElement=A}else{this.mouseDraggingElement=A;this.mouseDownElement=A}}if(A!==null&&A.isSelectable()===true&&(A!==C.getSelection().getPrimary()||A.allowSelectionIfAlreadySelected===true)){this.select(C,A,E);if(A instanceof draw2d.shape.basic.Line){if(!(A instanceof draw2d.Connection)){C.draggingLineCommand=A.createCommand(new draw2d.command.CommandType(draw2d.command.CommandType.MOVE));if(C.draggingLineCommand!==null){C.draggingLine=A}}}else{if(D===false){A.unselect()}}}},onMouseDrag:function(D,J,I,H,E){this.mouseMovedDuringMouseDown=true;if(this.mouseDraggingElement!==null){if(D.linesToRepaintAfterDragDrop.isEmpty()===true&&(this.mouseDraggingElement instanceof draw2d.shape.node.Node)){var F=this.mouseDraggingElement.getConnections();var A=D.lineIntersections.clone();D.lineIntersections.each($.proxy(function(L,K){if(F.contains(K.line)||F.contains(K.other)){A.remove(K);D.linesToRepaintAfterDragDrop.add(K.line);D.linesToRepaintAfterDragDrop.add(K.other)}},this));D.lineIntersections=A;D.linesToRepaintAfterDragDrop.each($.proxy(function(L,K){this.repaintLineAfterDragDrop(K)},this))}var C=D.getSelection().getAll();if(!C.contains(this.mouseDraggingElement)){this.mouseDraggingElement.onDrag(J,I)}else{C.each(function(L,K){K.onDrag(J,I)})}var B=D.fromDocumentToCanvasCoordinate(D.mouseDownX,D.mouseDownY).translate(J,I);var G=D.getBestFigure(B.x,B.y,this.mouseDraggingElement);if(G!==D.currentDropTarget){if(D.currentDropTarget!==null){D.currentDropTarget.onDragLeave(this.mouseDraggingElement);D.currentDropTarget=null}if(G!==null){D.currentDropTarget=G.onDragEnter(this.mouseDraggingElement)}}}else{if(this.mouseDownElement!==null&&!(this.mouseDownElement instanceof draw2d.Connection)){this.mouseDownElement.onPanning(J,I)}}},repaintLineAfterDragDrop:function(A){A.svgPathString=null;A.repaint()},onMouseUp:function(B,A,D){if(this.mouseDraggingElement!==null){var C=B.getSelection().getAll();if(!C.contains(this.mouseDraggingElement)){this.mouseDraggingElement.onDragEnd()}else{B.getCommandStack().startTransaction();B.getSelection().getAll().each(function(F,E){E.onDragEnd()});B.getCommandStack().commitTransaction()}if(B.currentDropTarget!==null){this.mouseDraggingElement.onDrop(B.currentDropTarget);B.currentDropTarget.onDragLeave(this.mouseDraggingElement);B.currentDropTarget=null}this.mouseDraggingElement=null}if((this.mouseDownElement===null||this.mouseDownElement.isSelectable()===false)&&this.mouseMovedDuringMouseDown===false){this.select(B,null)}this.mouseDownElement=null;this.mouseMovedDuringMouseDown=false}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/canvas/PanningSelectionPolicy.js' */
(function ($) {draw2d.policy.canvas.PanningSelectionPolicy=draw2d.policy.canvas.SingleSelectionPolicy.extend({NAME:"draw2d.policy.canvas.PanningSelectionPolicy",init:function(){this._super()},onMouseDrag:function(D,C,B,F,A){this._super(D,C,B,F,A);if(this.mouseDraggingElement===null&&this.mouseDownElement===null){var E=D.getScrollArea();E.scrollTop(E.scrollTop()+A);E.scrollLeft(E.scrollLeft()+F)}}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/canvas/BoundingBoxSelectionPolicy.js' */
(function ($) {draw2d.policy.canvas.BoundingboxSelectionPolicy=draw2d.policy.canvas.SingleSelectionPolicy.extend({NAME:"draw2d.policy.canvas.BoundingboxSelectionPolicy",init:function(){this._super();this.boundingBoxFigure1=null;this.boundingBoxFigure2=null;this.x=0;this.y=0},select:function(B,A){if(B.getSelection().getAll().contains(A)){return }if(A!==null){A.select(true)}B.getSelection().setPrimary(A);B.selectionListeners.each(function(D,C){C.onSelectionChanged(A)})},onMouseDown:function(B,A,D){this.x=A;this.y=D;var C=B.getSelection().getAll();this._super(B,A,D);if(this.mouseDownElement!==null&&this.mouseDownElement.isResizeHandle===false&&!C.contains(this.mouseDownElement)){C.each($.proxy(function(F,E){this.unselect(B,E)},this))}C=B.getSelection().getAll();C.each($.proxy(function(F,E){var G=E.onDragStart(E.getAbsoluteX(),E.getAbsoluteY());if(E instanceof draw2d.shape.basic.Line){}else{if(G===false){this.unselect(B,E)}}},this))},onMouseDrag:function(D,C,B,E,A){this._super(D,C,B,E,A);if(this.mouseDraggingElement===null&&this.mouseDownElement===null&&this.boundingBoxFigure1===null){this.boundingBoxFigure1=new draw2d.shape.basic.Rectangle(1,1);this.boundingBoxFigure1.setPosition(this.x,this.y);this.boundingBoxFigure1.setCanvas(D);this.boundingBoxFigure1.setBackgroundColor("#0f0f0f");this.boundingBoxFigure1.setAlpha(0.1);this.boundingBoxFigure2=new draw2d.shape.basic.Rectangle(1,1);this.boundingBoxFigure2.setPosition(this.x,this.y);this.boundingBoxFigure2.setCanvas(D);this.boundingBoxFigure2.setDashArray("- ");this.boundingBoxFigure2.setStroke(1);this.boundingBoxFigure2.setColor(new draw2d.util.Color(84,151,220));this.boundingBoxFigure2.setBackgroundColor(null)}if(this.boundingBoxFigure1!==null){this.boundingBoxFigure1.setDimension(Math.abs(C),Math.abs(B));this.boundingBoxFigure1.setPosition(this.x+Math.min(0,C),this.y+Math.min(0,B));this.boundingBoxFigure2.setDimension(Math.abs(C),Math.abs(B));this.boundingBoxFigure2.setPosition(this.x+Math.min(0,C),this.y+Math.min(0,B))}},onMouseUp:function(B,A,F){if(this.mouseDownElement===null){B.getSelection().getAll().each($.proxy(function(H,G){this.unselect(B,G)},this))}else{if(this.mouseDownElement!==null&&this.mouseMovedDuringMouseDown===false){var E=B.getSelection().getAll();if(!E.contains(this.mouseDownElement)){B.getSelection().getAll().each($.proxy(function(H,G){this.unselect(B,G)},this))}}}this._super(B,A,F);if(this.boundingBoxFigure1!==null){var D=this.boundingBoxFigure1.getBoundingBox();B.getFigures().each($.proxy(function(H,G){if(G.getBoundingBox().isInside(D)){var I=G.onDragStart(G.getAbsoluteX(),G.getAbsoluteY());if(I===true){this.select(B,G,false)}}},this));var C=B.getSelection();B.getLines().each($.proxy(function(H,G){if(G instanceof draw2d.Connection){if(C.contains(G.getSource().getParent())&&C.contains(G.getTarget().getParent())){this.select(B,G,false)}}},this));this.boundingBoxFigure1.setCanvas(null);this.boundingBoxFigure1=null;this.boundingBoxFigure2.setCanvas(null);this.boundingBoxFigure2=null}}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/canvas/ReadOnlySelectionPolicy.js' */
(function ($) {draw2d.policy.canvas.ReadOnlySelectionPolicy=draw2d.policy.canvas.SelectionPolicy.extend({NAME:"draw2d.policy.canvas.ReadOnlySelectionPolicy",init:function(){this._super()},onInstall:function(A){A.getAllPorts().each($.proxy(function(C,B){B.setVisible(false)},this))},onUninstall:function(A){A.getAllPorts().each($.proxy(function(C,B){B.setVisible(true)},this))},onMouseDrag:function(D,C,B,F,A){var E=D.getScrollArea();E.scrollTop(E.scrollTop()+A);E.scrollLeft(E.scrollLeft()+F)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/canvas/DecorationPolicy.js' */
(function ($) {draw2d.policy.canvas.DecorationPolicy=draw2d.policy.canvas.CanvasPolicy.extend({NAME:"draw2d.policy.canvas.DecorationPolicy",init:function(){this._super()}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/canvas/FadeoutDecorationPolicy.js' */
(function ($) {draw2d.policy.canvas.FadeoutDecorationPolicy=draw2d.policy.canvas.DecorationPolicy.extend({NAME:"draw2d.policy.canvas.FadeoutDecorationPolicy",DEFAULT_FADEOUT_DURATION:30,TARGET_COLOR:new draw2d.util.Color("#707070"),init:function(){this._super();this.alpha=1;this.hidePortsCounter=this.DEFAULT_FADEOUT_DURATION;this.canvas=null},onInstall:function(A){this.canvas=A;this.timerId=window.setInterval($.proxy(this.onTimer,this),100);this.hidePortsCounter=1;this.alpha=0.1},onUninstall:function(A){window.clearInterval(this.timerId);this.canvas.getAllPorts().each($.proxy(function(C,B){B.setAlpha(1)},this))},onTimer:function(){this.hidePortsCounter--;if(this.hidePortsCounter<=0&&this.alpha>0){this.alpha=Math.max(0,this.alpha-0.05);this.canvas.getAllPorts().each($.proxy(function(B,A){A.setAlpha(this.alpha)},this));this.canvas.getSelection().getAll().each($.proxy(function(B,A){A.selectionHandles.each($.proxy(function(C,D){D.setAlpha(this.alpha)},this))},this))}else{if(this.hidePortsCounter>0&&this.alpha!==1){this.alpha=1;this.duringHide=false;this.canvas.getAllPorts().each($.proxy(function(B,A){A.setAlpha(this.alpha)},this));this.canvas.getSelection().getAll().each($.proxy(function(B,A){A.selectionHandles.each($.proxy(function(C,D){D.setAlpha(this.alpha)},this))},this))}}},onMouseDown:function(B,A,C){this.hidePortsCounter=this.DEFAULT_FADEOUT_DURATION},onMouseMove:function(B,A,C){this.hidePortsCounter=this.DEFAULT_FADEOUT_DURATION},onMouseDrag:function(D,C,B,E,A){this.hidePortsCounter=this.DEFAULT_FADEOUT_DURATION},onMouseUp:function(B,A,C){this.hidePortsCounter=this.DEFAULT_FADEOUT_DURATION}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/canvas/CoronaDecorationPolicy.js' */
(function ($) {draw2d.policy.canvas.CoronaDecorationPolicy=draw2d.policy.canvas.DecorationPolicy.extend({NAME:"draw2d.policy.canvas.CoronaDecorationPolicy",init:function(){this._super();this.startDragX=0;this.startDragY=0},onInstall:function(A){var B=A.getFigures();B.each(function(D,C){C.getPorts().each(function(E,F){F.setVisible(false)})})},onUninstall:function(A){var B=A.getFigures();B.each(function(D,C){C.getPorts().each(function(E,F){F.setVisible(true)})})},onMouseDown:function(B,A,C){this.startDragX=A;this.startDragY=C},onMouseMove:function(B,A,C){this.updatePorts(B,A,C)},onMouseDrag:function(D,C,B,E,A){this.updatePorts(D,this.startDragX+C,this.startDragY+B)},updatePorts:function(B,A,D){var C=B.getFigures();C.each(function(F,E){if(E.isVisible()===true&&E.hitTest(A,D,50)===true&&E instanceof draw2d.shape.node.Node){E.getPorts().each(function(G,H){H.setVisible(true)})}else{E.getPorts().each(function(G,H){H.setVisible(false)})}})}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/canvas/SnapToEditPolicy.js' */
(function ($) {draw2d.policy.canvas.SnapToEditPolicy=draw2d.policy.canvas.CanvasPolicy.extend({NAME:"draw2d.policy.canvas.SnapToEditPolicy",init:function(A){this._super();this.grid=A},snap:function(C,A,B){return B}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/canvas/SnapToGridEditPolicy.js' */
(function ($) {draw2d.policy.canvas.SnapToGridEditPolicy=draw2d.policy.canvas.SnapToEditPolicy.extend({NAME:"draw2d.policy.canvas.SnapToGridEditPolicy",GRID_COLOR:"#e0e0f0",GRID_WIDTH:10,init:function(A){this._super();this.canvas=null;this.lines=null;if(A){this.grid=A}else{this.grid=this.GRID_WIDTH}},onInstall:function(A){this.canvas=A;this.showGrid()},onUninstall:function(A){this.canvas=null;this.lines.remove()},snap:function(B,A,D){var C=A.getSnapToGridAnchor();D.x=D.x+C.x;D.y=D.y+C.y;D.x=this.grid*Math.floor(((D.x+this.grid/2)/this.grid));D.y=this.grid*Math.floor(((D.y+this.grid/2)/this.grid));D.x=D.x-C.x;D.y=D.y-C.y;return D},showGrid:function(){var B=this.canvas.initialWidth;var C=this.canvas.initialHeight;this.lines=this.canvas.paper.set();for(var A=this.grid;A<B;A+=this.grid){this.lines.push(this.canvas.paper.path("M "+A+" 0 l 0 "+C))}for(var D=this.grid;D<C;D+=this.grid){this.lines.push(this.canvas.paper.path("M 0 "+D+" l "+B+" 0"))}this.lines.attr({stroke:this.GRID_COLOR});this.lines.toBack()}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/canvas/ShowGridEditPolicy.js' */
(function ($) {draw2d.policy.canvas.ShowGridEditPolicy=draw2d.policy.canvas.SnapToEditPolicy.extend({NAME:"draw2d.policy.canvas.ShowGridEditPolicy",GRID_COLOR:"#e0e0f0",GRID_WIDTH:10,init:function(A){this._super();this.canvas=null;this.lines=null;if(A){this.grid=A}else{this.grid=this.GRID_WIDTH}},onInstall:function(A){this.canvas=A;this.showGrid()},onUninstall:function(A){this.canvas=null;this.lines.remove()},snap:function(B,A,C){return C},showGrid:function(){var B=this.canvas.initialWidth;var C=this.canvas.initialHeight;this.lines=this.canvas.paper.set();for(var A=this.grid;A<B;A+=this.grid){this.lines.push(this.canvas.paper.path("M "+A+" 0 l 0 "+C))}for(var D=this.grid;D<C;D+=this.grid){this.lines.push(this.canvas.paper.path("M 0 "+D+" l "+B+" 0"))}this.lines.attr({stroke:this.GRID_COLOR});this.lines.toBack()}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/canvas/SnapToGeometryEditPolicy.js' */
(function ($) {draw2d.SnapToHelper={};draw2d.SnapToHelper.NORTH=1;draw2d.SnapToHelper.SOUTH=4;draw2d.SnapToHelper.WEST=8;draw2d.SnapToHelper.EAST=16;draw2d.SnapToHelper.CENTER=32;draw2d.SnapToHelper.NORTH_EAST=draw2d.SnapToHelper.NORTH|draw2d.SnapToHelper.EAST;draw2d.SnapToHelper.NORTH_WEST=draw2d.SnapToHelper.NORTH|draw2d.SnapToHelper.WEST;draw2d.SnapToHelper.SOUTH_EAST=draw2d.SnapToHelper.SOUTH|draw2d.SnapToHelper.EAST;draw2d.SnapToHelper.SOUTH_WEST=draw2d.SnapToHelper.SOUTH|draw2d.SnapToHelper.WEST;draw2d.SnapToHelper.NORTH_SOUTH=draw2d.SnapToHelper.NORTH|draw2d.SnapToHelper.SOUTH;draw2d.SnapToHelper.EAST_WEST=draw2d.SnapToHelper.EAST|draw2d.SnapToHelper.WEST;draw2d.SnapToHelper.NSEW=draw2d.SnapToHelper.NORTH_SOUTH|draw2d.SnapToHelper.EAST_WEST;draw2d.policy.canvas.SnapToGeometryEditPolicy=draw2d.policy.canvas.SnapToEditPolicy.extend({NAME:"draw2d.policy.canvas.SnapToGeometryEditPolicy",SNAP_THRESHOLD:3,LINE_COLOR:"#1387E6",FADEOUT_DURATION:300,init:function(){this._super();this.rows=null;this.cols=null;this.vline=null;this.hline=null;this.canvas=null},onInstall:function(A){this.canvas=A},onUninstall:function(A){this.canvas=null},onMouseUp:function(B,A,C){this.rows=null;this.cols=null;this.hideVerticalLine();this.hideHorizontalLine()},snap:function(E,B,H){if(B instanceof draw2d.ResizeHandle){var F=B.getSnapToGridAnchor();H.x+=F.x;H.y+=F.y;var A=new draw2d.geo.Point(H.x,H.y);var D=B.getSnapToDirection();var G=this.snapPoint(D,H,A);if((D&draw2d.SnapToHelper.EAST_WEST)&&!(G&draw2d.SnapToHelper.EAST_WEST)){this.showVerticalLine(A.x)}else{this.hideVerticalLine()}if((D&draw2d.SnapToHelper.NORTH_SOUTH)&&!(G&draw2d.SnapToHelper.NORTH_SOUTH)){this.showHorizontalLine(A.y)}else{this.hideHorizontalLine()}A.x-=F.x;A.y-=F.y;return A}else{var C=new draw2d.geo.Rectangle(H.x,H.y,B.getWidth(),B.getHeight());var A=new draw2d.geo.Rectangle(H.x,H.y,B.getWidth(),B.getHeight());var D=draw2d.SnapToHelper.NSEW;var G=this.snapRectangle(C,A);if((D&draw2d.SnapToHelper.WEST)&&!(G&draw2d.SnapToHelper.WEST)){this.showVerticalLine(A.x)}else{if((D&draw2d.SnapToHelper.EAST)&&!(G&draw2d.SnapToHelper.EAST)){this.showVerticalLine(A.getX()+A.getWidth())}else{this.hideVerticalLine()}}if((D&draw2d.SnapToHelper.NORTH)&&!(G&draw2d.SnapToHelper.NORTH)){this.showHorizontalLine(A.y)}else{if((D&draw2d.SnapToHelper.SOUTH)&&!(G&draw2d.SnapToHelper.SOUTH)){this.showHorizontalLine(A.getY()+A.getHeight())}else{this.hideHorizontalLine()}}return A.getTopLeft()}return H},snapRectangle:function(A,F){var E=A.getTopLeft();var D=A.getBottomRight();var B=this.snapPoint(draw2d.SnapToHelper.NORTH_WEST,A.getTopLeft(),E);F.x=E.x;F.y=E.y;var C=this.snapPoint(draw2d.SnapToHelper.SOUTH_EAST,A.getBottomRight(),D);if(B&draw2d.SnapToHelper.WEST){F.x=D.x-A.getWidth()}if(B&draw2d.SnapToHelper.NORTH){F.y=D.y-A.getHeight()}return B|C},snapPoint:function(D,C,E){if(this.rows===null||this.cols===null){this.populateRowsAndCols()}if((D&draw2d.SnapToHelper.EAST)!==0){var G=this.getCorrectionFor(this.cols,C.getX()-1,1);if(G!==this.SNAP_THRESHOLD){D&=~draw2d.SnapToHelper.EAST;E.x+=G}}if((D&draw2d.SnapToHelper.WEST)!==0){var B=this.getCorrectionFor(this.cols,C.getX(),-1);if(B!==this.SNAP_THRESHOLD){D&=~draw2d.SnapToHelper.WEST;E.x+=B}}if((D&draw2d.SnapToHelper.SOUTH)!==0){var F=this.getCorrectionFor(this.rows,C.getY()-1,1);if(F!==this.SNAP_THRESHOLD){D&=~draw2d.SnapToHelper.SOUTH;E.y+=F}}if((D&draw2d.SnapToHelper.NORTH)!==0){var A=this.getCorrectionFor(this.rows,C.getY(),-1);if(A!==this.SNAP_THRESHOLD){D&=~draw2d.SnapToHelper.NORTH;E.y+=A}}return D},populateRowsAndCols:function(){var E=this.canvas.getSelection();this.rows=[];this.cols=[];var D=this.canvas.getFigures();var B=0;for(var C=0;C<D.getSize();C++){var A=D.get(C);if(!E.contains(A)){var F=A.getBoundingBox();this.cols[B*3]={type:-1,location:F.getX()};this.rows[B*3]={type:-1,location:F.getY()};this.cols[B*3+1]={type:0,location:F.x+(F.getWidth()-1)/2};this.rows[B*3+1]={type:0,location:F.y+(F.getHeight()-1)/2};this.cols[B*3+2]={type:1,location:F.getRight()-1};this.rows[B*3+2]={type:1,location:F.getBottom()-1};B++}}},getCorrectionFor:function(B,H,E){var C=this.SNAP_THRESHOLD;var A=this.SNAP_THRESHOLD;for(var D=0;D<B.length;D++){var F=B[D];var G;if(F.type===-1&&E!==0){G=Math.abs(H-F.location);if(G<C){C=G;A=F.location-H}}else{if(F.type===0&&E===0){G=Math.abs(H-F.location);if(G<C){C=G;A=F.location-H}}else{if(F.type===1&&E!==0){G=Math.abs(H-F.location);if(G<C){C=G;A=F.location-H}}}}}return A},showVerticalLine:function(A){if(this.vline!=null){return }this.vline=this.canvas.paper.path("M "+A+" 0 l 0 "+this.canvas.getHeight()).attr({stroke:this.LINE_COLOR,"stroke-width":1})},hideVerticalLine:function(A){if(this.vline==null){return }var B=this.vline;B.animate({opacity:0.1},this.FADEOUT_DURATION,function(){B.remove()});this.vline=null},showHorizontalLine:function(A){if(this.hline!=null){return }this.hline=this.canvas.paper.path("M 0 "+A+" l "+this.canvas.getWidth()+" 0").attr({stroke:this.LINE_COLOR,"stroke-width":1})},hideHorizontalLine:function(){if(this.hline==null){return }var A=this.hline;A.animate({opacity:0.1},this.FADEOUT_DURATION,function(){A.remove()});this.hline=null}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/figure/DragDropEditPolicy.js' */
(function ($) {draw2d.policy.figure.DragDropEditPolicy=draw2d.policy.EditPolicy.extend({NAME:"draw2d.policy.figure.DragDropEditPolicy",init:function(){this._super()},onDragStart:function(B,A){A.shape.attr({cursor:"move"})},onDrag:function(B,A){},onDragEnd:function(B,A){A.shape.attr({cursor:"default"})},adjustPosition:function(B,A,C){if(A instanceof draw2d.geo.Point){return A}return new draw2d.geo.Point(A,C)},adjustDimension:function(A,B,C){return new draw2d.geo.Rectangle(0,0,B,C)},moved:function(B,A){}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/figure/RegionEditPolicy.js' */
(function ($) {draw2d.policy.figure.RegionEditPolicy=draw2d.policy.figure.DragDropEditPolicy.extend({NAME:"draw2d.policy.figure.RegionEditPolicy",init:function(A,D,B,C){this._super();if(A instanceof draw2d.geo.Rectangle){this.constRect=A}else{if(typeof C==="number"){this.constRect=new draw2d.geo.Rectangle(A,D,B,C)}else{throw"Invalid parameter. RegionConstraintPolicy need a rectangle as parameter in the constructor"}}},adjustPosition:function(B,A,D){var C=null;if(A instanceof draw2d.geo.Point){C=new draw2d.geo.Rectangle(A.x,A.y,B.getWidth(),B.getHeight())}else{C=new draw2d.geo.Rectangle(A,D,B.getWidth(),B.getHeight())}C=this.constRect.moveInside(C);return C.getTopLeft()}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/figure/HorizontalEditPolicy.js' */
(function ($) {draw2d.policy.figure.HorizontalEditPolicy=draw2d.policy.figure.DragDropEditPolicy.extend({NAME:"draw2d.policy.figure.HorizontalEditPolicy",init:function(){this._super()},adjustPosition:function(B,A,C){return new draw2d.geo.Point(A,B.getY())}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/figure/VerticalEditPolicy.js' */
(function ($) {draw2d.policy.figure.VerticalEditPolicy=draw2d.policy.figure.DragDropEditPolicy.extend({NAME:"draw2d.policy.figure.VerticalEditPolicy",init:function(){this._super()},adjustPosition:function(B,A,C){return new draw2d.geo.Point(B.getX(),C)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/figure/SelectionFeedbackPolicy.js' */
(function ($) {draw2d.policy.figure.SelectionFeedbackPolicy=draw2d.policy.figure.DragDropEditPolicy.extend({NAME:"draw2d.policy.figure.SelectionFeedbackPolicy",init:function(){this._super()},onSelect:function(B,A,C){},onUnselect:function(B,A){A.selectionHandles.each(function(C,D){D.hide()});A.selectionHandles=new draw2d.util.ArrayList()}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/figure/LineSelectionFeedbackPolicy.js' */
(function ($) {draw2d.policy.figure.LineSelectionFeedbackPolicy=draw2d.policy.figure.SelectionFeedbackPolicy.extend({NAME:"draw2d.policy.figure.LineSelectionFeedbackPolicy",init:function(){this._super()},onSelect:function(B,A,C){if(A.selectionHandles.isEmpty()){A.selectionHandles.add(this.createLineStartResizeHandle(A));A.selectionHandles.add(this.createLineEndResizeHandle(A));A.selectionHandles.each(function(D,E){E.setDraggable(A.isResizeable());E.show(B)})}this.moved(B,A)},createLineStartResizeHandle:function(A){return new draw2d.shape.basic.LineStartResizeHandle(A)},createLineEndResizeHandle:function(A){return new draw2d.shape.basic.LineEndResizeHandle(A)},moved:function(C,A){if(A.selectionHandles.isEmpty()){return }var G=A.selectionHandles.get(0);var B=A.selectionHandles.get(1);var H=G.getWidth()/2;var E=G.getHeight()/2;var F=A.getStartPoint();var D=A.getEndPoint();G.setPosition(F.x-H,F.y-E);B.setPosition(D.x-H,D.y-E)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/figure/RectangleSelectionFeedbackPolicy.js' */
(function ($) {draw2d.policy.figure.RectangleSelectionFeedbackPolicy=draw2d.policy.figure.SelectionFeedbackPolicy.extend({NAME:"draw2d.policy.figure.RectangleSelectionFeedbackPolicy",init:function(){this._super()},onSelect:function(D,I,G){if(I.selectionHandles.isEmpty()){var H=new draw2d.shape.basic.Rectangle();H.setBackgroundColor(null);H.setDashArray("- ");H.setColor("#2096fc");H.setStroke(0.5);H.hide=function(){H.setCanvas(null)};H.show=function(M){H.setCanvas(M);H.shape.toFront()};H.show(D);var F=new draw2d.ResizeHandle(I,1);var E=new draw2d.ResizeHandle(I,2);var C=new draw2d.ResizeHandle(I,3);var B=new draw2d.ResizeHandle(I,4);var A=new draw2d.ResizeHandle(I,5);var L=new draw2d.ResizeHandle(I,6);var K=new draw2d.ResizeHandle(I,7);var J=new draw2d.ResizeHandle(I,8);I.selectionHandles.add(F);I.selectionHandles.add(E);I.selectionHandles.add(C);I.selectionHandles.add(B);I.selectionHandles.add(A);I.selectionHandles.add(L);I.selectionHandles.add(K);I.selectionHandles.add(J);F.show(D);C.show(D);A.show(D);K.show(D);F.setDraggable(I.isResizeable());C.setDraggable(I.isResizeable());A.setDraggable(I.isResizeable());K.setDraggable(I.isResizeable());if(I.isResizeable()===true){F.setBackgroundColor(F.DEFAULT_COLOR);C.setBackgroundColor(C.DEFAULT_COLOR);A.setBackgroundColor(A.DEFAULT_COLOR);K.setBackgroundColor(K.DEFAULT_COLOR)}else{F.setBackgroundColor(null);C.setBackgroundColor(null);A.setBackgroundColor(null);K.setBackgroundColor(null)}if(I.isStrechable()&&I.isResizeable()){E.setDraggable(I.isResizeable());B.setDraggable(I.isResizeable());L.setDraggable(I.isResizeable());J.setDraggable(I.isResizeable());E.show(D);B.show(D);L.show(D);J.show(D)}I.selectionHandles.add(H)}this.moved(D,I)},moved:function(E,J){if(J.selectionHandles.isEmpty()){return }var L=J.getHeight();var K=J.getWidth();var I=J.getX();var F=J.getY();var G=J.selectionHandles.get(0);var C=J.selectionHandles.get(2);var A=J.selectionHandles.get(4);var N=J.selectionHandles.get(6);G.setPosition(I-G.getWidth(),F-G.getHeight());C.setPosition(I+K,F-C.getHeight());A.setPosition(I+K,F+L);N.setPosition(I-N.getWidth(),F+L);if(J.isStrechable()){var D=J.selectionHandles.get(1);var B=J.selectionHandles.get(3);var O=J.selectionHandles.get(5);var M=J.selectionHandles.get(7);D.setPosition(I+(K/2)-(D.getWidth()/2),F-D.getHeight());B.setPosition(I+K,F+(L/2)-(B.getHeight()/2));O.setPosition(I+(K/2)-(O.getWidth()/2),F+L);M.setPosition(I-M.getWidth(),F+(L/2)-(M.getHeight()/2))}var H=J.selectionHandles.get(8);H.setPosition(J.getPosition().translate(-2,-2));H.setDimension(J.getWidth()+4,J.getHeight()+4);H.setRotationAngle(J.getRotationAngle())}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/figure/BigRectangleSelectionFeedbackPolicy.js' */
(function ($) {draw2d.policy.figure.BigRectangleSelectionFeedbackPolicy=draw2d.policy.figure.RectangleSelectionFeedbackPolicy.extend({NAME:"draw2d.policy.figure.BigRectangleSelectionFeedbackPolicy",init:function(){this._super()},onSelect:function(B,A,C){this._super(B,A,C);if(!A.selectionHandles.isEmpty()){A.selectionHandles.each(function(D,E){E.setDimension(15,15)})}this.moved(B,A)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/figure/RoundRectangleSelectionFeedbackPolicy.js' */
(function ($) {draw2d.policy.figure.RoundRectangleSelectionFeedbackPolicy=draw2d.policy.figure.RectangleSelectionFeedbackPolicy.extend({NAME:"draw2d.policy.figure.RoundRectangleSelectionFeedbackPolicy",init:function(){this._super()},onSelect:function(B,A,C){this._super(B,A,C);if(!A.selectionHandles.isEmpty()){A.selectionHandles.each(function(D,E){E.setDimension(12,12);E.setRadius(4)})}this.moved(B,A)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/figure/BusSelectionFeedbackPolicy.js' */
(function ($) {draw2d.policy.figure.BusSelectionFeedbackPolicy=draw2d.policy.figure.SelectionFeedbackPolicy.extend({NAME:"draw2d.policy.figure.BusSelectionFeedbackPolicy",init:function(){this._super()},onSelect:function(C,A,D){if(A.selectionHandles.isEmpty()){var B=new draw2d.ResizeHandle(A,2);var G=new draw2d.ResizeHandle(A,4);var F=new draw2d.ResizeHandle(A,6);var E=new draw2d.ResizeHandle(A,8);A.selectionHandles.add(B);A.selectionHandles.add(G);A.selectionHandles.add(F);A.selectionHandles.add(E);B.setDraggable(A.isResizeable());G.setDraggable(A.isResizeable());F.setDraggable(A.isResizeable());E.setDraggable(A.isResizeable());B.show(C);G.show(C);F.show(C);E.show(C)}this.moved(C,A)},moved:function(B,F){if(F.selectionHandles.isEmpty()){return }var C=F.selectionHandles.get(0);var A=F.selectionHandles.get(1);var J=F.selectionHandles.get(2);var I=F.selectionHandles.get(3);var H=F.getHeight();var G=F.getWidth();var E=F.getX();var D=F.getY();C.setPosition(E+(G/2)-(C.getWidth()/2),D-C.getHeight());A.setPosition(E+G,D+(H/2)-(A.getHeight()/2));J.setPosition(E+(G/2)-(J.getWidth()/2),D+H);I.setPosition(E-I.getWidth(),D+(H/2)-(I.getHeight()/2))}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/figure/VBusSelectionFeedbackPolicy.js' */
(function ($) {draw2d.policy.figure.VBusSelectionFeedbackPolicy=draw2d.policy.figure.BusSelectionFeedbackPolicy.extend({NAME:"draw2d.policy.figure.VBusSelectionFeedbackPolicy",init:function(){this._super()},moved:function(D,B){if(B.selectionHandles.isEmpty()){return }var C=B.selectionHandles.get(0);var E=B.selectionHandles.get(2);var A=B.getWidth();C.setDimension(A,C.getHeight());E.setDimension(A,E.getHeight());this._super(D,B)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/figure/HBusSelectionFeedbackPolicy.js' */
(function ($) {draw2d.policy.figure.HBusSelectionFeedbackPolicy=draw2d.policy.figure.BusSelectionFeedbackPolicy.extend({NAME:"draw2d.policy.figure.HBusSelectionFeedbackPolicy",init:function(){this._super()},moved:function(B,A){if(A.selectionHandles.isEmpty()){return }var D=A.selectionHandles.get(1);var C=A.selectionHandles.get(3);D.setDimension(D.getWidth(),A.getHeight());C.setDimension(D.getWidth(),A.getHeight());this._super(B,A)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/figure/AntSelectionFeedbackPolicy.js' */
(function ($) {draw2d.policy.figure.AntSelectionFeedbackPolicy=draw2d.policy.figure.SelectionFeedbackPolicy.extend({NAME:"draw2d.policy.figure.AntSelectionFeedbackPolicy",init:function(){this._super()},onSelect:function(B,A,C){if(A.selectionHandles.isEmpty()){var D=new draw2d.shape.basic.Rectangle();D.setBackgroundColor(null);D.setDashArray("- ");D.setColor("#00bdee");D.hide=function(){D.setCanvas(null)};D.show=function(E){D.setCanvas(E);D.shape.toFront()};D.show(B);A.selectionHandles.add(D)}this.moved(B,A)},moved:function(B,A){if(A.selectionHandles.isEmpty()){return }var C=A.selectionHandles.get(0);C.setPosition(A.getPosition().translate(-2,-2));C.setDimension(A.getWidth()+4,A.getHeight()+4);C.setRotationAngle(A.getRotationAngle())}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/figure/GlowSelectionFeedbackPolicy.js' */
(function ($) {draw2d.policy.figure.GlowSelectionFeedbackPolicy=draw2d.policy.figure.SelectionFeedbackPolicy.extend({NAME:"draw2d.policy.figure.GlowSelectionFeedbackPolicy",init:function(){this._super()},onSelect:function(B,A,C){A.setGlow(true);this.moved(B,A)},onUnselect:function(B,A){this._super(B,A);A.setGlow(false)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/figure/SlimSelectionFeedbackPolicy.js' */
(function ($) {draw2d.policy.figure.SlimSelectionFeedbackPolicy=draw2d.policy.figure.RectangleSelectionFeedbackPolicy.extend({NAME:"draw2d.policy.figure.SlimSelectionFeedbackPolicy",init:function(){this._super()},onSelect:function(B,A,C){this._super(B,A,C);if(!A.selectionHandles.isEmpty()){A.selectionHandles.each(function(D,E){E.setDimension(6,6);E.setRadius(0)})}this.moved(B,A)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/port/PortFeedbackPolicy.js' */
(function ($) {draw2d.policy.port.PortFeedbackPolicy=draw2d.policy.figure.DragDropEditPolicy.extend({NAME:"draw2d.policy.port.PortFeedbackPolicy",init:function(){this._super()},onHoverEnter:function(B,C,A){},onHoverLeave:function(B,C,A){}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/port/ElasticStrapFeedbackPolicy.js' */
(function ($) {draw2d.policy.port.ElasticStrapFeedbackPolicy=draw2d.policy.port.PortFeedbackPolicy.extend({NAME:"draw2d.policy.port.ElasticStrapFeedbackPolicy",init:function(){this._super();this.connectionLine=null},onDragStart:function(B,A){this.connectionLine=new draw2d.shape.basic.Line();this.connectionLine.setCanvas(B);this.connectionLine.getShapeElement();this.onDrag(B,A)},onDrag:function(C,A){var B=A.ox+A.getParent().getAbsoluteX();var D=A.oy+A.getParent().getAbsoluteY();this.connectionLine.setStartPoint(B,D);this.connectionLine.setEndPoint(A.getAbsoluteX(),A.getAbsoluteY())},onDragEnd:function(B,A){this.connectionLine.setCanvas(null);this.connectionLine=null},onHoverEnter:function(A,B,C){this.connectionLine.setGlow(true);C.setGlow(true)},onHoverLeave:function(A,B,C){C.setGlow(false);this.connectionLine.setGlow(false)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/port/IntrusivePortsFeedbackPolicy.js' */
(function ($) {draw2d.policy.port.IntrusivePortsFeedbackPolicy=draw2d.policy.port.PortFeedbackPolicy.extend({NAME:"draw2d.policy.port.IntrusivePortsFeedbackPolicy",init:function(){this._super();this.connectionLine=null;this.tweenable=null},onDragStart:function(D,B){var E=0;B.getDropTargets().each(function(G,F){F.__beforeInflate=F.getWidth();E=F.__beforeInflate});var C=B.getDropTargets();C.grep(function(F){return(F.NAME!=B.NAME&&F.parent!==B.parent)||(F instanceof draw2d.HybridPort)||(B instanceof draw2d.HybridPort)});this.prepareDropTargetsForDrag(C);var A=this;this.tweenable=new Tweenable();this.tweenable.tween({from:{size:E/2},to:{size:E},duration:200,easing:"easeOutSine",step:function(F){C.each(function(H,G){A.alterDropTargetOnDrag(G,F)})}});this.connectionLine=new draw2d.shape.basic.Line();this.connectionLine.setCanvas(D);this.connectionLine.getShapeElement();this.connectionLine.setDashArray("- ");this.connectionLine.setColor(this.getConnectionLineColour());this.onDrag(D,B)},getConnectionLineColour:function(){return"#30c48a"},prepareDropTargetsForDrag:function(A){},alterDropTargetOnDrag:function(A,B){A.shape.attr({rx:B.size,ry:B.size});A.width=A.height=B.size*2},onDrag:function(C,A){var B=A.ox+A.getParent().getAbsoluteX();var D=A.oy+A.getParent().getAbsoluteY();this.connectionLine.setStartPoint(B,D);this.connectionLine.setEndPoint(A.getAbsoluteX(),A.getAbsoluteY())},onDragEnd:function(C,B){this.tweenable.stop(false);this.tweenable=null;var A=this;var D=B.getDropTargets();this.prepareDropTargetsForDragEnd(D);D.each(function(F,E){A.alterDropTargetOnDragEnd(E)});this.connectionLine.setCanvas(null);this.connectionLine=null},prepareDropTargetsForDragEnd:function(A){},alterDropTargetOnDragEnd:function(A){A.shape.attr({rx:A.__beforeInflate/2,ry:A.__beforeInflate/2});A.width=A.height=A.__beforeInflate},onHoverEnter:function(A,B,C){this.connectionLine.setGlow(true);C.setGlow(true)},onHoverLeave:function(A,B,C){C.setGlow(false);this.connectionLine.setGlow(false)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/Canvas.js' */
(function ($) {draw2d.Canvas=Class.extend({NAME:"draw2d.Canvas",init:function(C){if($.browser.msie&&parseInt($.browser.version,10)===8){this.fromDocumentToCanvasCoordinate=this._fromDocumentToCanvasCoordinate_IE8_HACK}this.setScrollArea(document.body);this.canvasId=C;this.html=$("#"+C);this.html.css({cursor:"default"});this.initialWidth=this.getWidth();this.initialHeight=this.getHeight();this.html.css({"-webkit-tap-highlight-color":"rgba(0,0,0,0)"});this.html.droppable({accept:".draw2d_droppable",over:$.proxy(function(D,E){this.onDragEnter(E.draggable)},this),out:$.proxy(function(D,E){this.onDragLeave(E.draggable)},this),drop:$.proxy(function(D,E){D=this._getEvent(D);var F=this.fromDocumentToCanvasCoordinate(D.clientX,D.clientY);this.onDrop(E.draggable,F.getX(),F.getY())},this)});$(".draw2d_droppable").draggable({appendTo:"body",stack:"body",zIndex:27000,helper:"clone",drag:$.proxy(function(D,E){D=this._getEvent(D);var F=this.fromDocumentToCanvasCoordinate(D.clientX,D.clientY);this.onDrag(E.draggable,F.getX(),F.getY())},this),stop:function(E,D){this.isInExternalDragOperation=false},start:function(E,D){this.isInExternalDragOperation=true;$(D.helper).addClass("shadow")}});this.paper=Raphael(C,this.getWidth(),this.getHeight());this.paper.canvas.style.position="absolute";this.zoomFactor=1;this.selection=new draw2d.Selection();this.currentDropTarget=null;this.isInExternalDragOperation=false;this.currentHoverFigure=null;this.editPolicy=new draw2d.util.ArrayList();this.figures=new draw2d.util.ArrayList();this.lines=new draw2d.util.ArrayList();this.commonPorts=new draw2d.util.ArrayList();this.dropTargets=new draw2d.util.ArrayList();this.resizeHandles=new draw2d.util.ArrayList();this.selectionListeners=new draw2d.util.ArrayList();this.viewBoxListeners=new draw2d.util.ArrayList();this.commandStack=new draw2d.command.CommandStack();this.linesToRepaintAfterDragDrop=new draw2d.util.ArrayList();this.lineIntersections=new draw2d.util.ArrayList();this.installEditPolicy(new draw2d.policy.canvas.BoundingboxSelectionPolicy());this.commandStack.addEventListener($.proxy(function(D){if(D.isPostChangeEvent()===true){this.calculateConnectionIntersection();this.linesToRepaintAfterDragDrop.each(function(F,E){E.svgPathString=null;E.repaint()});this.linesToRepaintAfterDragDrop=new draw2d.util.ArrayList()}},this));this.mouseDown=false;this.mouseDownX=0;this.mouseDownY=0;this.mouseDragDiffX=0;this.mouseDragDiffY=0;var B=this.documentCallbacks=[];var A=function(D,E){$(document).bind(D,E);B.push({events:D,callback:E})};A("mouseup touchend",$.proxy(function(D){if(this.mouseDown===false){return }D=this._getEvent(D);this.calculateConnectionIntersection();this.mouseDown=false;var E=this.fromDocumentToCanvasCoordinate(D.clientX,D.clientY);this.editPolicy.each($.proxy(function(F,G){G.onMouseUp(this,E.x,E.y)},this));this.mouseDragDiffX=0;this.mouseDragDiffY=0},this));this.html.bind("mousemove touchmove",$.proxy(function(F){F=this._getEvent(F);if(this.mouseDown===false){var G=this.fromDocumentToCanvasCoordinate(F.clientX,F.clientY);try{var E=this.getBestFigure(G.x,G.y);if(E!==this.currentHoverFigure&&this.currentHoverFigure!==null){this.currentHoverFigure.onMouseLeave(E)}if(E!==this.currentHoverFigure&&E!==null){E.onMouseEnter(this.currentHoverFigure)}this.currentHoverFigure=E}catch(D){console.log(D)}this.editPolicy.each($.proxy(function(H,I){I.onMouseMove(this,G.x,G.y)},this))}},this));A("mousemove touchmove",$.proxy(function(F){if(this.mouseDown){var E=this.fromDocumentToCanvasCoordinate(this.mouseDownX,this.mouseDownY);var H=this.fromDocumentToCanvasCoordinate(F.clientX,F.clientY);var G=H.x-E.x;var D=H.y-E.y;this.editPolicy.each($.proxy(function(I,J){J.onMouseDrag(this,G,D,this.mouseDragDiffX-G,this.mouseDragDiffY-D)},this));this.mouseDragDiffX=G;this.mouseDragDiffY=D}},this));this.html.bind("mousedown touchstart",$.proxy(function(D){var E=null;switch(D.which){case 1:case 0:D.preventDefault();D=this._getEvent(D);this.mouseDownX=D.clientX;this.mouseDownY=D.clientY;this.mouseDragDiffX=0;this.mouseDragDiffY=0;E=this.fromDocumentToCanvasCoordinate(D.clientX,D.clientY);this.mouseDown=true;this.editPolicy.each($.proxy(function(F,G){G.onMouseDown(this,E.x,E.y)},this));break;case 3:D.preventDefault();D=this._getEvent(D);E=this.fromDocumentToCanvasCoordinate(D.clientX,D.clientY);this.onRightMouseDown(E.x,E.y);break;case 2:break;default:}},this));this.html.bind("dblclick",$.proxy(function(D){D=this._getEvent(D);this.mouseDownX=D.clientX;this.mouseDownY=D.clientY;var E=this.fromDocumentToCanvasCoordinate(D.clientX,D.clientY);this.onDoubleClick(E.x,E.y)},this));A("click",$.proxy(function(D){D=this._getEvent(D);if(this.mouseDownX===D.clientX||this.mouseDownY===D.clientY){var E=this.fromDocumentToCanvasCoordinate(D.clientX,D.clientY);this.onClick(E.x,E.y)}},this));A("keydown",$.proxy(function(D){if(!$(D.target).is("input")){var E=D.ctrlKey;this.onKeyDown(D.keyCode,E)}},this))},calculateConnectionIntersection:function(){this.lineIntersections=new draw2d.util.ArrayList();var B=this.getLines().clone();while(B.getSize()>0){var A=B.removeElementAt(0);B.each($.proxy(function(E,C){var D=A.intersection(C);if(D.getSize()>0){this.lineIntersections.add({line:A,other:C,intersection:D});this.lineIntersections.add({line:C,other:A,intersection:D})}},this))}},clear:function(){this.lines.clone().each($.proxy(function(A,B){this.removeFigure(B)},this));this.figures.clone().each($.proxy(function(A,B){this.removeFigure(B)},this));this.zoomFactor=1;this.selection.clear();this.currentDropTarget=null;this.isInExternalDragOperation=false;this.figures=new draw2d.util.ArrayList();this.lines=new draw2d.util.ArrayList();this.commonPorts=new draw2d.util.ArrayList();this.dropTargets=new draw2d.util.ArrayList();this.commandStack.markSaveLocation();this.linesToRepaintAfterDragDrop=new draw2d.util.ArrayList();this.lineIntersections=new draw2d.util.ArrayList()},installEditPolicy:function(A){if(A instanceof draw2d.policy.canvas.SelectionPolicy){this.getSelection().getAll().each(function(C,B){B.unselect()});this.editPolicy.grep($.proxy(function(C){var B=!(C instanceof draw2d.policy.canvas.SelectionPolicy);if(B===false){C.onUninstall(this)}return B},this))}else{if(A instanceof draw2d.policy.canvas.SnapToEditPolicy){this.editPolicy.grep($.proxy(function(C){var B=!(C instanceof draw2d.policy.canvas.SnapToEditPolicy);if(B===false){C.onUninstall(this)}return B},this))}}A.onInstall(this);this.editPolicy.add(A)},uninstallEditPolicy:function(A){if(!(A instanceof draw2d.policy.EditPolicy)){return }this.editPolicy.grep($.proxy(function(B){if(B===A){B.onUninstall(this);return false}return true},this))},setViewBox:function(A){this.paper.setViewBox(A.getX(),A.getY(),A.getWidth(),A.getHeight());this.viewBoxListeners.each(function(B,C){C()})},setZoom:function(C,B){var A=$.proxy(function(G){this.zoomFactor=Math.min(Math.max(0.01,G),10);var F=(this.initialWidth*this.zoomFactor)|0;var E=(this.initialHeight*this.zoomFactor)|0;this.paper.setViewBox(0,0,F,E)},this);if(B){var D=new Tweenable();D.tween({from:{x:this.zoomFactor},to:{x:C},duration:300,easing:"easeOutSine",step:function(E){A(E.x)}})}else{A(C)}},getZoom:function(){return this.zoomFactor},fromDocumentToCanvasCoordinate:function(A,B){return new draw2d.geo.Point((A-this.getAbsoluteX()+this.getScrollLeft())*this.zoomFactor,(B-this.getAbsoluteY()+this.getScrollTop())*this.zoomFactor)},_fromDocumentToCanvasCoordinate_IE8_HACK:function(A,B){return new draw2d.geo.Point((A-this.getAbsoluteX())*this.zoomFactor,(B-this.getAbsoluteY())*this.zoomFactor)},fromCanvasToDocumentCoordinate:function(A,B){return new draw2d.geo.Point((A+this.getAbsoluteX()-this.getScrollLeft())*this.zoomFactor,(B+this.getAbsoluteY()-this.getScrollTop())*this.zoomFactor)},getHtmlContainer:function(){return this.html},_getEvent:function(A){if(typeof A.originalEvent!=="undefined"){if(A.originalEvent.touches&&A.originalEvent.touches.length){return A.originalEvent.touches[0]}else{if(A.originalEvent.changedTouches&&A.originalEvent.changedTouches.length){return A.originalEvent.changedTouches[0]}}}return A},setScrollArea:function(A){this.scrollArea=$(A)},getScrollArea:function(){return this.scrollArea},getScrollLeft:function(){return this.scrollArea.scrollLeft()},getScrollTop:function(){return this.scrollArea.scrollTop()},getAbsoluteX:function(){return this.html.offset().left},getAbsoluteY:function(){return this.html.offset().top},getWidth:function(){return this.html.width()},getHeight:function(){return this.html.height()},addFigure:function(B,A,C){if(B.getCanvas()===this){return }B.setCanvas(this);B.getShapeElement();if(B instanceof draw2d.shape.basic.Line){this.lines.add(B);this.linesToRepaintAfterDragDrop=this.lines}else{this.figures.add(B);if(typeof C!=="undefined"){B.setPosition(A,C)}}B.repaint();B.fireMoveEvent()},removeFigure:function(A){this.editPolicy.each($.proxy(function(B,C){if(typeof C.unselect==="function"){C.unselect(this,A)}},this));if(A===this.currentHoverFigure){this.currentHoverFigure=null}if(A instanceof draw2d.shape.basic.Line){this.lines.remove(A)}else{this.figures.remove(A)}A.setCanvas(null);if(A instanceof draw2d.Connection){A.disconnect()}A.onRemove()},getLines:function(){return this.lines},getFigures:function(){return this.figures},getLine:function(D){var C=this.lines.getSize();for(var B=0;B<C;B++){var A=this.lines.get(B);if(A.getId()===D){return A}}return null},getFigure:function(B){var A=null;this.figures.each(function(C,D){if(D.id===B){A=D;return false}});return A},getIntersection:function(B){var A=new draw2d.util.ArrayList();this.lineIntersections.each($.proxy(function(C,D){if(D.line===B){D.intersection.each(function(E,F){A.add({x:F.x,y:F.y,justTouching:F.justTouching,other:D.other})})}},this));return A},snapToHelper:function(A,B){this.editPolicy.each($.proxy(function(C,D){B=D.snap(this,A,B)},this));return B},registerPort:function(A){A.targets=this.dropTargets;this.commonPorts.add(A);this.dropTargets.add(A)},unregisterPort:function(A){A.targets=null;this.commonPorts.remove(A);this.dropTargets.remove(A)},getAllPorts:function(){return this.commonPorts},getCommandStack:function(){return this.commandStack},getCurrentSelection:function(){return this.selection.getPrimary()},getSelection:function(){return this.selection},setCurrentSelection:function(A){this.editPolicy.each($.proxy(function(B,C){if(typeof C.select==="function"){C.select(this,A)}},this))},addSelectionListener:function(A){if(A!==null){if(typeof A==="function"){this.selectionListeners.add({onSelectionChanged:A})}else{if(typeof A.onSelectionChanged==="function"){this.selectionListeners.add(A)}else{throw"Object doesn't implement required callback method [onSelectionChanged]"}}}},removeSelectionListener:function(A){this.selectionListeners=this.selectionListeners.grep(function(B){return B&&B!==A&&B.onSelectionChanged!==A})},addViewBoxListener:function(A){this.viewBoxListeners.add(A)},removeViewBoxListener:function(A){this.viewBoxListeners=this.viewBoxListeners.grep(function(B){return B!==A})},getBestFigure:function(I,H,A){var K=null;var E=null;var D=0;var B=null;for(D=0,len=this.resizeHandles.getSize();D<len;D++){E=this.resizeHandles.get(D);if(E.isVisible()===true&&E.hitTest(I,H)===true&&E!==A){return E}}for(D=0,len=this.commonPorts.getSize();D<len;D++){E=this.commonPorts.get(D);if(E!==A){if(E.isVisible()===true&&E.hitTest(I,H)===true){return E}}}K=this.getBestLine(I,H,A);if(K!==null){return K}for(D=(this.figures.getSize()-1);D>=0;D--){var G=this.figures.get(D);var C=function(L){L.each(function(M,N){C(N.getChildren());if(K===null&&N.isVisible()===true&&N.hitTest(I,H)===true){K=N}return K===null})};C(G.getChildren());if(K===null&&G.isVisible()===true&&G.hitTest(I,H)===true&&G!==A){if(K===null){K=G}else{if(K.getZOrder()<G.getZOrder()){K=G}}}if(K!==null){return K}}var F=this.lines.getSize();for(D=0;D<F;D++){var J=this.lines.get(D);B=J.getChildren();B.each(function(L,M){if(M.isVisible()===true&&M.hitTest(I,H)===true){K=M;return false}return true})}return K},getBestLine:function(B,G,E){var A=null;var F=this.lines.getSize();for(var D=0;D<F;D++){var C=this.lines.get(D);if(C.isVisible()===true&&C.hitTest(B,G)===true&&C!==E){if(A===null){A=C;break}}}return A},hideSnapToHelperLines:function(){this.hideSnapToHelperLineHorizontal();this.hideSnapToHelperLineVertical()},hideSnapToHelperLineHorizontal:function(){},hideSnapToHelperLineVertical:function(){},onDragEnter:function(A){},onDrag:function(B,A,C){},onDragLeave:function(A){},onDrop:function(B,A,C){},onKeyDown:function(B,A){if(B==46&&this.selection.getPrimary()!==null){this.commandStack.execute(this.selection.getPrimary().createCommand(new draw2d.command.CommandType(draw2d.command.CommandType.DELETE)))}else{if(B==90&&A){this.commandStack.undo()}else{if(B==89&&A){this.commandStack.redo()}else{if(B===107){this.setZoom(this.zoomFactor*0.95)}else{if(B===109){this.setZoom(this.zoomFactor*1.05)}}}}}},onDoubleClick:function(B,C){var A=this.getBestFigure(B,C);if(A!==null){A.onDoubleClick()}},onClick:function(B,C){var A=this.getBestFigure(B,C);if(A!==null){A.onClick()}},onRightMouseDown:function(B,C){var A=this.getBestFigure(B,C);if(A!==null){A.onContextMenu(B,C)}},onNewConnection:function(A){},remove:function(){var A=$(document);$.each(this.documentCallbacks,function(){A.unbind(this.events,this.callback)});this.documentCallbacks=[];this.html.unbind();this.html.remove()}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/Selection.js' */
(function ($) {draw2d.Selection=Class.extend({NAME:"draw2d.Selection",init:function(){this.primary=null;this.all=new draw2d.util.ArrayList()},clear:function(){this.primary=null;this.all=new draw2d.util.ArrayList()},getPrimary:function(){return this.primary},setPrimary:function(A){this.primary=A;if(A!==null&&!this.all.contains(A)){this.all.add(A)}},remove:function(A){this.all.remove(A);if(this.primary===A){this.primary=null}},contains:function(A){return this.all.contains(A)},getAll:function(){return this.all.clone()}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/Figure.js' */
(function ($) {draw2d.Figure=Class.extend({NAME:"draw2d.Figure",MIN_TIMER_INTERVAL:50,init:function(B,A){this.id=draw2d.util.UUID.create();this.isResizeHandle=false;this.command=null;this.canvas=null;this.shape=null;this.children=new draw2d.util.ArrayList();this.selectable=true;this.deleteable=true;this.resizeable=true;this.draggable=true;this.visible=true;this.canSnapToHelper=true;this.snapToGridAnchor=new draw2d.geo.Point(0,0);this.editPolicy=new draw2d.util.ArrayList();this.timerId=-1;this.timerInterval=0;this.parent=null;this.x=0;this.y=0;this.minHeight=5;this.minWidth=5;this.rotationAngle=0;if(typeof A!=="undefined"){this.width=B;this.height=A}else{this.width=this.getMinWidth();this.height=this.getMinHeight()}this.alpha=1;this.isInDragDrop=false;this.isMoving=false;this.originalAlpha=this.alpha;this.ox=0;this.oy=0;this.repaintBlocked=false;this.selectionHandles=new draw2d.util.ArrayList();this.moveListener=new draw2d.util.ArrayList();this.resizeListener=new draw2d.util.ArrayList();this.installEditPolicy(new draw2d.policy.figure.RectangleSelectionFeedbackPolicy())},select:function(A,B){if(typeof A==="undefined"){A=true}this.editPolicy.each($.proxy(function(C,D){if(D instanceof draw2d.policy.figure.SelectionFeedbackPolicy){D.onSelect(this.canvas,this,A)}},this));this.onSelect&&this.onSelect(B);return this},unselect:function(){this.editPolicy.each($.proxy(function(A,B){if(B instanceof draw2d.policy.figure.SelectionFeedbackPolicy){B.onUnselect(this.canvas,this)}},this));this.onDeselect&&this.onDeselect();return this},getId:function(){return this.id},setId:function(A){this.id=A;return this},setCanvas:function(A){if(A===null&&this.shape!==null){this.unselect();this.shape.remove();this.shape=null}this.canvas=A;if(this.canvas!==null){this.getShapeElement()}if(A===null){this.stopTimer()}else{if(this.timerInterval>=this.MIN_TIMER_INTERVAL){this.startTimer(this.timerInterval)}}this.children.each(function(B,C){C.figure.setCanvas(A)})},getCanvas:function(){return this.canvas},startTimer:function(A){this.stopTimer();this.timerInterval=Math.max(this.MIN_TIMER_INTERVAL,A);if(this.canvas!==null){this.timerId=window.setInterval($.proxy(this.onTimer,this),this.timerInterval)}return this},stopTimer:function(){if(this.timerId>=0){window.clearInterval(this.timerId);this.timerId=-1}},onTimer:function(){},installEditPolicy:function(A){if(A instanceof draw2d.policy.figure.SelectionFeedbackPolicy){this.editPolicy.grep($.proxy(function(C){var B=!(C instanceof draw2d.policy.figure.SelectionFeedbackPolicy);if(!B){C.onUninstall(this)}return B},this))}A.onInstall(this);this.editPolicy.add(A)},addFigure:function(B,A){B.setDraggable(false);B.setSelectable(false);B.setParent(this);this.children.add({figure:B,locator:A});if(this.canvas!==null){B.setCanvas(this.canvas)}this.repaint();return this},getChildren:function(){var A=new draw2d.util.ArrayList();this.children.each(function(B,C){A.add(C.figure)});return A},resetChildren:function(){this.children.each(function(A,B){B.figure.setCanvas(null)});this.children=new draw2d.util.ArrayList();this.repaint()},getShapeElement:function(){if(this.shape!==null){return this.shape}this.shape=this.createShapeElement();return this.shape},createShapeElement:function(){throw"Inherited class ["+this.NAME+"] must override the abstract method createShapeElement"},repaint:function(A){if(this.visible===true){this.shape.show()}else{this.shape.hide();return }A.opacity=this.alpha;this.shape.attr(A);this.applyTransformation();this.children.each(function(B,C){C.locator.relocate(B,C.figure)})},applyTransformation:function(){},setGlow:function(A){return this},onDragStart:function(B,A){this.isInDragDrop=false;this.isMoving=false;this.originalAlpha=this.getAlpha();this.command=this.createCommand(new draw2d.command.CommandType(draw2d.command.CommandType.MOVE));if(this.command!==null){this.ox=this.x;this.oy=this.y;this.isInDragDrop=true;this.editPolicy.each($.proxy(function(C,D){if(D instanceof draw2d.policy.figure.DragDropEditPolicy){D.onDragStart(this.canvas,this)}},this));return true}return false},onDrag:function(B,A){this.editPolicy.each($.proxy(function(E,F){if(F instanceof draw2d.policy.figure.DragDropEditPolicy){var D=F.adjustPosition(this,this.ox+B,this.oy+A);B=D.x-this.ox;A=D.y-this.oy}},this));this.x=this.ox+B;this.y=this.oy+A;if(this.getCanSnapToHelper()){var C=new draw2d.geo.Point(this.x,this.y);C=this.getCanvas().snapToHelper(this,C);this.x=C.x;this.y=C.y}this.setPosition(this.x,this.y);this.editPolicy.each($.proxy(function(D,E){if(E instanceof draw2d.policy.figure.DragDropEditPolicy){E.onDrag(this.canvas,this)}},this));if(this.isMoving===false){this.isMoving=true;this.setAlpha(this.originalAlpha*0.7)}},onPanning:function(B,A){},onDragEnd:function(){this.setAlpha(this.originalAlpha);this.command.setPosition(this.x,this.y);this.isInDragDrop=false;this.canvas.getCommandStack().execute(this.command);this.command=null;this.isMoving=false;this.editPolicy.each($.proxy(function(A,B){if(B instanceof draw2d.policy.figure.DragDropEditPolicy){B.onDragEnd(this.canvas,this)}},this));this.fireMoveEvent()},onDragEnter:function(A){return null},onDragLeave:function(A){},onDrop:function(A){},onMouseEnter:function(){},onMouseLeave:function(){},onDoubleClick:function(){},onClick:function(){},onContextMenu:function(A,B){},setAlpha:function(A){A=Math.min(1,Math.max(0,parseFloat(A)));if(A===this.alpha){return }this.alpha=A;this.repaint();return this},getAlpha:function(){return this.alpha},setRotationAngle:function(A){this.rotationAngle=A;this.editPolicy.each($.proxy(function(B,C){if(C instanceof draw2d.policy.figure.DragDropEditPolicy){C.moved(this.canvas,this)}},this));this.repaint();return this},getRotationAngle:function(){return this.rotationAngle},setVisible:function(A){this.visible=!!A;this.repaint();return this},isVisible:function(){return this.visible&&this.shape!==null},getZOrder:function(){if(this.shape===null){return -1}var A=0;var B=this.shape.node;while((B=B.previousSibling)!==null){A++}return A},setCanSnapToHelper:function(A){this.canSnapToHelper=!!A;return this},getCanSnapToHelper:function(){return this.canSnapToHelper},getSnapToGridAnchor:function(){return this.snapToGridAnchor},setSnapToGridAnchor:function(A){this.snapToGridAnchor=A},getWidth:function(){return this.width},getHeight:function(){return this.height},getMinWidth:function(){return this.minWidth},setMinWidth:function(A){this.minWidth=parseFloat(A);return this},getMinHeight:function(){return this.minHeight;return this},setMinHeight:function(A){this.minHeight=parseFloat(A);return this},getX:function(){return this.x},getY:function(){return this.y},getAbsoluteX:function(){if(this.parent===null){return this.x||0}return this.x+this.parent.getAbsoluteX()},getAbsoluteY:function(){if(this.parent===null){return this.y||0}return this.y+this.parent.getAbsoluteY()},getAbsolutePosition:function(){return new draw2d.geo.Point(this.getAbsoluteX(),this.getAbsoluteY())},getAbsoluteBounds:function(){return new draw2d.geo.Rectangle(this.getAbsoluteX(),this.getAbsoluteY(),this.getWidth(),this.getHeight())},setPosition:function(A,B){if(A instanceof draw2d.geo.Point){this.x=A.x;this.y=A.y}else{this.x=A;this.y=B}this.repaint();this.editPolicy.each($.proxy(function(C,D){if(D instanceof draw2d.policy.figure.DragDropEditPolicy){D.moved(this.canvas,this)}},this));this.fireMoveEvent();return this},getPosition:function(){return new draw2d.geo.Point(this.x,this.y)},translate:function(B,A){this.setPosition(this.x+B,this.y+A);return this},setDimension:function(A,B){A=Math.max(this.getMinWidth(),A);B=Math.max(this.getMinHeight(),B);if(this.width===A&&this.height===B){return }this.editPolicy.each($.proxy(function(D,E){if(E instanceof draw2d.policy.figure.DragDropEditPolicy){var C=E.adjustDimension(this,A,B);A=C.w;B=C.h}},this));this.width=Math.max(this.getMinWidth(),A);this.height=Math.max(this.getMinHeight(),B);this.repaint();this.fireResizeEvent();this.fireMoveEvent();this.editPolicy.each($.proxy(function(C,D){if(D instanceof draw2d.policy.figure.DragDropEditPolicy){D.moved(this.canvas,this)}},this));return this},getBoundingBox:function(){return new draw2d.geo.Rectangle(this.getAbsoluteX(),this.getAbsoluteY(),this.getWidth(),this.getHeight())},hitTest:function(A,C,B){if(typeof B==="number"){return this.getBoundingBox().scale(B,B).hitTest(A,C)}return this.getBoundingBox().hitTest(A,C)},setDraggable:function(A){this.draggable=!!A;return this},isDraggable:function(){return this.draggable},isResizeable:function(){return this.resizeable},setResizeable:function(A){this.resizeable=!!A;return this},isSelectable:function(){return this.selectable},setSelectable:function(A){this.selectable=!!A;return this},isStrechable:function(){return true},isDeleteable:function(){return this.deleteable},setDeleteable:function(A){this.deleteable=!!A;return this},setParent:function(A){this.parent=A;return this},getParent:function(){return this.parent},attachResizeListener:function(A){if(A===null){return }this.resizeListener.add(A);return this},detachResizeListener:function(A){if(A===null){return }this.resizeListener.remove(A);return this},fireResizeEvent:function(){this.resizeListener.each($.proxy(function(A,B){B.onOtherFigureIsResizing(this)},this));return this},onOtherFigureIsResizing:function(A){},attachMoveListener:function(A){if(A===null){return }if(!this.moveListener.contains(A)){this.moveListener.add(A)}return this},detachMoveListener:function(A){if(A===null){return }this.moveListener.remove(A);return this},fireMoveEvent:function(){this.moveListener.each($.proxy(function(A,B){B.onOtherFigureIsMoving(this)},this));return this},onOtherFigureIsMoving:function(A){},createCommand:function(A){if(A===null){return null}if(A.getPolicy()===draw2d.command.CommandType.MOVE){if(!this.isDraggable()){return null}return new draw2d.command.CommandMove(this)}if(A.getPolicy()===draw2d.command.CommandType.DELETE){if(!this.isDeleteable()){return null}return new draw2d.command.CommandDelete(this)}if(A.getPolicy()===draw2d.command.CommandType.RESIZE){if(!this.isResizeable()){return null}return new draw2d.command.CommandResize(this)}return null},getPersistentAttributes:function(){var A={type:this.NAME,id:this.id,x:this.x,y:this.y,width:this.width,height:this.height};return A},setPersistentAttributes:function(A){this.id=A.id;this.x=A.x;this.y=A.y;if(typeof A.width!=="undefined"){this.width=A.width}if(typeof A.height!=="undefined"){this.height=A.height}return this},onRemove:function(){}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/node/Node.js' */
(function ($) {draw2d.shape.node.Node=draw2d.Figure.extend({NAME:"draw2d.shape.node.Node",init:function(B,A){this.inputPorts=new draw2d.util.ArrayList();this.outputPorts=new draw2d.util.ArrayList();this.hybridPorts=new draw2d.util.ArrayList();this.portRelayoutRequired=true;this.cachedPorts=null;this._super(B,A)},onDoubleClick:function(){var A=this.getWidth();var B=this.getHeight();this.setRotationAngle((this.getRotationAngle()+90)%360);this.setDimension(B,A);this.portRelayoutRequired=true},getPorts:function(){if(this.cachedPorts===null){this.cachedPorts=new draw2d.util.ArrayList();this.cachedPorts.addAll(this.inputPorts);this.cachedPorts.addAll(this.outputPorts);this.cachedPorts.addAll(this.hybridPorts);this.children.each($.proxy(function(A,B){this.cachedPorts.addAll(B.figure.getPorts())},this))}return this.cachedPorts},getInputPorts:function(){return this.inputPorts.clone().addAll(this.hybridPorts)},getOutputPorts:function(){return this.outputPorts.clone().addAll(this.hybridPorts)},getPort:function(B){var A=null;this.getPorts().each(function(C,D){if(D.getName()===B){A=D;return false}});return A},getInputPort:function(C){if(typeof C==="number"){return this.inputPorts.get(C)}for(var B=0;B<this.inputPorts.getSize();B++){var A=this.inputPorts.get(B);if(A.getName()===C){return A}}return null},getOutputPort:function(C){if(typeof C==="number"){return this.outputPorts.get(C)}for(var B=0;B<this.outputPorts.getSize();B++){var A=this.outputPorts.get(B);if(A.getName()===C){return A}}return null},getHybridPort:function(C){if(typeof C==="number"){return this.hybridPorts.get(C)}for(var B=0;B<this.hybridPorts.getSize();B++){var A=this.hybridPorts.get(B);if(A.getName()===C){return A}}return null},addPort:function(B,A){if(!(B instanceof draw2d.Port)){throw"Argument is not typeof 'draw2d.Port'. \nFunction: draw2d.shape.node.Node#addPort"}this.cachedPorts=null;this.portRelayoutRequired=true;if(B instanceof draw2d.InputPort){this.inputPorts.add(B)}else{if(B instanceof draw2d.OutputPort){this.outputPorts.add(B)}else{if(B instanceof draw2d.HybridPort){this.hybridPorts.add(B)}}}if((typeof A!=="undefined")&&(A instanceof draw2d.layout.locator.Locator)){B.setLocator(A)}B.setParent(this);B.setCanvas(this.canvas);B.setDeleteable(false);if(this.canvas!==null){B.getShapeElement();this.canvas.registerPort(B)}},removePort:function(A){this.portRelayoutRequired=true;this.inputPorts.remove(A);this.outputPorts.remove(A);this.hybridPorts.remove(A);if(A.getCanvas()!==null){A.getCanvas().unregisterPort(A);var C=A.getConnections();for(var B=0;B<C.getSize();++B){A.getCanvas().removeFigure(C.get(B))}}A.setCanvas(null)},createPort:function(C,B){var A=null;var D=0;switch(C){case"input":A=new draw2d.InputPort();D=this.inputPorts.getSize();break;case"output":A=new draw2d.OutputPort();D=this.outputPorts.getSize();break;case"hybrid":A=new draw2d.HybridPort();D=this.hybridPorts.getSize();break;default:throw"Unknown type ["+C+"] of port requested"}A.setName(C+D);this.addPort(A,B);this.setDimension(this.width,this.height);return A},getConnections:function(){var D=new draw2d.util.ArrayList();var F=this.getPorts();for(var C=0;C<F.getSize();C++){var A=F.get(C);for(var E=0,B=A.getConnections().getSize();E<B;E++){if(!D.contains(A.getConnections().get(E))){D.add(A.getConnections().get(E))}}}return D},setCanvas:function(B){var A=this.canvas;this._super(B);var C=this.getPorts();if(A!==null){C.each(function(E,D){A.unregisterPort(D)})}if(B!==null){C.each(function(E,D){D.setCanvas(B);B.registerPort(D)});this.setDimension(this.width,this.height)}else{C.each(function(E,D){D.setCanvas(null)})}},setRotationAngle:function(A){this.portRelayoutRequired=true;this._super(A);this.layoutPorts()},setDimension:function(A,B){this.portRelayoutRequired=true;this._super(A,B)},onPortValueChanged:function(A){},repaint:function(A){if(this.repaintBlocked===true||this.shape===null){return }this._super(A);this.layoutPorts()},layoutPorts:function(){if(this.portRelayoutRequired===false){return }this.portRelayoutRequired=false;this.outputPorts.each(function(B,A){A.locator.relocate(B,A)});this.inputPorts.each(function(B,A){A.locator.relocate(B,A)});this.hybridPorts.each(function(B,A){A.locator.relocate(B,A)})}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/VectorFigure.js' */
(function ($) {draw2d.VectorFigure=draw2d.shape.node.Node.extend({NAME:"draw2d.VectorFigure",init:function(){this.stroke=1;this.bgColor=new draw2d.util.Color(255,255,255);this.lineColor=new draw2d.util.Color(128,128,255);this.color=new draw2d.util.Color(128,128,128);this.strokeBeforeGlow=this.stroke;this.glowIsActive=false;this._super()},setGlow:function(A){if(A===this.glowIsActive){return this}this.glowIsActive=A;if(A===true){this.strokeBeforeGlow=this.getStroke();this.setStroke(this.strokeBeforeGlow*2.5)}else{this.setStroke(this.strokeBeforeGlow)}return this},repaint:function(A){if(this.repaintBlocked===true||this.shape===null){return }if(typeof A==="undefined"){A={}}A.x=this.getAbsoluteX();A.y=this.getAbsoluteY();if(typeof A.stroke==="undefined"){if(this.color===null||this.stroke===0){A.stroke="none"}else{A.stroke=this.color.hash()}}A["stroke-width"]=this.stroke;if(typeof A.fill==="undefined"){A.fill=this.bgColor.hash()}this._super(A)},setBackgroundColor:function(A){this.bgColor=new draw2d.util.Color(A);this.repaint();return this},getBackgroundColor:function(){return this.bgColor},setStroke:function(A){this.stroke=A;this.repaint();return this},getStroke:function(){return this.stroke},setColor:function(A){this.color=new draw2d.util.Color(A);this.repaint();return this},getColor:function(){return this.color}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/basic/Rectangle.js' */
(function ($) {draw2d.shape.basic.Rectangle=draw2d.VectorFigure.extend({NAME:"draw2d.shape.basic.Rectangle",init:function(B,A){this.radius=2;this.dasharray=null;this._super();this.setBackgroundColor(new draw2d.util.Color(100,100,100));this.setColor("#1B1B1B");if(typeof B==="undefined"){this.setDimension(50,90)}else{this.setDimension(B,A)}},repaint:function(A){if(this.repaintBlocked===true||this.shape===null){return }if(typeof A==="undefined"){A={}}if(this.dasharray!==null){A["stroke-dasharray"]=this.dasharray}A.width=this.getWidth();A.height=this.getHeight();A.r=this.radius;this._super(A)},applyTransformation:function(){this.shape.transform("R"+this.rotationAngle);if(this.getRotationAngle()===90||this.getRotationAngle()===270){var B=this.getHeight()/this.getWidth();var A="...S"+B+","+1/B+","+(this.getAbsoluteX()+this.getWidth()/2)+","+(this.getAbsoluteY()+this.getHeight()/2);this.shape.transform(A)}},createShapeElement:function(){return this.canvas.paper.rect(this.getAbsoluteX(),this.getAbsoluteY(),this.getWidth(),this.getHeight())},setRadius:function(A){this.radius=A;this.repaint()},getRadius:function(){return this.radius},setDashArray:function(A){this.dasharray=A},getPersistentAttributes:function(){var A=this._super();A.radius=this.radius;return A},setPersistentAttributes:function(A){this._super(A);if(typeof A.radius==="number"){this.radius=A.radius}}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/SetFigure.js' */
(function ($) {draw2d.SetFigure=draw2d.shape.basic.Rectangle.extend({NAME:"draw2d.SetFigure",init:function(B,A){this.svgNodes=null;this.originalWidth=null;this.originalHeight=null;this.scaleX=1;this.scaleY=1;this._super(B,A);this.setStroke(0);this.setBackgroundColor(null)},setCanvas:function(A){if(A===null&&this.svgNodes!==null){this.svgNodes.remove();this.svgNodes=null}this._super(A)},repaint:function(A){if(this.repaintBlocked===true||this.shape===null){return }if(this.originalWidth!==null){this.scaleX=this.width/this.originalWidth;this.scaleY=this.height/this.originalHeight}if(typeof A==="undefined"){A={}}if(this.visible===true){this.svgNodes.show()}else{this.svgNodes.hide()}this._super(A)},applyTransformation:function(){var D="S"+this.scaleX+","+this.scaleY+",0,0 R"+this.rotationAngle+","+((this.getWidth()/2)|0)+","+((this.getHeight()/2)|0)+"T"+this.getAbsoluteX()+","+this.getAbsoluteY()+"";this.svgNodes.transform(D);if(this.rotationAngle===90||this.rotationAngle===270){var E=this.svgNodes.getBBox(true);var C=E.height/E.width;var B=E.width/E.height;var A="...S"+C+","+B+","+(this.getAbsoluteX()+this.getWidth()/2)+","+(this.getAbsoluteY()+this.getHeight()/2);this.svgNodes.transform(A)}},createShapeElement:function(){var A=this.canvas.paper.rect(this.getX(),this.getY(),this.getWidth(),this.getHeight());this.svgNodes=this.createSet();var B=this.svgNodes.getBBox();this.originalWidth=B.width;this.originalHeight=B.height;return A},createSet:function(){return this.canvas.paper.set()}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/SVGFigure.js' */
(function ($) {draw2d.SVGFigure=draw2d.SetFigure.extend({NAME:"draw2d.SVGFigure",init:function(B,A){this._super(B,A)},createSet:function(){return this.importSVG(this.canvas,this.getSVG())},importSVG:function(C,A){var F=C.paper.set();try{if(typeof A==="undefined"){throw"No data was provided."}var E=$(A);if(E.attr("width")&&E.attr("height")){this.setDimension(E.attr("width"),E.attr("height"))}var D=new RegExp("([a-z0-9-]+) ?: ?([^ ;]+)[ ;]?","gi");E.children().each(function(K,L){var N=null;var G=null;var O={};var I=L.tagName;var M=I.indexOf(":");if(M!=-1){I=I.substr(M+1)}$(L.attributes).each(function(){switch(this.nodeName){case"stroke-dasharray":O[this.nodeName]="- ";break;case"style":G=this.nodeValue;break;case"id":case"xml:space":break;default:O[this.nodeName]=this.nodeValue;break}});if(G!==null){while(D.exec(G)){O[RegExp.$1]=RegExp.$2}}if(typeof O["stroke-width"]==="undefined"){O["stroke-width"]=(typeof O.stroke==="undefined"?0:1.2)}switch(I){case"rect":N=C.paper.rect();break;case"circle":N=C.paper.circle();break;case"ellipse":N=C.paper.ellipse();break;case"path":O.fill="none";N=C.paper.path(O.d);break;case"line":O.d="M "+O.x1+" "+O.y1+"L"+O.x2+" "+O.y2;O.fill="none";N=C.paper.path(O.d);break;case"polyline":var Q=O.points;O.d="M "+Q.replace(" "," L");N=C.paper.path(O.d);break;case"polygon":N=C.paper.polygon(O.points);break;case"image":N=C.paper.image();break;case"tspan":case"text":if(L.childNodes.length>0){var H=L.firstChild;do{switch(H.nodeType){case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:return ;case 1:}var J=C.paper.text(0,0,$(H).text());var P={x:parseFloat(H.attributes.x.value),y:parseFloat(H.attributes.y.value)};P["text-anchor"]="start";if(typeof H.attributes["font-size"]!=="undefined"){P["font-size"]=parseInt(H.attributes["font-size"].value)}else{if(typeof O["font-size"]!=="undefined"){P["font-size"]=parseInt(O["font-size"])}}if(typeof H.attributes["font-family"]!=="undefined"){P["font-family"]=H.attributes["family-family"].value}else{if(typeof O["font-family"]!=="undefined"){P["font-family"]=O["font-family"]}}P.fill="#000000";if(typeof H.attributes.fill!=="undefined"){P.fill=H.attributes.fill.value}else{if(typeof O.fill!=="undefined"){P.fill=O.fill}}P.y=P.y+J.getBBox().height/2;J.attr(P);F.push(J)}while(H=H.nextSibling)}else{N=C.paper.text(0,0,$(L).html());if(typeof O.fill==="undefined"){O.fill="#000000"}if(typeof O["text-anchor"]==="undefined"){O["text-anchor"]="start"}if(typeof O["font-size"]!=="undefined"){O["font-size"]=parseInt(O["font-size"])}if(typeof O["font-family"]!=="undefined"){O["font-family"]=parseInt(O["font-family"])}O.y=parseFloat(O.y)+N.getBBox().height/2}break}if(N!==null){N.attr(O);F.push(N)}})}catch(B){alert("The SVG data you entered was invalid! ("+B+")")}return F}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/node/Hub.js' */
(function ($) {draw2d.shape.node.Hub=draw2d.shape.basic.Rectangle.extend({NAME:"draw2d.shape.node.Hub",DEFAULT_COLOR:new draw2d.util.Color("#4DF0FE"),BACKGROUND_COLOR:new draw2d.util.Color("#29AA77"),init:function(C,A,B){this.label=null;this._super(C,A);this.port=this.createPort("hybrid",new draw2d.layout.locator.CenterLocator(this));this.CONNECTION_DIR_STRATEGY=[$.proxy(function(E,D){return this.getParent().getBoundingBox().getDirection(D.getAbsolutePosition())},this.port),$.proxy(function(E,D){return this.getAbsoluteY()>D.getAbsoluteY()?0:2},this.port),$.proxy(function(E,D){return this.getAbsoluteX()>D.getAbsoluteX()?3:1},this.port)];this.port.setGlow=$.proxy(this.setGlow,this);this.port._orig_hitTest=this.port.hitTest;this.port.hitTest=$.proxy(this.hitTest,this);this.port.setConnectionAnchor(new draw2d.layout.anchor.ShortesPathConnectionAnchor(this.port));this.port.setVisible(false);if(typeof A==="undefined"){this.setDimension(150,50)}this.setConnectionDirStrategy(0);this.setColor(this.DEFAULT_COLOR.darker());this.setBackgroundColor(this.BACKGROUND_COLOR);if(typeof B!=="undefined"){this.label=new draw2d.shape.basic.Label(B);this.label.setColor("#0d0d0d");this.label.setFontColor("#0d0d0d");this.label.setStroke(0);this.addFigure(this.label,new draw2d.layout.locator.CenterLocator(this))}},onDragEnter:function(A){return this.getHybridPort(0).onDragEnter(A)},getMinWidth:function(){if(this.label!==null){return Math.max(this.label.getMinWidth(),this._super())}else{return this._super()}},repaint:function(A){if(this.repaintBlocked===true||this.shape===null){return }if(typeof A==="undefined"){A={}}if(typeof A.fill==="undefined"){if(this.bgColor!==null){A.fill="90-"+this.bgColor.hash()+":5-"+this.bgColor.lighter(0.3).hash()+":95"}else{A.fill="none"}}this._super(A)},setConnectionDirStrategy:function(A){switch(A){case 0:case 1:case 2:this.port.getConnectionDirection=this.CONNECTION_DIR_STRATEGY[A];break}},getPersistentAttributes:function(){var A=this._super();A.dirStrategy=this.CONNECTION_DIR_STRATEGY.indexOf(this.port.getConnectionDirection);return A},setPersistentAttributes:function(A){this._super(A);if(typeof A.dirStrategy==="number"){this.setConnectionDirStrategy(A.dirStrategy)}}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/node/HorizontalBus.js' */
(function ($) {draw2d.shape.node.HorizontalBus=draw2d.shape.node.Hub.extend({NAME:"draw2d.shape.node.HorizontalBus",init:function(C,A,B){this._super(C,A,B);this.setConnectionDirStrategy(1);this.installEditPolicy(new draw2d.policy.figure.HBusSelectionFeedbackPolicy())}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/node/VerticalBus.js' */
(function ($) {draw2d.shape.node.VerticalBus=draw2d.shape.node.Hub.extend({NAME:"draw2d.shape.node.VerticalBus",init:function(C,A,B){this._super(C,A,B);if(this.label!==null){this.label.setRotationAngle(90)}this.setConnectionDirStrategy(2);this.installEditPolicy(new draw2d.policy.figure.VBusSelectionFeedbackPolicy())},getMinHeight:function(){if(this.shape===null&&this.label===null){return 0}return this.label.getMinWidth()},getMinWidth:function(){if(this.shape===null&&this.label===null){return 0}return this.label.getMinHeight()}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/node/Fulcrum.js' */
(function ($) {draw2d.shape.node.Fulcrum=draw2d.shape.node.Hub.extend({NAME:"draw2d.shape.node.Fulcrum",init:function(){this._super(40,40);this.port.setConnectionAnchor(new draw2d.layout.anchor.ConnectionAnchor(this.port));this.port.setVisible(true);this.port.hitTest=this.port._orig_hitTest;this.setConnectionDirStrategy(0);this.setColor(null);this.setRadius(10);this.setBackgroundColor(null);this.setStroke(0);this.installEditPolicy(new draw2d.policy.figure.AntSelectionFeedbackPolicy())},repaint:function(A){if(this.repaintBlocked===true||this.shape===null){return }if(typeof A==="undefined"){A={}}if(typeof A.fill==="undefined"){A.fill=this.bgColor.hash()}this._super(A)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/basic/Oval.js' */
(function ($) {draw2d.shape.basic.Oval=draw2d.VectorFigure.extend({NAME:"draw2d.shape.basic.Oval",init:function(B,A){this._super();this.setBackgroundColor("#C02B1D");this.setColor("#1B1B1B");if((typeof A==="number")&&(typeof B==="number")){this.setDimension(B,A)}else{this.setDimension(50,50)}},createShapeElement:function(){var A=this.getWidth()/2;var B=this.getHeight()/2;return this.canvas.paper.ellipse(this.getAbsoluteX()+A,this.getAbsoluteY()+B,A,B)},repaint:function(A){if(this.repaintBlocked===true||this.shape===null){return }if(typeof A==="undefined"){A={}}if(typeof A.rx==="undefined"){A.rx=this.width/2;A.ry=this.height/2}if(typeof A.cx==="undefined"){A.cx=this.getAbsoluteX()+A.rx;A.cy=this.getAbsoluteY()+A.ry}this._super(A)},intersectionWithLine:function(S,Q){var D=this.getWidth()/2;var C=this.getHeight()/2;var G=new draw2d.util.ArrayList();var R=new draw2d.geo.Point(S.x,S.y);var J=Q.subtract(S);var O=new draw2d.geo.Point(this.getAbsoluteX()+D,this.getAbsoluteY()+C);var I=R.subtract(O);var B=new draw2d.geo.Point(J.x/(D*D),J.y/(C*C));var A=new draw2d.geo.Point(I.x/(D*D),I.y/(C*C));var P=J.dot(B);var N=J.dot(A);var M=I.dot(A)-1;var L=N*N-P*M;if(L<0){}else{if(L>0){var K=Math.sqrt(L);var F=(-N-K)/P;var E=(-N+K)/P;if((F<0||1<F)&&(E<0||1<E)){if((F<0&&E<0)||(F>1&&E>1)){}else{}}else{if(0<=F&&F<=1){G.add(S.lerp(Q,F))}if(0<=E&&E<=1){G.add(S.lerp(Q,E))}}}else{var H=-N/P;if(0<=H&&H<=1){G.add(S.lerp(Q,H))}else{}}}return G}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/basic/Circle.js' */
(function ($) {draw2d.shape.basic.Circle=draw2d.shape.basic.Oval.extend({NAME:"draw2d.shape.basic.Circle",init:function(A){this._super();if(typeof A==="number"){this.setDimension(A,A)}else{this.setDimension(40,40)}},setDimension:function(A,B){if(A>B){this._super(A,A)}else{this._super(B,B)}},isStrechable:function(){return false}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/basic/Label.js' */
(function ($) {draw2d.shape.basic.Label=draw2d.SetFigure.extend({NAME:"draw2d.shape.basic.Label",FONT_FALLBACK:{Georgia:"Georgia, serif","Palatino Linotype":'"Palatino Linotype", "Book Antiqua", Palatino, serif',"Times New Roman":'"Times New Roman", Times, serif',Arial:"Arial, Helvetica, sans-serif","Arial Black":'"Arial Black", Gadget, sans-serif',"Comic Sans MS":'"Comic Sans MS", cursive, sans-serif',Impact:"Impact, Charcoal, sans-serif","Lucida Sans Unicode":'"Lucida Sans Unicode", "Lucida Grande", sans-serif',"Tahoma, Geneva":"Tahoma, Geneva, sans-seri","Trebuchet MS":'"Trebuchet MS", Helvetica, sans-serif',Verdana:"Verdana, Geneva, sans-serif","Courier New":'"Courier New", Courier, monospace',"Lucida Console":'"Lucida Console", Monaco, monospace'},init:function(A){this._super();if(typeof A==="string"){this.text=A}else{this.text=""}this.cachedWidth=null;this.cachedHeight=null;this.cachedMinWidth=null;this.cachedMinHeight=null;this.fontSize=12;this.fontColor=new draw2d.util.Color("#080808");this.fontFamily=null;this.padding=4;this.bold=false;this.setStroke(1);this.setDimension(10,10);this.editor=null;this.installEditPolicy(new draw2d.policy.figure.AntSelectionFeedbackPolicy())},createSet:function(){return this.canvas.paper.text(0,0,this.text)},repaint:function(A){if(this.repaintBlocked===true||this.shape===null){return }this.cachedWidth=null;this.cachedHeight=null;this.cachedMinWidth=null;this.cachedMinHeight=null;var B={};B.text=this.text;B.x=this.padding+this.getStroke();B.y=this.getHeight()/2;B["font-weight"]=(this.bold===true)?"bold":"normal";B["text-anchor"]="start";B["font-size"]=this.fontSize;if(this.fontFamily!==null){B["font-family"]=this.fontFamily}B.fill=this.fontColor.hash();this.svgNodes.attr(B);this._super(A)},applyTransformation:function(){this.shape.transform("R"+this.rotationAngle);this.svgNodes.transform("R"+this.rotationAngle+"T"+this.getAbsoluteX()+","+this.getAbsoluteY())},isResizeable:function(){return false},setFontSize:function(A){this.cachedMinWidth=null;this.cachedMinHeight=null;this.fontSize=A;this.repaint()},setBold:function(A){this.cachedMinWidth=null;this.cachedMinHeight=null;this.bold=A;this.repaint()},setFontColor:function(A){this.fontColor=new draw2d.util.Color(A);this.repaint()},getFontColor:function(){return this.fontColor},setPadding:function(A){this.cachedMinWidth=null;this.cachedMinHeight=null;this.cachedWidth=null;this.cachedHeight=null;this.padding=A;this.repaint()},setFontFamily:function(A){this.cachedMinWidth=null;this.cachedMinHeight=null;this.cachedWidth=null;this.cachedHeight=null;if(this.FONT_FALLBACK[A]!=="undefined"){A=this.FONT_FALLBACK[A]}this.fontFamily=A;this.repaint()},setDimension:function(A,B){this.cachedWidth=null;this.cachedHeight=null;this._super(A,B)},getMinWidth:function(){if(this.shape===null){return 0}if(this.cachedMinWidth===null){this.cachedMinWidth=this.svgNodes.getBBox(true).width+2*this.padding+2*this.getStroke()}return this.cachedMinWidth},getMinHeight:function(){if(this.shape===null){return 0}if(this.cachedMinHeight===null){this.cachedMinHeight=this.svgNodes.getBBox(true).height+2*this.padding+2*this.getStroke()}return this.cachedMinHeight},getWidth:function(){if(this.shape===null){return 0}if(this.cachedWidth===null){this.cachedWidth=Math.max(this.width,this.getMinWidth())}return this.cachedWidth},getHeight:function(){if(this.shape===null){return 0}if(this.cachedHeight===null){this.cachedHeight=Math.max(this.height,this.getMinHeight())}return this.cachedHeight},installEditor:function(A){this.editor=A},onDoubleClick:function(){if(this.editor!==null){this.editor.start(this)}},getText:function(){return this.text},setText:function(A){this.cachedWidth=null;this.cachedHeight=null;this.cachedMinWidth=null;this.cachedMinHeight=null;this.text=A;this.repaint();this.editPolicy.each($.proxy(function(B,C){if(C instanceof draw2d.policy.figure.DragDropEditPolicy){C.moved(this.canvas,this)}},this));this.fireResizeEvent();if(this.parent!==null){this.parent.repaint()}},hitTest:function(I,F){if(this.rotationAngle===0){return this._super(I,F)}var H=this.shape.matrix;var J=this.getBoundingBox().getPoints();J.each(function(M,L){var K=H.x(L.x,L.y);var N=H.y(L.x,L.y);L.x=K;L.y=N});var A=4;var D=0;var B=A-1;var G=false;for(D=0;D<A;D++){var E=J.get(D);var C=J.get(B);if((E.y<F&&C.y>=F||C.y<F&&E.y>=F)&&(E.x<=I||C.x<=I)){if(E.x+(F-E.y)/(C.y-E.y)*(C.x-E.x)<I){G=!G}}B=D}return G},getPersistentAttributes:function(){var A=this._super();A.text=this.text;A.fontSize=this.fontSize;A.fontColor=this.fontColor.hash();A.fontFamily=this.fontFamily;return A},setPersistentAttributes:function(A){this._super(A);if(typeof A.text!=="undefined"){this.setText(A.text)}if(typeof A.fontFamily!=="undefined"){this.setFontFamily(A.fontFamily)}if(typeof A.fontSize!=="undefined"){this.setFontSize(A.fontSize)}if(typeof A.fontColor!=="undefined"){this.setFontColor(A.fontColor)}}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/basic/Line.js' */
(function ($) {draw2d.shape.basic.Line=draw2d.Figure.extend({NAME:"draw2d.shape.basic.Line",DEFAULT_COLOR:new draw2d.util.Color(0,0,0),init:function(B,A,D,C){this.repaintBlocked=false;this.corona=10;this.isGlowing=false;this.lineColor=this.DEFAULT_COLOR;this.stroke=1;this.dasharray=null;if(typeof C==="number"){this.startX=B;this.startY=A;this.endX=D;this.endY=C}else{this.startX=30;this.startY=30;this.endX=100;this.endY=100}this._super();this.installEditPolicy(new draw2d.policy.figure.LineSelectionFeedbackPolicy());this.setSelectable(true);this.setDeleteable(true)},onDragEnd:function(){this.setAlpha(this.originalAlpha);this.isInDragDrop=false;this.canvas.getCommandStack().execute(this.command);this.command=null;this.isMoving=false;this.editPolicy.each($.proxy(function(A,B){if(B instanceof draw2d.policy.figure.DragDropEditPolicy){B.onDragEnd(this.canvas,this)}},this));this.fireMoveEvent()},setDashArray:function(A){this.dasharray=A;return this},setCoronaWidth:function(A){this.corona=A;return this},createShapeElement:function(){return this.canvas.paper.path("M"+this.getStartX()+" "+this.getStartY()+"L"+this.getEndX()+" "+this.getEndY())},repaint:function(A){if(this.repaintBlocked===true||this.shape===null){return }if(typeof A==="undefined"){A={stroke:"#"+this.lineColor.hex(),"stroke-width":this.stroke,path:["M",this.getStartX(),this.getStartY(),"L",this.getEndX(),this.getEndY()].join(" ")}}else{if(typeof A.path==="undefined"){A.path=["M",this.getStartX(),this.getStartY(),"L",this.getEndX(),this.getEndY()].join(" ")}A.stroke=this.lineColor.hash();A["stroke-width"]=this.stroke}if(this.dasharray!==null){A["stroke-dasharray"]=this.dasharray}this._super(A)},setGlow:function(A){if(this.isGlowing===A){return }if(A===true){this._lineColor=this.lineColor;this._stroke=this.stroke;this.setColor(draw2d.util.Color("#3f72bf"));this.setStroke((this.stroke*4)|0)}else{this.setColor(this._lineColor);this.setStroke(this._stroke)}this.isGlowing=A;return this},isResizeable:function(){return true},setStroke:function(A){this.stroke=A;this.repaint();return this},setColor:function(A){this.lineColor=new draw2d.util.Color(A);this.repaint();return this},getColor:function(){return this.lineColor},setStartPoint:function(A,B){if(this.startX===A&&this.startY===B){return }this.startX=A;this.startY=B;this.repaint();this.editPolicy.each($.proxy(function(C,D){if(D instanceof draw2d.policy.figure.DragDropEditPolicy){D.moved(this.canvas,this)}},this));return this},setEndPoint:function(A,B){if(this.endX===A&&this.endY===B){return }this.endX=A;this.endY=B;this.repaint();this.editPolicy.each($.proxy(function(C,D){if(D instanceof draw2d.policy.figure.DragDropEditPolicy){D.moved(this.canvas,this)}},this));return this},getStartX:function(){return this.startX},getStartY:function(){return this.startY},getStartPoint:function(){return new draw2d.geo.Point(this.startX,this.startY)},getEndX:function(){return this.endX},getEndY:function(){return this.endY},getEndPoint:function(){return new draw2d.geo.Point(this.endX,this.endY)},getSegments:function(){var A=new draw2d.util.ArrayList();A.add({start:this.getStartPoint(),end:this.getEndPoint()});return A},getLength:function(){if(this.shape!==null){return this.shape.getTotalLength()}return Math.sqrt((this.startX-this.endX)*(this.startX-this.endX)+(this.startY-this.endY)*(this.startY-this.endY))},getAngle:function(){var A=this.getLength();var B=-(180/Math.PI)*Math.asin((this.startY-this.endY)/A);if(B<0){if(this.endX<this.startX){B=Math.abs(B)+180}else{B=360-Math.abs(B)}}else{if(this.endX<this.startX){B=180-B}}return B},createCommand:function(E){if(E.getPolicy()===draw2d.command.CommandType.MOVE){var B=this.getStartX();var D=this.getStartY();var A=this.getEndX();var C=this.getEndY();return new draw2d.command.CommandMoveLine(this,B,D,A,C)}if(E.getPolicy()===draw2d.command.CommandType.DELETE){if(this.isDeleteable()===false){return null}return new draw2d.command.CommandDelete(this)}return null},hitTest:function(B,A){return draw2d.shape.basic.Line.hit(this.corona,this.startX,this.startY,this.endX,this.endY,B,A)},intersection:function(B){var A=new draw2d.util.ArrayList();if(B===this){return A}var D=this.getSegments();var C=B.getSegments();D.each(function(F,E){C.each(function(H,G){var I=draw2d.shape.basic.Line.intersection(E.start,E.end,G.start,G.end);if(I!==null){A.add(I)}})});return A},getPersistentAttributes:function(){var A=this._super();delete A.x;delete A.y;delete A.width;delete A.height;A.stroke=this.stroke;A.color=this.getColor().hash();return A},setPersistentAttributes:function(A){this._super(A);if(typeof A.stroke!=="undefined"){this.setStroke(parseInt(A.stroke))}if(typeof A.color!=="undefined"){this.setColor(A.color)}}});draw2d.shape.basic.Line.intersection=function(E,C,I,H){var J=null;var F=(H.x-I.x)*(E.y-I.y)-(H.y-I.y)*(E.x-I.x);var G=(C.x-E.x)*(E.y-I.y)-(C.y-E.y)*(E.x-I.x);var D=(H.y-I.y)*(C.x-E.x)-(H.x-I.x)*(C.y-E.y);if(D!=0){var B=F/D;var A=G/D;if(0<=B&&B<=1&&0<=A&&A<=1){J=new draw2d.geo.Point((E.x+B*(C.x-E.x))|0,(E.y+B*(C.y-E.y))|0);J.justTouching=(0==B||B==1||0==A||A==1)}}return J};draw2d.shape.basic.Line.hit=function(D,C,J,B,I,H,G){B-=C;I-=J;H-=C;G-=J;var F=H*B+G*I;var A;if(F<=0){A=0}else{H=B-H;G=I-G;F=H*B+G*I;if(F<=0){A=0}else{A=F*F/(B*B+I*I)}}var E=H*H+G*G-A;if(E<0){E=0}return Math.sqrt(E)<D};}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/basic/PolyLine.js' */
(function ($) {draw2d.shape.basic.PolyLine=draw2d.shape.basic.Line.extend({NAME:"draw2d.shape.basic.PolyLine",init:function(){this.svgPathString=null;this.oldPoint=null;this.lineSegments=new draw2d.util.ArrayList();this.basePoints=new draw2d.util.ArrayList();this._super()},setStartPoint:function(A,B){this.repaintBlocked=true;this._super(A,B);this.calculatePath();this.repaintBlocked=false;this.repaint()},setEndPoint:function(A,B){this.repaintBlocked=true;this._super(A,B);this.calculatePath();this.repaintBlocked=false;this.repaint()},calculatePath:function(){if(this.shape===null){return }this.svgPathString=null;this.oldPoint=null;this.lineSegments=new draw2d.util.ArrayList();this.basePoints=new draw2d.util.ArrayList();this.router.route(this);this.routingRequired=false},repaint:function(){if(this.repaintBlocked===true||this.shape===null){return }if(this.svgPathString===null||this.routingRequired===true){this.calculatePath()}this._super({path:this.svgPathString,"stroke-linejoin":"round"})},onDragEnter:function(A){this.setGlow(true);return this},onDragLeave:function(A){this.setGlow(false)},getPoints:function(){return this.basePoints},getSegments:function(){return this.lineSegments},addPoint:function(A,B){if(typeof B!=="undefined"){A=new draw2d.geo.Point(A,B)}this.basePoints.add(A);if(this.oldPoint!==null){this.lineSegments.add({start:this.oldPoint,end:A})}this.svgPathString=null;this.oldPoint=A},onOtherFigureIsMoving:function(A){this.repaintBlocked=true;this._super(A);this.calculatePath();this.repaintBlocked=false;this.repaint()},hitTest:function(D,B){for(var C=0;C<this.lineSegments.getSize();C++){var A=this.lineSegments.get(C);if(draw2d.shape.basic.Line.hit(this.corona,A.start.x,A.start.y,A.end.x,A.end.y,D,B)){return true}}return false},createCommand:function(A){if(A.getPolicy()===draw2d.command.CommandType.DELETE){if(this.isDeleteable()===true){return new draw2d.command.CommandDelete(this)}}return null}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/basic/Diamond.js' */
(function ($) {draw2d.shape.basic.Diamond=draw2d.VectorFigure.extend({NAME:"draw2d.shape.basic.Diamond",init:function(B,A){this._super();this.setBackgroundColor("#00a3f6");this.setColor("#1B1B1B");if(typeof B==="undefined"){this.setDimension(50,90)}else{this.setDimension(B,A)}},repaint:function(A){if(this.repaintBlocked===true||this.shape===null){return }if(typeof A==="undefined"){A={}}var B=this.getBoundingBox();var C=["M",B.x+(B.w/2)," ",B.y];C.push("L",B.x+B.w," ",B.y+B.h/2);C.push("L",B.x+B.w/2," ",B.y+B.h);C.push("L",B.x," ",B.y+B.h/2);C.push("L",B.x+B.w/2," ",B.y);A.path=C.join("");this._super(A)},createShapeElement:function(){return this.canvas.paper.path("M0 0L1 1")}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/basic/Image.js' */
(function ($) {draw2d.shape.basic.Image=draw2d.shape.node.Node.extend({NAME:"draw2d.shape.basic.Image",init:function(C,B,A){this._super(B,A);this.path=C},repaint:function(A){if(this.repaintBlocked===true||this.shape===null){return }if(typeof A==="undefined"){A={}}A.x=this.getAbsoluteX();A.y=this.getAbsoluteY();A.width=this.getWidth();A.height=this.getHeight();this._super(A)},createShapeElement:function(){return this.canvas.paper.image(this.path,this.getX(),this.getY(),this.getWidth(),this.getHeight())}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/Connection.js' */
(function ($) {draw2d.Connection=draw2d.shape.basic.PolyLine.extend({NAME:"draw2d.Connection",init:function(A){this._super();this.sourcePort=null;this.targetPort=null;this.oldPoint=null;this.sourceDecorator=null;this.targetDecorator=null;this.sourceDecoratorNode=null;this.targetDecoratorNode=null;this.router=A||draw2d.Connection.DEFAULT_ROUTER;this.setColor("#1B1B1B");this.setStroke(1)},disconnect:function(){if(this.sourcePort!==null){this.sourcePort.detachMoveListener(this);this.fireSourcePortRouteEvent()}if(this.targetPort!==null){this.targetPort.detachMoveListener(this);this.fireTargetPortRouteEvent()}},reconnect:function(){if(this.sourcePort!==null){this.sourcePort.attachMoveListener(this);this.fireSourcePortRouteEvent()}if(this.targetPort!==null){this.targetPort.attachMoveListener(this);this.fireTargetPortRouteEvent()}this.onReconnect(this.getSourcePort(),this.getTargetPort());this.routingRequired=true;this.repaint()},isResizeable:function(){return this.isDraggable()},addFigure:function(B,A){if(!(A instanceof draw2d.layout.locator.ConnectionLocator)){throw"Locator must implement the class draw2d.layout.locator.ConnectionLocator"}this._super(B,A)},setSourceDecorator:function(A){this.sourceDecorator=A;this.routingRequired=true;if(this.sourceDecoratorNode!==null){this.sourceDecoratorNode.remove();this.sourceDecoratorNode=null}this.repaint()},getSourceDecorator:function(){return this.sourceDecorator},setTargetDecorator:function(A){this.targetDecorator=A;this.routingRequired=true;if(this.targetDecoratorNode!==null){this.targetDecoratorNode.remove();this.targetDecoratorNode=null}this.repaint()},getTargetDecorator:function(){return this.targetDecorator},setRouter:function(A){if(typeof A==="undefined"||A===null){this.router=new draw2d.layout.connection.NullRouter()}else{this.router=A}this.routingRequired=true;this.repaint()},getRouter:function(){return this.router},calculatePath:function(){if(this.sourcePort===null||this.targetPort===null){return }this._super()},repaint:function(B){if(this.repaintBlocked===true||this.shape===null){return }if(this.sourcePort===null||this.targetPort===null){return }this._super(B);if(this.getSource().getParent().isMoving===false&&this.getTarget().getParent().isMoving===false){if(this.targetDecorator!==null&&this.targetDecoratorNode===null){this.targetDecoratorNode=this.targetDecorator.paint(this.getCanvas().paper)}if(this.sourceDecorator!==null&&this.sourceDecoratorNode===null){this.sourceDecoratorNode=this.sourceDecorator.paint(this.getCanvas().paper)}}if(this.sourceDecoratorNode!==null){var C=this.getPoints().get(0);this.sourceDecoratorNode.transform("r"+this.getStartAngle()+","+C.x+","+C.y+" t"+C.x+","+C.y)}if(this.targetDecoratorNode!==null){var A=this.getPoints().getLastElement();this.targetDecoratorNode.transform("r"+this.getEndAngle()+","+A.x+","+A.y+" t"+A.x+","+A.y)}},getAbsoluteX:function(){return 0},getAbsoluteY:function(){return 0},postProcess:function(A){this.router.postProcess(this,this.getCanvas(),A)},onDragEnter:function(A){if(A instanceof draw2d.shape.basic.LineResizeHandle){return null}return this},onDragLeave:function(A){},getStartPoint:function(){if(this.isMoving===false){return this.sourcePort.getConnectionAnchorLocation(this.targetPort.getConnectionAnchorReferencePoint())}else{return this._super()}},getEndPoint:function(){if(this.isMoving===false){return this.targetPort.getConnectionAnchorLocation(this.sourcePort.getConnectionAnchorReferencePoint())}else{return this._super()}},setSource:function(A){if(this.sourcePort!==null){this.sourcePort.detachMoveListener(this);this.sourcePort.onDisconnect(this)}this.sourcePort=A;if(this.sourcePort===null){return }this.routingRequired=true;this.fireSourcePortRouteEvent();this.sourcePort.attachMoveListener(this);if(this.canvas!==null){this.sourcePort.onConnect(this)}this.setStartPoint(A.getAbsoluteX(),A.getAbsoluteY())},getSource:function(){return this.sourcePort},setTarget:function(A){if(this.targetPort!==null){this.targetPort.detachMoveListener(this);this.targetPort.onDisconnect(this)}this.targetPort=A;if(this.targetPort===null){return }this.routingRequired=true;this.fireTargetPortRouteEvent();this.targetPort.attachMoveListener(this);if(this.canvas!==null){this.targetPort.onConnect(this)}this.setEndPoint(A.getAbsoluteX(),A.getAbsoluteY())},getTarget:function(){return this.targetPort},sharingPorts:function(A){return this.sourcePort==A.sourcePort||this.sourcePort==A.targetPort||this.targetPort==A.sourcePort||this.targetPort==A.targetPort},setCanvas:function(A){this._super(A);if(this.sourceDecoratorNode!==null){this.sourceDecoratorNode.remove();this.sourceDecoratorNode=null}if(this.targetDecoratorNode!==null){this.targetDecoratorNode.remove();this.targetDecoratorNode=null}if(this.canvas===null){if(this.sourcePort!==null){this.sourcePort.detachMoveListener(this);this.sourcePort.onDisconnect(this)}if(this.targetPort!==null){this.targetPort.detachMoveListener(this);this.targetPort.onDisconnect(this)}}else{if(this.sourcePort!==null){this.sourcePort.attachMoveListener(this);this.sourcePort.onConnect(this)}if(this.targetPort!==null){this.targetPort.attachMoveListener(this);this.targetPort.onConnect(this)}}},onOtherFigureIsMoving:function(A){if(A===this.sourcePort){this.setStartPoint(this.sourcePort.getAbsoluteX(),this.sourcePort.getAbsoluteY())}else{this.setEndPoint(this.targetPort.getAbsoluteX(),this.targetPort.getAbsoluteY())}this._super(A)},getStartAngle:function(){if(this.lineSegments.getSize()===0){return 0}var D=this.lineSegments.get(0).start;var B=this.lineSegments.get(0).end;if(this.router instanceof draw2d.layout.connection.SplineConnectionRouter){B=this.lineSegments.get(5).end}var A=Math.sqrt((D.x-B.x)*(D.x-B.x)+(D.y-B.y)*(D.y-B.y));var C=-(180/Math.PI)*Math.asin((D.y-B.y)/A);if(C<0){if(B.x<D.x){C=Math.abs(C)+180}else{C=360-Math.abs(C)}}else{if(B.x<D.x){C=180-C}}return C},getEndAngle:function(){if(this.lineSegments.getSize()===0){return 90}var D=this.lineSegments.get(this.lineSegments.getSize()-1).end;var B=this.lineSegments.get(this.lineSegments.getSize()-1).start;if(this.router instanceof draw2d.layout.connection.SplineConnectionRouter){B=this.lineSegments.get(this.lineSegments.getSize()-5).end}var A=Math.sqrt((D.x-B.x)*(D.x-B.x)+(D.y-B.y)*(D.y-B.y));var C=-(180/Math.PI)*Math.asin((D.y-B.y)/A);if(C<0){if(B.x<D.x){C=Math.abs(C)+180}else{C=360-Math.abs(C)}}else{if(B.x<D.x){C=180-C}}return C},fireSourcePortRouteEvent:function(){var B=this.sourcePort.getConnections();for(var A=0;A<B.getSize();A++){B.get(A).repaint()}},fireTargetPortRouteEvent:function(){var B=this.targetPort.getConnections();for(var A=0;A<B.getSize();A++){B.get(A).repaint()}},createCommand:function(A){if(A.getPolicy()===draw2d.command.CommandType.MOVE_BASEPOINT){return new draw2d.command.CommandReconnect(this)}return this._super(A)},getPersistentAttributes:function(){var B=this._super();var A=this.getSource().getParent();while(A.getParent()!==null){A=A.getParent()}B.source={node:A.getId(),port:this.getSource().getName()};var A=this.getTarget().getParent();while(A.getParent()!==null){A=A.getParent()}B.target={node:A.getId(),port:this.getTarget().getName()};B.router=this.router.NAME;return B},setPersistentAttributes:function(memento){this._super(memento);if(typeof memento.router!=="undefined"){this.setRouter(eval("new "+memento.router+"()"))}},onReconnect:function(A,B){}});draw2d.Connection.createConnection=function(A,B){return new draw2d.Connection()};draw2d.Connection.DEFAULT_ROUTER=new draw2d.layout.connection.ManhattanConnectionRouter();}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/ResizeHandle.js' */
(function ($) {draw2d.ResizeHandle=draw2d.shape.basic.Rectangle.extend({NAME:"draw2d.ResizeHandle",DEFAULT_COLOR:"#00bdee",init:function(A,B){this._super();this.isResizeHandle=true;this.owner=A;this.type=B;this.command=null;this.commandMove=null;this.commandResize=null;this.setDimension();this.setBackgroundColor(this.DEFAULT_COLOR);this.setColor("#7A7A7A");this.setStroke(1);this.setSelectable(false);this.setRadius(0)},select:function(A){},unselect:function(){},getSnapToDirection:function(){switch(this.type){case 1:return draw2d.SnapToHelper.NORTH_WEST;case 2:return draw2d.SnapToHelper.NORTH;case 3:return draw2d.SnapToHelper.NORTH_EAST;case 4:return draw2d.SnapToHelper.EAST;case 5:return draw2d.SnapToHelper.SOUTH_EAST;case 6:return draw2d.SnapToHelper.SOUTH;case 7:return draw2d.SnapToHelper.SOUTH_WEST;case 8:return draw2d.SnapToHelper.WEST;case 9:return draw2d.SnapToHelper.NSEW;default:return draw2d.SnapToHelper.EAST}},createShapeElement:function(){var A=this._super();switch(this.type){case 1:A.attr({cursor:"nw-resize"});break;case 2:A.attr({cursor:"n-resize"});break;case 3:A.attr({cursor:"ne-resize"});break;case 4:A.attr({cursor:"e-resize"});break;case 5:A.attr({cursor:"se-resize"});break;case 6:A.attr({cursor:"s-resize"});break;case 7:A.attr({cursor:"sw-resize"});break;case 8:A.attr({cursor:"w-resize"});break}return A},onDragStart:function(){if(!this.isDraggable()){return false}this.ox=this.getAbsoluteX();this.oy=this.getAbsoluteY();this.commandMove=this.owner.createCommand(new draw2d.command.CommandType(draw2d.command.CommandType.MOVE));this.commandResize=this.owner.createCommand(new draw2d.command.CommandType(draw2d.command.CommandType.RESIZE));return true},onDrag:function(K,J){if(this.isDraggable()===false){return }var I=this.getAbsoluteX();var H=this.getAbsoluteY();this._super(K,J);var F=this.getAbsoluteX()-I;var D=this.getAbsoluteY()-H;var A=this.owner;var C=A.getAbsoluteX();var B=A.getAbsoluteY();var E=A.getWidth();var G=A.getHeight();switch(this.type){case 1:A.setDimension(E-F,G-D);A.setPosition(C+(E-A.getWidth()),B+(G-A.getHeight()));break;case 2:A.setDimension(E,G-D);A.setPosition(C,B+(G-A.getHeight()));break;case 3:A.setDimension(E+F,G-D);A.setPosition(C,B+(G-A.getHeight()));break;case 4:A.setDimension(E+F,G);break;case 5:A.setDimension(E+F,G+D);break;case 6:A.setDimension(E,G+D);break;case 7:A.setDimension(E-F,G+D);A.setPosition(C+(E-A.getWidth()),B);break;case 8:A.setDimension(E-F,G);A.setPosition(C+(E-A.getWidth()),B);break}},onDragEnd:function(){if(!this.isDraggable()){return }if(this.commandMove!==null){this.commandMove.setPosition(this.owner.getX(),this.owner.getY());this.canvas.getCommandStack().execute(this.commandMove);this.commandMove=null}if(this.commandResize!==null){this.commandResize.setDimension(this.owner.getWidth(),this.owner.getHeight());this.canvas.getCommandStack().execute(this.commandResize);this.commandResize=null}this.canvas.hideSnapToHelperLines()},setPosition:function(A,B){if(A instanceof draw2d.geo.Point){this.x=A.x;this.y=A.y}else{this.x=A;this.y=B}this.repaint()},setDimension:function(C,A){if(typeof A!=="undefined"){this._super(C,A)}else{if(draw2d.isTouchDevice){this._super(15,15)}else{this._super(8,8)}}var D=this.getWidth();var B=D/2;switch(this.type){case 1:this.setSnapToGridAnchor(new draw2d.geo.Point(D,D));break;case 2:this.setSnapToGridAnchor(new draw2d.geo.Point(B,D));break;case 3:this.setSnapToGridAnchor(new draw2d.geo.Point(0,D));break;case 4:this.setSnapToGridAnchor(new draw2d.geo.Point(0,B));break;case 5:this.setSnapToGridAnchor(new draw2d.geo.Point(0,0));break;case 6:this.setSnapToGridAnchor(new draw2d.geo.Point(B,0));break;case 7:this.setSnapToGridAnchor(new draw2d.geo.Point(D,0));break;case 8:this.setSnapToGridAnchor(new draw2d.geo.Point(D,B));break;case 9:this.setSnapToGridAnchor(new draw2d.geo.Point(B,B));break}},show:function(A){this.setCanvas(A);this.canvas.resizeHandles.add(this);this.shape.toFront()},hide:function(){if(this.shape===null){return }this.canvas.resizeHandles.remove(this);this.setCanvas(null)},repaint:function(A){if(this.repaintBlocked===true||this.shape===null){return }if(typeof A==="undefined"){A={}}if(this.getAlpha()<0.9){A.fill="#e6e6e8"}else{A.fill="90-#b8c8ec-#e6e6e8"}this._super(A)},supportsSnapToHelper:function(){return true},onKeyDown:function(B,A){this.canvas.onKeyDown(B,A)},fireMoveEvent:function(){}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/LineResizeHandle.js' */
(function ($) {draw2d.shape.basic.LineResizeHandle=draw2d.shape.basic.Circle.extend({NAME:"draw2d.shape.basic.LineResizeHandle",init:function(A){this._super();this.owner=A;this.isResizeHandle=true;if(draw2d.isTouchDevice){this.setDimension(14,14)}else{this.setDimension(7,7)}this.setBackgroundColor("#d04437");this.setColor("#d04437");this.setStroke(1);this.setSelectable(false);this.currentTarget=null},select:function(A){},unselect:function(){},getRelatedPort:function(){return null},getOppositePort:function(){return null},getOppositePortTo:function(A){return _.without([this.owner.getSource(),this.owner.getTarget()],A)[0]},repaint:function(A){if(this.repaintBlocked===true||this.shape===null){return }if(typeof A==="undefined"){A={}}if(!("fill" in A)){if(this.getAlpha()<0.9){A.fill="#d04437"}else{A.fill="r(.4,.3)#d04437:40-#d04437:60-#d04437"}}this._super(A)},onDragStart:function(){this.ox=this.x;this.oy=this.y;this.command=this.getCanvas().getCurrentSelection().createCommand(new draw2d.command.CommandType(draw2d.command.CommandType.MOVE_BASEPOINT));return true},onDrag:function(D,A){this.setPosition(this.ox+D,this.oy+A);var C=this.getRelatedPort();var B=this.getBoundingBox().getCenter();var E=(C!==null)?this._getDropTarget(B.x,B.y,C):null;if(E!==this.currentTarget&&E!==this.getOppositePortTo(C)){if(this.currentTarget!==null){this.currentTarget.onDragLeave(C);this.currentTarget.setGlow(false)}if(E!==null){this.currentTarget=E.onDragEnter(C);if(this.currentTarget!==null){this.currentTarget.setGlow(true)}}else{this.currentTarget=C}}else{if(this.currentTarget!==null){this.currentTarget.setGlow(true)}}return true},_getDropTarget:function(A,C,B){return B.getDropTarget(A,C)},onDragEnd:function(){if(!this.isDraggable()){return false}var A=this.getRelatedPort();if(A!==null){if(this.currentTarget!==null){this.onDrop(this.currentTarget);this.currentTarget.onDragLeave(A);this.currentTarget.setGlow(false);this.currentTarget=null}}if(this.getCanvas().getCurrentSelection() instanceof draw2d.Connection){if(this.command!==null){this.command.cancel()}}else{if(this.command!==null){this.getCanvas().getCommandStack().execute(this.command)}}this.command=null;this.getCanvas().hideSnapToHelperLines();return true},supportsSnapToHelper:function(){if(this.getCanvas().getCurrentSelection() instanceof draw2d.Connection){return false}return true},show:function(B,A,C){this.setCanvas(B);this.setPosition(A,C);this.shape.toFront();this.canvas.resizeHandles.add(this)},hide:function(){if(this.shape===null){return }this.canvas.resizeHandles.remove(this);this.setCanvas(null)},onKeyDown:function(B,A){this.canvas.onKeyDown(B,A)},fireMoveEvent:function(){}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/LineStartResizeHandle.js' */
(function ($) {draw2d.shape.basic.LineStartResizeHandle=draw2d.shape.basic.LineResizeHandle.extend({NAME:"draw2d.shape.basic.LineStartResizeHandle",init:function(A){this._super(A)},getRelatedPort:function(){if(this.owner instanceof draw2d.Connection){return this.owner.getSource()}return null},getOppositePort:function(){if(this.owner instanceof draw2d.Connection){return this.owner.getTarget()}return null},onDrag:function(D,A){var G=this.getX();var F=this.getY();this._super(D,A);var E=G-this.getX();var C=F-this.getY();var B=this.owner.getStartPoint();this.owner.setStartPoint(B.x-E,B.y-C);this.owner.isMoving=true;return true},onDrop:function(A){this.owner.isMoving=false;if(this.owner instanceof draw2d.Connection&&this.command!==null){this.command.setNewPorts(A,this.owner.getTarget());this.getCanvas().getCommandStack().execute(this.command)}this.command=null}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/LineEndResizeHandle.js' */
(function ($) {draw2d.shape.basic.LineEndResizeHandle=draw2d.shape.basic.LineResizeHandle.extend({NAME:"draw2d.shape.basic.LineEndResizeHandle",init:function(A){this._super(A)},getRelatedPort:function(){if(this.owner instanceof draw2d.Connection){return this.owner.getTarget()}return null},getOppositePort:function(){if(this.owner instanceof draw2d.Connection){return this.owner.getSource()}return null},onDrag:function(D,A){var G=this.getX();var F=this.getY();this._super(D,A);var E=G-this.getX();var C=F-this.getY();var B=this.owner.getEndPoint();this.owner.setEndPoint(B.x-E,B.y-C);this.owner.isMoving=true;this.detachMoveListener(this.owner);return true},onDrop:function(A){this.owner.isMoving=false;if(this.owner instanceof draw2d.Connection&&this.command!==null){this.command.setNewPorts(this.owner.getSource(),A);this.getCanvas().getCommandStack().execute(this.command)}this.command=null}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/Port.js' */
(function ($) {draw2d.Port=draw2d.shape.basic.Circle.extend({NAME:"draw2d.Port",DEFAULT_BORDER_COLOR:new draw2d.util.Color("#1B1B1B"),init:function(A){this.locator=null;this.lighterBgColor=null;this._super();if(draw2d.isTouchDevice){this.setDimension(25,25)}else{this.setDimension(10,10)}this.ox=this.x;this.oy=this.y;this.coronaWidth=5;this.corona=null;this.currentTargetPort=null;this.currentTarget=null;this.setBackgroundColor("#4f6870");this.setStroke(1);this.setColor(this.DEFAULT_BORDER_COLOR);this.setSelectable(false);if(typeof A==="undefined"){this.name=null}else{this.name=A}this.connectionAnchor=new draw2d.layout.anchor.ConnectionAnchor(this);this.value=null;this.maxFanOut=Number.MAX_VALUE;this.setCanSnapToHelper(false);this.installEditPolicy(new draw2d.policy.port.IntrusivePortsFeedbackPolicy())},setMaxFanOut:function(A){this.maxFanOut=Math.max(1,A);return this},getMaxFanOut:function(){return this.maxFanOut},setConnectionAnchor:function(A){if(typeof A==="undefined"||A===null){A=new draw2d.layout.anchor.ConnectionAnchor()}this.connectionAnchor=A;this.connectionAnchor.setOwner(this);return this},getConnectionAnchorLocation:function(A){return this.connectionAnchor.getLocation(A)},getConnectionAnchorReferencePoint:function(){return this.connectionAnchor.getReferencePoint()},getConnectionDirection:function(B,A){return this.getParent().getBoundingBox().getDirection(this.getAbsolutePosition())},setLocator:function(A){this.locator=A;return this},setBackgroundColor:function(A){this._super(A);this.lighterBgColor=this.bgColor.lighter(0.3).hash();return this},setValue:function(A){this.value=A;if(this.getParent()!==null){this.getParent().onPortValueChanged(this)}return this},getValue:function(){return this.value},repaint:function(A){if(this.repaintBlocked===true||this.shape===null){return }if(typeof A==="undefined"){A={}}A.cx=this.getAbsoluteX();A.cy=this.getAbsoluteY();A.rx=this.width/2;A.ry=A.rx;A.cursor="move";if(this.getAlpha()<0.9){A.fill=this.bgColor.hash()}else{A.fill=["90",this.bgColor.hash(),this.lighterBgColor].join("-")}this._super(A)},onMouseEnter:function(){this.setStroke(2)},onMouseLeave:function(){this.setStroke(1)},getConnections:function(){var A=new draw2d.util.ArrayList();var C=this.moveListener.getSize();for(var B=0;B<C;B++){var D=this.moveListener.get(B);if(D instanceof draw2d.Connection){A.add(D)}}return A},setParent:function(A){this._super(A);if(this.parent!==null){this.parent.detachMoveListener(this)}if(this.parent!==null){this.parent.attachMoveListener(this)}},getCoronaWidth:function(){return this.coronaWidth},setCoronaWidth:function(A){this.coronaWidth=A},onDragStart:function(){if(this.getConnections().getSize()>=this.maxFanOut){return false}this.getShapeElement().toFront();this.ox=this.x;this.oy=this.y;this.editPolicy.each($.proxy(function(A,B){if(B instanceof draw2d.policy.figure.DragDropEditPolicy){B.onDragStart(this.canvas,this)}},this));return true},onDrag:function(B,A){this.isInDragDrop=true;this._super(B,A);var C=this.getDropTarget(this.getAbsoluteX(),this.getAbsoluteY(),this);if(C!==this.currentTarget){if(this.currentTarget!==null){this.currentTarget.onDragLeave(this);this.editPolicy.each($.proxy(function(D,E){if(E instanceof draw2d.policy.port.PortFeedbackPolicy){E.onHoverLeave(this.canvas,this,this.currentTarget)}},this))}if(C!==null){this.currentTarget=C.onDragEnter(this);if(this.currentTarget!==null){this.currentTargetPort=C;this.editPolicy.each($.proxy(function(D,E){if(E instanceof draw2d.policy.port.PortFeedbackPolicy){E.onHoverEnter(this.canvas,this,this.currentTarget)}},this))}}else{this.currentTarget=null}}},onDragEnd:function(){this.setAlpha(1);this.setPosition(this.ox,this.oy);this.isInDragDrop=false;if(this.currentTarget){this.editPolicy.each($.proxy(function(A,B){if(B instanceof draw2d.policy.port.PortFeedbackPolicy){B.onHoverLeave(this.canvas,this,this.currentTarget)}},this))}this.editPolicy.each($.proxy(function(A,B){if(B instanceof draw2d.policy.figure.DragDropEditPolicy){B.onDragEnd(this.canvas,this)}},this));this.currentTarget=null},onDragEnter:function(B){if(!(B instanceof draw2d.Port)){return null}if(this.getConnections().getSize()>=this.maxFanOut){return null}var A=new draw2d.command.CommandType(draw2d.command.CommandType.CONNECT);A.canvas=this.parent.getCanvas();A.source=B;A.target=this;var C=this.createCommand(A);if(C===null){return null}return this},onDragLeave:function(A){if(!(A instanceof draw2d.Port)){return }},onDrop:function(C){if(!(C instanceof draw2d.Port)){return }var A=new draw2d.command.CommandType(draw2d.command.CommandType.CONNECT);A.canvas=this.parent.getCanvas();A.source=C;A.target=this;var B=this.createCommand(A);if(B!==null){this.parent.getCanvas().getCommandStack().execute(B)}this.setGlow(false)},onConnect:function(A){},onDisconnect:function(A){},onOtherFigureIsMoving:function(A){this.repaint();this.fireMoveEvent()},getName:function(){return this.name},setName:function(A){this.name=A},hitTest:function(B,F){var A=this.getAbsoluteX()-(this.coronaWidth*2)-this.getWidth()/2;var E=this.getAbsoluteY()-(this.coronaWidth*2)-this.getHeight()/2;var C=A+this.width+(this.coronaWidth*4);var D=E+this.height+(this.coronaWidth*4);return(B>=A&&B<=C&&F>=E&&F<=D)},setGlow:function(A){if(A===true&&this.corona===null){this.corona=new draw2d.Corona();this.corona.setDimension(this.getWidth()+(this.getCoronaWidth()*2),this.getWidth()+(this.getCoronaWidth()*2));this.corona.setPosition(this.getAbsoluteX()-this.getCoronaWidth()-this.getWidth()/2,this.getAbsoluteY()-this.getCoronaWidth()-this.getHeight()/2);this.corona.setCanvas(this.getCanvas());this.corona.getShapeElement();this.corona.repaint()}else{if(A===false&&this.corona!==null){this.corona.setCanvas(null);this.parent.getCanvas().removeFigure(this.corona);this.corona=null}}return this},createCommand:function(A){if(A.getPolicy()===draw2d.command.CommandType.MOVE){if(!this.isDraggable()){return null}return new draw2d.command.CommandMovePort(this)}if(A.getPolicy()===draw2d.command.CommandType.CONNECT){if(A.source.parent.id===A.target.parent.id){return null}else{return new draw2d.command.CommandConnect(A.canvas,A.source,A.target)}}return null},fireMoveEvent:function(){if(this.isInDragDrop===true){return }this._super()},getDropTarget:function(A,E,B){for(var C=0;C<this.targets.getSize();C++){var D=this.targets.get(C);if(D!==B){if(D.hitTest(A,E)===true){return D}}}return null},getDropTargets:function(){return this.targets.clone().grep($.proxy(function(A){return A!==this},this))}});draw2d.Corona=draw2d.shape.basic.Circle.extend({init:function(){this._super();this.setAlpha(0.3);this.setBackgroundColor(new draw2d.util.Color(178,225,255));this.setColor(new draw2d.util.Color(102,182,252))},setAlpha:function(A){this._super(Math.min(0.3,A));this.setDeleteable(false);this.setDraggable(false);this.setResizeable(false);this.setSelectable(false);return this}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/InputPort.js' */
(function ($) {draw2d.InputPort=draw2d.Port.extend({NAME:"draw2d.InputPort",init:function(A){this._super(A);this.locator=new draw2d.layout.locator.InputPortLocator()},onDragEnter:function(A){if(A instanceof draw2d.OutputPort){return this._super(A)}if(A instanceof draw2d.HybridPort){return this._super(A)}return null},onDragLeave:function(A){if(A instanceof draw2d.OutputPort){this._super(A)}else{if(A instanceof draw2d.HybridPort){this._super(A)}}},createCommand:function(A){if(A.getPolicy()===draw2d.command.CommandType.CONNECT){if(A.source.getParent().getId()===A.target.getParent().getId()){return null}if(A.source instanceof draw2d.OutputPort){return new draw2d.command.CommandConnect(A.canvas,A.source,A.target)}if(A.source instanceof draw2d.HybridPort){return new draw2d.command.CommandConnect(A.canvas,A.source,A.target)}return null}return this._super(A)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/OutputPort.js' */
(function ($) {draw2d.OutputPort=draw2d.Port.extend({NAME:"draw2d.OutputPort",init:function(A){this._super(A);this.locator=new draw2d.layout.locator.OutputPortLocator()},onDragEnter:function(A){if(A instanceof draw2d.InputPort){return this._super(A)}if(A instanceof draw2d.HybridPort){return this._super(A)}return null},onDragLeave:function(A){if(A instanceof draw2d.InputPort){this._super(A)}else{if(A instanceof draw2d.HybridPort){this._super(A)}}},createCommand:function(A){if(A.getPolicy()===draw2d.command.CommandType.CONNECT){if(A.source.getParent().getId()===A.target.getParent().getId()){return null}if(A.source instanceof draw2d.InputPort){return new draw2d.command.CommandConnect(A.canvas,A.target,A.source)}if(A.source instanceof draw2d.HybridPort){return new draw2d.command.CommandConnect(A.canvas,A.target,A.source)}return null}return this._super(A)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/HybridPort.js' */
(function ($) {draw2d.HybridPort=draw2d.Port.extend({NAME:"draw2d.HybridPort",init:function(A){this._super(A);this.locator=new draw2d.layout.locator.InputPortLocator()},onDragEnter:function(A){if(A instanceof draw2d.Port){return this._super(A)}return null},onDragLeave:function(A){if(!(A instanceof draw2d.Port)){return }if(A instanceof draw2d.Port){this._super(A)}},createCommand:function(A){if(A.getPolicy()===draw2d.command.CommandType.CONNECT){if(A.source instanceof draw2d.InputPort){return new draw2d.command.CommandConnect(A.canvas,A.target,A.source)}else{if(A.source instanceof draw2d.OutputPort){return new draw2d.command.CommandConnect(A.canvas,A.source,A.target)}else{if(A.source instanceof draw2d.HybridPort){return new draw2d.command.CommandConnect(A.canvas,A.target,A.source)}}}return null}return this._super(A)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/layout/anchor/ConnectionAnchor.js' */
(function ($) {draw2d.layout.anchor.ConnectionAnchor=Class.extend({NAME:"draw2d.layout.anchor.ConnectionAnchor",init:function(A){this.owner=A},getLocation:function(A){return this.getReferencePoint()},getOwner:function(){return this.owner},setOwner:function(A){if(typeof A==="undefined"){throw"Missing parameter for 'owner' in ConnectionAnchor.setOwner"}this.owner=A},getBox:function(){return this.getOwner().getAbsoluteBounds()},getReferencePoint:function(){return this.getOwner().getAbsolutePosition()}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/layout/anchor/ChopboxConnectionAnchor.js' */
(function ($) {draw2d.layout.anchor.ChopboxConnectionAnchor=draw2d.layout.anchor.ConnectionAnchor.extend({NAME:"draw2d.layout.anchor.ChopboxConnectionAnchor",init:function(A){this._super(A)},getLocation:function(B){var E=new draw2d.geo.Rectangle(0,0);E.setBounds(this.getBox());E.translate(-1,-1);E.resize(1,1);var A=E.getCenter();if(E.isEmpty()||(B.x==A.x&&B.y==A.y)){return A}var D=B.x-A.x;var C=B.y-A.y;var F=0.5/Math.max(Math.abs(D)/E.w,Math.abs(C)/E.h);D*=F;C*=F;A.translate(D,C);return A},getBox:function(){return this.getOwner().getParent().getBoundingBox()},getReferencePoint:function(){return this.getBox().getCenter()}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/layout/anchor/ShortesPathConnectionAnchor.js' */
(function ($) {draw2d.layout.anchor.ShortesPathConnectionAnchor=draw2d.layout.anchor.ConnectionAnchor.extend({NAME:"draw2d.layout.anchor.ShortesPathConnectionAnchor",init:function(A){this._super(A)},getLocation:function(E){var D=this.getOwner().getParent().getBoundingBox();var B=D.getCenter();if(this.getOwner().getParent() instanceof draw2d.shape.basic.Oval){var A=this.getOwner().getParent().intersectionWithLine(E,B);if(A.getSize()==1){return A.get(0)}}var C=D.determineOctant(new draw2d.geo.Rectangle(E.x,E.y,2,2));switch(C){case 0:return D.getTopLeft();case 1:return new draw2d.geo.Point(E.x,D.getTop());case 2:return D.getTopRight();case 3:return new draw2d.geo.Point(D.getRight(),E.y);case 4:return D.getBottomRight();case 5:return new draw2d.geo.Point(E.x,D.getBottom());case 6:return D.getBottomLeft();case 7:return new draw2d.geo.Point(D.getLeft(),E.y)}return D.getTopLeft()},getBox:function(){return this.getOwner().getParent().getBoundingBox()},getReferencePoint:function(){return this.getBox().getCenter()}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/layout/anchor/CenterEdgeConnectionAnchor.js' */
(function ($) {draw2d.layout.anchor.CenterEdgeConnectionAnchor=draw2d.layout.anchor.ConnectionAnchor.extend({NAME:"draw2d.layout.anchor.CenterEdgeConnectionAnchor",init:function(A){this._super(A)},getLocation:function(D){var C=this.getOwner().getParent().getBoundingBox();var B=C.getDirection(D);var A=C.getCenter();switch(B){case 0:A.y=C.y;break;case 1:A.x=C.x+C.w;break;case 2:A.y=C.y+C.h;break;case 3:A.x=C.x}return A},getBox:function(){return this.getOwner().getParent().getBoundingBox()},getReferencePoint:function(){return this.getBox().getCenter()}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/arrow/CalligrapherArrowLeft.js' */
(function ($) {draw2d.shape.arrow.CalligrapherArrowLeft=draw2d.SVGFigure.extend({NAME:"draw2d.shape.arrow.CalligrapherArrowLeft",init:function(){this._super()},getSVG:function(){return'<svg width="230" height="60" xmlns="http://www.w3.org/2000/svg" version="1.1">  <path style="fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path3024" d="m 218.87943,27.464763 c -1.21088,-0.0563 -2.42064,-0.14616 -3.63262,-0.16893 c -5.82495,-0.10948 -18.61676,-0.0226 -22.97385,0.0122 c -7.12848,0.057 -14.25673,0.14021 -21.38495,0.22333 c -9.03765,0.10539 -18.07511,0.22813 -27.11266,0.3422 c -10.2269,0.11878 -20.4538,0.23756 -30.6807,0.35634 c -35.488759,0.4089 -70.975849,0.82793 -106.4669238,0.95195 c 0,0 7.9718628,-5.70244 7.9718628,-5.70244 l 0,0 c 6.374241,0.28694 12.745594,0.64561 19.122722,0.86083 c 28.09499,0.94816 56.21338,0.92473 84.315959,0.32205 c 10.51273,-0.32805 21.0288,-0.56402 31.53819,-0.98412 c 27.47361,-1.09824 54.91405,-2.91665 82.28177,-5.53697 c 0,0 -12.9788,9.32351 -12.9788,9.32351 z" inkscape:connector-curvature="0" />  <path style="fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path3026" d="m 100.75066,1.6309831 c -7.165239,3.9571 -14.284929,7.47866 -22.036659,10.2707299 c -5.00195,1.80163 -10.10374,3.31886 -15.2402,4.79424 c -8.25878,2.37815 -16.55626,4.65805 -24.9012,6.79479 c -2.89107,0.71593 -5.74687,1.56407 -8.66266,2.20424 c -3.211679,0.70512 -6.49468,1.17333 -9.752959,1.6747 c -5.447101,0.92112 -10.9044008,1.81762 -16.3983488,2.50082 c -1.608931,0.0814 -0.850754,0.10697 -2.275834,-0.0365 C 20.004071,21.041553 19.256899,21.517873 32.515691,19.216243 c 6.21537,-1.05913 12.34875,-2.37668 18.3945,-4.03234 c 8.12719,-2.02803 16.23765,-4.1157 24.26421,-6.4321199 c 5.23574,-1.55053 10.41682,-3.15473 15.46857,-5.12875 c 1.38953,-0.54295 2.7579,-1.12682 4.12253,-1.71603 c 0.98421,-0.42496 3.86537,-1.81801999 2.92296,-1.32600999 C 93.642191,2.6934931 89.529511,4.7073031 85.450031,6.7704531 l 15.300629,-5.1394 z" inkscape:connector-curvature="0" sodipodi:nodetypes="csccsccccccsssccc" />  <path style="fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path3028" d="m 80.764281,58.068863 c -2.45498,-3.50762 -6.58178,-6.10525 -10.40324,-8.66732 c -4.30614,-2.72676 -7.93958,-6.28283 -12.6021,-8.28702 c -7.39912,-4.50257 -11.70055,-7.85592 -20.85866,-9.23429 c -4.9257,-0.85706 -17.294247,-1.32043 -22.226462,-2.15427 c -3.445882,-0.42869 -6.2035918,0.70541 -9.6845138,0.57715 c -1.496337,-0.0586 -2.99355,-0.0965 -4.491229,-0.12472 l 13.9525278,-6.24562 l 3.25,-1.17153 c 1.441459,0.0813 -1.116338,0.15309 0.325505,0.23016 c 3.574557,0.17902 7.211864,0.0695 10.712655,0.73822 c 4.723107,1.08097 9.443947,2.1624 14.234177,3.05317 c 2.76739,0.64203 3.92627,0.87082 6.64127,1.66289 c 4.42146,1.28993 8.60075,3.01513 12.86503,4.58129 c 1.90199,0.73446 5.05193,1.93181 6.89302,2.7216 c 4.92005,2.11061 9.5916,4.57045 13.9716,7.31023 c 4.16708,2.62011 8.48023,5.20033 11.72012,8.56863 z" inkscape:connector-curvature="0" sodipodi:nodetypes="ccccccccccccscsccc" /></svg>'},repaint:function(A){if(this.repaintBlocked===true||this.shape===null){return }if(this.svgNodes!==null){this.svgNodes.attr({fill:this.color.hash()})}this._super(A)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/arrow/CalligrapherArrowDownLeft.js' */
(function ($) {draw2d.shape.arrow.CalligrapherArrowDownLeft=draw2d.SVGFigure.extend({NAME:"draw2d.shape.arrow.CalligrapherArrowDownLeft",init:function(){this._super()},getSVG:function(){return'<svg width="180" height="300" xmlns="http://www.w3.org/2000/svg" version="1.1">     <path style="fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path3084" d="m 159.63578,17.846597 c 0.43137,9.44641 -0.0636,18.88035 -0.8284,28.30165 c -1.73211,18.38336 -4.05381,36.71698 -6.08253,55.075313 c -1.61738,13.7075 -3.03402,27.43467 -3.97611,41.19113 c -1.09101,11.16584 -1.31019,22.36559 -1.28541,33.56466 c -0.1328,4.82188 0.3218,9.6468 0.14332,14.46812 c -0.0888,2.39977 -0.28315,3.73625 -0.55012,6.12095 c -0.85848,4.73147 -2.27416,9.40019 -4.7769,13.68272 c -1.47003,2.51544 -3.78493,5.6647 -5.47739,8.05048 c -5.02888,6.66256 -11.08555,12.65652 -18.10552,17.75963 c -4.23302,3.07716 -7.74942,5.12065 -12.22081,7.86298 c -13.253319,6.72606 -25.889792,15.11686 -40.84124,18.60576 c -3.016829,0.7039 -4.431417,0.8157 -7.450859,1.2076 c -6.983246,0.5774 -14.009174,0.3375 -21.010676,0.2509 c -3.278795,-0.033 -6.55749,0.01 -9.835897,0.045 c 0,0 20.838833,-13.2364 20.838833,-13.2364 l 0,0 c 3.147056,0.093 6.294483,0.1852 9.443646,0.2007 c 6.966697,0.011 13.971433,0.1301 20.897176,-0.6344 c 3.732439,-0.5577 7.321215,-1.2431 10.881203,-2.4145 c 1.517208,-0.4992 5.830867,-2.43339 4.487902,-1.6386 c -6.098183,3.6088 -25.104875,12.8748 -9.52514,5.223 c 4.40875,-2.5927 8.262057,-4.7459 12.425175,-7.65986 c 6.839117,-4.78709 12.633657,-10.50427 17.500607,-16.86761 c 2.53518,-3.56692 5.24684,-7.12748 7.07617,-11.03446 c 1.42357,-3.0404 2.21532,-6.28727 2.91146,-9.50152 c 0.91919,-6.88822 1.03991,-13.81392 1.25118,-20.74151 c 0.47683,-11.27871 0.96259,-22.55877 1.61689,-33.83062 c 1.21127,-14.03392 3.64191,-27.94339 5.46543,-41.92167 c 2.26899,-18.186603 4.6835,-36.384373 5.4487,-54.679643 c 0.0788,-2.46092 0.23808,-4.92087 0.23618,-7.38276 c -0.005,-6.45916 -0.62194,-13.00218 -2.13821,-19.32664 c 0,0 23.48134,-10.73998 23.48134,-10.73998 z" inkscape:connector-curvature="0" />     <path style="fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path3086" d="m 41.271518,252.40239 c 2.465518,-0.7264 4.879503,-1.7726 7.145328,-2.9859 c 0.955597,-0.5117 3.736822,-2.1986 2.791991,-1.6673 c -5.218817,2.9348 -10.409826,5.9187 -15.61474,8.878 c 5.366557,-3.4898 10.227818,-7.6685 14.119927,-12.75576 c 3.507157,-5.09382 4.097613,-11.17122 4.301158,-17.17644 c 0.02635,-3.95844 -0.31227,-7.90612 -0.635377,-11.84752 c 0,0 19.920693,-10.3059 19.920693,-10.3059 l 0,0 c 0.171761,4.05015 0.409899,8.09777 0.50079,12.15101 c -0.185739,6.23619 -0.347804,12.66862 -3.492579,18.24747 c -0.503375,0.75197 -0.961922,1.53596 -1.510126,2.25591 c -3.478528,4.56826 -8.226837,8.04586 -12.757403,11.47443 c -7.345206,4.3297 -14.671333,8.692 -22.035619,12.9891 c -3.551305,2.0723 -7.368692,3.8726 -11.394645,4.7773 c 0,0 18.660602,-14.0344 18.660602,-14.0344 z" inkscape:connector-curvature="0" />     <path style="fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path3088" d="m 37.815923,255.49919 c 3.41111,0.1581 6.814569,0.2213 10.182693,0.8184 c 6.92998,2.6928 13.533527,6.2357 20.043462,9.8162 c 3.912139,2.1362 7.91195,4.4644 10.690321,8.0298 c 1.039962,1.2802 1.510411,2.7604 1.893523,4.3313 c 0,0 -20.370847,10.9259 -20.370847,10.9259 l 0,0 c -0.225419,-1.2711 -0.55067,-2.4558 -1.329618,-3.5184 c -2.332229,-3.3633 -5.869056,-5.6279 -9.247191,-7.8233 c -6.335066,-3.7106 -12.98611,-7.1834 -20.232784,-8.6836 c -3.497247,-0.3814 -7.011372,-0.4307 -10.521829,-0.1703 c 0,0 18.89227,-13.726 18.89227,-13.726 z" inkscape:connector-curvature="0" /></svg>'},repaint:function(A){if(this.repaintBlocked===true||this.shape===null){return }if(this.svgNodes!==null){this.svgNodes.attr({fill:this.color.hash()})}this._super(A)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/node/Start.js' */
(function ($) {draw2d.shape.node.Start=draw2d.shape.basic.Rectangle.extend({NAME:"draw2d.shape.node.Start",DEFAULT_COLOR:new draw2d.util.Color("#4D90FE"),init:function(){this._super();this.createPort("output");this.setDimension(50,50);this.setBackgroundColor(this.DEFAULT_COLOR);this.setColor(this.DEFAULT_COLOR.darker())}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/node/End.js' */
(function ($) {draw2d.shape.node.End=draw2d.shape.basic.Rectangle.extend({NAME:"draw2d.shape.node.End",DEFAULT_COLOR:new draw2d.util.Color("#4D90FE"),init:function(){this._super();this.createPort("input");this.setDimension(50,50);this.setBackgroundColor(this.DEFAULT_COLOR);this.setColor(this.DEFAULT_COLOR.darker())}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/node/Between.js' */
(function ($) {draw2d.shape.node.Between=draw2d.shape.basic.Rectangle.extend({NAME:"draw2d.shape.node.Between",DEFAULT_COLOR:new draw2d.util.Color("#4D90FE"),init:function(){this._super();this.setDimension(50,50);this.setBackgroundColor(this.DEFAULT_COLOR);this.setColor(this.DEFAULT_COLOR.darker());this.createPort("output");this.createPort("input")}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/note/PostIt.js' */
(function ($) {draw2d.shape.note.PostIt=draw2d.shape.basic.Label.extend({NAME:"draw2d.shape.note.PostIt",init:function(A){this._super(A);this.setStroke(1);this.setBackgroundColor("#5b5b5b");this.setColor("#FFFFFF");this.setFontColor("#ffffff");this.setFontSize(14);this.setPadding(5);this.setRadius(5)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/widget/Widget.js' */
(function ($) {draw2d.shape.widget.Widget=draw2d.SetFigure.extend({init:function(B,A){this._super(B,A)},getWidth:function(){return this.width},getHeight:function(){return this.height}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/widget/Slider.js' */
(function ($) {draw2d.shape.widget.Slider=draw2d.shape.widget.Widget.extend({NAME:"draw2d.shape.widget.Slider",DEFAULT_COLOR_THUMB:new draw2d.util.Color("#bddf69"),DEFAULT_COLOR_BG:new draw2d.util.Color("#d3d3d3"),init:function(B,A){if(typeof B==="undefined"){B=120;A=15}this.currentValue=0;this.slideBoundingBox=new draw2d.geo.Rectangle(0,0,10,20);this._super(B,A);this.setBackgroundColor(this.DEFAULT_COLOR_BG);this.setColor(this.DEFAULT_COLOR_THUMB);this.setStroke(1);this.setRadius(4);this.setResizeable(true);this.setMinHeight(10);this.setMinWidth(80)},createSet:function(){var A=this.canvas.paper.set();var B=this.canvas.paper.rect(5,5,10,20);B.node.style.cursor="col-resize";A.push(B);return A},setDimension:function(A,B){this._super(A,B);this.slideBoundingBox.setBoundary(0,0,this.getWidth()-10,this.getHeight());this.slideBoundingBox.setHeight(this.getHeight()+1);this.repaint()},onValueChange:function(A){},onDragStart:function(B,A){if(this.slideBoundingBox.hitTest(B,A)){this.origX=this.slideBoundingBox.getX();this.origY=this.slideBoundingBox.getY();return false}return this._super(B,A)},onPanning:function(B,A){this.slideBoundingBox.setPosition(this.origX+B,this.origY+A);this.setValue(100/(this.slideBoundingBox.bw-this.slideBoundingBox.getWidth())*this.slideBoundingBox.getX())},setValue:function(A){this.currentValue=Math.min(Math.max(0,(A|0)),100);this.repaint();this.onValueChange(this.currentValue)},repaint:function(B){if(this.repaintBlocked===true||this.shape===null){return }if(typeof B==="undefined"){B={}}var C=((this.slideBoundingBox.bw-this.slideBoundingBox.getWidth())/100*this.currentValue)|0;this.slideBoundingBox.setX(C);if(this.svgNodes!==null){var A=this.slideBoundingBox.toJSON();A.y=A.y-5;A.height=A.height+10;A.fill=this.getColor().hash();A.stroke=this.getColor().darker(0.2).hash();A.r=4;this.svgNodes.attr(A)}B.fill="90-"+this.bgColor.hash()+":5-"+this.bgColor.lighter(0.3).hash()+":95";B.stroke=this.bgColor.darker(0.1).hash();this._super(B)},applyTransformation:function(){this.svgNodes.transform("T"+this.getAbsoluteX()+","+this.getAbsoluteY())}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/diagram/Diagram.js' */
(function ($) {draw2d.shape.diagram.Diagram=draw2d.SetFigure.extend({init:function(B,A){this.data=[];this.padding=5;this.cache={};this._super(B,A);this.setBackgroundColor("#8dabf2");this.setStroke(1);this.setColor("#f0f0f0");this.setRadius(2);this.setResizeable(true)},setData:function(A){this.data=A;this.cache={};if(this.svgNodes!==null){this.svgNodes.remove();this.svgNodes=this.createSet()}this.repaint()},setDimension:function(A,B){this.cache={};this._super(A,B)},getWidth:function(){return this.width},getHeight:function(){return this.height},repaint:function(A){if(this.repaintBlocked===true||this.shape==null){return }if(typeof A==="undefined"){A={}}if(typeof A.fill==="undefined"){A.fill="none"}this._super(A)},applyTransformation:function(){if(this.isResizeable()===true){this.svgNodes.transform("S"+this.scaleX+","+this.scaleY+","+this.getAbsoluteX()+","+this.getAbsoluteY()+"t"+this.getAbsoluteX()+","+this.getAbsoluteY())}else{this.svgNodes.transform("T"+this.getAbsoluteX()+","+this.getAbsoluteY())}}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/diagram/Pie.js' */
(function ($) {draw2d.shape.diagram.Pie=draw2d.shape.diagram.Diagram.extend({COLORS:["#00A8F0","#b9dd69","#f3546a","#4DA74D","#9440ED"],TWO_PI:Math.PI*2,init:function(A){this._super(A,A);this.setStroke(0)},setData:function(B){this.sum=0;$.each(B,$.proxy(function(C,D){this.sum+=D},this));var A=1/this.sum;$.each(B,$.proxy(function(C,D){B[C]=A*D},this));this._super(B)},createSet:function(){var A=this.getWidth()/2;var F=this.data.length;var C=this.canvas.paper.set();var H=0;for(var E=0;E<F;E++){var G=this.TWO_PI*this.data[E];var D=this.COLORS[E%F];var B=this.drawSegment(A,G,H,0.1);B.attr({stroke:this.color.hash(),fill:D});C.push(B);H+=G}return C},setDimension:function(A,B){if(A>B){this._super(A,A)}else{this._super(B,B)}if(this.svgNodes!==null){this.svgNodes.remove();this.svgNodes=this.createSet()}this.repaint()},polarPath:function(B,D,C){var A,E;A=B*Math.cos(D+C)+B;E=B*Math.sin(D+C)+B;return"L "+A+" "+E+" "},drawSegment:function(A,E,D,B){var F="M "+A+" "+A;for(var C=0;C<E;C+=B){F+=this.polarPath(A,C,D)}F+=this.polarPath(A,E,D);F+="L "+A+" "+A;return this.getCanvas().paper.path(F)},applyTransformation:function(){this.svgNodes.transform("T"+this.getAbsoluteX()+","+this.getAbsoluteY())}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/diagram/Sparkline.js' */
(function ($) {draw2d.shape.diagram.Sparkline=draw2d.shape.diagram.Diagram.extend({init:function(B,A){this.min=0;this.max=10;if(typeof B==="undefined"){B=180;A=50}this._super(B,A)},setData:function(A){this.min=Math.min.apply(Math,A);this.max=Math.max.apply(Math,A);if(this.max==this.min){this.max=this.min+1}this._super(A)},createSet:function(){return this.canvas.paper.path("M0 0 l0 0")},repaint:function(E){if(this.repaintBlocked===true||this.shape===null){return }if(typeof E==="undefined"){E={}}E.fill="90-#000:5-#4d4d4d:95";var H=this.padding;var A=this.getWidth()-2*+this.padding;var I=this.getHeight()-2*+this.padding;var C=this.data.length;var D=this.min;var G=this.max;var B=function(L,J){var K=1;if(C>1){K=(A/(C-1))}return{y:-((L-D)/(G-D)*I)+I+H,x:H+J*K}};if(this.svgNodes!==null&&(typeof this.cache.pathString==="undefined")){var F=null;$.each(this.data,$.proxy(function(J,K){var L=B(K,J);if(F===null){this.cache.pathString=["M",L.x,L.y].join(" ")}else{this.cache.pathString=[this.cache.pathString,"L",L.x,L.y].join(" ")}F=L},this));this.svgNodes.attr({path:this.cache.pathString,stroke:"#f0f0f0"})}this._super(E)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/analog/OpAmp.js' */
(function ($) {draw2d.shape.analog.OpAmp=draw2d.SVGFigure.extend({NAME:"draw2d.shape.analog.OpAmp",MyInputPortLocator:draw2d.layout.locator.PortLocator.extend({init:function(){this._super()},relocate:function(C,B){var D=B.getParent();var A=(8+18.5*C)*D.scaleY;this.applyConsiderRotation(B,1,A)}}),init:function(B,A){if(typeof B==="undefined"){B=50;A=50}this._super(B,A);this.inputLocator=new this.MyInputPortLocator();this.createPort("input",this.inputLocator);this.createPort("input",this.inputLocator);this.createPort("output");this.setBackgroundColor("#f0f0ff")},getSVG:function(){return'<svg xmlns="http://www.w3.org/2000/svg" version="1.1"><path d="m8.2627,0l0,35.36035l31.23926,-17.76025l-31.23926,-17.60011l0,0l0,0.00001zm2.27832,27.36719l4.08105,0m-2.10449,-2.20703l0,4.27979m2.26367,-21.35938l-4.15918,0"  stroke="#1B1B1B" fill="none"/><line x1="0.53516"  y1="8"  x2="8.21191"  y2="8"  stroke="#010101"/><line x1="39.14941" y1="18" x2="45.81055" y2="18" stroke="#010101" /><line x1="0.53516"  y1="27" x2="8.21191"  y2="27" stroke="#010101" /></svg>'},repaint:function(A){if(this.repaintBlocked===true||this.shape===null){return }if(typeof A==="undefined"){A={}}A.fill="none";if(this.bgColor!=null){this.svgNodes[0].attr({fill:this.bgColor.hash()})}this._super(A)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/analog/ResistorBridge.js' */
(function ($) {draw2d.shape.analog.ResistorBridge=draw2d.SVGFigure.extend({NAME:"draw2d.shape.analog.ResistorBridge",MyInputPortLocator:draw2d.layout.locator.PortLocator.extend({init:function(){this._super()},relocate:function(C,A){var B=A.getParent().getWidth();var D=A.getParent().getHeight();this.applyConsiderRotation(A,B/2+1,D*C)}}),MyOutputPortLocator:draw2d.layout.locator.PortLocator.extend({init:function(){this._super()},relocate:function(C,A){var B=A.getParent().getWidth();var D=A.getParent().getHeight();this.applyConsiderRotation(A,B*(C-2),D/2)}}),init:function(B,A){if(typeof B==="undefined"){B=50;A=50}this._super(B,A);this.inputLocator=new this.MyInputPortLocator();this.outputLocator=new this.MyOutputPortLocator();this.createPort("hybrid",this.inputLocator);this.createPort("hybrid",this.inputLocator);this.createPort("hybrid",this.outputLocator);this.createPort("hybrid",this.outputLocator)},getSVG:function(){return'<svg  xmlns="http://www.w3.org/2000/svg" version="1.1"><path fill="#010101" stroke="#010101" stroke-miterlimit="14.3" id="path12322" d="m47.62207,22.71094l0,0c0.73145,0.73242 0.71777,1.93359 -0.03027,2.68164c-0.74805,0.74951 -1.94922,0.76123 -2.68073,0.0293c-0.73138,-0.73242 -0.71967,-1.93211 0.03033,-2.68115c0.74707,-0.74803 1.94727,-0.76219 2.68066,-0.02979l0,0z"/><path fill="#010101" stroke="#010101" stroke-miterlimit="14.3" id="path12324" d="m25.84082,0.93115l0,0c0.73145,0.73096 0.71875,1.93359 -0.02832,2.68066c-0.75,0.74951 -1.94922,0.76123 -2.68164,0.0293c-0.73242,-0.73241 -0.71973,-1.93164 0.0293,-2.68065c0.74805,-0.74756 1.94922,-0.76172 2.68066,-0.0293l0,0l0,-0.00002z"/><path fill="#010101" stroke="#010101" stroke-miterlimit="14.3" id="path12326" d="m25.75098,44.58203l0,0c0.73145,0.73193 0.71875,1.93311 -0.02832,2.68115c-0.75,0.74902 -1.94922,0.76074 -2.68262,0.0293c-0.73145,-0.73193 -0.71973,-1.93262 0.03033,-2.68164c0.74707,-0.74756 1.94922,-0.76123 2.68066,-0.02879l0,0l-0.00006,-0.00002z"/><path fill="#010101" stroke="#010101" stroke-miterlimit="14.3" id="path12328" d="m3.9707,22.80127l0,0c0.73242,0.73193 0.71777,1.93359 -0.0293,2.68115c-0.74902,0.74951 -1.94922,0.76172 -2.68164,0.0293c-0.73145,-0.73242 -0.71973,-1.93164 0.03027,-2.68115c0.74707,-0.74707 1.94922,-0.76074 2.68066,-0.0293l0,0z"/><polyline fill="none" stroke="#010101" id="polyline12334" points="24.908203125,45.49267578125 31.71875,38.68310546875 31.2119140625,36.98876953125 34.892578125,37.95703125 33.953125,34.22265625 37.6650390625,35.18359375 36.6767578125,31.52490234375 40.3759765625,32.47314453125 39.873046875,30.52783203125 45.884765625,24.51708984375 " stroke-miterlimit="14.3"/><polyline fill="#010101" id="polyline12338" points="36.3408203125,23.98876953125 38.146484375,29.55810546875 33.630859375,29.55810546875 35.435546875,23.98779296875 "/><line fill="none" stroke="#010101" id="line12340" y2="28.90967" x2="35.8877" y1="41.13428" x1="35.88867" stroke-miterlimit="14.3"/><polyline fill="none" stroke="#010101" id="polyline12346" points="3.2109375,23.79248046875 10.01953125,16.98388671875 9.513671875,15.2890625 13.193359375,16.25732421875 12.251953125,12.5234375 15.9658203125,13.48486328125 14.9775390625,9.82568359375 18.6767578125,10.7734375 18.173828125,8.82958984375 24.185546875,2.81787109375 " stroke-miterlimit="14.3"/><polyline fill="#010101" id="polyline12350" points="13.126953125,23.80419921875 11.3212890625,18.236328125 15.8369140625,18.236328125 14.0322265625,23.806640625 "/><line fill="none" stroke="#010101" id="line12352" y2="18.8833" x2="13.58008" y1="6.65967" x1="13.5791" stroke-miterlimit="14.3"/><polyline fill="none" stroke="#010101" id="polyline12358" points="46.65625,24.33642578125 39.84765625,17.52783203125 38.154296875,18.033203125 39.1220703125,14.353515625 35.3876953125,15.29345703125 36.34765625,11.58056640625 32.689453125,12.56884765625 33.6376953125,8.86865234375 31.6923828125,9.373046875 24.322265625,2.00341796875 " stroke-miterlimit="14.3"/><polyline fill="#010101" id="polyline12362" points="36.578125,1.87109375 38.3828125,7.439453125 33.8681640625,7.439453125 35.6728515625,1.869140625 "/><line fill="none" stroke="#010101" id="line12364" y2="6.7915" x2="36.125" y1="19.01758" x1="36.125" stroke-miterlimit="14.3"/><polyline fill="none" stroke="#010101" id="polyline12370" points="24.494140625,46.49951171875 17.685546875,39.69091796875 15.9921875,40.1953125 16.958984375,36.515625 13.2265625,37.45556640625 14.185546875,33.7421875 10.52734375,34.73193359375 11.474609375,31.03125 9.529296875,31.53515625 2.1611328125,24.166015625 " stroke-miterlimit="14.3"/><polyline fill="#010101" id="polyline12374" points="12.150390625,44.80029296875 10.34765625,39.23193359375 14.861328125,39.23095703125 13.0556640625,44.80224609375 "/><line fill="none" stroke="#010101" id="line12376" y2="39.87891" x2="12.60352" y1="27.6543" x1="12.60352" stroke-miterlimit="14.3"/></svg>'}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/analog/ResistorVertical.js' */
(function ($) {draw2d.shape.analog.ResistorVertical=draw2d.SetFigure.extend({NAME:"draw2d.shape.analog.ResistorVertical",MyInputPortLocator:draw2d.layout.locator.PortLocator.extend({init:function(){this._super()},relocate:function(C,A){var B=A.getParent().getWidth();var D=A.getParent().getHeight();this.applyConsiderRotation(A,B/2,D)}}),MyOutputPortLocator:draw2d.layout.locator.PortLocator.extend({init:function(){this._super()},relocate:function(C,A){var B=A.getParent().getWidth();this.applyConsiderRotation(A,B/2,0)}}),init:function(B,A){if(typeof B==="undefined"){B=30;A=50}this._super(B,A);this.inputLocator=new this.MyInputPortLocator();this.outputLocator=new this.MyOutputPortLocator();this.createPort("hybrid",this.inputLocator);this.createPort("hybrid",this.outputLocator)},createSet:function(){var A=this._super();A.push(this.canvas.paper.path("M15,0 L15,5 L0,7.5 L30,10 L0,15 L30,20 L0,25 L30,30 L15,32.5 L15,40"));return A}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/analog/VoltageSupplyHorizontal.js' */
(function ($) {draw2d.shape.analog.VoltageSupplyHorizontal=draw2d.SVGFigure.extend({NAME:"draw2d.shape.analog.VoltageSupplyHorizontal",MyInputPortLocator:draw2d.layout.locator.PortLocator.extend({init:function(){this._super()},relocate:function(B,A){var C=A.getParent().getHeight();this.applyConsiderRotation(A,0,C/2)}}),MyOutputPortLocator:draw2d.layout.locator.PortLocator.extend({init:function(){this._super()},relocate:function(C,A){var B=A.getParent().getWidth();var D=A.getParent().getHeight();this.applyConsiderRotation(A,B,D/2)}}),init:function(B,A){if(typeof B==="undefined"){B=50;A=30}this._super(B,A);this.createPort("hybrid",new this.MyInputPortLocator());this.createPort("hybrid",new this.MyOutputPortLocator())},getSVG:function(){return'<svg width="49" height="28" xmlns="http://www.w3.org/2000/svg" version="1.1"><path d="m24.99933,18.95592l0,-9.54576m-5.78374,-9.40907l0,28.35939m-5.78718,-9.40457l0,-9.54576m-5.78374,-9.40907l0,28.35939" id="path10566" stroke-miterlimit="14.3" stroke="#010101" fill="none"/><path d="m26.79878,14.13039l6.90583,0m-33.22691,0l6.90583,0" id="path10568" stroke-miterlimit="14.3" stroke-linecap="square" stroke="#010101" fill="none"/></svg>'}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/analog/VoltageSupplyVertical.js' */
(function ($) {draw2d.shape.analog.VoltageSupplyVertical=draw2d.SVGFigure.extend({NAME:"draw2d.shape.analog.VoltageSupplyVertical",MyInputPortLocator:draw2d.layout.locator.PortLocator.extend({init:function(){this._super()},relocate:function(C,A){var B=A.getParent().getWidth();var D=A.getParent().getHeight();this.applyConsiderRotation(A,B/2,D)}}),MyOutputPortLocator:draw2d.layout.locator.PortLocator.extend({init:function(){this._super()},relocate:function(C,A){var B=A.getParent().getWidth();this.applyConsiderRotation(A,B/2,0)}}),init:function(B,A){if(typeof B==="undefined"){B=30;A=50}this._super(B,A);this.inputLocator=new this.MyInputPortLocator();this.outputLocator=new this.MyOutputPortLocator();this.createPort("hybrid",this.inputLocator);this.createPort("hybrid",this.outputLocator)},getSVG:function(){return'<svg  xmlns="http://www.w3.org/2000/svg" version="1.1"><path d="m19.62398,12.37594l-9.87926,0m-9.74355,8.22145l29.36289,0m-9.74007,8.22469l-9.87927,0m-9.74355,8.22145l29.36289,0" id="path10560" stroke-miterlimit="14.3" stroke="#010101" fill="none"/><path d="m14.63157,9.81646l0,-9.81646m0,47.2328l0,-9.81646" id="path10562" stroke-miterlimit="14.3" stroke-linecap="square" stroke="#010101" fill="none"/></svg>'}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/layout/Layout.js' */
(function ($) {draw2d.shape.layout.Layout=draw2d.shape.basic.Rectangle.extend({NAME:"draw2d.shape.layout.Layout",init:function(){this._super();this.setBackgroundColor(null);this.setRadius(0);this.setStroke(0);this.installEditPolicy(new draw2d.policy.figure.AntSelectionFeedbackPolicy())},addFigure:function(B,A){this._super(B,this.locator);B.attachResizeListener(this)},onOtherFigureIsResizing:function(A){if(this.getParent() instanceof draw2d.shape.layout.Layout){this.fireResizeEvent()}else{this.setDimension(1,1)}},onDoubleClick:function(A){}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/layout/HorizontalLayout.js' */
(function ($) {draw2d.shape.layout.HorizontalLayout=draw2d.shape.layout.Layout.extend({NAME:"draw2d.shape.layout.HorizontalLayout",init:function(){this._super();var A=this;this.locator={relocate:function(B,E){var D=A.getStroke();var F=D;for(var C=0;C<B;C++){var G=A.children.get(C).figure;F+=G.getWidth()+A.gap}E.setPosition(F,D)}};this.setDimension(1,1);this.gap=0},setGap:function(A){this.gap=A;this.setDimension(1,1)},getMinWidth:function(){var A=this.stroke*2+Math.max(0,this.children.getSize()-1)*this.gap;this.children.each(function(B,C){A+=C.figure.getMinWidth()});return A},getMinHeight:function(){var A=10;this.children.each(function(B,C){A=Math.max(A,C.figure.getMinHeight())});return A+this.stroke*2},setDimension:function(A,B){this._super(A,B);var C=this.width-this.getMinWidth();if(C>0){C=(C/this.children.getSize())|0;this.children.each(function(D,E){E.figure.setDimension(E.figure.getMinWidth()+C,E.figure.getHeight())})}else{this.children.each(function(D,E){E.figure.setDimension(1,1)})}}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/layout/VerticalLayout.js' */
(function ($) {draw2d.shape.layout.VerticalLayout=draw2d.shape.layout.Layout.extend({NAME:"draw2d.shape.layout.VerticalLayout",init:function(){this._super();this.gap=0;var A=this;this.locator={relocate:function(B,F){var E=A.getStroke()/2;var D=E;for(var C=0;C<B;C++){var G=A.children.get(C).figure;D=D+G.getHeight()+A.gap}F.setPosition(E,D)}};this.setDimension(10,10)},setGap:function(A){this.gap=A;this.setDimension(1,1)},getMinWidth:function(){var A=10;this.children.each(function(B,C){A=Math.max(A,C.figure.getMinWidth())});return A+this.stroke},getMinHeight:function(){var A=+this.stroke+Math.max(0,this.children.getSize()-1)*this.gap;this.children.each(function(B,C){A+=C.figure.getMinHeight()});return A},setDimension:function(A,C){this._super(A,C);var B=this.width-this.stroke;this.children.each(function(D,E){E.figure.setDimension(B,E.figure.getHeight())})}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/pert/Activity.js' */
(function ($) {draw2d.shape.pert.Activity=draw2d.shape.layout.VerticalLayout.extend({NAME:"draw2d.shape.pert.Activity",init:function(){this._super();var C=this;this.mementoValues={duration:null};this.lighterBgColor=null;this.darkerBgColor=null;this.setBackgroundColor("#f3f3f3");this.setStroke(2);this.setColor(this.darkerBgColor);this.setRadius(5);var B=new draw2d.shape.layout.HorizontalLayout();B.setStroke(0);this.earlyStartLabel=this.createLabel("Early Start").setStroke(0);this.durationLabel=new draw2d.shape.basic.Label("Duration");this.durationLabel.setStroke(1);this.durationLabel.setColor(this.darkerBgColor);this.durationLabel.setRadius(0);this.durationLabel.setBackgroundColor(null);this.durationLabel.setPadding(5);this.durationLabel.setColor(this.bgColor.darker(0.2));this.durationLabel.installEditor(new draw2d.ui.LabelEditor({onCommit:function(D){C.setDuration(parseFloat(D))}}));this.earlyEndLabel=this.createLabel("Early End").setStroke(0);B.addFigure(this.earlyStartLabel);B.addFigure(this.durationLabel);B.addFigure(this.earlyEndLabel);this.activityLabel=new draw2d.shape.basic.Label("Activity Name");this.activityLabel.setRadius(0);this.activityLabel.setPadding(10);this.activityLabel.setColor(this.darkerBgColor);this.activityLabel.setBackgroundColor(null);this.activityLabel.installEditor(new draw2d.ui.LabelInplaceEditor());this.inputPort=this.activityLabel.createPort("input");this.inputPort.getActivity=function(){return C};this.inputPort.onConnect=function(){C.setDuration(C.mementoValues.duration)};this.inputPort.onDisconnect=function(){C.setDuration(C.mementoValues.duration)};this.inputPort.setValue=function(D){C.setDuration(C.mementoValues.duration)};this.outputPort=this.activityLabel.createPort("output");this.outputPort.getActivity=function(){return C};this.outputPort.onConnect=function(){C.setDuration(C.mementoValues.duration)};this.outputPort.onDisconnect=function(){C.setDuration(C.mementoValues.duration)};var A=new draw2d.shape.layout.HorizontalLayout();A.setStroke(0);this.lateStartLabel=this.createLabel("Late Start").setStroke(0);this.stackLabel=this.createLabel("Stack");this.lateEndLabel=this.createLabel("Late End").setStroke(0);A.addFigure(this.lateStartLabel);A.addFigure(this.stackLabel);A.addFigure(this.lateEndLabel);this.addFigure(B);this.addFigure(this.activityLabel);this.addFigure(A);this.setDuration(1)},setDuration:function(C){if(this.mementoValues.duration!==C){this.mementoValues.duration=C;this.durationLabel.setText(this.mementoValues.duration)}var D=this.getEarlyStart();this.earlyStartLabel.setText(D);this.earlyEndLabel.setText(D+this.mementoValues.duration);var B=this.outputPort.getConnections();B.each($.proxy(function(F,G){var E=G.getTarget();E.setValue()},this));if(B.getSize()===0){var A=parseFloat(this.earlyEndLabel.getText());this.setLateFinish(A)}},getEarlyEnd:function(){return this.getEarlyStart()+this.mementoValues.duration},getEarlyStart:function(){var A=0;this.inputPort.getConnections().each(function(B,D){var C=D.getSource().getActivity();A=Math.max(A,C.getEarlyEnd())});return A},setLateFinish:function(C){var A=C-this.mementoValues.duration;this.lateEndLabel.setText(C);this.lateStartLabel.setText(A);this.stackLabel.setText(A-parseFloat(this.earlyStartLabel.getText()));var B=this.inputPort.getConnections();B.each($.proxy(function(E,F){var D=F.getSource();D.getActivity().setLateFinish(A)},this))},createLabel:function(A){var B=new draw2d.shape.basic.Label(A);B.setStroke(1);B.setColor(this.darkerBgColor);B.setRadius(0);B.setBackgroundColor(null);B.setPadding(5);B.setColor(this.bgColor.darker(0.2));B.onDoubleClick=function(C){};return B},setBackgroundColor:function(A){this._super(A);this.lighterBgColor=this.bgColor.lighter(0.2).hash();this.darkerBgColor=this.bgColor.darker(0.2).hash()},repaint:function(A){if(this.repaintBlocked===true||this.shape===null){return }if(typeof A==="undefined"){A={}}if(this.getAlpha()<0.9){A.fill=this.bgColor.hash()}else{A.fill=["90",this.bgColor.hash(),this.lighterBgColor].join("-")}this._super(A)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/ui/LabelEditor.js' */
(function ($) {draw2d.ui.LabelEditor=Class.extend({init:function(A){this.listener=$.extend({onCommit:function(){},onCancel:function(){}},A)},start:function(A){var B=prompt("Label: ",A.getText());if(B){A.setText(B);this.listener.onCommit(A.getText())}else{this.listener.onCancel()}}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/ui/LabelInplaceEditor.js' */
(function ($) {draw2d.ui.LabelInplaceEditor=draw2d.ui.LabelEditor.extend({init:function(A){this._super();this.listener=$.extend({onCommit:function(){},onCancel:function(){}},A)},start:function(B){this.label=B;this.commitCallback=$.proxy(this.commit,this);$("body").bind("click",this.commitCallback);this.html=$('<input id="inplaceeditor">');this.html.val(B.getText());this.html.hide();$("body").append(this.html);this.html.autoResize({animate:false});this.html.bind("keyup",$.proxy(function(E){switch(E.which){case 13:this.commit();break;case 27:this.cancel();break}},this));this.html.bind("blur",this.commitCallback);this.html.bind("click",function(E){E.stopPropagation();E.preventDefault()});var A=this.label.getCanvas();var C=this.label.getBoundingBox();C.setPosition(A.fromCanvasToDocumentCoordinate(C.x,C.y));var D=A.getScrollArea();if(D.is($("body"))){C.translate(A.getScrollLeft(),A.getScrollTop())}C.translate(-1,-1);C.resize(2,2);this.html.css({position:"absolute",top:C.y,left:C.x,"min-width":C.w,height:C.h});this.html.fadeIn($.proxy(function(){this.html.focus()},this))},commit:function(){this.html.unbind("blur",this.commitCallback);$("body").unbind("click",this.commitCallback);var A=this.html.val();this.label.setText(A);this.html.fadeOut($.proxy(function(){this.html.remove();this.html=null;this.listener.onCommit(this.label.getText())},this))},cancel:function(){this.html.unbind("blur",this.commitCallback);$("body").unbind("click",this.commitCallback);this.html.fadeOut($.proxy(function(){this.html.remove();this.html=null;this.listener.onCancel()},this))}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/decoration/connection/Decorator.js' */
(function ($) {draw2d.decoration.connection.Decorator=Class.extend({NAME:"draw2d.decoration.connection.Decorator",init:function(B,A){if(typeof B==="undefined"||B<1){this.width=20}if(typeof A==="undefined"||A<1){this.height=15}this.color=new draw2d.util.Color(0,0,0);this.backgroundColor=new draw2d.util.Color(250,250,250)},paint:function(A){},setColor:function(A){this.color=new draw2d.util.Color(A);return this},setBackgroundColor:function(A){this.backgroundColor=new draw2d.util.Color(A);return this},setDimension:function(B,A){this.width=B;this.height=A;return this}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/decoration/connection/ArrowDecorator.js' */
(function ($) {draw2d.decoration.connection.ArrowDecorator=draw2d.decoration.connection.Decorator.extend({NAME:"draw2d.decoration.connection.ArrowDecorator",init:function(B,A){this._super(B,A)},paint:function(B){var A=B.set();A.push(B.path(["M0 0","L",this.width," ",-this.height/2,"L",this.width," ",this.height/2,"L0 0"].join("")));A.attr({fill:this.backgroundColor.hash(),stroke:this.color.hash()});return A}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/decoration/connection/DiamondDecorator.js' */
(function ($) {draw2d.decoration.connection.DiamondDecorator=draw2d.decoration.connection.Decorator.extend({NAME:"draw2d.decoration.connection.DiamondDecorator",init:function(B,A){this._super(B,A)},paint:function(B){var A=B.set();A.push(B.path(["M",this.width/2," ",-this.height/2,"L",this.width," ",0,"L",this.width/2," ",this.height/2,"L",0," ",0,"L",this.width/2," ",-this.height/2,"Z"].join("")));A.attr({fill:this.backgroundColor.hash(),stroke:this.color.hash()});return A}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/decoration/connection/CircleDecorator.js' */
(function ($) {draw2d.decoration.connection.CircleDecorator=draw2d.decoration.connection.Decorator.extend({NAME:"draw2d.decoration.connection.CircleDecorator",init:function(B,A){this._super(B,A)},paint:function(B){var A=B.circle(0,0,this.width/2);A.attr({fill:this.backgroundColor.hash(),stroke:this.color.hash()});return A}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/decoration/connection/BarDecorator.js' */
(function ($) {draw2d.decoration.connection.BarDecorator=draw2d.decoration.connection.Decorator.extend({NAME:"draw2d.decoration.connection.BarDecorator",init:function(B,A){this._super(B,A)},paint:function(C){var A=C.set();var B=["M",this.width/2," ",-this.height/2];B.push("L",this.width/2," ",this.height/2);A.push(C.path(B.join("")));A.attr({fill:this.backgroundColor.hash(),stroke:this.color.hash()});return A}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/io/Reader.js' */
(function ($) {draw2d.io.Reader=Class.extend({init:function(){},unmarshal:function(B,A){}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/io/Writer.js' */
(function ($) {draw2d.io.Writer=Class.extend({init:function(){},marshal:function(A){return""},formatXml:function(A){var C="";var B=/(>)(<)(\/*)/g;A=A.replace(B,"$1\r\n$2$3");var D=0;jQuery.each(A.split("\r\n"),function(F,H){var E=0;if(H.match(/.+<\/\w[^>]*>$/)){E=0}else{if(H.match(/^<\/\w/)){if(D!=0){D-=1}}else{if(H.match(/^<\w[^>]*[^\/]>.*$/)){E=1}else{E=0}}}var I="";for(var G=0;G<D;G++){I+="  "}C+=I+H+"\r\n";D+=E});return C}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/io/svg/Writer.js' */
(function ($) {draw2d.io.svg.Writer=draw2d.io.Writer.extend({init:function(){this._super()},marshal:function(B){var C=B.getCurrentSelection();B.setCurrentSelection(null);var A=B.getHtmlContainer().html().replace(/>\s+/g,">").replace(/\s+</g,"<");A=this.formatXml(A);A=A.replace(/<desc>.*<\/desc>/g,"<desc>Create with draw2d JS graph library and RaphaelJS</desc>");B.setCurrentSelection(C);return A}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/io/png/Writer.js' */
(function ($) {draw2d.io.png.Writer=draw2d.io.Writer.extend({init:function(){this._super()},marshal:function(D){var C=D.getHtmlContainer().html().replace(/>\s+/g,">").replace(/\s+</g,"<");C=C.replace('<svg xmlns="http://www.w3.org/2000/svg"',"<svg");var B=$('<canvas id="canvas" width="1000px" height="600px"></canvas>');$("body").append(B);canvg("canvas",C,{ignoreMouse:true,ignoreAnimation:true});var A=document.getElementById("canvas").toDataURL("image/png");B.remove();return A}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/io/json/Writer.js' */
(function ($) {draw2d.io.json.Writer=draw2d.io.Writer.extend({init:function(){this._super()},marshal:function(C){var A=[];var E=C.getFigures();var D=0;var F=null;for(D=0;D<E.getSize();D++){F=E.get(D);A.push(F.getPersistentAttributes())}var B=C.getLines();B.each(function(H,G){A.push(G.getPersistentAttributes())});return A}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/io/json/Reader.js' */
(function ($) {draw2d.io.json.Reader=draw2d.io.Reader.extend({init:function(){this._super()},unmarshal:function(canvas,json){var node=null;$.each(json,function(i,element){var o=eval("new "+element.type+"()");var source=null;var target=null;for(i in element){var val=element[i];if(i==="source"){node=canvas.getFigure(val.node);source=node.getPort(val.port)}else{if(i==="target"){node=canvas.getFigure(val.node);target=node.getPort(val.port)}}}if(source!==null&&target!==null){o.setSource(source);o.setTarget(target)}o.setPersistentAttributes(element);canvas.addFigure(o)});canvas.calculateConnectionIntersection();canvas.getLines().each(function(i,line){line.svgPathString=null;line.repaint()});canvas.linesToRepaintAfterDragDrop=canvas.getLines().clone()}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/icon/Icon.js' */
(function ($) {draw2d.shape.icon.Icon=draw2d.SetFigure.extend({NAME:"draw2d.shape.icon.Icon",init:function(B,A){this._super(B,A);this.setBackgroundColor("#333333")},repaint:function(A){if(this.repaintBlocked===true||this.shape===null){return }if(typeof A==="undefined"){A={}}A.fill="none";if(this.svgNodes!==null){this.svgNodes.attr({fill:this.bgColor.hash(),stroke:"none"})}this._super(A)},applyTransformation:function(){if(this.isResizeable()===true){this.svgNodes.transform("S"+this.scaleX+","+this.scaleY+","+this.getAbsoluteX()+","+this.getAbsoluteY()+"t"+(this.getAbsoluteX()-this.offsetX)+","+(this.getAbsoluteY()-this.offsetY))}else{this.svgNodes.transform("T"+(this.getAbsoluteX()-this.offsetX)+","+(this.getAbsoluteY()-this.offsetY))}},createShapeElement:function(){var A=this._super();var B=this.svgNodes.getBBox();this.offsetX=B.x;this.offsetY=B.y;return A},setDimension:function(A,B){if(A>B){this._super(A,A)}else{this._super(B,B)}}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/icon/ArrowLeft.js' */
(function ($) {draw2d.shape.icon.ArrowLeft=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.ArrowLeft",init:function(B,A){this._super(B,A)},createSet:function(){return this.canvas.paper.path("M24.316,5.318L6.684,15.5l17.632,10.182V5.318L24.316,5.318z")}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d-amd.js' */
(function ($) {define("workflow-designer/draw-2d",[],function(){return draw2d});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:form-dialog-view', location = 'js/views/dialogs/FormDialogView.js' */
define("workflow-designer/dialogs/form-dialog-view",["jira/dialog/dialog","jira/dialog/form-dialog","workflow-designer/backbone","workflow-designer/underscore","jquery"],function(B,D,F,C,E){function A(){this.get$popup().find(":submit").removeClass("button")}return F.Marionette.Layout.extend({disable:function(){this.$(":input").attr("disabled","disabled")},enable:function(){this.$(":input").removeAttr("disabled")},_getWindowTitle:E.noop,hide:function(){this.dialog.hide(true)},_onContentRefresh:E.noop,_onError:function(G){this.enable();this.showErrorMessage(G)},_onHide:function(I,G,H){var J;if(!this._onCancel){return }J=C.contains([B.HIDE_REASON.cancel,B.HIDE_REASON.escape],H);J&&this._onCancel()},_onSubmit:function(){throw new Error("FormDialogView subclasses must implement _onSubmit().")},removeErrorMessages:function(){this.$(".error").remove()},reposition:function(){this.dialog._positionInCenter()},show:function(){var G=this;function H(){A.call(this);G.setElement(this.get$popup());G.bindUIElements();G._onContentRefresh()}this.dialog=new D({content:this._getContent(),id:this.id,onContentRefresh:H,stacked:true,submitHandler:C.bind(this._onSubmit,this),windowTitle:this._getWindowTitle()});this.dialog.show();E(this.dialog).one("Dialog.hide",C.bind(this._onHide,this));return this},showErrorMessage:function(I){var H=aui.message.error({content:I}),G=this.$(".form-body");if(I){G.find(".aui-message.error").remove();G.prepend(H).scrollTop(0);this.reposition()}}})});AJS.namespace("JIRA.WorkflowDesigner.Dialogs.FormDialogView",null,require("workflow-designer/dialogs/form-dialog-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:inline-dialog-view', location = 'js/views/dialogs/InlineDialogView.js' */
define("workflow-designer/dialogs/inline-dialog-view",["aui/inline-dialog","workflow-designer/backbone","workflow-designer/underscore","jquery"],function(B,D,A,C){return D.Marionette.ItemView.extend({initialize:function(E){A.bindAll(this,"_onDocumentClick","_onKeyDown","_shouldHide");this._trigger=E.trigger;this._reset()},_clickShouldHide:function(E){return !C.contains(this._inlineDialog[0],E.target)},_createInlineDialog:function(H){var I,E=this;function J(M,L,K){E._getContent(M,K)}function G(){E.bindUIElements();E._onBeforeShow();A.delay(function(){B.current=null;E._onShow();C(document).on({click:E._onDocumentClick,keydown:E._onKeyDown})},E._inlineDialog.getOptions().fadeTime)}function F(){C(document).off({click:E._onDocumentClick,keydown:E._onKeyDown})}I=new B(H,this.id,J,{hideCallback:F,initCallback:G,noBind:true,persistent:true,preHideCallback:this._shouldHide});return I},hide:function(){this._inlineDialog.hide()},_onDocumentClick:function(E){this._clickShouldHide(E)&&this.hide()},_onBeforeShow:C.noop,_onKeyDown:function(G){var E=G.which===C.ui.keyCode.ESCAPE,F=C(G.target).is(":input");if(E&&!F){this.hide()}},_onShow:C.noop,remove:function(){D.Marionette.ItemView.prototype.remove.apply(this,arguments);this.hide();this._inlineDialog.remove()},_reset:function(){this._inlineDialog=this._createInlineDialog(this._trigger);this.setElement(this._inlineDialog)},_shouldHide:function(){return true},show:function(){var E=C.Deferred();this._inlineDialog.show();A.delay(E.resolve,B.opts.fadeTime);return E.promise()}})});AJS.namespace("JIRA.WorkflowDesigner.Dialogs.InlineDialogView",null,require("workflow-designer/dialogs/inline-dialog-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:properties-view', location = 'js/views/properties-panel/PropertiesView.js' */
define("workflow-designer/properties-panel/properties-view",["workflow-designer/backbone","workflow-designer/underscore"],function(B,A){return B.Marionette.ItemView.extend({className:"properties-view",initialize:function(C){this._canvasModel=C.canvasModel;this._selectedView=C.selectedView;this._workflowModel=C.workflowModel;this._selectedView&&this.listenTo(this._selectedView.model,"change",this._onChange)},applyDescriptionExpander:function(){var D=this.$("#properties-panel-description"),C=parseInt(D.css("max-height"),10),E;if(D.length===0){return }D.css({height:"auto",maxHeight:"none"});E=D.height()>C;if(E){D.css({height:"",minHeight:C})}else{D.find(".aui-expander-trigger").remove();D.removeClass("aui-expander-content")}},_destroy:function(){this._selectedView.destroy()},_edit:function(){this._selectedView.edit()},_onChange:function(){this.render().applyDescriptionExpander()},serializeData:function(){var C=this._selectedView&&this._selectedView.model.toJSON()||{};return A.extend({},C,{optionsEditable:this._workflowModel.get("permissions").get("editPropertyOptions"),administrator:this._workflowModel.get("permissions").get("administrator")})}})});AJS.namespace("JIRA.WorkflowDesigner.PropertiesPanel.PropertiesView",null,require("workflow-designer/properties-panel/properties-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer-browser-is-supported', location = 'js/browserIsSupported.js' */
define("workflow-designer/browser-support",["jira/util/navigator"],function(A){return{browserIsSupported:function B(){return !(A.isIE()&&parseInt(A.majorVersion(),10)<10)}}});AJS.namespace("JIRA.WorkflowDesigner.browserIsSupported",null,require("workflow-designer/browser-support").browserIsSupported);;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer-templates', location = 'js/templates-amd.js' */
define("workflow-designer/templates",[],function(){AJS.namespace("JIRA.WorkflowDesigner.Templates");return JIRA.WorkflowDesigner.Templates});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer-models', location = 'js/models/PanelModel.js' */
define("workflow-designer/panel-model",["jquery","workflow-designer/backbone"],function(A,B){return B.Model.extend({defaults:{weight:0,template:null}})});AJS.namespace("JIRA.WorkflowDesigner.PanelModel",null,require("workflow-designer/panel-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer-models', location = 'js/collections/PanelCollection.js' */
define("workflow-designer/panel-collection",["workflow-designer/panel-model","workflow-designer/backbone"],function(A,B){return B.Collection.extend({model:function(C,D){return new A(C,D)},comparator:"weight"})});AJS.namespace("JIRA.WorkflowDesigner.PanelCollection",null,require("workflow-designer/panel-collection"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer-models', location = 'js/models/LoopedTransitionContainerModel.js' */
define("workflow-designer/looped-transition-container-model",["workflow-designer/backbone","workflow-designer/underscore"],function(B,A){return B.Model.extend({defaults:{x:null,y:null},hasCoordinates:function(){var C=this.get("x"),D=this.get("y");return A.isNumber(C)&&A.isNumber(D)}})});AJS.namespace("JIRA.WorkflowDesigner.LoopedTransitionContainerModel",null,require("workflow-designer/looped-transition-container-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer-models', location = 'js/models/StatusModel.js' */
define("workflow-designer/status-model",["workflow-designer/backbone","workflow-designer/underscore"],function(B,A){return B.Model.extend({defaults:{description:"",id:null,initial:false,name:"",statusCategory:null,statusId:null,stepId:null,x:null,y:null,validations:null},hasCoordinates:function(){var C=this.get("x"),D=this.get("y");return A.isNumber(C)&&A.isNumber(D)},hasTransition:function(C){return(C.get("source")===this||C.get("target")===this)},isInitial:function(){return this.get("initial")}})});AJS.namespace("JIRA.WorkflowDesigner.StatusModel",null,require("workflow-designer/status-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer-models', location = 'js/collections/StatusCollection.js' */
define("workflow-designer/status-collection",["workflow-designer/status-model","workflow-designer/backbone"],function(A,B){return B.Collection.extend({model:function(C,D){return new A(C,D)}})});AJS.namespace("JIRA.WorkflowDesigner.StatusCollection",null,require("workflow-designer/status-collection"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer-models', location = 'js/models/TransitionOptionTypeModel.js' */
define("workflow-designer/transition-option-type-model",["workflow-designer/backbone"],function(A){return A.Model.extend({defaults:{count:0,key:null,name:null,url:null,weight:1000}})});AJS.namespace("JIRA.WorkflowDesigner.TransitionOptionTypeModel",null,require("workflow-designer/transition-option-type-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer-models', location = 'js/models/PermissionsModel.js' */
define("workflow-designer/permissions-model",["workflow-designer/backbone"],function(A){return A.Model.extend({defaults:{administrator:false,editPropertyOptions:false,selectScreenOnTransition:false,createStatus:false,editStatus:false,deleteStatus:false,editWorkflow:false}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer-models', location = 'js/collections/TransitionOptionTypeCollection.js' */
define("workflow-designer/transition-option-type-collection",["workflow-designer/transition-option-type-model","workflow-designer/backbone"],function(A,B){return B.Collection.extend({model:function(C,D){return new A(C,D)}})});AJS.namespace("JIRA.WorkflowDesigner.TransitionOptionTypeCollection",null,require("workflow-designer/transition-option-type-collection"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer-models', location = 'js/models/TransitionModel.js' */
define("workflow-designer/transition-model",["workflow-designer/transition-option-type-collection","workflow-designer/backbone","workflow-designer/underscore","jquery"],function(B,D,A,C){return D.Model.extend({defaults:function(){return{id:null,actionId:null,description:null,globalTransition:false,loopedTransition:false,name:null,screenId:null,screenName:null,source:null,sourceAngle:null,target:null,targetAngle:null,transitionOptions:new B(),validations:null}},initialize:function(){this._createId();this.on("change:actionId change:source change:target",A.bind(this._createId,this))},_createId:function(){var F=this;function G(J){return F.get(J)&&F.get(J).get("id")||null}var I,E;if(this.isLoopedTransition()){I=E="S<-1>"}else{if(this.isGlobalTransition()){I=E=G("target")}else{I=G("source");E=G("target")}}if(this.getActionId()&&I&&E){var H=this.get("source")&&this.get("source").isInitial()?"IA":"A";this.set("id",H+"<"+this.getActionId()+":"+I+":"+E+">")}},isGlobalTransition:function(){return this.get("globalTransition")},isLoopedTransition:function(){return this.get("loopedTransition")},isInitial:function(){return !this.isGlobalTransition()&&!this.isLoopedTransition()&&this.get("source").isInitial()},getActionId:function(){return this.get("actionId")},getSourceStepId:function(){var E=this.get("source");return E&&E.get("stepId")},getTargetStepId:function(){var E=this.get("target");return E&&E.get("stepId")},setSource:function(F,E){this.set({source:F,sourceAngle:E})},setTarget:function(F,E){this.set({target:F,targetAngle:E})},sync:C.noop})});AJS.namespace("JIRA.WorkflowDesigner.TransitionModel",null,require("workflow-designer/transition-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer-models', location = 'js/collections/TransitionCollection.js' */
define("workflow-designer/transition-collection",["workflow-designer/transition-model","workflow-designer/backbone"],function(A,B){return B.Collection.extend({model:function(C,D){return new A(C,D)},getInitial:function(){return this.find(function(C){return C.isInitial()})}})});AJS.namespace("JIRA.WorkflowDesigner.TransitionCollection",null,require("workflow-designer/transition-collection"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer-models', location = 'js/models/WorkflowModel.js' */
define("workflow-designer/workflow-model",["workflow-designer/status-model","workflow-designer/status-collection","workflow-designer/transition-model","workflow-designer/transition-collection","workflow-designer/looped-transition-container-model","workflow-designer/backbone","workflow-designer/underscore","workflow-designer/permissions-model"],function(C,G,E,D,F,H,B,A){return H.Model.extend({defaults:function(){return{currentStepId:null,draft:false,name:null,liveStepIds:null,loadedAt:null,loopedTransitionContainer:null,statuses:new G(),transitions:new D(),updatedDate:null,updateAuthor:null,permissions:new A(),analyticsData:null}},initialize:function(){this._triggerLayoutChanged=B.bind(this.trigger,this,"layoutChanged");this.listenTo(this.get("statuses"),{"change:x change:y":this._triggerLayoutChanged,reset:this._detectNewStatus});this.listenTo(this.get("transitions"),{"change:actionId change:sourceAngle change:target change:targetAngle remove":this._triggerLayoutChanged,reset:this._detectNewTransition});this.on("validation:statuses",this._updateValidation("statuses","stepId"));this.on("validation:transitions",this._updateValidation("transitions","id"))},_updateValidation:function(J,I){var K=this.get(J);return function(L){K.forEach(function(M){M.set("validations",L[M.get(I)])})}},addStatus:function(I){var J=I instanceof C;J||(I=new C(I));this.get("statuses").add(I);return I},addTransition:function(K){var J=K instanceof E,I;J||(K=new E(K));this.get("transitions").add(K);if(K.isLoopedTransition()){I=this.get("loopedTransitionContainer");if(!I){I=new F();this.set("loopedTransitionContainer",I);this.listenTo(I,{"change:x change:y":this._triggerLayoutChanged})}this.trigger("loopedTransitionAdded")}this._triggerLayoutChanged();return K},_detectNewStatus:function(K,J){var I=this._getNewModel(K,J.previousModels);I&&this.trigger("new:status",I)},_detectNewTransition:function(K,I){var J=this._getNewModel(K,I.previousModels);J&&this.trigger("new:transition",J)},getGlobalTransitionForStatus:function(I){return this.get("transitions").findWhere({globalTransition:true,target:I})},_getInitialTransitions:function(){return this.get("transitions").filter(function(I){return I.isInitial()})},getInitialTransitionDestinations:function(){return B.map(this._getInitialTransitions(),function(I){return I.get("target")})},_getNewModel:function(I,K){var J=K.length===0;I=I.filter(function(L){return B.every(K,function(M){return L.id!==M.id})});if(I.length===1&&!J){return I[0]}},getStatus:function(I){return this.get("statuses").get(I)},removeLoopedTransitionContainer:function(){this.unset("loopedTransitionContainer");this._triggerLayoutChanged()},removeTransition:function(I){this.get("transitions").remove(I);if(I.isLoopedTransition()){this.trigger("loopedTransitionRemoved")}},reset:function(I){this.trigger("reset:before");this.get("permissions").set(I.permissions);this.get("statuses").reset(I.statuses);this.get("transitions").reset(I.transitions);this.set(B.omit(I,"statuses","transitions","permissions"));this.get("loopedTransitionContainer")&&this.listenTo(this.get("loopedTransitionContainer"),{"change:x change:y":this._triggerLayoutChanged});this.trigger("reset:after")},statusHasGlobalTransition:function(I){return !!this.getGlobalTransitionForStatus(I)},updateTransitionSource:function(I){var J=this.get("statuses").findWhere({initial:false,stepId:I.sourceStepId});I.transition.setSource(J,I.sourceAngle)},updateTransitionTargets:function(J){var K=J.transition.get("actionId"),I;I=this.get("statuses").findWhere({initial:false,stepId:J.targetStepId});J.transition.setTarget(I,J.targetAngle);this.get("transitions").chain().filter(function(L){return L!==J.transition&&L.get("actionId")===K}).invoke("setTarget",I)}})});AJS.namespace("JIRA.WorkflowDesigner.WorkflowModel",null,require("workflow-designer/workflow-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer-io', location = 'js/util/Messages.js' */
define("workflow-designer/messages",["jira/message","workflow-designer/underscore"],function(B,A){return{showErrorMessage:function(E,D){var C;D=A.defaults({},D,{closeable:true,timeout:0});if(E){C=B.showErrorMsg(E,D);C.css("z-index",2510)}return C}}});AJS.namespace("JIRA.WorkflowDesigner.Messages",null,require("workflow-designer/messages"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer-io', location = 'js/io/ErrorHandler.js' */
define("workflow-designer/io/error-handler",["workflow-designer/messages","workflow-designer/underscore"],function(D,C){var A;function E(G,F){return !!/websudo/i.exec(G)&&F===401}A={generic:AJS.I18n.getText("common.forms.ajax.servererror"),notAuthenticated:AJS.I18n.getText("common.forms.ajax.unauthorised.alert"),timeout:AJS.I18n.getText("common.forms.ajax.timeout"),webSudo:AJS.I18n.getText("workflow.designer.websudo.timeout")};var B={getErrorMessage:function(G,F,K){var I=G&&G.responseText,H=G&&G.status;K=C.defaults({},K,A);if(F==="timeout"){return K.timeout}if(E(I,H)){return K.webSudo}if(H===401){return K.notAuthenticated}if(C.contains([400,403,404],H)){try{return JSON.parse(I).errorMessages[0]||I}catch(J){return I}}if(F!=="abort"){return K.generic}return null},handle:function(G,F){var H;H=this.getErrorMessage(G,F);H&&D.showErrorMessage(H)}};C.bindAll(B,"getErrorMessage","handle");return B});AJS.namespace("JIRA.WorkflowDesigner.IO.ErrorHandler",null,require("workflow-designer/io/error-handler"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer-io', location = 'js/io/WorkflowDataReader.js' */
define("workflow-designer/io/workflow-data-reader",["workflow-designer/status-model","workflow-designer/looped-transition-container-model","workflow-designer/transition-model","workflow-designer/underscore"],function(C,E,D,B){function A(F,G){F=B.chain(F).omit("sourceId","targetId").extend({source:G[F.sourceId],target:G[F.targetId]}).value();return new D(F)}return{read:function(I){var H,F={},G=[];if(!I||!I.statuses||!I.transitions){return }B.each(I.statuses,function(K){var J=new C(K);F[J.id]=J});B.each(I.transitions,function(J){G.push(A(J,F))});I.loopedTransitionContainer&&(H=new E(I.loopedTransitionContainer));return{loopedTransitionContainer:H,statuses:B.values(F),transitions:G,updateAuthor:I.updateAuthor,updatedDate:new Date(I.updatedDate)}}}});AJS.namespace("JIRA.WorkflowDesigner.IO.WorkflowDataReader",null,require("workflow-designer/io/workflow-data-reader"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer-io', location = 'js/io/WorkflowDataWriter.js' */
define("workflow-designer/io/workflow-data-writer",["workflow-designer/underscore"],function(A){function B(D){return A.chain(D.toJSON()).pick("id","x","y").value()}function C(D){var H={},G,E,F;if(!D.isLoopedTransition()){G=D.isGlobalTransition();E=D.get("source");F=D.get("target");H={sourceId:G?F.id:E.id,targetId:F.id}}return A.chain(D.toJSON()).pick("id","sourceAngle","targetAngle").extend(H).value()}return{write:function(E){var G,F,D=E.get("loopedTransitionContainer");F={statuses:E.get("statuses").map(B),transitions:E.get("transitions").map(C)};D&&A.extend(F,{loopedTransitionContainer:{x:D.get("x"),y:D.get("y")}});G={layout:F};return A.chain(E.toJSON()).pick("draft","name").extend(G).value()}}});AJS.namespace("JIRA.WorkflowDesigner.IO.WorkflowDataWriter",null,require("workflow-designer/io/workflow-data-writer"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer-io', location = 'js/io/ajax/AJAXManager.js' */
define("workflow-designer/io/ajax/ajax-manager",["jira/ajs/ajax/smart-ajax/web-sudo","workflow-designer/underscore","jquery","workflow-designer/backbone"],function(C,B,D,E){function A(F){var G=String(F.method||F.type);return B.contains(["post","put","delete"],G.toLowerCase())}return E.Marionette.Controller.extend({_makeRequest:function(H,G){var F=D.Deferred();var I;var J;H.headers=B.extend({},H.headers,{"X-Atlassian-Token":"no-check"});I=C.makeWebSudoRequest(H,{cancel:function(K){B.defer(F.reject,undefined,"abort");K.preventDefault()}});I.done(F.resolve);I.fail(F.reject);J=F.promise();if(!G&&A(H)){this.trigger("sync",J)}return J}})});AJS.namespace("JIRA.WorkflowDesigner.IO.AJAX.AJAXManager",null,require("workflow-designer/io/ajax/ajax-manager"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer-io', location = 'js/io/ajax/WorkflowAJAXManager.js' */
define("workflow-designer/io/ajax/workflow-ajax-manager",["workflow-designer/io/workflow-data-reader","workflow-designer/io/workflow-data-writer","workflow-designer/io/ajax/ajax-manager","workflow-designer/io/error-handler","workflow-designer/underscore","jquery","wrm/context-path"],function(G,E,B,A,D,F,C){return new (B.extend({discard:function(J){var I=F.Deferred(),H=this;this._publishOrDiscardRequest=this._makeRequest({contentType:"application/json",data:J,success:I.resolve,type:"POST",url:C()+"/rest/workflowDesigner/latest/workflows/discardDraft"});this._publishOrDiscardRequest.fail(function(L,K){I.reject(A.getErrorMessage(L,K))});this._publishOrDiscardRequest.always(function(){delete H._publishOrDiscardRequest});return I.promise()},load:function(J,H){var I=F.Deferred(),K;K=this._makeRequest({data:{name:J,draft:!!H},dataType:"json",url:C()+"/rest/workflowDesigner/latest/workflows"});K.done(function(L){var N,M=L.layout;N=G.read(M);N=D.extend(N,{liveStepIds:L.liveStepIds,permissions:L.workflowPermissions});I.resolve(N,L)});K.fail(function(M,L){I.reject(A.getErrorMessage(M,L))});return I.promise()},publish:function(J){var I=F.Deferred(),H=this,K=E.write(J);this._publishOrDiscardRequest=this._makeRequest({contentType:"application/json",data:JSON.stringify(K),success:I.resolve,type:"POST",url:C()+"/rest/workflowDesigner/latest/workflows/publishDraft"});this._publishOrDiscardRequest.fail(function(M,L){I.reject(A.getErrorMessage(M,L))});this._publishOrDiscardRequest.always(function(){delete H._publishOrDiscardRequest});return I.promise()},save:function(J){var H=F.Deferred(),I,K=E.write(J);if(!this._publishOrDiscardRequest){I=this._makeRequest({contentType:"application/json",data:JSON.stringify(K),success:H.resolve,type:"POST",url:C()+"/rest/workflowDesigner/latest/workflows"});I.fail(function(M,L){H.reject(A.getErrorMessage(M,L))})}return H.promise()},triggerMauEventForProject:function(H){this._makeRequest({data:{projectKey:H},dataType:"json",type:"POST",url:AJS.contextPath()+"/rest/workflowDesigner/latest/workflowMau"},true)}}))()});AJS.namespace("JIRA.WorkflowDesigner.IO.AJAX.WorkflowAJAXManager",null,require("workflow-designer/io/ajax/workflow-ajax-manager"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer-io', location = 'js/io/ajax/ProjectConfigAJAXManager.js' */
define("workflow-designer/io/ajax/project-config-ajax-manager",["workflow-designer/io/ajax/ajax-manager","workflow-designer/io/error-handler","workflow-designer/io/workflow-data-reader","workflow-designer/backbone","workflow-designer/underscore","jquery","wrm/context-path"],function(E,A,D,G,H,I,B){var C=B()+"/rest/workflowDesigner/latest/workflows";function F(L){var M,J=I.Deferred(),K;L.done(function(N){K=N.layout;M=D.read(K);M=H.extend(M,{liveStepIds:N.liveStepIds,permissions:N.workflowPermissions});J.resolve(N.isDraft,M,N)});L.fail(function(O,N){J.reject(A.getErrorMessage(O,N))});return J.promise()}return new (E.extend({loadWorkflow:function(J){var L=H.extend({},J);var K=this._makeRequest({data:L,dataType:"json",url:C});return F(K)},loadDraftWorkflowIfAvailable:function(J){var L,K;L=H.extend({},J,{preferDraft:true});K=this._makeRequest({data:L,dataType:"json",url:C});return F(K)},loadOrCreateDraftWorkflow:function(J){var L,K;L=H.extend({},J,{draft:true});K=this._makeRequest({data:L,dataType:"json",url:C});return F(K)}}))()});AJS.namespace("JIRA.WorkflowDesigner.IO.AJAX.ProjectConfigAJAXManager",null,require("workflow-designer/io/ajax/project-config-ajax-manager"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer-io', location = 'js/io/ajax/ScreensAJAXManager.js' */
define("workflow-designer/io/ajax/screens-ajax-manager",["workflow-designer/io/ajax/ajax-manager","workflow-designer/io/error-handler","workflow-designer/underscore","jquery","wrm/context-path"],function(C,B,E,F,D){var A;return new (C.extend({getScreens:function(){var G=F.Deferred(),H;if(A){G.resolve(A)}else{H=this._makeRequest({dataType:"json",url:D()+"/rest/workflowDesigner/latest/screens"});H.done(function(I){A=I;G.resolve(A)});H.fail(function(J,I){G.reject(B.getErrorMessage(J,I))})}return G.promise()},reset:function(){A=undefined}}))()});AJS.namespace("JIRA.WorkflowDesigner.IO.AJAX.ScreensAJAXManager",null,require("workflow-designer/io/ajax/screens-ajax-manager"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer-io', location = 'js/io/ajax/StatusCategoriesAJAXManager.js' */
define("workflow-designer/io/ajax/status-categories-ajax-manager",["workflow-designer/io/ajax/ajax-manager","workflow-designer/io/error-handler","workflow-designer/underscore","jquery","wrm/context-path"],function(B,A,D,E,C){var F;return new (B.extend({getStatusCategories:function(){var G=E.Deferred(),H;if(F){G.resolve(F)}else{H=this._makeRequest({dataType:"json",url:C()+"/rest/workflowDesigner/latest/statusCategories"});H.done(function(I){F=I;G.resolve(F)});H.fail(function(J,I){G.reject(A.getErrorMessage(J,I))})}return G.promise()},reset:function(){F=undefined}}))()});AJS.namespace("JIRA.WorkflowDesigner.IO.AJAX.StatusCategoriesAJAXManager",null,require("workflow-designer/io/ajax/status-categories-ajax-manager"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer-io', location = 'js/io/ajax/StatusesAJAXManager.js' */
define("workflow-designer/io/ajax/statuses-ajax-manager",["workflow-designer/io/ajax/ajax-manager","workflow-designer/io/error-handler","workflow-designer/underscore","jquery","wrm/context-path"],function(B,A,D,F,C){var E;return new (B.extend({getStatuses:function(){var G=F.Deferred(),H;if(E){G.resolve(E)}else{H=this._makeRequest({dataType:"json",url:C()+"/rest/workflowDesigner/latest/statuses"});H.done(function(I){E=I;G.resolve(E)});H.fail(function(J,I){G.reject(A.getErrorMessage(J,I))})}return G.promise()},getNumberOfAssociatedWorkflows:function(I){var G=F.Deferred(),H;H=this._makeRequest({data:{statusId:I},dataType:"json",url:C()+"/rest/workflowDesigner/latest/statuses/associatedWorkflowCount"});H.done(function(J){G.resolve(J)});H.fail(function(K,J){G.reject(A.getErrorMessage(K,J))});return G.promise()},reset:function(){E=undefined}}))()});AJS.namespace("JIRA.WorkflowDesigner.IO.AJAX.StatusesAJAXManager",null,require("workflow-designer/io/ajax/statuses-ajax-manager"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer-io', location = 'js/io/ajax/WorkflowGlobalTransitionsAJAXManager.js' */
define("workflow-designer/io/ajax/workflow-global-transitions-ajax-manager",["workflow-designer/io/ajax/ajax-manager","workflow-designer/io/workflow-data-reader","workflow-designer/io/error-handler","workflow-designer/underscore","jquery","wrm/context-path"],function(B,F,A,D,E,C){return new (B.extend({addGlobalTransition:function(H){var G=E.Deferred(),I;I=this._makeRequest({data:D.pick(H,"statusId","workflowName","name","description","screenId"),dataType:"json",type:"post",url:C()+"/rest/workflowDesigner/latest/workflows/globalTransitions/simple"});I.done(G.resolve);I.fail(function(K,J){G.reject(A.getErrorMessage(K,J))});return G.promise()},createGlobalTransition:function(H){var G=E.Deferred(),I;I=this._makeRequest({data:D.pick(H,"statusId","workflowName","name","description","screenId"),dataType:"json",type:"post",url:C()+"/rest/workflowDesigner/latest/workflows/globalTransitions"});I.done(function(J){G.resolve(F.read(J))});I.fail(function(K,J){G.reject(A.getErrorMessage(K,J))});return G.promise()},deleteGlobalTransition:function(H){var G=E.Deferred(),I;I=this._makeRequest({data:D.pick(H,"transitionId","workflowName"),dataType:"json",type:"delete",url:C()+"/rest/workflowDesigner/latest/workflows/globalTransitions"});I.done(G.resolve);I.fail(function(K,J){G.reject(A.getErrorMessage(K,J))});return G.promise()},updateGlobalTransition:function(H){var G=E.Deferred(),I;I=this._makeRequest({data:D.pick(H,"transitionId","name","description","screenId","workflowName"),dataType:"json",type:"put",url:C()+"/rest/workflowDesigner/latest/workflows/globalTransitions"});I.done(G.resolve);I.fail(function(K,J){G.reject(A.getErrorMessage(K,J))});return G.promise()}}))()});AJS.namespace("JIRA.WorkflowDesigner.IO.AJAX.WorkflowGlobalTransitionsAJAXManager",null,require("workflow-designer/io/ajax/workflow-global-transitions-ajax-manager"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer-io', location = 'js/io/ajax/WorkflowLoopedTransitionsAJAXManager.js' */
define("workflow-designer/io/ajax/workflow-looped-transitions-ajax-manager",["workflow-designer/io/ajax/ajax-manager","workflow-designer/io/error-handler","workflow-designer/underscore","jquery","wrm/context-path"],function(C,B,E,G,D){var A=D()+"/rest/workflowDesigner/latest/workflows/loopedTransitions";function F(I){var H=G.Deferred(),J;J=this._makeRequest(E.defaults({},I,{dataType:"json",url:A}));J.done(H.resolve);J.fail(function(L,K){H.reject(B.getErrorMessage(L,K))});return H.promise()}return new (C.extend({addLoopedTransition:function(H){return F.call(this,{data:E.pick(H,"workflowName","name","description","screenId"),type:"post"})},deleteLoopedTransition:function(H){return F.call(this,{data:H,type:"delete"})},updateLoopedTransition:function(H){return F.call(this,{data:H,type:"put"})}}))()});AJS.namespace("JIRA.WorkflowDesigner.IO.AJAX.WorkflowLoopedTransitionsAJAXManager",null,require("workflow-designer/io/ajax/workflow-looped-transitions-ajax-manager"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer-io', location = 'js/io/ajax/WorkflowStatusesAJAXManager.js' */
define("workflow-designer/io/ajax/workflow-statuses-ajax-manager",["workflow-designer/io/ajax/ajax-manager","workflow-designer/io/workflow-data-reader","workflow-designer/io/ajax/statuses-ajax-manager","workflow-designer/io/error-handler","workflow-designer/underscore","jquery","wrm/context-path"],function(B,G,H,A,D,F,C){var E;return new (B.extend({addStatus:function(J){var I=F.Deferred(),K;K=this._makeRequest({data:D.pick(J,"createGlobalTransition","statusId","workflowName"),dataType:"json",type:"post",url:C()+"/rest/workflowDesigner/latest/workflows/statuses"});K.done(function(L){I.resolve(G.read(L))});K.fail(function(M,L){I.reject(A.getErrorMessage(M,L))});return I.promise()},createStatus:function(J){var I=F.Deferred(),K;K=this._makeRequest({data:D.pick(J,"createGlobalTransition","description","name","statusCategoryId","workflowName"),dataType:"json",type:"post",url:C()+"/rest/workflowDesigner/latest/workflows/statuses/create"});K.done(function(L){I.resolve(G.read(L));H.reset();this.reset()}.bind(this));K.fail(function(M,L){I.reject(A.getErrorMessage(M,L))});return I.promise()},removeStatus:function(J){var I=F.Deferred(),K;K=this._makeRequest({data:D.pick(J,"statusId","workflowName"),dataType:"json",type:"delete",url:C()+"/rest/workflowDesigner/latest/workflows/statuses"});K.done(function(L){I.resolve(G.read(L))});K.fail(function(M,L){I.reject(A.getErrorMessage(M,L))});return I.promise()},validateRemoveStatus:function(J){var I=F.Deferred(),K;K=this._makeRequest({data:D.pick(J,"statusId","workflowName"),dataType:"json",type:"post",url:C()+"/rest/workflowDesigner/latest/workflows/statuses/validateRemove"},true);K.done(function(L){I.resolve(G.read(L))});K.fail(function(M,L){I.reject(A.getErrorMessage(M,L))});return I.promise()},updateStatus:function(J){var I=F.Deferred(),K;K=this._makeRequest({data:D.pick(J,"description","name","statusCategoryId","statusId","workflowName"),dataType:"json",type:"put",url:C()+"/rest/workflowDesigner/latest/workflows/statuses"});K.done(I.resolve);K.fail(function(M,L){I.reject(A.getErrorMessage(M,L))});return I.promise()},getStatuses:function(J){var I=F.Deferred();if(E){I.resolve(E)}else{var K=this._makeRequest({data:D.pick(J,"workflowName"),dataType:"json",url:C()+"/rest/workflowDesigner/latest/workflows/statuses"});K.done(function(L){E=L;I.resolve(E)});K.fail(function(M,L){I.reject(A.getErrorMessage(M,L))})}return I.promise()},reset:function(){E=undefined}}))()});AJS.namespace("JIRA.WorkflowDesigner.IO.AJAX.WorkflowStatusesAJAXManager",null,require("workflow-designer/io/ajax/workflow-statuses-ajax-manager"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer-io', location = 'js/io/ajax/WorkflowTransitionsAJAXManager.js' */
define("workflow-designer/io/ajax/workflow-transitions-ajax-manager",["workflow-designer/io/ajax/ajax-manager","workflow-designer/io/error-handler","workflow-designer/underscore","jquery","wrm/context-path"],function(C,B,E,G,D){var A=D()+"/rest/workflowDesigner/latest/workflows/transitions";function F(I){var H=G.Deferred(),J;J=this._makeRequest(E.defaults({},I,{dataType:"json",url:A}));J.done(H.resolve);J.fail(function(L,K){H.reject(B.getErrorMessage(L,K))});return H.promise()}return new (C.extend({addCommonTransition:function(H){return F.call(this,{data:E.pick(H,"sourceStatusId","transitionId","workflowName"),type:"post",url:A+"/common"})},addTransition:function(H){return F.call(this,{data:H,type:"post"})},deleteTransition:function(H){return F.call(this,{data:H,type:"delete"})},updateTransition:function(H){return F.call(this,{data:H,type:"put"})},updateTransitionSource:function(H){return F.call(this,{data:H,type:"post",url:A+"/source"})},updateTransitionTarget:function(H){return F.call(this,{data:H,type:"post",url:A+"/target"})}}))()});AJS.namespace("JIRA.WorkflowDesigner.IO.AJAX.WorkflowTransitionsAJAXManager",null,require("workflow-designer/io/ajax/workflow-transitions-ajax-manager"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer-io', location = 'js/io/ajax/ValidationAJAXManager.js' */
define("workflow-designer/io/ajax/validation-ajax-manager",["workflow-designer/io/ajax/ajax-manager","workflow-designer/io/error-handler","workflow-designer/underscore","jquery","wrm/context-path"],function(C,B,E,G,D){var A=D()+"/rest/workflowDesigner/latest/workflows/validation";function F(I){var H=G.Deferred();var J=this._makeRequest(E.defaults({},I,{dataType:"json",url:A}));J.done(H.resolve);J.fail(function(L,K){H.reject(B.getErrorMessage(L,K))});return H.promise()}return new (C.extend({check:function(H){return F.call(this,{data:JSON.stringify({workflowName:H}),type:"post",contentType:"application/json"})}}))()});AJS.namespace("JIRA.WorkflowDesigner.IO.AJAX.ValidationAJAXManager",null,require("workflow-designer/io/ajax/validation-ajax-manager"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer-io', location = 'js/io/LayoutAutoSaver.js' */
define("workflow-designer/io/layout-auto-saver",["workflow-designer/io/ajax/workflow-ajax-manager","workflow-designer/messages","workflow-designer/underscore"],function(F,E,B){var D;function C(){return AJS.I18n.getText("workflow.designer.unsaved.changes")}var A=function(G){B.bindAll(this,"_save");this._save=B.debounce(this._save,1000);this._window=G.window||window;this._workflowModel=G.workflowModel;this._workflowModel.on("layoutChanged",this._onLayoutChanged,this)};A.prototype={destroy:function(){var G=this._window.onbeforeunload===C;if(G){this._window.onbeforeunload=this._originalOnBeforeUnload}},_installUnsavedChangesMessage:function(){var G=!D&&this._window.onbeforeunload!==C;if(G){this._originalOnBeforeUnload=this._window.onbeforeunload;this._window.onbeforeunload=C}},_onLayoutChanged:function(){this._installUnsavedChangesMessage();this._layoutId=B.uniqueId();this._save()},removeUnsavedChangesMessage:function(){this._window.onbeforeunload=this._originalOnBeforeUnload;delete this._originalOnBeforeUnload},_save:function(){var H=this,G=this._layoutId,I;function J(){if(H._layoutId===G){H.removeUnsavedChangesMessage()}}I=F.save(this._workflowModel);I.done(J);I.fail(function(K){E.showErrorMessage(K)})}};A.disableMessage=function(){D=true};return A});AJS.namespace("JIRA.WorkflowDesigner.IO.LayoutAutoSaver",null,require("workflow-designer/io/layout-auto-saver"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer-internal-api', location = 'js/internal-api/PanelService.js' */
define("workflow-designer/internal-api/panel-service",["workflow-designer/panel-collection","exports"],function(C,B){var A={};B.addPanel=function(D,E){A[D]=A[D]||new C();A[D].add(E)};B.renderPanels=function(D,E){var F=A[D];return F&&F.map(function(G){return G.get("template")(E)})}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer-internal-api', location = 'js/internal-api/WorkflowService.js' */
define("workflow-designer/internal-api/workflow-service",["jquery","exports"],function(D,A){var E=[];var F=[];function B(G){return{getWorkflowData:function(){return G.getWorkflowData()}}}function C(){F.forEach(function(G){E.forEach(function(H){G.executedFor=G.executedFor||[];if(G.executedFor.indexOf(H)===-1){G(B(H));G.executedFor.push(H)}})})}A.registerWorkflowDesigner=function(G){E.push(G);C()};A.ready=function(G){F.push(G);C()}});AJS.namespace("JIRA.WorkflowDesigner.InternalApi.WorkflowService",null,require("workflow-designer/internal-api/workflow-service"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer-internal-api', location = 'js/internal-api/SaveStatusService.js' */
define("workflow-designer/internal-api/save-status-service",["workflow-designer/io/ajax/workflow-ajax-manager","workflow-designer/io/ajax/workflow-global-transitions-ajax-manager","workflow-designer/io/ajax/workflow-looped-transitions-ajax-manager","workflow-designer/io/ajax/workflow-statuses-ajax-manager","workflow-designer/io/ajax/workflow-transitions-ajax-manager","workflow-designer/backbone","workflow-designer/underscore"],function(F,B,A,E,D,G,C){return G.Marionette.Controller.extend({initialize:function(){this.counter=0;this.lastSyncTime=0;C.bindAll(this,"_successCallback","_failureCallback");this.listenTo(F,"sync",this._syncEventHandler);this.listenTo(B,"sync",this._syncEventHandler);this.listenTo(A,"sync",this._syncEventHandler);this.listenTo(E,"sync",this._syncEventHandler);this.listenTo(D,"sync",this._syncEventHandler)},_syncEventHandler:function(H){this.trigger("state:pending");++this.counter;H.then(this._successCallback);H.fail(this._failureCallback)},_successCallback:function(){this.lastSyncTime=new Date().getTime();--this.counter;if(this.counter===0){this.trigger("state:success",this.lastSyncTime)}},_failureCallback:function(){--this.counter;this.trigger("state:failure",this.lastSyncTime)}})});;
;
/* module-key = 'com.atlassian.plugin.jslibs:moment-2.22.2', location = 'libs/moment/2.22.2/moment-2.22.2.js' */
'use strict';(function(g){define("atlassian/libs/moment-2.22.2",function(){var A={};g.call(A);return A.moment})})(function(){(function(g,A){g.moment=A()})(this,function(){function g(){return dc.apply(null,arguments)}function A(a){return a instanceof Array||"[object Array]"===Object.prototype.toString.call(a)}function ma(a){return null!=a&&"[object Object]"===Object.prototype.toString.call(a)}function B(a){return void 0===a}function fa(a){return"number"===typeof a||"[object Number]"===Object.prototype.toString.call(a)}
function wa(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function mb(a,b){var c=[],d;for(d=0;d<a.length;++d)c.push(b(a[d],d));return c}function v(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function S(a,b){for(var c in b)v(b,c)&&(a[c]=b[c]);v(b,"toString")&&(a.toString=b.toString);v(b,"valueOf")&&(a.valueOf=b.valueOf);return a}function K(a,b,c,d){return nb(a,b,c,d,!0).utc()}function n(a){null==a._pf&&(a._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,
charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1});return a._pf}function Oa(a){if(null==a._isValid){var b=n(a),c=ec.call(b.parsedDateParts,function(a){return null!=a});c=!isNaN(a._d.getTime())&&0>b.overflow&&!b.empty&&!b.invalidMonth&&!b.invalidWeekday&&!b.weekdayMismatch&&!b.nullInput&&!b.invalidFormat&&!b.userInvalidated&&(!b.meridiem||b.meridiem&&c);a._strict&&(c=c&&0===b.charsLeftOver&&0===
b.unusedTokens.length&&void 0===b.bigHour);if(null!=Object.isFrozen&&Object.isFrozen(a))return c;a._isValid=c}return a._isValid}function xa(a){var b=K(NaN);null!=a?S(n(b),a):n(b).userInvalidated=!0;return b}function Pa(a,b){var c;B(b._isAMomentObject)||(a._isAMomentObject=b._isAMomentObject);B(b._i)||(a._i=b._i);B(b._f)||(a._f=b._f);B(b._l)||(a._l=b._l);B(b._strict)||(a._strict=b._strict);B(b._tzm)||(a._tzm=b._tzm);B(b._isUTC)||(a._isUTC=b._isUTC);B(b._offset)||(a._offset=b._offset);B(b._pf)||(a._pf=
n(b));B(b._locale)||(a._locale=b._locale);if(0<Qa.length)for(c=0;c<Qa.length;c++){var d=Qa[c];var f=b[d];B(f)||(a[d]=f)}return a}function na(a){Pa(this,a);this._d=new Date(null!=a._d?a._d.getTime():NaN);this.isValid()||(this._d=new Date(NaN));!1===Ra&&(Ra=!0,g.updateOffset(this),Ra=!1)}function T(a){return a instanceof na||null!=a&&null!=a._isAMomentObject}function E(a){return 0>a?Math.ceil(a)||0:Math.floor(a)}function l(a){a=+a;var b=0;0!==a&&isFinite(a)&&(b=E(a));return b}function ob(a,b,c){var d=
Math.min(a.length,b.length),f=Math.abs(a.length-b.length),U=0,h;for(h=0;h<d;h++)(c&&a[h]!==b[h]||!c&&l(a[h])!==l(b[h]))&&U++;return U+f}function pb(a){!1===g.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+a)}function F(a,b){var c=!0;return S(function(){null!=g.deprecationHandler&&g.deprecationHandler(null,a);if(c){for(var d=[],f,U=0;U<arguments.length;U++){f="";if("object"===typeof arguments[U]){f+="\n["+U+"] ";for(var h in arguments[0])f+=
h+": "+arguments[0][h]+", ";f=f.slice(0,-2)}else f=arguments[U];d.push(f)}pb(a+"\nArguments: "+Array.prototype.slice.call(d).join("")+"\n"+Error().stack);c=!1}return b.apply(this,arguments)},b)}function qb(a,b){null!=g.deprecationHandler&&g.deprecationHandler(a,b);rb[a]||(pb(b),rb[a]=!0)}function L(a){return a instanceof Function||"[object Function]"===Object.prototype.toString.call(a)}function sb(a,b){var c=S({},a),d;for(d in b)v(b,d)&&(ma(a[d])&&ma(b[d])?(c[d]={},S(c[d],a[d]),S(c[d],b[d])):null!=
b[d]?c[d]=b[d]:delete c[d]);for(d in a)v(a,d)&&!v(b,d)&&ma(a[d])&&(c[d]=S({},c[d]));return c}function Sa(a){null!=a&&this.set(a)}function C(a,b){var c=a.toLowerCase();oa[c]=oa[c+"s"]=oa[b]=a}function G(a){return"string"===typeof a?oa[a]||oa[a.toLowerCase()]:void 0}function Ta(a){var b={},c,d;for(d in a)v(a,d)&&(c=G(d))&&(b[c]=a[d]);return b}function fc(a){var b=[],c;for(c in a)b.push({unit:c,priority:z[c]});b.sort(function(a,b){return a.priority-b.priority});return b}function O(a,b,c){var d=""+Math.abs(a);
return(0<=a?c?"+":"":"-")+Math.pow(10,Math.max(0,b-d.length)).toString().substr(1)+d}function m(a,b,c,d){var f=d;"string"===typeof d&&(f=function(){return this[d]()});a&&(ha[a]=f);b&&(ha[b[0]]=function(){return O(f.apply(this,arguments),b[1],b[2])});c&&(ha[c]=function(){return this.localeData().ordinal(f.apply(this,arguments),a)})}function gc(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function hc(a){var b=a.match(tb),c;var d=0;for(c=b.length;d<c;d++)b[d]=ha[b[d]]?ha[b[d]]:
gc(b[d]);return function(d){var f="",h;for(h=0;h<c;h++)f+=L(b[h])?b[h].call(d,a):b[h];return f}}function ya(a,b){if(!a.isValid())return a.localeData().invalidDate();b=ub(b,a.localeData());Ua[b]=Ua[b]||hc(b);return Ua[b](a)}function ub(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(za.lastIndex=0;0<=d&&za.test(a);)a=a.replace(za,c),za.lastIndex=0,--d;return a}function k(a,b,c){Va[a]=L(b)?b:function(a,f){return a&&c?c:b}}function ic(a,b){return v(Va,a)?Va[a](b._strict,b._locale):new RegExp(jc(a))}
function jc(a){return aa(a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,c,d,f,e){return c||d||f||e}))}function aa(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$\x26")}function r(a,b){var c,d=b;"string"===typeof a&&(a=[a]);fa(b)&&(d=function(a,c){c[b]=l(a)});for(c=0;c<a.length;c++)Wa[a[c]]=d}function pa(a,b){r(a,function(a,d,f,e){f._w=f._w||{};b(a,f._w,f,e)})}function V(a){return 0===a%4&&0!==a%100||0===a%400}function ia(a,b){return function(c){return null!=c?(vb(this,
a,c),g.updateOffset(this,b),this):Aa(this,a)}}function Aa(a,b){return a.isValid()?a._d["get"+(a._isUTC?"UTC":"")+b]():NaN}function vb(a,b,c){if(a.isValid()&&!isNaN(c))if("FullYear"===b&&V(a.year())&&1===a.month()&&29===a.date())a._d["set"+(a._isUTC?"UTC":"")+b](c,a.month(),Ba(c,a.month()));else a._d["set"+(a._isUTC?"UTC":"")+b](c)}function Ba(a,b){if(isNaN(a)||isNaN(b))return NaN;var c=(b%12+12)%12;return 1===c?V(a+(b-c)/12)?29:28:31-c%7%2}function wb(a,b){if(!a.isValid())return a;if("string"===typeof b)if(/^\d+$/.test(b))b=
l(b);else if(b=a.localeData().monthsParse(b),!fa(b))return a;var c=Math.min(a.date(),Ba(a.year(),b));a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c);return a}function xb(a){return null!=a?(wb(this,a),g.updateOffset(this,!0),this):Aa(this,"Month")}function yb(){function a(a,b){return b.length-a.length}var b=[],c=[],d=[],f;for(f=0;12>f;f++){var e=K([2E3,f]);b.push(this.monthsShort(e,""));c.push(this.months(e,""));d.push(this.months(e,""));d.push(this.monthsShort(e,""))}b.sort(a);c.sort(a);d.sort(a);for(f=
0;12>f;f++)b[f]=aa(b[f]),c[f]=aa(c[f]);for(f=0;24>f;f++)d[f]=aa(d[f]);this._monthsShortRegex=this._monthsRegex=new RegExp("^("+d.join("|")+")","i");this._monthsStrictRegex=new RegExp("^("+c.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+b.join("|")+")","i")}function kc(a,b,c,d,f,e,h){b=new Date(a,b,c,d,f,e,h);100>a&&0<=a&&isFinite(b.getFullYear())&&b.setFullYear(a);return b}function qa(a){var b=new Date(Date.UTC.apply(null,arguments));100>a&&0<=a&&isFinite(b.getUTCFullYear())&&b.setUTCFullYear(a);
return b}function Ca(a,b,c){c=7+b-c;return-((7+qa(a,0,c).getUTCDay()-b)%7)+c-1}function zb(a,b,c,d,f){c=(7+c-d)%7;d=Ca(a,d,f);d=1+7*(b-1)+c+d;0>=d?(b=a-1,a=(V(b)?366:365)+d):d>(V(a)?366:365)?(b=a+1,a=d-(V(a)?366:365)):(b=a,a=d);return{year:b,dayOfYear:a}}function ra(a,b,c){var d=Ca(a.year(),b,c);d=Math.floor((a.dayOfYear()-d-1)/7)+1;1>d?(a=a.year()-1,b=d+ba(a,b,c)):d>ba(a.year(),b,c)?(b=d-ba(a.year(),b,c),a=a.year()+1):(a=a.year(),b=d);return{week:b,year:a}}function ba(a,b,c){var d=Ca(a,b,c);b=Ca(a+
1,b,c);return((V(a)?366:365)-d+b)/7}function lc(a,b,c){var d;a=a.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],d=0;7>d;++d){var f=K([2E3,1]).day(d);this._minWeekdaysParse[d]=this.weekdaysMin(f,"").toLocaleLowerCase();this._shortWeekdaysParse[d]=this.weekdaysShort(f,"").toLocaleLowerCase();this._weekdaysParse[d]=this.weekdays(f,"").toLocaleLowerCase()}if(c)b="dddd"===b?w.call(this._weekdaysParse,a):"ddd"===b?w.call(this._shortWeekdaysParse,
a):w.call(this._minWeekdaysParse,a);else if("dddd"===b){b=w.call(this._weekdaysParse,a);if(-1!==b)return b;b=w.call(this._shortWeekdaysParse,a);if(-1!==b)return b;b=w.call(this._minWeekdaysParse,a)}else if("ddd"===b){b=w.call(this._shortWeekdaysParse,a);if(-1!==b)return b;b=w.call(this._weekdaysParse,a);if(-1!==b)return b;b=w.call(this._minWeekdaysParse,a)}else{b=w.call(this._minWeekdaysParse,a);if(-1!==b)return b;b=w.call(this._weekdaysParse,a);if(-1!==b)return b;b=w.call(this._shortWeekdaysParse,
a)}return-1!==b?b:null}function Xa(){function a(a,b){return b.length-a.length}var b=[],c=[],d=[],f=[],e;for(e=0;7>e;e++){var h=K([2E3,1]).day(e);var g=this.weekdaysMin(h,"");var k=this.weekdaysShort(h,"");h=this.weekdays(h,"");b.push(g);c.push(k);d.push(h);f.push(g);f.push(k);f.push(h)}b.sort(a);c.sort(a);d.sort(a);f.sort(a);for(e=0;7>e;e++)c[e]=aa(c[e]),d[e]=aa(d[e]),f[e]=aa(f[e]);this._weekdaysMinRegex=this._weekdaysShortRegex=this._weekdaysRegex=new RegExp("^("+f.join("|")+")","i");this._weekdaysStrictRegex=
new RegExp("^("+d.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+c.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+b.join("|")+")","i")}function Ya(){return this.hours()%12||12}function Ab(a,b){m(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}function Bb(a,b){return b._meridiemParse}function Cb(a){return a?a.toLowerCase().replace("_","-"):a}function Da(a){var b=null;if(!x[a]&&"undefined"!==typeof module&&module&&module.exports)try{b=
sa._abbr,require("./locale/"+a),ja(b)}catch(c){}return x[a]}function ja(a,b){a&&((b=B(b)?W(a):Za(a,b))?sa=b:"undefined"!==typeof console&&console.warn&&console.warn("Locale "+a+" not found. Did you forget to load it?"));return sa._abbr}function Za(a,b){if(null!==b){var c=Db;b.abbr=a;if(null!=x[a])qb("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),
c=x[a]._config;else if(null!=b.parentLocale)if(null!=x[b.parentLocale])c=x[b.parentLocale]._config;else if(c=Da(b.parentLocale),null!=c)c=c._config;else return ta[b.parentLocale]||(ta[b.parentLocale]=[]),ta[b.parentLocale].push({name:a,config:b}),null;x[a]=new Sa(sb(c,b));ta[a]&&ta[a].forEach(function(a){Za(a.name,a.config)});ja(a);return x[a]}delete x[a];return null}function W(a){var b;a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr);if(!a)return sa;if(!A(a)){if(b=Da(a))return b;a=[a]}a:{b=0;for(var c,
d,f,e;b<a.length;){e=Cb(a[b]).split("-");c=e.length;for(d=(d=Cb(a[b+1]))?d.split("-"):null;0<c;){if(f=Da(e.slice(0,c).join("-"))){a=f;break a}if(d&&d.length>=c&&ob(e,d,!0)>=c-1)break;c--}b++}a=sa}return a}function $a(a){var b;(b=a._a)&&-2===n(a).overflow&&(b=0>b[P]||11<b[P]?P:1>b[M]||b[M]>Ba(b[H],b[P])?M:0>b[y]||24<b[y]||24===b[y]&&(0!==b[I]||0!==b[Q]||0!==b[ca])?y:0>b[I]||59<b[I]?I:0>b[Q]||59<b[Q]?Q:0>b[ca]||999<b[ca]?ca:-1,n(a)._overflowDayOfYear&&(b<H||b>M)&&(b=M),n(a)._overflowWeeks&&-1===b&&
(b=mc),n(a)._overflowWeekday&&-1===b&&(b=nc),n(a).overflow=b);return a}function ka(a,b,c){return null!=a?a:null!=b?b:c}function ab(a){var b=[];if(!a._d){var c=new Date(g.now());c=a._useUTC?[c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()]:[c.getFullYear(),c.getMonth(),c.getDate()];if(a._w&&null==a._a[M]&&null==a._a[P]){var d=a._w;if(null!=d.GG||null!=d.W||null!=d.E){var f=1;var e=4;var h=ka(d.GG,a._a[H],ra(u(),1,4).year);var k=ka(d.W,1);var m=ka(d.E,1);if(1>m||7<m)var l=!0}else if(f=a._locale._week.dow,
e=a._locale._week.doy,k=ra(u(),f,e),h=ka(d.gg,a._a[H],k.year),k=ka(d.w,k.week),null!=d.d){if(m=d.d,0>m||6<m)l=!0}else if(null!=d.e){if(m=d.e+f,0>d.e||6<d.e)l=!0}else m=f;1>k||k>ba(h,f,e)?n(a)._overflowWeeks=!0:null!=l?n(a)._overflowWeekday=!0:(l=zb(h,k,m,f,e),a._a[H]=l.year,a._dayOfYear=l.dayOfYear)}if(null!=a._dayOfYear){l=ka(a._a[H],c[H]);if(a._dayOfYear>(V(l)?366:365)||0===a._dayOfYear)n(a)._overflowDayOfYear=!0;l=qa(l,0,a._dayOfYear);a._a[P]=l.getUTCMonth();a._a[M]=l.getUTCDate()}for(l=0;3>l&&
null==a._a[l];++l)a._a[l]=b[l]=c[l];for(;7>l;l++)a._a[l]=b[l]=null==a._a[l]?2===l?1:0:a._a[l];24===a._a[y]&&0===a._a[I]&&0===a._a[Q]&&0===a._a[ca]&&(a._nextDay=!0,a._a[y]=0);a._d=(a._useUTC?qa:kc).apply(null,b);b=a._useUTC?a._d.getUTCDay():a._d.getDay();null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm);a._nextDay&&(a._a[y]=24);a._w&&"undefined"!==typeof a._w.d&&a._w.d!==b&&(n(a).weekdayMismatch=!0)}}function Eb(a){var b;var c=a._i;var d=oc.exec(c)||pc.exec(c);if(d){n(a).iso=!0;c=0;for(b=
Ea.length;c<b;c++)if(Ea[c][1].exec(d[1])){var f=Ea[c][0];var e=!1!==Ea[c][2];break}if(null==f)a._isValid=!1;else{if(d[3]){c=0;for(b=bb.length;c<b;c++)if(bb[c][1].exec(d[3])){var h=(d[2]||" ")+bb[c][0];break}if(null==h){a._isValid=!1;return}}if(e||null==h){if(d[4])if(qc.exec(d[4]))var g="Z";else{a._isValid=!1;return}a._f=f+(h||"")+(g||"");cb(a)}else a._isValid=!1}}else a._isValid=!1}function Fb(a){var b=rc.exec(a._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,
""));if(b){var c=b[3],d=b[2],f=b[5],e=b[6],h=b[7],g=parseInt(b[4],10);c=[49>=g?2E3+g:999>=g?1900+g:g,Gb.indexOf(c),parseInt(d,10),parseInt(f,10),parseInt(e,10)];h&&c.push(parseInt(h,10));a:{if(h=b[1])if(h=Hb.indexOf(h),d=(new Date(c[0],c[1],c[2])).getDay(),h!==d){n(a).weekdayMismatch=!0;h=a._isValid=!1;break a}h=!0}h&&(a._a=c,(h=b[8])?b=sc[h]:b[9]?b=0:(b=parseInt(b[10],10),h=b%100,b=(b-h)/100*60+h),a._tzm=b,a._d=qa.apply(null,a._a),a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),n(a).rfc2822=!0)}else a._isValid=
!1}function tc(a){var b=uc.exec(a._i);null!==b?a._d=new Date(+b[1]):(Eb(a),!1===a._isValid&&(delete a._isValid,Fb(a),!1===a._isValid&&(delete a._isValid,g.createFromInputFallback(a))))}function cb(a){if(a._f===g.ISO_8601)Eb(a);else if(a._f===g.RFC_2822)Fb(a);else{a._a=[];n(a).empty=!0;var b=""+a._i,c,d,f=b.length,e=0;var h=ub(a._f,a._locale).match(tb)||[];for(c=0;c<h.length;c++){var k=h[c];if(d=(b.match(ic(k,a))||[])[0]){var l=b.substr(0,b.indexOf(d));0<l.length&&n(a).unusedInput.push(l);b=b.slice(b.indexOf(d)+
d.length);e+=d.length}if(ha[k]){if(d?n(a).empty=!1:n(a).unusedTokens.push(k),l=a,null!=d&&v(Wa,k))Wa[k](d,l._a,l,k)}else a._strict&&!d&&n(a).unusedTokens.push(k)}n(a).charsLeftOver=f-e;0<b.length&&n(a).unusedInput.push(b);12>=a._a[y]&&!0===n(a).bigHour&&0<a._a[y]&&(n(a).bigHour=void 0);n(a).parsedDateParts=a._a.slice(0);n(a).meridiem=a._meridiem;b=a._a;c=y;f=a._locale;h=a._a[y];e=a._meridiem;null!=e&&(null!=f.meridiemHour?h=f.meridiemHour(h,e):null!=f.isPM&&((f=f.isPM(e))&&12>h&&(h+=12),f||12!==h||
(h=0)));b[c]=h;ab(a);$a(a)}}function vc(a){if(!a._d){var b=Ta(a._i);a._a=mb([b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],function(a){return a&&parseInt(a,10)});ab(a)}}function Ib(a){var b=a._i,c=a._f;a._locale=a._locale||W(a._l);if(null===b||void 0===c&&""===b)return xa({nullInput:!0});"string"===typeof b&&(a._i=b=a._locale.preparse(b));if(T(b))return new na($a(b));if(wa(b))a._d=b;else if(A(c))if(0===a._f.length)n(a).invalidFormat=!0,a._d=new Date(NaN);else{for(b=0;b<a._f.length;b++){c=
0;var d=Pa({},a);null!=a._useUTC&&(d._useUTC=a._useUTC);d._f=a._f[b];cb(d);if(Oa(d)&&(c+=n(d).charsLeftOver,c+=10*n(d).unusedTokens.length,n(d).score=c,null==f||c<f)){var f=c;var e=d}}S(a,e||d)}else c?cb(a):wc(a);Oa(a)||(a._d=null);return a}function wc(a){var b=a._i;B(b)?a._d=new Date(g.now()):wa(b)?a._d=new Date(b.valueOf()):"string"===typeof b?tc(a):A(b)?(a._a=mb(b.slice(0),function(a){return parseInt(a,10)}),ab(a)):ma(b)?vc(a):fa(b)?a._d=new Date(b):g.createFromInputFallback(a)}function nb(a,b,
c,d,f){var e={};if(!0===c||!1===c)d=c,c=void 0;var h;if(h=ma(a))a:if(h=a,Object.getOwnPropertyNames)h=0===Object.getOwnPropertyNames(h).length;else{for(var g in h)if(h.hasOwnProperty(g)){h=!1;break a}h=!0}if(h||A(a)&&0===a.length)a=void 0;e._isAMomentObject=!0;e._useUTC=e._isUTC=f;e._l=c;e._i=a;e._f=b;e._strict=d;a=new na($a(Ib(e)));a._nextDay&&(a.add(1,"d"),a._nextDay=void 0);return a}function u(a,b,c,d){return nb(a,b,c,d,!1)}function Jb(a,b){var c;1===b.length&&A(b[0])&&(b=b[0]);if(!b.length)return u();
var d=b[0];for(c=1;c<b.length;++c)if(!b[c].isValid()||b[c][a](d))d=b[c];return d}function Fa(a){var b=Ta(a);a=b.year||0;var c=b.quarter||0,d=b.month||0,f=b.week||0,e=b.day||0,h=b.hour||0,g=b.minute||0,k=b.second||0,m=b.millisecond||0;a:{for(var n in b)if(-1===w.call(ua,n)||null!=b[n]&&isNaN(b[n])){b=!1;break a}n=!1;for(var p=0;p<ua.length;++p)if(b[ua[p]]){if(n){b=!1;break a}parseFloat(b[ua[p]])!==l(b[ua[p]])&&(n=!0)}b=!0}this._isValid=b;this._milliseconds=+m+1E3*k+6E4*g+36E5*h;this._days=+e+7*f;this._months=
+d+3*c+12*a;this._data={};this._locale=W();this._bubble()}function db(a){return a instanceof Fa}function eb(a){return 0>a?-1*Math.round(-1*a):Math.round(a)}function Kb(a,b){m(a,0,0,function(){var a=this.utcOffset(),d="+";0>a&&(a=-a,d="-");return d+O(~~(a/60),2)+b+O(~~a%60,2)})}function fb(a,b){a=(b||"").match(a);if(null===a)return null;a=((a[a.length-1]||[])+"").match(xc)||["-",0,0];b=+(60*a[1])+l(a[2]);return 0===b?0:"+"===a[0]?b:-b}function gb(a,b){return b._isUTC?(b=b.clone(),a=(T(a)||wa(a)?a.valueOf():
u(a).valueOf())-b.valueOf(),b._d.setTime(b._d.valueOf()+a),g.updateOffset(b,!1),b):u(a).local()}function Lb(){return this.isValid()?this._isUTC&&0===this._offset:!1}function J(a,b){var c=a;db(a)?c={ms:a._milliseconds,d:a._days,M:a._months}:fa(a)?(c={},b?c[b]=a:c.milliseconds=a):(b=yc.exec(a))?(c="-"===b[1]?-1:1,c={y:0,d:l(b[M])*c,h:l(b[y])*c,m:l(b[I])*c,s:l(b[Q])*c,ms:l(eb(1E3*b[ca]))*c}):(b=zc.exec(a))?(c="-"===b[1]?-1:1,c={y:da(b[2],c),M:da(b[3],c),w:da(b[4],c),d:da(b[5],c),h:da(b[6],c),m:da(b[7],
c),s:da(b[8],c)}):null==c?c={}:"object"===typeof c&&("from"in c||"to"in c)&&(b=u(c.from),c=u(c.to),b.isValid()&&c.isValid()?(c=gb(c,b),b.isBefore(c)?c=Mb(b,c):(c=Mb(c,b),c.milliseconds=-c.milliseconds,c.months=-c.months),b=c):b={milliseconds:0,months:0},c={},c.ms=b.milliseconds,c.M=b.months);c=new Fa(c);db(a)&&v(a,"_locale")&&(c._locale=a._locale);return c}function da(a,b){a=a&&parseFloat(a.replace(",","."));return(isNaN(a)?0:a)*b}function Mb(a,b){var c={milliseconds:0,months:0};c.months=b.month()-
a.month()+12*(b.year()-a.year());a.clone().add(c.months,"M").isAfter(b)&&--c.months;c.milliseconds=+b-+a.clone().add(c.months,"M");return c}function Nb(a,b){return function(c,d){if(null!==d&&!isNaN(+d)){qb(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.");var f=c;c=d;d=f}c=J("string"===typeof c?+c:c,d);Ob(this,c,a);return this}}function Ob(a,b,c,d){var f=b._milliseconds,e=eb(b._days);
b=eb(b._months);a.isValid()&&(d=null==d?!0:d,b&&wb(a,Aa(a,"Month")+b*c),e&&vb(a,"Date",Aa(a,"Date")+e*c),f&&a._d.setTime(a._d.valueOf()+f*c),d&&g.updateOffset(a,e||b))}function hb(a,b){var c=12*(b.year()-a.year())+(b.month()-a.month()),d=a.clone().add(c,"months");0>b-d?(a=a.clone().add(c-1,"months"),b=(b-d)/(d-a)):(a=a.clone().add(c+1,"months"),b=(b-d)/(a-d));return-(c+b)||0}function Pb(a){if(void 0===a)return this._locale._abbr;a=W(a);null!=a&&(this._locale=a);return this}function Qb(){return this._locale}
function Ga(a,b){m(0,[a,a.length],0,b)}function Rb(a,b,c,d,f){if(null==a)return ra(this,d,f).year;var e=ba(a,d,f);b>e&&(b=e);a=zb(a,b,c,d,f);a=qa(a.year,0,a.dayOfYear);this.year(a.getUTCFullYear());this.month(a.getUTCMonth());this.date(a.getUTCDate());return this}function Ac(a,b){b[ca]=l(1E3*("0."+a))}function Sb(a){return a}function Ha(a,b,c,d){var f=W();b=K().set(d,b);return f[c](b,a)}function Tb(a,b,c){fa(a)&&(b=a,a=void 0);a=a||"";if(null!=b)return Ha(a,b,c,"month");var d=[];for(b=0;12>b;b++)d[b]=
Ha(a,b,c,"month");return d}function ib(a,b,c,d){"boolean"!==typeof a&&(c=b=a,a=!1);fa(b)&&(c=b,b=void 0);b=b||"";var f=W();a=a?f._week.dow:0;if(null!=c)return Ha(b,(c+a)%7,d,"day");f=[];for(c=0;7>c;c++)f[c]=Ha(b,(c+a)%7,d,"day");return f}function Ub(a,b,c,d){b=J(b,c);a._milliseconds+=d*b._milliseconds;a._days+=d*b._days;a._months+=d*b._months;return a._bubble()}function Vb(a){return 0>a?Math.floor(a):Math.ceil(a)}function X(a){return function(){return this.as(a)}}function ea(a){return function(){return this.isValid()?
this._data[a]:NaN}}function Bc(a,b,c,d,f){return f.relativeTime(b||1,!!c,a,d)}function la(a){return(0<a)-(0>a)||+a}function Ia(){if(!this.isValid())return this.localeData().invalidDate();var a=jb(this._milliseconds)/1E3,b=jb(this._days),c=jb(this._months);var d=E(a/60);var f=E(d/60);a%=60;d%=60;var e=E(c/12);c%=12;a=a?a.toFixed(3).replace(/\.?0+$/,""):"";var h=this.asSeconds();if(!h)return"P0D";var g=0>h?"-":"",k=la(this._months)!==la(h)?"-":"",l=la(this._days)!==la(h)?"-":"";h=la(this._milliseconds)!==
la(h)?"-":"";return g+"P"+(e?k+e+"Y":"")+(c?k+c+"M":"")+(b?l+b+"D":"")+(f||d||a?"T":"")+(f?h+f+"H":"")+(d?h+d+"M":"")+(a?h+a+"S":"")}var ec=Array.prototype.some?Array.prototype.some:function(a){for(var b=Object(this),c=b.length>>>0,d=0;d<c;d++)if(d in b&&a.call(this,b[d],d,b))return!0;return!1};var Qa=g.momentProperties=[],Ra=!1,rb={};g.suppressDeprecationWarnings=!1;g.deprecationHandler=null;var Cc=Object.keys?Object.keys:function(a){var b,c=[];for(b in a)v(a,b)&&c.push(b);return c};var oa={},z=
{},tb=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,za=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Ua={},ha={},Wb=/\d/,D=/\d\d/,Xb=/\d{3}/,kb=/\d{4}/,Ja=/[+-]?\d{6}/,t=/\d\d?/,Yb=/\d\d\d\d?/,Zb=/\d\d\d\d\d\d?/,Ka=/\d{1,3}/,lb=/\d{1,4}/,La=/[+-]?\d{1,6}/,Dc=/\d+/,Ma=/[+-]?\d+/,Ec=/Z|[+-]\d\d:?\d\d/gi,Na=/Z|[+-]\d\d(?::?\d\d)?/gi,va=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,
Va={},Wa={},H=0,P=1,M=2,y=3,I=4,Q=5,ca=6,mc=7,nc=8;m("Y",0,0,function(){var a=this.year();return 9999>=a?""+a:"+"+a});m(0,["YY",2],0,function(){return this.year()%100});m(0,["YYYY",4],0,"year");m(0,["YYYYY",5],0,"year");m(0,["YYYYYY",6,!0],0,"year");C("year","y");z.year=1;k("Y",Ma);k("YY",t,D);k("YYYY",lb,kb);k("YYYYY",La,Ja);k("YYYYYY",La,Ja);r(["YYYYY","YYYYYY"],H);r("YYYY",function(a,b){b[H]=2===a.length?g.parseTwoDigitYear(a):l(a)});r("YY",function(a,b){b[H]=g.parseTwoDigitYear(a)});r("Y",function(a,
b){b[H]=parseInt(a,10)});g.parseTwoDigitYear=function(a){return l(a)+(68<l(a)?1900:2E3)};var $b=ia("FullYear",!0);var w=Array.prototype.indexOf?Array.prototype.indexOf:function(a){var b;for(b=0;b<this.length;++b)if(this[b]===a)return b;return-1};m("M",["MM",2],"Mo",function(){return this.month()+1});m("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)});m("MMMM",0,0,function(a){return this.localeData().months(this,a)});C("month","M");z.month=8;k("M",t);k("MM",t,D);k("MMM",function(a,
b){return b.monthsShortRegex(a)});k("MMMM",function(a,b){return b.monthsRegex(a)});r(["M","MM"],function(a,b){b[P]=l(a)-1});r(["MMM","MMMM"],function(a,b,c,d){d=c._locale.monthsParse(a,d,c._strict);null!=d?b[P]=d:n(c).invalidMonth=a});var ac=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Gb="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");m("w",["ww",2],"wo","week");m("W",["WW",2],"Wo","isoWeek");C("week","w");C("isoWeek","W");z.week=5;z.isoWeek=5;k("w",t);k("ww",t,D);k("W",t);k("WW",t,D);pa(["w","ww",
"W","WW"],function(a,b,c,d){b[d.substr(0,1)]=l(a)});m("d",0,"do","day");m("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)});m("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)});m("dddd",0,0,function(a){return this.localeData().weekdays(this,a)});m("e",0,0,"weekday");m("E",0,0,"isoWeekday");C("day","d");C("weekday","e");C("isoWeekday","E");z.day=11;z.weekday=11;z.isoWeekday=11;k("d",t);k("e",t);k("E",t);k("dd",function(a,b){return b.weekdaysMinRegex(a)});k("ddd",
function(a,b){return b.weekdaysShortRegex(a)});k("dddd",function(a,b){return b.weekdaysRegex(a)});pa(["dd","ddd","dddd"],function(a,b,c,d){d=c._locale.weekdaysParse(a,d,c._strict);null!=d?b.d=d:n(c).invalidWeekday=a});pa(["d","e","E"],function(a,b,c,d){b[d]=l(a)});var Hb="Sun Mon Tue Wed Thu Fri Sat".split(" ");m("H",["HH",2],0,"hour");m("h",["hh",2],0,Ya);m("k",["kk",2],0,function(){return this.hours()||24});m("hmm",0,0,function(){return""+Ya.apply(this)+O(this.minutes(),2)});m("hmmss",0,0,function(){return""+
Ya.apply(this)+O(this.minutes(),2)+O(this.seconds(),2)});m("Hmm",0,0,function(){return""+this.hours()+O(this.minutes(),2)});m("Hmmss",0,0,function(){return""+this.hours()+O(this.minutes(),2)+O(this.seconds(),2)});Ab("a",!0);Ab("A",!1);C("hour","h");z.hour=13;k("a",Bb);k("A",Bb);k("H",t);k("h",t);k("k",t);k("HH",t,D);k("hh",t,D);k("kk",t,D);k("hmm",Yb);k("hmmss",Zb);k("Hmm",Yb);k("Hmmss",Zb);r(["H","HH"],y);r(["k","kk"],function(a,b,c){a=l(a);b[y]=24===a?0:a});r(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a);
c._meridiem=a});r(["h","hh"],function(a,b,c){b[y]=l(a);n(c).bigHour=!0});r("hmm",function(a,b,c){var d=a.length-2;b[y]=l(a.substr(0,d));b[I]=l(a.substr(d));n(c).bigHour=!0});r("hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[y]=l(a.substr(0,d));b[I]=l(a.substr(d,2));b[Q]=l(a.substr(e));n(c).bigHour=!0});r("Hmm",function(a,b,c){c=a.length-2;b[y]=l(a.substr(0,c));b[I]=l(a.substr(c))});r("Hmmss",function(a,b,c){c=a.length-4;var d=a.length-2;b[y]=l(a.substr(0,c));b[I]=l(a.substr(c,2));b[Q]=l(a.substr(d))});
var Fc=ia("Hours",!0),Db={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",
hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:"January February March April May June July August September October November December".split(" "),monthsShort:Gb,week:{dow:0,doy:6},weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdaysMin:"Su Mo Tu We Th Fr Sa".split(" "),weekdaysShort:Hb,meridiemParse:/[ap]\.?m?\.?/i},x={},ta={},sa,oc=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,
pc=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,qc=/Z|[+-]\d\d(?::?\d\d)?/,Ea=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],bb=
[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],uc=/^\/?Date\((\-?\d+)/i,rc=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,sc={UT:0,GMT:0,EDT:-240,
EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};g.createFromInputFallback=F("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))});g.ISO_8601=function(){};
g.RFC_2822=function(){};var Gc=F("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=u.apply(null,arguments);return this.isValid()&&a.isValid()?a<this?this:a:xa()}),Hc=F("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=u.apply(null,arguments);return this.isValid()&&a.isValid()?a>this?this:a:xa()}),ua="year quarter month week day hour minute second millisecond".split(" ");
Kb("Z",":");Kb("ZZ","");k("Z",Na);k("ZZ",Na);r(["Z","ZZ"],function(a,b,c){c._useUTC=!0;c._tzm=fb(Na,a)});var xc=/([\+\-]|\d\d)/gi;g.updateOffset=function(){};var yc=/^(\-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,zc=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;J.fn=Fa.prototype;J.invalid=function(){return J(NaN)};var Ic=Nb(1,"add"),Jc=Nb(-1,"subtract");g.defaultFormat=
"YYYY-MM-DDTHH:mm:ssZ";g.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var bc=F("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return void 0===a?this.localeData():this.locale(a)});m(0,["gg",2],0,function(){return this.weekYear()%100});m(0,["GG",2],0,function(){return this.isoWeekYear()%100});Ga("gggg","weekYear");Ga("ggggg","weekYear");Ga("GGGG","isoWeekYear");Ga("GGGGG","isoWeekYear");C("weekYear",
"gg");C("isoWeekYear","GG");z.weekYear=1;z.isoWeekYear=1;k("G",Ma);k("g",Ma);k("GG",t,D);k("gg",t,D);k("GGGG",lb,kb);k("gggg",lb,kb);k("GGGGG",La,Ja);k("ggggg",La,Ja);pa(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=l(a)});pa(["gg","GG"],function(a,b,c,d){b[d]=g.parseTwoDigitYear(a)});m("Q",0,"Qo","quarter");C("quarter","Q");z.quarter=7;k("Q",Wb);r("Q",function(a,b){b[P]=3*(l(a)-1)});m("D",["DD",2],"Do","date");C("date","D");z.date=9;k("D",t);k("DD",t,D);k("Do",function(a,b){return a?
b._dayOfMonthOrdinalParse||b._ordinalParse:b._dayOfMonthOrdinalParseLenient});r(["D","DD"],M);r("Do",function(a,b){b[M]=l(a.match(t)[0])});var cc=ia("Date",!0);m("DDD",["DDDD",3],"DDDo","dayOfYear");C("dayOfYear","DDD");z.dayOfYear=4;k("DDD",Ka);k("DDDD",Xb);r(["DDD","DDDD"],function(a,b,c){c._dayOfYear=l(a)});m("m",["mm",2],0,"minute");C("minute","m");z.minute=14;k("m",t);k("mm",t,D);r(["m","mm"],I);var Kc=ia("Minutes",!1);m("s",["ss",2],0,"second");C("second","s");z.second=15;k("s",t);k("ss",t,
D);r(["s","ss"],Q);var Lc=ia("Seconds",!1);m("S",0,0,function(){return~~(this.millisecond()/100)});m(0,["SS",2],0,function(){return~~(this.millisecond()/10)});m(0,["SSS",3],0,"millisecond");m(0,["SSSS",4],0,function(){return 10*this.millisecond()});m(0,["SSSSS",5],0,function(){return 100*this.millisecond()});m(0,["SSSSSS",6],0,function(){return 1E3*this.millisecond()});m(0,["SSSSSSS",7],0,function(){return 1E4*this.millisecond()});m(0,["SSSSSSSS",8],0,function(){return 1E5*this.millisecond()});m(0,
["SSSSSSSSS",9],0,function(){return 1E6*this.millisecond()});C("millisecond","ms");z.millisecond=16;k("S",Ka,Wb);k("SS",Ka,D);k("SSS",Ka,Xb);var Y;for(Y="SSSS";9>=Y.length;Y+="S")k(Y,Dc);for(Y="S";9>=Y.length;Y+="S")r(Y,Ac);var Mc=ia("Milliseconds",!1);m("z",0,0,"zoneAbbr");m("zz",0,0,"zoneName");var e=na.prototype;e.add=Ic;e.calendar=function(a,b){a=a||u();var c=gb(a,this).startOf("day");c=g.calendarFormat(this,c)||"sameElse";b=b&&(L(b[c])?b[c].call(this,a):b[c]);return this.format(b||this.localeData().calendar(c,
this,u(a)))};e.clone=function(){return new na(this)};e.diff=function(a,b,c){if(!this.isValid())return NaN;a=gb(a,this);if(!a.isValid())return NaN;var d=6E4*(a.utcOffset()-this.utcOffset());b=G(b);switch(b){case "year":b=hb(this,a)/12;break;case "month":b=hb(this,a);break;case "quarter":b=hb(this,a)/3;break;case "second":b=(this-a)/1E3;break;case "minute":b=(this-a)/6E4;break;case "hour":b=(this-a)/36E5;break;case "day":b=(this-a-d)/864E5;break;case "week":b=(this-a-d)/6048E5;break;default:b=this-
a}return c?b:E(b)};e.endOf=function(a){a=G(a);if(void 0===a||"millisecond"===a)return this;"date"===a&&(a="day");return this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")};e.format=function(a){a||(a=this.isUtc()?g.defaultFormatUtc:g.defaultFormat);a=ya(this,a);return this.localeData().postformat(a)};e.from=function(a,b){return this.isValid()&&(T(a)&&a.isValid()||u(a).isValid())?J({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()};e.fromNow=function(a){return this.from(u(),
a)};e.to=function(a,b){return this.isValid()&&(T(a)&&a.isValid()||u(a).isValid())?J({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()};e.toNow=function(a){return this.to(u(),a)};e.get=function(a){a=G(a);return L(this[a])?this[a]():this};e.invalidAt=function(){return n(this).overflow};e.isAfter=function(a,b){a=T(a)?a:u(a);if(!this.isValid()||!a.isValid())return!1;b=G(B(b)?"millisecond":b);return"millisecond"===b?this.valueOf()>a.valueOf():a.valueOf()<this.clone().startOf(b).valueOf()};
e.isBefore=function(a,b){a=T(a)?a:u(a);if(!this.isValid()||!a.isValid())return!1;b=G(B(b)?"millisecond":b);return"millisecond"===b?this.valueOf()<a.valueOf():this.clone().endOf(b).valueOf()<a.valueOf()};e.isBetween=function(a,b,c,d){d=d||"()";return("("===d[0]?this.isAfter(a,c):!this.isBefore(a,c))&&(")"===d[1]?this.isBefore(b,c):!this.isAfter(b,c))};e.isSame=function(a,b){a=T(a)?a:u(a);if(!this.isValid()||!a.isValid())return!1;b=G(b||"millisecond");if("millisecond"===b)return this.valueOf()===a.valueOf();
a=a.valueOf();return this.clone().startOf(b).valueOf()<=a&&a<=this.clone().endOf(b).valueOf()};e.isSameOrAfter=function(a,b){return this.isSame(a,b)||this.isAfter(a,b)};e.isSameOrBefore=function(a,b){return this.isSame(a,b)||this.isBefore(a,b)};e.isValid=function(){return Oa(this)};e.lang=bc;e.locale=Pb;e.localeData=Qb;e.max=Hc;e.min=Gc;e.parsingFlags=function(){return S({},n(this))};e.set=function(a,b){if("object"===typeof a){a=Ta(a);b=fc(a);for(var c=0;c<b.length;c++)this[b[c].unit](a[b[c].unit])}else if(a=
G(a),L(this[a]))return this[a](b);return this};e.startOf=function(a){a=G(a);switch(a){case "year":this.month(0);case "quarter":case "month":this.date(1);case "week":case "isoWeek":case "day":case "date":this.hours(0);case "hour":this.minutes(0);case "minute":this.seconds(0);case "second":this.milliseconds(0)}"week"===a&&this.weekday(0);"isoWeek"===a&&this.isoWeekday(1);"quarter"===a&&this.month(3*Math.floor(this.month()/3));return this};e.subtract=Jc;e.toArray=function(){return[this.year(),this.month(),
this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]};e.toObject=function(){return{years:this.year(),months:this.month(),date:this.date(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}};e.toDate=function(){return new Date(this.valueOf())};e.toISOString=function(a){if(!this.isValid())return null;var b=(a=!0!==a)?this.clone().utc():this;return 0>b.year()||9999<b.year()?ya(b,a?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):
L(Date.prototype.toISOString)?a?this.toDate().toISOString():(new Date(this.valueOf()+6E4*this.utcOffset())).toISOString().replace("Z",ya(b,"Z")):ya(b,a?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")};e.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var a="moment",b="";this.isLocal()||(a=0===this.utcOffset()?"moment.utc":"moment.parseZone",b="Z");a="["+a+'("]';var c=0<=this.year()&&9999>=this.year()?"YYYY":"YYYYYY";return this.format(a+c+"-MM-DD[T]HH:mm:ss.SSS"+
(b+'[")]'))};e.toJSON=function(){return this.isValid()?this.toISOString():null};e.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")};e.unix=function(){return Math.floor(this.valueOf()/1E3)};e.valueOf=function(){return this._d.valueOf()-6E4*(this._offset||0)};e.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}};e.year=$b;e.isLeapYear=function(){return V(this.year())};e.weekYear=function(a){return Rb.call(this,
a,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)};e.isoWeekYear=function(a){return Rb.call(this,a,this.isoWeek(),this.isoWeekday(),1,4)};e.quarter=e.quarters=function(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)};e.month=xb;e.daysInMonth=function(){return Ba(this.year(),this.month())};e.week=e.weeks=function(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")};e.isoWeek=e.isoWeeks=function(a){var b=
ra(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")};e.weeksInYear=function(){var a=this.localeData()._week;return ba(this.year(),a.dow,a.doy)};e.isoWeeksInYear=function(){return ba(this.year(),1,4)};e.date=cc;e.day=e.days=function(a){if(!this.isValid())return null!=a?this:NaN;var b=this._isUTC?this._d.getUTCDay():this._d.getDay();if(null!=a){var c=this.localeData();"string"===typeof a&&(isNaN(a)?(a=c.weekdaysParse(a),a="number"===typeof a?a:null):a=parseInt(a,10));return this.add(a-b,"d")}return b};
e.weekday=function(a){if(!this.isValid())return null!=a?this:NaN;var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")};e.isoWeekday=function(a){if(!this.isValid())return null!=a?this:NaN;if(null!=a){var b=this.localeData();a="string"===typeof a?b.weekdaysParse(a)%7||7:isNaN(a)?null:a;return this.day(this.day()%7?a:a-7)}return this.day()||7};e.dayOfYear=function(a){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864E5)+1;return null==a?b:
this.add(a-b,"d")};e.hour=e.hours=Fc;e.minute=e.minutes=Kc;e.second=e.seconds=Lc;e.millisecond=e.milliseconds=Mc;e.utcOffset=function(a,b,c){var d=this._offset||0,e;if(!this.isValid())return null!=a?this:NaN;if(null!=a){if("string"===typeof a){if(a=fb(Na,a),null===a)return this}else 16>Math.abs(a)&&!c&&(a*=60);!this._isUTC&&b&&(e=15*-Math.round(this._d.getTimezoneOffset()/15));this._offset=a;this._isUTC=!0;null!=e&&this.add(e,"m");d!==a&&(!b||this._changeInProgress?Ob(this,J(a-d,"m"),1,!1):this._changeInProgress||
(this._changeInProgress=!0,g.updateOffset(this,!0),this._changeInProgress=null));return this}return this._isUTC?d:15*-Math.round(this._d.getTimezoneOffset()/15)};e.utc=function(a){return this.utcOffset(0,a)};e.local=function(a){this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(15*-Math.round(this._d.getTimezoneOffset()/15),"m"));return this};e.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var a=fb(Ec,this._i);null!=a?this.utcOffset(a):
this.utcOffset(0,!0)}return this};e.hasAlignedHourOffset=function(a){if(!this.isValid())return!1;a=a?u(a).utcOffset():0;return 0===(this.utcOffset()-a)%60};e.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()};e.isLocal=function(){return this.isValid()?!this._isUTC:!1};e.isUtcOffset=function(){return this.isValid()?this._isUTC:!1};e.isUtc=Lb;e.isUTC=Lb;e.zoneAbbr=function(){return this._isUTC?"UTC":""};e.zoneName=function(){return this._isUTC?
"Coordinated Universal Time":""};e.dates=F("dates accessor is deprecated. Use date instead.",cc);e.months=F("months accessor is deprecated. Use month instead",xb);e.years=F("years accessor is deprecated. Use year instead",$b);e.zone=F("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(a,b){return null!=a?("string"!==typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()});e.isDSTShifted=F("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",
function(){if(!B(this._isDSTShifted))return this._isDSTShifted;var a={};Pa(a,this);a=Ib(a);if(a._a){var b=a._isUTC?K(a._a):u(a._a);this._isDSTShifted=this.isValid()&&0<ob(a._a,b.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted});var q=Sa.prototype;q.calendar=function(a,b,c){a=this._calendar[a]||this._calendar.sameElse;return L(a)?a.call(b,c):a};q.longDateFormat=function(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];if(b||!c)return b;this._longDateFormat[a]=
c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)});return this._longDateFormat[a]};q.invalidDate=function(){return this._invalidDate};q.ordinal=function(a){return this._ordinal.replace("%d",a)};q.preparse=Sb;q.postformat=Sb;q.relativeTime=function(a,b,c,d){var e=this._relativeTime[c];return L(e)?e(a,b,c,d):e.replace(/%d/i,a)};q.pastFuture=function(a,b){a=this._relativeTime[0<a?"future":"past"];return L(a)?a(b):a.replace(/%s/i,b)};q.set=function(a){var b;for(b in a){var c=a[b];L(c)?this[b]=
c:this["_"+b]=c}this._config=a;this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)};q.months=function(a,b){return a?A(this._months)?this._months[a.month()]:this._months[(this._months.isFormat||ac).test(b)?"format":"standalone"][a.month()]:A(this._months)?this._months:this._months.standalone};q.monthsShort=function(a,b){return a?A(this._monthsShort)?this._monthsShort[a.month()]:this._monthsShort[ac.test(b)?"format":"standalone"][a.month()]:
A(this._monthsShort)?this._monthsShort:this._monthsShort.standalone};q.monthsParse=function(a,b,c){var d;if(this._monthsParseExact){a:{a=a.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],d=0;12>d;++d){var e=K([2E3,d]);this._shortMonthsParse[d]=this.monthsShort(e,"").toLocaleLowerCase();this._longMonthsParse[d]=this.months(e,"").toLocaleLowerCase()}if(c)b="MMM"===b?w.call(this._shortMonthsParse,a):w.call(this._longMonthsParse,a);
else if("MMM"===b){b=w.call(this._shortMonthsParse,a);if(-1!==b)break a;b=w.call(this._longMonthsParse,a)}else{b=w.call(this._longMonthsParse,a);if(-1!==b)break a;b=w.call(this._shortMonthsParse,a)}b=-1!==b?b:null}return b}this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]);for(d=0;12>d;d++)if(e=K([2E3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+
this.monthsShort(e,"").replace(".","")+"$","i")),c||this._monthsParse[d]||(e="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=new RegExp(e.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[d].test(a)||c&&"MMM"===b&&this._shortMonthsParse[d].test(a)||!c&&this._monthsParse[d].test(a))return d};q.monthsRegex=function(a){if(this._monthsParseExact)return v(this,"_monthsRegex")||yb.call(this),a?this._monthsStrictRegex:this._monthsRegex;v(this,"_monthsRegex")||(this._monthsRegex=
va);return this._monthsStrictRegex&&a?this._monthsStrictRegex:this._monthsRegex};q.monthsShortRegex=function(a){if(this._monthsParseExact)return v(this,"_monthsRegex")||yb.call(this),a?this._monthsShortStrictRegex:this._monthsShortRegex;v(this,"_monthsShortRegex")||(this._monthsShortRegex=va);return this._monthsShortStrictRegex&&a?this._monthsShortStrictRegex:this._monthsShortRegex};q.week=function(a){return ra(a,this._week.dow,this._week.doy).week};q.firstDayOfYear=function(){return this._week.doy};
q.firstDayOfWeek=function(){return this._week.dow};q.weekdays=function(a,b){return a?A(this._weekdays)?this._weekdays[a.day()]:this._weekdays[this._weekdays.isFormat.test(b)?"format":"standalone"][a.day()]:A(this._weekdays)?this._weekdays:this._weekdays.standalone};q.weekdaysMin=function(a){return a?this._weekdaysMin[a.day()]:this._weekdaysMin};q.weekdaysShort=function(a){return a?this._weekdaysShort[a.day()]:this._weekdaysShort};q.weekdaysParse=function(a,b,c){var d;if(this._weekdaysParseExact)return lc.call(this,
a,b,c);this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]);for(d=0;7>d;d++){var e=K([2E3,1]).day(d);c&&!this._fullWeekdaysParse[d]&&(this._fullWeekdaysParse[d]=new RegExp("^"+this.weekdays(e,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[d]=new RegExp("^"+this.weekdaysShort(e,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[d]=new RegExp("^"+this.weekdaysMin(e,"").replace(".","\\.?")+"$","i"));this._weekdaysParse[d]||
(e="^"+this.weekdays(e,"")+"|^"+this.weekdaysShort(e,"")+"|^"+this.weekdaysMin(e,""),this._weekdaysParse[d]=new RegExp(e.replace(".",""),"i"));if(c&&"dddd"===b&&this._fullWeekdaysParse[d].test(a)||c&&"ddd"===b&&this._shortWeekdaysParse[d].test(a)||c&&"dd"===b&&this._minWeekdaysParse[d].test(a)||!c&&this._weekdaysParse[d].test(a))return d}};q.weekdaysRegex=function(a){if(this._weekdaysParseExact)return v(this,"_weekdaysRegex")||Xa.call(this),a?this._weekdaysStrictRegex:this._weekdaysRegex;v(this,"_weekdaysRegex")||
(this._weekdaysRegex=va);return this._weekdaysStrictRegex&&a?this._weekdaysStrictRegex:this._weekdaysRegex};q.weekdaysShortRegex=function(a){if(this._weekdaysParseExact)return v(this,"_weekdaysRegex")||Xa.call(this),a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex;v(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=va);return this._weekdaysShortStrictRegex&&a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex};q.weekdaysMinRegex=function(a){if(this._weekdaysParseExact)return v(this,
"_weekdaysRegex")||Xa.call(this),a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex;v(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=va);return this._weekdaysMinStrictRegex&&a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex};q.isPM=function(a){return"p"===(a+"").toLowerCase().charAt(0)};q.meridiem=function(a,b,c){return 11<a?c?"pm":"PM":c?"am":"AM"};ja("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10;b=1===l(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":
"th";return a+b}});g.lang=F("moment.lang is deprecated. Use moment.locale instead.",ja);g.langData=F("moment.langData is deprecated. Use moment.localeData instead.",W);var R=Math.abs,Nc=X("ms"),Oc=X("s"),Pc=X("m"),Qc=X("h"),Rc=X("d"),Sc=X("w"),Tc=X("M"),Uc=X("y"),Vc=ea("milliseconds"),Wc=ea("seconds"),Xc=ea("minutes"),Yc=ea("hours"),Zc=ea("days"),$c=ea("months"),ad=ea("years"),Z=Math.round,N={ss:44,s:45,m:45,h:22,d:26,M:11},jb=Math.abs,p=Fa.prototype;p.isValid=function(){return this._isValid};p.abs=
function(){var a=this._data;this._milliseconds=R(this._milliseconds);this._days=R(this._days);this._months=R(this._months);a.milliseconds=R(a.milliseconds);a.seconds=R(a.seconds);a.minutes=R(a.minutes);a.hours=R(a.hours);a.months=R(a.months);a.years=R(a.years);return this};p.add=function(a,b){return Ub(this,a,b,1)};p.subtract=function(a,b){return Ub(this,a,b,-1)};p.as=function(a){if(!this.isValid())return NaN;var b=this._milliseconds;a=G(a);if("month"===a||"year"===a){var c=this._days+b/864E5;c=this._months+
4800*c/146097;return"month"===a?c:c/12}c=this._days+Math.round(146097*this._months/4800);switch(a){case "week":return c/7+b/6048E5;case "day":return c+b/864E5;case "hour":return 24*c+b/36E5;case "minute":return 1440*c+b/6E4;case "second":return 86400*c+b/1E3;case "millisecond":return Math.floor(864E5*c)+b;default:throw Error("Unknown unit "+a);}};p.asMilliseconds=Nc;p.asSeconds=Oc;p.asMinutes=Pc;p.asHours=Qc;p.asDays=Rc;p.asWeeks=Sc;p.asMonths=Tc;p.asYears=Uc;p.valueOf=function(){return this.isValid()?
this._milliseconds+864E5*this._days+this._months%12*2592E6+31536E6*l(this._months/12):NaN};p._bubble=function(){var a=this._milliseconds,b=this._days,c=this._months,d=this._data;0<=a&&0<=b&&0<=c||0>=a&&0>=b&&0>=c||(a+=864E5*Vb(146097*c/4800+b),c=b=0);d.milliseconds=a%1E3;a=E(a/1E3);d.seconds=a%60;a=E(a/60);d.minutes=a%60;a=E(a/60);d.hours=a%24;b+=E(a/24);a=E(4800*b/146097);c+=a;b-=Vb(146097*a/4800);a=E(c/12);d.days=b;d.months=c%12;d.years=a;return this};p.clone=function(){return J(this)};p.get=function(a){a=
G(a);return this.isValid()?this[a+"s"]():NaN};p.milliseconds=Vc;p.seconds=Wc;p.minutes=Xc;p.hours=Yc;p.days=Zc;p.weeks=function(){return E(this.days()/7)};p.months=$c;p.years=ad;p.humanize=function(a){if(!this.isValid())return this.localeData().invalidDate();var b=this.localeData();var c=!a;var d=J(this).abs(),e=Z(d.as("s")),g=Z(d.as("m")),h=Z(d.as("h")),k=Z(d.as("d")),l=Z(d.as("M"));d=Z(d.as("y"));e=e<=N.ss&&["s",e]||e<N.s&&["ss",e]||1>=g&&["m"]||g<N.m&&["mm",g]||1>=h&&["h"]||h<N.h&&["hh",h]||1>=
k&&["d"]||k<N.d&&["dd",k]||1>=l&&["M"]||l<N.M&&["MM",l]||1>=d&&["y"]||["yy",d];e[2]=c;e[3]=0<+this;e[4]=b;c=Bc.apply(null,e);a&&(c=b.pastFuture(+this,c));return b.postformat(c)};p.toISOString=Ia;p.toString=Ia;p.toJSON=Ia;p.locale=Pb;p.localeData=Qb;p.toIsoString=F("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Ia);p.lang=bc;m("X",0,0,"unix");m("x",0,0,"valueOf");k("x",Ma);k("X",/[+-]?\d+(\.\d{1,3})?/);r("X",function(a,b,c){c._d=new Date(1E3*parseFloat(a,10))});
r("x",function(a,b,c){c._d=new Date(l(a))});g.version="2.22.2";var dc=u;g.fn=e;g.min=function(){var a=[].slice.call(arguments,0);return Jb("isBefore",a)};g.max=function(){var a=[].slice.call(arguments,0);return Jb("isAfter",a)};g.now=function(){return Date.now?Date.now():+new Date};g.utc=K;g.unix=function(a){return u(1E3*a)};g.months=function(a,b){return Tb(a,b,"months")};g.isDate=wa;g.locale=ja;g.invalid=xa;g.duration=J;g.isMoment=T;g.weekdays=function(a,b,c){return ib(a,b,c,"weekdays")};g.parseZone=
function(){return u.apply(null,arguments).parseZone()};g.localeData=W;g.isDuration=db;g.monthsShort=function(a,b){return Tb(a,b,"monthsShort")};g.weekdaysMin=function(a,b,c){return ib(a,b,c,"weekdaysMin")};g.defineLocale=Za;g.updateLocale=function(a,b){if(null!=b){var c=Db;var d=Da(a);null!=d&&(c=d._config);b=sb(c,b);b=new Sa(b);b.parentLocale=x[a];x[a]=b;ja(a)}else null!=x[a]&&(null!=x[a].parentLocale?x[a]=x[a].parentLocale:null!=x[a]&&delete x[a]);return x[a]};g.locales=function(){return Cc(x)};
g.weekdaysShort=function(a,b,c){return ib(a,b,c,"weekdaysShort")};g.normalizeUnits=G;g.relativeTimeRounding=function(a){return void 0===a?Z:"function"===typeof a?(Z=a,!0):!1};g.relativeTimeThreshold=function(a,b){if(void 0===N[a])return!1;if(void 0===b)return N[a];N[a]=b;"s"===a&&(N.ss=b-1);return!0};g.calendarFormat=function(a,b){a=a.diff(b,"days",!0);return-6>a?"sameElse":-1>a?"lastWeek":0>a?"lastDay":1>a?"sameDay":2>a?"nextDay":7>a?"nextWeek":"sameElse"};g.prototype=e;g.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",
DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"YYYY-[W]WW",MONTH:"YYYY-MM"};return g})});;
;
/* module-key = 'jira.webresources:momentjs', location = '/static/lib/moment/moment.lib.js' */
define("jira/moment/moment.lib",["atlassian/libs/moment-2.22.2"],function(n){return n});;
;
/* module-key = 'jira.webresources:momentjs', location = '/static/lib/moment/moment.jira.formatter.js' */
define("jira/moment/moment.jira.formatter",["underscore","exports"],function(t,e){"use strict";function r(e){return u[e]||t.reduce(e,function(t,e){return t+(u[e]||e)},"")}function n(e){var n=!1,u=!1,a="",o=t.reduce(e,function(t,e,o,i){return u?u=!1:"'"===e?(a&&(t+=r(a),a=""),"'"===i[o+1]?(t+=e,u=!0):(t+=n?"]":"[",n=!n)):n?t+=e:/[a-zA-Z]/.test(e)?a&&a[a.length-1]!==e?(t+=r(a),a=e):a+=e:(a&&(t+=r(a),a=""),t+=e),t},"");return a&&(o+=r(a)),o}var u={d:"D",y:"Y",a:"A",E:"d",u:"d",Z:"ZZ",z:"[GMT]ZZ",XX:"ZZ",XXX:"Z"};e.translateSimpleDateFormat=n});;
;
/* module-key = 'jira.webresources:momentjs', location = '/static/lib/moment/moment.jira.i18n.js' */
!function(){"use strict";var e;define("jira/moment/moment.jira.datetime-formats",["wrm/data"],function(t){return e||(e=t.claim("jira.core:dateFormatProvider.allFormats")),e})}(),define("jira/moment/moment.jira.i18n",["jira/moment/moment.lib","jira/moment/moment.jira.datetime-formats","jira/moment/moment.jira.formatter","jira/util/formatter"],function(e,t,m,a){"use strict";var o=t.dateFormats,r=t.lookAndFeelFormats;return e.locale("jira",{months:o.months,monthsShort:o.monthsShort,weekdays:o.weekdays,weekdaysShort:o.weekdaysShort,weekdaysMin:o.weekdaysShort,longDateFormat:{LT:m.translateSimpleDateFormat(r.time),L:m.translateSimpleDateFormat(r.day),LL:m.translateSimpleDateFormat(r.dmy),LLL:m.translateSimpleDateFormat(r.complete)},meridiem:function(e){return o.meridiem[+(e>11)]},calendar:{sameDay:"LLL",nextDay:"LLL",nextWeek:"LLL",lastDay:"LLL",lastWeek:"LLL",sameElse:"LLL"},relativeTime:{future:a.format("in {0}","%s"),past:a.format("{0} ago","%s"),s:"a few seconds",m:"a minute",mm:a.format("{0} minutes","%d"),h:"an hour",hh:a.format("{0} hours","%d"),d:"a day",dd:a.format("{0} days","%d"),M:"a month",MM:a.format("{0} months","%d"),y:"a year",yy:a.format("{0} years","%d")}}),e});;
;
/* module-key = 'jira.webresources:momentjs', location = '/static/lib/moment/moment.js' */
define("jira/moment",["jira/moment/moment.jira.i18n"],function(t){return t.splitDate=function(t,n){return Date.splitDate(t,n)},t});;
;
/* module-key = 'jira.webresources:momentjs', location = '/static/lib/moment/moment.legacy.js' */
!function(){AJS.namespace("JIRA.translateSimpleDateFormat",null,require("jira/moment/moment.jira.formatter").translateSimpleDateFormat),AJS.namespace("window.moment",null,require("jira/moment"))}();;
;
/* module-key = 'jira.webresources:jquery-livestamp', location = '/includes/jquery/plugins/livestamp/time.js' */
define("jira/jquery/plugins/livestamp/time",["jira/util/formatter","jquery","jira/moment","jira/util/data/meta"],function(e,t,n,o){"use strict";function r(e,t){this.key=e,this.isAge=t}function a(t,n,o){return t in I?e.format(I[t],o):null}function i(e){switch(e.key){case"short":case"shortAge":return"ll";case"long":case"longAge":return"LL";case"full":case"fullAge":case"timestamp":return"LLL";default:return null}}function u(e){return e.clone().hours(0).minutes(0).seconds(0).milliseconds(0)}function l(e,t){var n=u(e);return n.clone().subtract("d",1)<=t&&t<n}function m(e,t){var n=u(e).add("d",1),o=n.clone().add("d",1);return n<=t&&t<o}function s(e,t){return Math.floor(t.diff(e,"minutes",!0))}function c(e,t){var n=t.diff(e,"hours",!0);return Math.round(n)}function d(e,t){return Math.floor(t.diff(e,"days",!0))}function g(e,t){var n=i(t);return e.format(n)}function f(e,t,o){if(o=o||n(),e<=o){if(e>o.clone().subtract("m",1))return a("aMomentAgo",t);if(e>o.clone().subtract("m",2))return a("oneMinuteAgo",t);if(e>o.clone().subtract("m",50))return a("xMinutesAgo",t,s(e,o));if(e>o.clone().subtract("m",90))return a("oneHourAgo",t);if(l(o,e)&&e<o.clone().subtract("h",5))return a("oneDayAgo",t);if(e>o.clone().subtract("d",1))return a("xHoursAgo",t,c(e,o));if(e>o.clone().subtract("d",7))return a("xDaysAgo",t,Math.max(d(e,o),2));if(e>o.clone().subtract("d",8))return a("oneWeekAgo",t)}else{if(e<o.clone().add("m",1))return a("inAMoment",t);if(e<o.clone().add("m",2))return a("inOneMinute",t);if(e<o.clone().add("m",50))return a("inXMinutes",t,s(o,e));if(e<o.clone().add("m",90))return a("inOneHour",t);if(m(o,e)&&e>o.clone().add("h",5))return a("inOneDay",t);if(e<o.clone().add("d",1))return a("inXHours",t,c(o,e));if(e<o.clone().add("d",7))return a("inXDays",t,Math.max(d(o,e),2));if(e<o.clone().add("d",8))return a("inOneWeek",t)}return g(e,t)}var v={},x=o.getBoolean("date-relativize");r.types={};for(var A,h=["shortAge","longAge","fullAge","short","long","full","timestamp"],T=0,y=h.length;T<y;T++)A=h[T],r.types[A]=new r(A,-1!==A.toLowerCase().indexOf("age"));var I={};return v.FormatType=r,v.formatDate=function(e,t,n){return e&&t?(x||n)&&t.isAge?f(e,t):g(e,t):null},v.setRelativeTranslations=function(e){for(var t in e)I[t]=e[t]},v.restoreDefaultRelativeTranslations=function(){this.setRelativeTranslations({inAMoment:"Now",inOneMinute:"In 1 minute",inXMinutes:"In {0} minutes",inOneHour:"In 1 hour",inXHours:"In {0} hours",inOneDay:"Tomorrow",inXDays:"In {0} days",inOneWeek:"In 1 week",aMomentAgo:"Just now",oneMinuteAgo:"1 minute ago",xMinutesAgo:"{0} minutes ago",oneHourAgo:"1 hour ago",xHoursAgo:"{0} hours ago",oneDayAgo:"Yesterday",xDaysAgo:"{0} days ago",oneWeekAgo:"1 week ago"})},v.restoreDefaultRelativeTranslations(),v.formatDateWithRelativeAge=f,v.formatDateWithFormatString=g,v}),AJS.namespace("JIRA.Time",null,require("jira/jquery/plugins/livestamp/time"));;
;
/* module-key = 'jira.webresources:jquery-livestamp', location = '/includes/jquery/plugins/livestamp/livestamp.js' */
define("jira/jquery/plugins/livestamp/livestamp",["jquery","jira/moment","jira/util/data/meta","jira/jquery/plugins/livestamp/time"],function(t,e,a,i){"use strict";var r,n=a.getBoolean("date-relativize"),u=[],s=function(t,e){t.data("livestampdata",e),u.push(t)},l=function t(){clearTimeout(r),m(),r=setTimeout(t,6e3)},m=function(){u=t.grep(u,function(t){var a,r,u=t.data("livestampdata"),s=t.data("relativize");if(e.isMoment(u)&&t.closest("html").length){a=t.text();var l=t.data("datetime-format");l=l||"fullAge",n||s||(l=l.replace("Age","")),r=i.formatDate(u,i.FormatType.types[l],s),a!==r&&t.text(r)}else t.removeData("livestampdata");return!!t.data("livestampdata")})},o=function(a){return a.each(function(){var a=t(this),i=a.attr("datetime");if(i){var r=isNaN(i)?e(i).utcOffset(i):e(parseInt(i,10));s(a,r)}}),l(),a};return t.fn.livestamp=function(){return o(this)},o}),function(){require("jira/jquery/plugins/livestamp/livestamp")}();;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer-last-saved-by', location = 'js/last-saved-by/LastSavedBy.soy' */
// This file was automatically generated from LastSavedBy.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.WorkflowDesigner.Templates.LastSavedBy.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.WorkflowDesigner == 'undefined') { JIRA.WorkflowDesigner = {}; }
if (typeof JIRA.WorkflowDesigner.Templates == 'undefined') { JIRA.WorkflowDesigner.Templates = {}; }
if (typeof JIRA.WorkflowDesigner.Templates.LastSavedBy == 'undefined') { JIRA.WorkflowDesigner.Templates.LastSavedBy = {}; }


JIRA.WorkflowDesigner.Templates.LastSavedBy.ui = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.updatedDate && opt_data.updateAuthor) {
    var authorName__soy5 = '' + soy.$$escapeHtml(opt_data.updateAuthor.displayName);
    var timeElement__soy8 = '<time datetime="' + soy.$$escapeHtml(opt_data.updatedDate) + '"></time>';
    var wasCurrentUser__soy12 = opt_data.currentUserName == opt_data.updateAuthor.userName;
    output += ((opt_data.icon) ? JIRA.WorkflowDesigner.Templates.LastSavedBy.icon(opt_data) : '') + ((opt_data.state == 'pending-slow') ? soy.$$escapeHtml('Saving changes...') : (wasCurrentUser__soy12) ? soy.$$filterNoAutoescape(AJS.format('Draft last saved by you, {0}',timeElement__soy8)) : soy.$$filterNoAutoescape(AJS.format('Draft last saved by {0}, {1}',authorName__soy5,timeElement__soy8)));
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.LastSavedBy.ui.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.LastSavedBy.ui';
}


JIRA.WorkflowDesigner.Templates.LastSavedBy.icon = function(opt_data, opt_ignored) {
  return '' + ((opt_data.icon == 'wait') ? '<aui-spinner size="small"></aui-spinner>' : aui.icons.icon({useIconFont: true, size: 'small', icon: opt_data.icon, extraClasses: 'last-saved-by__icon-' + opt_data.icon}));
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.LastSavedBy.icon.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.LastSavedBy.icon';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer-last-saved-by', location = 'js/last-saved-by/LastSavedByTemplate.js' */
define("workflow-designer/last-saved-by/template",[],function(){return window.JIRA.WorkflowDesigner.Templates.LastSavedBy});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer-last-saved-by', location = 'js/last-saved-by/LastSavedByModel.js' */
define("workflow-designer/last-saved-by/model",["workflow-designer/backbone"],function(A){return A.Model.extend({defaults:function(){return{icon:"",state:"",currentUserName:"",updatedDate:0,updateAuthor:null}}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer-last-saved-by', location = 'js/last-saved-by/LastSavedByView.js' */
define("workflow-designer/last-saved-by/view",["workflow-designer/last-saved-by/template","workflow-designer/backbone"],function(A,B){return B.Marionette.ItemView.extend({className:"last-saved-by-message",tagName:"span",template:A.ui,modelEvents:{change:"render"},ui:{time:"time"},onRender:function(){this.ui.time.livestamp()}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer-last-saved-by', location = 'js/last-saved-by/LastSavedByController.js' */
define("workflow-designer/last-saved-by/controller",["workflow-designer/backbone","workflow-designer/last-saved-by/model","workflow-designer/last-saved-by/view","jira/util/users/logged-in-user"],function(F,C,E,D){const A=600;const B={displayName:D.fullName(),userName:D.username()};return F.Marionette.Controller.extend({initialize:function(G){this._workflowModel=G.workflowModel;this.region=G.region;this.model=new C();this.view=new E({model:this.model});this.model.set("currentUserName",B.userName);this.listenTo(this._workflowModel,"change:updateAuthor change:updatedDate",this._workflowModelChanged);var H=G.saveStatusService;this.listenTo(H,"state:pending",this._pendingStateHandler);this.listenTo(H,"state:success",this._successStateHandler);this.listenTo(H,"state:failure",this._failureStateHandler)},show:function(){this.region.show(this.view)},onClose:function(){window.clearTimeout(this._pendingStateTimeout)},_workflowModelChanged:function(){if(this._workflowModel.get("updateAuthor")&&this._workflowModel.get("updatedDate")){this.stopListening(this._workflowModel);this.model.set({updateAuthor:this._workflowModel.get("updateAuthor"),updatedDate:this._workflowModel.get("updatedDate")})}},_pendingStateHandler:function(){this.model.set({state:"pending",icon:"wait"});if(!this._pendingStateTimeout){this._pendingStateTimeout=window.setTimeout(function(){delete this._pendingStateTimeout;this.model.set({state:"pending-slow"})}.bind(this),A)}},_successStateHandler:function(G){window.clearTimeout(this._pendingStateTimeout);delete this._pendingStateTimeout;var H=this.model.get("state")==="failure"?this.model.get("icon"):"approve";this.model.set({state:"success",icon:H,updatedDate:G,updateAuthor:B})},_failureStateHandler:function(G){window.clearTimeout(this._pendingStateTimeout);delete this._pendingStateTimeout;this.model.set({state:"failure",icon:"error",updatedDate:G,updateAuthor:B})}})});;
;
/* module-key = 'jira.webresources:status-category-picker', location = '/includes/jira/field/statusCategoryPicker.js' */
define("jira/field/status-category-single-select",["jira/ajs/select/single-select","jquery"],function(e,t){function s(e){var s,i=t();return e&&e.model&&(s=t.extend({},e.model().data()),delete s.descriptor,i=t(JIRA.Template.Util.Issue.Status.issueStatus({issueStatus:{name:e.label(),statusCategory:s},isCompact:!0})).removeClass("jira-issue-status-lozenge-tooltip").removeAttr("title").removeAttr("data-tooltip")),i}return e.extend({_hasIcon:function(){return this.$field.val()&&this.$field.val()!==this.model.placeholder},setSelection:function(e){this._super(e),this.$container.find(".fake-ss-icon").remove(),this.$container.append(s(e).addClass("fake-ss-icon aui-ss-entity-icon"))},init:function(e){this._super(e);var t=this.listController._renders.suggestion;this.listController._renders.suggestion=function(e){var i=t.apply(this,arguments);return i.find("a").prepend("&nbsp;").prepend(s(e)),i}},_renders:{entityIcon:function(e){return t()}}})}),AJS.namespace("JIRA.StatusCategorySingleSelect",null,require("jira/field/status-category-single-select"));;
;
/* module-key = 'jira.webresources:status-category-picker', location = '/includes/jira/field/initStatusPickers.js' */
define("jira/field/init-status-pickers",["jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/field/status-category-single-select"],function(e,t,i,n){function s(e){e.find("select#statusCategory").each(function(e,t){new n({element:t,revertOnInvalid:!0})})}i.bind(t.NEW_CONTENT_ADDED,function(t,i,n){n!==e.panelRefreshed&&s(i)})});;
;
/* module-key = 'jira.webresources:status-category-picker', location = '/includes/jira/field/init/init-status-category-picker-webresource.js' */
require("jira/field/init-status-pickers");;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'soy/Forms.soy' */
// This file was automatically generated from Forms.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.WorkflowDesigner.Templates.Forms.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.WorkflowDesigner == 'undefined') { JIRA.WorkflowDesigner = {}; }
if (typeof JIRA.WorkflowDesigner.Templates == 'undefined') { JIRA.WorkflowDesigner.Templates = {}; }
if (typeof JIRA.WorkflowDesigner.Templates.Forms == 'undefined') { JIRA.WorkflowDesigner.Templates.Forms = {}; }


JIRA.WorkflowDesigner.Templates.Forms.checkbox = function(opt_data, opt_ignored) {
  return '<fieldset class="group"><div class="checkbox">' + aui.form.input({id: opt_data.id, isChecked: opt_data.isChecked, type: 'checkbox'}) + aui.form.label({content: '' + soy.$$escapeHtml(opt_data.labelContent), forField: opt_data.id, isRequired: false}) + '</div></fieldset>';
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.Forms.checkbox.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.Forms.checkbox';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'soy/PropertiesPanel.soy' */
// This file was automatically generated from PropertiesPanel.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.WorkflowDesigner.Templates.PropertiesPanel.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.WorkflowDesigner == 'undefined') { JIRA.WorkflowDesigner = {}; }
if (typeof JIRA.WorkflowDesigner.Templates == 'undefined') { JIRA.WorkflowDesigner.Templates = {}; }
if (typeof JIRA.WorkflowDesigner.Templates.PropertiesPanel == 'undefined') { JIRA.WorkflowDesigner.Templates.PropertiesPanel = {}; }


JIRA.WorkflowDesigner.Templates.PropertiesPanel.description = function(opt_data, opt_ignored) {
  var output = '';
  var id__soy3 = 'properties-panel-description';
  output += aui.expander.content({content: '' + soy.$$filterNoAutoescape(opt_data.content) + aui.expander.trigger({content: '<span class="trigger-text">' + soy.$$escapeHtml('Show more') + '</span>', contentId: id__soy3, extraClasses: 'aui-expander-reveal-text', replaceSelector: '.trigger-text', replaceText: 'Show less', tag: 'a'}), extraClasses: 'description', id: id__soy3});
  return output;
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.PropertiesPanel.description.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.PropertiesPanel.description';
}


JIRA.WorkflowDesigner.Templates.PropertiesPanel.module = function(opt_data, opt_ignored) {
  return '<div class="module">' + ((opt_data.heading) ? '<div class="mod-header"><h4>' + soy.$$escapeHtml(opt_data.heading) + '</h4></div>' : '') + '<div class="mod-content">' + soy.$$filterNoAutoescape(opt_data.content) + '</div></div>';
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.PropertiesPanel.module.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.PropertiesPanel.module';
}


JIRA.WorkflowDesigner.Templates.PropertiesPanel.horizontalLine = function(opt_data, opt_ignored) {
  return '<div class="mod-header"><h4/></div>';
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.PropertiesPanel.horizontalLine.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.PropertiesPanel.horizontalLine';
}


JIRA.WorkflowDesigner.Templates.PropertiesPanel.optionsStatusItem = function(opt_data, opt_ignored) {
  return '<li>' + ((opt_data.editable) ? '<a class="' + soy.$$escapeHtml(opt_data.classes) + '" href="' + soy.$$escapeHtml(opt_data.href) + '" target="_blank">' + soy.$$escapeHtml(opt_data.label) + '</a>' : soy.$$escapeHtml(opt_data.label)) + ((opt_data.count != null) ? '<span> (' + soy.$$escapeHtml(opt_data.count) + ')</span>' : '') + '</li>';
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.PropertiesPanel.optionsStatusItem.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.PropertiesPanel.optionsStatusItem';
}


JIRA.WorkflowDesigner.Templates.PropertiesPanel.optionsTransitionItem = function(opt_data, opt_ignored) {
  return '<li data-transition-option-key="' + soy.$$escapeHtml(opt_data.key) + '">' + ((opt_data.editable) ? '<a href="' + soy.$$escapeHtml(opt_data.href) + '" target="_blank">' + soy.$$escapeHtml(opt_data.label) + '</a>' : soy.$$escapeHtml(opt_data.label)) + '<span> (' + soy.$$escapeHtml(opt_data.count) + ')</span></li>';
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.PropertiesPanel.optionsTransitionItem.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.PropertiesPanel.optionsTransitionItem';
}


JIRA.WorkflowDesigner.Templates.PropertiesPanel.validationInfo = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = JIRA.WorkflowDesigner.Templates.PropertiesPanel.horizontalLine(null) + '<div><table><tr><td>';
  switch (opt_data.problem.severity) {
    case 'MINOR':
      output += '<span class="aui-icon aui-icon-small aui-iconfont-info" style="color:#3572b0; padding-right: 5px"></span>';
      break;
    case 'CRITICAL':
    case 'MAJOR':
      output += '<span class="aui-icon aui-icon-small aui-iconfont-error" style="color:#d04437; padding-right: 5px"></span>';
      break;
  }
  output += '</td><td><div><span> ' + soy.$$escapeHtml(opt_data.problem.message) + '</span></div>' + ((opt_data.problem.quickFixHtml) ? '<div>' + soy.$$filterNoAutoescape(opt_data.problem.quickFixHtml) + '</div>' : '') + '</td></tr></table></div>' + JIRA.WorkflowDesigner.Templates.PropertiesPanel.horizontalLine(null);
  return output;
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.PropertiesPanel.validationInfo.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.PropertiesPanel.validationInfo';
}


JIRA.WorkflowDesigner.Templates.PropertiesPanel.propertiesPanel = function(opt_data, opt_ignored) {
  var output = '';
  var hasActions__soy88 = opt_data.extraActions && opt_data.extraActions.length || opt_data.mainActions && opt_data.mainActions.length;
  var hasInformation__soy89 = opt_data.description || opt_data.informationContent && opt_data.informationContent.length;
  output += '<h3>' + soy.$$filterNoAutoescape(opt_data.titleContent) + '</h3>' + ((opt_data.validations) ? JIRA.WorkflowDesigner.Templates.PropertiesPanel.validationInfo({problem: opt_data.validations.mostSevere}) : '') + ((hasInformation__soy89) ? ((opt_data.description) ? JIRA.WorkflowDesigner.Templates.PropertiesPanel.description({content: '<strong>' + soy.$$escapeHtml('Description') + '</strong> <span class="description-content">' + soy.$$escapeHtml(opt_data.description) + '</span>'}) : '') + ((opt_data.informationContent) ? soy.$$filterNoAutoescape(opt_data.informationContent) : '') : '') + ((hasActions__soy88) ? JIRA.WorkflowDesigner.Templates.PropertiesPanel.module({content: '' + ((opt_data.extraActions) ? '<div class="extra-actions">' + soy.$$filterNoAutoescape(opt_data.extraActions) + '</div>' : '') + ((opt_data.mainActions) ? '<div>' + soy.$$filterNoAutoescape(opt_data.mainActions) + '</div>' : '')}) : '') + ((opt_data.options) ? '<div class="module toggle-wrap"><div class="mod-header"><h4 class="toggle-title">' + soy.$$escapeHtml('Options') + '</h4></div><div class="mod-content"><ul>' + soy.$$filterNoAutoescape(opt_data.options) + '</ul></div></div>' : '') + ((opt_data.additionalModules) ? soy.$$filterNoAutoescape(opt_data.additionalModules) : '');
  return output;
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.PropertiesPanel.propertiesPanel.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.PropertiesPanel.propertiesPanel';
}


JIRA.WorkflowDesigner.Templates.PropertiesPanel.status = function(opt_data, opt_ignored) {
  var output = '';
  var workflowMode__soy142 = opt_data.isDraft ? 'draft' : 'live';
  var commonParameters__soy143 = 'workflowMode=' + workflowMode__soy142 + '&workflowName=' + opt_data.workflowName + '&workflowStep=' + opt_data.stepId;
  var param147 = '' + JIRA.WorkflowDesigner.Templates.Forms.checkbox({id: 'create-global-transition-sidebar', isChecked: opt_data.hasGlobalTransition, labelContent: '' + soy.$$escapeHtml('Allow all statuses to transition to this one')});
  if (opt_data.additionalPanels) {
    var additionalPanelList155 = opt_data.additionalPanels;
    var additionalPanelListLen155 = additionalPanelList155.length;
    for (var additionalPanelIndex155 = 0; additionalPanelIndex155 < additionalPanelListLen155; additionalPanelIndex155++) {
      var additionalPanelData155 = additionalPanelList155[additionalPanelIndex155];
      param147 += soy.$$filterNoAutoescape(additionalPanelData155);
    }
  }
  var param145 = '' + aui.form.form({action: '', content: param147, isTopLabels: true});
  output += JIRA.WorkflowDesigner.Templates.PropertiesPanel.propertiesPanel({description: opt_data.description, extraActions: param145, mainActions: '' + ((opt_data.editStatusPermission) ? aui.buttons.button({text: ' ' + 'Edit', iconType: 'aui', iconClass: 'aui-icon-small aui-iconfont-edit', extraClasses: 'edit'}) : '') + ((opt_data.deleteStatusPermission) ? aui.buttons.button({text: 'Remove status', extraClasses: 'delete'}) : ''), options: '' + JIRA.WorkflowDesigner.Templates.PropertiesPanel.optionsStatusItem({label: 'Properties', href: "" + '/secure/admin/workflows/ViewWorkflowStepMetaAttributes.jspa?' + commonParameters__soy143, classes: 'status-properties', editable: opt_data.optionsEditable}), titleContent: '' + soy.$$escapeHtml(opt_data.name), validations: opt_data.validations});
  return output;
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.PropertiesPanel.status.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.PropertiesPanel.status';
}


JIRA.WorkflowDesigner.Templates.PropertiesPanel.transition = function(opt_data, opt_ignored) {
  var output = '';
  var editScreenURL__soy185 = "" + '/secure/admin/ConfigureFieldScreen.jspa?id=' + opt_data.screenId;
  var param211 = '';
  if (opt_data.additionalPanels) {
    var additionalPanelList214 = opt_data.additionalPanels;
    var additionalPanelListLen214 = additionalPanelList214.length;
    for (var additionalPanelIndex214 = 0; additionalPanelIndex214 < additionalPanelListLen214; additionalPanelIndex214++) {
      var additionalPanelData214 = additionalPanelList214[additionalPanelIndex214];
      param211 += soy.$$filterNoAutoescape(additionalPanelData214);
    }
  }
  param211 += aui.buttons.button({text: ' ' + 'Edit', iconType: 'aui', iconClass: 'aui-icon-small aui-iconfont-edit', extraClasses: 'edit'}) + aui.buttons.button({text: 'Delete transition', extraClasses: 'delete aui-button-link'});
  var param226 = '';
  var optionList227 = opt_data.transitionOptions;
  var optionListLen227 = optionList227.length;
  for (var optionIndex227 = 0; optionIndex227 < optionListLen227; optionIndex227++) {
    var optionData227 = optionList227[optionIndex227];
    param226 += JIRA.WorkflowDesigner.Templates.PropertiesPanel.optionsTransitionItem({count: optionData227.count, href: "" + optionData227.url + '&' + opt_data.queryString, key: optionData227.key, label: optionData227.name, editable: opt_data.optionsEditable});
  }
  param226 += JIRA.Templates.Links.basicHelpLink({url: opt_data.learnMoreUrl, isLocal: false, desc: 'Learn more'});
  output += JIRA.WorkflowDesigner.Templates.PropertiesPanel.propertiesPanel({description: opt_data.description, informationContent: '' + ((opt_data.screenId) ? '<p><strong>' + soy.$$escapeHtml('Screen') + '</strong>' + ((opt_data.administrator) ? ' <a href="' + soy.$$escapeHtml(editScreenURL__soy185) + '" target="_blank">' + soy.$$escapeHtml(opt_data.screenName) + '</a>' : ' ' + soy.$$escapeHtml(opt_data.screenName)) + ' ' + aui.icons.icon({useIconFont: true, size: 'small', icon: 'info', extraClasses: 'screen-info', extraAttributes: {title: 'A screen defines which fields are available and how they should display for an issue. Different screens can be used when an issue is transitioned through a workflow.'}}) + '</p>' : ''), mainActions: param211, options: param226, titleContent: '' + soy.$$escapeHtml(opt_data.name), validations: opt_data.validations});
  return output;
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.PropertiesPanel.transition.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.PropertiesPanel.transition';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'soy/StatusCategoryField.soy' */
// This file was automatically generated from StatusCategoryField.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.WorkflowDesigner.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.WorkflowDesigner == 'undefined') { JIRA.WorkflowDesigner = {}; }
if (typeof JIRA.WorkflowDesigner.Templates == 'undefined') { JIRA.WorkflowDesigner.Templates = {}; }


JIRA.WorkflowDesigner.Templates.statusCategorySelectField = function(opt_data, opt_ignored) {
  var output = '<div class="field-group">' + aui.form.label({forField: opt_data.id, isRequired: true, content: 'Category'}) + JIRA.WorkflowDesigner.Templates.statusCategorySelect(opt_data) + '<div class="description">';
  var new__soy10 = '<b>' + soy.$$escapeHtml('To Do') + '</b>';
  var inProgress__soy14 = '<b>' + soy.$$escapeHtml('In Progress') + '</b>';
  var done__soy18 = '<b>' + soy.$$escapeHtml('Done') + '</b>';
  output += soy.$$filterNoAutoescape(AJS.format('Helps identify where an issue is in its lifecycle. \x3cbr/\x3eIssues move from {0} to {1} when work starts on them, and later move to {2} when all work is complete.',new__soy10,inProgress__soy14,done__soy18)) + '</div>' + ((opt_data.errors && opt_data.errors.statusCategory) ? aui.form.fieldError({message: opt_data.errors.statusCategory}) : '') + '</div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.statusCategorySelectField.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.statusCategorySelectField';
}


JIRA.WorkflowDesigner.Templates.statusCategorySelect = function(opt_data, opt_ignored) {
  var output = '<select id="' + soy.$$escapeHtml(opt_data.id) + '" name="' + soy.$$escapeHtml(opt_data.id) + '" class="select">';
  var optionList36 = opt_data.statusCategoryOptions;
  var optionListLen36 = optionList36.length;
  for (var optionIndex36 = 0; optionIndex36 < optionListLen36; optionIndex36++) {
    var optionData36 = optionList36[optionIndex36];
    output += JIRA.WorkflowDesigner.Templates.statusCategoryOption(optionData36);
  }
  output += '</select>';
  return output;
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.statusCategorySelect.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.statusCategorySelect';
}


JIRA.WorkflowDesigner.Templates.statusCategoryOption = function(opt_data, opt_ignored) {
  return '<option value="' + soy.$$escapeHtml(opt_data.value) + '" data-key="' + soy.$$escapeHtml(opt_data.key) + '" data-color-name="' + soy.$$escapeHtml(opt_data.colorName) + '" data-sequence="' + soy.$$escapeHtml(opt_data.sequence) + '"' + ((opt_data.selected) ? ' selected' : '') + ((opt_data.isPlaceholder) ? ' data-placeholder="true"' : '') + '>' + soy.$$escapeHtml(opt_data.text) + '</option>';
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.statusCategoryOption.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.statusCategoryOption';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'soy/TransitionDialogs.soy' */
// This file was automatically generated from TransitionDialogs.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.WorkflowDesigner.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.WorkflowDesigner == 'undefined') { JIRA.WorkflowDesigner = {}; }
if (typeof JIRA.WorkflowDesigner.Templates == 'undefined') { JIRA.WorkflowDesigner.Templates = {}; }


JIRA.WorkflowDesigner.Templates.addTransitionDialog = function(opt_data, opt_ignored) {
  return '<div class="aui-dialog-content">' + aui.form.form({action: '', content: '<h2 class="dialog-title">' + soy.$$escapeHtml('Add Transition') + '</h2><div class="form-body">' + aui.tabPane({content: '', id: 'new-transition-pane', isActive: true}) + aui.tabPane({content: '', id: 'reuse-transition-pane'}) + '</div><div class="buttons-container form-footer"><div class="buttons">' + aui.form.submit({extraClasses: 'aui-button aui-button-primary', name: 'submit', text: 'Add'}) + aui.form.linkButton({name: 'cancel', text: 'Cancel'}) + '</div></div>'}) + '</div>';
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.addTransitionDialog.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.addTransitionDialog';
}


JIRA.WorkflowDesigner.Templates.addTransitionDialogTabs = function(opt_data, opt_ignored) {
  return '' + aui.tabs({menuItems: [{extraClasses: 'new-transition', isActive: true, text: 'New Transition', url: '#new-transition-pane'}, {text: 'Reuse a transition', url: '#reuse-transition-pane'}], paneContent: ''});
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.addTransitionDialogTabs.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.addTransitionDialogTabs';
}


JIRA.WorkflowDesigner.Templates.cannotDeleteInitialTransitionDialog = function(opt_data, opt_ignored) {
  return '<div class="aui-dialog-content">' + aui.form.form({action: '', content: '<h2 class="dialog-title">' + soy.$$escapeHtml('Read-Only') + '</h2><div class="form-body"><p>' + soy.$$escapeHtml(AJS.format('The initial transition cannot be deleted.',opt_data.transitionName)) + '</p></div><div class="buttons-container form-footer"><div class="buttons">' + aui.form.linkButton({name: 'cancel', text: 'Cancel'}) + '</div></div>'}) + '</div>';
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.cannotDeleteInitialTransitionDialog.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.cannotDeleteInitialTransitionDialog';
}


JIRA.WorkflowDesigner.Templates.confirmDeleteTransitionDialog = function(opt_data, opt_ignored) {
  return '<div class="aui-dialog-content">' + aui.form.form({action: '', content: '<h2 class="dialog-title">' + soy.$$escapeHtml('Confirm Delete') + '</h2><div class="form-body"><p>' + soy.$$escapeHtml(AJS.format('Are you sure you want to delete the transition \x27\x27{0}\x27\x27?',opt_data.transitionName)) + '</p></div><div class="buttons-container form-footer"><div class="buttons">' + aui.form.submit({extraClasses: 'aui-button aui-button-primary', name: 'submit', text: 'Delete'}) + aui.form.linkButton({name: 'cancel', text: 'Cancel'}) + '</div></div>'}) + '</div>';
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.confirmDeleteTransitionDialog.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.confirmDeleteTransitionDialog';
}


JIRA.WorkflowDesigner.Templates.confirmEditTransitionSourceDialog = function(opt_data, opt_ignored) {
  return '<div class="aui-dialog-content">' + aui.form.form({action: '', content: '<h2 class="dialog-title">' + soy.$$escapeHtml('Confirm Edit Transition') + '</h2><div class="form-body"><p>' + soy.$$escapeHtml(AJS.format('Are you sure you want to change the source of \x27\x27{0}\x27\x27 from \x27\x27{1}\x27\x27 to \x27\x27{2}\x27\x27?',opt_data.transitionName,opt_data.originalSourceStatusName,opt_data.newSourceStatusName)) + '</p></div><div class="buttons-container form-footer"><div class="buttons">' + aui.form.submit({extraClasses: 'aui-button aui-button-primary', text: 'Save'}) + aui.form.linkButton({id: 'cancel', text: 'Cancel'}) + '</div></div>'}) + '</div>';
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.confirmEditTransitionSourceDialog.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.confirmEditTransitionSourceDialog';
}


JIRA.WorkflowDesigner.Templates.confirmEditTransitionTargetDialog = function(opt_data, opt_ignored) {
  return '<div class="aui-dialog-content">' + aui.form.form({action: '', content: '<h2 class="dialog-title">' + soy.$$escapeHtml('Confirm Edit Transition') + '</h2><div class="form-body"><p>' + soy.$$escapeHtml(AJS.format('Are you sure you want to change the destination of \x27\x27{0}\x27\x27 to \x27\x27{1}\x27\x27?',opt_data.transitionName,opt_data.targetStatusName)) + '</p></div><div class="buttons-container form-footer"><div class="buttons">' + aui.form.submit({extraClasses: 'aui-button aui-button-primary', name: 'submit', text: 'Save'}) + aui.form.linkButton({name: 'cancel', text: 'Cancel'}) + '</div></div>'}) + '</div>';
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.confirmEditTransitionTargetDialog.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.confirmEditTransitionTargetDialog';
}


JIRA.WorkflowDesigner.Templates.descriptionField = function(opt_data, opt_ignored) {
  return '' + aui.form.textareaField({id: 'transition-description', labelContent: 'Description', name: 'description', rows: 4, value: opt_data.value});
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.descriptionField.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.descriptionField';
}


JIRA.WorkflowDesigner.Templates.editTransitionDialog = function(opt_data, opt_ignored) {
  return '<div class="aui-dialog-content">' + aui.form.form({action: '', content: '<h2 class="dialog-title">' + soy.$$escapeHtml('Edit Transition') + '</h2><div class="form-body">' + JIRA.WorkflowDesigner.Templates.nameField({value: opt_data.name}) + JIRA.WorkflowDesigner.Templates.descriptionField({value: opt_data.description}) + ((opt_data.screensPermission) ? JIRA.WorkflowDesigner.Templates.screenField({options: opt_data.screens}) : '') + '</div><div class="buttons-container form-footer"><div class="buttons">' + aui.form.submit({extraClasses: 'aui-button aui-button-primary', name: 'submit', text: 'Save'}) + aui.form.linkButton({name: 'cancel', text: 'Cancel'}) + '</div></div>'}) + '</div>';
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.editTransitionDialog.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.editTransitionDialog';
}


JIRA.WorkflowDesigner.Templates.fromStatusField = function(opt_data, opt_ignored) {
  return '' + aui.form.selectField({id: 'transition-source-step-id', isRequired: true, labelContent: 'From status', options: opt_data.statuses});
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.fromStatusField.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.fromStatusField';
}


JIRA.WorkflowDesigner.Templates.nameField = function(opt_data, opt_ignored) {
  return '' + aui.form.textField({id: 'transition-name', isRequired: true, labelContent: 'Name', name: 'name', value: opt_data.value});
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.nameField.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.nameField';
}


JIRA.WorkflowDesigner.Templates.newTransitionForm = function(opt_data, opt_ignored) {
  return '' + JIRA.WorkflowDesigner.Templates.fromStatusField({statuses: opt_data.sourceStatuses}) + JIRA.WorkflowDesigner.Templates.toStatusField({statuses: opt_data.targetStatuses}) + JIRA.WorkflowDesigner.Templates.nameField({value: ''}) + JIRA.WorkflowDesigner.Templates.descriptionField({value: ''}) + ((opt_data.screensPermission) ? JIRA.WorkflowDesigner.Templates.screenField({options: opt_data.screens}) : '');
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.newTransitionForm.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.newTransitionForm';
}


JIRA.WorkflowDesigner.Templates.reuseTransitionForm = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$escapeHtml('You can reuse a transition provided the destination status is the same.') + '</p>' + JIRA.WorkflowDesigner.Templates.fromStatusField({statuses: opt_data.sourceStatuses}) + JIRA.WorkflowDesigner.Templates.toStatusField({statuses: opt_data.targetStatuses}) + aui.form.fieldGroup({content: '' + aui.form.label({content: 'Transition to reuse', forField: 'transition-id', isRequired: true}) + aui.form.select({id: 'transition-id', options: []}) + '<div class="no-transitions-message"><p>' + soy.$$escapeHtml('There are no transitions going to this status.') + '</p><p>' + soy.$$filterNoAutoescape(AJS.format('{0}Create a new transition{1} to get started.','<a class="create-new-transition" href="#">','</a>')) + '</p></div>'});
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.reuseTransitionForm.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.reuseTransitionForm';
}


JIRA.WorkflowDesigner.Templates.screenField = function(opt_data, opt_ignored) {
  return '' + aui.form.selectField({id: 'transition-screen-id', isRequired: false, labelContent: 'Screen', options: opt_data.options});
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.screenField.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.screenField';
}


JIRA.WorkflowDesigner.Templates.toStatusField = function(opt_data, opt_ignored) {
  return '' + aui.form.selectField({id: 'transition-target-step-id', isRequired: true, labelContent: 'To status', options: opt_data.statuses});
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.toStatusField.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.toStatusField';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'soy/WorkflowDesigner.soy' */
// This file was automatically generated from WorkflowDesigner.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.WorkflowDesigner.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.WorkflowDesigner == 'undefined') { JIRA.WorkflowDesigner = {}; }
if (typeof JIRA.WorkflowDesigner.Templates == 'undefined') { JIRA.WorkflowDesigner.Templates = {}; }


JIRA.WorkflowDesigner.Templates.actions = function(opt_data, opt_ignored) {
  return '' + aui.toolbar2.toolbar2({content: '' + ((! opt_data.immutable) ? JIRA.WorkflowDesigner.Templates.primaryActions(opt_data) : '') + ((opt_data.fullScreenButton || ! opt_data.immutable) ? JIRA.WorkflowDesigner.Templates.secondaryActions(opt_data) : '')});
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.actions.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.actions';
}


JIRA.WorkflowDesigner.Templates.addStatusInlineDialog = function(opt_data, opt_ignored) {
  var output = '';
  var hasStatuses__soy15 = opt_data.statusOptions.length > 0;
  output += aui.form.form({action: '', content: '' + aui.form.fieldGroup({content: '' + aui.form.select({extraAttributes: {'data-container-class': 'full-width-field', 'data-can-create-values': opt_data.createStatus}, extraClasses: 'full-width-field', id: 'status-name', options: opt_data.statusOptions}) + aui.form.fieldDescription({message: '' + ((opt_data.createStatus) ? soy.$$escapeHtml('Search for an existing status or name a new one.') : soy.$$escapeHtml('Search for an existing status.'))})}) + JIRA.WorkflowDesigner.Templates.Forms.checkbox({id: 'create-global-transition-add', isChecked: opt_data.createGlobalTransition, labelContent: '' + soy.$$escapeHtml('Allow all statuses to transition to this one')}) + aui.form.buttons({content: '' + aui.form.submit({isDisabled: ! hasStatuses__soy15, name: 'submit', text: 'Add'}) + aui.form.linkButton({name: 'cancel', text: 'Cancel'})}), isTopLabels: true});
  return output;
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.addStatusInlineDialog.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.addStatusInlineDialog';
}


JIRA.WorkflowDesigner.Templates.browserNotSupportedMessage = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml('This feature is not available in Internet Explorer prior to version 10.');
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.browserNotSupportedMessage.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.browserNotSupportedMessage';
}


JIRA.WorkflowDesigner.Templates.browserNotSupportedWarning = function(opt_data, opt_ignored) {
  return '' + aui.message.warning({content: '', titleContent: '' + JIRA.WorkflowDesigner.Templates.browserNotSupportedMessage(null)});
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.browserNotSupportedWarning.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.browserNotSupportedWarning';
}


JIRA.WorkflowDesigner.Templates.cannotDeleteInitialStatus = function(opt_data, opt_ignored) {
  return '<div class="aui-dialog-content">' + aui.form.form({action: '', content: '<h2 class="dialog-title">' + soy.$$escapeHtml('Read-Only') + '</h2><div class="form-body"><p>' + soy.$$escapeHtml(AJS.format('The initial status cannot be deleted.',opt_data.name)) + '</p></div><div class="buttons-container form-footer"><div class="buttons">' + aui.form.linkButton({name: 'cancel', text: 'Cancel'}) + '</div></div>'}) + '</div>';
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.cannotDeleteInitialStatus.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.cannotDeleteInitialStatus';
}


JIRA.WorkflowDesigner.Templates.confirmDeleteStatus = function(opt_data, opt_ignored) {
  return '<div class="aui-dialog-content">' + aui.form.form({action: '', content: '<h2 class="dialog-title">' + soy.$$escapeHtml('Confirm Remove Status') + '</h2><div class="form-body"><p>' + soy.$$escapeHtml(AJS.format('Are you sure you want to remove the status \x27\x27{0}\x27\x27 and delete the related transitions?',opt_data.name)) + '</p></div><div class="buttons-container form-footer"><div class="buttons">' + aui.form.submit({extraClasses: 'aui-button aui-button-primary', name: 'submit', text: 'Remove'}) + aui.form.linkButton({name: 'cancel', text: 'Cancel'}) + '</div></div>'}) + '</div>';
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.confirmDeleteStatus.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.confirmDeleteStatus';
}


JIRA.WorkflowDesigner.Templates.deleteStatusFailed = function(opt_data, opt_ignored) {
  return '<div class="aui-dialog-content">' + aui.form.form({action: '', content: '<h2 class="dialog-title">' + soy.$$escapeHtml('Failed to remove status') + '</h2><div class="form-body"><p>' + soy.$$filterNoAutoescape(opt_data.errorMessage) + '</p></div><div class="buttons-container form-footer"><div class="buttons">' + aui.form.linkButton({name: 'cancel', text: 'Cancel'}) + '</div></div>'}) + '</div>';
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.deleteStatusFailed.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.deleteStatusFailed';
}


JIRA.WorkflowDesigner.Templates.workflowDesignerSection = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="workflow-designer-section">' + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + '</div>';
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.workflowDesignerSection.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.workflowDesignerSection';
}


JIRA.WorkflowDesigner.Templates.container = function(opt_data, opt_ignored) {
  return '' + JIRA.WorkflowDesigner.Templates.workflowDesignerSection({content: '<div class="workflow-canvas-wrapper"><div class="container"></div></div>'});
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.container.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.container';
}


JIRA.WorkflowDesigner.Templates.createStatusDialog = function(opt_data, opt_ignored) {
  return '' + JIRA.WorkflowDesigner.Templates.statusDialog(soy.$$augmentMap(opt_data, {submitText: 'Create', title: 'Create New Status'}));
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.createStatusDialog.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.createStatusDialog';
}


JIRA.WorkflowDesigner.Templates.editStatusDialog = function(opt_data, opt_ignored) {
  var output = '';
  var beforeContent__soy121 = '' + ((opt_data.numberOfWorkflows > 1) ? aui.message.warning({content: 'This status is used in other workflows, editing it will affect them.'}) : '');
  output += JIRA.WorkflowDesigner.Templates.statusDialog(soy.$$augmentMap(opt_data, {beforeContent: beforeContent__soy121, submitText: 'Save', title: 'Edit Status'}));
  return output;
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.editStatusDialog.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.editStatusDialog';
}


JIRA.WorkflowDesigner.Templates.fullScreenButtons = function(opt_data, opt_ignored) {
  return '' + aui.buttons.button({extraClasses: 'enter-full-screen full-screen-trigger', iconClass: 'aui-icon-small', iconType: 'aui', text: '', extraAttributes: {title: 'Enter full screen'}}) + aui.buttons.button({extraClasses: 'exit-full-screen full-screen-trigger hidden', iconClass: 'aui-icon-small', iconType: 'aui', text: '', extraAttributes: {title: 'Exit full screen'}});
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.fullScreenButtons.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.fullScreenButtons';
}


JIRA.WorkflowDesigner.Templates.loopedTransitionDialogContent = function(opt_data, opt_ignored) {
  return '<strong>' + soy.$$escapeHtml(opt_data.name) + '</strong><p>' + soy.$$escapeHtml('All statuses can make use of this transition.') + '</p>';
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.loopedTransitionDialogContent.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.loopedTransitionDialogContent';
}


JIRA.WorkflowDesigner.Templates.globalTransitionDialogContent = function(opt_data, opt_ignored) {
  return '<strong>' + soy.$$escapeHtml(opt_data.name) + '</strong><p>' + soy.$$escapeHtml(AJS.format('All statuses can transition to \x27\x27{0}\x27\x27.',opt_data.statusName)) + '</p>';
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.globalTransitionDialogContent.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.globalTransitionDialogContent';
}


JIRA.WorkflowDesigner.Templates.primaryActions = function(opt_data, opt_ignored) {
  return '' + aui.toolbar2.item({content: '' + aui.buttons.button({extraClasses: 'add-status', iconClass: 'aui-icon-small aui-iconfont-add', iconText: 'Add status', iconType: 'aui', text: 'Add status'}) + aui.buttons.button({extraClasses: 'add-transition', iconClass: 'aui-icon-small aui-iconfont-add', iconText: 'Add transition', iconType: 'aui', text: 'Add transition'}) + aui.form.checkboxField({extraClasses: 'show-transition-labels', fields: [{id: 'show-transition-labels', isChecked: opt_data.showTransitionLabels, labelText: 'Show transition labels'}], legendContent: ''}), item: 'primary'});
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.primaryActions.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.primaryActions';
}


JIRA.WorkflowDesigner.Templates.progressIndicatorBlanket = function(opt_data, opt_ignored) {
  return '<div class="blanket"></div><div class="spinner"></div>';
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.progressIndicatorBlanket.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.progressIndicatorBlanket';
}


JIRA.WorkflowDesigner.Templates.secondaryActions = function(opt_data, opt_ignored) {
  return '' + aui.toolbar2.item({content: '' + ((! opt_data.immutable) ? '<div class="workflow-designer-last-saved-by" id="workflow-designer-last-saved-by"></div>' : '') + ((opt_data.fullScreenButton) ? JIRA.WorkflowDesigner.Templates.fullScreenButtons(null) : ''), item: 'secondary'});
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.secondaryActions.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.secondaryActions';
}


JIRA.WorkflowDesigner.Templates.statusDialog = function(opt_data, opt_ignored) {
  return '<div class="aui-dialog-content">' + aui.form.form({action: '', content: '<h2 class="dialog-title">' + soy.$$escapeHtml(opt_data.title) + '</h2><div class="form-body">' + ((opt_data.beforeContent) ? soy.$$filterNoAutoescape(opt_data.beforeContent) : '') + aui.form.textField({id: 'status-name', isRequired: true, labelContent: 'Name', name: 'name', value: opt_data.name}) + aui.form.textareaField({id: 'status-description', labelContent: 'Description', name: 'description', rows: 4, value: opt_data.description}) + ((opt_data.showStatusCategoryField) ? JIRA.WorkflowDesigner.Templates.statusCategorySelectField({id: 'status-category-id', statusCategoryOptions: opt_data.statusCategoryOptions}) : '') + '</div><div class="buttons-container form-footer">' + ((! opt_data.statusId) ? '<div class="checkbox buttons-container-left"><input ' + ((opt_data.createGlobalTransition) ? 'checked="checked"' : '') + ' class="checkbox" id="create-global-transition-create" type="checkbox"><label for="create-global-transition-create">' + soy.$$escapeHtml('Allow all statuses to transition to this one') + '</label></div>' : '') + '<div class="buttons">' + aui.form.submit({extraClasses: 'aui-button aui-button-primary', name: 'submit', text: opt_data.submitText}) + aui.form.linkButton({name: 'cancel', text: 'Cancel'}) + '</div></div>'}) + '</div>';
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.statusDialog.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.statusDialog';
}


JIRA.WorkflowDesigner.Templates.zoomControl = function(opt_data, opt_ignored) {
  return '<button ' + ((opt_data.zoomInDisabled) ? 'aria-disabled="true"' : '') + ' class="aui-button zoom-in" title="' + soy.$$escapeHtml('Zoom in') + '" type="button">+</button><button ' + ((opt_data.zoomOutDisabled) ? 'aria-disabled="true"' : '') + ' class="aui-button zoom-out" title="' + soy.$$escapeHtml('Zoom out') + '" type="button">&ndash;</button>';
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.zoomControl.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.zoomControl';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/lib/cocktail-0.3.0.js' */
(function(){var A;if(typeof exports!=="undefined"){A=exports}else{A=this.Cocktail={}}A.mixins={};A.mixin=function C(F){var G=_.chain(arguments).toArray().rest().flatten().value();var H={};_(G).each(function(I){if(_.isString(I)){I=A.mixins[I]}_(I).each(function(K,J){if(_.isFunction(K)){if(F.prototype[J]){H[J]=H[J]||[F.prototype[J]];H[J].push(K)}F.prototype[J]=K}else{if(_.isObject(K)){F.prototype[J]=_.extend({},K,F.prototype[J]||{})}}})});_(H).each(function(I,J){F.prototype[J]=function(){var M=this,K=arguments,L=undefined;_(I).each(function(N){var O=_.isFunction(N)?N.apply(M,K):N;L=(O===undefined?L:O)});return L}})};var D;A.patch=function E(G){D=G.Model.extend;var F=function(J,K){var H=D.call(this,J,K);var I=H.prototype.mixins;if(I&&H.prototype.hasOwnProperty("mixins")){A.mixin(H,I)}return H};_([G.Model,G.Collection,G.Router,G.View]).each(function(H){H.mixin=function I(){A.mixin(this,_.toArray(arguments))};H.extend=F})};A.unpatch=function B(F){_([F.Model,F.Collection,F.Router,F.View]).each(function(G){G.mixin=undefined;G.extend=D})}})();;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/lib/cocktail-amd.js' */
define("workflow-designer/cocktail",[],function(){return Cocktail});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/util/BrowserUtilities.js' */
define("workflow-designer/browser-utilities",["workflow-designer/underscore","jquery"],function(A,C){function B(D){return encodeURIComponent(D).replace(/[!'()]/g,escape).replace(/\*/g,"%2A").replace(/%20/g,"+")}return{escapeQueryParameter:B,makeQueryString:function(E){function D(F){return A.map(F,B).join("=")}return A.map(A.pairs(E),D).join("&")},getZoomLevel:function(){var D;if(C.browser.mozilla){return null}else{if(C.browser.msie){D=screen.deviceXDPI/screen.logicalXDPI}else{if(C.browser.webkit){D=window.outerWidth/window.innerWidth}}}return Math.round(D*10)/10},isMac:function(){return navigator.platform.toUpperCase().indexOf("MAC")!==-1}}});AJS.namespace("JIRA.WorkflowDesigner.BrowserUtilities",null,require("workflow-designer/browser-utilities"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/util/BrowserZoomChecker.js' */
define("workflow-designer/browser-zoom-checker",["workflow-designer/messages","workflow-designer/browser-utilities","workflow-designer/underscore","jquery"],function(D,C,B,E){var A=function(){B.bindAll(this,"_startWindowResizeSession","_endWindowResizeSession");E(window).on("resize",this._startWindowResizeSession);this._debouncedEndWindowResizeSession=B.debounce(this._endWindowResizeSession,250);this._intervalId=setInterval(B.bind(this._check,this),1000)};B.extend(A.prototype,{_isMac:C.isMac(),_msgErrorZoomLevel:C.isMac()?"The workflow designer may not behave correctly at your current browser zoom level, press \u2318 + 0 to reset it.":"The workflow designer may not behave correctly at your current browser zoom level, press Ctrl + 0 to reset it.",_check:function(){if(this._windowIsResizing){return }var F=C.getZoomLevel();if(!F||F===1){this._destroyErrorMessage()}else{this._showErrorMessage(this._msgErrorZoomLevel)}},destroy:function(){clearInterval(this._intervalId);E(window).off("resize",this._startWindowResizeSession);this._destroyErrorMessage()},isErrorMessageDisplayed:function(){return this._browserZoomMessage&&this._browserZoomMessage.is(":visible")},_destroyErrorMessage:function(){if(this._browserZoomMessage){this._browserZoomMessage.remove();delete this._browserZoomMessage}},_showErrorMessage:function(F){if(!this._browserZoomMessage){this._browserZoomMessage=D.showErrorMessage(F)}},_endWindowResizeSession:function(){this._windowIsResizing=false;this._destroyErrorMessage()},_startWindowResizeSession:function(){this._windowIsResizing=true;this._debouncedEndWindowResizeSession()}});return A});AJS.namespace("JIRA.WorkflowDesigner.BrowserZoomChecker",null,require("workflow-designer/browser-zoom-checker"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/util/Collection.js' */
define("workflow-designer/collection",["workflow-designer/backbone","workflow-designer/underscore"],function(D,B){var A=["chain","each","filter","find","invoke","without"];var C=function(E){this.length=0;this._objects=[];this.reset(E||[])};B.extend(C.prototype,D.Events,{add:function(E){E=[].concat(E);B.each(E,function(F){F.on("all",this.trigger,this)},this);this._objects=this._objects.concat(E);this.length=this._objects.length;return this},at:function(E){return this._objects[E]},remove:function(E){E=B.isArray(E)?E:[E];B.each(E,function(F){F.off("all",this.trigger,this)},this);this._objects=B.difference(this._objects,E);this.length=this._objects.length;return this},reset:function(E){this.remove(this._objects);return this.add(E)}});B.each(A,function(E){C.prototype[E]=function(){return B[E].apply(B,[this._objects].concat(B.toArray(arguments)))}});return C});AJS.namespace("JIRA.WorkflowDesigner.Collection",null,require("workflow-designer/collection"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/util/Direction.js' */
define("workflow-designer/direction",[],function(){return{DOWN:2,LEFT:3,RIGHT:1,UP:0}});AJS.namespace("JIRA.WorkflowDesigner.Direction",null,require("workflow-designer/direction"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/util/Draw2DUtilities.js' */
define("workflow-designer/draw2d-utilities",[],function(){return{setCursor:function(A,C){var B=A.svgNodes||A.shape;B&&B.attr("cursor",C)}}});AJS.namespace("JIRA.WorkflowDesigner.Draw2DUtilities",null,require("workflow-designer/draw2d-utilities"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/util/FigureUtilities.js' */
define("workflow-designer/figure-utilities",["workflow-designer/draw-2d","workflow-designer/underscore"],function(B,A){return{calculateBoundingBox:function(F){var D=null,H=null,I=null,G=null,E,C;A.each(F,function(J){var L=J.getX(),K=J.getY();if(!D||D>L){D=L}if(!H||H<L){H=L}if(!I||I>K){I=K}if(!G||G<K){G=K}});E=H-D;C=G-I;return new B.geo.Rectangle(D,I,E,C)}}});AJS.namespace("JIRA.WorkflowDesigner.FigureUtilities",null,require("workflow-designer/figure-utilities"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/util/patches/FigurePatch.js' */
(function(){var B=require("workflow-designer/draw-2d");var A=require("workflow-designer/underscore");A.extend(B.Figure.prototype,{sendToBack:function(){this.svgNodes&&this.svgNodes.toBack();this.shape&&this.shape.toBack();return this},sendToFront:function(){this.shape&&this.shape.toFront();this.svgNodes&&this.svgNodes.toFront();return this}})}());;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/util/patches/LabelPatch.js' */
(function(){var B=require("workflow-designer/draw-2d");var A=require("workflow-designer/underscore");var C=B.shape.basic.Label.prototype.setText;A.extend(B.shape.basic.Label.prototype,{setText:function(){C.apply(this,arguments);this.cachedHeight=null;this.cachedMinHeight=null;this.cachedWidth=null;this.cachedMinWidth=null}})}());;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/util/patches/LinePatch.js' */
(function(){var C=require("workflow-designer/figure-utilities");var B=require("workflow-designer/draw-2d");var A=require("workflow-designer/underscore");A.extend(B.shape.basic.Line.prototype,{getBoundingBox:function(){return C.calculateBoundingBox([this.getStartPoint(),this.getEndPoint()])}});B.shape.basic.Line.hit=function(G,F,M,E,L,K,J){E-=F;L-=M;K-=F;J-=M;var I=K*E+J*L;var D;if(I<=0){return false}else{K=E-K;J=L-J;I=K*E+J*L;if(I<=0){return false}else{D=I*I/(E*E+L*L)}}var H=K*K+J*J-D;if(H<0){H=0}return Math.sqrt(H)<G}}());;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/util/patches/NodePatch.js' */
(function(){var B=require("workflow-designer/draw-2d");var A=require("workflow-designer/underscore");A.extend(B.shape.node.Node.prototype,{onDoubleClick:jQuery.noop})}());;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/util/patches/PointPatch.js' */
(function(){var B=require("workflow-designer/draw-2d");var A=require("workflow-designer/underscore");A.extend(B.geo.Point.prototype,{add:function(){return this.getTranslated.apply(this,arguments)},getComponents:function(){return[this.x,this.y]}})}());;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/util/patches/PolyLinePatch.js' */
(function(){var C=require("workflow-designer/figure-utilities");var B=require("workflow-designer/draw-2d");var A=require("workflow-designer/underscore");A.extend(B.shape.basic.PolyLine.prototype,{getBoundingBox:function(){var D=this.getPoints().asArray();return C.calculateBoundingBox(D)}})}());;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/util/patches/RectanglePatch.js' */
(function(){var C=require("workflow-designer/draw-2d");var A=require("workflow-designer/underscore");var B={union:function(E){var D,F;D={x:Math.max(E.getRight(),this.getRight()),y:Math.max(E.getBottom(),this.getBottom())};F={x:Math.min(E.getLeft(),this.getLeft()),y:Math.min(E.getTop(),this.getTop())};return new C.geo.Rectangle(F.x,F.y,D.x-F.x,D.y-F.y)},clone:function(){return new C.geo.Rectangle(this.x,this.y,this.w,this.h)},scaleByFactor:function(D){return this.scale(this.w*(D-1),this.h*(D-1))},scaleHeight:function(D){this.h+=D;this.y-=D/2;this.adjustBoundary();return this},scaleWidth:function(D){this.w+=D;this.x-=D/2;this.adjustBoundary();return this},getRelativePosition:function(D){return D.subtract(this.getTopLeft())},getRelativePositionAsPercentage:function(E){var D=this.getRelativePosition(E);return new C.geo.Point(D.x/this.w,D.y/this.h)}};A.extend(C.geo.Rectangle.prototype,B)}());;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/util/StatusLozengeColours.js' */
define("workflow-designer/status-lozenge-colours",["workflow-designer/underscore","jquery"],function(C,E){function A(F){F=F.match(/\d+/g);return"#"+C.map(F,function(G){G=parseInt(G,10).toString(16);return("0"+G).slice(-2)}).join("")}function B(G){var H=D(G),F=H.css(G.property);H.remove();return A(F)}function D(F){return E(JIRA.Template.Util.Issue.Status.issueStatus({isSubtle:!!F.isSubtle,issueStatus:{statusCategory:{colorName:F.colourName}}})).hide().appendTo("body")}return{getBackgroundColour:function(F){F.property="background-color";return B(F)},getBorderColour:function(F){F.property="border-top-color";return B(F)},getColour:function(F){F.property="color";return B(F)}}});AJS.namespace("JIRA.WorkflowDesigner.StatusLozengeColours",null,require("workflow-designer/status-lozenge-colours"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/util/SVGUtilities.js' */
define("workflow-designer/svg-utilities",["jquery"],function(A){var B={fromScreenToSVGCoordinate:function(E,D,F){E=A(E).get(0);return C(E,E.getScreenCTM().inverse(),D,F)},fromSVGToPageCoordinate:function(G,F,H){var E=A(window.document),D=B.fromSVGToScreenCoordinate(G,F,H);D.x+=E.scrollLeft();D.y+=E.scrollTop();return D},fromSVGToScreenCoordinate:function(E,D,F){E=A(E).get(0);return C(E,E.getScreenCTM(),D,F)},getPageBoundingBox:function(F){var E,D=A(F).get(0).getBBox(),G;G=B.fromSVGToPageCoordinate(F,D.x,D.y);E=B.fromSVGToPageCoordinate(F,D.x+D.width,D.y+D.height);return{height:E.y-G.y,width:E.x-G.x,x:G.x,y:G.y}}};function C(G,F,E,H){var D=A(G).closest("svg").get(0).createSVGPoint();D.x=E;D.y=H;D=D.matrixTransform(F);return{x:D.x,y:D.y}}return B});AJS.namespace("JIRA.WorkflowDesigner.SVGUtilities",null,require("workflow-designer/svg-utilities"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/util/UnderscoreMixins.js' */
require(["workflow-designer/underscore"],function(A){A.mixin({cartesianProduct:function(){var B=Array.prototype.slice.call(arguments,0);return A.reduce(B,function(D,E){var C=[];A.each(D,function(F){A.each(E,function(G){C.push(F.concat(G))})});return C},[[]])},flatMap:A.compose(A.flatten,A.map),sum:function(C,B){return A.reduce(C,function(D,E){return D+E},0,B)}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/util/Vector2D.js' */
define("workflow-designer/vector-2d",["workflow-designer/draw-2d"],function(A){var B=A.geo.Point;return B.extend({init:function(E,D){var F=E instanceof B&&D instanceof B,C=E,G=D;if(F){C=D.x-E.x;G=D.y-E.y}this._super(C,G)},getLength:function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},multiply:function(C){this.x*=C;this.y*=C;return this},normalize:function(){var C=this.getLength();if(C>0){this.multiply(1/C)}return this}})});AJS.namespace("JIRA.WorkflowDesigner.Vector2D",null,require("workflow-designer/vector-2d"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/util/ViewBoxTransformer.js' */
define("workflow-designer/viewbox-transformer",["workflow-designer/draw-2d"],function(H){var F=0.25;var C=2;var B=0.5;var E=10;function D(J,L,K){var M=J.clone().scaleByFactor(F*2),N=M.getLeft()-J.getLeft(),I=M.getTop()-J.getTop();L<N&&M.scaleWidth(2*(N-L+E));K<I&&M.scaleHeight(2*(I-K+E));return M}function G(I,K,J){return D(I,K,J).translate(-K,-J).resize(K,J)}function A(K,J){var M=C*J,I=B*J,L=Math.max(Math.min(K,M),I);if(Math.abs(L-1)>0.0001){return L}else{return 1}}return{getZoomViewBox:function(R){var J=R.viewBox,M=R.diagramBoundingBox,Q=A(R.factor,R.zoom),I,O,K,P=R.target,L,N;O=J.getWidth()*Q;I=J.getHeight()*Q;L=G(M,O,I);K=J.getRelativePositionAsPercentage(P);N=new H.geo.Point(P.getX()-K.x*O,P.getY()-K.y*I);N.setBoundary(L.getLeft(),L.getTop(),L.getRight(),L.getBottom());return new H.geo.Rectangle(N.getX(),N.getY(),O,I)},getPanViewBox:function(M){var N=M.viewBox,L=M.diagramBoundingBox,K=M.displacement,J,I;J=G(L,N.getWidth(),N.getHeight());I=N.getTopLeft().translate(K.x,K.y).setBoundary(J.getLeft(),J.getTop(),J.getRight(),J.getBottom());return new H.geo.Rectangle(I.getX(),I.getY(),N.getWidth(),N.getHeight())}}});AJS.namespace("JIRA.WorkflowDesigner.ViewBoxTransformer",null,require("workflow-designer/viewbox-transformer"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/util/Validator.js' */
define("workflow-designer/validator",["workflow-designer/io/ajax/validation-ajax-manager","workflow-designer/messages","jira/ajs/dark-features","workflow-designer/underscore"],function(E,F,D,C){var A={MINOR:1,MAJOR:2,CRITICAL:3};var H=function(I){if(!I){return 0}var J=C.map(I,function(K){return A[K.severity]});return C.max(J)||0};var B=function(I){function J(L){var M=H(L);var K={};K.alterDisplay=M===2||M===3;K.color=K.alterDisplay&&"#d04437";if(M>0){K.mostSevere=C.last(C.sortBy(L,function(N){return A[N.severity]}))}return K}return C.object(C.map(I,function(K,L){return[L,J(K)]}))};var G=function(){return D.isEnabled("jira.administration.workflow.validation.disabled")};return{serverityLevels:A,validate:function(J){if(!G()){var I=J.get("name");var K=E.check(I);K.done(function(L){J.trigger("validation:statuses",B(L.nodeProblems));J.trigger("validation:transitions",B(L.edgeProblems))}).fail(function(L){return F.showErrorMessage("The workflow couldn\'t be validated."+" "+L)})}}}});AJS.namespace("JIRA.WorkflowDesigner.Validator",null,require("workflow-designer/validator"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/io/ajax/UserPropertiesAJAXManager.js' */
define("workflow-designer/io/ajax/user-properties-ajax-manager",["workflow-designer/io/ajax/ajax-manager","workflow-designer/io/error-handler","workflow-designer/underscore","jquery","wrm/context-path"],function(C,B,E,F,D){var A=D()+"/rest/workflowDesigner/latest/userProperties";return new (C.extend({getProperty:function(H){var G=F.Deferred(),I;I=this._makeRequest({data:{key:H},dataType:"json",url:A});I.done(G.resolve);I.fail(function(K,J){G.reject(B.getErrorMessage(K,J))});return G.promise()},setProperty:function(H,J){var G=F.Deferred(),I;I=this._makeRequest({contentType:"application/json",data:JSON.stringify({key:H,value:J}),type:"POST",url:A});I.done(G.resolve);I.fail(function(L,K){G.reject(B.getErrorMessage(L,K))});return G.promise()}}))()});AJS.namespace("JIRA.WorkflowDesigner.IO.AJAX.UserPropertiesAJAXManager",null,require("workflow-designer/io/ajax/user-properties-ajax-manager"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/util/Analytics.js' */
define("workflow-designer/analytics",["workflow-designer/io/ajax/user-properties-ajax-manager","jquery"],function(D,I){var G,H;function A(J){if(!J){return""}if(!J.get("administrator")&&J.get("editWorkflow")){return"editworkflowpermission."}return""}function F(J,K,L){if(AJS.EventQueue){var M=A(L);AJS.EventQueue.push({name:"administration.workflow."+M+J,properties:K})}}function B(K,L){var J="administration.workflow."+K;if(AJS.Analytics){AJS.Analytics.triggerPrivacyPolicySafeEvent(J,L)}else{AJS.trigger("analyticsEvent",{name:J,data:L})}}function C(J,K){I(document).on("click",J,function(){B(K)})}function E(M,K,L,J){F("edit",I.extend({mode:"new-diagram",action:M,object:K},J),L)}C(".enter-full-screen","fullscreen");C("[data-transition-option-key='properties.key']","view.transition.properties");C("[data-transition-option-key='com.atlassian.jira.plugins.jira-transition-triggers-plugin:triggers-transitions-tab']","view.transition.triggers-transitions-tab");C("[data-transition-option-key='com.atlassian.jira.plugin.system.workfloweditor.transition.tabs:conditions']","view.transition.conditions");C("[data-transition-option-key='com.atlassian.jira.plugin.system.workfloweditor.transition.tabs:validators']","view.transition.validators");C("[data-transition-option-key='com.atlassian.jira.plugin.system.workfloweditor.transition.tabs:postfunctions']","view.transition.postfunctions");C(".status-properties","view.status.properties");return{_reset:function(){G=false;H=false},triggerToggleLabels:function(J){F("toggle.labels."+(J?"on":"off"))},triggerAddStatus:function(J,K){E("add","status",J,K)},triggerUpdateStatus:function(J,K){E("update","status",J,K)},triggerAddStep:function(J,K){E("add","step",J,K)},triggerFirstAddStatus:function(M,J){var L="jira.workflowdesigner.added.first.status",K=I.Deferred();G||(K=D.getProperty(L));K.done(function(O){var N=!O.value;if(N){F("first.add.status",{duration:M},J);D.setProperty(L,true)}G=true})},triggerUpdateStep:function(J,K){E("update","step",J,K)},triggerRemoveStep:function(J,K){E("remove","step",J,K)},triggerRemoveStepClicked:function(J,K){F("status.remove.clicked",K,J)},triggerAddCommonTransition:function(J,K){E("add","commontransition",J,K)},triggerAddTransition:function(J,K){E("add","transition",J,K)},triggerFirstAddTransition:function(N,J,M){var L="jira.workflowdesigner.added.first.transition",K=I.Deferred();H||(K=D.getProperty(L));K.done(function(P){var O=!P.value;if(O){F("first.add.transition",I.extend({duration:N},M),J);D.setProperty(L,true)}H=true})},triggerUpdateTransition:function(J,K){E("update","transition",J,K)},triggerRemoveTransition:function(J,K){E("remove","transition",J,K)},triggerAddGlobalTransition:function(J){E("add","globaltransition",null,J)},triggerUpdateGlobalTransition:function(J,K){E("update","globaltransition",J,K)},triggerRemoveGlobalTransition:function(J,K){E("remove","globaltransition",J,K)},triggerAddLoopedTransition:function(J){E("add","loopedtransition",null,J)},triggerUpdateLoopedTransition:function(J,K){E("update","loopedtransition",J,K)},triggerRemoveLoopedTransition:function(J){E("remove","loopedtransition",null,J)}}});AJS.namespace("JIRA.WorkflowDesigner.Analytics",null,require("workflow-designer/analytics"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/CanvasModel.js' */
define("workflow-designer/canvas-model",["workflow-designer/analytics","workflow-designer/backbone"],function(A,B){return B.Model.extend({defaults:{selectedModel:null,selectedView:null,showTransitionLabels:false,zoomLevel:null},initialize:function(C,D){this._workflowModel=D.workflowModel;this.listenTo(this,"change:showTransitionLabels",this._onShowTransitionLabelsChange);this.listenTo(this._workflowModel,{"new:status":this._selectModel,"new:transition":this._selectModel,"reset:before":this._deselect});this.listenTo(this._workflowModel.get("transitions"),"destroy",this._onDestroy)},_deselect:function(){this.set({selectedModel:null,selectedView:null})},_onDestroy:function(D){var C=this.get("selectedModel")===D;C&&this._deselect()},_onShowTransitionLabelsChange:function(C,D){A.triggerToggleLabels(D)},_selectModel:function(C){this.get("selectedModel")||this.set("selectedModel",C)},selectView:function(C){this.set({selectedModel:C&&C.model,selectedView:C})}})});AJS.namespace("JIRA.WorkflowDesigner.CanvasModel",null,require("workflow-designer/canvas-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/layout/connection/GappedConnection.js' */
define("workflow-designer/layout/connection/gapped-connection",["workflow-designer/direction","workflow-designer/draw-2d"],function(B,A){return A.Connection.extend({init:function(C,D){this._super();this._sourceGap=C;this._targetGap=D},_getTransformation:function(E,F){var D=0,C=0;switch(E){case B.UP:C=-F;break;case B.RIGHT:D=F;break;case B.DOWN:C=F;break;case B.LEFT:D=-F;break}return{x:D,y:C}},getEndPointGapTransformation:function(){return this._getTransformation(this.getTarget().getConnectionDirection(),this._targetGap)},getStartPointGapTransformation:function(){return this._getTransformation(this.getSource().getConnectionDirection(),this._sourceGap)},setEndPoint:function(C,E){var D;if(this.isMoving){this._super(C,E)}else{D=this.getEndPointGapTransformation();this._super(C+D.x,E+D.y)}},setStartPoint:function(C,E){var D;if(this.isMoving){this._super(C,E)}else{D=this.getStartPointGapTransformation();this._super(C+D.x,E+D.y)}},getEndPoint:function(){var D,C=this._super();if(this.isMoving){return C}D=this.getEndPointGapTransformation();return C.clone().translate(D.x,D.y)},getStartPoint:function(){var D=this.getStartPointGapTransformation(),C=this._super();if(this.isMoving){return C}return C.clone().translate(D.x,D.y)}})});AJS.namespace("JIRA.WorkflowDesigner.Layout.Connection.GappedConnection",null,require("workflow-designer/layout/connection/gapped-connection"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/layout/connection/RoundedManhattanConnectionRouter.js' */
define("workflow-designer/layout/connection/rounded-manhattan-connection-router",["workflow-designer/vector-2d","workflow-designer/draw-2d","workflow-designer/underscore"],function(C,B,A){return B.layout.connection.ManhattanConnectionRouter.extend({CORNER_RADIUS:5,init:function(){this._super.apply(this,arguments)},_calculateConnectionPoints:function(D){this._route(D,D.getEndPoint(),D.getTarget().getConnectionDirection(),D.getStartPoint(),D.getSource().getConnectionDirection());return D.getPoints().asArray()},_getPointInstructions:function(E,F,H){var G=new C(E,H[F+1]||E),I=new C(E,H[F-1]||E),D;D=Math.min(G.getLength()/2,I.getLength()/2,this.CORNER_RADIUS);return["L",E.add(I.normalize().multiply(D)).getComponents(),"S",E.getComponents(),E.add(G.normalize().multiply(D)).getComponents()]},route:function(F){var E=this,G;function D(I,H,J,K){return I.concat(E._getPointInstructions(H,J,K))}G=this._calculateConnectionPoints(F);F.svgPathString=A.reduce(G,D,["M",G[0].x,G[0].y]).join(" ")}})});AJS.namespace("JIRA.WorkflowDesigner.Layout.Connection.RoundedManhattanConnectionRouter",null,require("workflow-designer/layout/connection/rounded-manhattan-connection-router"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/layout/locator/ManhattanPercentageLocator.js' */
define("workflow-designer/layout/locator/manhattan-percentage-locator",["workflow-designer/vector-2d","workflow-designer/draw-2d","workflow-designer/underscore"],function(C,B,A){function E(F){return new C(F.start,F.end).getLength()}function D(F){var G=F.getSegments().asArray();return A.reduce(G,function(H,I){return H+E(I)},0)}return B.layout.locator.ConnectionLocator.extend({init:function(G,F){this._percentage=F;this._super(G)},relocate:function(G,I){var F=this.getParent(),K=D(F)*this._percentage,H,J;H=A.find(F.getSegments().asArray(),function(M){var L=E(M);if(L>=K){return true}K-=L});if(H){J=new C(H.start,H.end);J.normalize().multiply(K).translate(I.getWidth()/-2,I.getHeight()/-2);I.setPosition(H.start.getTranslated(J))}}})});AJS.namespace("JIRA.WorkflowDesigner.Layout.Locator.ManhattanPercentageLocator",null,require("workflow-designer/layout/locator/manhattan-percentage-locator"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/layout/locator/PositionOnParentBoundsLocator.js' */
define("workflow-designer/layout/locator/position-on-parent-bounds-locator",["workflow-designer/direction","workflow-designer/draw-2d"],function(B,A){return A.layout.locator.Locator.extend({init:function(C){this._super(C.parent);this.side=C.side;this.bias=C.bias},relocate:function(D,F){var H=this.getParent().getBoundingBox(),E=B,C,G;if(this.side===E.UP||this.side===E.DOWN){C=H.getWidth()*this.bias;G=(this.side===E.UP)?0:H.getHeight()}else{if(this.side===E.LEFT||this.side===E.RIGHT){G=H.getHeight()*this.bias;C=(this.side===E.LEFT)?0:H.getWidth()}}F.setPosition(C,G)}})});AJS.namespace("JIRA.WorkflowDesigner.Layout.Locator.PositionOnParentBoundsLocator",null,require("workflow-designer/layout/locator/position-on-parent-bounds-locator"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/layout/locator/StaticLocator.js' */
define("workflow-designer/layout/locator/static-locator",["workflow-designer/draw-2d"],function(A){return A.layout.locator.Locator.extend({init:function(C,B,D){this._super(C);this._x=B;this._y=D},relocate:function(B,C){C.setPosition(this._x,this._y)}})});AJS.namespace("JIRA.WorkflowDesigner.Layout.Locator.StaticLocator",null,require("workflow-designer/layout/locator/static-locator"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/policy/port/StatusPortsFeedbackPolicy.js' */
define("workflow-designer/policy/feedback/status-ports-feedback-policy",["workflow-designer/draw-2d","workflow-designer/underscore","jquery"],function(B,A,C){return B.policy.port.IntrusivePortsFeedbackPolicy.extend({prepareDropTargetsForDrag:function(D){A.invoke(D.asArray(),"show")},alterDropTargetOnDrag:C.noop,alterDropTargetOnDragEnd:C.noop,getConnectionLineColour:function(){return"#1a8cff"},onHoverEnter:function(E,F,D){D.setGlow(true)},onHoverLeave:function(E,F,D){D.setGlow(false)}})});AJS.namespace("JIRA.WorkflowDesigner.Policy.Feedback.StatusPortsFeedbackPolicy",null,require("workflow-designer/policy/feedback/status-ports-feedback-policy"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/StatusPort.js' */
define("workflow-designer/status-port",["workflow-designer/policy/feedback/status-ports-feedback-policy","workflow-designer/draw2d-utilities","workflow-designer/draw-2d","workflow-designer/underscore"],function(B,C,D,A){var E=D.HybridPort.extend({RADIUS:8,STROKE_WIDTH:1,init:function(F){this._super();this.connectionDirection=F.connectionDirection;this.canvas=F.canvas;this.isPortDragged=F.isPortDragged;this.getAllTargetPorts=F.getAllTargetPorts;this.lighterBgColor=this.bgColor.hash();this.setBackgroundColor("#ffffff");this.setColor("#1a8cff");this.setCoronaWidth(6);this.setDimension(this.RADIUS,this.RADIUS);this.setStroke(this.STROKE_WIDTH);this.hide();this._resetEditPolicies();this.installEditPolicy(new B())},_resetEditPolicies:function(){var F=this;this.editPolicy.each(function(G,H){H.onUninstall(F)});this.editPolicy=new D.util.ArrayList()},getConnectionDirection:function(){return this.connectionDirection},getDropTarget:function(F,G){return E.getHitPort(F,G,this.getDropTargets().asArray())},getDropTargets:function(){var F=A.without(this.getAllTargetPorts(),this);return new D.util.ArrayList(F).trimToSize()},onMouseEnter:function(F){this.trigger("mouse:enter",F)},onMouseLeave:function(F){this.trigger("mouse:leave",F)},onDragStart:function(){this.triggerDragStart();this.trigger("select");this._super()},onDragEnd:function(){this._super();this.triggerDragEnd()},triggerDragStart:function(){this.trigger("drag:start")},triggerDragEnd:function(){this.trigger("drag:end")},hitTest:function(G,M){if(this.isPortDragged()){return this._super(G,M)}var J=this.getAbsoluteX();var H=this.getAbsoluteY();var I=J-this.getWidth()/2;var F=H-this.getHeight()/2;var L=J+this.getWidth()/2;var K=H+this.getHeight()/2;return(G>=I&&G<=L&&M>=F&&M<=K)},show:function(){this.sendToFront().setVisible(true)},hide:function(){this.setVisible(false)},repaint:function(){this._super.apply(this,arguments);this._setCursor(this)},setGlow:function(F){var G="#3b7fc4";this._super(F);if(F){this.corona.setBackgroundColor(G);this.corona.setColor(G);this.corona.shape.attr("opacity",0.45);this._setCursor(this.corona);this.sendToFront();this.setStroke(0)}else{this.setStroke(this.STROKE_WIDTH)}},_setCursor:function(F){C.setCursor(F,"crosshair")}});E.getHitPort=function(F,L,I){var K=new D.geo.Point(F,L),J;function G(M){return M.hitTest(K.x,K.y)}function H(M){return M.getAbsolutePosition().getDistance(K)}J=A.chain(I).filter(G).min(H).value();return J instanceof E?J:null};return E});AJS.namespace("JIRA.WorkflowDesigner.StatusPort",null,require("workflow-designer/status-port"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/mixins/LineResizeHandleMixin.js' */
define("workflow-designer/line-resize-handle-mixin",["workflow-designer/status-port","workflow-designer/draw-2d","workflow-designer/underscore"],function(C,B,A){return{init:function(){this._actionableArea=new B.shape.basic.Circle(20);this._actionableArea.draggable=true;this.setActionableAreaAttributes({})},setPosition:function(){this._actionableArea.setPosition(this.x-this._actionableArea.width/2+this.width/2,this.y-this._actionableArea.height/2+this.height/2)},show:function(D){this._actionableArea.setCanvas(D);this._actionableArea.sendToFront()},hide:function(){this._actionableArea.setCanvas(null)},repaint:function(D){D=A.extend({},D,{cursor:"crosshair",fill:"#333333",stroke:"#333333"});var E=this.getGap();this.x-=E.x;this.y-=E.y;if(this._actionableArea&&this._actionableAreaAttributes){this._actionableArea.repaint(this._actionableAreaAttributes);this._actionableArea.sendToFront()}return B.shape.basic.LineResizeHandle.prototype.repaint.call(this,D)},setActionableAreaAttributes:function(D){this._actionableAreaAttributes=A.defaults({},D,{cursor:"crosshair","fill-opacity":0,"stroke-opacity":0})},hitTest:function(D,E){return this._actionableArea.hitTest(D,E)},sendActionableAreaToFront:function(){this._actionableArea.sendToFront()},onDragStart:function(){var D=this.getRelatedPort();D.triggerDragStart();A.chain(this._getDropTargets(D)).without(this.getOppositePortTo(D)).invoke("show")},onDragEnd:function(){var D=this.getRelatedPort();D.triggerDragEnd();A.invoke(this._getDropTargets(D),"hide")},_getDropTarget:function(D,F,E){return C.getHitPort(D,F,this._getDropTargets(E))}}});AJS.namespace("JIRA.WorkflowDesigner.LineResizeHandleMixin",null,require("workflow-designer/line-resize-handle-mixin"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/mixins/RequestResponseMixin.js' */
define("workflow-designer/request-response-mixin",["workflow-designer/backbone"],function(A){return{initialize:function(){this.requestResponse=new A.Wreqr.RequestResponse()},remove:function(){this.requestResponse.removeAllHandlers()}}});AJS.namespace("JIRA.WorkflowDesigner.RequestResponseMixin",null,require("workflow-designer/request-response-mixin"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/mixins/SelectableFigureMixin.js' */
define("workflow-designer/selectable-figure-mixin",[],function(){return{deselect:function(){if(this.isSelected()){this._canvas.selectFigure(null)}else{this._onDeselect()}},isSelected:function(){return this._canvas.getSelectedFigure()===this._getFigure()},select:function(){if(this.isSelected()){this._onSelect()}else{this._canvas.selectFigure(this._getFigure())}}}});AJS.namespace("JIRA.WorkflowDesigner.SelectableFigureMixin",null,require("workflow-designer/selectable-figure-mixin"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/LineEndResizeHandle.js' */
define("workflow-designer/line-end-resize-handle",["workflow-designer/layout/connection/gapped-connection","workflow-designer/line-resize-handle-mixin","workflow-designer/draw-2d","workflow-designer/cocktail",],function(C,E,D,A){var B=D.shape.basic.LineEndResizeHandle.extend({getGap:function(){if(this.owner instanceof C){return this.owner.getEndPointGapTransformation()}return{x:0,y:0}},_getDropTargets:function(F){return F.getAllTargetPorts()}});A.mixin(B,E);return B});AJS.namespace("JIRA.WorkflowDesigner.LineEndResizeHandle",null,require("workflow-designer/line-end-resize-handle"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/LineStartResizeHandle.js' */
define("workflow-designer/line-start-resize-handle",["workflow-designer/layout/connection/gapped-connection","workflow-designer/line-resize-handle-mixin","workflow-designer/draw-2d","workflow-designer/cocktail"],function(C,E,D,B){var A=D.shape.basic.LineStartResizeHandle.extend({getGap:function(){if(this.owner instanceof C){return this.owner.getStartPointGapTransformation()}return{x:0,y:0}},_getDropTargets:function(F){return F.getAllTargetPorts()}});B.mixin(A,E);return A});AJS.namespace("JIRA.WorkflowDesigner.LineStartResizeHandle",null,require("workflow-designer/line-start-resize-handle"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/policy/canvas/snap-to-geometry/Snapper.js' */
define("workflow-designer/policy/canvas/snapper",["workflow-designer/underscore"],function(B){var A=function(C){B.bindAll(this,"snap");this.points=C};A.prototype={snap:function(D){function C(E){return E-D}if(this.points.length===0){return 0}return B.chain(this.points).map(C).min(Math.abs).value()}};return A});AJS.namespace("JIRA.WorkflowDesigner.Policy.Canvas.SnapToGeometry.Snapper",null,require("workflow-designer/policy/canvas/snapper"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/policy/canvas/snap-to-geometry/SnapPoints.js' */
define("workflow-designer/policy/canvas/snap-to-geometry/snap-points",["workflow-designer/underscore"],function(B){var A={getXSnapPoints:function(C){function D(E){var F=E.getBoundingBox();return B.map([F.getLeft(),F.getCenter().getX(),F.getRight()],this._makeSnapPoint(E))}B.isArray(C)||(C=[C]);return B.flatMap(C,D,this)},getYSnapPoints:function(C){function D(E){var F=E.getBoundingBox();return B.map([F.getTop(),F.getBottom()],this._makeSnapPoint(E))}B.isArray(C)||(C=[C]);return B.flatMap(C,D,this)},_makeSnapPoint:function(C){return function(D){return{rectangle:C.getBoundingBox(),value:D}}}};B.bindAll(A,"getXSnapPoints","getYSnapPoints");return A});AJS.namespace("JIRA.WorkflowDesigner.Policy.Canvas.SnapToGeometry.SnapPoints",null,require("workflow-designer/policy/canvas/snap-to-geometry/snap-points"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/policy/canvas/snap-to-geometry/GuideLineEditPolicy.js' */
define("workflow-designer/policy/canvas/snap-to-geometry/guide-line-edit-policy",["workflow-designer/policy/canvas/snap-to-geometry/snap-points","workflow-designer/draw-2d","underscore"],function(A,C,B){return C.policy.canvas.CanvasPolicy.extend({GUIDE_LINE_COLOUR:"#ff0000",init:function(){this._super.apply(this,arguments)},_collectFigures:function(){var D=this;if(this.figures){return }this.figures=[];this.canvas.getFigures().each(function(F,E){if(E.snapToGeometry){if(E.isInDragDrop){D.dragFigure=E}else{D.figures.push(E)}}})},_collectSnapPoints:function(){if(this.SnapPoints){return }this.SnapPoints={x:A.getXSnapPoints(this.figures),y:A.getYSnapPoints(this.figures)}},_drawGuideLine:function(E,G,D,F){var H=["M",E,G,"L",D,F].join(" ");this.guideLines||(this.guideLines=[]);this.guideLines.push(this.canvas.paper.path(H).attr({stroke:this.GUIDE_LINE_COLOUR}))},_drawGuideLines:function(D,E,F){var G=B.cartesianProduct(E,F);B.each(G,function(H){if(this._equalSnapPoints(H[0],H[1])){D.apply(this,H)}},this)},_drawHorizontalGuideLines:function(){var E;function D(G,I){var H=Math.max(G.rectangle.getRight(),I.rectangle.getRight()),F=Math.min(G.rectangle.getLeft(),I.rectangle.getLeft());this._drawGuideLine(F,G.value,H,G.value)}E=A.getYSnapPoints(this.dragFigure);this._drawGuideLines(D,E,this.SnapPoints.y)},_drawVerticalGuideLines:function(){var E;function D(G,I){var H=Math.max(G.rectangle.getBottom(),I.rectangle.getBottom()),F=Math.min(G.rectangle.getTop(),I.rectangle.getTop());this._drawGuideLine(G.value,F,G.value,H)}E=A.getXSnapPoints(this.dragFigure);this._drawGuideLines(D,E,this.SnapPoints.x)},_equalSnapPoints:function(E,D){return Math.abs(E.value-D.value)<=0.1},onInstall:function(D){this.canvas=D},onMouseDrag:function(){this._collectFigures();this._removeGuideLines();if(!this.dragFigure||this.figures.length===0){return }this._collectSnapPoints();this._drawHorizontalGuideLines();this._drawVerticalGuideLines()},onMouseUp:function(){delete this.dragFigure;delete this.figures;delete this.SnapPoints;this._removeGuideLines()},onUninstall:function(){delete this.canvas},_removeGuideLines:function(){B.invoke(this.guideLines,"remove");this.guideLines=[]}})});AJS.namespace("JIRA.WorkflowDesigner.Policy.Canvas.SnapToGeometry.GuideLineEditPolicy",null,require("workflow-designer/policy/canvas/snap-to-geometry/guide-line-edit-policy"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/policy/canvas/snap-to-geometry/SnapEditPolicy.js' */
define("workflow-designer/policy/canvas/snap-to-geometry/snap-edit-policy",["workflow-designer/policy/canvas/snapper","workflow-designer/policy/canvas/snap-to-geometry/snap-points","workflow-designer/draw-2d","workflow-designer/underscore"],function(B,A,D,C){return D.policy.canvas.SnapToEditPolicy.extend({SNAP_THRESHOLD:3,init:function(){this._super.apply(this,arguments)},_createSnappers:function(E){var F;if(this.snappers){return }F=this._getFigures(E);this.snappers={x:new B(this._getXSnapPoints(F)),y:new B(this._getYSnapPoints(F))}},_getFigures:function(E){return C.filter(E.getFigures().asArray(),function(F){return !F.isInDragDrop&&F.snapToGeometry})},_getXSnapPoints:function(E){return C.pluck(A.getXSnapPoints(E),"value")},_getYSnapPoints:function(E){return C.pluck(A.getYSnapPoints(E),"value")},onMouseUp:function(){delete this.snappers},snap:function(G,F,E){if(!F.snapToGeometry){return E}this._createSnappers(G);return this._snapFigure(F).getTopLeft()},_snapFigure:function(E){return E.getBoundingBox().translate(this._snapPoints(this._getXSnapPoints(E),this.snappers.x),this._snapPoints(this._getYSnapPoints(E),this.snappers.y))},_snapPoints:function(G,F){var E=C.chain(G).map(F.snap).min(Math.abs).value();return Math.abs(E)<=this.SNAP_THRESHOLD?E:0}})});AJS.namespace("JIRA.WorkflowDesigner.Policy.Canvas.SnapToGeometry.SnapEditPolicy",null,require("workflow-designer/policy/canvas/snap-to-geometry/snap-edit-policy"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/policy/canvas/PanningSingleSelectionPolicy.js' */
define("workflow-designer/policy/canvas/panning-single-selection-policy",["workflow-designer/viewbox-transformer","workflow-designer/vector-2d","workflow-designer/draw-2d","aui/inline-dialog"],function(D,B,A,C){return A.policy.canvas.SingleSelectionPolicy.extend({init:function(E){this._super();this._getCanvasBoundingBox=E},onMouseDown:function(F,E,G){C.current&&C.current.hide();this._super(F,E,G);this._initialViewBox=F.getViewBox();this._boundingBox=this._getCanvasBoundingBox()},onMouseDrag:function(H,G,F,I,E){this._super(H,G,F,I,E);if(this.mouseDownElement===null&&this.mouseDraggingElement===null){H.setViewBoxQuick(D.getPanViewBox({diagramBoundingBox:this._boundingBox,displacement:new B(-G,-F),viewBox:this._initialViewBox}))}}})});AJS.namespace("JIRA.WorkflowDesigner.Policy.Canvas.PanningSingleSelectionPolicy",null,require("workflow-designer/policy/canvas/panning-single-selection-policy"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/policy/port/LineSelectionFeedbackPolicy.js' */
define("workflow-designer/policy/feedback/line-selection-feedback-policy",["workflow-designer/line-start-resize-handle","workflow-designer/line-end-resize-handle","workflow-designer/draw-2d"],function(A,B,C){return C.policy.figure.LineSelectionFeedbackPolicy.extend({createLineStartResizeHandle:function(D){return new A(D)},createLineEndResizeHandle:function(D){return new B(D)}})});AJS.namespace("JIRA.WorkflowDesigner.Policy.Feedback.LineSelectionFeedbackPolicy",null,require("workflow-designer/policy/feedback/line-selection-feedback-policy"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/Draw2DView.js' */
define("workflow-designer/draw-2d-view",["workflow-designer/backbone"],function(A){return A.View.extend({initialize:function(B){this._canvas=B.canvas},remove:function(){A.View.prototype.remove.apply(this,arguments);this._canvas.removeFigure(this._figure)}})});AJS.namespace("JIRA.WorkflowDesigner.Draw2DView",null,require("workflow-designer/draw-2d-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/FullScreenController.js' */
define("workflow-designer/full-screen-controller",["workflow-designer/underscore","jquery"],function(I,J){var G=500;var A="full-screen-controller-original-properties";var H="full-screen-controller-placeholder";function D(L,K){return I.reduce(K,function(N,M){N[M]=L.css(M);return N},{})}function B(K){var L;L=J("<div>").css({height:K.outerHeight()}).insertAfter(K);K.data(H,L)}function C(K){K.data(H).remove();K.removeData(H)}function F(K){var L=K.data(A);K.css(L).removeData(A)}function E(L,K){var M=D(L,I.keys(K));L.css(K).data(A,M)}return{enterFullScreen:function(N){var L=J("body"),M=J.Deferred(),K=J(window.document);N=J(N);B(N);E(N,{height:N.outerHeight(),left:N.offset().left-K.scrollLeft(),position:"fixed",top:N.offset().top-K.scrollTop(),width:N.outerWidth(),zIndex:2000});E(L,{overflow:"hidden"});N.appendTo(L);N.animate({height:"100%",left:0,top:0,width:"100%"},G,M.resolve);return M.promise()},exitFullScreen:function(N){var L=J("body"),M=J.Deferred(),K=J(window.document),O;function P(){N.insertBefore(O);C(N);F(N);M.resolve()}N=J(N);O=N.data(H);F(L);N.animate({height:O.outerHeight(),left:O.offset().left-K.scrollLeft(),top:O.offset().top-K.scrollTop(),width:O.outerWidth()},G,P);return M.promise()}}});AJS.namespace("JIRA.WorkflowDesigner.FullScreenController",null,require("workflow-designer/full-screen-controller"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/InlineDialogSVGPositioner.js' */
define("workflow-designer/inline-dialog-svg-positioner",["workflow-designer/svg-utilities","aui/inline-dialog","workflow-designer/backbone","workflow-designer/underscore","jquery"],function(D,B,E,A,C){return{calculatePosition:function(J,K,L,I){var H,F,G;H=D.getPageBoundingBox(K.target);G=C("<div/>").css({height:H.height,left:H.x,position:"absolute",top:H.y,width:H.width}).appendTo("body");F=B.opts.calculatePositions(J,{target:G},L,I);G.remove();return F}}});AJS.namespace("JIRA.WorkflowDesigner.InlineDialogSVGPositioner",null,require("workflow-designer/inline-dialog-svg-positioner"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/ProgressIndicatorBlanketView.js' */
define("workflow-designer/progress-indicator-blanket-view",["workflow-designer/templates","workflow-designer/backbone","jquery"],function(C,E,D){var B=40,A=440;return E.Marionette.ItemView.extend({className:"progress-indicator-blanket",template:C.progressIndicatorBlanket,ui:{spinner:".spinner"},initialize:function(F){this._container=D(F.container)},hide:function(){clearInterval(this._intervalID);this.$el.remove()},show:function(){var H=0,F=this;function G(){H=(H-B)%A;F.ui.spinner.css("background-position","0 "+H+"px")}clearInterval(this._intervalID);this._intervalID=setInterval(G,50);this.render().$el.appendTo(this._container)}})});AJS.namespace("JIRA.WorkflowDesigner.ProgressIndicatorBlanketView",null,require("workflow-designer/progress-indicator-blanket-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/Positioner.js' */
define("workflow-designer/positioner",["workflow-designer/draw-2d","workflow-designer/underscore"],function(E,D){var B=20;var F={positionLoopedTransitionContainer:function(I){var J,K,H,N,M,L;if(I.loopedTransitionContainerView.model.hasCoordinates()){return }I.statusViews.each(function(O){var S=O.getBoundingBox(),R=S.getBottom(),Q=S.getLeft(),P=S.getTop();if(!H||H>Q){H=Q}if(!N||N>P){N=P}if(!K||K<R){K=R}});J=I.loopedTransitionContainerView.getFigure();M=H-100-J.getWidth();L=N+(K-N)/2-J.getHeight()/2;I.loopedTransitionContainerView.setPosition(M,L);I.loopedTransitionContainerView.resetFigure()},positionStatuses:function(I){var M,K,L;M=new E.geo.Point(I.viewBox.getCenter().getX(),I.viewBox.getY()+I.viewBox.getHeight()*0.2);function J(O){var N=D.sum(D.map(O,G));L=M.getY()-N/2}function H(N){N.setPosition(M.getX()-N.getBoundingBox().getWidth()/2,L);L+=G(N)}K=D.chain(I.statusViews).reject(A).value();K.sort(C(I.workflowModel));D.chain(K).tap(J).each(H);return K}};function C(I){var H=I.getInitialTransitionDestinations();return function(Q,O){var J,P,K=Q.model,L,N,M=O.model;J=K.isInitial();L=M.isInitial();if(J&&!L){return -1}if(!J&&L){return 1}if(!J&&!L){P=D.contains(H,K);N=D.contains(H,M);if(P&&!N){return -1}if(!P&&N){return 1}}return K.get("id").localeCompare(M.get("id"))}}function G(H){return H.getBoundingBox().getHeight()+B}function A(H){return H.model.hasCoordinates()}return F});AJS.namespace("JIRA.WorkflowDesigner.Positioner",null,require("workflow-designer/positioner"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/TriangleFigure.js' */
define("workflow-designer/triangle-figure",["workflow-designer/status-port","workflow-designer/draw-2d","workflow-designer/underscore"],function(C,B,A){return B.VectorFigure.extend({repaint:function(D){var E;if(this.shape===null){return }E=["M",this.getAbsoluteX(),this.getAbsoluteY()+this.getHeight()/2,"l",this.getWidth(),-(this.getHeight()/2),"l",0,this.getHeight(),"Z"].join(" ");this._super(A.extend({},D,{path:E}))},createShapeElement:function(){return this.canvas.paper.path("")}})});AJS.namespace("JIRA.WorkflowDesigner.TriangleFigure",null,require("workflow-designer/triangle-figure"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/TriangleFigureUpwards.js' */
define("workflow-designer/triangle-figure-upwards",["workflow-designer/draw-2d","workflow-designer/underscore"],function(B,A){return B.VectorFigure.extend({repaint:function(C){var D;if(this.shape===null){return }D=["M",this.getAbsoluteX(),this.getAbsoluteY()+this.getHeight()/2,"l",this.getWidth()/1.5,-(this.getHeight()/1.5),"l",this.getWidth()/1.5,(this.getHeight()/1.5),"Z"].join(" ");this._super(A.extend({},C,{path:D}))},createShapeElement:function(){return this.canvas.paper.path("")}})});AJS.namespace("JIRA.WorkflowDesigner.TriangleFigureUpwards",null,require("workflow-designer/triangle-figure-upwards"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/dialogs/StatusDialogView.js' */
define("workflow-designer/dialogs/status-dialog-view",["workflow-designer/dialogs/form-dialog-view","workflow-designer/io/ajax/status-categories-ajax-manager","workflow-designer/messages","workflow-designer/backbone","workflow-designer/underscore","jquery"],function(E,G,D,H,C,F){var B=JIRA.StatusCategorySingleSelect;var A=1;return E.extend({ui:{description:"#status-description",name:"#status-name",statusCategoryId:"#status-category-id"},initialize:function(I){C.bindAll(this,"_onSubmit","_onSuccess","_onError");this._workflowModel=I.workflowModel;this._statusModel=I.statusModel},_getContent:function(){var I=this;return function(L){var K=I.serializeData(),J=I._getStatusCategoryOptions();J.done(function(M){C.extend(K,{showStatusCategoryField:true,statusCategoryOptions:M});L(I.template(K))});J.fail(function(M){D.showErrorMessage(M);I.hide()})}},_getCurrentStatusCategoryId:function(){var I=this._statusModel.get("statusCategory");return I&&I.id},_getStatusCategories:function(){var I=F.Deferred(),K=G.getStatusCategories();function J(L){return L.id===A}K.done(function(L){I.resolve(C.reject(L,J))});K.fail(I.reject);return I},_getStatusCategoryOptions:function(){var K=this._getCurrentStatusCategoryId(),I=F.Deferred(),J=this._getStatusCategories();function L(M){return{colorName:M.colorName,key:M.key,selected:M.id===K,text:M.name,value:M.id}}J.done(function(N){var M;M=C.map(N,L);M.push({isPlaceholder:true,selected:K===A,text:"Select a category"});I.resolve(M)});J.fail(I.reject);return I},_onContentRefresh:function(){if(this.ui.statusCategoryId.length){new B({element:this.ui.statusCategoryId,revertOnInvalid:true})}},_onSubmit:function(K,L){var I,J;K.preventDefault();this.disable();this.removeErrorMessages();I={description:this.ui.description.val(),name:this.ui.name.val(),statusCategoryId:this.ui.statusCategoryId.find(":selected").val(),workflowName:this._workflowModel.get("name")};J=this._makeRequest(I);J.done(this._onSuccess).fail(L).fail(this._onError)},serializeData:function(){return this._statusModel.toJSON()}})});AJS.namespace("JIRA.WorkflowDesigner.Dialogs.StatusDialogView",null,require("workflow-designer/dialogs/status-dialog-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/dialogs/add-status/CreateStatusDialogView.js' */
define("workflow-designer/dialogs/create-status-dialog-view",["workflow-designer/dialogs/status-dialog-view","workflow-designer/io/ajax/workflow-statuses-ajax-manager","workflow-designer/analytics","workflow-designer/templates","workflow-designer/backbone","workflow-designer/underscore"],function(D,E,A,C,F,B){return D.extend({id:"create-status-dialog",template:C.createStatusDialog,ui:function(){return B.extend({},D.prototype.ui,{createGlobalTransition:"#create-global-transition-create"})},initialize:function(G){G=B.defaults({},G,{createGlobalTransition:false});D.prototype.initialize.apply(this,arguments);this._createGlobalTransition=G.createGlobalTransition},_makeRequest:function(G){G=B.extend({},G,{createGlobalTransition:this.ui.createGlobalTransition.is(":checked")});return E.createStatus(G)},_onSuccess:function(G){var H=new Date()-this._workflowModel.get("loadedAt");A.triggerAddStatus(this._workflowModel.get("permissions"),this._workflowModel.get("analyticsData"));A.triggerAddStep(this._workflowModel.get("permissions"),this._workflowModel.get("analyticsData"));A.triggerFirstAddStatus(H,this._workflowModel.get("permissions"));this.hide();this._workflowModel.reset(G)},serializeData:function(){var G=D.prototype.serializeData.apply(this,arguments);return B.extend(G,{createGlobalTransition:this._createGlobalTransition})}})});AJS.namespace("JIRA.WorkflowDesigner.Dialogs.CreateStatusDialogView",null,require("workflow-designer/dialogs/create-status-dialog-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/dialogs/add-status/AddStatusSuggestionHandler.js' */
define("workflow-designer/dialogs/add-status-suggestion-handler",["jira/ajs/list/group-descriptor","jira/ajs/list/item-descriptor","jira/ajs/select/suggestions/select-suggest-handler","workflow-designer/underscore"],function(E,A,D,C){function B(F){return new E({items:[new A({fieldText:F,label:AJS.format("{0} (new status)",F),value:""})]})}return D.extend({formatSuggestions:function(G,H){var F;G=this._super.apply(this,arguments);F=[];if(G.length){F.push(new E({items:G}))}if(this._shouldShowNewStatusOption(H)){F.push(B(H))}return F},_shouldShowNewStatusOption:function(G){var H;var F;if(!this.model.options.canCreateValues){return false}G=G.toLowerCase().trim();H=G.length===0;F=C.every(this.options.statuses,function(I){return G!==I.name.toLowerCase().trim()});return !H&&F}})});AJS.namespace("JIRA.WorkflowDesigner.Dialogs.AddStatusSuggestionHandler",null,require("workflow-designer/dialogs/add-status-suggestion-handler"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/dialogs/add-status/AddStatusInlineDialogView.js' */
define("workflow-designer/dialogs/add-status-inline-dialog-view",["workflow-designer/io/ajax/workflow-statuses-ajax-manager","workflow-designer/dialogs/inline-dialog-view","workflow-designer/dialogs/create-status-dialog-view","workflow-designer/status-model","workflow-designer/dialogs/add-status-suggestion-handler","workflow-designer/messages","workflow-designer/analytics","jira/ajs/select/single-select","workflow-designer/templates","workflow-designer/backbone","workflow-designer/underscore","jquery"],function(D,E,F,C,A,B,G,L,K,I,H,J){return E.extend({events:{"change #create-global-transition-add":"_storeCreateGlobalTransition","click .cancel":"_cancel","selected #status-name":"_onSelection","submit form":"_submit","unselect #status-name":"_clearSelection"},id:"add-status-dialog-view-watchers",template:K.addStatusInlineDialog,ui:{createGlobalTransition:"#create-global-transition-add",form:".contents form",statusName:"#status-name",submit:":submit"},initialize:function(M){H.bindAll(this,"_onError","_onSelection","_onSuccess");E.prototype.initialize.apply(this,arguments);this._workflowModel=M.workflowModel;this._createStatus=this._workflowModel.get("permissions").get("createStatus")},_addExistingStatus:function(){var M,N=H.bind(this.trigger,this,"done");this._disable();this._removeErrorMessages();this.trigger("submit");M={createGlobalTransition:this.ui.createGlobalTransition.is(":checked"),statusId:this._selectedOption.value(),workflowName:this._workflowModel.get("name")};this._request=D.addStatus(M);this._request.always(N).done(this._onSuccess).fail(this._onError)},_cancel:function(M){M&&M.preventDefault();this._clearSelection();this._createGlobalTransition=false;this.hide()},_clearSelection:function(){this._selectedOption=undefined;this.ui.submit.attr("disabled","")},_clickShouldHide:function(N){var M=E.prototype._clickShouldHide.apply(this,arguments);return !this._isStatusNameDropdown(N.target)&&M},_createNewStatus:function(){var M;M={createGlobalTransition:this.ui.createGlobalTransition.is(":checked"),statusModel:new C({name:this._selectedOption.fieldText()}),workflowModel:this._workflowModel};new F(M).show();this._cancel()},_disable:function(){this.$(":input").attr("disabled","disabled")},_enable:function(){this.$(":input").removeAttr("disabled")},_getContent:function(O,N){var M=this,P=D.getStatuses({workflowName:this._workflowModel.get("name")});P.done(function(R){var Q;Q=M.template({createGlobalTransition:M._createGlobalTransition,statusOptions:M._getStatusOptions(R),createStatus:M._createStatus});O.html(Q);M._statuses=R;N()});P.fail(function(Q){B.showErrorMessage(Q);M._reset()})},_getStatusOptions:function(O){var N;function M(R){return R.name.toLowerCase()}function Q(R){return H.contains(N,R.id)}function P(R){return{text:R.name,value:R.id}}N=this._workflowModel.get("statuses").pluck("statusId");return H.chain(O).reject(Q).sortBy(M).map(P).value()},_isStatusNameDropdown:function(O){var N=this._statusName.dropdownController,M=N&&N.layer()[0];return !!J(O).closest(M).length},_onBeforeShow:function(){var M=this._selectedOption;this._statusName=new L({element:this.ui.statusName,errorMessage:"",statuses:this._statuses,suggestionsHandler:A});M&&this._statusName.setSelection(M)},_onError:function(M){this._enable();M&&this.ui.form.prepend(aui.message.error({content:M}))},_onSelection:function(N,M){this._selectedOption=M;this.ui.submit.removeAttr("disabled")},_onShow:function(){this.$("#status-name-field").focus()},_onSuccess:function(M){var N=new Date()-this._workflowModel.get("loadedAt");G.triggerAddStep(this._workflowModel.get("permissions"),this._workflowModel.get("analyticsData"));G.triggerFirstAddStatus(N,this._workflowModel.get("permissions"));D.reset();this._clearSelection();this._createGlobalTransition=false;this.hide();this._workflowModel.reset(M)},_removeErrorMessages:function(){this.$(".aui-message.error").remove()},_shouldHide:function(){return !(this._request&&this._request.state()==="pending")},_storeCreateGlobalTransition:function(){this._createGlobalTransition=this.ui.createGlobalTransition.is(":checked")},_submit:function(O){var M=!!(this._selectedOption&&this._selectedOption.value());var N=!!this._selectedOption;O.preventDefault();if(M){this._addExistingStatus()}else{if(N&&this._createStatus){this._createNewStatus()}}}})});AJS.namespace("JIRA.WorkflowDesigner.Dialogs.AddStatusInlineDialogView",null,require("workflow-designer/dialogs/add-status-inline-dialog-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/dialogs/TransitionDialogView.js' */
define("workflow-designer/dialogs/transition-dialog-view",["workflow-designer/dialogs/form-dialog-view","workflow-designer/io/ajax/screens-ajax-manager","workflow-designer/messages","workflow-designer/backbone","workflow-designer/underscore","jquery"],function(D,B,C,F,A,E){return D.extend({initialize:function(G){A.bindAll(this,"_onError","_onLoadError","_onSubmit","_onSuccess");this._canvasModel=G.canvasModel;this._transitionModel=G.transitionModel;this._workflowModel=G.workflowModel},_getScreenOptions:function(){function J(K){return{text:K.name,value:K.id,selected:K.id===G}}var H=E.Deferred();if(this._hasScreenPermissions()){var I=B.getScreens(),G=this._transitionModel.get("screenId");I.done(function(K){H.resolve(A.map(K,J))});I.fail(H.reject);return H.promise()}else{H.resolve([{id:0,name:"None"}]);return H.promise()}},_hasScreenPermissions:function(){return !!this._workflowModel.get("permissions").get("selectScreenOnTransition")},_onLoadError:function(G){C.showErrorMessage(G);this.hide()},_onSubmit:function(G){G.preventDefault();this.disable();this.removeErrorMessages()}})});AJS.namespace("JIRA.WorkflowDesigner.Dialogs.TransitionDialogView",null,require("workflow-designer/dialogs/transition-dialog-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/dialogs/add-transition/AddTransitionFormView.js' */
define("workflow-designer/add-transition-form-view",["jira/ajs/select/single-select","workflow-designer/backbone","workflow-designer/underscore"],function(B,C,A){return C.Marionette.ItemView.extend({initialize:function(){},_clearAngles:function(){this.model.set({sourceAngle:null,targetAngle:null})},_getSelectedSourceStatus:function(){var D=Number(this.ui.sourceStepId.find(":selected").val());return this.options.workflowModel.get("statuses").findWhere({initial:false,stepId:D})},_getSelectedTargetStatus:function(){var D=Number(this.ui.targetStepId.find(":selected").val());return this.options.workflowModel.get("statuses").findWhere({initial:false,stepId:D})},onShow:function(){var D;new B({element:this.ui.sourceStepId,revertOnInvalid:true});new B({element:this.ui.targetStepId,revertOnInvalid:true});D=A.bind(this._clearAngles,this);this.ui.sourceStepId.on("selected",D);this.ui.targetStepId.on("selected",D)}})});AJS.namespace("JIRA.WorkflowDesigner.AddTransitionFormView",null,require("workflow-designer/add-transition-form-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/dialogs/add-transition/NewTransitionFormView.js' */
define("workflow-designer/new-transition-form-view",["workflow-designer/add-transition-form-view","workflow-designer/io/ajax/workflow-looped-transitions-ajax-manager","workflow-designer/io/ajax/workflow-global-transitions-ajax-manager","workflow-designer/io/ajax/workflow-transitions-ajax-manager","jira/ajs/select/single-select","workflow-designer/templates","workflow-designer/backbone","workflow-designer/underscore","jquery"],function(E,B,F,A,J,K,G,H,I){var C=-65536,D=-65537;return E.extend({template:K.newTransitionForm,ui:{description:"#transition-description",name:"#transition-name",screenId:"#transition-screen-id",sourceStepId:"#transition-source-step-id",targetStepId:"#transition-target-step-id"},initialize:function(){H.bindAll(this,"_onAddTransitionSuccess");function L(M,N){return{text:M,value:N,selected:false}}this.options=I.extend(true,{},this.options,{});this.options.sourceStatuses.push(L("Any status",C));this.options.targetStatuses.push(L("Itself",D))},_getSelectedScreenId:function(){return Number(this.ui.screenId.find(":selected").val()||0)},_getSelectedScreenName:function(){return this.ui.screenId.find(":selected").text()},onShow:function(){E.prototype.onShow.apply(this,arguments);new J({element:this.ui.screenId,revertOnInvalid:true})},_onAddTransitionSuccess:function(M){var L;L=H.extend({},M,{description:this.ui.description.val(),globalTransition:M.global,loopedTransition:M.looped,name:this.ui.name.val(),screenId:this._getSelectedScreenId(),screenName:this._getSelectedScreenName(),source:this._getSelectedSourceStatus(),target:this._getSelectedTargetStatus()});this.model.set(L)},serializeData:function(){return{screens:this.options.screens,screensPermission:this.options.workflowModel.get("permissions").get("selectScreenOnTransition"),sourceStatuses:this.options.sourceStatuses,targetStatuses:this.options.targetStatuses}},_shouldUseGlobalTransition:function(L){return L.sourceStepId===C&&L.targetStepId!==D},_shouldUseLoopedTransition:function(L){return L.sourceStepId===C&&L.targetStepId===D},_shouldUseNormalTransitionLoop:function(L){return L.sourceStepId!==C&&L.targetStepId===D},_setupLoopedTransition:function(L){var M=B.addLoopedTransition(L);return M},_setupGlobalTransition:function(L){var M;L=H.extend(L,{statusId:this._getSelectedTargetStatus().get("statusId")});M=F.addGlobalTransition(L);return M},_setupNormalTransition:function(L){var M;L=H.extend(L,{sourceStepId:this._getSelectedSourceStatus().get("stepId"),targetStepId:this._getSelectedTargetStatus().get("stepId")});M=A.addTransition(L);return M},_setupNormalTransitionLoop:function(L){var M;L=H.extend(L,{sourceStepId:this._getSelectedSourceStatus().get("stepId"),targetStepId:this._getSelectedSourceStatus().get("stepId")});this.ui.targetStepId.val(this.ui.sourceStepId.val());M=A.addTransition(L);return M},submit:function(){var L=I.Deferred(),M,N;M={description:this.ui.description.val(),name:this.ui.name.val(),screenId:this._getSelectedScreenId(),sourceStepId:Number(this.ui.sourceStepId.find(":selected").val()),targetStepId:Number(this.ui.targetStepId.find(":selected").val()),workflowName:this.options.workflowModel.get("name")};if(this._shouldUseLoopedTransition(M)){N=this._setupLoopedTransition(M)}else{if(this._shouldUseGlobalTransition(M)){N=this._setupGlobalTransition(M)}else{if(this._shouldUseNormalTransitionLoop(M)){N=this._setupNormalTransitionLoop(M)}else{N=this._setupNormalTransition(M)}}}N.done(this._onAddTransitionSuccess).done(L.resolve).fail(L.reject);return L.promise()}})});AJS.namespace("JIRA.WorkflowDesigner.NewTransitionFormView",null,require("workflow-designer/new-transition-form-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/dialogs/add-transition/ReuseTransitionFormView.js' */
define("workflow-designer/reuse-transition-form-view",["workflow-designer/io/ajax/workflow-transitions-ajax-manager","workflow-designer/add-transition-form-view","jira/ajs/select/single-select","workflow-designer/analytics","workflow-designer/templates","workflow-designer/backbone","workflow-designer/underscore","jquery"],function(E,A,F,B,D,H,C,G){return A.extend({events:{"simpleClick .create-new-transition":"_triggerCreateNewTransition"},template:D.reuseTransitionForm,ui:{noTransitionsMessage:".no-transitions-message",sourceStepId:"#transition-source-step-id",targetStepId:"#transition-target-step-id",transitionId:"#transition-id"},initialize:function(){C.bindAll(this,"_onSuccess","_refreshTransitionOptions")},_getSelectedTransition:function(){var I=Number(this.ui.transitionId.find(":selected").val());return this.options.workflowModel.get("transitions").findWhere({actionId:I})},_getTransitions:function(){var J=this._getSelectedTargetStatus(),M=this.options.workflowModel.get("transitions");function I(O){return O.get("actionId")}function L(O){return O.get("name").toLowerCase()}function N(O){return O.get("target")===J}function K(O){return O.get("source")&&O.get("source").isInitial()}return M.chain().filter(N).reject(K).sortBy(L).uniq(I).value()},onShow:function(){A.prototype.onShow.apply(this,arguments);this._transitionField=new F({element:this.ui.transitionId,revertOnInvalid:true});this._refreshTransitionOptions();this.ui.targetStepId.on("selected",this._refreshTransitionOptions)},_onSuccess:function(){var I;I=this._getSelectedTransition().omit("id","sourceAngle","targetAngle");I=C.extend(I,{source:this._getSelectedSourceStatus()});B.triggerAddCommonTransition(this.options.workflowModel.get("permissions"),this.options.workflowModel.get("analyticsData"));this.model.set(I)},_refreshTransitionOptions:function(){var I;I=C.map(this._getTransitions(),function(L,J){var K;K=G("<option>").attr({value:L.get("actionId")}).text(L.get("name"));J===0&&K.attr("selected","selected");return K[0]});this._transitionField.$container.toggle(I.length>0);this._transitionField.model.$element.html(I).trigger("reset");this.ui.noTransitionsMessage.toggle(I.length<1)},serializeData:function(){return{sourceStatuses:this.options.sourceStatuses,targetStatuses:this.options.targetStatuses}},submit:function(){var I=G.Deferred(),L=!this._getTransitions().length,J,K;if(L){return I.reject("There are no transitions going to this status.").promise()}J={sourceStatusId:this._getSelectedSourceStatus().get("statusId"),transitionId:this._getSelectedTransition().get("actionId"),workflowName:this.options.workflowModel.get("name")};K=E.addCommonTransition(J);K.done(this._onSuccess).done(I.resolve).fail(I.reject);return I.promise()},_triggerCreateNewTransition:function(I){I&&I.preventDefault();this.trigger("createNewTransition")}})});AJS.namespace("JIRA.WorkflowDesigner.ReuseTransitionFormView",null,require("workflow-designer/reuse-transition-form-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/dialogs/add-transition/AddTransitionDialogView.js' */
define("workflow-designer/dialogs/add-transition-dialog-view",["workflow-designer/dialogs/transition-dialog-view","workflow-designer/reuse-transition-form-view","workflow-designer/new-transition-form-view","workflow-designer/analytics","workflow-designer/templates","aui/tabs","workflow-designer/backbone","workflow-designer/underscore"],function(D,C,F,A,E,G,H,B){return D.extend({events:{tabSelect:"_onTabChange"},id:"add-transition-dialog",regions:{newTransitionPane:"#new-transition-pane",reuseTransitionPane:"#reuse-transition-pane"},tabsTemplate:E.addTransitionDialogTabs,template:E.addTransitionDialog,_createNewTransitionForm:function(J){var I;J=B.extend({},J,{screens:this._screenOptions});I=new F(J);this.newTransitionPane.show(I)},_createReuseTransitionForm:function(J){var I;I=new C(J);this.listenTo(I,"createNewTransition",this._showNewTransitionPane);this.reuseTransitionPane.show(I)},_createTabs:function(){this.dialog.get$popupHeading().append(this.tabsTemplate());G.setup();this.dialog._positionInCenter()},_getContent:function(){var I=this,J;return function(K){J=I._getScreenOptions();J.done(function(L){I._screenOptions=L;K(I.template())});J.fail(I._onLoadError)}},_getStatusOptions:function(I){var J=this._workflowModel.get("statuses");function L(N){return N.get("name").toLowerCase()}function K(N){return N.get("initial")}function M(N){return{text:N.get("name"),value:N.get("stepId"),selected:N.get("stepId")===I}}return J.chain().reject(K).sortBy(L).map(M).value()},_getVisibleView:function(){var I;I=[this.newTransitionPane.currentView,this.reuseTransitionPane.currentView];return B.find(I,function(J){return J.$el.closest(".active-pane").length})},_getWindowTitle:function(){return "Add Transition"},_onContentRefresh:function(){var I;I={model:this._transitionModel,sourceStatuses:this._getStatusOptions(this._transitionModel.getSourceStepId()),targetStatuses:this._getStatusOptions(this._transitionModel.getTargetStepId()),workflowModel:this._workflowModel};this._createNewTransitionForm(I);this._createReuseTransitionForm(I);this._createTabs()},_onSubmit:function(J,K){var I;D.prototype._onSubmit.apply(this,arguments);I=this._getVisibleView().submit();I.done(this._onSuccess).fail(K).fail(this._onError)},_onSuccess:function(){var I=new Date()-this._workflowModel.get("loadedAt");A.triggerAddTransition(this._workflowModel.get("permissions"),this._workflowModel.get("analyticsData"));A.triggerFirstAddTransition(I,this._workflowModel.get("permissions"),this._workflowModel.get("analyticsData"));this.hide();this._workflowModel.addTransition(this._transitionModel);this._canvasModel.set("selectedModel",this._transitionModel)},_onTabChange:function(){this.$(":input:visible:first").focus();this.reposition()},showErrorMessage:function(K){var J=aui.message.error({content:K}),I=this._getVisibleView();this.removeErrorMessages();I.$el.prepend(J);this.reposition()},_showNewTransitionPane:function(){var I=this.$(".aui-tabs .new-transition > a");G.change(I)}})});AJS.namespace("JIRA.WorkflowDesigner.Dialogs.AddTransitionDialogView",null,require("workflow-designer/dialogs/add-transition-dialog-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/dialogs/DeleteStatusDialogView.js' */
define("workflow-designer/dialogs/delete-status-dialog-view",["workflow-designer/dialogs/form-dialog-view","workflow-designer/io/ajax/workflow-statuses-ajax-manager","workflow-designer/analytics","workflow-designer/templates","workflow-designer/underscore","jquery"],function(E,D,A,C,B,F){return E.extend({id:"delete-status-dialog",initialize:function(G){B.bindAll(this,"_onError","_onSuccess");this.statusModel=G.statusModel;this.workflowModel=G.workflowModel;this.errorMessage=G.errorMessage},_getContent:function(){var G=this._chooseContentTemplate();return F(G(B.extend({},this.statusModel.toJSON(),{errorMessage:this.errorMessage})))},_chooseContentTemplate:function(){var H=this.workflowModel.get("transitions").getInitial(),G=this.statusModel.hasTransition(H);if(this.errorMessage){return C.deleteStatusFailed}if(G){return C.cannotDeleteInitialStatus}return C.confirmDeleteStatus},_onSubmit:function(I,J){var G,H;I.preventDefault();this.disable();this.removeErrorMessages();G={statusId:this.statusModel.get("statusId"),workflowName:this.workflowModel.get("name")};H=D.removeStatus(G);H.done(this._onSuccess).fail(J).fail(this._onError)},_onSuccess:function(G){A.triggerRemoveStep(this.workflowModel.get("permissions"),this.workflowModel.get("analyticsData"));this.hide();this.workflowModel.reset(G)},_onError:function(G){this.dialog.hide(false);this.errorMessage=G;this.show()}})});AJS.namespace("JIRA.WorkflowDesigner.Dialogs.DeleteStatusDialogView",null,require("workflow-designer/dialogs/delete-status-dialog-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/dialogs/DeleteTransitionDialogView.js' */
define("workflow-designer/dialogs/delete-transition-dialog-view",["workflow-designer/io/ajax/workflow-transitions-ajax-manager","workflow-designer/io/ajax/workflow-global-transitions-ajax-manager","workflow-designer/io/ajax/workflow-looped-transitions-ajax-manager","workflow-designer/dialogs/form-dialog-view","workflow-designer/analytics","workflow-designer/templates","workflow-designer/underscore","jquery"],function(F,B,A,G,C,E,D,H){return G.extend({id:"delete-transition-dialog",initialize:function(I){D.bindAll(this,"_onError","_onSuccess");this.transitionModel=I.transitionModel;this.workflowModel=I.workflowModel},_getContent:function(){var I=this._chooseContentTemplate();return H(I({transitionName:this.transitionModel.get("name")}))},_chooseContentTemplate:function(){if(this.transitionModel.isInitial()){return E.cannotDeleteInitialTransitionDialog}return E.confirmDeleteTransitionDialog},_onSubmit:function(K,L){var I,J;K.preventDefault();this.disable();this.removeErrorMessages();I={transitionId:this.transitionModel.get("actionId"),sourceStepId:this.transitionModel.getSourceStepId(),workflowName:this.workflowModel.get("name")};if(this.transitionModel.isLoopedTransition()){J=A.deleteLoopedTransition(I)}else{if(this.transitionModel.isGlobalTransition()){J=B.deleteGlobalTransition(I)}else{J=F.deleteTransition(I)}}J.done(this._onSuccess).fail(L).fail(this._onError)},_onSuccess:function(){this.transitionModel.isGlobalTransition()?C.triggerRemoveGlobalTransition(this.workflowModel.get("permissions"),this.workflowModel.get("analyticsData")):C.triggerRemoveTransition(this.workflowModel.get("permissions"),this.workflowModel.get("analyticsData"));this.hide();this.transitionModel.destroy();this.workflowModel.removeTransition(this.transitionModel)}})});AJS.namespace("JIRA.WorkflowDesigner.Dialogs.DeleteTransitionDialogView",null,require("workflow-designer/dialogs/delete-transition-dialog-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/dialogs/EditStatusDialogView.js' */
define("workflow-designer/dialogs/edit-status-dialog-view",["workflow-designer/io/ajax/workflow-statuses-ajax-manager","workflow-designer/messages","workflow-designer/io/ajax/statuses-ajax-manager","workflow-designer/dialogs/status-dialog-view","workflow-designer/analytics","workflow-designer/templates","workflow-designer/backbone","workflow-designer/underscore","jquery"],function(B,A,H,C,D,I,E,F,G){return C.extend({id:"edit-status-dialog",template:I.editStatusDialog,_getContent:function(){var K=C.prototype._getContent.apply(this),J=this;return function(O){var N=H.getNumberOfAssociatedWorkflows(J._statusModel.get("statusId")),M,L=H.getStatuses();M=G.when(N,L);M.done(function(Q,P){J._numberOfAssociatedWorkflows=Q;J._statuses=P;K(O)});M.fail(function(P){A.showErrorMessage(P);J.hide()})}},_getSelectedStatusCategory:function(){var J=this.ui.statusCategoryId.find(":selected");return !J.length?null:{colourName:J.data("color-name"),id:Number(J.val())}},_makeRequest:function(J){J=F.extend({},J,{statusId:this._statusModel.get("statusId")});return B.updateStatus(J)},_onSuccess:function(){var J;J={description:this.ui.description.val(),name:this.ui.name.val(),statusCategory:this._getSelectedStatusCategory()};D.triggerUpdateStatus(this._workflowModel.get("permissions"),this._workflowModel.get("analyticsData"));D.triggerUpdateStep(this._workflowModel.get("permissions"),this._workflowModel.get("analyticsData"));this.hide();this._statusModel.set(J)},serializeData:function(){var J=C.prototype.serializeData.apply(this,arguments);return F.extend(J,{numberOfWorkflows:this._numberOfAssociatedWorkflows})}})});AJS.namespace("JIRA.WorkflowDesigner.Dialogs.EditStatusDialogView",null,require("workflow-designer/dialogs/edit-status-dialog-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/dialogs/EditTransitionDialogView.js' */
define("workflow-designer/dialogs/edit-transition-dialog-view",["workflow-designer/dialogs/transition-dialog-view","workflow-designer/io/ajax/workflow-transitions-ajax-manager","workflow-designer/analytics","jira/ajs/select/single-select","workflow-designer/templates","workflow-designer/backbone","workflow-designer/underscore"],function(C,E,A,F,D,G,B){return C.extend({id:"edit-transition-dialog",template:D.editTransitionDialog,ui:{description:"#transition-description",name:"#transition-name",screenId:"#transition-screen-id"},_getContent:function(){var H=this;return function(K){var J=H._transitionModel.toJSON(),I=H._getScreenOptions();I.done(function(L){B.extend(J,{screens:L,screensPermission:H._hasScreenPermissions()});K(H.template(J))});I.fail(H._onLoadError)}},_getSelectedScreenId:function(){return Number(this.ui.screenId.find(":selected").val()||0)},_getSelectedScreenName:function(){return this.ui.screenId.find(":selected").text()},_makeRequest:function(H){return E.updateTransition(H)},_onContentRefresh:function(){new F({element:this.ui.screenId,revertOnInvalid:true})},_onSubmit:function(J,K){var H,I;H={description:this.ui.description.val(),name:this.ui.name.val(),screenId:this._getSelectedScreenId(),sourceStepId:this._transitionModel.getSourceStepId(),transitionId:this._transitionModel.getActionId(),workflowName:this._workflowModel.get("name")};C.prototype._onSubmit.apply(this,arguments);I=this._makeRequest(H);I.done(this._onSuccess).fail(K).fail(this._onError)},_onSuccess:function(){this.hide();this._updateTransitionModels({description:this.ui.description.val(),name:this.ui.name.val(),screenId:this._getSelectedScreenId(),screenName:this._getSelectedScreenName()});this._triggerAnalyticsEvent()},_triggerAnalyticsEvent:function(){A.triggerUpdateTransition(this._workflowModel.get("permissions"),this._workflowModel.get("analyticsData"))},_updateTransitionModels:function(H){var K=this._transitionModel.get("actionId"),J=this._workflowModel.get("transitions");function I(L){return L.get("actionId")===K}J.chain().filter(I).invoke("set",H)}})});AJS.namespace("JIRA.WorkflowDesigner.Dialogs.EditTransitionDialogView",null,require("workflow-designer/dialogs/edit-transition-dialog-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/dialogs/EditGlobalTransitionDialogView.js' */
define("workflow-designer/dialogs/edit-global-transition-dialog-view",["workflow-designer/dialogs/edit-transition-dialog-view","workflow-designer/io/ajax/workflow-global-transitions-ajax-manager","workflow-designer/analytics"],function(C,A,B){return C.extend({id:"edit-global-transition-dialog",_makeRequest:function(D){return A.updateGlobalTransition(D)},_triggerAnalyticsEvent:function(){B.triggerUpdateGlobalTransition(this._workflowModel.get("permissions"),this._workflowModel.get("analyticsData"))}})});AJS.namespace("JIRA.WorkflowDesigner.Dialogs.EditGlobalTransitionDialogView",null,require("workflow-designer/dialogs/edit-global-transition-dialog-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/dialogs/EditLoopedTransitionDialogView.js' */
define("workflow-designer/dialogs/edit-looped-transition-dialog-view",["workflow-designer/dialogs/edit-transition-dialog-view","workflow-designer/io/ajax/workflow-looped-transitions-ajax-manager","workflow-designer/analytics"],function(C,A,B){return C.extend({id:"edit-looped-transition-dialog",_makeRequest:function(D){return A.updateLoopedTransition(D)},_triggerAnalyticsEvent:function(){B.triggerUpdateLoopedTransition(this._workflowModel.get("permissions"),this._workflowModel.get("analyticsData"))}})});AJS.namespace("JIRA.WorkflowDesigner.Dialogs.EditLoopedTransitionDialogView",null,require("workflow-designer/dialogs/edit-looped-transition-dialog-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/dialogs/EditTransitionSourceDialogView.js' */
define("workflow-designer/dialogs/edit-transition-source-dialog-view",["workflow-designer/io/ajax/workflow-transitions-ajax-manager","workflow-designer/dialogs/form-dialog-view","workflow-designer/templates","workflow-designer/backbone","workflow-designer/underscore","jquery"],function(C,D,B,F,A,E){return D.extend({id:"edit-transition-source-dialog",initialize:function(G){A.bindAll(this,"_onError","_onSuccess");this._newSourcePort=G.newSourcePort;this._newSourceView=G.newSourceView;this._originalSourceStatus=G.originalSourceStatus;this._transitionView=G.transitionView;this._workflowModel=G.workflowModel},_getContent:function(){return E(B.confirmEditTransitionSourceDialog({newSourceStatusName:this._newSourceView.model.get("name"),originalSourceStatusName:this._originalSourceStatus.get("name"),transitionName:this._transitionView.model.get("name")}))},_onCancel:function(){this._transitionView.resetConnection()},_onSubmit:function(H,I){var G;H.preventDefault();this.disable();this.removeErrorMessages();G=C.updateTransitionSource({transitionId:this._transitionView.model.get("actionId"),newSourceStatusId:this._newSourceView.model.get("statusId"),originalSourceStatusId:this._originalSourceStatus.get("statusId"),workflowName:this._workflowModel.get("name")});G.done(this._onSuccess).fail(I).fail(this._onError)},_onSuccess:function(){this.hide();this._workflowModel.updateTransitionSource({sourceAngle:this._newSourceView.getAngleToPort(this._newSourcePort),sourceStepId:this._newSourceView.model.get("stepId"),transition:this._transitionView.model})}})});AJS.namespace("JIRA.WorkflowDesigner.Dialogs.EditTransitionSourceDialogView",null,require("workflow-designer/dialogs/edit-transition-source-dialog-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/dialogs/EditTransitionTargetDialogView.js' */
define("workflow-designer/dialogs/edit-transition-target-dialog-view",["workflow-designer/dialogs/form-dialog-view","workflow-designer/io/ajax/workflow-transitions-ajax-manager","workflow-designer/templates","workflow-designer/backbone","workflow-designer/underscore","jquery"],function(D,C,B,F,A,E){return D.extend({id:"edit-transition-target-dialog",initialize:function(G){A.bindAll(this,"_onError","_onSuccess");this._targetPort=G.targetPort;this._targetView=G.targetView;this._transitionView=G.transitionView;this._workflowModel=G.workflowModel},_getContent:function(){return E(B.confirmEditTransitionTargetDialog({targetStatusName:this._targetView.model.get("name"),transitionName:this._transitionView.model.get("name")}))},_onCancel:function(){this._transitionView.resetConnection()},_onSubmit:function(H,I){var G;H.preventDefault();this.disable();this.removeErrorMessages();G=C.updateTransitionTarget({transitionId:this._transitionView.model.get("actionId"),targetStatusId:this._targetView.model.get("statusId"),workflowName:this._workflowModel.get("name")});G.done(this._onSuccess).fail(I).fail(this._onError)},_onSuccess:function(){this.hide();this._workflowModel.updateTransitionTargets({targetAngle:this._targetView.getAngleToPort(this._targetPort),targetStepId:this._targetView.model.get("stepId"),transition:this._transitionView.model})}})});AJS.namespace("JIRA.WorkflowDesigner.Dialogs.EditTransitionTargetDialogView",null,require("workflow-designer/dialogs/edit-transition-target-dialog-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/statuses/BaseStatusView.js' */
define("workflow-designer/base-status-view",["workflow-designer/status-port","workflow-designer/draw-2d-view","workflow-designer/draw-2d","workflow-designer/backbone","workflow-designer/underscore"],function(D,C,B,E,A){return C.extend({initialize:function(F){C.prototype.initialize.apply(this,arguments);F=A.defaults({},F,{immutable:false});this.immutable=F.immutable;this.isPortDragged=F.isPortDragged;this.getAllTargetPorts=F.getAllTargetPorts;this.workflowModel=F.workflowModel;this.listenTo(this.model,"change",this.render)},_createAndConfigureFigure:function(){var G=this._createFigure(),F=this;G.onDrag=A.wrap(G.onDrag,function(H){H.apply(this,A.toArray(arguments).slice(1));F.trigger("drag")});G.onDragEnd=A.wrap(G.onDragEnd,function(H){H.apply(this,A.toArray(arguments).slice(1));F._updatePosition();F.trigger("dragEnd")});if(this.immutable){G.setDeleteable(false);G.setResizeable(false)}else{G.installEditPolicy(new B.policy.figure.DragDropEditPolicy())}return G},_createPort:function(F){F=A.extend({},F,{canvas:this._canvas,isPortDragged:this.isPortDragged,getAllTargetPorts:this.getAllTargetPorts});return new D(F)},_getAngleToFigure:function(F){var H=F.getBoundingBox().getCenter(),G=this._figure.getBoundingBox().getCenter();return Math.atan2(H.getY()-G.getY(),H.getX()-G.getX())/Math.PI*180},getAngleToPort:function(F){return this._getAngleToFigure(F)},getAngleToStatus:function(F){return this._getAngleToFigure(F._figure)},getPortForAngle:function(G){function F(H){var I=Math.abs(G-this._getAngleToFigure(H));return I<180?I:Math.abs(I-360)}return A.min(this.getPorts(),F,this)},_positionFigure:function(){if(this.model.hasCoordinates()){this._figure.setPosition(this.model.get("x"),this.model.get("y"))}},render:function(){this._figure||(this._figure=this._createAndConfigureFigure());return this},setPosition:function(F,G){this.model.set({x:F,y:G})},_updatePosition:function(){var F=this.getBoundingBox();this.setPosition(F.getX(),F.getY())}})});AJS.namespace("JIRA.WorkflowDesigner.BaseStatusView",null,require("workflow-designer/base-status-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/statuses/InitialStatusView.js' */
define("workflow-designer/initial-status-view",["workflow-designer/draw2d-utilities","workflow-designer/layout/locator/position-on-parent-bounds-locator","workflow-designer/base-status-view","workflow-designer/direction","workflow-designer/draw-2d","workflow-designer/underscore"],function(B,E,D,F,C,A){return D.extend({_createFigure:function(){var G,H;G=this._figure=new C.shape.basic.Circle(30);G.setBackgroundColor("#C0C0C0");G.setStroke(0);G.setSelectable(false);G.snapToGeometry=true;H=this._fill=new C.shape.basic.Circle(30);H.onMouseEnter=A.bind(this.trigger,this,"highlight");H.onMouseLeave=A.bind(this.trigger,this,"unhighlight");H.setBackgroundColor("#C0C0C0");H.setStroke(0);G.addFigure(H,new C.layout.locator.CenterLocator(G));this._canvas.addFigure(G);B.setCursor(H,"move");this._addPort();this._positionFigure();return G},_addPort:function(){var H=F.DOWN,G;this.port=this._createPort({connectionDirection:H});G=new E({parent:this._figure,side:H,bias:0.5});this._figure.addPort(this.port,G)},getBoundingBox:function(){return this._figure.getBoundingBox()},getPorts:function(){return[this.port]},isSelected:function(){return false},render:function(){D.prototype.render.apply(this,arguments);this._positionFigure();return this}})});AJS.namespace("JIRA.WorkflowDesigner.InitialStatusView",null,require("workflow-designer/initial-status-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/statuses/StatusFigure.js' */
define("workflow-designer/status-figure",["workflow-designer/draw2d-utilities","workflow-designer/draw-2d","workflow-designer/backbone","workflow-designer/underscore"],function(B,C,D,A){return C.shape.basic.Rectangle.extend({init:function(){var J,K,I,H,E,G,F;E=new C.layout.locator.CenterLocator(this);this._super.apply(this,arguments);this.installEditPolicy(new C.policy.figure.SelectionFeedbackPolicy());this.setAlpha(0);this.setDeleteable(false);this.setStroke(0);this.snapToGeometry=true;I=this._hover=new C.shape.basic.Rectangle();I.onDoubleClick=A.bind(this._onDoubleClick,this);I.onMouseEnter=A.bind(this._onMouseEnter,this);I.onMouseLeave=A.bind(this._onMouseLeave,this);I.setAlpha(0);this.addFigure(I,E);J=this._edge=new C.shape.basic.Rectangle();J.setRadius(4);J.setStroke(0);this.addFigure(J,E);G=this._selectedOutline=new C.shape.basic.Rectangle();G.setColor("#1a8cff");G.setRadius(4);G.setStroke(2);G.setVisible(false);this.addFigure(G,E);F=this._validationErrorOutline=new C.shape.basic.Rectangle();F.setBackgroundColor("#ffffff");F.setRadius(4);F.setStroke(2);F.setDashArray("-");F.setVisible(false);this.addFigure(F,E);K=this._fill=new C.shape.basic.Rectangle();K.setRadius(3);K.setStroke(0);this.addFigure(K,E);H=this._label=new C.shape.basic.Label();H.setBold(true);H.setFontFamily("Arial");H.setFontSize(11);H.setStroke(0);this.addFigure(H,E)},setValidation:function(E){this._validation=E;if(!this._isSelected()){this.unselect()}},getTextColor:function(){return this._label.getFontColor()},_onDoubleClick:function(){this.onDoubleClick.apply(this,arguments)},_onMouseEnter:function(){this.onMouseEnter.apply(this,arguments)},_onMouseLeave:function(){this.onMouseLeave.apply(this,arguments)},repaint:function(){function E(F){B.setCursor(F.figure,"move")}this._super.apply(this,arguments);A.each(this.children.asArray(),E)},_resize:function(){var E=Math.max(this._label.getBoundingBox().getWidth()+40,60);this.setDimension(E,30)},_isSelected:function(){return this._selectedOutline.isVisible()},select:function(){this._super.apply(this,arguments);this._selectedOutline.setVisible(true);this._validationErrorOutline.setVisible(false)},setBackgroundColor:function(E){this._super.apply(this,arguments);this._fill&&this._fill.setBackgroundColor(E)},setCanvas:function(E){this._super.apply(this,arguments);E&&this._selectedOutline.shape.attr("fill-opacity","0");E&&this._selectedOutline.shape.attr("fill-opacity","0")},setColor:function(E){this._super.apply(this,arguments);this._edge&&this._edge.setBackgroundColor(E)},setDimension:function(F,E){var G=!!this._edge;this._super.apply(this,arguments);if(G){this._edge.setDimension(F,E);this._fill.setDimension(F-2,E-2);this._hover.setDimension(F+12,E+12);this._selectedOutline.setDimension(F+1,E+1);this._validationErrorOutline.setDimension(F+2,E+2)}},setText:function(E){this._label.setText(E.toUpperCase());this._resize()},setTextColor:function(E){this._label&&this._label.setFontColor(E)},unselect:function(){this._super.apply(this,arguments);this._selectedOutline.setVisible(false);if(this._validation&&this._validation.alterDisplay){this._validationErrorOutline.setColor(this._validation.color);this._validationErrorOutline.setVisible(true)}else{this._validationErrorOutline.setVisible(false)}}})});AJS.namespace("JIRA.WorkflowDesigner.StatusFigure",null,require("workflow-designer/status-figure"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/statuses/StatusView.js' */
define("workflow-designer/status-view",["workflow-designer/layout/locator/position-on-parent-bounds-locator","workflow-designer/status-figure","workflow-designer/dialogs/edit-status-dialog-view","workflow-designer/dialogs/delete-status-dialog-view","workflow-designer/direction","workflow-designer/status-lozenge-colours","workflow-designer/base-status-view","workflow-designer/selectable-figure-mixin","workflow-designer/cocktail","workflow-designer/underscore","workflow-designer/io/ajax/workflow-statuses-ajax-manager"],function(H,D,I,C,L,A,E,F,G,J,B){var K=E.extend({_addPort:function(P,Q){var N=this,M,O;O=this._createPort({connectionDirection:Q});M=new H({parent:this._figure,side:Q,bias:P});this._figure.addPort(O,M);O.bind("mouse:enter",function(S,R){N._onMouseEnter(R)});O.bind("mouse:leave",function(R,S){N._onMouseLeave(S)});O.bind("drag:start",J.bind(this._portStatusDragStart,this));O.bind("drag:end",J.bind(this._portStatusDragEnd,this));O.bind("select",J.bind(this.select,this));return O},_createFigure:function(){var M,N;N={onOtherFigureIsMoving:J.throttle(J.bind(this.trigger,this,"move"),25)};M=this._figure=new D();M.attachMoveListener(N);M.onDeselect=J.bind(this._onDeselect,this);M.onMouseEnter=J.bind(this._onMouseEnter,this);M.onMouseLeave=J.bind(this._onMouseLeave,this);M.onSelect=J.bind(this._onSelect,this);M.setSelectable(!this.immutable);this.listenTo(this.workflowModel,"validation:statuses",function(O){M.setValidation(O[this.model.get("stepId")])});if(!this.immutable&&this.workflowModel.get("permissions").get("editStatus")){M.onDoubleClick=J.bind(this.edit,this)}this._canvas.getLayer("statuses").addFigure(M);this._createPorts();this._positionFigure();return M},_createPorts:function(){this.ports=[this._addPort(0.22,L.UP),this._addPort(0.5,L.UP),this._addPort(0.78,L.UP),this._addPort(0.5,L.RIGHT),this._addPort(0.78,L.DOWN),this._addPort(0.5,L.DOWN),this._addPort(0.22,L.DOWN),this._addPort(0.5,L.LEFT)]},destroy:function(){var O=function(){new C({statusModel:this.model,workflowModel:this.workflowModel}).show()}.bind(this);var N=function(P){new C({errorMessage:P,statusModel:this.model,workflowModel:this.workflowModel}).show()}.bind(this);var M=B.validateRemoveStatus({statusId:this.model.get("statusId"),workflowName:this.workflowModel.get("name")});M.done(O).fail(N)},edit:function(){new I({statusModel:this.model,workflowModel:this.workflowModel}).show()},_getBackgroundColor:function(){var O,N=this._isSubtle(),M=this.model.get("statusCategory");if(M){O=A.getBackgroundColour({colourName:M.colourName,isSubtle:N})}else{if(N){O="#ffffff"}else{O="#4a6785"}}return O},_getBorderColor:function(){var O,N=this._isSubtle(),M=this.model.get("statusCategory");if(!N){O="#ffffff"}else{if(M){O=A.getBorderColour({colourName:M.colourName,isSubtle:N})}else{O="#4a6785"}}return O},getBoundingBox:function(){return this._figure.getBoundingBox()},_getFigure:function(){return this._figure},getPorts:function(){return this.ports},_getTextColor:function(){var O,N=this._isSubtle(),M=this.model.get("statusCategory");if(M){O=A.getColour({colourName:M.colourName,isSubtle:N})}else{if(N){O="#4a6785"}else{O="#ffffff"}}return O},highlight:function(){this.immutable||J.invoke(this.getPorts(),"show");this.trigger("highlight")},_isSubtle:function(){var O=this.workflowModel.has("currentStepId"),M=this.model.get("stepId")===this.workflowModel.get("currentStepId"),N=this.model.get("initial");return O&&!M&&!N},_isThisStatusHighlightTarget:function(M){var N=M&&M.getParent()===this._figure,P=this._figure===M,O=J.contains(this.ports,M);return N||P||O},_onDeselect:function(){this._canvas.getLayer("statuses").addFigure(this._figure);this.trigger("deselected",this);this.selected=false;this.unhighlight()},_onMouseEnter:function(M){this._isThisStatusHighlightTarget(M)||this.highlight()},_onMouseLeave:function(M){this._isThisStatusHighlightTarget(M)||this.unhighlight()},_onSelect:function(){this._canvas.getLayer("selected-status").addFigure(this._figure);this.highlight();this.selected=true;this.trigger("selected",this)},_portStatusDragEnd:function(){this.trigger("port:drag:end")},_portStatusDragStart:function(){this.trigger("port:drag:start")},render:function(){E.prototype.render.apply(this,arguments);this._figure.setBackgroundColor(this._getBackgroundColor());this._figure.setColor(this._getBorderColor());this._figure.setText(this.model.get("name"));this._figure.setTextColor(this._getTextColor());this._positionFigure();return this},unhighlight:function(){if(this.selected){return }this.immutable||J.invoke(this.getPorts(),"hide");this.trigger("unhighlight")},updatePortsVisibility:function(){J.invoke(this.getPorts(),this.selected?"show":"hide")}});G.mixin(K,F);return K});AJS.namespace("JIRA.WorkflowDesigner.StatusView",null,require("workflow-designer/status-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/transitions/GlobalTransitionFigure.js' */
define("workflow-designer/global-transition-figure",["workflow-designer/layout/locator/static-locator","workflow-designer/triangle-figure","workflow-designer/draw-2d","workflow-designer/underscore","jquery"],function(E,C,B,A,D){return B.shape.basic.Rectangle.extend({init:function(){var J,H,F,G,I;A.bindAll(this,"_onDoubleClick");this._super.apply(this,arguments);this.installEditPolicy(new B.policy.figure.SelectionFeedbackPolicy());this.setAlpha(0);this.setDeleteable(false);this.setDimension(68,14);this.setResizeable(false);F=this._line=new B.shape.basic.Line(0,0,0,0);F.onDoubleClick=this._onDoubleClick;F.setColor("#cccccc");F.setStroke(1);this.addFigure(F,new B.layout.locator.CenterLocator(this));J=this._arrow=new C();J.onDoubleClick=this._onDoubleClick;J.setDimension(7,8);J.setBackgroundColor("#cccccc");J.setColor("#cccccc");J.setStroke(1);this.addFigure(J,new E(this,0,3));G=this._createLozenge();I=new E(this,49,0);this.addFigure(G,I);H=this._hover=new B.shape.basic.Rectangle(19,14);H.onDoubleClick=this._onDoubleClick;H.setAlpha(0);this.addFigure(H,I)},_createLozenge:function(){var F,G;F=this._lozengeRectangle=new B.shape.basic.Rectangle(19,14);F.setBackgroundColor("#333333");F.setStroke(0);G=this._lozengeText=new B.shape.basic.Label();G.setAlpha(0);G.setBold(true);G.setFontColor("#ffffff");G.setFontFamily("Arial");G.setFontSize(11);G.setStroke(0);G.setText("All");F.addFigure(G,new B.layout.locator.CenterLocator(F));return F},getHoverElement:function(){return this._hover.shape.node},getPorts:function(){return new B.util.ArrayList()},onDrag:D.noop,_onDoubleClick:function(){this.onDoubleClick.apply(this,arguments)},_resizeLozenge:function(){var F=this._lozengeText.getWidth();this._hover.setDimension(F,this._hover.getHeight());this._lozengeRectangle.setDimension(F,this._lozengeRectangle.getHeight())},select:function(){this._super.apply(this,arguments);this._arrow.setBackgroundColor("#ffffff");this._arrow.setColor("#1a8cff");this._line.setColor("#1a8cff")},setCanvas:function(){this._super.apply(this,arguments);this._resizeLozenge()},setPosition:function(F,H){var G;this._super(F,H);G=this.getBoundingBox();this._line.setStartPoint(G.getLeft(),G.getCenter().getY());this._line.setEndPoint(G.getRight(),G.getCenter().getY())},setValidation:function(F){this._validation=F;if(!this._isSelected()){this._setLineColor()}},_isSelected:function(){return this._line.getColor()==="#1a8cff"},_setLineColor:function(){var F=this._validation&&this._validation.color||"#cccccc";this._arrow.setBackgroundColor(F);this._arrow.setColor(F);this._line.setColor(F)},unselect:function(){this._super.apply(this,arguments);this._setLineColor()}})});AJS.namespace("JIRA.WorkflowDesigner.GlobalTransitionFigure",null,require("workflow-designer/global-transition-figure"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/transitions/GlobalTransitionView.js' */
define("workflow-designer/global-transition-view",["workflow-designer/dialogs/edit-global-transition-dialog-view","workflow-designer/dialogs/delete-transition-dialog-view","workflow-designer/global-transition-figure","workflow-designer/inline-dialog-svg-positioner","workflow-designer/selectable-figure-mixin","workflow-designer/draw-2d-view","aui/inline-dialog","workflow-designer/templates","workflow-designer/cocktail","workflow-designer/underscore"],function(I,A,J,D,E,H,C,K,F,G){var B=H.extend({initialize:function(L){H.prototype.initialize.apply(this,arguments);L=G.defaults({},L,{immutable:false});this._immutable=L.immutable;this._targetView=L.targetView;this._workflowModel=L.workflowModel;this.listenTo(this._targetView,"move",this._onMove);this.listenTo(this._workflowModel,"validation:transitions",this._updateValidation)},_updateValidation:function(M){var L=M[this.model.get("id")];this._figure.setValidation(L)},_createDialog:function(){var N=this._figure.getHoverElement(),P=G.uniqueId("global-transition-dialog-"),L=this;function O(){return{fill:"#333333",stroke:"#333333"}}function M(S,R,Q){var T=K.globalTransitionDialogContent;S.html(T({name:L.model.get("name"),statusName:L.model.get("target").get("name")}));Q()}this._dialog=C(N,P,M,{calculatePositions:D.calculatePosition,getArrowAttributes:O,hideDelay:50,onHover:true})},_createFigure:function(){var L;L=this._figure=new J();L.onDeselect=G.bind(this._onDeselect,this);L.onSelect=G.bind(this._onSelect,this);L.setSelectable(!this._immutable);this._immutable||(L.onDoubleClick=G.bind(this.edit,this));this._canvas.getLayer("global-transitions").addFigure(L);this._createDialog();this._positionFigure()},destroy:function(){new A({transitionModel:this.model,workflowModel:this._workflowModel}).show()},edit:function(){new I({transitionModel:this.model,workflowModel:this._workflowModel}).show()},_getFigure:function(){return this._figure},_onDeselect:function(){this._canvas.getLayer("global-transitions").addFigure(this._figure);this.trigger("deselected",this)},_onMove:function(){this._dialog&&this._dialog.hide();this._positionFigure()},_onSelect:function(){this._canvas.getLayer("selected-transition").addFigure(this._figure);this.trigger("selected",this)},_positionFigure:function(){var L=this._figure.getBoundingBox(),M=this._targetView.getBoundingBox();this._figure.setPosition(M.getRight()+2,M.getCenter().getY()-L.getHeight()/2)},render:function(){this._figure||this._createFigure();return this}});F.mixin(B,E);return B});AJS.namespace("JIRA.WorkflowDesigner.GlobalTransitionView",null,require("workflow-designer/global-transition-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/transitions/LoopedTransitionLocator.js' */
define("workflow-designer/layout/locator/looped-transition-locator",["workflow-designer/draw-2d"],function(A){var B=15;return A.layout.locator.Locator.extend({relocate:function(F,I){var E=I.getParent(),D=E.getBoundingBox(),C=I.getBoundingBox(),H=C.getHeight(),G=B+(F*(B+H));I.setPosition(D.getWidth()/2-(C.getWidth()/2),G)}})});AJS.namespace("JIRA.WorkflowDesigner.Layout.Locator.LoopedTransitionLocator",null,require("workflow-designer/layout/locator/looped-transition-locator"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/transitions/LoopedTransitionContainerFigure.js' */
define("workflow-designer/looped-transition-container-figure",["workflow-designer/layout/locator/looped-transition-locator","workflow-designer/draw-2d"],function(B,A){return A.shape.basic.Rectangle.extend({init:function(){this._super.apply(this,arguments);this._locator=new B();this.installEditPolicy(new A.policy.figure.SelectionFeedbackPolicy());this.setBackgroundColor("#ffffff");this.setColor("#cccccc");this.setStroke(1);this.snapToGeometry=true;this.allowSelectionIfAlreadySelected=true},addTransitionFigure:function(C){this.addFigure(C,this._locator)}})});AJS.namespace("JIRA.WorkflowDesigner.LoopedTransitionContainerFigure",null,require("workflow-designer/looped-transition-container-figure"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/transitions/LoopedTransitionFigure.js' */
define("workflow-designer/looped-transition-figure",["workflow-designer/triangle-figure-upwards","workflow-designer/layout/locator/static-locator","workflow-designer/draw-2d","workflow-designer/underscore","jquery"],function(A,E,C,B,D){return C.shape.basic.Rectangle.extend({init:function(L){var M,J,I,H,F,N,G,K;B.bindAll(this,"_onDoubleClick");this._super.apply(this,arguments);this._transitionModel=L;this.installEditPolicy(new C.policy.figure.SelectionFeedbackPolicy());this.setAlpha(0);this.setDeleteable(false);this.setDimension(90,40);this.setResizeable(false);F=this._loopRectangle=new C.shape.basic.Rectangle(80,35);F.setBackgroundColor("#ffffff");F.setStroke(1);F.onDoubleClick=this._onDoubleClick;F.setColor("#cccccc");F.setStroke(1);N=new E(this,0,0);this.addFigure(F,N);M=this._arrow=new A();M.onDoubleClick=this._onDoubleClick;M.setDimension(8,9);M.setBackgroundColor("#cccccc");M.setColor("#cccccc");M.setStroke(1);this.addFigure(M,new E(this,-5,11));I=this._createLozenge();H=new E(this,-10,-5);this.addFigure(I,H);G=this._createNameLozenge();K=new E(this,20,27);this.addFigure(G,K);J=this._hover=new C.shape.basic.Rectangle(19,14);J.onDoubleClick=this._onDoubleClick;J.select=this._onSelect;J.setAlpha(0);this.addFigure(J,K)},_createLozenge:function(){var F,G;F=this._lozengeRectangle=new C.shape.basic.Rectangle(19,14);F.setBackgroundColor("#333333");F.setStroke(0);G=this._lozengeText=new C.shape.basic.Label();G.setAlpha(0);G.setBold(true);G.setFontColor("#ffffff");G.setFontFamily("Arial");G.setFontSize(11);G.setStroke(0);G.setText("All");F.addFigure(G,new C.layout.locator.CenterLocator(F));return F},_createEllipsifiedName:function(F){if(F.length>12){F=F.substring(0,11)+".."}return F},_createNameLozenge:function(){var F,G;F=this._nameLozengeRectangle=new C.shape.basic.Rectangle(30,14);F.setBackgroundColor("#ffffff");F.setStroke(0);G=this._nameLozengeText=new C.shape.basic.Label();G.setAlpha(0);G.setBold(true);G.setFontColor("#333333");G.setFontFamily("Arial");G.setFontSize(11);G.setStroke(0);F.addFigure(G,new C.layout.locator.CenterLocator(F));return F},getHoverElement:function(){return this._hover.shape.node},getPorts:function(){return new C.util.ArrayList()},loadText:function(){this._nameLozengeText.setText(this._createEllipsifiedName(this._transitionModel.get("name")));this._resizeNameLozenge()},onDrag:D.noop,_onDoubleClick:function(){this.onDoubleClick.apply(this,arguments);this.select()},_resizeLozenge:function(){var F=this._lozengeText.getWidth();this._hover.setDimension(F,this._hover.getHeight());this._lozengeRectangle.setDimension(F,this._lozengeRectangle.getHeight())},_resizeNameLozenge:function(){var F=this._nameLozengeText.getWidth();this._hover.setDimension(F,this._hover.getHeight());this._nameLozengeRectangle.setDimension(F,this._nameLozengeRectangle.getHeight())},select:function(){this._super.apply(this,arguments);this._arrow.setBackgroundColor("#ffffff");this._arrow.setColor("#1a8cff");this._loopRectangle.setColor("#1a8cff");this._nameLozengeRectangle.setBackgroundColor("#333333");this._nameLozengeText.setFontColor("#ffffff")},setCanvas:function(){this._super.apply(this,arguments);this._resizeLozenge();this._resizeNameLozenge()},setPosition:function(F,H){var G;this._super(F,H);G=this.getBoundingBox()},setValidation:function(F){this._validation=F;if(!this._selected()){this._setTransitionLineColor()}},_selected:function(){return this._loopRectangle.getColor()==="#1a8cff"},_setTransitionLineColor:function(){var F=this._validation&&this._validation.color||"#cccccc";this._loopRectangle.setColor(F);this._arrow.setColor(F);this._arrow.setBackgroundColor(F)},unselect:function(){this._super.apply(this,arguments);this._arrow.setBackgroundColor("#cccccc");this._setTransitionLineColor();this._nameLozengeRectangle.setBackgroundColor("#ffffff");this._nameLozengeText.setFontColor("#333333")}})});AJS.namespace("JIRA.WorkflowDesigner.LoopedTransitionFigure",null,require("workflow-designer/looped-transition-figure"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/transitions/LoopedTransitionContainerView.js' */
define("workflow-designer/looped-transition-container-view",["workflow-designer/looped-transition-container-figure","workflow-designer/looped-transition-figure","workflow-designer/draw-2d-view","workflow-designer/draw-2d","workflow-designer/underscore"],function(B,E,D,C,A){return D.extend({initialize:function(F){D.prototype.initialize.apply(this,arguments);F=A.defaults({},F,{immutable:false});this.immutable=F.immutable;this.workflowModel=F.workflowModel;this._setTransitionViews(F.transitionViews)},_createAndConfigureFigure:function(){var G=this._createFigure(),F=this;G.onDrag=A.wrap(G.onDrag,function(H){H.apply(this,A.toArray(arguments).slice(1));F.trigger("drag")});G.onDragEnd=A.wrap(G.onDragEnd,function(H){H.apply(this,A.toArray(arguments).slice(1));F._updatePosition();F.trigger("dragEnd")});if(this.immutable){G.setDeleteable(false);G.setResizeable(false)}else{G.installEditPolicy(new C.policy.figure.DragDropEditPolicy())}return G},_createFigure:function(){var F=this._figure=new B(),I=15,H=15,J=0,G=0;F.onDeselect=A.bind(this._onDeselect,this);F.onSelect=A.bind(this._onSelect,this);F.setSelectable(!this._immutable);this._transitionViews.each(function(K){K.reset();var L=K.getFigure();F.addTransitionFigure(L);G+=(L.getHeight()+I);J=Math.max(J,L.getWidth())});F.setDimension(J+(H*2),G+I);this._canvas.getLayer("looped-transitions-container").addFigure(F);this._positionFigure();return F},getBoundingBox:function(){return this._figure.getBoundingBox()},getFigure:function(){return this._figure},_positionFigure:function(){if(this.model.hasCoordinates()){this._figure.setPosition(this.model.get("x"),this.model.get("y"))}},render:function(){this._figure||(this._figure=this._createAndConfigureFigure());return this},reset:function(F){this._setTransitionViews(F);this.resetFigure()},resetFigure:function(){this._canvas.removeFigure(this._figure);this._figure=null;this.render()},setPosition:function(F,G){this.model.set({x:F,y:G})},_setTransitionViews:function(F){this._transitionViews=F;this.listenTo(this._transitionViews,"selected",this._transitionViewSelectedExternally)},_transitionViewSelectedExternally:function(F){this._selectedTransitionView&&this._selectedTransitionView!==F&&this._selectedTransitionView.deselect();this._selectedTransitionView=F;this._canvas.getSelection().getPrimary()!==this.getFigure()&&this._canvas.getSelection().setPrimary(this.getFigure())},_updatePosition:function(){var F=this.getBoundingBox();this.setPosition(F.getX(),F.getY())},_onDeselect:function(){this._selectedTransitionView&&this._selectedTransitionView.deselect();this._selectedTransitionView=null},_onSelect:function(H){var G,F;G=A.find(H,function(I){return(I instanceof E)});if(G){F=this._transitionViews.find(function(I){return I.getFigure()===G});if(F){this._selectedTransitionView&&this._selectedTransitionView!==F&&this._selectedTransitionView.deselect();(!this._selectedTransitionView||this._selectedTransitionView!==F)&&F.select()}}else{this._selectedTransitionView&&this._selectedTransitionView.deselect()}this._selectedTransitionView=F}})});AJS.namespace("JIRA.WorkflowDesigner.LoopedTransitionContainerView",null,require("workflow-designer/looped-transition-container-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/transitions/LoopedTransitionView.js' */
define("workflow-designer/looped-transition-view",["workflow-designer/dialogs/edit-looped-transition-dialog-view","workflow-designer/dialogs/delete-transition-dialog-view","workflow-designer/looped-transition-figure","workflow-designer/inline-dialog-svg-positioner","workflow-designer/draw-2d-view","aui/inline-dialog","workflow-designer/templates","workflow-designer/underscore"],function(A,H,G,B,F,E,D,C){return F.extend({initialize:function(I){F.prototype.initialize.apply(this,arguments);I=C.defaults({},I,{immutable:false});this._immutable=I.immutable;this._workflowModel=I.workflowModel;this.listenTo(this.model,"change:name",this.render);this.listenTo(this._workflowModel,"validation:transitions",this._updateValidation)},_updateValidation:function(J){var I=J[this.model.get("id")];this._figure.setValidation(I)},_createDialog:function(){var K=this._figure.getHoverElement(),M=C.uniqueId("looped-transition-dialog-"),I=this;function L(){return{fill:"#333333",stroke:"#333333"}}function J(P,O,N){var Q=D.loopedTransitionDialogContent;P.html(Q({name:I.model.get("name")}));N()}this._dialog=E(K,M,J,{calculatePositions:B.calculatePosition,getArrowAttributes:L,hideDelay:50,onHover:true})},_createFigure:function(){var I;I=this._figure=new G(this.model);this._immutable||(I.onDoubleClick=C.bind(this.edit,this));this._canvas.getLayer("looped-transitions").addFigure(I);this._createDialog()},destroy:function(){new H({transitionModel:this.model,workflowModel:this._workflowModel}).show()},edit:function(){new A({transitionModel:this.model,workflowModel:this._workflowModel}).show()},getFigure:function(){return this._figure},deselect:function(){if(this._immutable){return }this._figure.unselect();this._canvas.getLayer("looped-transitions").addFigure(this._figure);this.trigger("deselected",this)},select:function(){if(this._immutable){return }this._figure.select();this._canvas.getLayer("selected-transition").addFigure(this._figure);this.trigger("selected",this)},render:function(){this._figure||this._createFigure();this._figure.loadText();return this},reset:function(){this._canvas.removeFigure(this._figure);this._figure=null;this.render()}})});AJS.namespace("JIRA.WorkflowDesigner.LoopedTransitionView",null,require("workflow-designer/looped-transition-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/transitions/TransitionConnection.js' */
define("workflow-designer/transition-connection",["workflow-designer/layout/locator/manhattan-percentage-locator","workflow-designer/layout/connection/rounded-manhattan-connection-router","workflow-designer/layout/connection/gapped-connection","workflow-designer/draw-2d","workflow-designer/backbone","workflow-designer/underscore"],function(F,J,B,E,I,K){var C="#707070",A=30,D="#cccccc",G="#ffffff",L="#1a8cff",H="#f5f5f5";return B.extend({init:function(M){var O,N;K.bindAll(this,"_onDoubleClick","_onMouseEnter","_onMouseLeave");this._isInitialTransition=M;if(M){this._super(0,3)}else{this._super(3,3)}O=new E.decoration.connection.ArrowDecorator();O.onDoubleClick=this._onDoubleClick;O.setBackgroundColor(D);O.setColor(D);O.setDimension(7,7);N=this._label=new E.shape.basic.Label();N.onDoubleClick=this._onDoubleClick;N.onMouseEnter=this._onMouseEnter;N.onMouseLeave=this._onMouseLeave;N.setBackgroundColor(G);N.setColor("#cccccc");N.setBold(true);N.setDraggable(false);N.setFontColor("#333333");N.setFontFamily("Arial");N.setFontSize(11);N.setPadding(2);N.setParent(this);N.setRadius(3);N.setSelectable(false);N.setStroke(0);this.setColor(D);this.setCoronaWidth(6);this.setDeleteable(false);this.setResizeable(false);this.setRouter(new J());this.setStroke(1);this.setTargetDecorator(O)},appearSelected:function(){this.setColor(L);this.targetDecoratorNode.attr({fill:"#ffffff",stroke:L}).insertAfter(this.shape);this._label.setBackgroundColor(H).setStroke(1)},highlight:function(){this.setColor(C);this.targetDecoratorNode.attr({fill:C,stroke:C}).insertAfter(this.shape)},_onDoubleClick:function(){this.onDoubleClick.apply(this,arguments)},_onMouseEnter:function(){this.onMouseEnter.apply(this,arguments)},_onMouseLeave:function(){this.onMouseLeave.apply(this,arguments)},onOtherFigureIsMoving:function(){this._super.apply(this,arguments);this._positionLabel()},positionArrow:function(){this.targetDecoratorNode.insertAfter(this.shape)},_positionLabel:function(){this._labelLocator||(this._labelLocator=new F(this,0.8));this._labelLocator.relocate(0,this._label)},select:function(){var M;this._super.apply(this,arguments);this.appearSelected();M=this.selectionHandles.get(0);this._isInitialTransition&&M.hide();M.sendToFront();this.selectionHandles.get(0).sendActionableAreaToFront();this.selectionHandles.get(1).sendActionableAreaToFront();return this},setCanvas:function(M){var N=M!==null,O=M===null;if(N){M.getLayer("transition-labels").addFigure(this._label)}else{if(O){this.canvas.removeFigure(this._label)}}this._super(M)},setText:function(M){this._label.setText(this._truncate(M));this._positionLabel()},_truncate:function(N){var M=this._getEllipsis();if(!N||N.length<=A){return N}return N.substring(0,A-M.length)+M},_getEllipsis:function(){return "\u2026"},setTextVisible:function(M){this._label.setVisible(M);this._positionLabel()},setSource:function(M){this._super(M);this._positionLabel()},setTarget:function(M){this._super(M);this._positionLabel()},textIsVisible:function(){return this._label.isVisible()},setValidation:function(M){this._validation=M},_showValidation:function(){return this._validation&&this._validation.alterDisplay},unhighlight:function(){this._label.setBackgroundColor(G).setStroke(0);var M=this._showValidation()&&this._validation.color||"#cccccc";this.setColor(M);this.targetDecoratorNode.attr({fill:M,stroke:M}).insertAfter(this.shape)},unselect:function(){this._super.apply(this,arguments);this.unhighlight();this._label.setBackgroundColor(G).setStroke(0);return this}})});AJS.namespace("JIRA.WorkflowDesigner.TransitionConnection",null,require("workflow-designer/transition-connection"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/transitions/TransitionView.js' */
define("workflow-designer/transition-view",["workflow-designer/dialogs/edit-transition-dialog-view","workflow-designer/dialogs/delete-transition-dialog-view","workflow-designer/policy/feedback/line-selection-feedback-policy","workflow-designer/transition-connection","workflow-designer/collection","workflow-designer/selectable-figure-mixin","workflow-designer/request-response-mixin","workflow-designer/draw-2d-view","workflow-designer/cocktail","workflow-designer/underscore"],function(G,B,F,A,C,H,E,K,I,J){var D=K.extend({initialize:function(L){K.prototype.initialize.apply(this,arguments);this._canvasModel=L.canvasModel;this._immutable=L.immutable;this._views=new C();this._views.reset([L.sourceView,L.targetView]);this._workflowModel=L.workflowModel;this.listenTo(this._workflowModel,"validation:transitions",this._updateValidation);this.listenTo(this._canvasModel,"change:showTransitionLabels",this._setTextVisibility);this.listenTo(this.model,"change:name",this.render);this.listenTo(this._views,{drag:this._onStatusDrag,dragEnd:this._onStatusDragEnd,highlight:this._onMouseEnter,unhighlight:this._onMouseLeave})},_updateValidation:function(M){var L=M[this.model.get("id")];this._connection.setValidation(L);if(!this._isSelected()){this._connection.unhighlight()}},appearSelected:function(){this._canvas.getLayer("selected-transition").addFigure(this._connection);this._connection.appearSelected();this._connection.positionArrow();this.render()},_createConnection:function(){var L;L=new A(this.isInitialTransition());L.onDeselect=J.bind(this._onDeselect,this);L.onMouseEnter=J.bind(this._onMouseEnter,this);L.onMouseLeave=J.bind(this._onMouseLeave,this);L.onReconnect=J.bind(this.trigger,this,"reconnect",this);L.onSelect=J.bind(this._onSelect,this);L.setSelectable(!this._immutable);if(!this._immutable){L.installEditPolicy(new F());L.onDoubleClick=J.bind(this.edit,this)}this._canvas.getLayer("transitions").addFigure(L);this._connection=this._figure=L;this._setConnectionPorts();this._setTextVisibility()},destroy:function(){new B({transitionModel:this.model,workflowModel:this._workflowModel}).show()},edit:function(){new G({transitionModel:this.model,workflowModel:this._workflowModel}).show()},getConnection:function(){return this._connection},_getFigure:function(){return this._connection},_getSourceAngle:function(){var M=this._getSourceView()===this._getTargetView(),L=this.model.get("sourceAngle");if(J.isNumber(L)){return L}else{if(M){return -90}else{return this._getSourceView().getAngleToStatus(this._getTargetView())}}},_getSourceView:function(){return this._views.at(0)},_getTargetAngle:function(){var M=this._getSourceView()===this._getTargetView(),L=this.model.get("targetAngle");if(J.isNumber(L)){return L}else{if(M){return 0}else{return this._getTargetView().getAngleToStatus(this._getSourceView())}}},_getTargetView:function(){return this._views.at(1)},_highlight:function(){this._canvas.getLayer("highlighted-transition").addFigure(this._connection);this._connection.highlight();this._highlighted=true;this.render()},isConnectedToAnyStatus:function(L){return J.contains(L,this._getSourceView())||J.contains(L,this._getTargetView())},isHighlighted:function(){return this._highlighted},isInitialTransition:function(){return this.model.get("source").get("initial")},_isSelected:function(){return this.requestResponse.request("isSelected",this)},_onDeselect:function(){this.trigger("deselected",this);this.unhighlight()},_onMouseEnter:function(){this._isSelected()||this._highlight()},_onMouseLeave:function(){var L=J.some(this._views.invoke("isSelected"));L||this._isSelected()||this.unhighlight()},_onSelect:function(){this.trigger("selected",this);this.appearSelected()},_onStatusDragEnd:function(){this._connection.setTextVisible(true)},_onStatusDrag:function(){this._connection.setTextVisible(false)},remove:function(){K.prototype.remove.apply(this,arguments);this._views.off({drag:this._onStatusDrag,dragEnd:this._onStatusDragEnd,highlight:this._onMousEnter,unhighlight:this._onMouseLeave})},render:function(){if(this._canvas&&this._canvas.html&&this._canvas.html.is(":visible")){this._connection||this._createConnection();this._connection.setText(this.model.get("name"));this._setTextVisibility()}return this},resetConnection:function(){if(this._canvas&&this._connection){this._canvas.removeFigure(this._connection);this._connection=null}this.render()},_setConnectionPorts:function(){var L=this._getSourceView().getPortForAngle(this._getSourceAngle());var M=this._getTargetView().getPortForAngle(this._getTargetAngle());if(!J.isObject(L)||!J.isObject(M)){AJS&&AJS.warn&&AJS.warn("Could not calculate connections from angles",L,M);return false}this._connection.setSource(L);this._connection.setTarget(M);this.model.set({sourceAngle:this._getSourceView().getAngleToPort(L),targetAngle:this._getTargetView().getAngleToPort(M)})},_setTextVisibility:function(){var N=!!this.model.get("name"),L=this._canvasModel.get("showTransitionLabels"),M=N&&(L||this.isHighlighted()||this._isSelected());this._connection.setTextVisible(M)},setViews:function(L,M){this._views.reset([L,M])},unhighlight:function(){this._canvas.getLayer("transitions").addFigure(this._connection);this._connection.unhighlight();this._highlighted=false;this.render()}});I.mixin(D,E,H);return D});AJS.namespace("JIRA.WorkflowDesigner.TransitionView",null,require("workflow-designer/transition-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/canvas/LayerRootFigure.js' */
define("workflow-designer/draw-2d-canvas/layer-root-figure",["workflow-designer/draw-2d"],function(A){return A.shape.basic.Rectangle.extend({init:function(){this._super(0,0);this.setAlpha(0);this.setDeleteable(false);this.setDraggable(false);this.setResizeable(false);this.setSelectable(false)}})});AJS.namespace("JIRA.WorkflowDesigner.Draw2DCanvas.LayerRootFigure",null,require("workflow-designer/draw-2d-canvas/layer-root-figure"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/canvas/ZoomHandler.js' */
define("workflow-designer/zoom-handler",["workflow-designer/backbone","workflow-designer/underscore","jquery"],function(D,B,C){var A=function(E){B.bindAll(this,"_onMouseWheel");C(document).on({mousewheel:this._onMouseWheel,MozMousePixelScroll:this._onMouseWheel});this._canvas=C(E).get(0)};B.extend(A.prototype,D.Events,{_computeZoomFactor:function(F){var H,G=0.1,E;F=F.originalEvent;H=!!F.detail;if(H){E=this._getDeltaFirefox(F)}else{E=this._getDeltaOthers(F)}isNaN(E)&&(E=1);return Math.max(G,E)},destroy:function(){C(document).off({mousewheel:this._onMouseWheel,MozMousePixelScroll:this._onMouseWheel})},_getDeltaFirefox:function(F){var E=200,G=F.axis===F.VERTICAL_AXIS&&F.detail||0;return 1+G/E},_getDeltaOthers:function(F){var E=500,G=F.wheelDelta;if("wheelDeltaY" in F){G=F.wheelDeltaY}return 1-G/E},_isWorkflowDesigner:function(E){return E===this._canvas||C.contains(this._canvas,E)},_onMouseWheel:function(F){var E=F.altKey&&this._isWorkflowDesigner(F.target);if(E){F.preventDefault();this.trigger("zoom",{clientX:F.originalEvent.clientX,clientY:F.originalEvent.clientY,factor:this._computeZoomFactor(F)})}}});return A});AJS.namespace("JIRA.WorkflowDesigner.ZoomHandler",null,require("workflow-designer/zoom-handler"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/canvas/Layer.js' */
define("workflow-designer/draw-2d-canvas/layer",["workflow-designer/draw-2d-canvas/layer-root-figure","workflow-designer/underscore"],function(B,A){function C(E,H){var F=E.getChildren().clone().asArray().reverse(),G=H.svgNodes||H.shape;A.each(F,function(I){C(I,H)});E.svgNodes&&G&&E.svgNodes.insertAfter(G);E.shape&&G&&E.shape.insertAfter(G)}var D=function(E){var F=new B();this._canvas=E;this._canvas.addFigure(F);this._figures=[F]};A.extend(D.prototype,{addFigure:function(E){E.getCanvas()||this._canvas.addFigure(E);E._layer&&E._layer.removeFigure(E);E._layer=this;C(E,A.last(this._figures));this._figures.push(E)},removeFigure:function(E){this._figures=A.without(this._figures,E)}});return D});AJS.namespace("JIRA.WorkflowDesigner.Draw2DCanvas.Layer",null,require("workflow-designer/draw-2d-canvas/layer"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/canvas/Draw2DCanvas.js' */
define("workflow-designer/draw-2d-canvas",["workflow-designer/viewbox-transformer","workflow-designer/svg-utilities","workflow-designer/draw-2d-canvas/layer","workflow-designer/draw-2d","workflow-designer/backbone","workflow-designer/underscore","jquery"],function(D,F,H,B,G,A,E){var C=B.Canvas.extend({init:function(){A.bindAll(this,"_scheduleResize");this._super.apply(this,arguments);this.paper.canvas.style.position="";this.svgElement=E(this.paper.canvas);this._debouncedSetViewBox=A.debounce(this.setViewBox,100);this._scheduleResize()},createLayers:function(){var I=this._layers||(this._layers={});A.each(A.flatten(arguments),function(J){I[J]||(I[J]=new H(this))},this)},fitToContainer:function(){var K=Number(this.svgElement.attr("height")),I=Number(this.svgElement.attr("width")),M=this.getHeight(),L=this.getWidth(),J=K!==M||I!==L;if(!this.html.is(":visible")){return }if(J){this.paper.setSize(L,M);this.svgElement.css({height:M,width:L})}},fromCanvasToDocumentCoordinate:function(J,K){var I=F.fromSVGToScreenCoordinate(this.paper.canvas,J,K);return new B.geo.Point(I.x,I.y)},fromDocumentToCanvasCoordinate:function(J,K){var I=F.fromScreenToSVGCoordinate(this.paper.canvas,J,K);return new B.geo.Point(I.x,I.y)},getBestFigure:function(I,M,L){var K=L instanceof B.Port,J=L instanceof B.shape.basic.LineResizeHandle;if(!L||K||J){return this._super(I,M,L)}return null},getLayer:function(I){return this._layers&&this._layers[I]},getSelectedFigure:function(){return this.getSelection().getPrimary()},getViewBox:function(){var J,K=E(this.html).offset(),I;I=this.paper.canvas.getAttribute("viewBox");I=I&&A.map(I.split(" "),parseFloat).slice(0,2)||[0,0];J=this.fromDocumentToCanvasCoordinate(K.left+this.svgElement.width()-E(document).scrollLeft(),K.top+this.svgElement.height()-E(document).scrollTop());return new B.geo.Rectangle(I[0],I[1],J.x-I[0],J.y-I[1])},getZoom:function(){return this.svgElement.width()/this.getViewBox().getWidth()},removeFigure:function(I){this._super.apply(this,arguments);I._layer&&I._layer.removeFigure(I)},_scheduleResize:function(){var K=C.DEFAULT_RESIZE_INTERVAL,I=!!this.svgElement.closest("body").length,J=A.isNumber(this._resizeInterval)?this._resizeInterval:K;if(I){setTimeout(this._scheduleResize,J);this.fitToContainer()}},selectFigure:function(I){var J=this;this.editPolicy.each(function(L,K){var M=K instanceof B.policy.canvas.SingleSelectionPolicy;if(M){K.select(J,I)}})},setResizeInterval:function(I){this._resizeInterval=I},setViewBoxQuick:function(I){this.paper.canvas.setAttribute("viewBox",[I.getX(),I.getY(),I.getWidth(),I.getHeight()].join(" "));this._debouncedSetViewBox(I)},zoom:function(J,K,I){this.setViewBoxQuick(D.getZoomViewBox({diagramBoundingBox:I,factor:J,target:K,viewBox:this.getViewBox(),zoom:this.getZoom()}))}});C.DEFAULT_RESIZE_INTERVAL=100;return C});AJS.namespace("JIRA.WorkflowDesigner.Draw2DCanvas",null,require("workflow-designer/draw-2d-canvas"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/canvas/CanvasView.js' */
define("workflow-designer/canvas-view",["workflow-designer/looped-transition-container-view","workflow-designer/positioner","workflow-designer/dialogs/edit-transition-target-dialog-view","workflow-designer/dialogs/edit-transition-source-dialog-view","workflow-designer/dialogs/add-transition-dialog-view","workflow-designer/transition-model","workflow-designer/draw-2d-canvas/layer-root-figure","workflow-designer/policy/canvas/snap-to-geometry/guide-line-edit-policy","workflow-designer/policy/canvas/snap-to-geometry/snap-edit-policy","workflow-designer/policy/canvas/panning-single-selection-policy","workflow-designer/global-transition-view","workflow-designer/looped-transition-view","workflow-designer/transition-view","workflow-designer/status-view","workflow-designer/initial-status-view","workflow-designer/validator","workflow-designer/zoom-handler","workflow-designer/collection","workflow-designer/draw-2d-canvas","workflow-designer/draw-2d","aui/inline-dialog","workflow-designer/backbone","workflow-designer/underscore","jquery"],function(V,F,R,O,M,H,P,A,D,T,G,N,Q,I,B,K,U,X,J,S,E,C,W,L){return C.View.extend({className:"canvas",initialize:function(Z){W.bindAll(this,"_onKeyDown");Z=W.defaults({},Z,{immutable:false});this._canvasModel=Z.canvasModel;this.immutable=Z.immutable;this.statusViews=new X();this.transitionViews=new X();this._workflowModel=Z.workflowModel;this._zoomHandler=new U(this.el);this.immutable||L(document).on("keydown",this._onKeyDown);this.listenTo(this._canvasModel,"change:selectedModel",this._onSelectedModelChange);this.listenTo(this.statusViews,{deselected:this._clearSelectedView,"port:drag:end":this._onPortDragEnd,"port:drag:start":W.bind(this._setPortDragged,this,true),selected:this._setSelectedView});this.listenTo(this.transitionViews,{deselected:this._onTransitionDeselected,reconnect:this._onReconnect,selected:this._onTransitionSelected});this.listenTo(this._workflowModel,"reset:after",this._afterReset);this.listenTo(this._workflowModel.get("statuses"),{add:this.addStatus,remove:this.removeStatus,reset:this.resetStatuses});var Y=this;this.listenTo(this._workflowModel.get("transitions"),{add:this.addTransition,"change:source change:target":this._updateTransitionSourceAndTarget,"add remove change:target change: source change:description change:name change:transitionOptions":function(){Y._validate()},remove:this.removeTransition,reset:this.resetTransitions});this.listenTo(this._workflowModel.get("statuses"),{"add remove change:name change:description change:statusCategory":function(){Y._validate()}});this.listenTo(this._workflowModel,"loopedTransitionAdded",this._reloadLoopedTransitionContainerView);this.listenTo(this._workflowModel,"loopedTransitionRemoved",this._reloadLoopedTransitionContainerView);this.listenTo(this._zoomHandler,"zoom",this._onZoom)},_validate:function(){if(!this.immutable){K.validate(this._workflowModel)}},_afterReset:function(){this._positionNewStatuses();this._reloadLoopedTransitionContainerView();this._validate()},addStatus:function(Z){var c=Z.get("initial"),a=this._canvasModel.get("selectedModel")===Z,Y,b;if(c){b=B}else{b=I}Y=new b({canvas:this.canvas,getAllTargetPorts:W.bind(this._getAllTargetPorts,this),immutable:this.immutable,isPortDragged:W.bind(this._isPortDragged,this),model:Z,workflowModel:this._workflowModel}).render();this.statusViews.add(Y);a&&Y.select();return Y},addTransition:function(Y){var d=Y.isGlobalTransition(),c=Y.isLoopedTransition(),Z=this._canvasModel.get("selectedModel")===Y,a=this._getTransitionViewWithModel(Y),b;if(a){return a}if(c){b=N}else{if(d){b=G}else{b=Q}}a=new b({canvas:this.canvas,canvasModel:this._canvasModel,immutable:this.immutable,model:Y,sourceView:this._getStatusViewWithModel(Y.get("source")),targetView:this._getStatusViewWithModel(Y.get("target")),workflowModel:this._workflowModel});a.requestResponse&&a.requestResponse.setHandler("isSelected",this._transitionIsSelected,this);a.render();this.transitionViews.add(a);Z&&a.select();return a},autoFit:function(){var Y,b,Z,a=10,c;if(!this._shouldRender()){return false}this.canvas.fitToContainer();Y=this.getCanvasBoundingBox();if(Y){Y.scale(a*2,a*2);c=new S.geo.Rectangle(0,0,this.$el.width(),this.$el.height());Z=Y.getHeight()<=c.getHeight()&&Y.getWidth()<=c.getWidth();if(!Z){this.canvas.setViewBox(Y);c=this.canvas.getViewBox()}b=Y.getCenter();this.canvas.setViewBox(new S.geo.Rectangle(b.getX()-c.getWidth()/2,b.getY()-c.getHeight()/2,c.getWidth(),c.getHeight()));this._canvasModel.set("zoomLevel",this.canvas.getZoom())}},_clearSelectedView:function(Y){var Z=this._canvasModel.get("selectedView")===Y;Z&&this._canvasModel.selectView(null)},_createCanvas:function(Y){var Z,a=W.bind(this.getCanvasBoundingBox,this),c=this._getUniqueId(),b;Y=L(Y);Y.append(this.el);this.$el.attr("id",c);b=["statuses","selected-status","transitions","global-transitions","looped-transitions-container","looped-transitions","highlighted-transition","selected-transition","transition-labels"];Z=new J(c);Z.createLayers(b);Z.installEditPolicy(new T(a));Z.installEditPolicy(new D());Z.installEditPolicy(new A());Z.onNewConnection=W.bind(this._onNewConnection,this);return Z},_delete:function(){var Y=this._canvasModel.get("selectedView");Y&&Y.destroy();return !!Y},_shouldRender:function(){return this.canvas&&this.canvas.html&&this.canvas.html.is(":visible")},_getAllTargetPorts:function(){function Z(a){return a.model.isInitial()}function Y(a){return a.getPorts()}return this.statusViews.chain().reject(Z).flatMap(Y).value()},getCanvasBoundingBox:function(){var Z,b=this.canvas.getFigures().asArray(),Y=this.canvas.getLines().asArray();function a(d){var e=d.getBoundingBox();if(Z){Z=Z.union(e)}else{Z=e}}function c(d){return d instanceof P}W.chain(b).reject(c).each(a);W.each(Y,a);return Z},_getLoopedTransitionViews:function(){var Y=this.transitionViews.chain().filter(function(Z){return Z.model.isLoopedTransition()}).sortBy(function(Z){return Z.model.getActionId()}).value();return new X(Y)},_getSiblingTransitions:function(Y){var a=Y.model.get("actionId");function Z(b){return b.model.get("actionId")===a}return this.transitionViews.chain().filter(Z).without(Y).value()},_getStatusViewWithModel:function(Y){return this.statusViews.find(function(Z){return Z.model===Y})},getStatusViewWithPort:function(Y){return this.statusViews.find(function(Z){return W.contains(Z.getPorts(),Y)})},_getTransitionViewWithModel:function(Y){return this.transitionViews.find(function(Z){return Z.model===Y})},_getUniqueId:function(){var Y=0,Z;do{Y++;Z="workflow-designer"+Y}while(L("#"+Z).length);return Z},_isPortDragged:function(){return !!this.portDragged},_onKeyDown:function(Y){if(this._shouldHandleDelete(Y)){this._delete()&&Y.preventDefault()}},_onNewConnection:function(a){var Z=a.getSource(),Y=this.getStatusViewWithPort(Z),c=a.getTarget(),b=this.getStatusViewWithPort(c),d;d=new H({source:Y.model,sourceAngle:Y.getAngleToPort(Z),target:b.model,targetAngle:b.getAngleToPort(c)});this.canvas.removeFigure(a);new M({canvasModel:this._canvasModel,transitionModel:d,workflowModel:this._workflowModel}).show()},_onReconnect:function(c){var e,Z=c.getConnection().getSource(),Y=this.getStatusViewWithPort(Z),d,b=c.getConnection().getTarget(),a=this.getStatusViewWithPort(b);e=Y.model!==c.model.get("source");d=a.model!==c.model.get("target");if(e){new O({newSourcePort:Z,newSourceView:Y,originalSourceStatus:c.model.get("source"),transitionView:c,workflowModel:this._workflowModel}).show()}else{if(d){new R({targetPort:b,targetView:a,transitionView:c,workflowModel:this._workflowModel}).show()}else{c.model.set({source:Y.model,sourceAngle:Y.getAngleToPort(Z),target:a.model,targetAngle:a.getAngleToPort(b)})}}},_onTransitionDeselected:function(Y){this._clearSelectedView(Y);W.invoke(this._getSiblingTransitions(Y),"unhighlight")},_onTransitionSelected:function(Y){this._setSelectedView(Y);W.invoke(this._getSiblingTransitions(Y),"appearSelected")},_onZoom:function(Y){E.current&&E.current.hide();this.zoom(Y.factor,this.canvas.fromDocumentToCanvasCoordinate(Y.clientX,Y.clientY))},_positionNewStatuses:function(){var Z,a=this._workflowModel.get("statuses").map(this._getStatusViewWithModel,this);Z=F.positionStatuses({statusViews:a,viewBox:this.canvas.getViewBox(),workflowModel:this._workflowModel});function Y(b){return !b.model.isGlobalTransition()&&b.isConnectedToAnyStatus(Z)}this.transitionViews.chain().filter(Y).invoke("resetConnection")},_reloadLoopedTransitionContainerView:function(){var Z=this._workflowModel.get("loopedTransitionContainer"),Y;if(Z){Y=this._getLoopedTransitionViews();if(this._loopedTransitionContainerView){if(Y.length){this._loopedTransitionContainerView.reset(Y)}else{this._loopedTransitionContainerView.remove();this._loopedTransitionContainerView=null;this._workflowModel.removeLoopedTransitionContainer()}}else{this._loopedTransitionContainerView=new V({canvas:this.canvas,immutable:this.immutable,model:Z,transitionViews:Y,workflowModel:this._workflowModel}).render();F.positionLoopedTransitionContainer({loopedTransitionContainerView:this._loopedTransitionContainerView,statusViews:this.statusViews})}}},remove:function(){C.View.prototype.remove.apply(this,arguments);L(document).off("keydown",this._onKeyDown);this._zoomHandler.destroy();this.canvas&&this.canvas.remove()},removeStatus:function(Z){var Y=this._getStatusViewWithModel(Z);if(Y){Y.remove();this.statusViews.remove(Y)}},removeTransition:function(Y){var Z=this._getTransitionViewWithModel(Y);if(Z){Z.remove();this.transitionViews.remove(Z)}},render:function(Y){this.canvas||(this.canvas=this._createCanvas(Y));return this},resetStatuses:function(){while(this.statusViews.length){this.removeStatus(this.statusViews.at(0).model)}this._workflowModel.get("statuses").each(function(Y){this.addStatus(Y)},this)},resetTransitions:function(){while(this.transitionViews.length){this.removeTransition(this.transitionViews.at(0).model)}this._workflowModel.get("transitions").forEach(function(Y){this.addTransition(Y)},this)},_transitionIsSelected:function(a){var c=a.model.get("actionId"),Z=this._canvasModel.get("selectedView")===a,Y=this._canvasModel.get("selectedModel"),b=!!Y&&Y.get("actionId")===c;return Z||b},_onSelectedModelChange:function(b,Y){var a=this._getStatusViewWithModel(Y)||this._getTransitionViewWithModel(Y),Z=this._canvasModel.get("selectedView");if(Y&&a&&a!==Z){a.select()}},_onPortDragEnd:function(){function Y(Z){return Z.model.isInitial()}this._setPortDragged(false);this.statusViews.chain().reject(Y).invoke("updatePortsVisibility")},setLocked:function(Y){this._isLocked=Y},_setPortDragged:function(Y){this.portDragged=Y},setResizeInterval:function(Y){this.canvas.setResizeInterval(Y)},_setSelectedView:function(Y){this._canvasModel.selectView(Y)},_shouldHandleDelete:function(b){var Y=[L.ui.keyCode.BACKSPACE,L.ui.keyCode.DELETE],c=!!L(".aui-blanket:visible").length,a=W.contains(Y,b.which),Z=L(b.target).is(":input");return !c&&a&&!Z&&!this._isLocked},_updateTransitionSourceAndTarget:function(Z){var Y=this._getStatusViewWithModel(Z.get("source")),a=this._getStatusViewWithModel(Z.get("target")),b=this._getTransitionViewWithModel(Z);b.setViews(Y,a);b.resetConnection()},zoom:function(Y,Z){if(!this._shouldRender()){return }this.canvas.zoom(Y,Z||this.canvas.getViewBox().getCenter(),this.getCanvasBoundingBox());this._canvasModel.set("zoomLevel",this.canvas.getZoom())}})});AJS.namespace("JIRA.WorkflowDesigner.CanvasView",null,require("workflow-designer/canvas-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/properties-panel/StatusPropertiesView.js' */
define("workflow-designer/properties-panel/status-properties-view",["workflow-designer/status-view","workflow-designer/browser-utilities","workflow-designer/messages","workflow-designer/io/ajax/workflow-global-transitions-ajax-manager","workflow-designer/properties-panel/properties-view","workflow-designer/internal-api/panel-service","workflow-designer/templates","workflow-designer/underscore","workflow-designer/analytics","jquery"],function(I,E,A,F,C,B,J,H,G,D){return C.extend({events:{"change #create-global-transition-sidebar":"_synchroniseGlobalTransition","click .delete":"_destroy","click .edit":"_edit","click .add-transition-quick-fix":function(){this._openAddTransitionDialog()}},template:J.PropertiesPanel.status,ui:{createGlobalTransition:"#create-global-transition-sidebar"},initialize:function(){H.bindAll(this,"_onCreateSuccess","_onError","_triggerTransactionEnd");C.prototype.initialize.apply(this,arguments)},_openAddTransitionDialog:function(){D(".add-transition").click()},_createGlobalTransition:function(){var L,M,K=this._selectedView.model;L={description:"",name:K.get("name"),screenId:0,statusId:K.get("statusId"),workflowName:this._workflowModel.get("name")};M=F.createGlobalTransition(L);M.always(this._triggerTransactionEnd).done(this._onCreateSuccess).fail(this._onError)},_deleteGlobalTransition:function(){var N=this._workflowModel.getGlobalTransitionForStatus(this._selectedView.model),L=this,M,O;function K(){L._workflowModel.removeTransition(N)}M={transitionId:N.get("actionId"),workflowName:this._workflowModel.get("name")};O=F.deleteGlobalTransition(M);O.always(this._triggerTransactionEnd).done(K).fail(this._onError)},_hasGlobalTransition:function(){var K=this._selectedView.model;return this._workflowModel.statusHasGlobalTransition(K)},_onCreateSuccess:function(K){var L=this._selectedView.model.id;this._workflowModel.reset(K);this._canvasModel.set("selectedModel",this._workflowModel.getStatus(L))},_onError:function(K){A.showErrorMessage(K);this.ui.createGlobalTransition.attr("checked",this._hasGlobalTransition())},serializeData:function(){var L=this._workflowModel.get("name");var K=E.escapeQueryParameter(L);var O=this._selectedView.model.get("statusId");var N=this._selectedView.model.get("stepId");var M={workflowName:L,stepId:N,statusId:O};return H.extend(C.prototype.serializeData.apply(this),{editStatusPermission:this.options.workflowModel.get("permissions").get("editStatus"),deleteStatusPermission:this.options.workflowModel.get("permissions").get("deleteStatus"),hasGlobalTransition:this._hasGlobalTransition(),isDraft:this._workflowModel.get("draft"),workflowName:K,additionalPanels:B.renderPanels("workflow.status.properties",M)})},_synchroniseGlobalTransition:function(){var K;K=this.ui.createGlobalTransition.is(":checked");K?this._createGlobalTransition():this._deleteGlobalTransition();this.trigger("transaction:start")},_triggerTransactionEnd:function(){this.trigger("transaction:end")},_destroy:function(){G.triggerRemoveStepClicked(this._workflowModel.get("permissions"),this._workflowModel.get("analyticsData"));C.prototype._destroy.apply(this,arguments)}},{canHandleView:function(K){return K instanceof I}})});AJS.namespace("JIRA.WorkflowDesigner.PropertiesPanel.StatusPropertiesView",null,require("workflow-designer/properties-panel/status-properties-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/properties-panel/TransitionPropertiesView.js' */
define("workflow-designer/properties-panel/transition-properties-view",["workflow-designer/internal-api/panel-service","workflow-designer/properties-panel/properties-view","workflow-designer/browser-utilities","workflow-designer/global-transition-view","workflow-designer/looped-transition-view","workflow-designer/transition-view","workflow-designer/templates","workflow-designer/backbone","workflow-designer/underscore","jira/toggleblock/toggle-block","wrm/data","jquery"],function(A,B,H,G,E,F,M,L,K,C,I,D){var J=I.claim("com.atlassian.jira.plugins.jira-workflow-designer:learnmore-url.data");return B.extend({events:{"click .delete":"_destroy","click .edit":"_edit","click .show-conditions-quick-fix":function(){this._openConditions()}},ui:{screenInfo:".screen-info"},onRender:function(){this.ui.screenInfo.tooltip();new C({blockSelector:".toggle-wrap",triggerSelector:".mod-header .toggle-title"})},template:M.PropertiesPanel.transition,_openConditions:function(){window.open(D("a[href*='descriptorTab=conditions']")[0].href,"_blank")},_getQueryString:function(){var P=this._selectedView.model.isInitial(),N=this._selectedView.model.isGlobalTransition(),O={};if(!P&&!N){O.workflowStep=this._selectedView.model.getSourceStepId()}return H.makeQueryString(O)},serializeData:function(){var O=B.prototype.serializeData.apply(this);var N=this._workflowModel.get("name");var P={workflowName:N,actionId:O.actionId};return K.extend(O,{additionalPanels:A.renderPanels("workflow.transition.properties",P),queryString:this._getQueryString(),learnMoreUrl:J.learnMoreUrl})}},{canHandleView:function(N){return N instanceof G||N instanceof E||N instanceof F}})});AJS.namespace("JIRA.WorkflowDesigner.PropertiesPanel.TransitionPropertiesView",null,require("workflow-designer/properties-panel/transition-properties-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/properties-panel/PropertiesPanelView.js' */
define("workflow-designer/properties-panel/properties-panel-view",["workflow-designer/properties-panel/status-properties-view","workflow-designer/properties-panel/transition-properties-view","workflow-designer/backbone","workflow-designer/underscore","jquery"],function(D,B,F,C,E){var A=F.Marionette.ItemView.extend({className:"properties-panel",events:{"aui-expander-collapsed":"_forceReflow","aui-expander-expanded":"_forceReflow"},template:E.noop,initialize:function(G){this._canvasModel=G.canvasModel;this._workflowModel=G.workflowModel;this.listenTo(this._canvasModel,"change:selectedView",this.render)},_createPropertiesView:function(){var H,G=C.bind(this.trigger,this,"transaction:end"),I=C.bind(this.trigger,this,"transaction:start");H=A.create({canvasModel:this._canvasModel,selectedView:this._canvasModel.get("selectedView"),workflowModel:this._workflowModel});H&&this.listenTo(H,{"transaction:end":G,"transaction:start":I});return H},onBeforeRender:function(){this._propertiesView&&this._propertiesView.remove()},onRender:function(){this._propertiesView=this._createPropertiesView();if(this._propertiesView){this._propertiesView.render().$el.appendTo(this.el);this.$el.height();this._propertiesView.applyDescriptionExpander()}},_forceReflow:function(){var G=C.bind(this.$el.css,this.$el,"height");G("1px");C.defer(G,"")}},{create:function(I){var G=I.canvasModel.get("selectedView"),H,J;H=[D,B];J=C.find(H,function(K){return K.canHandleView(G)});return J&&new J(I)}});return A});AJS.namespace("JIRA.WorkflowDesigner.PropertiesPanel.PropertiesPanelView",null,require("workflow-designer/properties-panel/properties-panel-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/actions/ActionsView.js' */
define("workflow-designer/actions-view",["workflow-designer/dialogs/add-transition-dialog-view","workflow-designer/dialogs/add-status-inline-dialog-view","workflow-designer/status-model","workflow-designer/transition-model","workflow-designer/templates","workflow-designer/last-saved-by/controller","workflow-designer/backbone","workflow-designer/underscore","jquery"],function(E,C,B,A,I,D,F,G,H){return F.Marionette.Layout.extend({className:"actions",events:{"change .show-transition-labels":"_setShowTransitionLabels","click .add-status":"_addStatus","click .add-transition":"_addTransition","click .enter-full-screen":"_enterFullScreen","click .exit-full-screen":"_exitFullScreen"},template:I.actions,regions:{lastSavedBy:"#workflow-designer-last-saved-by"},ui:{addStatusButton:".add-status",fullScreenTriggers:".full-screen-trigger"},initialize:function(J){this._canvasModel=J.canvasModel;this._fullScreenButton=J.fullScreenButton;this._immutable=J.immutable;this._workflowModel=J.workflowModel;if(!this._immutable){this._lastSavedByController=new D({saveStatusService:J.saveStatusService,workflowModel:J.workflowModel,region:this.lastSavedBy})}},_addStatus:function(){var J=this.ui.addStatusButton.hasClass("active");this._addStatusDialog||(this._addStatusDialog=this._createAddStatusDialog());if(J){this._addStatusDialog.hide()}else{this._addStatusDialog.show()}},_addTransition:function(){var J=this._canvasModel.get("selectedModel"),K=J&&J instanceof B,L=new A();if(K){L.set({source:J,target:J})}new E({canvasModel:this._canvasModel,transitionModel:L,workflowModel:this._workflowModel}).show()},_createAddStatusDialog:function(){var J;J=new C({trigger:this.ui.addStatusButton,workflowModel:this._workflowModel});this.listenTo(J,{done:G.bind(this.trigger,this,"addStatus:done"),submit:G.bind(this.trigger,this,"addStatus:submit")});return J},_enterFullScreen:function(){this._toggleFullScreenTriggers();this.trigger("fullScreen:enter")},_exitFullScreen:function(){this._toggleFullScreenTriggers();this.trigger("fullScreen:exit")},onRender:function(){this._lastSavedByController&&this._lastSavedByController.show();if(this._addStatusDialog){this._addStatusDialog.remove();delete this._addStatusDialog}this.ui.fullScreenTriggers.tooltip();this.ui.fullScreenTriggers.filter(".hidden").tipsy("disable")},onBeforeClose:function(){this._addStatusDialog&&this._addStatusDialog.remove();this._lastSavedByController&&this._lastSavedByController.close()},serializeData:function(){return{fullScreenButton:this._fullScreenButton,immutable:this._immutable,showTransitionLabels:this._canvasModel.get("showTransitionLabels")}},_setShowTransitionLabels:function(J){var K=H(J.target).is(":checked");this._canvasModel.set("showTransitionLabels",K)},_toggleFullScreenTriggers:function(){this.ui.fullScreenTriggers.each(function(K,J){H(J).tipsy("toggleEnabled")}).toggleClass("hidden")}})});AJS.namespace("JIRA.WorkflowDesigner.ActionsView",null,require("workflow-designer/actions-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/actions/ZoomControlView.js' */
define("workflow-designer/zoom-control-view",["workflow-designer/templates","workflow-designer/backbone","workflow-designer/underscore"],function(B,C,A){return C.Marionette.ItemView.extend({className:"zoom-control",events:{"click .zoom-in":"_triggerZoomIn","click .zoom-out":"_triggerZoomOut"},modelEvents:{"change:zoomLevel":"_debouncedRender"},template:B.zoomControl,initialize:function(D){this._debouncedRender=A.debounce(this.render,100);this._maximumZoomLevel=D.maximumZoomLevel;this._minimumZoomLevel=D.minimumZoomLevel},serializeData:function(){var E=0.001,D=this.model.get("zoomLevel");return{zoomInDisabled:D>=this._maximumZoomLevel-E,zoomOutDisabled:D<=this._minimumZoomLevel+E}},_triggerZoomIn:function(){this.trigger("zoomIn")},_triggerZoomOut:function(){this.trigger("zoomOut")}})});AJS.namespace("JIRA.WorkflowDesigner.ZoomControlView",null,require("workflow-designer/zoom-control-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/Canvas.js' */
define("workflow-designer/canvas",["workflow-designer/properties-panel/properties-panel-view","workflow-designer/canvas-view","workflow-designer/actions-view","workflow-designer/progress-indicator-blanket-view","workflow-designer/full-screen-controller","workflow-designer/zoom-control-view","workflow-designer/browser-zoom-checker","workflow-designer/canvas-model","workflow-designer/templates","workflow-designer/draw-2d-canvas","workflow-designer/backbone","workflow-designer/underscore","jquery"],function(E,F,B,G,A,C,D,H,M,K,J,I,L){return J.Marionette.ItemView.extend({template:M.container,ui:{container:".container"},initialize:function(N){N=I.defaults(N,{actions:true,fullScreenButton:true,immutable:false});this._browserZoomChecker=new D();this._canvasModel=new H({},{workflowModel:N.workflowModel});this._canvasView=new F({canvasModel:this._canvasModel,immutable:N.immutable,workflowModel:N.workflowModel});N.actions&&(this._actionsView=this._createActionsView(N));N.immutable||(this._propertiesPanelView=this._createPropertiesPanelView(N));this._zoomControlView=this._createZoomControlView()},autoFit:function(){this._canvasView.autoFit()},_createActionsView:function(O){var N;N=new B({canvasModel:this._canvasModel,fullScreenButton:O.fullScreenButton,immutable:O.immutable,workflowModel:O.workflowModel,saveStatusService:O.saveStatusService});this.listenTo(N,{"addStatus:done":this.hideProgressIndicator,"addStatus:submit":this.showProgressIndicator,"fullScreen:enter":this._enterFullScreen,"fullScreen:exit":this._exitFullScreen});return N},_createPropertiesPanelView:function(N){var O;O=new E({canvasModel:this._canvasModel,workflowModel:N.workflowModel});this.listenTo(O,{"transaction:end":this.hideProgressIndicator,"transaction:start":this.showProgressIndicator});return O},_createZoomControlView:function(){var N,O;N={maximumZoomLevel:2,minimumZoomLevel:0.5,model:this._canvasModel};O=new C(N);this.listenTo(O,{zoomIn:I.bind(this._canvasView.zoom,this._canvasView,0.75),zoomOut:I.bind(this._canvasView.zoom,this._canvasView,1.25)});return O},_enterFullScreen:function(){var N=this._canvasView;N.setResizeInterval(25);A.enterFullScreen(this.el).done(function(){N.setResizeInterval(K.DEFAULT_RESIZE_INTERVAL)})},_exitFullScreen:function(){var O=this._canvasView,N=this;O.setResizeInterval(25);A.exitFullScreen(this.el).done(function(){O.setResizeInterval(K.DEFAULT_RESIZE_INTERVAL);N.$el.removeAttr("style")})},hideProgressIndicator:function(){this._canvasView.setLocked(false);this._progressIndicator.hide()},onRender:function(){this.$el.addClass("workflow-designer");this._actionsView&&this.$el.prepend(this._createHorizontalSection(this._actionsView.render().el));this._canvasView.render(this.ui.container);this._propertiesPanelView&&this.ui.container.append(this._propertiesPanelView.render().el);this.ui.container.append(this._zoomControlView.render().el)},_createHorizontalSection:function(N){return L(M.workflowDesignerSection()).append(N)},onBeforeClose:function(){this._browserZoomChecker.destroy();this._canvasView.remove();this._zoomControlView.close();this._actionsView&&this._actionsView.close();this._propertiesPanelView&&this._propertiesPanelView.close()},showProgressIndicator:function(){var N={container:this.ui.container};this._canvasView.setLocked(true);this._progressIndicator||(this._progressIndicator=new G(N));this._progressIndicator.show()}})});AJS.namespace("JIRA.WorkflowDesigner.Canvas",null,require("workflow-designer/canvas"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/Application.js' */
define("workflow-designer/application",["workflow-designer/io/layout-auto-saver","workflow-designer/workflow-model","workflow-designer/browser-support","workflow-designer/messages","workflow-designer/io/ajax/workflow-ajax-manager","workflow-designer/canvas","workflow-designer/templates","workflow-designer/backbone","workflow-designer/underscore","workflow-designer/internal-api/workflow-service","workflow-designer/internal-api/save-status-service","jquery"],function(N,F,K,B,C,D,M,I,H,J,G,L){function E(O){var P=M.browserNotSupportedWarning;L(P()).appendTo(O)}var A=function(O){O=H.defaults({},O,{draft:false,immutable:false});if(!K.browserIsSupported()){E(O.element);return }this._workflowModel=new F({currentStepId:O.currentStepId,draft:O.draft,name:O.workflowId,analyticsData:O.analyticsData});this._isDraftWithChanges=O.isDraftWithChanges;this._saveStatusService=new G();this.listenTo(this._saveStatusService,"state:success",function(){this.trigger("sync")});this._canvas=this._createCanvas(O).render();if(!O.immutable){this._layoutAutoSaver=new N({workflowModel:this._workflowModel})}this._initialiseWorkflow(O)};H.extend(A.prototype,I.Events,{_createCanvas:function(O){O=H.extend(O,{el:O.element,workflowModel:this._workflowModel,saveStatusService:this._saveStatusService});return new D(O)},destroy:function(){this.stopListening();this._canvas&&this._canvas.close();this._layoutAutoSaver&&this._layoutAutoSaver.destroy();this._saveStatusService&&this._saveStatusService.close()},discardDraft:function(O){O=H.defaults({},O,{reloadDesigner:true});this._canvas.showProgressIndicator();return C.discard(this._workflowModel.get("name")).pipe(H.bind(this._onPublishOrDiscardSuccessHandler,this,O.reloadDesigner),H.bind(this._onPublishOrDiscardFailHandler,this))},publishDraft:function(O){O=H.defaults({},O,{reloadDesigner:true});this._canvas.showProgressIndicator();return C.publish(this._workflowModel).pipe(H.bind(this._onPublishOrDiscardSuccessHandler,this,O.reloadDesigner),H.bind(this._onPublishOrDiscardFailHandler,this))},_initialiseWorkflow:function(P){var O=this,Q=this._loadWorkflow(P);Q.done(function(){O._workflowModel.set("loadedAt",new Date());O._canvas.autoFit();J.registerWorkflowDesigner(O);O.trigger("loaded")})},_loadWorkflow:function(R){var Q=L.Deferred(),O=this,P=L("meta[name=projectKey]").attr("content"),S;if(R.layoutData){S=L.Deferred().resolve(R.layoutData)}else{if(R.workflowId){S=C.load(R.workflowId,!!R.draft)}}if(S){this._canvas.showProgressIndicator();S.always(function(){C.triggerMauEventForProject(P);O._canvas.hideProgressIndicator()});S.done(function(T){if(!O._isDraftWithChanges){T.updatedDate=null}O._workflowModel.reset(T);Q.resolve()});S.fail(function(T){B.showErrorMessage(T);Q.reject(T)})}else{Q.resolve()}return Q.promise()},_onPublishOrDiscardSuccessHandler:function(O){this._layoutAutoSaver.removeUnsavedChangesMessage();if(O){return this._loadWorkflow({workflowId:this._workflowModel.get("name"),draft:this._workflowModel.get("draft")})}},_onPublishOrDiscardFailHandler:function(O){B.showErrorMessage(O);this._canvas.hideProgressIndicator()},getWorkflowData:function(){return this._workflowModel.toJSON()}});return A});AJS.namespace("JIRA.WorkflowDesigner.Application",null,require("workflow-designer/application"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:issuetypes-entities', location = 'issuetypes/entities/models/headerdescriptor.js' */
define("jira-project-config/issuetypes/entities/models/header-descriptor",["require"],function(e){"use strict";return e("jira-project-config/backbone").Model.extend({defaults:function(){return{title:void 0}}})});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:issuetypes-entities', location = 'issuetypes/entities/models/issuetype.js' */
define("jira-project-config/issuetypes/entities/models/issue-type",["require"],function(e){"use strict";var t=e("jira-project-config/backbone"),i=e("underscore");return t.Model.extend({defaults:{id:void 0,fields:void 0,name:void 0,workflow:void 0},toJSON:function(){return i.extend({},this.attributes,{fields:this.attributes.fields&&this.attributes.fields.toJSON(),workflow:this.attributes.workflow&&this.attributes.workflow.toJSON()})},getScreens:function(){if(this.get("fields")){return[["view",this.get("fields").get("viewScreen")]].map(this._screen)}return[]},getScreen:function(e){var t=this.getScreens().filter(function(t){return t.get("type")===e});if(t.length>0)return t[0]},_screen:function(e){var t=e[1],i=e[0];return t.set("type",i),t}})});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:issuetypes-entities', location = 'issuetypes/entities/models/issuetypelink.js' */
define("jira-project-config/issuetypes/entities/models/issue-type-link",["require"],function(e){"use strict";return e("jira-project-config/backbone").Model.extend({defaults:{id:void 0,name:void 0,url:void 0}})});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:issuetypes-entities', location = 'issuetypes/entities/models/issuetypes.js' */
define("jira-project-config/issuetypes/entities/models/issue-types",["require"],function(e){"use strict";var i=e("jira-project-config/backbone"),s=e("jira-project-config/issuetypes/entities/models/issue-type");return i.Collection.extend({model:s})});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:issuetypes-entities', location = 'issuetypes/entities/models/issuetypelinks.js' */
define("jira-project-config/issuetypes/entities/models/issue-type-links",["require"],function(e){"use strict";var i=e("jira-project-config/backbone"),s=e("jira-project-config/issuetypes/entities/models/issue-type-link");return i.Collection.extend({model:s})});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:issuetypes-entities', location = 'issuetypes/entities/models/fields.js' */
define("jira-project-config/issuetypes/entities/models/fields",["require"],function(e){"use strict";var t=e("jira-project-config/backbone"),n=e("underscore"),i=e("jira-project-config/issuetypes/entities/models/screen");return t.Model.extend({defaults:function(){return{viewScreen:new i}},getScreen:function(e){return this.get(e+"Screen")},toJSON:function(){return n.extend({},this.attributes,{viewScreen:this.attributes.viewScreen.toJSON()})}})});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:issuetypes-entities', location = 'issuetypes/entities/models/perspective.js' */
define("jira-project-config/issuetypes/entities/models/perspective",["require"],function(e){"use strict";return e("jira-project-config/backbone").Model.extend({defaults:{id:void 0,name:void 0,selected:!1}})});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:issuetypes-entities', location = 'issuetypes/entities/models/perspectives.js' */
define("jira-project-config/issuetypes/entities/models/perspectives",["require"],function(e){"use strict";var i=e("jira-project-config/backbone"),t=e("jira-project-config/issuetypes/entities/models/perspective");return i.Collection.extend({model:t})});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:issuetypes-entities', location = 'issuetypes/entities/models/project.js' */
define("jira-project-config/issuetypes/entities/models/project",["require"],function(e){"use strict";return e("jira-project-config/backbone").Model.extend({defaults:{id:void 0,key:void 0,name:void 0}})});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:issuetypes-entities', location = 'issuetypes/entities/models/projects.js' */
define("jira-project-config/issuetypes/entities/models/projects",["require"],function(e){"use strict";var i=e("jira-project-config/backbone"),t=e("jira-project-config/issuetypes/entities/models/project");return i.Collection.extend({model:t})});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:issuetypes-entities', location = 'issuetypes/entities/models/screen.js' */
define("jira-project-config/issuetypes/entities/models/screen",["require"],function(e){"use strict";var t=e("underscore"),s=e("jira-project-config/backbone"),i=e("jira-project-config/issuetypes/entities/models/projects"),r=e("jira-project-config/issuetypes/entities/models/issue-types");return s.Model.extend({defaults:{totalProjectsCount:0,hiddenProjectsCount:0,sharedWithProjects:new i,sharedWithIssueTypes:new r,screenId:void 0,screenName:void 0,state:void 0,canEdit:void 0},toJSON:function(){return t.extend({},this.attributes,{sharedWithProjects:this.attributes.sharedWithProjects.toJSON(),sharedWithIssueTypes:this.attributes.sharedWithIssueTypes.toJSON()})}})});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:issuetypes-entities', location = 'issuetypes/entities/models/sharedbydata.js' */
define("jira-project-config/issuetypes/entities/models/shared-by-data",["require"],function(e){"use strict";var t=e("jira-project-config/backbone"),s=e("jira-project-config/issuetypes/entities/models/issue-types"),i=e("jira-project-config/issuetypes/entities/models/projects");return t.Model.extend({defaults:function(){return{totalProjectsCount:0,hiddenProjectsCount:0,issueTypes:new s,issueTypesTitle:void 0,projects:new i,projectsTitle:void 0}}})});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:issuetypes-entities', location = 'issuetypes/entities/models/workflow.js' */
define("jira-project-config/issuetypes/entities/models/workflow",["require"],function(t){"use strict";var e=t("jira-project-config/backbone"),s=t("underscore"),i=t("jira-project-config/issuetypes/entities/models/issue-types"),o=t("jira-project-config/issuetypes/entities/models/projects");return e.Model.extend({defaults:function(){return{totalProjectsCount:0,hiddenProjectsCount:0,name:void 0,displayName:void 0,state:void 0,updatedDate:null,isDraftWithChanges:!1,sharedWithProjects:new o,sharedWithIssueTypes:new i}},toJSON:function(){return s.extend({},this.attributes,{totalProjectsCount:this.attributes.totalProjectsCount,hiddenProjectsCount:this.attributes.hiddenProjectsCount,sharedWithProjects:this.attributes.sharedWithProjects.toJSON(),sharedWithIssueTypes:this.attributes.sharedWithIssueTypes.toJSON()})}})});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:issuetypes-entities', location = 'issuetypes/entities/entityParser.js' */
define("jira-project-config/issuetypes/entities/entityParser",["underscore","jira-project-config/issuetypes/entities/models/workflow","jira-project-config/issuetypes/entities/models/project","jira-project-config/issuetypes/entities/models/projects","jira-project-config/issuetypes/entities/models/issue-types"],function(e,t,s,i,r){"use strict";function n(t){var r=e.map(t,function(t){var i=e.pick(t,"id","key","name","archived");return new s(i)});return new i(r)}function o(t,s){return new r(e.map(t,e.bind(s.get,s)))}return{makeWorkflow:function(e,s){return new t({name:e.name,displayName:e.displayName,state:e.state,updatedDate:e.updatedDate,isDraftWithChanges:!!e.isDraftWithChanges,totalProjectsCount:e.totalProjectsCount,hiddenProjectsCount:e.hiddenProjectsCount,sharedWithProjects:n(e.sharedWithProjects),sharedWithIssueTypes:o(e.sharedWithIssueTypes,s)})},makeProjects:n,makeIssueTypes:o}});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:issuetypes-entities', location = 'issuetypes/entities/manager.js' */
define("jira-project-config/issuetypes/entities/manager",["require"],function(e){"use strict";function t(e){return new j({id:e.id,name:e.name})}function s(){var e=a("meta[name=projectId]").attr("content"),t=a("meta[name=projectKey]").attr("content"),s=a("#project-config-header-name"),r={};return void 0!==e&&(r.id=parseInt(e,0)),void 0!==t&&(r.key=t),s.length&&(r.name=s.text()),new u(r)}function r(){var e=a("#project_issuetypes").data("issueTypes"),s=c.map(e,t);return new f(s)}function i(e,t){var s=new p(c.pick(e,"totalProjectsCount","hiddenProjectsCount","screenId","screenName","canEdit","screenType","state"));return s.set("sharedWithProjects",h.makeProjects(e.sharedWithProjects)),s.set("sharedWithIssueTypes",h.makeIssueTypes(e.sharedWithIssueTypes,t)),s}function n(e){var t=e.statusText,s=e.status,r={};if(r.type="abort"===t?"abort":401===s?"unauthenticated":"error",c.contains([400,403,404],s)&&e.responseText)try{r.message=JSON.parse(e.responseText).errorMessages[0]}catch(t){r.message=e.responseText}return r}var o=e("jira/jquery/deferred"),a=e("jquery"),c=e("underscore"),u=e("jira-project-config/issuetypes/entities/models/project"),p=e("jira-project-config/issuetypes/entities/models/screen"),f=e("jira-project-config/issuetypes/entities/models/issue-types"),j=e("jira-project-config/issuetypes/entities/models/issue-type"),l=e("jira-project-config/issuetypes/entities/models/issue-type-link"),d=e("jira-project-config/issuetypes/entities/models/issue-type-links"),y=e("jira-project-config/issuetypes/entities/models/fields"),h=e("jira-project-config/issuetypes/entities/entityParser"),m=e("jira-project-config/issuetypes/entities/ajax/project-issue-type-manager"),g=JIRA.WorkflowDesigner.IO.AJAX.ProjectConfigAJAXManager,w=!!window.localStorage,v=function(e){c.defaults(e,{projectIssueTypeAjaxManager:new m({reqres:e.reqres})}),this._issueTypes=null,this._project=null,c.extend(this,c.pick(e,"reqres","projectIssueTypeAjaxManager"))};return v.prototype={workflowLayoutData:function(e,t){return t=1!==arguments.length&&t,g[t?"loadOrCreateDraftWorkflow":"loadWorkflow"]({name:e.get("name")}).then(function(e,t){return a.when({isDraft:e,layoutData:t})},function(e){return o().reject({type:"error",message:e}).promise()})},issueTypes:function(){return this._issueTypes||(this._issueTypes=r()),a.when(this._issueTypes)},issueTypeLinks:function(){var e=o(),t=this;return a.when(this.issueTypes(),this.project()).done(function(s,r){var i=s.map(function(e){var s=t.reqres.request("urls:issueTypes:base",{project:r,issueType:e});return new l(c.extend(e.pick("id","name"),{url:s}))});e.resolve(new d(i))}),e.promise()},fields:function(e,t){var s=o(),r=this.projectIssueTypeAjaxManager.fields(e,t),u=this.issueTypes();return a.when(r,u).done(function(e,t){var r=new y({viewScreen:i(e.viewScreen,t)});s.resolve(r)}).fail(c.compose(s.reject,n)),s.promise()},workflow:function(e,t){var s=o(),r=this.projectIssueTypeAjaxManager.workflow(e,t),i=this.issueTypes();return a.when(r,i).done(function(e,t){var r=h.makeWorkflow(e,t);s.resolve(r)}).fail(c.compose(s.reject,n)),s.promise()},project:function(){return this._project||(this._project=s()),o().resolve(this._project).promise()},issueType:function(e){var t=this,s=o();return c.defaults(e,{fetchRelated:!1}),c.bindAll(s,"reject"),a.when(this.project(),this.issueTypes()).then(function(r,i){var n,c,u=i.get(e.id);return void 0===u?o().reject({type:"error"}):(u=u.clone(),!1===e.fetchRelated?s.resolve(u):(n=t.fields(r,u),c=t.workflow(r,u),a.when(n,c).done(function(e,t){u.set({fields:e,workflow:t}),s.resolve(u)})))}).fail(s.reject),s.promise()},getPreferredPerspective:function(){return w&&localStorage.getItem("projectConfig:issueTypes:preferredPerspective")||"workflow"},setPreferredPerspective:function(e){try{w&&localStorage.setItem("projectConfig:issueTypes:preferredPerspective",e)}catch(e){}}},v});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:issuetypes-entities', location = 'issuetypes/entities/module.js' */
define("jira-project-config/issuetypes/entities/module",["require"],function(e){"use strict";var r=e("underscore"),i=e("jira-project-config/issuetypes/entities/manager");return function(e,s){var t=s.reqres;e.addInitializer(function(){var e=new i({reqres:t}),s=r.bind(e.getPreferredPerspective,e),n=r.bind(e.workflowLayoutData,e),o=r.bind(e.issueType,e),a=r.bind(e.issueTypeLinks,e),d=r.bind(e.setPreferredPerspective,e),u=r.bind(e.project,e);t.setHandlers({getPreferredPerspective:s,workflowLayoutData:n,issueType:o,issueTypeLinks:a,project:u,setPreferredPerspective:d})}),e.addFinalizer(function(){t.removeHandler("getPreferredPerspective"),t.removeHandler("workflowLayoutData"),t.removeHandler("issueType"),t.removeHandler("issueTypeLinks"),t.removeHandler("project"),t.removeHandler("setPreferredPerspective")})}});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:issuetypes-entities', location = 'issuetypes/entities/ajax/project-issuetype-manager.js' */
define("jira-project-config/issuetypes/entities/ajax/project-issue-type-manager",["require"],function(e){"use strict";var r=e("jira/ajs/ajax/smart-ajax/web-sudo"),s=e("underscore"),t=e("jira/jquery/deferred");return function(e){return{workflow:function(r,n){var i=t();return s.bindAll(i,"reject"),this._makeRequest({dataType:"json",url:e.reqres.request("urls:issueTypes:rest:workflow",{project:r,issueType:n})}).done(function(e){i.resolve(e)}).fail(i.reject),i.promise()},fields:function(r,n){var i=t();return s.bindAll(i,"reject"),this._makeRequest({dataType:"json",url:e.reqres.request("urls:issueTypes:rest:fields",{project:r,issueType:n})}).done(function(e){i.resolve(e)}).fail(i.reject),i.promise()},_makeRequest:function(e){var n=t();return e.headers=s.extend({},e.headers,{"X-Atlassian-Token":"no-check"}),r.makeWebSudoRequest(e,{cancel:function(e){s.defer(n.reject,void 0,"abort"),e.preventDefault()}}).done(s.bind(n.resolve,n)).fail(function(e){n.reject(e)}),n.promise()}}}});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:issuetypes-entities', location = 'issuetypes/entities/namespaces.js' */
AJS.namespace("JIRA.ProjectConfig.IssueTypes.Entities",null,require("jira-project-config/issuetypes/entities/manager")),AJS.namespace("JIRA.ProjectConfig.IssueTypes.Ajax.ProjectIssueTypeManager",null,require("jira-project-config/issuetypes/entities/ajax/project-issue-type-manager")),AJS.namespace("JIRA.ProjectConfig.IssueTypes.Entities.Fields",null,require("jira-project-config/issuetypes/entities/models/fields")),AJS.namespace("JIRA.ProjectConfig.IssueTypes.Entities.HeaderDescriptor",null,require("jira-project-config/issuetypes/entities/models/header-descriptor")),AJS.namespace("JIRA.ProjectConfig.IssueTypes.Entities.IssueType",null,require("jira-project-config/issuetypes/entities/models/issue-type")),AJS.namespace("JIRA.ProjectConfig.IssueTypes.Entities.IssueTypeLink",null,require("jira-project-config/issuetypes/entities/models/issue-type-link")),AJS.namespace("JIRA.ProjectConfig.IssueTypes.Entities.IssueTypeLinks",null,require("jira-project-config/issuetypes/entities/models/issue-type-links")),AJS.namespace("JIRA.ProjectConfig.IssueTypes.Entities.IssueTypes",null,require("jira-project-config/issuetypes/entities/models/issue-types")),AJS.namespace("JIRA.ProjectConfig.IssueTypes.Entities.Perspective",null,require("jira-project-config/issuetypes/entities/models/perspective")),AJS.namespace("JIRA.ProjectConfig.IssueTypes.Entities.Perspectives",null,require("jira-project-config/issuetypes/entities/models/perspectives")),AJS.namespace("JIRA.ProjectConfig.IssueTypes.Entities.Project",null,require("jira-project-config/issuetypes/entities/models/project")),AJS.namespace("JIRA.ProjectConfig.IssueTypes.Entities.Projects",null,require("jira-project-config/issuetypes/entities/models/projects")),AJS.namespace("JIRA.ProjectConfig.IssueTypes.Entities.SharedByData",null,require("jira-project-config/issuetypes/entities/models/shared-by-data")),AJS.namespace("JIRA.ProjectConfig.IssueTypes.Entities.Workflow",null,require("jira-project-config/issuetypes/entities/models/workflow")),AJS.namespace("JIRA.ProjectConfig.IssueTypes.Entities.Module",null,require("jira-project-config/issuetypes/entities/module")),AJS.namespace("JIRA.ProjectConfig.IssueTypes.Entities.Manager",null,require("jira-project-config/issuetypes/entities/manager"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:issuetypes-navigation', location = 'issuetypes/navigation/template.soy' */
// This file was automatically generated from template.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.IssueTypeConfig.Navigation.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.IssueTypeConfig == 'undefined') { JIRA.Templates.IssueTypeConfig = {}; }
if (typeof JIRA.Templates.IssueTypeConfig.Navigation == 'undefined') { JIRA.Templates.IssueTypeConfig.Navigation = {}; }


JIRA.Templates.IssueTypeConfig.Navigation.base = function(opt_data, opt_ignored) {
  return '<li id="project-issuetypes-summary"></li><li id="project-issuetypes-container"><ul class="project-issuetypes"></ul><div id="project-issuetypes-expand-container"></div></li>';
};
if (goog.DEBUG) {
  JIRA.Templates.IssueTypeConfig.Navigation.base.soyTemplateName = 'JIRA.Templates.IssueTypeConfig.Navigation.base';
}


JIRA.Templates.IssueTypeConfig.Navigation.summary = function(opt_data, opt_ignored) {
  return '<a id="view_project_issuetypes"' + ((opt_data.projectKey) ? ' href="' + soy.$$escapeHtml("") + '/plugins/servlet/project-config/' + soy.$$escapeHtml(opt_data.projectKey) + '/issuetypes"' : '') + '>' + soy.$$escapeHtml('Issue types') + '</a>';
};
if (goog.DEBUG) {
  JIRA.Templates.IssueTypeConfig.Navigation.summary.soyTemplateName = 'JIRA.Templates.IssueTypeConfig.Navigation.summary';
}


JIRA.Templates.IssueTypeConfig.Navigation.expand = function(opt_data, opt_ignored) {
  var output = '';
  var expandMessage__soy17 = '' + soy.$$escapeHtml(AJS.format('{0} more issue types',opt_data.issueTypeLinks.length - opt_data.teaserCount));
  output += '<a id="project-issuetypes-expand" href="#" title="' + soy.$$escapeHtml(expandMessage__soy17) + '"><span class="aui-icon aui-icon-small project-issuetypes-expand-icon"></span>' + soy.$$escapeHtml(expandMessage__soy17) + '</a>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.IssueTypeConfig.Navigation.expand.soyTemplateName = 'JIRA.Templates.IssueTypeConfig.Navigation.expand';
}


JIRA.Templates.IssueTypeConfig.Navigation.issueType = function(opt_data, opt_ignored) {
  return '<a id="view_project_issuetype_' + soy.$$escapeHtml(opt_data.id) + '" class="project-issuetype" href="' + soy.$$escapeHtml(opt_data.url) + '" title="' + soy.$$escapeHtml(opt_data.name) + '">' + soy.$$escapeHtml(opt_data.name) + '</a>';
};
if (goog.DEBUG) {
  JIRA.Templates.IssueTypeConfig.Navigation.issueType.soyTemplateName = 'JIRA.Templates.IssueTypeConfig.Navigation.issueType';
}
;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:issuetypes-navigation', location = 'issuetypes/navigation/template-wrapper.js' */
define("jira-project-config/issuetypes/navigation/templates",[],function(){"use strict";return window.JIRA.Templates.IssueTypeConfig.Navigation});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:issuetypes-navigation', location = 'issuetypes/navigation/views/expander.js' */
define("jira-project-config/issuetypes/navigation/views/expander",["require"],function(e){"use strict";var i=e("jira-project-config/marionette"),t=e("jira-project-config/issuetypes/navigation/templates");return i.ItemView.extend({attributes:{id:"project-issuetypes-expand-container"},template:t.expand,triggers:{"simpleClick a":"expand"}})});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:issuetypes-navigation', location = 'issuetypes/navigation/views/issuetype.js' */
define("jira-project-config/issuetypes/navigation/views/issue-type",["require"],function(e){"use strict";var t=e("jira-project-config/marionette"),i=e("jira-project-config/issuetypes/navigation/templates");return t.ItemView.extend({setSelected:function(e){this.$el.toggleClass("aui-nav-selected",e)},tagName:"li",template:i.issueType})});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:issuetypes-navigation', location = 'issuetypes/navigation/views/issuetypes.js' */
define("jira-project-config/issuetypes/navigation/views/issue-types",["require"],function(e){"use strict";var s=e("jira-project-config/marionette"),t=e("jira-project-config/issuetypes/navigation/views/issue-type"),i=e("jira-project-config/navigate"),a=e("jquery"),r="project-issuetypes";return s.CollectionView.extend({attributes:function(){return{class:r+(this.model.get("collapsed")?" project-issuetypes-collapsed":"")}},events:{"simpleClick .project-issuetype":"_navigate"},initialize:function(e){this.model=e.model,this.collection=e.model.get("issueTypeLinks"),this.listenTo(this,"render",this._markSelected),this.listenTo(this,"render",this._markTeasers)},itemView:t,modelEvents:{"change:collapsed":"_markCollapsed","change:selection":"_markSelected","change:teaserCount":"_markTeasers"},tagName:"ul",_markCollapsed:function(e,s){this.$el.toggleClass("project-issuetypes-collapsed",s)},_markSelected:function(){var e=this.model.get("selection");this.children.each(function(s){s.setSelected(s.model===e)})},_markTeasers:function(){var e,s,t=this.$el.children();s=t.slice(0,this.model.get("teaserCount")),s.addClass("project-issuetypes-teaser"),s.last().addClass("project-issuetypes-teaser-last"),e=t.slice(this.model.get("teaserCount")),e.removeClass("project-issuetypes-teaser"),e.removeClass("project-issuetypes-teaser-last"),t.last().addClass("project-issuetypes-last")},_navigate:function(e){e.preventDefault(),i(a(e.target).attr("href"))}})});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:issuetypes-navigation', location = 'issuetypes/navigation/views/layout.js' */
define("jira-project-config/issuetypes/navigation/views/layout",["require"],function(e){"use strict";var t=e("jira-project-config/marionette"),i=e("jira-project-config/issuetypes/navigation/templates"),s=e("jira-project-config/utils/virtual-region"),a=e("underscore");return t.Layout.extend({attributes:{class:"aui-nav",id:"project_issuetypes"},initialize:function(){var e,t,i;a.bindAll(this,"template"),e=new s({el:this.$el,target:"#project-issuetypes-expand-container"}),t=new s({el:this.$el,target:".project-issuetypes"}),i=new s({el:this.$el,target:"#project-issuetypes-summary"}),this.addRegion("expander",e),this.addRegion("issueTypes",t),this.addRegion("summary",i)},tagName:"ul",template:i.base})});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:issuetypes-navigation', location = 'issuetypes/navigation/views/summary.js' */
define("jira-project-config/issuetypes/navigation/views/summary",["require"],function(e){"use strict";var t=e("jira-project-config/marionette"),i=e("jira-project-config/issuetypes/navigation/templates");return t.ItemView.extend({attributes:{id:"project-issuetypes-summary"},initialize:function(){this.listenTo(this.model,"change:projectKey",this.render),this.listenTo(this.model,"change:selection",this._updateSelected),this.listenTo(this,"render",this._updateSelected)},tagName:"li",template:i.summary,_updateSelected:function(){this.$el.toggleClass("aui-nav-selected","summary"===this.model.get("selection"))}})});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:issuetypes-navigation', location = 'issuetypes/navigation/model.js' */
define("jira-project-config/issuetypes/navigation/model",["require"],function(e){"use strict";var t=e("jira-project-config/backbone"),s=e("jira-project-config/issuetypes/entities/models/issue-type-links"),i=t.Model.extend({defaults:function(){return{issueTypeLinks:new s,projectKey:null,selection:null,teaserCount:10,collapsed:!1,userWantsExpandedMode:!1}},initialize:function(){this.listenTo(this,"change:teaserCount change:selection change:userWantsExpandedMode",this._updateCollapsed),this.listenTo(this.get("issueTypeLinks"),"add remove reset",this._updateCollapsed),this._updateCollapsed()},_updateCollapsed:function(){var e;e=!this.get("userWantsExpandedMode")&&!this.get("selection")&&this.get("issueTypeLinks").length>this.get("teaserCount")+1,this.set("collapsed",e)}});return i.SUMMARY_SELECTION="summary",i});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:issuetypes-navigation', location = 'issuetypes/navigation/controller.js' */
define("jira-project-config/issuetypes/navigation/controller",["require"],function(e){"use strict";var s=e("jira-project-config/marionette"),i=e("jira-project-config/issuetypes/navigation/model"),t=e("jira-project-config/issuetypes/navigation/views/summary"),o=e("jira-project-config/issuetypes/navigation/views/layout"),n=e("jira-project-config/issuetypes/navigation/views/issue-types"),r=e("jira-project-config/issuetypes/navigation/views/expander"),u=e("underscore");return s.Controller.extend({initialize:function(e){var s=this;this.reqres=e.reqres,this.region=e.region,this.model=new i,this.layout=new o,this.reqres.request("project").done(function(e){s.model.set("projectKey",e.get("key"))}),s.reqres.request("issueTypeLinks").done(function(e){s.model.get("issueTypeLinks").reset(e.models)})},selectIssueType:function(e){var s=this.model.get("issueTypeLinks").get(e);s&&this.model.set("selection",s)},selectSummary:function(){this.model.set("selection","summary")},unselect:function(){this.model.set("selection",null)},show:function(){var e,s,i;e=new r({model:this.model}),this.listenTo(e,"expand",function(){this.model.set("userWantsExpandedMode",!0)}),s=new n({model:this.model}),i=new t({model:this.model}),this.layout.once("show",u.bind(function(){this.layout.expander.show(e),this.layout.issueTypes.show(s),this.layout.summary.show(i)},this)),this.region.show(this.layout)}})});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:issuetypes-navigation', location = 'issuetypes/navigation/namespaces.js' */
AJS.namespace("JIRA.ProjectConfig.IssueTypes.Navigation.ExpanderView",null,require("jira-project-config/issuetypes/navigation/views/expander")),AJS.namespace("JIRA.ProjectConfig.IssueTypes.Navigation.IssueTypeView",null,require("jira-project-config/issuetypes/navigation/views/issue-type")),AJS.namespace("JIRA.ProjectConfig.IssueTypes.Navigation.IssueTypesView",null,require("jira-project-config/issuetypes/navigation/views/issue-types")),AJS.namespace("JIRA.ProjectConfig.IssueTypes.Navigation.Layout",null,require("jira-project-config/issuetypes/navigation/views/layout")),AJS.namespace("JIRA.ProjectConfig.IssueTypes.Navigation.SummaryView",null,require("jira-project-config/issuetypes/navigation/views/summary")),AJS.namespace("JIRA.ProjectConfig.IssueTypes.Navigation.Controller",null,require("jira-project-config/issuetypes/navigation/controller")),AJS.namespace("JIRA.ProjectConfig.IssueTypes.Navigation.Model",null,require("jira-project-config/issuetypes/navigation/model")),AJS.namespace("JIRA.Templates.IssueTypeConfig.Navigation",null,require("jira-project-config/issuetypes/navigation/templates"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:default-module', location = 'global/js/projectconfig/modules/default/controller.js' */
define("jira-project-config/project-config/default/controller",["jira-project-config/issuetypes/navigation/controller","jira-project-config/marionette"],function(i,e){"use strict";return e.Controller.extend({initialize:function(e){this.application=e.application,this.navigation=new i({region:this.application.issueTypesSideNav,reqres:this.application.reqres}),this.navigation.show()},selectIssueType:function(i){this.navigation.selectIssueType(i)},selectSummary:function(){this.navigation.selectSummary()}})}),AJS.namespace("JIRA.ProjectConfig.Default.Controller",null,require("jira-project-config/project-config/default/controller"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:default-module', location = 'global/js/projectconfig/modules/default/module.js' */
define("jira-project-config/project-config/default/module",["jira-project-config/project-config/default/controller","underscore"],function(e,n){"use strict";return function(i,t){i.addInitializer(function(){var i=new e({application:t});t.vent.on("issueTypes:issueTypeSelected",n.bind(i.selectIssueType,i)),t.vent.on("issueTypes:summarySelected",n.bind(i.selectSummary,i))}),i.addFinalizer(function(){t.vent.off("issueTypes:issueTypeSelected"),t.vent.off("issueTypes:summarySelected")})}}),AJS.namespace("JIRA.ProjectConfig.Default.Module",null,require("jira-project-config/project-config/default/module"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:templates-messages', location = 'global/templates/messages.soy' */
// This file was automatically generated from messages.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Messages.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Messages == 'undefined') { JIRA.Templates.Messages = {}; }


JIRA.Templates.Messages.msg = function(opt_data, opt_ignored) {
  return '<div class="aui-message aui-message-' + soy.$$escapeHtml(opt_data.type) + '"><p class="title">' + ((opt_data.title) ? '<strong>' + soy.$$escapeHtml(opt_data.title) + '</strong></p>' : '') + '</p>' + soy.$$escapeHtml(opt_data.message) + '</div>';
};
if (goog.DEBUG) {
  JIRA.Templates.Messages.msg.soyTemplateName = 'JIRA.Templates.Messages.msg';
}


JIRA.Templates.Messages.errorMessage = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.Messages.msg(soy.$$augmentMap(opt_data, {type: 'error'}));
};
if (goog.DEBUG) {
  JIRA.Templates.Messages.errorMessage.soyTemplateName = 'JIRA.Templates.Messages.errorMessage';
}


JIRA.Templates.Messages.inline = function(opt_data, opt_ignored) {
  return '<div class="aui-message ' + ((opt_data.type) ? 'aui-message-' + soy.$$escapeHtml(opt_data.type) : 'aui-message-info') + '">' + soy.$$filterNoAutoescape(opt_data.content) + ((opt_data.actionsHtml) ? '<ul class="aui-nav-actions-list">' + soy.$$filterNoAutoescape(opt_data.actionsHtml) + '</ul>' : '') + '</div>';
};
if (goog.DEBUG) {
  JIRA.Templates.Messages.inline.soyTemplateName = 'JIRA.Templates.Messages.inline';
}
;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:templates-messages', location = 'global/templates/messages-template-wrapper.js' */
define("jira-project-config/templates/messages",[],function(){"use strict";return window.JIRA.Templates.Messages}),AJS.namespace("JIRA.Templates.Messages",null,require("jira-project-config/templates/messages"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-header-resource', location = 'global/templates/project-config-common.soy' */
// This file was automatically generated from project-config-common.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.ProjectConfig.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.ProjectConfig == 'undefined') { JIRA.Templates.ProjectConfig = {}; }


JIRA.Templates.ProjectConfig.header = function(opt_data, opt_ignored) {
  return '<div class="aui-page-header project-config-panel-header"><div class="aui-page-header-inner"><div class="aui-page-header-main"><h2 class="project-config-heading">' + soy.$$escapeHtml(opt_data.category) + '</h2>' + ((opt_data.categoryLozenges) ? JIRA.Templates.ProjectConfig.lozenges({content: opt_data.categoryLozenges}) : '') + '</div>' + ((opt_data.actionsHtml) ? '<div class="aui-page-header-actions">' + soy.$$filterNoAutoescape(opt_data.actionsHtml) + '</div>' : '') + '</div>' + ((opt_data.help) ? '<div class="aui-page-header-inner">' + JIRA.Templates.ProjectConfig.help({content: opt_data.help}) + '</div>' : '') + ((opt_data.scheme || opt_data.hasDraft || opt_data.isEditing || opt_data.messagesHtml) ? '<div class="aui-page-header-inner">' + JIRA.Templates.Messages.inline({content: soy.$$escapeHtml('Scheme used by this project:') + '<h4 id="project-config-scheme-name" class="project-config-scheme-name" title="' + soy.$$escapeHtml(opt_data.schemeDescription ? opt_data.schemeDescription : 'Scheme: ' + opt_data.scheme) + '">' + soy.$$escapeHtml(opt_data.scheme) + '</h4>' + ((opt_data.schemeLozenges) ? JIRA.Templates.ProjectConfig.lozenges({content: opt_data.schemeLozenges}) : '')}) + ((opt_data.messagesHtml) ? soy.$$filterNoAutoescape(opt_data.messagesHtml) : '') + ((opt_data.hasDraft || opt_data.isEditing) ? JIRA.Templates.ProjectConfig.draftMode(soy.$$augmentMap(opt_data, {type: opt_data.draftType, message: opt_data.draftMessage, actions: opt_data.draftActions})) : '') + '</div>' : '') + '</div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectConfig.header.soyTemplateName = 'JIRA.Templates.ProjectConfig.header';
}


JIRA.Templates.ProjectConfig.help = function(opt_data, opt_ignored) {
  return '' + aui.expander.content({id: 'project-help-content', className: 'aui-help aui-help-text', initiallyExpanded: true, content: '<div class="aui-help-content">' + soy.$$filterNoAutoescape(opt_data.content) + '</div>'});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectConfig.help.soyTemplateName = 'JIRA.Templates.ProjectConfig.help';
}


JIRA.Templates.ProjectConfig.lozenges = function(opt_data, opt_ignored) {
  return '' + ((opt_data.content != null) ? '<div class="lozenges-wrapper">' + soy.$$filterNoAutoescape(opt_data.content) + '</div>' : '');
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectConfig.lozenges.soyTemplateName = 'JIRA.Templates.ProjectConfig.lozenges';
}


JIRA.Templates.ProjectConfig.draftMode = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + aui.message.message({type: opt_data.type, extraClasses: 'draft-message', content: '<div class="message-content"><div class="message-container">' + ((opt_data.message) ? soy.$$filterNoAutoescape(opt_data.message) : '<p>' + ((opt_data.isEditing) ? (opt_data.hasDraft) ? soy.$$escapeHtml('You are editing a draft. There are unpublished changes.') : soy.$$escapeHtml('You are editing a draft. All your changes are saved automatically.') : (opt_data.hasDraft) ? soy.$$escapeHtml('There is a draft with unpublished changes.') : '') + '</p>') + '</div>' + ((opt_data.actions) ? '<div class="actions-list">' + soy.$$filterNoAutoescape(opt_data.actions) + '</div>' : '<ul class="actions-list">' + ((opt_data.isEditing) ? (opt_data.hasDraft) ? '<li>' + JIRA.Templates.ProjectConfig.draftActionPublish(opt_data) + '</li><li>' + JIRA.Templates.ProjectConfig.draftActionDiscard(opt_data) + '</li>' + ((! opt_data.skipViewOriginal) ? '<li>' + JIRA.Templates.ProjectConfig.draftActionViewOriginal(opt_data) + '</li>' : '') : '' : (opt_data.hasDraft) ? (! opt_data.skipViewDraft) ? '<li>' + JIRA.Templates.ProjectConfig.draftActionViewDraft(opt_data) + '</li>' : '' : '') + '</ul>') + '</div>'});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectConfig.draftMode.soyTemplateName = 'JIRA.Templates.ProjectConfig.draftMode';
}


JIRA.Templates.ProjectConfig.draftActionViewOriginal = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<a id="view-original" class="show-in-draft-view" href="' + soy.$$escapeHtml(opt_data.viewOriginalURL ? opt_data.viewOriginalURL : '#') + '">' + soy.$$escapeHtml('View Original') + '</a>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectConfig.draftActionViewOriginal.soyTemplateName = 'JIRA.Templates.ProjectConfig.draftActionViewOriginal';
}


JIRA.Templates.ProjectConfig.draftActionViewDraft = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<a id="view-draft" class="show-in-original-view" href="' + soy.$$escapeHtml(opt_data.viewDraftURL ? opt_data.viewDraftURL : '#') + '">' + soy.$$escapeHtml('Edit Draft') + '</a>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectConfig.draftActionViewDraft.soyTemplateName = 'JIRA.Templates.ProjectConfig.draftActionViewDraft';
}


JIRA.Templates.ProjectConfig.draftActionPublish = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + ((opt_data.publishURL) ? '<a id="publish-draft" class="aui-button aui-button-primary' + ((opt_data.linksInDialog) ? ' trigger-dialog' : '') + '" href="' + soy.$$escapeHtml(opt_data.publishURL) + '">' + soy.$$escapeHtml('Publish') + '</a>' : aui.buttons.button({id: 'publish-draft', type: 'primary', text: 'Publish', isDisabled: opt_data.publishDisabled}));
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectConfig.draftActionPublish.soyTemplateName = 'JIRA.Templates.ProjectConfig.draftActionPublish';
}


JIRA.Templates.ProjectConfig.draftActionDiscard = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + ((opt_data.discardURL) ? '<a id="discard-draft" class="aui-button' + ((opt_data.linksInDialog) ? ' trigger-dialog' : '') + '" href="' + soy.$$escapeHtml(opt_data.discardURL) + '">' + soy.$$escapeHtml('Discard') + '</a>' : '<button id="discard-draft" class="aui-button">' + soy.$$escapeHtml('Discard') + '</button>');
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectConfig.draftActionDiscard.soyTemplateName = 'JIRA.Templates.ProjectConfig.draftActionDiscard';
}
;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-header-resource', location = 'global/templates/project-config-common-template-wrapper.js' */
define("jira-project-config/templates/common",[],function(){"use strict";return window.JIRA.Templates.ProjectConfig}),AJS.namespace("JIRA.Templates.ProjectConfig",null,require("jira-project-config/templates/common"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-global-analytics', location = 'global/js/analytics-common-data.js' */
define("jira-project-config/global/js/analytics-common-data",["wrm/data"],function(a){"use strict";return Object.freeze(a.claim("com.atlassian.jira.jira-project-config-plugin:analytics-common-data")||{})});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-global-resources', location = 'global/templates/issuetype-config-sidebar.soy' */
// This file was automatically generated from issuetype-config-sidebar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.IssueTypeConfig.Data.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.IssueTypeConfig == 'undefined') { JIRA.Templates.IssueTypeConfig = {}; }
if (typeof JIRA.Templates.IssueTypeConfig.Data == 'undefined') { JIRA.Templates.IssueTypeConfig.Data = {}; }


JIRA.Templates.IssueTypeConfig.Data.render = function(opt_data, opt_ignored) {
  return '<ul id="project_issuetypes" class="aui-nav" data-issue-types="' + soy.$$escapeHtml(opt_data.issueTypesData) + '"></ul>';
};
if (goog.DEBUG) {
  JIRA.Templates.IssueTypeConfig.Data.render.soyTemplateName = 'JIRA.Templates.IssueTypeConfig.Data.render';
}
;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-global-resources', location = 'global/templates/common.soy' */
// This file was automatically generated from common.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Common.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Common == 'undefined') { JIRA.Templates.Common = {}; }


JIRA.Templates.Common.serverErrorDialog = function(opt_data, opt_ignored) {
  return '<h2 class="dialog-title">' + 'Error' + '</h2><div class="form-body"><div class="aui-message aui-message-error">' + opt_data.message + '</div></div><div class="buttons-container form-footer"><div class="buttons"><a href="#" class="aui-button aui-button-link cancel">' + 'Close' + '</a></div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.Common.serverErrorDialog.soyTemplateName = 'JIRA.Templates.Common.serverErrorDialog';
}


JIRA.Templates.Common.formatAnchor = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(opt_data.href) + '"' + ((opt_data.title) ? ' title="' + soy.$$escapeHtml(opt_data.title) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.body) + '</a>';
};
if (goog.DEBUG) {
  JIRA.Templates.Common.formatAnchor.soyTemplateName = 'JIRA.Templates.Common.formatAnchor';
}
;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-global-resources', location = 'global/templates/UserProfile.soy' */
// This file was automatically generated from UserProfile.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.User.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.User == 'undefined') { JIRA.Templates.User = {}; }


JIRA.Templates.User.profileLink = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.user) {
    if (opt_data.user.displayName && opt_data.user.active) {
      var avatar__soy7 = '' + ((opt_data.avatarUrl) ? aui.avatar.avatar({avatarImageUrl: opt_data.avatarUrl, size: '' + ((opt_data.avatarSize) ? soy.$$escapeHtml(opt_data.avatarSize) : 'small')}) : '');
      output += (opt_data.linked) ? '<a class="user-hover jira-user" rel="' + soy.$$escapeHtml(opt_data.user.name) + '" href="' + soy.$$escapeHtml("") + '/secure/ViewProfile.jspa?name=' + soy.$$escapeUri(opt_data.user.name) + '">' + soy.$$filterNoAutoescape(avatar__soy7) + soy.$$escapeHtml(opt_data.user.displayName) + '</a>' : '<span class="user-hover jira-user" rel="' + soy.$$escapeHtml(opt_data.user.name) + '">' + soy.$$filterNoAutoescape(avatar__soy7) + soy.$$escapeHtml(opt_data.user.displayName) + '</span>';
    } else {
      output += '<span class="user-name" ' + ((! opt_data.user.active) ? 'title="' + soy.$$escapeHtml('User does not exist') + '"' : '') + '>' + soy.$$escapeHtml(opt_data.user.name) + '</span>';
    }
  } else {
    output += '<span class="user-anonymous">' + soy.$$escapeHtml('Anonymous') + '</span>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.User.profileLink.soyTemplateName = 'JIRA.Templates.User.profileLink';
}
;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-global', location = 'global/js/project-config.js' */
require(["jira/ajs/dropdown/dropdown","jira/ajs/layer/layer-constants","jira/toggleblock/toggle-block","jira-project-config/application","jira-project-config/issuetypes/entities/module","jira-project-config/project-config/default/module","jira-project-config/project-config/urls/module","jira-project-config/error/module","aui/inline-dialog","jira/libs/parse-uri","jira/util/strings","jquery"],function(e,i,o,r,n,t,c,a,l,s,d,u){"use strict";u(function(){var f=u(".aui-toolbar");u("a.project-config-inlinedialog-trigger").each(function(){new l(u(this),"project-config-inlinedialog-"+d.escapeHtml(s(this.href).queryKey.fieldId),this.href,{width:200})}),u(".tabs-menu a").unbind("click");var g=new e({trigger:f.find(".aui-dd-trigger"),content:f.find(".aui-list"),alignment:i.RIGHT}),p="closed";u(g).bind({showLayer:function(){p="open"},hideLayer:function(){p="closed"}}),g.trigger().bind("mouseenter focus",function(){"willopen"===p&&g.show()});new o({blockSelector:".project-config-scheme-item",triggerSelector:".project-config-toggle,.expander-icon",persist:!1}),u(".project-config-scheme-item").on({expandBlock:function(){u(this).find(".expander-icon").removeClass("aui-iconfont-collapsed").addClass("aui-iconfont-expanded")},contractBlock:function(){u(this).find(".expander-icon").removeClass("aui-iconfont-expanded").addClass("aui-iconfont-collapsed")}});var j=void 0;try{j=require("jira-project-config/issuetypes/module")}catch(e){}try{var m=require("jira-project-config/workflow/module")}catch(e){}r.module("Urls",c),r.module("IssueTypes.Entities",n),r.module("Error",a),r.module("IssueTypes",j),r.module("Default",t),r.module("Workflow",m),r.start()})});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:change-project-type-dialog', location = 'global/js/init-change-project-type-dialog.js' */
define("jira-project-config/init-change-project-type-dialog",["require"],function(e){"use strict";function t(){new i({trigger:n("#change_project_type_project"),projectId:r.getId(),onProjectTypeChanged:function(){window.location.reload()}})}var i=e("jira/project/admin/change-project-type-dialog"),r=e("jira-project-config/utils"),n=e("jquery");return{init:t}});;
;
/* module-key = 'jira.webresources:jquery-lazyload', location = '/includes/jquery/plugins/lazyload/jquery.lazyload.js' */
!function(e,t){var o=e(t);e.fn.lazyload=function(i){function n(){var t=0;f.each(function(){var o=e(this);if(!l.skip_invisible||o.is(":visible"))if(e.abovethetop(this,l)||e.leftofbegin(this,l));else if(e.belowthefold(this,l)||e.rightoffold(this,l)){if(++t>l.failure_limit)return!1}else o.trigger("appear")})}var r,f=this,l={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:t,data_attribute:"original",skip_invisible:!0,appear:null,load:null};return i&&(void 0!==i.failurelimit&&(i.failure_limit=i.failurelimit,delete i.failurelimit),void 0!==i.effectspeed&&(i.effect_speed=i.effectspeed,delete i.effectspeed),e.extend(l,i)),r=void 0===l.container||l.container===t?o:e(l.container),0===l.event.indexOf("scroll")&&r.bind(l.event,function(e){return n()}),this.each(function(){var t=this,o=e(t);t.loaded=!1,o.one("appear",function(){if(!this.loaded){if(l.appear){var i=f.length;l.appear.call(t,i,l)}e("<img />").bind("load",function(){o.hide().attr("src",o.data(l.data_attribute))[l.effect](l.effect_speed),t.loaded=!0;var i=e.grep(f,function(e){return!e.loaded});if(f=e(i),l.load){var n=f.length;l.load.call(t,n,l)}}).error(function(){o.attr("src",o.data(l.data_attribute))}).attr("src",o.data(l.data_attribute))}}),0!==l.event.indexOf("scroll")&&o.bind(l.event,function(e){t.loaded||o.trigger("appear")})}),o.bind("resize",function(e){n()}),n(),this},e.belowthefold=function(i,n){return(void 0===n.container||n.container===t?o.height()+o.scrollTop():e(n.container).offset().top+e(n.container).height())<=e(i).offset().top-n.threshold},e.rightoffold=function(i,n){return(void 0===n.container||n.container===t?o.width()+o.scrollLeft():e(n.container).offset().left+e(n.container).width())<=e(i).offset().left-n.threshold},e.abovethetop=function(i,n){return(void 0===n.container||n.container===t?o.scrollTop():e(n.container).offset().top)>=e(i).offset().top+n.threshold+e(i).height()},e.leftofbegin=function(i,n){return(void 0===n.container||n.container===t?o.scrollLeft():e(n.container).offset().left)>=e(i).offset().left+n.threshold+e(i).width()},e.inviewport=function(t,o){return!(e.rightofscreen(t,o)||e.leftofscreen(t,o)||e.belowthefold(t,o)||e.abovethetop(t,o))},e.extend(e.expr[":"],{"below-the-fold":function(t){return e.belowthefold(t,{threshold:0})},"above-the-top":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-screen":function(t){return e.rightoffold(t,{threshold:0})},"left-of-screen":function(t){return!e.rightoffold(t,{threshold:0})},"in-viewport":function(t){return!e.inviewport(t,{threshold:0})},"above-the-fold":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-fold":function(t){return e.rightoffold(t,{threshold:0})},"left-of-fold":function(t){return!e.rightoffold(t,{threshold:0})}})}(jQuery,window);;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:workflows-common', location = 'workflows/templates/workflows-dialogs.soy' */
// This file was automatically generated from workflows-dialogs.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Workflows.Scheme.Dialogs.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Workflows == 'undefined') { JIRA.Templates.Workflows = {}; }
if (typeof JIRA.Templates.Workflows.Scheme == 'undefined') { JIRA.Templates.Workflows.Scheme = {}; }
if (typeof JIRA.Templates.Workflows.Scheme.Dialogs == 'undefined') { JIRA.Templates.Workflows.Scheme.Dialogs = {}; }


JIRA.Templates.Workflows.Scheme.Dialogs.preview = function(opt_data, opt_ignored) {
  return '<div class="project-config-workflow-add-dialog-preview-diagram-container"><h3 class="project-config-workflow-add-dialog-preview-name">' + soy.$$escapeHtml(opt_data.workflow.displayName) + '</h3><div id="workflow-canvas"></div><span class="project-config-workflow-diagram-aligner"></span></div><ul class="item-details project-config-workflow-add-dialog-preview-desc-panel">' + ((opt_data.workflow.description) ? '<dl><dt>' + soy.$$escapeHtml('Description') + '</dt><dd id="project-config-workflow-add-dialog-preview-desc" title="' + soy.$$escapeHtml(opt_data.workflow.description) + '">' + soy.$$escapeHtml(opt_data.workflow.description) + '</dd></dl>' : '') + '<dl><dt>' + soy.$$escapeHtml('Last modified') + '</dt><dd title="' + ((opt_data.workflow.lastModifiedDate) ? soy.$$escapeHtml(opt_data.workflow.lastModifiedDate) : soy.$$escapeHtml('Never')) + ((opt_data.workflow.lastModifiedUser) ? ' ' + soy.$$escapeHtml('by') + ' ' + soy.$$escapeHtml(opt_data.workflow.lastModifiedUser) : '') + '"><span id="project-config-workflow-add-dialog-preview-last-modified-date" class="project-config-workflow-add-dialog-preview-last-modified-date">' + ((opt_data.workflow.lastModifiedDate) ? soy.$$escapeHtml(opt_data.workflow.lastModifiedDate) : soy.$$escapeHtml('Never')) + '</span>' + ((opt_data.workflow.lastModifiedUser) ? ' ' + soy.$$escapeHtml('by') + ' <span id="project-config-workflow-add-dialog-preview-last-modified-user">' + soy.$$escapeHtml(opt_data.workflow.lastModifiedUser) + '</span>' : '') + '</dd></dl></ul>';
};
if (goog.DEBUG) {
  JIRA.Templates.Workflows.Scheme.Dialogs.preview.soyTemplateName = 'JIRA.Templates.Workflows.Scheme.Dialogs.preview';
}


JIRA.Templates.Workflows.Scheme.Dialogs.assign = function(opt_data, opt_ignored) {
  var output = '<h2>' + soy.$$escapeHtml(AJS.format('Assign Issue Types to \x22{0}\x22',opt_data.workflowDisplayName)) + '</h2><form class="aui"><input type="hidden" name="name" value="' + soy.$$escapeHtml(opt_data.workflow) + '"/><input type="hidden" name="displayName" value="' + soy.$$escapeHtml(opt_data.workflowDisplayName) + '"/><div id="project-config-workflows-assign-issue-types-message-bar" class="project-config-workflows-assign-issue-types-message-bar hidden"></div><div class="project-config-workflows-issue-types-body project-config-scroll-shadow"><table class="aui aui-table-rowhover"><thead><tr><th class="project-config-workflows-checkbox-col"><input type="checkbox" id="project-config-select-all-issue-types"/></th><th class="project-config-workflows-issue-types-col">' + soy.$$escapeHtml('Issue Type') + '</th><th>' + soy.$$escapeHtml('Currently Assigned Workflow') + '</th><th></th></tr></thead><tbody>' + ((opt_data.showDefault && opt_data.issueTypeToWorkflow['0'] != opt_data.workflowDisplayName) ? JIRA.Templates.Workflows.Scheme.Dialogs.defaultRow({defaultworkflow: opt_data.issueTypeToWorkflow['0']}) : '');
  var issueTypeList60 = opt_data.issueTypes;
  var issueTypeListLen60 = issueTypeList60.length;
  for (var issueTypeIndex60 = 0; issueTypeIndex60 < issueTypeListLen60; issueTypeIndex60++) {
    var issueTypeData60 = issueTypeList60[issueTypeIndex60];
    output += (opt_data.issueTypeToWorkflow[issueTypeData60.id] != opt_data.workflowDisplayName) ? JIRA.Templates.Workflows.Scheme.Dialogs.assignRow({issueType: issueTypeData60, workflow: opt_data.issueTypeToWorkflow[issueTypeData60.id]}) : '';
  }
  output += '</tbody></table></div><div class="buttons-container form-footer"><div class="buttons project-config-workflows-assign-issue-types-buttons">' + ((opt_data.hasPrev) ? '<button class="aui-button cancel">' + soy.$$escapeHtml('Back') + '</button>' : '') + '<button class="aui-button" id="assign-issue-types-submit" disabled>' + soy.$$escapeHtml('Finish') + '</button><a href="#" class="aui-button aui-button-link cancel">' + soy.$$escapeHtml('Cancel') + '</a></div></div></form>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Workflows.Scheme.Dialogs.assign.soyTemplateName = 'JIRA.Templates.Workflows.Scheme.Dialogs.assign';
}


JIRA.Templates.Workflows.Scheme.Dialogs.assignRow = function(opt_data, opt_ignored) {
  return '<tr class="project-config-workflows-assign-issue-types-row"><td><input type="checkbox" name="issueTypes" value="' + soy.$$escapeHtml(opt_data.issueType.id) + '"/></td><td>' + JIRA.Templates.Workflows.Common.issueConstant({constant: opt_data.issueType}) + '</td><td class="project-config-workflows-currently-assigned-name" ' + ((opt_data.workflow) ? 'title="' + soy.$$escapeHtml(opt_data.workflow) + '"' : '') + '><span class="project-config-workflows-currently-assigned-name-text">' + ((opt_data.workflow) ? soy.$$escapeHtml(opt_data.workflow) : '') + '</span></td><td class="project-config-workflows-warning-col"><span id="project-config-workflows-issue-type-warning-icon-' + soy.$$escapeHtml(opt_data.issueType.id) + '" class="workflow-warning invisible" title="' + soy.$$escapeHtml('For a workflow to remain active in your project it must have at least one issue type assigned to it. If you assign this issue type to this workflow, you will be deactivating another workflow and removing it from this project.') + '"></span></td></tr>';
};
if (goog.DEBUG) {
  JIRA.Templates.Workflows.Scheme.Dialogs.assignRow.soyTemplateName = 'JIRA.Templates.Workflows.Scheme.Dialogs.assignRow';
}


JIRA.Templates.Workflows.Scheme.Dialogs.defaultRow = function(opt_data, opt_ignored) {
  return '<tr class="project-config-workflows-assign-issue-types-row admin-all-unassigned"><td><input type="checkbox" name="default"/></td><td><img height="16" width="16" src="' + soy.$$escapeHtml("") + '/images/icons/issuetypes/all_unassigned.png" class="project-config-icon project-config-icon-issuetype"> ' + soy.$$escapeHtml('All Unassigned Issue Types') + '</td><td class="project-config-workflows-currently-assigned-name" ' + ((opt_data.defaultworkflow) ? 'title="' + soy.$$escapeHtml(opt_data.defaultworkflow) + '"' : '') + '><span class="project-config-workflows-currently-assigned-name-text">' + ((opt_data.defaultworkflow) ? soy.$$escapeHtml(opt_data.defaultworkflow) : '') + '</span></td><td class="project-config-workflows-warning-col"><span id="project-config-workflows-issue-type-warning-icon-0" class="workflow-warning invisible" title="' + soy.$$escapeHtml('For a workflow to remain active in your project it must have at least one issue type assigned to it. If you assign this issue type to this workflow, you will be deactivating another workflow and removing it from this project.') + '"></span></td></tr>';
};
if (goog.DEBUG) {
  JIRA.Templates.Workflows.Scheme.Dialogs.defaultRow.soyTemplateName = 'JIRA.Templates.Workflows.Scheme.Dialogs.defaultRow';
}


JIRA.Templates.Workflows.Scheme.Dialogs.add = function(opt_data, opt_ignored) {
  var output = '<h2>' + soy.$$escapeHtml('Add Existing Workflow') + '</h2><form class="aui"><div class="project-config-workflow-add-dialog-body"><ul class="project-config-workflow-add-dialog-list">';
  var workflowList121 = opt_data.workflows;
  var workflowListLen121 = workflowList121.length;
  for (var workflowIndex121 = 0; workflowIndex121 < workflowListLen121; workflowIndex121++) {
    var workflowData121 = workflowList121[workflowIndex121];
    output += '<li data-workflowname="' + soy.$$escapeHtml(workflowData121.name) + '">' + soy.$$escapeHtml(workflowData121.displayName) + '</li>';
  }
  output += '</ul><div id="project-config-workflow-add-dialog-preview" class="project-config-workflow-add-dialog-preview"></div></div><div class="buttons-container form-footer"><div class="buttons"><button class="aui-button" id="add-workflow-next">' + soy.$$escapeHtml('Next') + '</button><a href="#" class="aui-button aui-button-link cancel">' + soy.$$escapeHtml('Cancel') + '</a></div></div></form>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Workflows.Scheme.Dialogs.add.soyTemplateName = 'JIRA.Templates.Workflows.Scheme.Dialogs.add';
}


JIRA.Templates.Workflows.Scheme.Dialogs.discardDraft = function(opt_data, opt_ignored) {
  return '<h2>' + soy.$$escapeHtml('Discard Draft?') + '</h2><form class="aui"><div class="form-body"><p>' + soy.$$escapeHtml('Are you sure you want to discard this draft? Any changes you have made will be lost.') + '</p></div><div class="buttons-container form-footer"><div class="buttons"><input type="submit" class="aui-button" value="' + soy.$$escapeHtml('Discard') + '"/><a href="#" class="aui-button aui-button-link cancel" id="aui-dialog-close">' + soy.$$escapeHtml('Cancel') + '</a></div></div></form>';
};
if (goog.DEBUG) {
  JIRA.Templates.Workflows.Scheme.Dialogs.discardDraft.soyTemplateName = 'JIRA.Templates.Workflows.Scheme.Dialogs.discardDraft';
}
;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:workflows-common', location = 'workflows/templates/workflows-dialogs-template-wrapper.js' */
define("jira-project-config/workflows/scheme/dialogs/templates",[],function(){"use strict";return window.JIRA.Templates.Workflows.Scheme.Dialogs});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:workflows-common', location = 'workflows/js/dialogs/models/WorkflowCollection.js' */
define("jira-project-config/workflows/dialogs/models/workflows",["require"],function(o){"use strict";function e(o,e){var r="Jira Workflow (jira)",t=i.find(o,function(o){return o.name===r}),n=void 0!==t;i.each(o,function(o){var t=o.name;if(!n){o[e]&&(t=r)}o.displayName=t})}var r=o("jira-project-config/workflows/dialogs/models/workflow"),t=o("jira-project-config/backbone"),n=o("wrm/context-path"),i=o("underscore"),a=o("jira/util/formatter");return t.Collection.extend({model:r,url:n()+"/rest/api/latest/workflow",parse:function(o){return e(o,"default"),o}})});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:workflows-common', location = 'workflows/js/dialogs/models/WorkflowModel.js' */
define("jira-project-config/workflows/dialogs/models/workflow",["require"],function(e){"use strict";return e("jira-project-config/backbone").Model.extend({defaults:{name:"",description:"",lastModifiedDate:"",lastModifiedUser:"",steps:0},idAttribute:"name"})});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:workflows-common', location = 'workflows/js/dialogs/AddWorkflowDialogView.js' */
define("jira-project-config/workflows/dialogs/add-workflow-dialog-view",["require"],function(o){"use strict";var e=o("jquery"),i=o("jira/dialog/form-dialog"),l=o("jira-project-config/backbone"),w=o("jira-project-config/workflows/scheme/dialogs/templates"),r=o("jira-project-config/workflows/dialogs/models/workflows"),t=o("jira-project-config/workflows/dialogs/add-workflow-dialog-workflow-view");return l.View.extend({events:{"click .project-config-workflow-add-dialog-list li":"viewWorkflow","click #add-workflow-next":"assignIssueTypes"},initialize:function(){this.collection=new r,this.workflowView=null,this.workflowDialog=null},template:function(o){return w.add(o)},render:function(){var o=this;return o.workflowDialog=new i({id:"add-workflow-dialog",widthClass:"large",stacked:!0,content:function(e){o.collection.fetch({success:function(i){e(o.template({workflows:i.remove(o.options.assignedWorkflows).toJSON()})),o.setElement("#add-workflow-dialog"),o.workflowDialog.get$popupContent().find(".project-config-workflow-add-dialog-list li").first().click()}})}}),o.workflowDialog.show(),this},remove:function(){this.workflowView&&this.workflowView.remove&&this.workflowView.remove(),this.workflowDialog&&this.workflowDialog.destroy&&this.workflowDialog.destroy()},viewWorkflow:function(o){var i=this.$el,l=e(o.target),w=l.data("workflowname"),r=this.collection.get(w);i.find("#add-workflow-next").data("workflow",r.toJSON()),l.hasClass("selected")||(i.find(".selected").removeClass("selected"),l.addClass("selected"),this.workflowView&&this.workflowView.remove&&this.workflowView.remove(),this.workflowView=new t({el:"#project-config-workflow-add-dialog-preview",model:r}).render())},assignIssueTypes:function(o){o.preventDefault(),this.trigger("assignIssueTypes",o)}})});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:workflows-common', location = 'workflows/js/dialogs/AddWorkflowDialogWorkflowView.js' */
define("jira-project-config/workflows/dialogs/add-workflow-dialog-workflow-view",["require"],function(e){"use strict";var o=e("jira-project-config/backbone"),r=e("jira-project-config/workflows/scheme/dialogs/templates");return o.View.extend({template:function(e){return r.preview(e)},render:function(){return this.$el.html(this.template({workflow:this.model.toJSON()})),this.workflowCanvas=this.$el.find("#workflow-canvas"),this.workflowDesigner||(this.workflowDesigner=new JIRA.WorkflowDesigner.Application({actions:!1,draft:!1,element:this.workflowCanvas,fullScreenButton:!1,immutable:!0,workflowId:this.model.get("name")})),this},remove:function(){this.workflowDesigner&&this.workflowDesigner.destroy&&this.workflowDesigner.destroy()}})});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:workflows-common', location = 'workflows/js/dialogs/AssignIssueTypes.js' */
var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};define("jira-project-config/workflows/dialogs/assign-issue-types",["require"],function(e){"use strict";function t(e){return function(t){t&&t.preventDefault();var s=e.prev;e.hide(),s&&s.hide()}}var s=e("jquery"),i=e("underscore"),o=e("jira/dialog/form-dialog"),n=e("jira-project-config/workflows/scheme/dialogs/templates");return function(e){new o({id:"assign-issue-types-dialog",widthClass:"medium",content:function(o){function c(){var t=d.find("#project-config-workflows-assign-issue-types-warning"),s=i.size(w);t.toggleClass("hidden",!s),i.each(e.workflows,function(e){var t=e.displayName,s=p[t],i=w[t];s.each(function(e,t){t.toggleClass("invisible",!i)})})}function r(e,t){e.prop("indeterminate",!!t),t?u.addClass("project-config-indeterminate"):u.removeClass("project-config-indeterminate")}var a=this,l={},f={};i.each(e.workflows,function(e){i.each(e.issueTypes,function(t){"object"!==(void 0===t?"undefined":_typeof(t))&&(l[t]=e.displayName)}),f[e.displayName]=e.issueTypes.length}),e.showDefault&&e.defaultWorkflow&&(l[0]=e.defaultWorkflow.displayName,f[e.defaultWorkflow.displayName]++),o(n.assign({workflow:e.workflowName,workflowDisplayName:e.workflowDisplayName,issueTypes:e.issueTypes,issueTypeToWorkflow:l,hasPrev:!!a.prev,showDefault:!!e.showDefault}));var d=a.get$popupContent(),p={};i.each(l,function(e,t){var i=p[e];i||(i=s([]),p[e]=i);var o=d.find("#project-config-workflows-issue-type-warning-icon-"+t);i.push(o)}),a.prev&&a.$buttonContainer.find("a.cancel").off("click").click(t(a));var u=d.find("#project-config-select-all-issue-types"),h=d.find("#assign-issue-types-submit"),y=d.find(".project-config-workflows-assign-issue-types-row"),w={};y.click(function(e){var t=s(this);if(t.toggleClass("selected"),"checkbox"!==e.target.type){var i=t.find(":checkbox");i.prop("checked",!i.prop("checked"))}var o=!y.is(".selected");o?r(u.prop("checked",!1),!1):y.is(":not(.selected)")?r(u.prop("checked",!1),!0):r(u.prop("checked",!0),!1);var n=t.find(".project-config-workflows-currently-assigned-name-text").text();(t.hasClass("selected")?--f[n]:++f[n])?delete w[n]:w[n]=!0,h.prop("disabled",o),c()}),u.click(function(){u.removeClass("project-config-indeterminate"),this.checked?y.not(".selected").each(function(){var e=s(this).find(".project-config-workflows-currently-assigned-name-text").text();--f[e],w[e]=!0}):y.filter(".selected").each(function(){var e=s(this).find(".project-config-workflows-currently-assigned-name-text").text();++f[e],delete w[e]}),y.toggleClass("selected",this.checked).find(":checkbox").prop("checked",this.checked),h.prop("disabled",!this.checked),c()}).mouseup(function(){this.indeterminate&&(this.checked=this.indeterminate=!1)})},submitHandler:function(i,o){i.preventDefault();var n=this,c=function(){o(),t(n)()},r=s(i.target).serializeObject();r.issueTypes&&!s.isArray(r.issueTypes)&&(r.issueTypes=[r.issueTypes]),r.default=!!r.default,e.draftScheme?e.callback(r,c):e.createDraft({success:function(){e.callback(r,c)}})}}).show()}});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:workflows-common', location = 'workflows/js/dialogs/DiscardDraft.js' */
define("jira-project-config/workflows/dialogs/discard-draft",["require"],function(i){"use strict";var r=i("jquery"),e=i("jira/dialog/form-dialog"),o=i("jira-project-config/workflows/scheme/dialogs/templates");return function(i){new e({id:"discard-draft-dialog",content:r(o.discardDraft()),submitHandler:function(r,e){r.preventDefault();var o=this,t=function(){e(),o.hide()};i?i(t):t()}}).show()}});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:workflows-common', location = 'workflows/js/dialogs/namespace.js' */
AJS.namespace("JIRA.AddWorkflowDialogView",null,require("jira-project-config/workflows/dialogs/add-workflow-dialog-view")),AJS.namespace("JIRA.AddWorkflowDialogWorkflowView",null,require("jira-project-config/workflows/dialogs/add-workflow-dialog-workflow-view")),AJS.namespace("JIRA.AssignIssueTypes",null,require("jira-project-config/workflows/dialogs/assign-issue-types")),AJS.namespace("JIRA.DiscardDraft",null,require("jira-project-config/workflows/dialogs/discard-draft"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:workflows-common', location = 'global/templates/common.soy' */
// This file was automatically generated from common.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Common.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Common == 'undefined') { JIRA.Templates.Common = {}; }


JIRA.Templates.Common.serverErrorDialog = function(opt_data, opt_ignored) {
  return '<h2 class="dialog-title">' + 'Error' + '</h2><div class="form-body"><div class="aui-message aui-message-error">' + opt_data.message + '</div></div><div class="buttons-container form-footer"><div class="buttons"><a href="#" class="aui-button aui-button-link cancel">' + 'Close' + '</a></div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.Common.serverErrorDialog.soyTemplateName = 'JIRA.Templates.Common.serverErrorDialog';
}


JIRA.Templates.Common.formatAnchor = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(opt_data.href) + '"' + ((opt_data.title) ? ' title="' + soy.$$escapeHtml(opt_data.title) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.body) + '</a>';
};
if (goog.DEBUG) {
  JIRA.Templates.Common.formatAnchor.soyTemplateName = 'JIRA.Templates.Common.formatAnchor';
}
;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:workflows-common', location = 'workflows/templates/common.soy' */
// This file was automatically generated from common.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Workflows.Common.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Workflows == 'undefined') { JIRA.Templates.Workflows = {}; }
if (typeof JIRA.Templates.Workflows.Common == 'undefined') { JIRA.Templates.Workflows.Common = {}; }


JIRA.Templates.Workflows.Common.issueConstant = function(opt_data, opt_ignored) {
  return '<img height="16" width="16" src="' + soy.$$escapeHtml(opt_data.constant.iconUrl) + '" title="' + soy.$$escapeHtml(opt_data.constant.name) + ((opt_data.constant.description) ? ' - ' + soy.$$escapeHtml(opt_data.constant.description) : '') + '" class="project-config-icon project-config-icon-issuetype"/><span class="project-config-issuetype-name" title="' + soy.$$escapeHtml(opt_data.constant.name) + ((opt_data.constant.description) ? ' - ' + soy.$$escapeHtml(opt_data.constant.description) : '') + '">' + ((opt_data.constant.url) ? '<a href="' + soy.$$escapeHtml(opt_data.constant.url) + '" title="' + soy.$$escapeHtml(opt_data.constant.name) + '">' : '') + soy.$$escapeHtml(opt_data.constant.name) + ((opt_data.constant.url) ? '</a>' : '') + '</span>';
};
if (goog.DEBUG) {
  JIRA.Templates.Workflows.Common.issueConstant.soyTemplateName = 'JIRA.Templates.Workflows.Common.issueConstant';
}


JIRA.Templates.Workflows.Common.text = function(opt_data, opt_ignored) {
  var output = '<h2>' + soy.$$escapeHtml(opt_data.displayName) + '</h2><div class="form-body"><table class="aui project-config-datatable"><thead><tr><th>' + soy.$$escapeHtml('From') + '</th><th>' + soy.$$escapeHtml('Transition') + '</th><th></th><th>' + soy.$$escapeHtml('To') + '</th></tr></thead><tbody>';
  var sourceList40 = opt_data.sources;
  var sourceListLen40 = sourceList40.length;
  for (var sourceIndex40 = 0; sourceIndex40 < sourceListLen40; sourceIndex40++) {
    var sourceData40 = sourceList40[sourceIndex40];
    var targetList41 = sourceData40.targets;
    var targetListLen41 = targetList41.length;
    if (targetListLen41 > 0) {
      for (var targetIndex41 = 0; targetIndex41 < targetListLen41; targetIndex41++) {
        var targetData41 = targetList41[targetIndex41];
        output += '<tr>' + ((targetIndex41 == 0) ? '<td rowspan="' + soy.$$escapeHtml(sourceData40.targets.length) + '">' + JIRA.Template.Util.Issue.Status.issueStatusResolver({issueStatus: sourceData40.fromStatus, isSubtle: false}) + '</td>' : '') + '<td><div><span class="project-config-transname">' + soy.$$escapeHtml(targetData41.transitionName) + '</span></div><div>' + ((targetData41.screen) ? '<span class="aui-icon icon-default aui-icon-small aui-iconfont-admin-jira-screens"></span> ' + ((opt_data.admin) ? '<a class="project-config-screen" href="' + soy.$$escapeHtml("") + '/secure/admin/ConfigureFieldScreen.jspa?id=' + soy.$$escapeHtml(targetData41.screen.id) + '">' + soy.$$escapeHtml(targetData41.screen.name) + '</a>' : '<span class="project-config-screen">' + soy.$$escapeHtml(targetData41.screen.name) + '</span>') : '<span class="project-config-workflow-no-screen">' + soy.$$escapeHtml('No Screen') + '</span>') + '</div></td><td>&rarr;</td><td>' + JIRA.Template.Util.Issue.Status.issueStatusResolver({issueStatus: targetData41.toStatus, isSubtle: true}) + '</td></tr>';
      }
    } else {
      output += '<tr><td>' + JIRA.Template.Util.Issue.Status.issueStatusResolver({issueStatus: sourceData40.fromStatus, isSubtle: false}) + '</td><td>' + soy.$$escapeHtml('There are no transitions out of this status') + '</td><td colspan="2"></td></tr>';
    }
  }
  output += '</tbody></table></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Workflows.Common.text.soyTemplateName = 'JIRA.Templates.Workflows.Common.text';
}


JIRA.Templates.Workflows.Common.serverErrorRefreshModalDialog = function(opt_data, opt_ignored) {
  return '<h2>' + 'Error' + '</h2><div class="form-body"><div class="aui-message aui-message-error">' + opt_data.message + '</div></div><div class="buttons-container form-footer"><div class="buttons"><a href="#" class="refresh cancel">' + 'Refresh' + '</a></div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.Workflows.Common.serverErrorRefreshModalDialog.soyTemplateName = 'JIRA.Templates.Workflows.Common.serverErrorRefreshModalDialog';
}
;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:workflows-common', location = 'workflows/js/common.js' */
define("jira-project-config/workflows/scheme/common",["jira/message","jira/dialog/form-dialog","jira/ajs/ajax/smart-ajax","jira/util/browser","jira/util/formatter","jira/libs/parse-uri","wrm/context-path","jquery"],function(e,r,o,n,a,t,i,s){"use strict";function c(e){history&&history.replaceState?history.replaceState(null,e,location.href.split("#")[0]):location.hash=""}var l={};return l.refreshErrorDialog=function(e){var o=new r({id:"server-error-dialog",content:function(r){r(JIRA.Templates.Workflows.Common.serverErrorRefreshModalDialog({message:e}))}});o.handleCancel=s.noop,o.show(),o.get$popupContent().find(".cancel.refresh").unbind().click(function(e){e.preventDefault(),n.reloadViaWindowLocation()})},l.errorDialog=function(e){new r({id:"server-error-dialog",content:function(r){r(JIRA.Templates.Common.serverErrorDialog({message:e}))}}).show()},l.smartAjaxErrorHandler=function(e){return function(r,n,a,t){var i;try{i=t.data&&JSON.parse(t.data)}catch(e){i=null}e(i&&i.errorMessages&&i.errorMessages.length?i.errorMessages.join(" "):o.buildSimpleErrorContent(t))}},l.showWorkflowTextView=function(e){new r({id:"workflow-text-view",widthClass:"large",content:function(r){o.makeRequest({url:i()+"/rest/projectconfig/latest/workflow",data:e,contentType:"application/json",success:function(e){r(JIRA.Templates.Workflows.Common.text(e))},error:l.smartAjaxErrorHandler(l.refreshErrorDialog)})}}).show()},l.checkMigrationSuccess=function(){"draftMigrationSuccess"===t(location).anchor&&(c("Workflow Page"),e.showSuccessMsg("Your workflows have been published."))},l.checkWorkflow=function(){var e=t(location).anchor;if(e&&0===e.indexOf("workflowName="))return c("Workflow Page"),decodeURIComponent(e.split("=")[1].replace(/\+/g," "))},l}),AJS.namespace("JIRA.Workflows.Scheme.Common",null,require("jira-project-config/workflows/scheme/common"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-workflows-edit', location = 'workflows/js/workflows-edit.js' */
require(["jira/util/formatter","jira/util/browser","jira/ajs/ajax/smart-ajax","jira/dialog/form-dialog","jira-project-config/utils","jira-project-config/workflows/scheme/common","jira-project-config/application","wrm/context-path","jquery"],function(e,t,o,r,a,i,n,s,c){"use strict";function l(t){var o=new r({id:"wait-migrate-dialog",content:function(e){e(JIRA.Templates.Workflows.EditDefault.defaultSchemeDialog())},submitHandler:function(e,r){e.preventDefault(),f(t,o),r()}});o.addHeading("Edit Workflow"),o.show()}function f(t,r){o.makeWebSudoRequest({url:g+"/rest/projectconfig/latest/workflow",type:"POST",data:a.getId(),contentType:"application/json"},{cancel:function(e){e.preventDefault()}}).done(function(o){var a=o.taskId,i=o.workflowName;a?(r.show(),r.handleCancel=function(){},c("#wait-migrate-dialog .buttons").css("visibility","hidden"),r.addHeading("Getting Ready to Edit"),c("#wait-migrate-dialog .form-body").html(JIRA.Templates.Workflows.EditDefault.defaultSchemeDialogProgress()),c("#progress-bar-container").progressBar(0,{height:"20px",showPercentage:!0}),u(a,t,i)):d(t,i)}).fail(i.smartAjaxErrorHandler(i.errorDialog))}function u(e,r,n){o.makeRequest({url:g+"/rest/projectconfig/latest/migrationStatus/"+e,type:"GET",contentType:"application/json",success:function(o){if(o.finished)if(c("#progress-bar-container").progressBar(100),!o.successful||o.numberOfFailedIssues>0){var i=c.param({projectId:a.getId(),taskId:e});t.reloadViaWindowLocation(g+"/secure/project/SelectProjectWorkflowSchemeStep3.jspa?"+i)}else p(e,function(){d(r,n)});else{var s=o.progress;c("#progress-bar-container").progressBar(s),setTimeout(function(){u(e,r,n)},1e3)}},error:function(t,r,a,n){p(e),i.errorDialog(o.buildSimpleErrorContent(n))}})}function p(e,t){o.makeRequest({url:g+"/rest/projectconfig/latest/migrationStatus/"+e,type:"DELETE",contentType:"application/json",complete:t})}function d(e,o){var r,i=parseInt(e.issueTypeId,10);r=e.href?e.href.replace(/wfName=[^&]*/,"wfName="+encodeURIComponent(o)):i?n.reqres.request("urls:issueTypes:editWorkflow",{project:a.getKey(),issueType:i}):n.reqres.request("urls:workflows:editWorkflow",{project:a.getKey(),workflow:o}),t.reloadViaWindowLocation(r)}var g=s();!function(e){e.on("click",".project-config-workflow-default a.project-config-workflow-edit",function(e){e.preventDefault(),l({href:c(this).attr("href")})}),e.on("click","#migrate_workflow",function(e){e.preventDefault(),l({issueTypeId:this.dataset.issueTypeId})})}(c(document))});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-workflows-edit', location = 'workflows/templates/workflows-edit.soy' */
// This file was automatically generated from workflows-edit.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Workflows.EditDefault.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Workflows == 'undefined') { JIRA.Templates.Workflows = {}; }
if (typeof JIRA.Templates.Workflows.EditDefault == 'undefined') { JIRA.Templates.Workflows.EditDefault = {}; }


JIRA.Templates.Workflows.EditDefault.defaultSchemeDialog = function(opt_data, opt_ignored) {
  return '<form class="aui"><div class="form-body"><h2>' + soy.$$escapeHtml('Edit Workflow') + '</h2><p>' + soy.$$escapeHtml('As you are editing your workflow for the first time, Jira needs to create a copy of the read-only system workflow. This may take a while depending on the number of issues in your project.') + '</p><p>' + soy.$$escapeHtml('Do you want to continue?') + '</p></div><div class="buttons-container form-footer"><div class="buttons"><input type="submit" class="aui-button" value="' + soy.$$escapeHtml('Continue') + '"/><a href="#" class="aui-button aui-button-link cancel" id="aui-dialog-close">' + soy.$$escapeHtml('Cancel') + '</a></div></div></form>';
};
if (goog.DEBUG) {
  JIRA.Templates.Workflows.EditDefault.defaultSchemeDialog.soyTemplateName = 'JIRA.Templates.Workflows.EditDefault.defaultSchemeDialog';
}


JIRA.Templates.Workflows.EditDefault.defaultSchemeDialogProgress = function(opt_data, opt_ignored) {
  return '<div class="aui-message aui-message-info">' + soy.$$escapeHtml('Jira is creating a copy of the read-only system workflow. This may take a while depending on the number of issues in your project.') + '</div><div id="progress-bar-container"></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.Workflows.EditDefault.defaultSchemeDialogProgress.soyTemplateName = 'JIRA.Templates.Workflows.EditDefault.defaultSchemeDialogProgress';
}
;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-summary-edit-workflow-discover', location = 'summary/discover/soy/discover.soy' */
// This file was automatically generated from discover.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.ProjectConfig.EditWorkflow.Discover.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.ProjectConfig == 'undefined') { JIRA.Templates.ProjectConfig = {}; }
if (typeof JIRA.Templates.ProjectConfig.EditWorkflow == 'undefined') { JIRA.Templates.ProjectConfig.EditWorkflow = {}; }
if (typeof JIRA.Templates.ProjectConfig.EditWorkflow.Discover == 'undefined') { JIRA.Templates.ProjectConfig.EditWorkflow.Discover = {}; }


JIRA.Templates.ProjectConfig.EditWorkflow.Discover.info = function(opt_data, opt_ignored) {
  var param4 = '';
  var url__soy5 = '' + JIRA.Templates.Links.helpLink(soy.$$augmentMap(opt_data.learnMoreUrl, {onlyOpeningTag: true}));
  var screensUrl__soy8 = '<a href="screens" class="screens-link">';
  var workflowsUrl__soy10 = '<a href="workflows" class="workflows-link">';
  param4 += soy.$$filterNoAutoescape(AJS.format('If your workflows or screens are only used by your project, you can now edit them to make sure they suit the way your team works. Go to {2}workflows{3} or {4}screens{5} to see how they\x27\x27re currently set up, and to make any changes you may want. Check out our {0}documentation{1} for more info, or talk to your Jira administrator.',url__soy5,'</a>',workflowsUrl__soy10,'</a>',screensUrl__soy8,'</a>'));
  var output = '' + JIRA.Templates.ProjectConfig.EditWorkflow.Discover.dialogContent({header: 'Edit your project\x27s workflows and screens', content: param4, image: 'workflow-intro-state.svg', type: 'general'});
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectConfig.EditWorkflow.Discover.info.soyTemplateName = 'JIRA.Templates.ProjectConfig.EditWorkflow.Discover.info';
}


JIRA.Templates.ProjectConfig.EditWorkflow.Discover.workflowInfo = function(opt_data, opt_ignored) {
  var param19 = '';
  var url__soy20 = '' + JIRA.Templates.Links.helpLink(soy.$$augmentMap(opt_data.learnMoreUrl, {onlyOpeningTag: true}));
  param19 += soy.$$filterNoAutoescape(AJS.format('Workflows are the paths your issues take from creation to completion. You can now edit the statuses and transitions of workflows that aren\x27\x27t shared with other projects. To do so, select a workflow and click Edit workflow. Check out our {0}workflow documentation{1} for more info.',url__soy20,'</a>'));
  var output = '' + JIRA.Templates.ProjectConfig.EditWorkflow.Discover.dialogContent({header: 'Edit your project\x27s workflow', content: param19, image: 'workflow-intro-state.svg', type: 'workflows'});
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectConfig.EditWorkflow.Discover.workflowInfo.soyTemplateName = 'JIRA.Templates.ProjectConfig.EditWorkflow.Discover.workflowInfo';
}


JIRA.Templates.ProjectConfig.EditWorkflow.Discover.screenInfo = function(opt_data, opt_ignored) {
  var param30 = '';
  var url__soy31 = '' + JIRA.Templates.Links.helpLink(soy.$$augmentMap(opt_data.learnMoreUrl, {onlyOpeningTag: true}));
  param30 += soy.$$filterNoAutoescape(AJS.format('Screens group together the fields that are visible on an issue type. You can change which fields are visible by editing the screen, providing the screen isn\x27\x27t shared with other projects. To do so, select a screen and start editing. Check out our {0}screens documentation{1} for more info.',url__soy31,'</a>'));
  var output = '' + JIRA.Templates.ProjectConfig.EditWorkflow.Discover.dialogContent({header: 'Edit your project\x27s screens', content: param30, image: 'screen-intro-state.svg', type: 'screens'});
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectConfig.EditWorkflow.Discover.screenInfo.soyTemplateName = 'JIRA.Templates.ProjectConfig.EditWorkflow.Discover.screenInfo';
}


JIRA.Templates.ProjectConfig.EditWorkflow.Discover.dialogContent = function(opt_data, opt_ignored) {
  return '<div class="project-admin-discover" data-discovery-type="' + soy.$$escapeHtml(opt_data.type) + '"><div class="discover-content"><div class="discover-graphics"><img height="94" width="100" src="' + soy.$$escapeHtml("") + '/download/resources/com.atlassian.jira.jira-project-config-plugin:project-config-summary-edit-workflow-discover/' + soy.$$escapeHtml(opt_data.image) + '"></div><div class="discover-text"><h6>' + soy.$$escapeHtml(opt_data.header) + '</h6><p>' + soy.$$filterNoAutoescape(opt_data.content) + '</p></div></div><div class="discover-close"><button class="aui-button aui-button-link" title="' + soy.$$escapeHtml('Close') + '"><span class="aui-icon aui-icon-small aui-iconfont-remove">' + soy.$$escapeHtml('Close') + '</span></button></div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectConfig.EditWorkflow.Discover.dialogContent.soyTemplateName = 'JIRA.Templates.ProjectConfig.EditWorkflow.Discover.dialogContent';
}
;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-summary-edit-workflow-discover', location = 'summary/discover/js/discover-controller.js' */
define("jira-project-config/summary/discover/discover-controller",["jira-project-config/summary/discover/discover-view","jira-project-config/marionette","wrm/context-path","jquery","jira/util/logger","jira/analytics"],function(e,i,o,r,n,t){"use strict";return i.Controller.extend({initialize:function(e){this.$el=e.$el},bindToView:function(){this.view=new e({el:this.$el}),this.listenTo(this.view,"close",this._close.bind(this)),this.listenTo(this.view,"learnMore",this._learnMore.bind(this))},_close:function(){this._markDialogShown().done(function(){n.trace("workflow.edit.summary.discover.dialog.preference.done")}),t.send({name:"jira.projectconfig.projectadmin.discover.close",data:{discoveryType:this.view.discoveryType()}})},_markDialogShown:function(){return r.ajax({url:o()+"/rest/api/2/mypreferences?key=jira.projectconfig.projectadmin.discover.dialog",type:"PUT",contentType:"application/json",dataType:"json",data:"seen"})},_learnMore:function(){t.send({name:"jira.projectconfig.projectadmin.discover.learn.more"})}})});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-summary-edit-workflow-discover', location = 'summary/discover/js/discover-view.js' */
define("jira-project-config/summary/discover/discover-view",["jira-project-config/marionette"],function(e){"use strict";return e.ItemView.extend({ui:{close:".discover-close button",learnMore:".help-lnk"},events:{"click @ui.close":"close","click @ui.learnMore":"learnMore"},template:JIRA.Templates.ProjectConfig.EditWorkflow.Discover.info,initialize:function(){this.$el.find(".discover-close button").tooltip()},close:function(e){e.preventDefault(),this.$el.hide(),this.trigger("close")},learnMore:function(){this.trigger("learnMore")},discoveryType:function(){return this.$el.data("discovery-type")}})});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-summary-edit-workflow-discover-init', location = 'summary/discover/js/discover.js' */
require(["jira-project-config/summary/discover/discover-controller","jquery","jira/skate"],function(e,r,i){"use strict";i("project-admin-discover",{type:i.type.CLASSNAME,attached:function(i){var t=r(i);new e({$el:t}).bindToView()}})});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-summary', location = 'summary/js/summary.js' */
define("jira-project-config/summary/init-summary",["jira/dialog/form-dialog","jquery","jira/analytics"],function(e,i,o){"use strict";function t(){var t=i("#project-config-email-change");1===t.length&&new e({id:"project-email-dialog",trigger:t}),new e({type:"ajax",id:"project-config-project-edit-lead-and-default-assignee-dialog",trigger:"#edit_project_lead,#edit_default_assignee",autoClose:!0,onSuccessfulSubmit:function(){}}),i(".project-config-workflow-edit").tooltip().mouseenter(function(){o.send({name:"jira.projectconfig.summary.workflowedit.link.hovered"})}).click(function(){o.send({name:"jira.projectconfig.summary.workflowedit.link.clicked"})})}return{init:t}});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:init-pcp-admin-project-type-resources', location = 'global/js/init-pcp-admin-conf.js' */
require(["jira-project-config/init-change-project-type-dialog","jira-project-config/init-project-type-warning-dialog","jira-project-config/summary/init-summary","jquery"],function(i,t,n,r){"use strict";r(function(){i.init(),t.init(),n.init()})});;
;
/* module-key = 'com.atlassian.gadgets.embedded:gadget-core-resources', location = 'js/rpc.js' */
var gadgets=gadgets||{};gadgets.rpc=function(){var CALLBACK_NAME="__cb";var DEFAULT_NAME="";var FE_G2C_CHANNEL="__g2c_rpc";var FE_C2G_CHANNEL="__c2g_rpc";var services={};var iframePool=[];var relayUrl={};var useLegacyProtocol={};var authToken={};var callId=0;var callbacks={};var setup={};var sameDomain={};var params={};if(gadgets.util){params=gadgets.util.getUrlParameters()}authToken[".."]=params.rpctoken||params.ifpctok||0;function getRelayChannel(){return typeof window.postMessage==="function"?"wpm":typeof document.postMessage==="function"?"dpm":navigator.product==="Gecko"?"fe":"ifpc"}function setupChannel(){if(relayChannel==="dpm"||relayChannel==="wpm"){window.addEventListener("message",function(packet){try{if(packet&&packet.origin&&packet.origin!=="null"&&typeof packet.data==="string"){if(packet.origin===location.origin){process(gadgets.json.parse(packet.data))}else{AJS.$.get(AJS.contextPath()+"/rest/whitelist/1/check",{url:packet.origin}).done(function(result){if(result&&result.inbound&&result.inbound===true){process(gadgets.json.parse(packet.data))}else{if(AJS.debug){AJS.log("RPC: request rejected (bad origin): "+(packet&&packet.origin?packet.origin:"undefined origin"))}}}).fail(function(jqXHR,textStatus,errorThrown){AJS.log("RPC: REST "+textStatus,errorThrown)})}}else{if(AJS.debug){AJS.log("RPC: request rejected (bad origin): "+(packet&&packet.origin?packet.origin:"undefined origin"))}}}catch(e){if(AJS.debug){var origin=packet&&packet.origin?packet.origin:"undefined origin";AJS.log("Error processing gadget rpc message from '"+origin+"': "+e)}}},false)}}var relayChannel=getRelayChannel();setupChannel();services[DEFAULT_NAME]=function(){throw new Error("Unknown RPC service: "+this.s)};services[CALLBACK_NAME]=function(callbackId,result){var callback=callbacks[callbackId];if(callback){delete callbacks[callbackId];callback(result)}};function setupFrame(frameId){if(setup[frameId]){return }if(relayChannel==="fe"){try{var frame=document.getElementById(frameId);frame[FE_G2C_CHANNEL]=function(args){process(gadgets.json.parse(args))}}catch(e){}}setup[frameId]=true}function encodeLegacyData(args){var stringify=gadgets.json.stringify;var argsEscaped=[];for(var i=0,j=args.length;i<j;++i){argsEscaped.push(encodeURIComponent(stringify(args[i])))}return argsEscaped.join("&")}function process(rpc){if(rpc&&typeof rpc.s==="string"&&typeof rpc.f==="string"&&rpc.a instanceof Array){if(authToken[rpc.f]){if(authToken[rpc.f]!=rpc.t){if(AJS.debug){console.log("Invalid auth token received for operation: "+rpc.s)}return }}if(rpc.c){rpc.callback=function(result){gadgets.rpc.call(rpc.f,CALLBACK_NAME,null,rpc.c,result)}}var result=(services[rpc.s]||services[DEFAULT_NAME]).apply(rpc,rpc.a);if(rpc.c&&typeof result!="undefined"){gadgets.rpc.call(rpc.f,CALLBACK_NAME,null,rpc.c,result)}}}function callFrameElement(targetId,serviceName,from,rpcData,callArgs){try{if(from!=".."){var fe=window.frameElement;if(typeof fe[FE_G2C_CHANNEL]==="function"){if(typeof fe[FE_G2C_CHANNEL][FE_C2G_CHANNEL]!=="function"){fe[FE_G2C_CHANNEL][FE_C2G_CHANNEL]=function(args){process(gadgets.json.parse(args))}}fe[FE_G2C_CHANNEL](rpcData);return }}else{var frame=document.getElementById(targetId);if(typeof frame[FE_G2C_CHANNEL]==="function"&&typeof frame[FE_G2C_CHANNEL][FE_C2G_CHANNEL]==="function"){frame[FE_G2C_CHANNEL][FE_C2G_CHANNEL](rpcData);return }}}catch(e){}callIfpc(targetId,serviceName,from,rpcData,callArgs)}function callIfpc(targetId,serviceName,from,rpcData,callArgs){var relay=gadgets.rpc.getRelayUrl(targetId);if(!relay){throw new Error("No relay file assigned for IFPC")}var src=null;if(useLegacyProtocol[targetId]){src=[relay,"#",encodeLegacyData([from,callId,1,0,encodeLegacyData([from,serviceName,"","",from].concat(callArgs))])].join("")}else{src=[relay,"#",targetId,"&",from,"@",callId,"&1&0&",encodeURIComponent(rpcData)].join("")}emitInvisibleIframe(src)}function emitInvisibleIframe(src){var iframe;for(var i=iframePool.length-1;i>=0;--i){var ifr=iframePool[i];try{if(ifr&&(ifr.recyclable||ifr.readyState==="complete")){ifr.parentNode.removeChild(ifr);if(window.ActiveXObject){iframePool[i]=ifr=null;iframePool.splice(i,1)}else{ifr.recyclable=false;iframe=ifr;break}}}catch(e){}}if(!iframe){iframe=document.createElement("iframe");iframe.style.border=iframe.style.width=iframe.style.height="0px";iframe.style.visibility="hidden";iframe.style.position="absolute";iframe.onload=function(){this.recyclable=true};iframePool.push(iframe)}iframe.src=src;setTimeout(function(){document.body.appendChild(iframe)},0)}function callSameDomain(target,rpc){if(typeof sameDomain[target]==="undefined"){sameDomain[target]=false;var targetEl=null;if(target===".."){targetEl=parent}else{targetEl=frames[target]}try{sameDomain[target]=targetEl.gadgets.rpc.receiveSameDomain}catch(e){}}if(typeof sameDomain[target]==="function"){sameDomain[target](rpc);return true}return false}if(gadgets.config){function init(config){if(config.rpc.parentRelayUrl.substring(0,7)==="http://"){relayUrl[".."]=config.rpc.parentRelayUrl}else{var params=document.location.search.substring(0).split("&");var parentParam="";for(var i=0,param;param=params[i];++i){if(param.indexOf("parent=")===0){parentParam=decodeURIComponent(param.substring(7));break}}relayUrl[".."]=parentParam+config.rpc.parentRelayUrl}useLegacyProtocol[".."]=!!config.rpc.useLegacyProtocol}var requiredConfig={parentRelayUrl:gadgets.config.NonEmptyStringValidator};gadgets.config.register("rpc",requiredConfig,init)}return{register:function(serviceName,handler){if(serviceName==CALLBACK_NAME){throw new Error("Cannot overwrite callback service")}if(serviceName==DEFAULT_NAME){throw new Error("Cannot overwrite default service:"+" use registerDefault")}services[serviceName]=handler},unregister:function(serviceName){if(serviceName==CALLBACK_NAME){throw new Error("Cannot delete callback service")}if(serviceName==DEFAULT_NAME){throw new Error("Cannot delete default service:"+" use unregisterDefault")}delete services[serviceName]},registerDefault:function(handler){services[""]=handler},unregisterDefault:function(){delete services[""]},call:function(targetId,serviceName,callback,var_args){++callId;targetId=targetId||"..";if(callback){callbacks[callId]=callback}var from="..";if(targetId===".."){from=window.name}var rpc={s:serviceName,f:from,c:callback?callId:0,a:Array.prototype.slice.call(arguments,3),t:authToken[targetId]};if(callSameDomain(targetId,rpc)){return }var rpcData=gadgets.json.stringify(rpc);var channelType=relayChannel;if(useLegacyProtocol[targetId]){channelType="ifpc"}switch(channelType){case"dpm":var targetDoc=targetId===".."?parent.document:frames[targetId].document;targetDoc.postMessage(rpcData);break;case"wpm":var targetWin=targetId===".."?parent:frames[targetId];targetWin.postMessage(rpcData,relayUrl[targetId]);break;case"fe":callFrameElement(targetId,serviceName,from,rpcData,rpc.a);break;default:callIfpc(targetId,serviceName,from,rpcData,rpc.a);break}},getRelayUrl:function(targetId){return relayUrl[targetId]},setRelayUrl:function(targetId,url,opt_useLegacy){relayUrl[targetId]=url;useLegacyProtocol[targetId]=!!opt_useLegacy},setAuthToken:function(targetId,token){authToken[targetId]=token;setupFrame(targetId)},getRelayChannel:function(){return relayChannel},receive:function(fragment){if(fragment.length>4){process(gadgets.json.parse(decodeURIComponent(fragment[fragment.length-1])))}},receiveSameDomain:function(rpc){rpc.a=Array.prototype.slice.call(rpc.a);window.setTimeout(function(){process(rpc)},0)}}}();;
;
/* module-key = 'com.atlassian.gadgets.embedded:gadget-core-resources', location = 'js/util.js' */
Function.prototype.inherits=function(parentCtor){function tempCtor(){}tempCtor.prototype=parentCtor.prototype;this.superClass_=parentCtor.prototype;this.prototype=new tempCtor();this.prototype.constructor=this};;
;
/* module-key = 'com.atlassian.gadgets.embedded:gadget-core-resources', location = 'js/json.js' */
var gadgets=gadgets||{};gadgets.json=function(){function f(n){return n<10?"0"+n:n}Date.prototype.toJSON=function(){return[this.getUTCFullYear(),"-",f(this.getUTCMonth()+1),"-",f(this.getUTCDate()),"T",f(this.getUTCHours()),":",f(this.getUTCMinutes()),":",f(this.getUTCSeconds()),"Z"].join("")};var m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function stringify(value){var a,i,k,l,r=/["\\\x00-\x1f\x7f-\x9f]/g,v;switch(typeof value){case"string":return r.test(value)?'"'+value.replace(r,function(a){var c=m[a];if(c){return c}c=a.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"':'"'+value+'"';case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}a=[];if(typeof value.length==="number"&&!(value.propertyIsEnumerable("length"))){l=value.length;for(i=0;i<l;i+=1){a.push(stringify(value[i])||"null")}return"["+a.join(",")+"]"}for(k in value){if(value.hasOwnProperty(k)){if(typeof k==="string"){v=stringify(value[k]);if(v){a.push(stringify(k)+":"+v)}}}}return"{"+a.join(",")+"}"}}return{stringify:stringify,parse:function(text){if(/^[\],:{}\s]*$/.test(text.replace(/\\["\\\/b-u]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){return eval("("+text+")")}return false}}}();;
;
/* module-key = 'com.atlassian.gadgets.embedded:gadget-core-resources', location = 'js/gadgets-core.js' */
var gadgets=gadgets||{};gadgets.error={};gadgets.error.SUBCLASS_RESPONSIBILITY="subclass responsibility";gadgets.error.TO_BE_DONE="to be done";gadgets.log=function(message){if(window.console&&console.log){console.log(message)}else{var logEntry=document.createElement("div");logEntry.className="gadgets-log-entry";logEntry.innerHTML=message;document.body.appendChild(logEntry)}};gadgets.Extensible=function(){};gadgets.Extensible.prototype.setDependencies=function(dependencies){for(var p in dependencies){this[p]=dependencies[p]}};gadgets.Extensible.prototype.getDependencies=function(name){return this[name]};gadgets.UserPrefStore=function(){};gadgets.UserPrefStore.prototype.getPrefs=function(gadget){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.UserPrefStore.prototype.savePrefs=function(gadget){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.DefaultUserPrefStore=function(){gadgets.UserPrefStore.call(this)};gadgets.DefaultUserPrefStore.inherits(gadgets.UserPrefStore);gadgets.DefaultUserPrefStore.prototype.getPrefs=function(gadget){};gadgets.DefaultUserPrefStore.prototype.savePrefs=function(gadget){};gadgets.GadgetService=function(){};gadgets.GadgetService.prototype.setHeight=function(elementId,height){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.GadgetService.prototype.setTitle=function(gadget,title){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.GadgetService.prototype.setUserPref=function(id){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.IfrGadgetService=function(){gadgets.GadgetService.call(this);var service=this;gadgets.rpc.register("resize_iframe",function(){service.setHeight.apply(this,arguments)});gadgets.rpc.register("set_pref",function(){service.setUserPref.apply(this,arguments)});gadgets.rpc.register("set_title",function(){service.setTitle.apply(this,arguments)});gadgets.rpc.register("requestNavigateTo",function(){service.requestNavigateTo.apply(this,arguments)})};gadgets.IfrGadgetService.inherits(gadgets.GadgetService);gadgets.IfrGadgetService.prototype.setHeight=function(height){if(height>gadgets.container.maxheight_){height=gadgets.container.maxheight_}var element=document.getElementById(this.f);if(element){element.style.height=height+"px"}};gadgets.IfrGadgetService.prototype.requestNavigateTo=function(view,opt_params){var id=this.getGadgetIdFromModuleId(this.f);var url=this.getUrlForView(view);if(opt_params){var paramStr=JSON.stringify(opt_params);if(paramStr.length>0){url+="&appParams="+encodeURIComponent(paramStr)}}if(url&&document.location.href.indexOf(url)==-1){document.location.href=url}};gadgets.IfrGadgetService.prototype.getUrlForView=function(view){if(view==="canvas"){return"/canvas"}else{if(view==="profile"){return"/profile"}else{return null}}};gadgets.IfrGadgetService.prototype.getGadgetIdFromModuleId=function(moduleId){return parseInt(moduleId.match(/_([0-9]+)$/)[1],10)};gadgets.LayoutManager=function(){};gadgets.LayoutManager.prototype.getGadgetChrome=function(gadget){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.StaticLayoutManager=function(){gadgets.LayoutManager.call(this)};gadgets.StaticLayoutManager.inherits(gadgets.LayoutManager);gadgets.StaticLayoutManager.prototype.setGadgetChromeIds=function(gadgetChromeIds){this.gadgetChromeIds_=gadgetChromeIds};gadgets.StaticLayoutManager.prototype.getGadgetChrome=function(gadget){var chromeId=this.gadgetChromeIds_[gadget.id];return chromeId?document.getElementById(chromeId):null};gadgets.FloatLeftLayoutManager=function(layoutRootId){gadgets.LayoutManager.call(this);this.layoutRootId_=layoutRootId};gadgets.FloatLeftLayoutManager.inherits(gadgets.LayoutManager);gadgets.FloatLeftLayoutManager.prototype.getGadgetChrome=function(gadget){var layoutRoot=document.getElementById(this.layoutRootId_);if(layoutRoot){var chrome=document.createElement("div");chrome.className="gadgets-gadget-chrome";chrome.style.cssFloat="left";layoutRoot.appendChild(chrome);return chrome}else{return null}};;
;
/* module-key = 'com.atlassian.gadgets.embedded:gadget-container-resources', location = 'js/gadgets-container.js' */
gadgets.Container=function(){this.parentUrl_="http://"+document.location.host;this.country_="ALL";this.language_="ALL";this.view_="default";this.nocache_=1;this.maxheight_=2147483647};gadgets.Container.inherits(gadgets.Extensible);gadgets.Container.prototype.userPrefStore=new gadgets.DefaultUserPrefStore();gadgets.Container.prototype.gadgetService=new gadgets.GadgetService();gadgets.Container.prototype.layoutManager=new gadgets.StaticLayoutManager();gadgets.Container.prototype.setParentUrl=function(url){this.parentUrl_=url};gadgets.Container.prototype.setCountry=function(country){this.country_=country};gadgets.Container.prototype.setNoCache=function(nocache){this.nocache_=nocache};gadgets.Container.prototype.setLanguage=function(language){this.language_=language};gadgets.Container.prototype.setView=function(view){this.view_=view};gadgets.Container.prototype.setMaxHeight=function(maxheight){this.maxheight_=maxheight};gadgets.Container.prototype.getGadgetKey_=function(instanceId){return"gadget_"+instanceId};gadgets.IfrContainer=function(){gadgets.Container.call(this)};gadgets.IfrContainer.inherits(gadgets.Container);gadgets.IfrContainer.prototype.gadgetService=new gadgets.IfrGadgetService();gadgets.IfrContainer.prototype.setParentUrl=function(url){if(!url.match(/^http[s]?:\/\//)){url=document.location.href.match(/^[^?#]+\//)[0]+url}this.parentUrl_=url};gadgets.container=new gadgets.IfrContainer();;
;
/* module-key = 'com.atlassian.gadgets.embedded:gadget-standalone-resources', location = 'js/gadgets-standalone.js' */
new gadgets.IfrGadgetService();gadgets.IfrGadgetService.prototype.setTitle=function(title){};;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:data', location = 'data/web-resource-manager.js' */
define("jira/projects/data/WRM",window.WRM);;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:projects-api', location = 'page/projects-api.js' */
define("jira/api/projects",["wrm/data"],function(d){var a=d.claim("project-key");var c=d.claim("project-id");var b=d.claim("project-name");var e=d.claim("project-type");return{getCurrentProjectId:function(){return c},getCurrentProjectKey:function(){return a},getCurrentProjectName:function(){return b},getCurrentProjectType:function(){return e}}});AJS.namespace("JIRA.API.Projects",null,require("jira/api/projects"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:project-page', location = '/sidebar/navigation/items.js' */
require(["jquery"],function(a){a(document).on("click",'.aui-nav > [aria-expanded] > a.aui-nav-item[href="#"]',function(b){b.preventDefault();AJS.navigation(a(this).siblings(".aui-nav")).toggle()})});;
;
/* module-key = 'com.atlassian.auiplugin:split_aui.splitchunk.036a05e5ff', location = 'aui.chunk.fe2aa6b961c51bfa53ae--2f924c293d2003883ef7.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.splitchunk.036a05e5ff"],{"C/C5":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NavigationEl=void 0;var i=o(a("HH5i")),n=o(a("+x/D")),r=o(a("4dFR")),l=o(a("KloK")),s=o(a("6RZY"));function o(e){return e&&e.__esModule?e:{default:e}}function u(e){if(this.$el=(0,n.default)(e).closest(".aui-nav"),this.$el.length>1)return this.$el.map(function(e,t){return new u(t)})[0];if(this.$el.data("aui-navigation"))return this.$el.data("aui-navigation");this.$el.data("aui-navigation",this),this.$treeParent=this.$el.parent("li[aria-expanded]"),this.$subtreeToggleIcon=this.$treeParent.children(".aui-nav-subtree-toggle").children("span.aui-icon"),this.hideMoreItems(),this.$el.children("li:has(.aui-nav-selected)").addClass("aui-nav-child-selected");var t=this.$el.children(".aui-nav-selected");return t.parents(".aui-nav > [aria-expanded=false]").add(t.filter("[aria-expanded=false]")).each(function(){d((0,n.default)(this).children(".aui-nav")).expand()}),this.$el.find("> li[aria-expanded] > .aui-nav-subtree-toggle").on("click",function(){d((0,n.default)(this).siblings(".aui-nav")).toggle()}),this}u.prototype.isNested=function(){return 1===this.$treeParent.length},u.prototype.isCollapsed=function(){return"false"===this.$treeParent.attr("aria-expanded")},u.prototype.expand=function(){return this.$treeParent.attr("aria-expanded","true"),this.$subtreeToggleIcon.removeClass("aui-iconfont-collapsed").addClass("aui-iconfont-expanded"),this.hideMoreItems(),this},u.prototype.collapse=function(){return this.$treeParent.attr("aria-expanded","false"),this.$subtreeToggleIcon.removeClass("aui-iconfont-expanded").addClass("aui-iconfont-collapsed"),this},u.prototype.toggle=function(){return this.isCollapsed()?this.expand():this.collapse(),this},u.prototype.hideMoreItems=function(){if(this.$el.is(".aui-nav:not([aria-expanded=false]) [data-more]")){var e=this.$el.attr("data-more")||i.default.getText("aui.words.moreitem"),t=Math.abs(parseInt(this.$el.attr("data-more-limit")))||5,a=this.$el.children("li"),r=a.length<=t+1,l=a.filter(".aui-nav-selected").length,s=a.filter(".aui-nav-more").length;if(r||l||s)return this;(0,n.default)("<li>",{class:"aui-nav-more","aria-hidden":"true"}).append((0,n.default)("<a>",{href:"#",class:"aui-nav-item",text:e,click:function(e){e.preventDefault(),(0,n.default)(this).parent().remove()}})).insertAfter(a.eq(t-1))}return this};var d=(0,s.default)("navigation",u),h=(0,r.default)("aui-nav",{type:r.default.type.CLASSNAME,attached:function(e){new u(e)},detached:function(e){(0,n.default)(e).removeData()}});(0,l.default)("navigation",d),t.default=d,t.NavigationEl=h},"eC/R":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NavigationEl=t.navigation=void 0;var i=a("C/C5");Object.defineProperty(t,"navigation",{enumerable:!0,get:function(){return function(e){return e&&e.__esModule?e:{default:e}}(i).default}}),Object.defineProperty(t,"NavigationEl",{enumerable:!0,get:function(){return i.NavigationEl}}),a("pDZt")}}]);
//# sourceMappingURL=aui.chunk.fe2aa6b961c51bfa53ae--2f924c293d2003883ef7.js.map;
;
/* module-key = 'com.atlassian.auiplugin:split_aui.component.sidebar', location = 'aui.chunk.a65d5726565718a22f35--c25e0339349d11fbb852.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.component.sidebar"],{"5njU":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(i("+x/D"));function n(e){return e&&e.__esModule?e:{default:e}}function a(e){return(0,o.default)(e).clone().removeAttr("id")}(0,n(i("KloK")).default)("clone",a),t.default=a,e.exports=t.default},"6wVx":function(e,t,i){},Wzva:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=g(i("+x/D"));i("XphB"),i("C/C5");var n=g(i("HH5i")),a=g(i("5njU")),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(i("bPPT")),r=g(i("KloK")),u=g(i("h2ur")),l=g(i("kV0L")),d=g(i("+ay7")),p=g(i("XxUV")),c=g(i("4dFR")),f=g(i("OEua")),h=g(i("6RZY")),v=g(i("mMNQ"));function g(e){return e&&e.__esModule?e:{default:e}}function b(e){return e.offset().top}function m(e){this.$el=(0,o.default)(e),this.$el.length&&(this.$body=(0,o.default)("body"),this.$wrapper=this.$el.children(".aui-sidebar-wrapper"),this.$body.addClass("aui-page-sidebar"),this._previousScrollTop=null,this._previousViewportHeight=null,this._previousViewportWidth=null,this._previousOffsetTop=null,this.submenus=new _,function(e){if(!(0,o.default)(".aui-sidebar").length)return;(function(e){e.$el.on("mouseenter mouseleave click focus",e.collapsedTriggersSelector,function(t){var i=(0,o.default)(t.target);T(e,i)})})(e),u.default&&(0,p.default)("only screen and (max-device-width:1024px)")&&(0,o.default)("body").addClass("aui-page-sidebar-touch");var t=null,i=function(){null===t&&(t=requestAnimationFrame(function(){e.reflow(),t=null}))};(0,o.default)(window).on("scroll resize",i),i(),e.isAnimated()&&e.$el.on("transitionend webkitTransitionEnd",function(){e.$el.trigger(o.default.Event(y+(e.isCollapsed()?"collapse-end":"expand-end")))});e.$el.on("click",".aui-sidebar-toggle",function(t){t.preventDefault(),e.toggle()}),(0,o.default)(".aui-page-panel").on("click",function(){!e.isCollapsed()&&e.isViewportNarrow()&&e.collapse()});var a=function(t){(function(e){return!(e.which!==d.default.LEFT_SQUARE_BRACKET||e.shiftKey||e.ctrlKey||e.metaKey||(0,l.default)(e.target))})(t)&&e.toggle()};function s(e){return e.keyCode===d.default.TAB&&!e.shiftKey&&!e.altKey}(0,o.default)(document).on("keypress",a),e._remove=function(){this._removeAllTooltips(),(0,o.default)(this.inlineDialogSelector).remove(),this.$el.off(),this.$el.remove(),(0,o.default)(document).off("keypress",a),(0,o.default)(window).off("scroll resize",i)},e.$el.on("touchend",function(t){e.isCollapsed()&&(e.expand(),t.preventDefault())}),e.$el.on("mouseenter focus",e.collapsedTriggersSelector,function(){if(e.isCollapsed()){var t=(0,o.default)(this);$(t)||D(t)}}),e.$el.on("click blur mouseleave",e.collapsedTriggersSelector,function(){e.isCollapsed()&&P((0,o.default)(this))}),e.$el.on("mouseenter focus",e.toggleSelector,function(){var t=(0,o.default)(this);e.isCollapsed()?t.data("tooltip",n.default.getText("aui.sidebar.expand.tooltip")):t.data("tooltip",n.default.getText("aui.sidebar.collapse.tooltip")),D(t)}),e.$el.on("click blur mouseleave",e.toggleSelector,function(){P((0,o.default)(this))}),e.$el.on("keydown",e.collapsedTriggersSelector,function(t){if(e.isCollapsed()){var i=t.target,n=x(i);if(!n)return;var a=(0,o.default)(n);s(t)&&n.open&&(t.preventDefault(),function(e){e.attr("persistent",""),e.find(":aui-tabbable").first().focus(),setTimeout(function(){e.removeAttr("persistent")},100)}(a),a.on("keydown",function(e){((function(e){return e.keyCode===d.default.TAB&&e.shiftKey})(e)&&function(e,t){return e===t.find(":aui-tabbable")[0]}(e.target,a)||s(e)&&function(e,t){return e===t.find(":aui-tabbable").last()[0]}(e.target,a))&&(i.focus(),(0,o.default)(this).off("keydown"),S())}))}})}(this),function(e){(0,o.default)(e.collapsedTriggersSelector).each(function(){var t=(0,o.default)(this);T(e,t)})}(this))}var y="_aui-internal-sidebar-";function w(e){return o.default.map(e.split(" "),function(e){return y+e}).join(" ")}function k(){return document.querySelectorAll(m.prototype.inlineDialogSelector)}function _(){this.inlineDialog=null}function C(e){return e.is("a")?e.next(".aui-nav"):e.children(".aui-nav, hr")}function x(e){var t=e.getAttribute("aria-controls");return document.getElementById(t)}function $(e){return 0!==C(e).length}function S(){var e=k();Array.prototype.forEach.call(e,function(e){e.open=!1})}function T(e,t){if(!t.data("_aui-sidebar-submenu-constructed")&&(t.data("_aui-sidebar-submenu-constructed",!0),$(t))){var i=document.createElement("aui-inline-dialog"),n=(0,f.default)("sidebar-submenu");return t.attr("aria-controls",n),t.attr("data-aui-trigger",""),c.default.init(t),i.setAttribute("id",n),i.setAttribute("alignment","right top"),i.setAttribute("aria-hidden","true"),i.setAttribute("contained-by","viewport"),e.isCollapsed()&&i.setAttribute("responds-to","hover"),(0,o.default)(i).addClass(m.prototype.inlineDialogClass),document.body.appendChild(i),c.default.init(i),function(e,t,i){i.addEventListener("aui-layer-show",function(n){if(e.isCollapsed()){if(!function(e){return"AUI-INLINE-DIALOG"!==e.target.tagName}(n)&&!function(e){return!e.target.classList.contains("aui-sidebar-submenu-dialog")}(n)){var s=o.default.Event("aui-sidebar-submenu-before-show");t.trigger(s,i),s.isDefaultPrevented()?n.preventDefault():function(e,t){e.addClass("active"),t.innerHTML=V;var i=e.is("a")?e.text():e.children(".aui-nav-heading").text(),n=(0,o.default)(t).find(".aui-navgroup-inner");n.children(".aui-nav-heading").attr("title",i).children("strong").text(i),function(e){var t=(0,a.default)(e);(0,v.default)(t,f.default),t.hasClass("aui-expander-content")&&(t.find(".aui-expander-cutoff").remove(),t.removeClass("aui-expander-content"));return t}(C(e)).appendTo(n)}(t,i)}}else n.preventDefault()}),i.addEventListener("aui-layer-hide",function(){!function(e){e.removeClass("active")}(t)})}(e,t,i),i}}m.prototype.on=function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1),i=w(e);return this.$el.on.apply(this.$el,[i].concat(t)),this},m.prototype.off=function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1),i=w(e);return this.$el.off.apply(this.$el,[i].concat(t)),this},m.prototype.setHeight=function(e,t,i){var o=Math.max(0,i-e);return this.$wrapper.height(t-o),this},m.prototype.setTopPosition=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.pageYOffset;return this.$wrapper.toggleClass("aui-is-docked",e>b(this.$el)),this},m.prototype.setPosition=s.fn(m.prototype.setTopPosition,"Sidebar.setPosition",{removeInVersion:"9.0.0",sinceVersion:"7.6.1",alternativeName:"Sidebar.setTopPosition"}),m.prototype.setLeftPosition=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.pageXOffset;return this.$wrapper.hasClass("aui-is-docked")&&this.$wrapper.css({left:-e}),this},m.prototype.setCollapsedState=function(e){var t={collapsed:{},expanded:{}};t.collapsed.narrow={narrow:o.default.noop,wide:function(t){t._expand(e,!0)}},t.collapsed.wide={narrow:o.default.noop,wide:o.default.noop},t.expanded.narrow={narrow:o.default.noop,wide:function(e){e.$body.removeClass("aui-sidebar-collapsed"),e.$el.removeClass("aui-sidebar-fly-out")}},t.expanded.wide={narrow:function(e){e._collapse(!0)},wide:o.default.noop};var i=this.isCollapsed()?"collapsed":"expanded",n=this.isViewportNarrow(this._previousViewportWidth)?"narrow":"wide",a=this.isViewportNarrow(e)?"narrow":"wide";return t[i][n][a](this),this},m.prototype._collapse=function(e){if(this.isCollapsed())return this;var t=o.default.Event(y+"collapse-start",{isResponsive:e});return this.$el.trigger(t),t.isDefaultPrevented()?this:(this.$body.addClass("aui-sidebar-collapsed"),this.$el.attr("aria-expanded","false"),this.$el.removeClass("aui-sidebar-fly-out"),this.$el.find(this.submenuTriggersSelector).attr("tabindex",0),(0,o.default)(this.inlineDialogSelector).attr("responds-to","hover"),this.isAnimated()||this.$el.trigger(o.default.Event(y+"collapse-end",{isResponsive:e})),this)},m.prototype.collapse=function(){return this._collapse(!1)},m.prototype._expand=function(e,t){var i=o.default.Event(y+"expand-start",{isResponsive:t});if(this.$el.trigger(i),i.isDefaultPrevented())return this;var n=this.isViewportNarrow(e);return this.$el.attr("aria-expanded","true"),this.$body.toggleClass("aui-sidebar-collapsed",n),this.$el.toggleClass("aui-sidebar-fly-out",n),this.$el.find(this.submenuTriggersSelector).removeAttr("tabindex"),(0,o.default)(this.inlineDialogSelector).removeAttr("responds-to"),this.isAnimated()||this.$el.trigger(o.default.Event(y+"expand-end",{isResponsive:t})),this},m.prototype.expand=function(){return this.isCollapsed()&&this._expand(this._previousViewportWidth,!1),this},m.prototype.isAnimated=function(){return this.$el.hasClass("aui-is-animated")},m.prototype.isCollapsed=function(){return"false"===this.$el.attr("aria-expanded")},m.prototype.isViewportNarrow=function(e){return(e=void 0===e?this._previousViewportWidth:e)<1240},m.prototype._removeAllTooltips=function(){(0,o.default)(this.tooltipSelector).remove()},m.prototype.responsiveReflow=function(e,t){if(e){if(!this.isCollapsed()&&this.isViewportNarrow(t)){var i=this.isAnimated();i&&this.$el.removeClass("aui-is-animated"),this.collapse(),i&&(this.$el[0].offsetHeight,this.$el.addClass("aui-is-animated"))}}else t!==this._previousViewportWidth&&this.setCollapsedState(t)},m.prototype.reflow=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.pageYOffset,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.documentElement.clientHeight,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window.innerWidth,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:document.documentElement.scrollHeight,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:window.pageXOffset,a=b(this.$el),s=null===this._previousViewportWidth;if(e!==this._previousScrollTop||t!==this._previousViewportHeight||a!==this._previousOffsetTop){this.isCollapsed()&&!s&&e!==this._previousScrollTop&&this._removeAllTooltips();var r=this.$body.hasClass("aui-page-sidebar-touch"),u=e!==this._previousScrollTop&&(e<0||e+t>o);r||!s&&u||(this.setHeight(e,t,a),this.setTopPosition(e))}if(n!==this._previousScrollLeft&&this.setLeftPosition(n),"false"!==this.$el.attr("data-aui-responsive"))this.responsiveReflow(s,i);else{var l=!this.isCollapsed()&&this.isViewportNarrow(i);this.$el.toggleClass("aui-sidebar-fly-out",l)}return this._previousScrollTop=e,this._previousViewportHeight=t,this._previousViewportWidth=i,this._previousOffsetTop=a,this._previousScrollLeft=n,this},m.prototype.toggle=function(){return this.isCollapsed()?(this.expand(),this._removeAllTooltips()):this.collapse(),this},m.prototype.submenuTriggersSelector=".aui-sidebar-group:not(.aui-sidebar-group-tier-one)",m.prototype.collapsedTriggersSelector=[m.prototype.submenuTriggersSelector,".aui-sidebar-group.aui-sidebar-group-tier-one > .aui-nav > li > a",".aui-sidebar-footer > .aui-sidebar-settings-button"].join(", "),m.prototype.toggleSelector=".aui-sidebar-footer > .aui-sidebar-toggle",m.prototype.tooltipSelector=".aui-sidebar-section-tooltip",m.prototype.inlineDialogClass="aui-sidebar-submenu-dialog",m.prototype.inlineDialogSelector="."+m.prototype.inlineDialogClass,_.prototype.submenu=function(e){return M(),C(e)},_.prototype.hasSubmenu=function(e){return M(),$(e)},_.prototype.submenuHeadingHeight=function(){return M(),34},_.prototype.isShowing=function(){return M(),m.prototype.isSubmenuVisible()},_.prototype.show=function(e,t){M(),function(e){x(e).open=!0}(t)},_.prototype.hide=function(){M(),S()},_.prototype.inlineDialogShowHandler=function(){M()},_.prototype.inlineDialogHideHandler=function(){M()},_.prototype.moveSubmenuToInlineDialog=function(){M()},_.prototype.restoreSubmenu=function(){M()},m.prototype.getVisibleSubmenus=function(){return Array.prototype.filter.call(k(),function(e){return e.open})},m.prototype.isSubmenuVisible=function(){return this.getVisibleSubmenus().length>0};var V='<div class="aui-inline-dialog-contents"><div class="aui-sidebar-submenu" ><div class="aui-navgroup aui-navgroup-vertical"><div class="aui-navgroup-inner"><div class="aui-nav-heading"><strong></strong></div></div></div></div></div>';var A={trigger:"manual",gravity:"w",className:"aui-sidebar-section-tooltip",title:function(){var e=(0,o.default)(this);return e.is("a")?e.attr("title")||e.find(".aui-nav-item-label").text()||e.data("tooltip"):e.children(".aui-nav").attr("title")||e.children(".aui-nav-heading").text()}};function D(e){e.tooltip(A).tooltip("show");var t=e.data("tipsy")&&e.data("tipsy").$tip;t&&t.css({opacity:""}).addClass("tooltip-shown")}function P(e){var t=e.data("tipsy")&&e.data("tipsy").$tip;if(t){var i=t.css("transition-duration");if(i){var o=i.indexOf("ms")>=0?parseInt(i.substring(0,i.length-2),10):1e3*parseInt(i.substring(0,i.length-1),10);setTimeout(function(){t.hasClass("tooltip-shown")&&(e.tooltip("hide"),t.removeClass("tooltip-shown"))},o)}else t.removeClass("tooltip-shown")}}var E=(0,h.default)("sidebar",m);(0,o.default)(function(){E(".aui-sidebar")});var M=s.getMessageLogger("Sidebar.submenus",{removeInVersion:"9.0.0",sinceVersion:"5.8.0"});(0,r.default)("sidebar",E),t.default=E,e.exports=t.default},XxUV:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(window.matchMedia)return window.matchMedia(e).matches;var t=document.createElement("style");t.type="text/css",t.id="testMedia",t.innerText="@media "+e+" { #testMedia { width: 1px; } }",document.head.appendChild(t);var i="1px"===window.getComputedStyle(t,null).width;return t.parentNode.removeChild(t),i},e.exports=t.default},h2ur:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=window.DocumentTouch,n="ontouchstart"in window||o&&document instanceof o;t.default=n,e.exports=t.default},kV0L:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return"value"in e||e.isContentEditable},e.exports=t.default},mMNQ:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var i=(0,o.default)("<div></div>");i.append(e),i.find("[id]").each(function(e,o){var a=t(o.id+"-");!function(e,t,i){n(e,t,i,"aria-controls"),n(e,t,i,"aria-owns")}(i,o.id,a),o.id=a})};var o=function(e){return e&&e.__esModule?e:{default:e}}(i("+x/D"));function n(e,t,i,o){e.find("["+o+"]").attr(o,function(e,o){return t===o?i:void 0})}e.exports=t.default},pju7:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sidebar=void 0;var o=i("Wzva");Object.defineProperty(t,"sidebar",{enumerable:!0,get:function(){return function(e){return e&&e.__esModule?e:{default:e}}(o).default}}),i("FStl"),i("Q0fs"),i("rSV2"),i("nqD9"),i("iQXk"),i("IxCr"),i("S3ao"),i("YQ7q"),i("pDZt"),i("eC/R"),i("Rvtc"),i("Nu/Z"),i("6wVx")}},[["pju7","runtime","aui.splitchunk.vendors--52bf8654d5","aui.splitchunk.vendors--b47d4b691d","aui.splitchunk.vendors--084821f40b","aui.splitchunk.vendors--be1eb78c1a","aui.splitchunk.vendors--23f50a6f00","aui.splitchunk.172ffb6da7","aui.splitchunk.b0831cc7d0","aui.splitchunk.572a8bf5cd","aui.splitchunk.087aba7911","aui.splitchunk.fbd1a5ab27","aui.splitchunk.d49cf794d2","aui.splitchunk.54d3f16c20","aui.splitchunk.e54c7c7304","aui.splitchunk.336ae4f9e7","aui.splitchunk.bb051ea9dd","aui.splitchunk.fb15cffa72","aui.splitchunk.f1e06f97a4","aui.splitchunk.56dfb54d0c","aui.splitchunk.479fe6ee76","aui.splitchunk.f673ef53ac","aui.splitchunk.8659b532c1","aui.splitchunk.908fe798b4","aui.splitchunk.5f851f97df","aui.splitchunk.d0110a864f","aui.splitchunk.afa5039e04","aui.splitchunk.bff3715233","aui.splitchunk.c750721820","aui.splitchunk.6d6f245ed3","aui.splitchunk.ed80e00f15","aui.splitchunk.084821f40b","aui.splitchunk.5b8c290363","aui.splitchunk.baa83dbaf9","aui.splitchunk.b2ecdd4179","aui.splitchunk.36cd9d521c","aui.splitchunk.be1eb78c1a","aui.splitchunk.d925afe2c0","aui.splitchunk.b652d2668a","aui.splitchunk.5b7fdbd666","aui.splitchunk.8705a83fa5","aui.splitchunk.8a641c03a4","aui.splitchunk.23f50a6f00","aui.splitchunk.d727dd207f","aui.splitchunk.543254b237","aui.splitchunk.141abf7fb1","aui.splitchunk.036a05e5ff","aui.splitchunk.a2b2c71491"]]]);
//# sourceMappingURL=aui.chunk.a65d5726565718a22f35--c25e0339349d11fbb852.js.map;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:jira-projects-backbone', location = 'lib/backbone.js' */
define("jira-projects-backbone",["jquery","underscore","atlassian/libs/factories/backbone-1.0.0","jira/backbone-queryparams"],function(e,b,a,c){var d=a(b,e);c(d);return d});;
;
/* module-key = 'com.atlassian.plugin.jslibs:marionette-2.1.0-factory', location = 'factories/marionette/2.1.0/marionette-2.1.0-factory.js' */
/*
 Includes BabySitter
 https://github.com/marionettejs/backbone.babysitter/

 Includes Wreqr
 https://github.com/marionettejs/backbone.wreqr/
*/
'use strict';(function(m){define("atlassian/libs/factories/marionette-2.1.0",function(){return function(f,e){f={_:f,Backbone:e};m.call(f);return f.Marionette.noConflict()}})})(function(){(function(m,f){m.Marionette=f(m,m.Backbone,m._)})(this,function(m,f,e){function k(a,b){a=Error(a);a.name=b||"Error";throw a;}(function(a,b){var c=a.ChildViewContainer;a.ChildViewContainer=function(a,b){var c=function(a){this._views={};this._indexByModel={};this._indexByCustom={};this._updateLength();b.each(a,this.add,
this)};b.extend(c.prototype,{add:function(a,b){var c=a.cid;this._views[c]=a;a.model&&(this._indexByModel[a.model.cid]=c);b&&(this._indexByCustom[b]=c);this._updateLength();return this},findByModel:function(a){return this.findByModelCid(a.cid)},findByModelCid:function(a){return this.findByCid(this._indexByModel[a])},findByCustom:function(a){return this.findByCid(this._indexByCustom[a])},findByIndex:function(a){return b.values(this._views)[a]},findByCid:function(a){return this._views[a]},remove:function(a){var c=
a.cid;a.model&&delete this._indexByModel[a.model.cid];b.any(this._indexByCustom,function(a,b){if(a===c)return delete this._indexByCustom[b],!0},this);delete this._views[c];this._updateLength();return this},call:function(a){this.apply(a,b.tail(arguments))},apply:function(a,c){b.each(this._views,function(e){b.isFunction(e[a])&&e[a].apply(e,c||[])})},_updateLength:function(){this.length=b.size(this._views)}});b.each("forEach each map find detect filter select reject every all some any include contains invoke toArray first initial rest last without isEmpty pluck".split(" "),
function(a){c.prototype[a]=function(){var c=[b.values(this._views)].concat(b.toArray(arguments));return b[a].apply(b,c)}});return c}(a,b);a.ChildViewContainer.VERSION="0.1.4";a.ChildViewContainer.noConflict=function(){a.ChildViewContainer=c;return this};return a.ChildViewContainer})(f,e);(function(a,b){var c=a.Wreqr,e=a.Wreqr={};a.Wreqr.VERSION="1.3.1";a.Wreqr.noConflict=function(){a.Wreqr=c;return this};e.Handlers=function(a,b){var c=function(a){this.options=a;this._wreqrHandlers={};b.isFunction(this.initialize)&&
this.initialize(a)};c.extend=a.Model.extend;b.extend(c.prototype,a.Events,{setHandlers:function(a){b.each(a,function(a,c){var e=null;b.isObject(a)&&!b.isFunction(a)&&(e=a.context,a=a.callback);this.setHandler(c,a,e)},this)},setHandler:function(a,b,c){this._wreqrHandlers[a]={callback:b,context:c};this.trigger("handler:add",a,b,c)},hasHandler:function(a){return!!this._wreqrHandlers[a]},getHandler:function(a){var b=this._wreqrHandlers[a];if(b)return function(){var a=Array.prototype.slice.apply(arguments);
return b.callback.apply(b.context,a)}},removeHandler:function(a){delete this._wreqrHandlers[a]},removeAllHandlers:function(){this._wreqrHandlers={}}});return c}(a,b);e.CommandStorage=function(){var c=function(a){this.options=a;this._commands={};b.isFunction(this.initialize)&&this.initialize(a)};b.extend(c.prototype,a.Events,{getCommands:function(a){var b=this._commands[a];b||(b={command:a,instances:[]},this._commands[a]=b);return b},addCommand:function(a,b){this.getCommands(a).instances.push(b)},
clearCommands:function(a){this.getCommands(a).instances=[]}});return c}();e.Commands=function(a){return a.Handlers.extend({storageType:a.CommandStorage,constructor:function(b){this.options=b||{};this._initializeStorage(this.options);this.on("handler:add",this._executeCommands,this);var c=Array.prototype.slice.call(arguments);a.Handlers.prototype.constructor.apply(this,c)},execute:function(a,b){a=arguments[0];b=Array.prototype.slice.call(arguments,1);this.hasHandler(a)?this.getHandler(a).apply(this,
b):this.storage.addCommand(a,b)},_executeCommands:function(a,c,e){var d=this.storage.getCommands(a);b.each(d.instances,function(a){c.apply(e,a)});this.storage.clearCommands(a)},_initializeStorage:function(a){a=a.storageType||this.storageType;this.storage=b.isFunction(a)?new a:a}})}(e);e.RequestResponse=function(a){return a.Handlers.extend({request:function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1);if(this.hasHandler(a))return this.getHandler(a).apply(this,b)}})}(e);e.EventAggregator=
function(a,b){var c=function(){};c.extend=a.Model.extend;b.extend(c.prototype,a.Events);return c}(a,b);e.Channel=function(a){var c=function(b){this.vent=new a.EventAggregator;this.reqres=new a.RequestResponse;this.commands=new a.Commands;this.channelName=b};b.extend(c.prototype,{reset:function(){this.vent.off();this.vent.stopListening();this.reqres.removeAllHandlers();this.commands.removeAllHandlers();return this},connectEvents:function(a,b){this._connect("vent",a,b);return this},connectCommands:function(a,
b){this._connect("commands",a,b);return this},connectRequests:function(a,b){this._connect("reqres",a,b);return this},_connect:function(a,c,e){if(c){e=e||this;var d="vent"===a?"on":"setHandler";b.each(c,function(c,g){this[a][d](g,b.bind(c,e))},this)}}});return c}(e);e.radio=function(a){var c=function(){this._channels={};this.vent={};this.commands={};this.reqres={};this._proxyMethods()};b.extend(c.prototype,{channel:function(a){if(!a)throw Error("Channel must receive a name");return this._getChannel(a)},
_getChannel:function(b){var c=this._channels[b];c||(c=new a.Channel(b),this._channels[b]=c);return c},_proxyMethods:function(){b.each(["vent","commands","reqres"],function(a){b.each(e[a],function(b){this[a][b]=d(this,a,b)},this)},this)}});var e={vent:"on off trigger once stopListening listenTo listenToOnce".split(" "),commands:["execute","setHandler","setHandlers","removeHandler","removeAllHandlers"],reqres:["request","setHandler","setHandlers","removeHandler","removeAllHandlers"]},d=function(a,b,
c){return function(e){var d=a._getChannel(e)[b],g=Array.prototype.slice.call(arguments,1);return d[c].apply(d,g)}};return new c}(e);return a.Wreqr})(f,e);var p=f.ChildViewContainer.noConflict(),q=f.Wreqr.noConflict(),r=m.Marionette,d=f.Marionette={};d.VERSION="2.1.0";d.noConflict=function(){m.Marionette=r;return this};f.Marionette=d;d.Deferred=f.$.Deferred;var l=Array.prototype.slice;d.extend=f.Model.extend;d.getOption=function(a,b){if(a&&b)return a.options&&void 0!==a.options[b]?a.options[b]:a[b]};
d.proxyGetOption=function(a){return d.getOption(this,a)};d.normalizeMethods=function(a){var b={};e.each(a,function(a,d){e.isFunction(a)||(a=this[a]);a&&(b[d]=a)},this);return b};d.normalizeUIKeys=function(a,b){if("undefined"!==typeof a)return e.each(e.keys(a),function(c){var e=/@ui\.[a-zA-Z_$0-9]*/g;c.match(e)&&(a[c.replace(e,function(a){return b[a.slice(4)]})]=a[c],delete a[c])}),a};d.actAsCollection=function(a,b){e.each("forEach each map find detect filter select reject every all some any include contains invoke toArray first initial rest last without isEmpty pluck".split(" "),
function(c){a[c]=function(){var a=[e.values(e.result(this,b))].concat(e.toArray(arguments));return e[c].apply(e,a)}})};d.triggerMethod=function(){function a(a,b,e){return e.toUpperCase()}var b=/(^|:)(\w)/gi;return function(c){var d=this["on"+c.replace(b,a)],h;e.isFunction(d)&&(h=d.apply(this,e.tail(arguments)));e.isFunction(this.trigger)&&this.trigger.apply(this,arguments);return h}}();d.MonitorDOMRefresh=function(a){function b(b){b._isShown&&b._isRendered&&f.$.contains(a,b.el)&&e.isFunction(b.triggerMethod)&&
b.triggerMethod("dom:refresh")}return function(a){a.listenTo(a,"show",function(){a._isShown=!0;b(a)});a.listenTo(a,"render",function(){a._isRendered=!0;b(a)})}}(document.documentElement);(function(a){function b(a,b,c,d){d=d.split(/\s+/);e.each(d,function(e){var d=a[e];d||k('Method "'+e+'" was configured as an event handler, but does not exist.');a.listenTo(b,c,d)})}function c(a,b,c,e){a.listenTo(b,c,e)}function d(a,b,c,d){d=d.split(/\s+/);e.each(d,function(e){a.stopListening(b,c,a[e])})}function h(a,
b,c,e){a.stopListening(b,c,e)}function n(a,b,c,d,g){b&&c&&(e.isFunction(c)&&(c=c.call(a)),e.each(c,function(c,h){e.isFunction(c)?d(a,b,h,c):g(a,b,h,c)}))}a.bindEntityEvents=function(a,e,d){n(a,e,d,c,b)};a.unbindEntityEvents=function(a,b,c){n(a,b,c,h,d)};a.proxyBindEntityEvents=function(b,c){return a.bindEntityEvents(this,b,c)};a.proxyUnbindEntityEvents=function(b,c){return a.unbindEntityEvents(this,b,c)}})(d);d.Callbacks=function(){this._deferred=d.Deferred();this._callbacks=[]};e.extend(d.Callbacks.prototype,
{add:function(a,b){var c=e.result(this._deferred,"promise");this._callbacks.push({cb:a,ctx:b});c.then(function(c){b&&(c.context=b);a.call(c.context,c.options)})},run:function(a,b){this._deferred.resolve({options:a,context:b})},reset:function(){var a=this._callbacks;this._deferred=d.Deferred();this._callbacks=[];e.each(a,function(a){this.add(a.cb,a.ctx)},this)}});d.Controller=function(a){this.options=a||{};e.isFunction(this.initialize)&&this.initialize(this.options)};d.Controller.extend=d.extend;e.extend(d.Controller.prototype,
f.Events,{destroy:function(){var a=l.call(arguments);this.triggerMethod.apply(this,["before:destroy"].concat(a));this.triggerMethod.apply(this,["destroy"].concat(a));this.stopListening();this.off();return this},triggerMethod:d.triggerMethod,getOption:d.proxyGetOption});d.Object=function(a){this.options=e.extend({},e.result(this,"options"),a);this.initialize(this.options)};d.Object.extend=d.extend;e.extend(d.Object.prototype,{initialize:function(){},destroy:function(){this.triggerMethod("before:destroy");
this.triggerMethod("destroy");this.stopListening()},triggerMethod:d.triggerMethod,getOption:d.proxyGetOption,bindEntityEvents:d.proxyBindEntityEvents,unbindEntityEvents:d.proxyUnbindEntityEvents});e.extend(d.Object.prototype,f.Events);d.Region=function(a){this.options=a||{};this.el=this.getOption("el");(this.el=this.el instanceof f.$?this.el[0]:this.el)||k('An "el" must be specified for a region.',"NoElError");this.$el=this.getEl(this.el);if(this.initialize){var b=l.apply(arguments);this.initialize.apply(this,
b)}};e.extend(d.Region,{buildRegion:function(a,b){if(e.isString(a))return this._buildRegionFromSelector(a,b);if(a.selector||a.el||a.regionClass)return this._buildRegionFromObject(a,b);if(e.isFunction(a))return this._buildRegionFromRegionClass(a);k("Improper region configuration type. Please refer to http://marionettejs.com/docs/marionette.region.html#region-configuration-types")},_buildRegionFromSelector:function(a,b){return new b({el:a})},_buildRegionFromObject:function(a,b){b=a.regionClass||b;var c=
e.omit(a,"selector","regionClass");a.selector&&!c.el&&(c.el=a.selector);b=new b(c);a.parentEl&&(b.getEl=function(b){if(e.isObject(b))return f.$(b);var c=a.parentEl;e.isFunction(c)&&(c=c());return c.find(b)});return b},_buildRegionFromRegionClass:function(a){return new a}});e.extend(d.Region.prototype,f.Events,{show:function(a,b){this._ensureElement();b=b||{};var c=a!==this.currentView,d=!!b.forceShow,h=!!this.currentView;!b.preventDestroy&&c&&this.empty();if(c||d)a.once("destroy",e.bind(this.empty,
this)),a.render(),h&&this.triggerMethod("before:swap",a),this.triggerMethod("before:show",a),e.isFunction(a.triggerMethod)?a.triggerMethod("before:show"):this.triggerMethod.call(a,"before:show"),this.attachHtml(a),this.currentView=a,h&&this.triggerMethod("swap",a),this.triggerMethod("show",a),e.isFunction(a.triggerMethod)?a.triggerMethod("show"):this.triggerMethod.call(a,"show");return this},_ensureElement:function(){e.isObject(this.el)||(this.$el=this.getEl(this.el),this.el=this.$el[0]);this.$el&&
0!==this.$el.length||k('An "el" '+this.$el.selector+" must exist in DOM")},getEl:function(a){return f.$(a)},attachHtml:function(a){this.el.innerHTML="";this.el.appendChild(a.el)},empty:function(){var a=this.currentView;if(a)return this.triggerMethod("before:empty",a),this._destroyView(),this.triggerMethod("empty",a),delete this.currentView,this},_destroyView:function(){var a=this.currentView;a.destroy&&!a.isDestroyed?a.destroy():a.remove&&a.remove()},attachView:function(a){this.currentView=a;return this},
hasView:function(){return!!this.currentView},reset:function(){this.empty();this.$el&&(this.el=this.$el.selector);delete this.$el;return this},getOption:d.proxyGetOption,triggerMethod:d.triggerMethod});d.Region.extend=d.extend;d.RegionManager=function(a){var b=a.Controller.extend({constructor:function(b){this._regions={};a.Controller.call(this,b)},addRegions:function(a,b){e.isFunction(a)&&(a=a.apply(this,arguments));var c={};e.each(a,function(a,d){e.isString(a)&&(a={selector:a});a.selector&&(a=e.defaults({},
a,b));a=this.addRegion(d,a);c[d]=a},this);return c},addRegion:function(b,d){var c=e.isObject(d),g=e.isString(d),f=!!d.selector;d=g||c&&f?a.Region.buildRegion(d,a.Region):e.isFunction(d)?a.Region.buildRegion(d,a.Region):d;this.triggerMethod("before:add:region",b,d);this._store(b,d);this.triggerMethod("add:region",b,d);return d},get:function(a){return this._regions[a]},getRegions:function(){return e.clone(this._regions)},removeRegion:function(a){var b=this._regions[a];this._remove(a,b);return b},removeRegions:function(){var a=
this.getRegions();e.each(this._regions,function(a,b){this._remove(b,a)},this);return a},emptyRegions:function(){var a=this.getRegions();e.each(a,function(a){a.empty()},this);return a},destroy:function(){this.removeRegions();return a.Controller.prototype.destroy.apply(this,arguments)},_store:function(a,b){this._regions[a]=b;this._setLength()},_remove:function(a,b){this.triggerMethod("before:remove:region",a,b);b.empty();b.stopListening();delete this._regions[a];this._setLength();this.triggerMethod("remove:region",
a,b)},_setLength:function(){this.length=e.size(this._regions)}});a.actAsCollection(b.prototype,"_regions");return b}(d);d.TemplateCache=function(a){this.templateId=a};e.extend(d.TemplateCache,{templateCaches:{},get:function(a){var b=this.templateCaches[a];b||(b=new d.TemplateCache(a),this.templateCaches[a]=b);return b.load()},clear:function(){var a,b=l.call(arguments),c=b.length;if(0<c)for(a=0;a<c;a++)delete this.templateCaches[b[a]];else this.templateCaches={}}});e.extend(d.TemplateCache.prototype,
{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var a=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(a)},loadTemplate:function(a){var b=f.$(a).html();b&&0!==b.length||k('Could not find template: "'+a+'"',"NoTemplateError");return b},compileTemplate:function(a){return e.template(a)}});d.Renderer={render:function(a,b){a||k("Cannot render the template since its false, null or undefined.","TemplateNotFoundError");return("function"===typeof a?
a:d.TemplateCache.get(a))(b)}};d.View=f.View.extend({constructor:function(a){e.bindAll(this,"render");this.options=e.extend({},e.result(this,"options"),e.isFunction(a)?a.call(this):a);this.events=this.normalizeUIKeys(e.result(this,"events"));e.isObject(this.behaviors)&&new d.Behaviors(this);f.View.apply(this,arguments);d.MonitorDOMRefresh(this);this.listenTo(this,"show",this.onShowCalled)},getTemplate:function(){return this.getOption("template")},serializeModel:function(a){return a.toJSON.apply(a,
l.call(arguments,1))},mixinTemplateHelpers:function(a){a=a||{};var b=this.getOption("templateHelpers");e.isFunction(b)&&(b=b.call(this));return e.extend(a,b)},normalizeUIKeys:function(a){var b=e.result(this,"ui"),c=e.result(this,"_uiBindings");return d.normalizeUIKeys(a,c||b)},configureTriggers:function(){if(this.triggers){var a={},b=this.normalizeUIKeys(e.result(this,"triggers"));e.each(b,function(b,d){var c=e.isObject(b),g=c?b.event:b;a[d]=function(a){if(a){var e=a.preventDefault,d=a.stopPropagation,
h=c?b.stopPropagation:d;(c?b.preventDefault:e)&&e&&e.apply(a);h&&d&&d.apply(a)}this.triggerMethod(g,{view:this,model:this.model,collection:this.collection})}},this);return a}},delegateEvents:function(a){this._delegateDOMEvents(a);this.bindEntityEvents(this.model,this.getOption("modelEvents"));this.bindEntityEvents(this.collection,this.getOption("collectionEvents"));return this},_delegateDOMEvents:function(a){a=a||this.events;e.isFunction(a)&&(a=a.call(this));a=this.normalizeUIKeys(a);var b={},c=e.result(this,
"behaviorEvents")||{},d=this.configureTriggers();e.extend(b,c,a,d);f.View.prototype.delegateEvents.call(this,b)},undelegateEvents:function(){var a=l.call(arguments);f.View.prototype.undelegateEvents.apply(this,a);this.unbindEntityEvents(this.model,this.getOption("modelEvents"));this.unbindEntityEvents(this.collection,this.getOption("collectionEvents"));return this},onShowCalled:function(){},_ensureViewIsIntact:function(){if(this.isDestroyed){var a=Error("Cannot use a view thats already been destroyed.");
a.name="ViewDestroyedError";throw a;}},destroy:function(){if(!this.isDestroyed){var a=l.call(arguments);this.triggerMethod.apply(this,["before:destroy"].concat(a));this.isDestroyed=!0;this.triggerMethod.apply(this,["destroy"].concat(a));this.unbindUIElements();this.remove();return this}},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var a=e.result(this,"_uiBindings");this.ui={};e.each(e.keys(a),function(b){this.ui[b]=this.$(a[b])},this)}},unbindUIElements:function(){this.ui&&
this._uiBindings&&(e.each(this.ui,function(a,b){delete this.ui[b]},this),this.ui=this._uiBindings,delete this._uiBindings)},triggerMethod:d.triggerMethod,normalizeMethods:d.normalizeMethods,getOption:d.proxyGetOption,bindEntityEvents:d.proxyBindEntityEvents,unbindEntityEvents:d.proxyUnbindEntityEvents});d.ItemView=d.View.extend({constructor:function(){d.View.apply(this,arguments)},serializeData:function(){var a={};this.model?a=e.partial(this.serializeModel,this.model).apply(this,arguments):this.collection&&
(a={items:e.partial(this.serializeCollection,this.collection).apply(this,arguments)});return a},serializeCollection:function(a){return a.toJSON.apply(a,l.call(arguments,1))},render:function(){this._ensureViewIsIntact();this.triggerMethod("before:render",this);this._renderTemplate();this.bindUIElements();this.triggerMethod("render",this);return this},_renderTemplate:function(){var a=this.getTemplate();if(!1!==a){a||k("Cannot render the template since it is null or undefined.","UndefinedTemplateError");
var b=this.serializeData();b=this.mixinTemplateHelpers(b);a=d.Renderer.render(a,b,this);this.attachElContent(a);return this}},attachElContent:function(a){this.$el.html(a);return this},destroy:function(){if(!this.isDestroyed)return d.View.prototype.destroy.apply(this,arguments)}});d.CollectionView=d.View.extend({childViewEventPrefix:"childview",constructor:function(a){var b=a||{};this.sort=e.isUndefined(b.sort)?!0:b.sort;this._initChildViewStorage();d.View.apply(this,arguments);this._initialEvents();
this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment();this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer();this.isBuffering=!0},endBuffering:function(){this.isBuffering=!1;this._triggerBeforeShowBufferedChildren();this.attachBuffer(this,this.elBuffer);this._triggerShowBufferedChildren();this.initRenderBuffer()},_triggerBeforeShowBufferedChildren:function(){this._isShown&&e.invoke(this._bufferedChildren,"triggerMethod","before:show")},
_triggerShowBufferedChildren:function(){this._isShown&&(e.each(this._bufferedChildren,function(a){e.isFunction(a.triggerMethod)?a.triggerMethod("show"):d.triggerMethod.call(a,"show")}),this._bufferedChildren=[])},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this.render),this.sort&&this.listenTo(this.collection,"sort",this._sortViews))},_onCollectionAdd:function(a){this.destroyEmptyView();
var b=this.getChildView(a),c=this.collection.indexOf(a);this.addChild(a,b,c)},_onCollectionRemove:function(a){a=this.children.findByModel(a);this.removeChildView(a);this.checkEmpty()},onShowCalled:function(){this.children.each(function(a){e.isFunction(a.triggerMethod)?a.triggerMethod("show"):d.triggerMethod.call(a,"show")})},render:function(){this._ensureViewIsIntact();this.triggerMethod("before:render",this);this._renderChildren();this.triggerMethod("render",this);return this},resortView:function(){this.render()},
_sortViews:function(){this.collection.find(function(a,b){a=this.children.findByModel(a);return!a||a._index!==b},this)&&this.resortView()},_renderChildren:function(){this.destroyEmptyView();this.destroyChildren();this.isEmpty(this.collection)?this.showEmptyView():(this.triggerMethod("before:render:collection",this),this.startBuffering(),this.showCollection(),this.endBuffering(),this.triggerMethod("render:collection",this))},showCollection:function(){var a;this.collection.each(function(b,c){a=this.getChildView(b);
this.addChild(b,a,c)},this)},showEmptyView:function(){var a=this.getEmptyView();if(a&&!this._showingEmptyView){this.triggerMethod("before:render:empty");this._showingEmptyView=!0;var b=new f.Model;this.addEmptyView(b,a);this.triggerMethod("render:empty")}},destroyEmptyView:function(){this._showingEmptyView&&(this.destroyChildren(),delete this._showingEmptyView)},getEmptyView:function(){return this.getOption("emptyView")},addEmptyView:function(a,b){var c=this.getOption("emptyViewOptions")||this.getOption("childViewOptions");
e.isFunction(c)&&(c=c.call(this));a=this.buildChildView(a,b,c);this._isShown&&this.triggerMethod.call(a,"before:show");this.children.add(a);this.renderChildView(a,-1);this._isShown&&this.triggerMethod.call(a,"show")},getChildView:function(a){(a=this.getOption("childView"))||k('A "childView" must be specified',"NoChildViewError");return a},addChild:function(a,b,c){var d=this.getOption("childViewOptions");e.isFunction(d)&&(d=d.call(this,a,c));a=this.buildChildView(a,b,d);this._updateIndices(a,!0,c);
this._addChildView(a,c);return a},_updateIndices:function(a,b,c){this.sort&&(b?(a._index=c,this.children.each(function(b){b._index>=a._index&&b._index++})):this.children.each(function(b){b._index>=a._index&&b._index--}))},_addChildView:function(a,b){this.proxyChildEvents(a);this.triggerMethod("before:add:child",a);this.children.add(a);this.renderChildView(a,b);this._isShown&&!this.isBuffering&&(e.isFunction(a.triggerMethod)?a.triggerMethod("show"):d.triggerMethod.call(a,"show"));this.triggerMethod("add:child",
a)},renderChildView:function(a,b){a.render();this.attachHtml(this,a,b);return a},buildChildView:function(a,b,c){a=e.extend({model:a},c);return new b(a)},removeChildView:function(a){a&&(this.triggerMethod("before:remove:child",a),a.destroy?a.destroy():a.remove&&a.remove(),this.stopListening(a),this.children.remove(a),this.triggerMethod("remove:child",a),this._updateIndices(a,!1));return a},isEmpty:function(a){return!this.collection||0===this.collection.length},checkEmpty:function(){this.isEmpty(this.collection)&&
this.showEmptyView()},attachBuffer:function(a,b){a.$el.append(b)},attachHtml:function(a,b,c){a.isBuffering?(a.elBuffer.appendChild(b.el),a._bufferedChildren.push(b)):a._insertBefore(b,c)||a._insertAfter(b)},_insertBefore:function(a,b){var c;this.sort&&b<this.children.length-1&&(c=this.children.find(function(a){return a._index===b+1}));return c?(c.$el.before(a.el),!0):!1},_insertAfter:function(a){this.$el.append(a.el)},_initChildViewStorage:function(){this.children=new p},destroy:function(){if(!this.isDestroyed)return this.triggerMethod("before:destroy:collection"),
this.destroyChildren(),this.triggerMethod("destroy:collection"),d.View.prototype.destroy.apply(this,arguments)},destroyChildren:function(){var a=this.children.map(e.identity);this.children.each(this.removeChildView,this);this.checkEmpty();return a},proxyChildEvents:function(a){var b=this.getOption("childViewEventPrefix");this.listenTo(a,"all",function(){var c=l.call(arguments),d=c[0],h=this.normalizeMethods(e.result(this,"childEvents"));c[0]=b+":"+d;c.splice(1,0,a);"undefined"!==typeof h&&e.isFunction(h[d])&&
h[d].apply(this,c.slice(1));this.triggerMethod.apply(this,c)},this)}});d.CompositeView=d.CollectionView.extend({constructor:function(){d.CollectionView.apply(this,arguments)},_initialEvents:function(){this.once("render",function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this._renderChildren),this.sort&&this.listenTo(this.collection,"sort",this._sortViews))})},
getChildView:function(a){(a=this.getOption("childView")||this.constructor)||k('A "childView" must be specified',"NoChildViewError");return a},serializeData:function(){var a={};this.model&&(a=e.partial(this.serializeModel,this.model).apply(this,arguments));return a},render:function(){this._ensureViewIsIntact();this.isRendered=!0;this.resetChildViewContainer();this.triggerMethod("before:render",this);this._renderTemplate();this._renderChildren();this.triggerMethod("render",this);return this},_renderChildren:function(){this.isRendered&&
d.CollectionView.prototype._renderChildren.call(this)},_renderTemplate:function(){var a=this.serializeData();a=this.mixinTemplateHelpers(a);this.triggerMethod("before:render:template");var b=this.getTemplate();a=d.Renderer.render(b,a,this);this.attachElContent(a);this.bindUIElements();this.triggerMethod("render:template")},attachElContent:function(a){this.$el.html(a);return this},attachBuffer:function(a,b){this.getChildViewContainer(a).append(b)},_insertAfter:function(a){this.getChildViewContainer(this).append(a.el)},
getChildViewContainer:function(a){if("$childViewContainer"in a)return a.$childViewContainer;var b;(b=d.getOption(a,"childViewContainer"))?(b=e.isFunction(b)?b.call(a):b,b="@"===b.charAt(0)&&a.ui?a.ui[b.substr(4)]:a.$(b),0>=b.length&&k('The specified "childViewContainer" was not found: '+a.childViewContainer,"ChildViewContainerMissingError")):b=a.$el;return a.$childViewContainer=b},resetChildViewContainer:function(){this.$childViewContainer&&delete this.$childViewContainer}});d.LayoutView=d.ItemView.extend({regionClass:d.Region,
constructor:function(a){a=a||{};this._firstRender=!0;this._initializeRegions(a);d.ItemView.call(this,a)},render:function(){this._ensureViewIsIntact();this._firstRender?this._firstRender=!1:this._reInitializeRegions();return d.ItemView.prototype.render.apply(this,arguments)},destroy:function(){if(this.isDestroyed)return this;this.regionManager.destroy();return d.ItemView.prototype.destroy.apply(this,arguments)},addRegion:function(a,b){this.triggerMethod("before:region:add",a);var c={};c[a]=b;return this._buildRegions(c)[a]},
addRegions:function(a){this.regions=e.extend({},this.regions,a);return this._buildRegions(a)},removeRegion:function(a){this.triggerMethod("before:region:remove",a);delete this.regions[a];return this.regionManager.removeRegion(a)},getRegion:function(a){return this.regionManager.get(a)},getRegions:function(){return this.regionManager.getRegions()},_buildRegions:function(a){var b=this,c={regionClass:this.getOption("regionClass"),parentEl:function(){return b.$el}};return this.regionManager.addRegions(a,
c)},_initializeRegions:function(a){this._initRegionManager();var b=e.isFunction(this.regions)?this.regions(a):this.regions||{};var c=this.getOption.call(a,"regions");e.isFunction(c)&&(c=c.call(this,a));e.extend(b,c);this.addRegions(b)},_reInitializeRegions:function(){this.regionManager.emptyRegions();this.regionManager.each(function(a){a.reset()})},getRegionManager:function(){return new d.RegionManager},_initRegionManager:function(){this.regionManager=this.getRegionManager();this.listenTo(this.regionManager,
"before:add:region",function(a){this.triggerMethod("before:add:region",a)});this.listenTo(this.regionManager,"add:region",function(a,b){this[a]=b;this.triggerMethod("add:region",a,b)});this.listenTo(this.regionManager,"before:remove:region",function(a){this.triggerMethod("before:remove:region",a)});this.listenTo(this.regionManager,"remove:region",function(a,b){delete this[a];this.triggerMethod("remove:region",a,b)})}});d.Behavior=function(a,b){function c(b,c){this.view=c;this.defaults=a.result(this,
"defaults")||{};this.options=a.extend({},this.defaults,b);this.$=function(){return this.view.$.apply(this.view,arguments)};this.initialize.apply(this,arguments)}a.extend(c.prototype,b.Events,{initialize:function(){},destroy:function(){this.stopListening()},triggerMethod:d.triggerMethod,getOption:d.proxyGetOption,bindEntityEvents:d.proxyBindEntityEvents,unbindEntityEvents:d.proxyUnbindEntityEvents});c.extend=d.extend;return c}(e,f);d.Behaviors=function(a,b){function c(a,e){e=c.parseBehaviors(a,e||
b.result(a,"behaviors"));c.wrap(a,e,b.keys(d))}var d={setElement:function(a,c){a.apply(this,b.tail(arguments,2));b.each(c,function(a){a.$el=this.$el;a.el=this.el},this);return this},destroy:function(a,c){var d=b.tail(arguments,2);a.apply(this,d);b.invoke(c,"destroy",d);return this},bindUIElements:function(a,c){a.apply(this);b.invoke(c,a)},unbindUIElements:function(a,c){a.apply(this);b.invoke(c,a)},triggerMethod:function(a,c){var d=b.tail(arguments,2);a.apply(this,d);b.each(c,function(b){a.apply(b,
d)})},delegateEvents:function(c,d){var e=b.tail(arguments,2);c.apply(this,e);b.each(d,function(b){a.bindEntityEvents(b,this.model,a.getOption(b,"modelEvents"));a.bindEntityEvents(b,this.collection,a.getOption(b,"collectionEvents"))},this);return this},undelegateEvents:function(c,d){var e=b.tail(arguments,2);c.apply(this,e);b.each(d,function(b){a.unbindEntityEvents(b,this.model,a.getOption(b,"modelEvents"));a.unbindEntityEvents(b,this.collection,a.getOption(b,"collectionEvents"))},this);return this},
behaviorEvents:function(c,d){var e={},f=b.result(this,"ui");b.each(d,function(c,d){var h={},g=b.clone(b.result(c,"events"))||{},n=b.result(c,"ui");n=b.extend({},f,n);g=a.normalizeUIKeys(g,n);b.each(b.keys(g),function(a){var e=Array(d+2).join(" ");e=a+e;a=b.isFunction(g[a])?g[a]:c[g[a]];h[e]=b.bind(a,c)});e=b.extend(e,h)});return e}};b.extend(c,{behaviorsLookup:function(){throw Error("You must define where your behaviors are stored.See https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.behaviors.md#behaviorslookup");
},getBehaviorClass:function(a,d){return a.behaviorClass?a.behaviorClass:b.isFunction(c.behaviorsLookup)?c.behaviorsLookup.apply(this,arguments)[d]:c.behaviorsLookup[d]},parseBehaviors:function(a,d){return b.chain(d).map(function(d,e){d=new (c.getBehaviorClass(d,e))(d,a);e=c.parseBehaviors(a,b.result(d,"behaviors"));return[d].concat(e)}).flatten().value()},wrap:function(a,c,e){b.each(e,function(e){a[e]=b.partial(d[e],a[e],c)})}});return c}(d,e);d.AppRouter=f.Router.extend({constructor:function(a){f.Router.apply(this,
arguments);this.options=a||{};var b=this.getOption("appRoutes"),c=this._getController();this.processAppRoutes(c,b);this.on("route",this._processOnRoute,this)},appRoute:function(a,b){var c=this._getController();this._addAppRoute(c,a,b)},_processOnRoute:function(a,b){var c=e.invert(this.getOption("appRoutes"))[a];if(e.isFunction(this.onRoute))this.onRoute(a,c,b)},processAppRoutes:function(a,b){if(b){var c=e.keys(b).reverse();e.each(c,function(c){this._addAppRoute(a,c,b[c])},this)}},_getController:function(){return this.getOption("controller")},
_addAppRoute:function(a,b,c){var d=a[c];d||k('Method "'+c+'" was not found on the controller');this.route(b,c,e.bind(d,a))},getOption:d.proxyGetOption});d.Application=function(a){this._initializeRegions(a);this._initCallbacks=new d.Callbacks;this.submodules={};e.extend(this,a);this._initChannel()};e.extend(d.Application.prototype,f.Events,{execute:function(){this.commands.execute.apply(this.commands,arguments)},request:function(){return this.reqres.request.apply(this.reqres,arguments)},addInitializer:function(a){this._initCallbacks.add(a)},
start:function(a){this.triggerMethod("before:start",a);this._initCallbacks.run(a,this);this.triggerMethod("start",a)},addRegions:function(a){return this._regionManager.addRegions(a)},emptyRegions:function(){return this._regionManager.emptyRegions()},removeRegion:function(a){return this._regionManager.removeRegion(a)},getRegion:function(a){return this._regionManager.get(a)},getRegions:function(){return this._regionManager.getRegions()},module:function(a,b){var c=d.Module.getClass(b),e=l.call(arguments);
e.unshift(this);return c.create.apply(c,e)},getRegionManager:function(){return new d.RegionManager},_initializeRegions:function(a){var b=e.isFunction(this.regions)?this.regions(a):this.regions||{};this._initRegionManager();var c=d.getOption(a,"regions");e.isFunction(c)&&(c=c.call(this,a));e.extend(b,c);this.addRegions(b);return this},_initRegionManager:function(){this._regionManager=this.getRegionManager();this.listenTo(this._regionManager,"before:add:region",function(a){this.triggerMethod("before:add:region",
a)});this.listenTo(this._regionManager,"add:region",function(a,b){this[a]=b;this.triggerMethod("add:region",a,b)});this.listenTo(this._regionManager,"before:remove:region",function(a){this.triggerMethod("before:remove:region",a)});this.listenTo(this._regionManager,"remove:region",function(a,b){delete this[a];this.triggerMethod("remove:region",a,b)})},_initChannel:function(){this.channelName=e.result(this,"channelName")||"global";this.channel=e.result(this,"channel")||q.radio.channel(this.channelName);
this.vent=e.result(this,"vent")||this.channel.vent;this.commands=e.result(this,"commands")||this.channel.commands;this.reqres=e.result(this,"reqres")||this.channel.reqres},triggerMethod:d.triggerMethod,getOption:d.proxyGetOption});d.Application.extend=d.extend;d.Module=function(a,b,c){this.moduleName=a;this.options=e.extend({},this.options,c);this.initialize=c.initialize||this.initialize;this.submodules={};this._setupInitializersAndFinalizers();this.app=b;this.startWithParent=!0;e.isFunction(this.initialize)&&
this.initialize(a,b,this.options)};d.Module.extend=d.extend;e.extend(d.Module.prototype,f.Events,{initialize:function(){},addInitializer:function(a){this._initializerCallbacks.add(a)},addFinalizer:function(a){this._finalizerCallbacks.add(a)},start:function(a){this._isInitialized||(e.each(this.submodules,function(b){b.startWithParent&&b.start(a)}),this.triggerMethod("before:start",a),this._initializerCallbacks.run(a,this),this._isInitialized=!0,this.triggerMethod("start",a))},stop:function(){this._isInitialized&&
(this._isInitialized=!1,this.triggerMethod("before:stop"),e.each(this.submodules,function(a){a.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),this.triggerMethod("stop"))},addDefinition:function(a,b){this._runModuleDefinition(a,b)},_runModuleDefinition:function(a,b){a&&(b=e.flatten([this,this.app,f,d,f.$,e,b]),a.apply(this,b))},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new d.Callbacks;this._finalizerCallbacks=
new d.Callbacks},triggerMethod:d.triggerMethod});e.extend(d.Module,{create:function(a,b,c){var d=a,f=l.call(arguments);f.splice(0,3);b=b.split(".");var n=[];n[b.length-1]=c;e.each(b,function(b,e){var g=d;d=this._getModule(g,b,a,c);this._addModuleDefinition(g,d,n[e],f)},this);return d},_getModule:function(a,b,c,d,f){f=e.extend({},d);d=this.getClass(d);var g=a[b];g||(g=new d(b,c,f),a[b]=g,a.submodules[b]=g);return g},getClass:function(a){var b=d.Module;return a?a.prototype instanceof b?a:a.moduleClass||
b:b},_addModuleDefinition:function(a,b,c,d){var e=this._getDefine(c);c=this._getStartWithParent(c,b);e&&b.addDefinition(e,d);this._addStartWithParent(a,b,c)},_getStartWithParent:function(a,b){return e.isFunction(a)&&a.prototype instanceof d.Module?(a=b.constructor.prototype.startWithParent,e.isUndefined(a)?!0:a):e.isObject(a)?(a=a.startWithParent,e.isUndefined(a)?!0:a):!0},_getDefine:function(a){return!e.isFunction(a)||a.prototype instanceof d.Module?e.isObject(a)?a.define:null:a},_addStartWithParent:function(a,
b,c){b.startWithParent=b.startWithParent&&c;b.startWithParent&&!b.startWithParentIsConfigured&&(b.startWithParentIsConfigured=!0,a.addInitializer(function(a){b.startWithParent&&b.start(a)}))}});return d})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:marionette', location = '/sidebar/lib/backbone.marionette.mixins.js' */
define("jira/projects/libs/marionette-mixins",[],function(){return function a(d,f){function e(i,h){var g=this;var j=d.defaults({},h||{},{isPrevented:false,emitter:this,preventDefault:function(){this.isPrevented=true;g.trigger(i+":prevented",this)}});this.trigger(i,j);return j}function c(h,g){var i=this.triggerPreventable(h,g);if(i.isPrevented){g.preventDefault()}}d.extend(f.View.prototype,{unwrapTemplate:function b(){if(this.$el.parent().length){var g=this.$el.children();this.$el.replaceWith(g);this.setElement(g)}else{this.setElement(this.$el.children())}},triggerPreventable:e,retriggerPreventable:c});d.extend(f.Controller.prototype,{triggerPreventable:e,retriggerPreventable:c});f.ViewManager=f.Controller.extend({constructor:function(){f.Controller.apply(this,arguments);this.views={}},hideView:function(h){var g=this.views[h];if(g){this.stopListening(g);if(!g.isDestroyed){g.destroy()}delete this.views[h]}},showView:function(i,h){var g=this.buildView(i,h);g.render()},buildView:function(i,h){var g=this.views[i];if(!g){g=h.call(this);this.listenTo(g,"destroy",function(){this.hideView(i)});this.views[i]=g}return g},getView:function(g){return this.views[g]}});return f}});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:marionette', location = '/sidebar/lib/backbone.marionette.adapter.js' */
define("jira/projects/libs/marionette",["jira-projects-backbone","underscore","atlassian/libs/factories/marionette-2.1.0","jira/projects/libs/marionette-mixins"],function(e,b,c,a){var d;d=c(b,e);d=a(b,d);return d});AJS.namespace("JIRA.Projects.Libs.Marionette",null,require("jira/projects/libs/marionette"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-component', location = '/sidebar/component/navigation-item.js' */
define("jira/projects/sidebar/component/navigation-item",["jira/util/browser","jira/projects/libs/marionette"],function(a,b){return b.CompositeView.extend({ui:{link:"a.aui-nav-item"},events:{'simpleClick @ui.link:not([target="_blank"])':function(c){c.preventDefault();this.navigate()}},initialize:function(){this.id=this.$el.find(">a").attr("data-link-id");this.bindUIElements()},onDestroy:function(){this.unbind()},getElement:function(){return this.el},navigate:function(){if(!this.select()){return}var d=this.triggerPreventable("before:navigate");if(d.isPrevented){return false}var c=this.ui.link.attr("href");if(c){a.reloadViaWindowLocation(c)}return true},select:function(){var c=this.triggerPreventable("before:select");if(c.isPrevented){return false}this.$el.addClass("aui-nav-selected");this.trigger("select",c);return true},deselect:function(){if(!this.isSelected()){return true}var c=this.triggerPreventable("before:deselect");if(c.isPrevented){return false}this.$el.removeClass("aui-nav-selected");this.$el.find("a").blur();this.trigger("deselect",c);return true},isSelected:function(){return this.$el.hasClass("aui-nav-selected")},removeBadge:function(){this.$el.find(".aui-badge").remove()},getId:function(){return this.id},getSelectedNavigationItem:function(){if(this.isSelected()){return this}},hasASelectedItem:function(){return this.isSelected()}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-component', location = '/sidebar/component/navigation-group.js' */
define("jira/projects/sidebar/component/navigation-group",["jira/projects/sidebar/component/navigation-group-factory","jira/projects/libs/marionette","jira/util/logger"],function(b,c,a){return c.CompositeView.extend({childEvents:{"before:select":function(d,f){this.retriggerPreventable("before:select",f);if(f.isPrevented){return}var e=this.deselect();if(!e){f.preventDefault()}},select:function(e,d){this.trigger("select",d)},"before:deselect":function(d,e){this.retriggerPreventable("before:deselect",e)},deselect:function(e,d){this.trigger("deselect",d)},"before:navigate":function(d,e){this.retriggerPreventable("before:navigate",e)},"before:navigate:prevented":function(d,e){this.trigger("before:navigate:prevented",e)}},initialize:function(){this.id=this.$el.attr("data-id");this.$(">ul>li").each(function(e,d){var f=b.build(d);var g=!!this.getItem(f.id);if(g){a.warn("Duplicated IDs detected. There are more than one NavigationItem with id data-link-id='"+f.id+"'")}this.proxyChildEvents(f);this.children.add(f,f.id)}.bind(this))},onDestroy:function(){this.unbind()},getElement:function(){return this.el},deselect:function(){var e=this.triggerPreventable("before:deselect");if(e.isPrevented){return false}var d=true;this.children.each(function(f){d=f.deselect()&&d});return d},getItem:function(d){return this.children.findByCustom(d)},getItemAt:function(d){return this.children.findByIndex(d)},getSelectedNavigationItem:function(){var d=this.children.find(function(e){return e.hasASelectedItem()});if(d){return d.getSelectedNavigationItem()}},hasASelectedItem:function(){return this.children.any(function(d){return d.hasASelectedItem()})}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-component', location = '/sidebar/component/navigation-subgroup.js' */
define("jira/projects/sidebar/component/navigation-subgroup",["jira/projects/sidebar/component/navigation-group","underscore"],function(b,a){return b.extend({childEvents:{"before:select":function(c,d){b.prototype.childEvents["before:select"].apply(this,arguments);if(!d.isPrevented){this.expand()}}},initialize:function(){this.childEvents=a.extend({},b.prototype.childEvents,this.childEvents);b.prototype.initialize.apply(this,arguments);this.id=this.$el.find(">a[data-link-id]").attr("data-link-id")},expand:function(){this.$el.attr("aria-expanded","true")},collapse:function(){this.$el.attr("aria-expanded","false")},isExpanded:function(){return this.$el.attr("aria-expanded")==="true"},isSelected:function(){return this.$el.hasClass("aui-nav-selected")},getId:function(){return this.id},getSelectedNavigationItem:function(){if(this.isSelected()){return this}var c=this.children.find(function(d){return d.hasASelectedItem()});if(c){return c.getSelectedNavigationItem()}},hasASelectedItem:function(){if(this.isSelected()){return true}return this.children.any(function(c){return c.hasASelectedItem()})}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-component', location = '/sidebar/component/navigation-group-factory.js' */
define("jira/projects/sidebar/component/navigation-group-factory",["exports","jira/projects/sidebar/component/navigation-item","jira/projects/sidebar/component/navigation-subgroup","jquery"],function(a,e,d,c){a.build=function b(g){var f;if(c(g).find("ul").length){f=new d({el:g})}else{f=new e({el:g})}return f}});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-component', location = '/sidebar/component/component.js' */
define("jira/projects/sidebar/component",["jira/projects/sidebar/component/navigation-group","jira/projects/libs/marionette","jira/util/logger","wrm/data","jquery","underscore"],function(e,g,d,a,f,c){var b=Boolean(a.claim("is-global-sidebar"));return g.CompositeView.extend({childEvents:{"before:select":function(h,i){if(!this.hasASelectedItem()){i.isInitial=true}this.retriggerPreventable("before:select",i);if(!i.isPrevented){this.deselectAllGroups()}},select:function(i,h){this.trigger("select",h)},"before:deselect":function(h,i){this.retriggerPreventable("before:deselect",i)},deselect:function(i,h){this.trigger("deselect",h)},"before:navigate":function(h,i){this.retriggerPreventable("before:navigate",i)},"before:navigate:prevented":function(h,i){this.trigger("before:navigate:prevented",i)}},initialize:function(){this.render({force:true})},render:function(j){j=c.defaults({},j,{force:false});var i="el" in j;var n=i||j.force===true;var h=this.children.length>0;if(!n){return this}var m=this.triggerPreventable("before:render");if(m.isPrevented){return this}if(h){var l=this.triggerPreventable("before:detach");if(l.isPrevented){return this}this.destroyChildren({checkEmpty:false});this.trigger("detach")}if(i){var k=f(j.el);this.$el.replaceWith(k);this.setElement(k)}this.$(".aui-sidebar-group").each(c.bind(function(o,p){var r=new e({el:p});var q=!!this.getGroup(r.id);if(q){d.warn('Duplicated IDs detected. There are more than one NavigationGroup with id data-id="'+r.id+'"')}this.proxyChildEvents(r);this.children.add(r,r.id)},this));this.trigger("render");return this},deselectAllGroups:function(){this.children.call("deselect")},replaceGroup:function(h,j){var i=this.getGroup(h);i.$el.replaceWith(j.$el);j.cid=i.cid;this.children.remove(i);this.children.add(j,j.id)},getGroup:function(h){return this.children.findByCustom(h)},getGroupAt:function(h){return this.children.findByIndex(h)},getItem:function(h){return this.getDefaultGroup().getItem(h)},getElement:function(){return this.el},getDefaultGroup:function(){return this.getGroup("sidebar-navigation-panel")},isProjectSidebar:function(){return !b},getSelectedScopeFilterId:function(){return this.$(".scope-filter a.scope-filter-trigger").attr("data-scope-filter-id")},setReportsItemLink:function(i){var j=this.getGroup("sidebar-navigation-panel");var h=j.getItem("com.atlassian.jira.jira-projects-plugin:report-page");if(typeof h==="undefined"){h=j.getItem("com.pyxis.greenhopper.jira:global-sidebar-report")}if(h){h.ui.link.attr("href",i)}},getAUISidebar:function(){return AJS.sidebar(".aui-sidebar")},getContentContainer:function(){return this.$(".aui-sidebar-body .sidebar-content-container")},getSelectedNavigationItem:function(){return this.getDefaultGroup().getSelectedNavigationItem()},hasASelectedItem:function(){return this.getDefaultGroup().hasASelectedItem()},dim:function(){this.$el.attr({dimmed:"","aria-hidden":"true"})},undim:function(){this.$el.removeAttr("dimmed");this.$el.removeAttr("aria-hidden")}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-component', location = '/sidebar/component/component-namespaces.js' */
(function(){var a=require("jira/projects/sidebar/component/navigation-group-factory");var b=require("jira/projects/sidebar/component");AJS.namespace("JIRA.Projects.Sidebar.Component",null,b);AJS.namespace("JIRA.Projects.Sidebar.Component.NavigationItem",null,require("jira/projects/sidebar/component/navigation-item"));AJS.namespace("JIRA.Projects.Sidebar.Component.NavigationSubgroup",null,require("jira/projects/sidebar/component/navigation-subgroup"));AJS.namespace("JIRA.Projects.Sidebar.Component.NavigationGroup",null,require("jira/projects/sidebar/component/navigation-group"));AJS.namespace("JIRA.Projects.Sidebar.Component.NavigationGroup.build",null,a.build)})();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-api', location = '/sidebar/api.js' */
define("jira/api/projects/sidebar",["jira/jquery/deferred","exports"],function(b,a){var d=new b();var c=undefined;a.getSidebar=function(){return d.promise()};a.initAPI=function(e){c=e;AJS.namespace("JIRA.API.Sidebar",null,c);d.resolve(c)}});AJS.namespace("JIRA.API.getSidebar",null,require("jira/api/projects/sidebar").getSidebar);;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-analytics', location = '/sidebar/analytics/hash.js' */
define("jira/projects/sidebar/analytics/hash",["underscore"],function(b){var e=[];function c(f,g){return f.indexOf(g)===0}function d(f,g){return f.substring(c(f,g)?g.length:0)}function a(g){var f;var j=0;if(!g){return""}for(var h=0;h<g.length;h+=1){f=g.charCodeAt(h);j=((j*32)-j)+f;j|=0}return j}return{prefixedHash:function(f){var g=b.find(e,b.partial(c,f))||"";return{prefix:g,hash:g+a(d(f,g))}},addPrefix:function(f){if(f&&!b.contains(e,f)){e.push(f)}},clearPrefixes:function(){e.length=0}}});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-analytics', location = '/sidebar/analytics/analytics.js' */
define("jira/projects/sidebar/analytics/analytics",["jira/api/projects/sidebar","jira/projects/sidebar/analytics/hash","jira/util/data/meta","jira/analytics","jquery"],function(h,f,d,j,g){function m(n){return f.prefixedHash(n||"NONE")}function b(n,o){j.send({name:"jira.project.centric.navigation.sidebar."+n,data:o})}var k="proj.config";function a(){return g('meta[name="admin.active.section"]').attr("content")==="atl.jira.proj.config"}function c(n){return i.indexOf([k,n].join("."))!==-1}function e(n){var p=n.getAUISidebar();var o=g();o=o.add(p.$el);o=o.add(p.submenus.inlineDialog);o.on("click","a",function(){var r=m(g(this).attr("data-link-id"));var q={id:r.hash,prefix:r.prefix};var t=d.get("sidebar-source-page");if(t){q.sidebarSourcePage=t}else{if(g(".issue-tools button.expand").length>0){q.sidebarSourcePage="search-el"}else{if(g(".navigation-tools button.collapse").length>0){q.sidebarSourcePage="fullscreen-el"}else{if(a()){var s=g('meta[name="admin.active.tab"]').attr("content");s=s.replace("com.atlassian.servicedesk.project-ui:","");if(c(s)){q.sidebarSourcePage=[k,s].join(".")}else{q.sidebarSourcePage=k}}}}}if(i.indexOf(q.sidebarSourcePage)===-1){q.sidebarSourcePage="unknown"}b("click.link",q)})}var i=["search-el","fullscreen-el","search","fullscreen","rapid-board","service-desk","proj.config","proj.config.view_project_summary","proj.config.view_project_issuetypes","proj.config.project-issuetypes-expand","proj.config.view_project_workflows","proj.config.view_project_screens","proj.config.view_project_fields","proj.config.view_project_versions","proj.config.view_project_components","proj.config.view_project_roles","proj.config.view_project_permissions","proj.config.view_project_issuesecurity","proj.config.view_project_notifications","proj.config.devstatus-admin-page-link","proj.config.hipchat-project-admin-page-link","proj.config.view_issue_collectors","proj.config.sd-project-request-types-item","proj.config.sd-project-request-security-item","proj.config.sd-project-portal-settings-item","proj.config.sd-project-feedback-settings-item","proj.config.sd-project-email-settings-item","proj.config.sd-project-confluence-kb-item","proj.config.sd-project-sidebar-sla","proj.config.sd-project-automation-item"];function l(){h.getSidebar().done(function(n){if(n.isProjectSidebar()){b("load.project")}else{b("load.global")}e(n)})}return{register:l}});AJS.namespace("JIRA.Projects.Sidebar.Analytics",null,require("jira/projects/sidebar/analytics/analytics"));AJS.namespace("JIRA.Projects.Sidebar.Analytics.Hash",null,require("jira/projects/sidebar/analytics/hash"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-expansion-manager', location = '/sidebar/expansion-manager.js' */
define("jira/projects/sidebar/expansion-manager",["wrm/data"],function(a){var c="jira-sidebar-collapsed";var b=Boolean(a.claim("sidebar-collapsed-by-default"));return function(f,h){h||(h=window.localStorage);g();f.on("expand-start",e);f.on("expand-end collapse-end",d);function e(i){if(i.isResponsive&&h[c]==="true"){i.preventDefault()}}function d(i){if(!i.isResponsive&&!f.isViewportNarrow()){h[c]=f.isCollapsed().toString()}}function g(){if(f.reflow()&&f.isViewportNarrow()){return}if((b&&h[c]===undefined)||h[c]==="true"){f.collapse()}else{f.expand()}}}});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:scope-filter', location = '/sidebar/scopefilter/templates.soy' */
// This file was automatically generated from templates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Projects.Sidebar.ScopeFilter.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Projects == 'undefined') { JIRA.Projects = {}; }
if (typeof JIRA.Projects.Sidebar == 'undefined') { JIRA.Projects.Sidebar = {}; }
if (typeof JIRA.Projects.Sidebar.ScopeFilter == 'undefined') { JIRA.Projects.Sidebar.ScopeFilter = {}; }
if (typeof JIRA.Projects.Sidebar.ScopeFilter.Templates == 'undefined') { JIRA.Projects.Sidebar.ScopeFilter.Templates = {}; }


JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedContainer = function(opt_data, opt_ignored) {
  return '<div class="aui-sidebar-group aui-sidebar-group-actions collapsed-scope-filter-container"><!-- AUI sidebar does a if (!hasSubmenu) check while initializing submenu hence we need aui-nav element even if it is empty, so that our sidebar group gets properly initialized --><ul class="aui-nav"><!-- On first hover, while we are waiting for data, this content will be displayed in submenu inline dialog. Once we have data we will replace this with the actual data in DOM. Any further hover will clone the new DOM structure (actual data without progress indicator) and display in the submenu dialog. This is the only way I could find to pass a progress indicator to submenu inside dialog, because AUI does a destructive `submenuInlineDialog.innerHTML=` AFTER `sidebarSubmenuBeforeShow` event handler is executed, hence losing anything injected from it--><li><aui-spinner size="small" style="margin: auto"/></li></ul></div>';
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedContainer.soyTemplateName = 'JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedContainer';
}


JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedScopeList = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '';
  if (opt_data.selectableScopes || opt_data.createActions) {
    output += '<div class="aui-nav-heading" title="' + soy.$$escapeHtml('Boards in this project') + '"><strong class="collapsed-scope-header">' + soy.$$escapeHtml('Boards in this project') + '</strong></div><ul class="aui-nav collapsed-scope-list" title="' + soy.$$escapeHtml('Select a board') + '">';
    if (opt_data.selectedScope) {
      output += '<li class="scope-filter selected-scope-filter" title="' + soy.$$escapeHtml(opt_data.selectedScope.label) + '">' + soy.$$escapeHtml(opt_data.selectedScope.label) + '</li>';
      var scopeFilterList21 = opt_data.selectableScopes;
      var scopeFilterListLen21 = scopeFilterList21.length;
      for (var scopeFilterIndex21 = 0; scopeFilterIndex21 < scopeFilterListLen21; scopeFilterIndex21++) {
        var scopeFilterData21 = scopeFilterList21[scopeFilterIndex21];
        output += JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedSelectableItem({itemClass: 'scope-filter', anchorClass: scopeFilterData21.styleClass, label: scopeFilterData21.label, link: scopeFilterData21.link});
      }
    }
    if (opt_data.createActions && opt_data.createActions[0]) {
      output += '<hr/>';
      var createActionList31 = opt_data.createActions;
      var createActionListLen31 = createActionList31.length;
      for (var createActionIndex31 = 0; createActionIndex31 < createActionListLen31; createActionIndex31++) {
        var createActionData31 = createActionList31[createActionIndex31];
        output += JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedSelectableItem({itemClass: 'create-scope-action', anchorClass: createActionData31.styleClass, label: createActionData31.label, link: createActionData31.link});
      }
    }
    output += '</ul>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedScopeList.soyTemplateName = 'JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedScopeList';
}


JIRA.Projects.Sidebar.ScopeFilter.Templates.scopeListError = function(opt_data, opt_ignored) {
  return '<div class="scope-filter-error-message-container"><div class="scope-filter-error-message">' + soy.$$escapeHtml('We\x27re having trouble retrieving the list of boards') + '</div><div class="aui-button aui-button-compact">' + soy.$$escapeHtml('Try again') + '</div></div>';
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ScopeFilter.Templates.scopeListError.soyTemplateName = 'JIRA.Projects.Sidebar.ScopeFilter.Templates.scopeListError';
}


JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedSelectableItem = function(opt_data, opt_ignored) {
  return '<li class="' + soy.$$escapeHtml(opt_data.itemClass) + '"><a href="' + soy.$$escapeHtml(opt_data.link) + '" title="' + soy.$$escapeHtml(opt_data.label) + '"' + ((opt_data.anchorClass) ? ' class="' + soy.$$escapeHtml(opt_data.anchorClass) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.label) + '</a></li>';
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedSelectableItem.soyTemplateName = 'JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedSelectableItem';
}


JIRA.Projects.Sidebar.ScopeFilter.Templates.renderScopefilterItems = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '';
  if (opt_data.scopeFilterItems.length > 0) {
    output += '<div class="aui-dropdown2-section"><strong>' + soy.$$escapeHtml('Boards in this project') + '</strong><ul class="aui-list-truncate">';
    var itemList67 = opt_data.scopeFilterItems;
    var itemListLen67 = itemList67.length;
    for (var itemIndex67 = 0; itemIndex67 < itemListLen67; itemIndex67++) {
      var itemData67 = itemList67[itemIndex67];
      output += '<li><a href="' + soy.$$escapeHtml(itemData67.link) + '" title="' + soy.$$escapeHtml(itemData67.label) + '" data-scope-filter-id="' + soy.$$escapeHtml(itemData67.id) + '">' + soy.$$escapeHtml(itemData67.label) + '</a></li>';
    }
    output += '</ul></div>';
  } else if (! opt_data.canCreateScope) {
    output += '<div class="aui-dropdown2-section"><strong>' + soy.$$escapeHtml('Boards in this project') + '</strong><div class="empty-boards-list">' + soy.$$escapeHtml('No boards to display') + '</div></div>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ScopeFilter.Templates.renderScopefilterItems.soyTemplateName = 'JIRA.Projects.Sidebar.ScopeFilter.Templates.renderScopefilterItems';
}
;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:scope-filter', location = '/sidebar/scopefilter/templates.js' */
define("jira/projects/sidebar/scopefilter/templates",function(){return JIRA.Projects.Sidebar.ScopeFilter.Templates});AJS.namespace("JIRA.Projects.Sidebar.ScopeFilter.Templates",null,require("jira/projects/sidebar/scopefilter/templates"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:scope-filter', location = '/sidebar/scopefilter/model.js' */
define("jira/projects/sidebar/scopefilter/model",["underscore"],function(a){var b=function(c){this.selectedScope=null;this.createScopeActions=[];this.selectableScopes=[];this.setData(c)};b.prototype.setData=function(c){if(!c){return}if(c.selectedScope){this.selectedScope=c.selectedScope}if(c.createScopeActions.length){this.createScopeActions=c.createScopeActions}if(c.scopes.length){if(c.selectedScope){this.selectableScopes=a.reject(c.scopes,function(d){return d.label===this.selectedScope.label&&d.link===this.selectedScope.link},this)}else{this.selectableScopes=c.scopes}}};b.prototype.getSelectedScope=function(){return this.selectedScope};b.prototype.getSelectableScopes=function(){return this.selectableScopes};b.prototype.getCreateScopeActions=function(){return this.createScopeActions};b.prototype.shouldDisplayWhenSidebarIsCollapsed=function(){var d=this.createScopeActions.length>0;var c=this.selectableScopes.length>0;return d||c};return b});AJS.namespace("JIRA.Projects.Sidebar.ScopeFilter.Model",null,require("jira/projects/sidebar/scopefilter/model"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:scope-filter', location = '/sidebar/scopefilter/scopeFilterDropdownView.js' */
define("jira/projects/sidebar/scopefilter/scopefilter-view",["jquery","jira/projects/libs/marionette","jira/projects/sidebar/scopefilter/templates"],function(b,c,a){return c.ItemView.extend({template:a.renderScopefilterItems,events:{"aui-dropdown2-show":"show"},initialize:function(d){this.controller=d.controller;this.rendered=false},show:function(){if(this.rendered){return}var d=b('<aui-spinner size="small"/>').css("margin","auto");this.$el.prepend(d);this.$el.addClass("data-load-in-progress");this.controller.fetchScopeFilterList().then(this.onFetchSuccess.bind(this)).fail(this.onFetchFail.bind(this)).always(function(){this.$el.addClass("data-load-finished").removeClass("data-load-in-progress");d.remove()}.bind(this))},onFetchSuccess:function(){this.$el.addClass("data-load-success");var f=this.model.getSelectableScopes();var d=!!this.model.getCreateScopeActions().length;if(f){var e=this.template({scopeFilterItems:f,canCreateScope:d});this.$el.prepend(e);this.rendered=true}},onFetchFail:function(){this.$el.addClass("data-load-fail");var d=a.scopeListError();this.$el.prepend(d);this.rendered=true;this.$el.find(".scope-filter-error-message-container .aui-button").on("click",this.onRetryClick.bind(this))},onRetryClick:function(f){f.stopPropagation();var d=this.$el.find(".scope-filter-error-message-container");if(d.length){d.remove()}this.rendered=false;return this.show()}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:scope-filter', location = '/sidebar/scopefilter/collapsed-view.js' */
define("jira/projects/sidebar/scopefilter/collapsed-view",["jquery","jira/projects/libs/marionette","jira/projects/sidebar/scopefilter/templates"],function(b,c,a){return c.ItemView.extend({template:a.collapsedContainer,ui:{trigger:".aui-sidebar-group-actions"},events:{"aui-sidebar-submenu-before-show @ui.trigger":"show"},initialize:function(d){this.controller=d.controller;this.rendered=false},serializeData:function(){return{selectedScope:this.model.getSelectedScope(),selectableScopes:this.model.getSelectableScopes(),createActions:this.model.getCreateScopeActions()}},show:function(e,d){if(this.rendered){return}this.$el.addClass("data-load-in-progress");this.controller.fetchScopeFilterList().then(this.onFetchSuccess.bind(this,d)).fail(this.onFetchFail.bind(this,d)).always(function(){this.$el.addClass("data-load-finished").removeClass("data-load-in-progress")}.bind(this))},onFetchSuccess:function(e){this.$el.addClass("data-load-success");var d=a.collapsedScopeList(this.serializeData());this.renderPreparedTemplate(e,d);this.rendered=true},onFetchFail:function(e){this.$el.addClass("data-load-fail");var d=a.scopeListError();this.renderPreparedTemplate(e,d);b(e).find(".scope-filter-error-message-container .aui-button").click(this.onRetryClick.bind(this,e))},renderPreparedTemplate:function(d,e){this.ui.trigger.html(e);b(d).find(".aui-navgroup-inner").html(e)},onRetryClick:function(d){return this.show(null,d)}})});AJS.namespace("JIRA.Projects.Sidebar.ScopeFilter.CollapsedView",null,require("jira/projects/sidebar/scopefilter/collapsed-view"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:scope-filter', location = '/sidebar/scopefilter/scopeFilterController.js' */
define("jira/projects/sidebar/scopefilter/controller",["jquery","wrm/require","wrm/data","jira/api/projects","wrm/context-path","jira/util/logger","jira/projects/libs/marionette","jira/projects/sidebar/scopefilter/model","jira/projects/sidebar/scopefilter/scopefilter-view","jira/projects/sidebar/scopefilter/collapsed-view"],function(c,d,i,a,b,j,f,g,h,e){return f.Controller.extend({initialize:function(k){this.sidebarAPI=k.sidebarAPI;this.sidebar=this.sidebarAPI.getAUISidebar();this.$sidebarContentContainer=this.sidebarAPI.getContentContainer();if(!this.sidebarAPI.isProjectSidebar()){return}var l=i.claim("scope-filter-data");this.scopeFilterModel=new g(l);this.dataFetched=false;this.shouldRenderScopeFilterView=!this.scopeFilterModel.getSelectableScopes().length;if(this.sidebar.isCollapsed()){this.createCollapsedScopeFilterView()}else{this.createScopeFilterView()}this.listenToSidebarEvents()},createCollapsedScopeFilterView:function(){if(!this.scopeFilterModel.shouldDisplayWhenSidebarIsCollapsed()){return}this.collapsedView=new e({model:this.scopeFilterModel,controller:this});this.collapsedView.render();this.$sidebarContentContainer.prepend(this.collapsedView.el);j.trace("sidebar.scopefilter.collapsed")},createScopeFilterView:function(){if(!this.shouldRenderScopeFilterView){return}this.scopeFilterDropdownView=new h({el:"#sidebar-scope-filter-list",model:this.scopeFilterModel,controller:this})},fetchScopeFilterList:function(){var k=c.Deferred();if(this.dataFetched||this.scopeFilterModel.getSelectableScopes().length){return k.resolve()}var l=b()+"/rest/projects/1.0/project/"+a.getCurrentProjectKey()+"/rapidviews";return c.ajax({contentType:"application/json",type:"GET",url:l}).done(function(m){this.dataFetched=true;this.scopeFilterModel.setData(m)}.bind(this))},listenToSidebarEvents:function(){this.sidebar.on("collapse-start",function(){if(this.collapsedView){return}this.createCollapsedScopeFilterView()}.bind(this));this.sidebar.on("expand-end",function(){if(this.collapsedView){this.collapsedView.destroy();this.collapsedView=null}if(this.scopeFilterDropdownView){return}this.createScopeFilterView()}.bind(this))}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:scope-filter', location = '/sidebar/scopefilter/scopeFilter-init.js' */
require(["jira/api/projects/sidebar","jira/projects/sidebar/scopefilter/controller"],function(a,b){a.getSidebar().done(function(c){new b({sidebarAPI:c})})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:feature-discovery', location = '/sidebar/feature-discovery/feature-discovery.js' */
define("jira/projects/sidebar/feature-discovery",["jira/api/projects","jira/api/projects/sidebar","wrm/context-path","underscore","jquery"],function(d,e,a,c,f){function b(i,h){c.each(h,function(k){var j=i.getItem(k);if(j){j.removeBadge()}})}function g(h){e.getSidebar().done(function(i){b(i,h)})}return{updateBadges:function(){if(typeof d.getCurrentProjectKey()==="undefined"){return}f.ajax({url:a()+"/rest/projects/1.0/project/"+encodeURIComponent(d.getCurrentProjectKey())+"/badges",type:"PUT",contentType:"application/json"}).done(function(h){g(h.badgesToRemove||[])})}}});AJS.namespace("JIRA.Projects.Sidebar.FeatureDiscovery",null,require("jira/projects/sidebar/feature-discovery"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-last-visited', location = '/sidebar/lastvisited/last-visited-updater.js' */
define("jira/projects/sidebar/lastvisited/updater",["jira/api/projects","jira/util/logger","wrm/context-path","jquery"],function(d,b,a,e){function c(f,g,h){if(!f){return}h=h||function(){b.trace("last.visited.item.saved")};e.ajax({url:a()+"/rest/projects/1.0/project/"+encodeURIComponent(f)+"/lastVisited",type:"PUT",contentType:"application/json",data:JSON.stringify({id:g})}).done(h)}return{start:function(g,i){var f=d.getCurrentProjectKey();var h=g.getSelectedNavigationItem();if(h){c(f,h.getId(),i)}g.on("before:navigate:prevented",function(j){c(f,j.emitter.id,i)});g.on("before:select",function(j){if(j.isInitial){c(f,j.emitter.id,i)}})}}});AJS.namespace("JIRA.Projects.Sidebar.LastVisited.Updater",null,require("jira/projects/sidebar/lastvisited/updater"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar', location = '/sidebar/sidebar-init.js' */
define("jira/projects/sidebar/sidebar-initializer",["require"],function(d){var l=d("jira/util/logger");var c=d("jira/api/projects");var h=d("jira/api/projects/sidebar");var m=d("jira/project/types/warning/dialog");var j=d("jira/projects/sidebar/lastvisited/updater");var b=d("jira/projects/sidebar/component");var a=d("jira/projects/sidebar/analytics/analytics");var i=d("jira/projects/sidebar/analytics/hash");var g=d("wrm/context-path");var n=d("jquery");var k=d("underscore");var f=["NONE","com.atlassian.jira.jira-projects-plugin:project-issue-search-link","com.atlassian.jira.jira-projects-plugin:components-page","com.atlassian.jira.jira-projects-plugin:reports-panel","com.atlassian.jira.jira-projects-plugin:summary-panel","com.atlassian.jira.jira-projects-plugin:summary-page","com.atlassian.jira.jira-projects-plugin:components-page","com.atlassian.jira.jira-projects-plugin:release-page","com.atlassian.jira.jira-projects-plugin:release-sidebar-version-","com.atlassian.jira.jira-projects-plugin:report-page","com.pyxis.greenhopper.jira:global-sidebar-report","com.pyxis.greenhopper.jira:global-sidebar-plan-scrum","com.pyxis.greenhopper.jira:global-sidebar-work-scrum","com.pyxis.greenhopper.jira:global-sidebar-work-kanban","com.pyxis.greenhopper.jira:project-sidebar-plan-scrum","com.pyxis.greenhopper.jira:project-sidebar-work-scrum","com.pyxis.greenhopper.jira:project-sidebar-work-kanban","com.atlassian.jira.jira-projects-issue-navigator:embedded-issue-navigator-link","com.atlassian.jira.jira-projects-issue-navigator:sidebar-issue-navigator"];var e=function(s){function p(u){var t=n(".aui-sidebar .aui-badge");t.tooltip({gravity:"w"});if(u.isCollapsed()){t.tooltip("disable")}u.on("collapse-end expand-end",function(){n(".tipsy").remove();n(".aui-sidebar .aui-badge").tooltip("toggleEnabled")})}function q(u){function t(){u.getAUISidebar().reflow()}setTimeout(t,200);setInterval(t,5*60*1000)}function r(t){t.on("collapse-start",function(){var u=t.$el.find(".scope-filter-trigger");if(u.hasClass("aui-dropdown2-active")){u.trigger("aui-button-invoke")}})}function o(){m.init({onProjectTypeChanged:function(){var t=c.getCurrentProjectKey();window.location.replace(g()+"/projects/"+t+"/summary")}});l.trace("project.types.warning.messages.init")}h.initAPI(new b({el:s.$el[0]}));k(f).each(i.addPrefix);a.register();r(s);p(s);o();h.getSidebar().done(function(t){q(t);j.start(t)})};return{init:e}});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/templates.soy' */
// This file was automatically generated from templates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Projects.Sidebar.ProjectShortcuts.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Projects == 'undefined') { JIRA.Projects = {}; }
if (typeof JIRA.Projects.Sidebar == 'undefined') { JIRA.Projects.Sidebar = {}; }
if (typeof JIRA.Projects.Sidebar.ProjectShortcuts == 'undefined') { JIRA.Projects.Sidebar.ProjectShortcuts = {}; }
if (typeof JIRA.Projects.Sidebar.ProjectShortcuts.Templates == 'undefined') { JIRA.Projects.Sidebar.ProjectShortcuts.Templates = {}; }


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.content = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.canManage || opt_data.numberOfShortcuts > 0) {
    output += '<div class="aui-sidebar-group jira-sidebar-group-with-divider project-shortcuts-group' + ((opt_data.numberOfShortcuts == 0) ? ' project-shortcuts-group_empty' : '') + '" data-id="project-shortcuts-group"><span class="aui-icon aui-icon-small aui-iconfont-link">' + soy.$$escapeHtml('Project shortcuts') + '</span><div class="aui-nav-heading">' + soy.$$escapeHtml('Project shortcuts') + '</div>' + ((opt_data.canManage) ? '<p class="project-shortcuts-group__description' + ((opt_data.numberOfShortcuts > 0) ? ' hidden' : '') + '">' + soy.$$escapeHtml('Add a link to useful information for your whole team to see.') + '</p>' : '') + '<ul class="aui-nav project-shortcuts-list">';
    if (opt_data.shortcuts) {
      var shortcutList26 = opt_data.shortcuts;
      var shortcutListLen26 = shortcutList26.length;
      for (var shortcutIndex26 = 0; shortcutIndex26 < shortcutListLen26; shortcutIndex26++) {
        var shortcutData26 = shortcutList26[shortcutIndex26];
        output += JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcut({id: shortcutData26.id, name: shortcutData26.name, url: shortcutData26.url, icon: shortcutData26.icon, canManage: opt_data.canManage, iconsMap: opt_data.iconsMap, isWithIcon: opt_data.isWithIcons});
      }
    }
    output += ((opt_data.canManage) ? '<li><a class="aui-nav-item project-shortcuts-group__add" href="#" data-link-id="project-shortcut-add"><span class="aui-icon aui-icon-large aui-iconfont-add-small"></span><span class="aui-nav-item-label">' + soy.$$escapeHtml('Add link') + '</span></a></li>' : '') + '</ul></div>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.content.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.content';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcut = function(opt_data, opt_ignored) {
  return '<li class="project-shortcut"><a class="aui-nav-item project-shortcuts-group__link" href="' + soy.$$escapeHtml(opt_data.url) + '" title="' + soy.$$escapeHtml(opt_data.name) + '" target="_blank" data-shortcut-id="' + soy.$$escapeHtml(opt_data.id) + '" data-link-id="project-shortcut-' + soy.$$escapeHtml(opt_data.id) + '">' + ((opt_data.isWithIcon) ? '<span class="aui-icon aui-icon-large ' + JIRA.Projects.Sidebar.ProjectShortcuts.Templates.icon({iconId: opt_data.icon, iconsMap: opt_data.iconsMap}) + '" data-project-shortcuts-icon-id="' + soy.$$escapeHtml(opt_data.icon) + '">' + soy.$$escapeHtml('Project shortcut icon') + '</span>' : '') + '<span class="aui-nav-item-label">' + soy.$$escapeHtml(opt_data.name) + '</span></a>' + ((opt_data.canManage) ? '<button class="aui-button aui-button-subtle aui-dropdown2-trigger aui-dropdown2-trigger-arrowless project-shortcuts-group__actions" aria-owns="project-shortcuts-dropdown_' + soy.$$escapeHtml(opt_data.id) + '" aria-controls="project-shortcuts-dropdown_' + soy.$$escapeHtml(opt_data.id) + '" aria-haspopup="true"><span class="aui-icon aui-icon-small aui-iconfont-more">' + soy.$$escapeHtml('Filter Actions') + '</span></button><div id="project-shortcuts-dropdown_' + soy.$$escapeHtml(opt_data.id) + '" class="aui-dropdown2 aui-style-default project-shortcuts-group__dropdown"><ul class="aui-list-truncate"><li><a class="project-shortcuts-group__actions__edit" href="#">' + soy.$$escapeHtml('Edit') + '</a></li><li><a class="project-shortcuts-group__actions__delete  " href="#">' + soy.$$escapeHtml('Delete') + '</a></li></ul></div>' : '') + '</li>';
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcut.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcut';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.icon = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '';
  if (opt_data.iconsMap) {
    var id__soy85 = opt_data.iconId && opt_data.iconsMap[opt_data.iconId] ? opt_data.iconId : '1';
    output += (opt_data.iconsMap[id__soy85]) ? soy.$$escapeHtml(opt_data.iconsMap[id__soy85].className) : '';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.icon.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.icon';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcutFormFields = function(opt_data, opt_ignored) {
  return '<div class="project-shortcuts-field-group">' + aui.form.textField({name: 'project-shortcuts-url-' + opt_data.action, isRequired: true, id: 'project-shortcuts-url-' + opt_data.action, labelContent: 'Web address', placeholderText: 'e.g. http://www.atlassian.com', extraClasses: 'project-shortcuts-url', value: opt_data.url ? opt_data.url : '', errorTexts: opt_data.errors.urlError ? [opt_data.errors.urlError] : []}) + '<div class="field-group project-shortcuts-name">' + aui.form.label({isRequired: true, forField: 'project-shortcuts-name-' + opt_data.action, content: 'Label'}) + '<div class="project-shortcuts-name-icon-block"><div class="project-shortcuts-icon-picker-block"></div>' + aui.form.input({name: 'project-shortcuts-name-' + opt_data.action, id: 'project-shortcuts-name-' + opt_data.action, placeholderText: 'e.g. Atlassian website', extraClasses: 'project-shortcuts-name-input' + (opt_data.isWithIcon ? ' project-shortcuts-name-input-with-icon' : ''), value: opt_data.name ? opt_data.name : '', type: 'text'}) + '</div>' + ((opt_data.errors.iconError) ? aui.form.fieldError({message: opt_data.errors.iconError}) : '') + ((opt_data.errors.nameError) ? aui.form.fieldError({message: opt_data.errors.nameError}) : '') + '</div></div>';
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcutFormFields.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcutFormFields';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.iconsPicker = function(opt_data, opt_ignored) {
  return '<span>' + JIRA.Projects.Sidebar.ProjectShortcuts.Templates.iconsList(opt_data) + '</span>' + aui.dropdown2.trigger({menu: {id: 'project-shortcuts-icons-list-' + opt_data.cid}, extraClasses: 'aui-button project-shortcuts-icons-picker', iconClasses: 'aui-icon aui-icon-large  ' + soy.$$escapeHtml(opt_data.icon.className), extraAttributes: {href: '#'}});
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.iconsPicker.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.iconsPicker';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.iconsList = function(opt_data, opt_ignored) {
  var output = '<div id="project-shortcuts-icons-list-' + soy.$$escapeHtml(opt_data.cid) + '" aria-hidden="true" class="aui-style-default aui-dropdown2 project-shortcuts-icons-list aui-dropdown2-section"><ul>';
  var iconList140 = opt_data.iconsList;
  var iconListLen140 = iconList140.length;
  for (var iconIndex140 = 0; iconIndex140 < iconListLen140; iconIndex140++) {
    var iconData140 = iconList140[iconIndex140];
    output += '<li><a class="project-shortcuts-icons-icon" data-project-shortcuts-icons-id="' + soy.$$escapeHtml(iconData140.name) + '"><span class="aui-icon aui-icon-large ' + soy.$$escapeHtml(iconData140.className) + '">' + soy.$$escapeHtml('Project shortcut icon') + '</span></a></li>';
  }
  output += '</ul></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.iconsList.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.iconsList';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.addDialog = function(opt_data, opt_ignored) {
  return '<form action="" method="post" class="aui"><h3>' + soy.$$escapeHtml('Add link') + '</h3><fieldset>' + JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcutFormFields(soy.$$augmentMap(opt_data, {action: 'add'})) + '<div class="buttons-container"><div class="buttons"><button class="aui-button project-shortcuts-submit aui-button-primary">' + soy.$$escapeHtml('Add') + '</button><button class="aui-button aui-button-link project-shortcuts-cancel">' + soy.$$escapeHtml('Cancel') + '</button></div></div></fieldset></form>';
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.addDialog.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.addDialog';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.editDialogChrome = function(opt_data, opt_ignored) {
  return '<section role="dialog" id="edit-project-shortcut-dialog" class="aui-layer aui-dialog2 aui-dialog2-small" aria-hidden="true" data-aui-remove-on-hide="true"><header class="aui-dialog2-header"><h2 class="aui-dialog2-header-main">' + soy.$$escapeHtml('Edit link') + '</h2></header></section>';
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.editDialogChrome.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.editDialogChrome';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.editDialog = function(opt_data, opt_ignored) {
  return '<div class="aui-dialog2-content"><form class="aui" method="post">' + JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcutFormFields(soy.$$augmentMap(opt_data, {action: 'edit'})) + '<button type="submit" class="project-shortcuts-hidden-submit"></button></form></div><footer class="aui-dialog2-footer"><div class="aui-dialog2-footer-actions"><button class="aui-button aui-button-primary project-shortcuts-submit">' + soy.$$escapeHtml('Save') + '</button><button class="aui-button aui-button-link project-shortcuts-cancel">' + soy.$$escapeHtml('Cancel') + '</button></div></footer>';
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.editDialog.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.editDialog';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.deleteDialog = function(opt_data, opt_ignored) {
  return '<section role="dialog" id="delete-project-shortcut-dialog" class="aui-layer aui-dialog2 aui-dialog2-small" aria-hidden="true" data-aui-remove-on-hide="true"><header class="aui-dialog2-header"><h2 class="aui-dialog2-header-main">' + soy.$$escapeHtml('Delete shortcut') + '</h2></header><div class="aui-dialog2-content"><p>' + soy.$$escapeHtml('Are you sure you want to delete this shortcut?') + '</p></div><footer class="aui-dialog2-footer"><div class="aui-dialog2-footer-actions"><button class="aui-button aui-button-primary project-shortcuts-submit">' + soy.$$escapeHtml('Delete') + '</button><button class="aui-button aui-button-link project-shortcuts-cancel">' + soy.$$escapeHtml('Cancel') + '</button></div></footer></section>';
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.deleteDialog.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.deleteDialog';
}
;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/templates.js' */
define("jira/projects/sidebar/project-shortcuts/templates",function(){return JIRA.Projects.Sidebar.ProjectShortcuts.Templates});AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Templates",null,require("jira/projects/sidebar/project-shortcuts/templates"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/project-shortcuts-analytics.js' */
define("jira/projects/sidebar/project-shortcuts/analytics",["jira/ajs/dark-features","jira/analytics","jquery"],function(b,a,d){var e="a.project-shortcuts-group__link";var c=b.isEnabled("com.atlassian.jira.projects.ProjectCentricNavigation.ProjectShortcutIcons");return{initialize:function(f){this.projectId=f},initShortcutClick:function(j,h){var i=h.getAUISidebar();var g=d(j);var f=this;g.on("click",e,function(m){var l=g.find(e);var k=d(this);a.send({name:"jira.projects.shortcut.clicked",data:{shortcutId:k.data("shortcutId"),shortcutPosition:k.closest("li").index()+1,shortcutIconName:c?k.find(".aui-icon").data("projectShortcutsIconId"):"",shortcutCount:l.size(),isWithIcons:c,isSidebarCollapsed:i.isCollapsed(),projectId:f.projectId}})})},initDialogActions:function(g){var f=this;g.on("childview:edit:open",function(h,j){var i=j.collection.indexOf(j)+1;a.send({name:"jira.projects.shortcut.edit.dialog.opened",data:{isWithIcons:c,shortcutId:j.get("id"),shortcutPosition:i,shortcutCount:j.collection.size(),projectId:f.projectId}})});g.on("childview:edit:close",function(h,j,k){var i=j.collection.indexOf(j)+1;a.send({name:"jira.projects.shortcut.edit.dialog.closed",data:{isWithIcons:c,isSave:k,shortcutId:j.get("id"),shortcutPosition:i,shortcutCount:j.collection.size(),projectId:f.projectId}})});g.on("add:open",function(){a.send({name:"jira.projects.shortcut.add.dialog.opened",data:{isWithIcons:c,projectId:f.projectId}})});g.on("add:close",function(h){a.send({name:"jira.projects.shortcut.add.dialog.closed",data:{isWithIcons:c,isSave:h,projectId:f.projectId}})})},iconChanged:function(f,h,g){a.send({name:"jira.projects.shortcut.icon.changed",data:{iconName:h,oldIconName:g,shortcutId:f.isNew()?"":f.get("id"),isNew:f.isNew(),cid:f.cid,projectId:this.projectId}})},iconChangeConfirmed:function(f,g){a.send({name:"jira.projects.shortcut.icon.confirmed",data:{oldIconName:f.get("icon"),iconName:g,shortcutId:f.isNew()?"":f.get("id"),isNew:f.isNew(),cid:f.cid,projectId:this.projectId}})},iconPickerOpened:function(f){a.send({name:"jira.projects.shortcut.icon.picker.opened",data:{shortcutId:f.isNew()?"":f.get("id"),isNew:f.isNew(),cid:f.cid,projectId:this.projectId}})},iconPickerClosed:function(f,g){a.send({name:"jira.projects.shortcut.icon.picker.closed",data:{shortcutId:f.isNew()?"":f.get("id"),isNew:f.isNew(),cid:f.cid,isSave:g,projectId:this.projectId}})}}});AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Analytics",null,require("jira/projects/sidebar/project-shortcuts/analytics"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/services/AvailableIcons.js' */
define("jira/projects/sidebar/project-shortcuts/services/available-icons",["underscore"],function(c){var d=[];var a={};var b=false;return{initialize:function(e){d=e||d;a={};c.each(e,function(f){a[f.name]=f})},getIconsList:function(){return d},getIconsMap:function(){return a},getAllIconsClasses:function(){return c.reduce(d,function(e,f){return e+f.className+" "},"")},getIconFromName:function(e){if(this.getIconsMap()[e]){return this.getIconsMap()[e]}if(this.getIconsList()[0]){return this.getIconsList()[0]}return{}},setWithIcons:function(e){b=e},isWithIcons:function(){return b}}});AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Services.AvailableIcons",null,require("jira/projects/sidebar/project-shortcuts/services/available-icons"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/entities/Shortcut.js' */
define("jira/projects/sidebar/project-shortcuts/entities/shortcut",["jira/util/formatter","jira/util/logger","jira-projects-backbone","wrm/context-path"],function(e,d,g,b){function c(h){var i;try{i=JSON.parse(h.responseText)}catch(j){i={message:"We couldn\'t complete the action as there seems to be a communication issue."}}return i}return g.Model.extend({defaults:{url:"",name:"",icon:""},initialize:function(i,h){if(!h||!h.projectKey){throw"Project key is required"}this.projectKey=h.projectKey},urlRoot:function f(){return b()+"/rest/projects/1.0/project/"+encodeURIComponent(this.projectKey)+"/shortcut"},clear:function a(){this.unset("id");this.set("url",this.defaults.url);this.set("name",this.defaults.name);this.set("icon",this.defaults.icon)},save:function(){if(this.saving==true){return}this.saving=true;var i=this;i.trigger("save:start");var l=this.isNew()?"create":"update";this.sync(l,i).always(function h(){i.saving=false;i.trigger("save:finish")}).done(function j(m){i.set(m,{silent:true});d.trace("jira.projects.shortcuts."+l+".success");i.trigger("save:success")}).fail(function k(m){var n=c(m);d.trace("jira.projects.shortcuts."+l+".fail");i.trigger("save:failure",n)})},destroy:function(){if(this.saving==true){return}this.saving=true;var i=this;i.trigger("remove:start");var h=g.Model.prototype.destroy.apply(this,arguments);h.always(function(){i.saving=false;i.trigger("remove:finish")}).done(function j(){i.trigger("remove:success")}).fail(function k(l){var m=c(l);i.trigger("remove:failure",m)});return h}})});AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcut",null,require("jira/projects/sidebar/project-shortcuts/entities/shortcut"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/entities/ShortcutErrors.js' */
define("jira/projects/sidebar/project-shortcuts/entities/shortcut-errors",["jira-projects-backbone"],function(b){return b.Model.extend({defaults:{urlError:"",nameError:"",iconError:"",generalError:""},initialize:function a(f,e){var d=e.model;this.listenTo(d,"save:failure remove:failure",function c(g){this.set({urlError:g.errors&&g.errors.url,nameError:g.errors&&g.errors.name,iconError:g.errors&&g.errors.icon,generalError:(g.message||(g.errorMessages&&g.errorMessages.length>0))?g.message||g.errorMessages[0]:undefined})});this.listenTo(d,"save:success remove:success",this.clear)}})});AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Entities.ShortcutErrors",null,require("jira/projects/sidebar/project-shortcuts/entities/shortcut-errors"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/entities/Shortcuts.js' */
define("jira/projects/sidebar/project-shortcuts/entities/shortcuts",["jira/projects/sidebar/project-shortcuts/entities/shortcut","jira-projects-backbone"],function(b,a){return a.Collection.extend({model:b,initialize:function(d,c){this.projectKey=c.projectKey}})});AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcuts",null,require("jira/projects/sidebar/project-shortcuts/entities/shortcuts"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/views/IconPickerContent.js' */
define("jira/projects/sidebar/project-shortcuts/views/icon-picker-content",["jira/projects/sidebar/project-shortcuts/templates","jira/projects/sidebar/project-shortcuts/analytics","jira/projects/sidebar/project-shortcuts/services/available-icons","jira/projects/libs/marionette","jquery"],function(n,l,c,e,m){var i="projectShortcutsIconsId";var a="active aui-dropdown2-active";function o(p,t){var s=5;var v=p.ui.iconList.find(".active");var u=p.ui.iconList.find("li").size();var r;switch(t.keyCode){case AJS.keyCode.LEFT:r=-1;break;case AJS.keyCode.RIGHT:r=1;break;case AJS.keyCode.DOWN:r=s;break;case AJS.keyCode.UP:r=-s;break;default:r=0}var q=v.closest("li").index()+r;if(q<0||q>=u){q+=u;q%=u}v.removeClass(a);p.ui.icon.eq(q).addClass(a)}return e.ItemView.extend({template:n.iconsPicker,ui:{icon:".project-shortcuts-icons-icon",iconList:".project-shortcuts-icons-list",iconPicker:".project-shortcuts-icons-picker"},modelEvents:{"change:icon":function k(){var q=this._modelIcon();var p=this.ui.iconPicker.children();p.removeClass(this.iconFactory.getAllIconsClasses());p.addClass(q.className);this.ui.iconPicker.data(i,q.name)},"save:start":function j(){this.ui.iconPicker.attr("aria-disabled",true)},"save:finish":function h(){this.ui.iconPicker.attr("aria-disabled",false)}},events:{"keydown @ui.iconPicker":function f(p){if(!this.isPickerActive()){return}switch(p.keyCode){case AJS.keyCode.LEFT:case AJS.keyCode.RIGHT:case AJS.keyCode.DOWN:case AJS.keyCode.UP:o(this,p);p.stopPropagation();p.preventDefault();this.ui.iconList.trigger("aui-dropdown2-item-selected");break;case AJS.keyCode.ESCAPE:this.hideIconPicker();p.stopPropagation();p.preventDefault();break}}},initialize:function(p){this.iconFactory=c;this.analytics=l},onRender:function(){var p=this;this.ui.icon.on("click",function q(){var r=m(this).data(i);p.analytics.iconChangeConfirmed(p.model,r);p.analyticsOldIconId="";p.analyticsIconClicked=true;p.model.set("icon",r);p.ui.iconPicker.focus()});this.ui.iconList.on("aui-dropdown2-show",function(){p.ui.iconPicker.focus();p.analyticsIconClicked=false;p.analytics.iconPickerOpened(p.model)});this.ui.iconList.on("aui-dropdown2-hide",function(){p.analytics.iconPickerClosed(p.model,p.analyticsIconClicked)});this.analyticsOldIconId="";this.ui.iconList.on("aui-dropdown2-item-selected",function(r){var s=m(this).find(".active").data(i);if(p.analyticsOldIconId&&p.analyticsOldIconId!==s){p.analytics.iconChanged(p.model,s,p.analyticsOldIconId)}p.analyticsOldIconId=s});this.ui.iconPicker.data(i,this.model.get("icon"))},hideIconPicker:function(){if(this.isPickerActive()){this.ui.iconPicker.trigger("aui-button-invoke")}},isPickerActive:function(){return this.ui.iconPicker.hasClass("active")},_modelIcon:function b(){return this.iconFactory.getIconFromName(this.model.get("icon"))},onFormSubmit:function g(){this.model.set("icon",this.ui.iconPicker.data(i)||"")},focus:function d(){this.ui.iconPicker.focus()},serializeData:function(){return{iconsList:this.iconFactory.getIconsList(),icon:this._modelIcon(),cid:this.cid}}})});AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Views.IconPickerContent",null,require("jira/projects/sidebar/project-shortcuts/views/icon-picker-content"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/views/DialogContent.js' */
define("jira/projects/sidebar/project-shortcuts/views/dialog-content",["jira/util/formatter","jira/flag","jira/projects/sidebar/project-shortcuts/views/icon-picker-content","jira/projects/sidebar/project-shortcuts/services/available-icons","jira/projects/libs/marionette","underscore"],function(q,r,n,s,l,v){function u(x){x.preventDefault();this.ensureProtocolPrefix();this.tryToAutomagicallyDeriveNameFromUrl();if(this.iconPickerContent){this.iconPickerContent.onFormSubmit()}this.model.set("url",this.ui.url.val());this.model.set("name",this.ui.name.val());this.model.save()}var g=l.LayoutView.extend({ui:{form:"form",inputs:"input, button",submit:".project-shortcuts-submit",cancel:".project-shortcuts-cancel",url:".project-shortcuts-url input",name:".project-shortcuts-name input"},regions:{iconPicker:".project-shortcuts-icon-picker-block"},events:{"click @ui.cancel":function f(x){x.preventDefault();this.model.clear();this.setNameAutomagically=true;this.errorModel.clear();this.trigger("cancel")},"click @ui.submit":u,"submit @ui.form":u,"blur @ui.url":function c(){this.ensureProtocolPrefix();this.tryToAutomagicallyDeriveNameFromUrl()},"input @ui.url":function e(){this.model.set("url",this.ui.url.val());this.tryToAutomagicallyDeriveNameFromUrl()},"input @ui.name":function w(){this.setNameAutomagically=false;this.model.set("name",this.ui.name.val())},"keydown @ui.name":function j(x){if(!this.iconPickerContent){return}if(x.shiftKey&&x.keyCode===AJS.keyCode.TAB){x.preventDefault();this.iconPickerContent.focus()}},"keydown @ui.url":function j(x){if(!this.iconPickerContent){return}if(!x.shiftKey&&x.keyCode===AJS.keyCode.TAB){x.preventDefault();this.iconPickerContent.focus()}}},modelEvents:{"save:start":function a(){this.ui.inputs.prop("disabled",true);this.ui.submit.addClass("loading");this.ui.submit.spin({className:"spinner"})},"save:finish":function o(){this.ui.inputs.prop("disabled",false);this.ui.submit.removeClass("loading");this.ui.submit.spinStop({className:"spinner"})},"save:failure":function d(){this.render();if(this.errorModel.get("generalError")){r({type:"error",title:"We couldn\'t save the link for you",close:"auto",body:this.errorModel.get("generalError")})}if(this.errorModel.get("nameError")){this.ui.name.focus()}if(this.errorModel.get("urlError")){this.ui.url.focus()}return this},"save:success":function k(){this.setNameAutomagically=true}},initialize:function b(y){this.errorModel=y.errorModel;var x=this.model.get("name");this.setNameAutomagically=(x.length==0);this.iconFactory=s},serializeData:function m(){return v.extend(this.model.toJSON(),{errors:this.errorModel.toJSON(),action:this.action,isWithIcon:this.iconFactory.isWithIcons()})},onRender:function(){if(this.iconFactory.isWithIcons()){this.iconPickerContent=new n({model:this.model,action:this.action,observable:this});this.getRegion("iconPicker").show(this.iconPickerContent)}else{delete this.iconPickerContent}},hideIconPicker:function(){if(!this.iconPickerContent){return}this.iconPickerContent.hideIconPicker()},setName:function i(x){this.ui.name.val(x);this.model.set("name",x)},setUrl:function h(x){this.ui.url.val(x);this.model.set("url",x)},ensureProtocolPrefix:function p(){var x=this.ui.url.val().trim();if(x.length>0&&!g.urlPattern.test(x)){this.setUrl("http://"+x)}},tryToAutomagicallyDeriveNameFromUrl:function t(){var y=this.ui.url.val().trim();if(this.setNameAutomagically){if(g.urlOptionalProtocolPattern.test(y)){var x=g.urlOptionalProtocolPattern.exec(y);this.setName(x[3])}else{this.setName(y)}}}},{urlPattern:/^[a-zA-Z0-9]+:(\/\/)?([^\/]*).*/,urlOptionalProtocolPattern:/^([a-zA-Z0-9]+:(\/\/)?)?([^\/]*).*/});return g});AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Views.DialogContent",null,require("jira/projects/sidebar/project-shortcuts/views/dialog-content"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/views/AddDialogContent.js' */
define("jira/projects/sidebar/project-shortcuts/views/add-dialog-content",["jira/projects/sidebar/project-shortcuts/templates","jira/projects/sidebar/project-shortcuts/views/dialog-content"],function(b,a){return a.extend({template:b.addDialog})});AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Views.AddDialogContent",null,require("jira/projects/sidebar/project-shortcuts/views/add-dialog-content"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/views/EditDialogContent.js' */
define("jira/projects/sidebar/project-shortcuts/views/edit-dialog-content",["jira/projects/sidebar/project-shortcuts/templates","jira/projects/sidebar/project-shortcuts/views/dialog-content"],function(b,a){return a.extend({template:b.editDialog})});AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Views.EditDialogContent",null,require("jira/projects/sidebar/project-shortcuts/views/edit-dialog-content"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/dialogs/Delete.js' */
define("jira/projects/sidebar/project-shortcuts/dialogs/delete",["jira/projects/sidebar/project-shortcuts/templates","jira/util/formatter","jira/util/logger","jira/flag","jira/projects/libs/marionette","underscore"],function(m,h,j,d,c,i){return c.ItemView.extend({template:m.deleteDialog,ui:{inputs:"input, button",submit:".project-shortcuts-submit",cancel:".project-shortcuts-cancel"},events:{"click @ui.cancel":function k(n){n.preventDefault();this.dialog.hide()},"click @ui.submit":function a(n){n.preventDefault();this.model.destroy({wait:true})}},modelEvents:{"remove:start":function e(){this.ui.inputs.prop("disabled",true);this.ui.submit.addClass("loading");this.ui.submit.spin({className:"spinner"})},"remove:finish":function g(){this.ui.inputs.prop("disabled",false);this.ui.submit.removeClass("loading");this.ui.submit.spinStop({className:"spinner"});this.dialog.hide();j.trace("jira.projects.shortcuts.deleted")},"remove:failure":function f(n){if(n.message||(n.errorMessages&&n.errorMessages.length>0)){d({type:"error",title:"We couldn\'t delete the link for you",close:"auto",body:n.message||n.errorMessages[0]})}}},initialize:function b(){this.render();this.$el.appendTo("body");this.dialog=AJS.dialog2(this.$el);this.dialog.show();var n=this;this.dialog.on("hide",function(){i.defer(function(){n.destroy()})})},onRender:function l(){this.unwrapTemplate()}})});AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Delete",null,require("jira/projects/sidebar/project-shortcuts/dialogs/delete"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/dialogs/Edit.js' */
define("jira/projects/sidebar/project-shortcuts/dialogs/edit",["jira/projects/sidebar/project-shortcuts/templates","jira/projects/sidebar/project-shortcuts/views/edit-dialog-content","jira/projects/sidebar/project-shortcuts/entities/shortcut","jira/projects/sidebar/project-shortcuts/entities/shortcut-errors","jira/projects/libs/marionette","underscore","jquery"],function(d,f,h,a,g,b,e){return g.Controller.extend({initialize:function(l){var j=this;b.bindAll(this,"hide");this.model=new h(l.model.toJSON(),{projectKey:l.model.projectKey||l.model.collection.projectKey});this.errorModel=new a(undefined,{model:this.model});this.view=new f({model:this.model,errorModel:this.errorModel});this.analyticsSave=false;this.view.render();var i=e(d.editDialogChrome({}));this.view.$el.appendTo(i);this.dialog=AJS.dialog2(i);this.dialog.show();this.view.ui.url.focus();this._onResizeWindow=function(){j.hideIconPicker()};e(window).on("resize",this._onResizeWindow);this.listenTo(this.view,"cancel",this.hide);this.listenTo(this.model,"save:success",function m(){this.analyticsSave=true;this.hide();l.model.set(j.model.toJSON())});this.dialog.on("hide",function k(){j.trigger("dialog:close",j.analyticsSave)})},hideIconPicker:function(){this.view.hideIconPicker()},hide:function c(){this.dialog.hide();e(window).off("resize",this._onResizeWindow)}})});AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Edit",null,require("jira/projects/sidebar/project-shortcuts/dialogs/edit"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/dialogs/Add.js' */
define("jira/projects/sidebar/project-shortcuts/dialogs/add",["aui/inline-dialog","jira/projects/sidebar/project-shortcuts/views/add-dialog-content","jira/projects/sidebar/project-shortcuts/entities/shortcut","jira/projects/sidebar/project-shortcuts/entities/shortcut-errors","jira/projects/libs/marionette","underscore","jquery"],function(d,c,j,h,g,i,k){return g.Controller.extend({initialize:function(u){i.bindAll(this,"hide","refresh","focusForm");var t=this;this.analyticsSave=false;this.sidebarItem=u.sidebarItem;this.projectKey=u.projectKey;this.collection=u.collection;this.model=new j(null,{projectKey:this.projectKey});this.errorModel=new h(null,{model:this.model});this.view=new c({model:this.model,errorModel:this.errorModel});this.view.render();var m=k(window);var o=k(document);var s=k(".aui-sidebar-body");this.dialog=new d(this.sidebarItem.ui.link,"project-shortcuts-group__add-dialog",function(x,w,z){t.sidebarItem.$el.addClass("aui-nav-selected");t.view.render();t.view.$el.appendTo(x);t.view.ui.url.focus();m.on("scroll.project-shortcuts",function y(){t.refresh()});s.on("scroll.project-shortcuts",function v(){t.hide()});o.on("showLayer",t.focusForm);m.on("resize",t.refresh);z();return false},{gravity:"w",autoWidth:true,initCallback:function l(){t.trigger("dialog:open");t.analyticsSave=false},hideCallback:function n(){t.sidebarItem.$el.removeClass("aui-nav-selected");t.sidebarItem.ui.link.blur();m.off("scroll.project-shortcuts");s.off("scroll.project-shortcuts");o.off("showLayer",t.focusForm);t.trigger("dialog:close",t.analyticsSave)},persistent:true,closeOnTriggerClick:true,offsetY:function p(v,y){var x=y.target.height();var w=v.height()/2;return w-x-10},arrowOffsetY:function q(v,y){var x=y.target.height()/2;var w=v.height()/2;return -w+22+x}});this.listenTo(this.view,"render",this.refresh);this.listenTo(this.view,"cancel",this.hideAndRender);this.listenTo(this.model,"save:success",function r(){var v=new j(this.model.toJSON(),{projectKey:this.projectKey});this.model.clear();this.collection.add(v);this.analyticsSave=true;this.hide()});this.listenTo(this.sidebarItem,"before:select",function(v){v.preventDefault()});AJS.sidebar(".aui-sidebar").on("collapse-start",this.hide);k(".project-shortcuts-group").on("click","li",this.hide)},hide:function e(){this.view.hideIconPicker();this.dialog.hide()},refresh:function f(){this.view.hideIconPicker();this.dialog.refresh()},hideAndRender:function b(){this.hide()},focusForm:function a(){this.view.ui.url.focus()}})});AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Add",null,require("jira/projects/sidebar/project-shortcuts/dialogs/add"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/views/Shortcut.js' */
define("jira/projects/sidebar/project-shortcuts/views/shortcut",["jira/projects/sidebar/project-shortcuts/templates","jira/projects/sidebar/project-shortcuts/services/available-icons","jira/projects/sidebar/project-shortcuts/dialogs/edit","jira/projects/sidebar/project-shortcuts/dialogs/delete","jira/projects/libs/marionette","underscore","jquery"],function(j,e,b,a,f,g,i){return f.ItemView.extend({template:j.shortcut,initialize:function c(){g.bindAll(this,"toggleDropdown");this.iconFactory=e},ui:{del:".project-shortcuts-group__actions__delete",edit:".project-shortcuts-group__actions__edit",trigger:".project-shortcuts-group__actions",dropdown:".project-shortcuts-group__dropdown",link:".project-shortcuts-group__link"},modelEvents:{change:"render"},events:{"click @ui.link":function d(){this.trigger("click:link",this.model)}},onRender:function(){var k=this;this.unwrapTemplate();var o=i(window);var n=i(".aui-sidebar-body");this.ui.edit.on("click",function m(q){q.preventDefault();k.ui.trigger.blur();var p=new b({model:k.model});k.trigger("edit:open",k.model);k.listenToOnce(p,"dialog:close",function r(s){k.trigger("edit:close",k.model,s)})});this.ui.del.on("click",function l(p){p.preventDefault();k.ui.trigger.blur();var q=new a({model:k.model})});this.ui.dropdown.on({"aui-dropdown2-show":function(){k.$el.addClass("aui-nav-selected");n.one("scroll",k.toggleDropdown);o.one("scroll",k.toggleDropdown);k.ui.trigger.focus()},"aui-dropdown2-hide":function(){k.$el.removeClass("aui-nav-selected");n.off("scroll",k.toggleDropdown);o.off("scroll",k.toggleDropdown)}})},serializeData:function(){var k=g.extend(this.model.toJSON(),{canManage:true,isWithIcon:this.iconFactory.isWithIcons()});if(this.iconFactory.isWithIcons()){k=g.extend(k,{iconsMap:e.getIconsMap()})}return k},toggleDropdown:function h(){this.ui.trigger.trigger("aui-button-invoke")}})});AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Views.Shortcut",null,require("jira/projects/sidebar/project-shortcuts/views/shortcut"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/views/ShortcutsList.js' */
define("jira/projects/sidebar/project-shortcuts/views/list",["jira/api/projects/sidebar","jira/projects/sidebar/project-shortcuts/templates","jira/projects/sidebar/project-shortcuts/views/shortcut","jira/projects/sidebar/project-shortcuts/dialogs/add","jira/projects/sidebar/component/navigation-group","jira/projects/libs/marionette","jquery"],function(f,l,g,d,j,i,e){return i.CompositeView.extend({template:l.content,childView:g,ui:{itemsContainer:".aui-nav",description:".project-shortcuts-group__description",add:".project-shortcuts-group__add"},collectionEvents:{"add remove":function b(){if(this.collection.length==0&&this.lastCollectionLength!=0||this.collection.length!=0&&this.lastCollectionLength==0){this.lastCollectionLength=this.collection.length;this.ui.description.toggleClass("hidden",this.collection.length>0);this.$el.toggleClass("project-shortcuts-group_empty",this.collection.length==0)}}},initialize:function c(){var m=this;f.getSidebar().done(function(p){var q=p.getAUISidebar();q.on("expand-end",function o(){e(".aui-sidebar-submenu-dialog .project-shortcuts-group__dropdown").remove()});q.on("collapse-start",function n(){m.$(".project-shortcuts-group__actions.aui-dropdown2-active").trigger("aui-button-invoke")})});this.lastCollectionLength=this.collection.length},attachElContent:function(m){var n=new j({el:m});this.$el=e(n.getElement());f.getSidebar().done(function(o){o.replaceGroup(this.options.targetGroup,n)}.bind(this));return this},onRender:function k(){f.getSidebar().done(function(p){var n=new d({sidebarItem:p.getGroup("project-shortcuts-group").getItem("project-shortcut-add"),projectKey:this.collection.projectKey,collection:this.collection});this.listenTo(n,"dialog:open",function o(){this.trigger("add:open")});this.listenTo(n,"dialog:close",function m(q){this.trigger("add:close",q)})}.bind(this))},serializeData:function h(){return{canManage:true,numberOfShortcuts:this.collection.length}},attachBuffer:function(n,m){this.ui.itemsContainer.prepend(m)},onAddChild:function a(m){this.ui.add.parent().before(m.$el)}})});AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Views.List",null,require("jira/projects/sidebar/project-shortcuts/views/list"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts-init', location = '/sidebar/project-shortcuts/project-shortcuts-init.js' */
require(["jira/projects/sidebar/project-shortcuts/analytics","jira/projects/sidebar/project-shortcuts/views/list","jira/projects/sidebar/project-shortcuts/services/available-icons","jira/projects/sidebar/project-shortcuts/entities/shortcuts","jira/api/projects/sidebar","jira/api/projects","wrm/data"],function(f,a,g,c,e,d,b){e.getSidebar().done(function(l){var i=b.claim("com.atlassian.jira.projects.shortcuts:project-id");f.initialize(i);if(b.claim("com.atlassian.jira.projects.shortcuts:can-manage")){var k=b.claim("com.atlassian.jira.projects.shortcuts:with-icons");if(k){g.initialize(b.claim("com.atlassian.jira.projects.shortcuts:icons-list"))}g.setWithIcons(k);var h=d.getCurrentProjectKey();var j=new c(b.claim("com.atlassian.jira.projects.shortcuts:shortcuts"),{projectKey:h});var m=new a({collection:j,targetGroup:"project-shortcuts-group"});m.render();f.initDialogActions(m)}f.initShortcutClick(".project-shortcuts-list",l)})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:report-page-assets', location = '/page/project/report/analytics.js' */
define("jira/projects/page/report/analytics",["jira/analytics","jquery"],function(a,b){function c(){b(".reports .reports__list__report").on("click",function(f){var d=b(this);a.send({name:"jira.projects.report.clicked",data:{report:d.attr("data-report-key"),category:d.closest("ul").attr("data-category-key"),listPosition:d.closest("li").prevAll().length+1}})})}return c});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:reports-link-storage', location = '/sidebar/reports/reports-link-storage.js' */
define("jira/projects/sidebar/reports/link-storage",["jira/util/logger","jira/data/local-storage","jira/api/projects","jira/api/projects/sidebar"],function(b,a,c,d){function f(j){var h=j.getSelectedScopeFilterId();var g=c.getCurrentProjectKey();var i="last.viewed.report."+g;if(h){i+="."+h}return i}function e(g,h){g.setReportsItemLink(h)}return{storeLastViewedReportLink:function(g){d.getSidebar().done(function(i){if(i.isProjectSidebar()){var h=f(i);a.setItem(h,g);e(i,g)}b.trace("jira.projects.sidebar.reports.link.stored")})},restoreLastViewedReportLink:function(){d.getSidebar().done(function(h){if(h.isProjectSidebar()){var g=f(h);var i=a.getItem(g);if(i){e(h,i)}}b.trace("jira.projects.sidebar.reports.link.restored")})}}});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:reports-link-init', location = '/sidebar/reports/reports-link-init.js' */
require(["jira/projects/sidebar/reports/link-storage"],function(a){a.restoreLastViewedReportLink()});AJS.namespace("JIRA.Projects.Sidebar.Reports",null,require("jira/projects/sidebar/reports/link-storage"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-analytics-tracker', location = 'includes/js/rapid/AnalyticsTracker.js' */
define("jira-agile/rapid/analytics-tracker",["jira/util/logger","underscore","jquery"],function(e,a,i){function t(e,i,t){if(a.isUndefined(e))throw new Error("You must specify a category");this.params={},this.params.category=e;var r=0;a.isUndefined(i)||(this.params.action=i,r++,a.isUndefined(t)||(this.params.label=t,r++)),this.requiredArgumentNames=["action","label","value"].slice(r),this.useAsync=!0}return t.prototype.setAsync=function(e){return this.useAsync=e,this},t.prototype.trigger=function(){this.requiredArgumentNames.length<arguments.length&&e.log("Warning: too many arguments passed in. Needed at most "+this.requiredArgumentNames.length+" but got "+arguments.length);for(var t=a.clone(this.params),r=0;r<arguments.length&&!a.isUndefined(this.requiredArgumentNames[r]);r++)t[this.requiredArgumentNames[r]]=arguments[r];this._validateParams(t);var n="gh.analytics.async";i(document).trigger(n,t)},t.prototype._validateParams=function(e){var i=["category","action","label"];a.each(i,function(i){a.isUndefined(e[i])||a.isString(e[i])?a.isUndefined(e[i])&&(e[i]=""):e[i]=e[i].toString()}),a.each(["category","action"],function(a){e[a]=e[a].replace(/\s+/g,"")}),a.isUndefined(e.value)||(e.value=parseInt(e.value,10),isNaN(e.value)&&(e.value=void 0))},t}),AJS.namespace("GH.AnalyticsTracker",null,require("jira-agile/rapid/analytics-tracker"));;
;
/* module-key = 'com.atlassian.auiplugin:split_jquery.ui.mouse', location = 'aui.chunk.b05a49c51c2c704c0a53--b1810dc49c5eafca33b8.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["jquery.ui.mouse"],{mz4i:function(u,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i("XPYc"),e.default="jquery",u.exports=e.default}},[["mz4i","runtime","aui.splitchunk.vendors--20a97d6a33","aui.splitchunk.vendors--d18e3cafa7","aui.splitchunk.vendors--db57146687","aui.splitchunk.172ffb6da7"]]]);
//# sourceMappingURL=aui.chunk.b05a49c51c2c704c0a53--b1810dc49c5eafca33b8.js.map;
;
/* module-key = 'com.atlassian.auiplugin:split_aui.splitchunk.vendors--c7d6d1dc80', location = 'aui.chunk.a7fc0d5b8767e9b40315--bdd2730e8619a65df894.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.splitchunk.vendors--c7d6d1dc80"],{"2NYx":function(t,i,o){var e,n,l;n=[o("oDIA"),o("O+lX")],void 0===(l="function"==typeof(e=function(t){return function(){var i,o=Math.max,e=Math.abs,n=/left|center|right/,l=/top|center|bottom/,s=/[\+\-]\d+(\.[\d]+)?%?/,f=/^\w+/,h=/%$/,r=t.fn.position;function p(t,i,o){return[parseFloat(t[0])*(h.test(t[0])?i/100:1),parseFloat(t[1])*(h.test(t[1])?o/100:1)]}function c(i,o){return parseInt(t.css(i,o),10)||0}t.position={scrollbarWidth:function(){if(void 0!==i)return i;var o,e,n=t("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),l=n.children()[0];return t("body").append(n),o=l.offsetWidth,n.css("overflow","scroll"),o===(e=l.offsetWidth)&&(e=n[0].clientWidth),n.remove(),i=o-e},getScrollInfo:function(i){var o=i.isWindow||i.isDocument?"":i.element.css("overflow-x"),e=i.isWindow||i.isDocument?"":i.element.css("overflow-y"),n="scroll"===o||"auto"===o&&i.width<i.element[0].scrollWidth;return{width:"scroll"===e||"auto"===e&&i.height<i.element[0].scrollHeight?t.position.scrollbarWidth():0,height:n?t.position.scrollbarWidth():0}},getWithinInfo:function(i){var o=t(i||window),e=t.isWindow(o[0]),n=!!o[0]&&9===o[0].nodeType;return{element:o,isWindow:e,isDocument:n,offset:e||n?{left:0,top:0}:t(i).offset(),scrollLeft:o.scrollLeft(),scrollTop:o.scrollTop(),width:o.outerWidth(),height:o.outerHeight()}}},t.fn.position=function(i){if(!i||!i.of)return r.apply(this,arguments);i=t.extend({},i);var h,a,d,g,u,m,w=t(i.of),W=t.position.getWithinInfo(i.within),v=t.position.getScrollInfo(W),y=(i.collision||"flip").split(" "),H={};return m=function(i){var o=i[0];return 9===o.nodeType?{width:i.width(),height:i.height(),offset:{top:0,left:0}}:t.isWindow(o)?{width:i.width(),height:i.height(),offset:{top:i.scrollTop(),left:i.scrollLeft()}}:o.preventDefault?{width:0,height:0,offset:{top:o.pageY,left:o.pageX}}:{width:i.outerWidth(),height:i.outerHeight(),offset:i.offset()}}(w),w[0].preventDefault&&(i.at="left top"),a=m.width,d=m.height,g=m.offset,u=t.extend({},g),t.each(["my","at"],function(){var t,o,e=(i[this]||"").split(" ");1===e.length&&(e=n.test(e[0])?e.concat(["center"]):l.test(e[0])?["center"].concat(e):["center","center"]),e[0]=n.test(e[0])?e[0]:"center",e[1]=l.test(e[1])?e[1]:"center",t=s.exec(e[0]),o=s.exec(e[1]),H[this]=[t?t[0]:0,o?o[0]:0],i[this]=[f.exec(e[0])[0],f.exec(e[1])[0]]}),1===y.length&&(y[1]=y[0]),"right"===i.at[0]?u.left+=a:"center"===i.at[0]&&(u.left+=a/2),"bottom"===i.at[1]?u.top+=d:"center"===i.at[1]&&(u.top+=d/2),h=p(H.at,a,d),u.left+=h[0],u.top+=h[1],this.each(function(){var n,l,s=t(this),f=s.outerWidth(),r=s.outerHeight(),m=c(this,"marginLeft"),x=c(this,"marginTop"),b=f+m+c(this,"marginRight")+v.width,T=r+x+c(this,"marginBottom")+v.height,L=t.extend({},u),P=p(H.my,s.outerWidth(),s.outerHeight());"right"===i.my[0]?L.left-=f:"center"===i.my[0]&&(L.left-=f/2),"bottom"===i.my[1]?L.top-=r:"center"===i.my[1]&&(L.top-=r/2),L.left+=P[0],L.top+=P[1],n={marginLeft:m,marginTop:x},t.each(["left","top"],function(o,e){t.ui.position[y[o]]&&t.ui.position[y[o]][e](L,{targetWidth:a,targetHeight:d,elemWidth:f,elemHeight:r,collisionPosition:n,collisionWidth:b,collisionHeight:T,offset:[h[0]+P[0],h[1]+P[1]],my:i.my,at:i.at,within:W,elem:s})}),i.using&&(l=function(t){var n=g.left-L.left,l=n+a-f,h=g.top-L.top,p=h+d-r,c={target:{element:w,left:g.left,top:g.top,width:a,height:d},element:{element:s,left:L.left,top:L.top,width:f,height:r},horizontal:l<0?"left":n>0?"right":"center",vertical:p<0?"top":h>0?"bottom":"middle"};a<f&&e(n+l)<a&&(c.horizontal="center"),d<r&&e(h+p)<d&&(c.vertical="middle"),o(e(n),e(l))>o(e(h),e(p))?c.important="horizontal":c.important="vertical",i.using.call(this,t,c)}),s.offset(t.extend(L,{using:l}))})},t.ui.position={fit:{left:function(t,i){var e,n=i.within,l=n.isWindow?n.scrollLeft:n.offset.left,s=n.width,f=t.left-i.collisionPosition.marginLeft,h=l-f,r=f+i.collisionWidth-s-l;i.collisionWidth>s?h>0&&r<=0?(e=t.left+h+i.collisionWidth-s-l,t.left+=h-e):t.left=r>0&&h<=0?l:h>r?l+s-i.collisionWidth:l:h>0?t.left+=h:r>0?t.left-=r:t.left=o(t.left-f,t.left)},top:function(t,i){var e,n=i.within,l=n.isWindow?n.scrollTop:n.offset.top,s=i.within.height,f=t.top-i.collisionPosition.marginTop,h=l-f,r=f+i.collisionHeight-s-l;i.collisionHeight>s?h>0&&r<=0?(e=t.top+h+i.collisionHeight-s-l,t.top+=h-e):t.top=r>0&&h<=0?l:h>r?l+s-i.collisionHeight:l:h>0?t.top+=h:r>0?t.top-=r:t.top=o(t.top-f,t.top)}},flip:{left:function(t,i){var o,n,l=i.within,s=l.offset.left+l.scrollLeft,f=l.width,h=l.isWindow?l.scrollLeft:l.offset.left,r=t.left-i.collisionPosition.marginLeft,p=r-h,c=r+i.collisionWidth-f-h,a="left"===i.my[0]?-i.elemWidth:"right"===i.my[0]?i.elemWidth:0,d="left"===i.at[0]?i.targetWidth:"right"===i.at[0]?-i.targetWidth:0,g=-2*i.offset[0];p<0?((o=t.left+a+d+g+i.collisionWidth-f-s)<0||o<e(p))&&(t.left+=a+d+g):c>0&&((n=t.left-i.collisionPosition.marginLeft+a+d+g-h)>0||e(n)<c)&&(t.left+=a+d+g)},top:function(t,i){var o,n,l=i.within,s=l.offset.top+l.scrollTop,f=l.height,h=l.isWindow?l.scrollTop:l.offset.top,r=t.top-i.collisionPosition.marginTop,p=r-h,c=r+i.collisionHeight-f-h,a="top"===i.my[1]?-i.elemHeight:"bottom"===i.my[1]?i.elemHeight:0,d="top"===i.at[1]?i.targetHeight:"bottom"===i.at[1]?-i.targetHeight:0,g=-2*i.offset[1];p<0?((n=t.top+a+d+g+i.collisionHeight-f-s)<0||n<e(p))&&(t.top+=a+d+g):c>0&&((o=t.top-i.collisionPosition.marginTop+a+d+g-h)>0||e(o)<c)&&(t.top+=a+d+g)}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}}}(),t.ui.position})?e.apply(i,n):e)||(t.exports=l)}}]);
//# sourceMappingURL=aui.chunk.a7fc0d5b8767e9b40315--bdd2730e8619a65df894.js.map;
;
/* module-key = 'com.atlassian.auiplugin:split_jquery.ui.position', location = 'aui.chunk.6d46b627bfb0d048fba9--406d570703742f04765b.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["jquery.ui.position"],{"7ih8":function(i,u,e){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),e("2NYx"),u.default="jquery",i.exports=u.default}},[["7ih8","runtime","aui.splitchunk.vendors--20a97d6a33","aui.splitchunk.vendors--c7d6d1dc80","aui.splitchunk.172ffb6da7"]]]);
//# sourceMappingURL=aui.chunk.6d46b627bfb0d048fba9--406d570703742f04765b.js.map;
;
/* module-key = 'com.atlassian.auiplugin:split_aui.splitchunk.vendors--7c76061134', location = 'aui.chunk.ec257084264be2137aff--47070070a0c5ff93b8b0.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.splitchunk.vendors--7c76061134"],{TRfs:function(e,t,s){},iCCw:function(e,t,s){var l,i,n;i=[s("oDIA"),s("XPYc"),s("O+lX"),s("yIBB")],void 0===(n="function"==typeof(l=function(e){return e.widget("ui.selectable",e.ui.mouse,{version:"1.12.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t=this;this._addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t.elementPos=e(t.element[0]).offset(),t.selectees=e(t.options.filter,t.element[0]),t._addClass(t.selectees,"ui-selectee"),t.selectees.each(function(){var s=e(this),l=s.offset(),i={left:l.left-t.elementPos.left,top:l.top-t.elementPos.top};e.data(this,"selectable-item",{element:this,$element:s,left:i.left,top:i.top,right:i.left+s.outerWidth(),bottom:i.top+s.outerHeight(),startselected:!1,selected:s.hasClass("ui-selected"),selecting:s.hasClass("ui-selecting"),unselecting:s.hasClass("ui-unselecting")})})},this.refresh(),this._mouseInit(),this.helper=e("<div>"),this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item"),this._mouseDestroy()},_mouseStart:function(t){var s=this,l=this.options;this.opos=[t.pageX,t.pageY],this.elementPos=e(this.element[0]).offset(),this.options.disabled||(this.selectees=e(l.filter,this.element[0]),this._trigger("start",t),e(l.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),l.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var l=e.data(this,"selectable-item");l.startselected=!0,t.metaKey||t.ctrlKey||(s._removeClass(l.$element,"ui-selected"),l.selected=!1,s._addClass(l.$element,"ui-unselecting"),l.unselecting=!0,s._trigger("unselecting",t,{unselecting:l.element}))}),e(t.target).parents().addBack().each(function(){var l,i=e.data(this,"selectable-item");if(i)return l=!t.metaKey&&!t.ctrlKey||!i.$element.hasClass("ui-selected"),s._removeClass(i.$element,l?"ui-unselecting":"ui-selected")._addClass(i.$element,l?"ui-selecting":"ui-unselecting"),i.unselecting=!l,i.selecting=l,i.selected=l,l?s._trigger("selecting",t,{selecting:i.element}):s._trigger("unselecting",t,{unselecting:i.element}),!1}))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var s,l=this,i=this.options,n=this.opos[0],c=this.opos[1],a=t.pageX,o=t.pageY;return n>a&&(s=a,a=n,n=s),c>o&&(s=o,o=c,c=s),this.helper.css({left:n,top:c,width:a-n,height:o-c}),this.selectees.each(function(){var s=e.data(this,"selectable-item"),r=!1,u={};s&&s.element!==l.element[0]&&(u.left=s.left+l.elementPos.left,u.right=s.right+l.elementPos.left,u.top=s.top+l.elementPos.top,u.bottom=s.bottom+l.elementPos.top,"touch"===i.tolerance?r=!(u.left>a||u.right<n||u.top>o||u.bottom<c):"fit"===i.tolerance&&(r=u.left>n&&u.right<a&&u.top>c&&u.bottom<o),r?(s.selected&&(l._removeClass(s.$element,"ui-selected"),s.selected=!1),s.unselecting&&(l._removeClass(s.$element,"ui-unselecting"),s.unselecting=!1),s.selecting||(l._addClass(s.$element,"ui-selecting"),s.selecting=!0,l._trigger("selecting",t,{selecting:s.element}))):(s.selecting&&((t.metaKey||t.ctrlKey)&&s.startselected?(l._removeClass(s.$element,"ui-selecting"),s.selecting=!1,l._addClass(s.$element,"ui-selected"),s.selected=!0):(l._removeClass(s.$element,"ui-selecting"),s.selecting=!1,s.startselected&&(l._addClass(s.$element,"ui-unselecting"),s.unselecting=!0),l._trigger("unselecting",t,{unselecting:s.element}))),s.selected&&(t.metaKey||t.ctrlKey||s.startselected||(l._removeClass(s.$element,"ui-selected"),s.selected=!1,l._addClass(s.$element,"ui-unselecting"),s.unselecting=!0,l._trigger("unselecting",t,{unselecting:s.element})))))}),!1}},_mouseStop:function(t){var s=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var l=e.data(this,"selectable-item");s._removeClass(l.$element,"ui-unselecting"),l.unselecting=!1,l.startselected=!1,s._trigger("unselected",t,{unselected:l.element})}),e(".ui-selecting",this.element[0]).each(function(){var l=e.data(this,"selectable-item");s._removeClass(l.$element,"ui-selecting")._addClass(l.$element,"ui-selected"),l.selecting=!1,l.selected=!0,l.startselected=!0,s._trigger("selected",t,{selected:l.element})}),this._trigger("stop",t),this.helper.remove(),!1}})})?l.apply(t,i):l)||(e.exports=n)}}]);
//# sourceMappingURL=aui.chunk.ec257084264be2137aff--47070070a0c5ff93b8b0.js.map;
;
/* module-key = 'com.atlassian.auiplugin:split_jquery.ui.selectable', location = 'aui.chunk.8715bd0c6e6a21be6cc9--b41682505f14b08b8b9c.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["jquery.ui.selectable"],{FvNQ:function(u,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i("TRfs"),i("iCCw"),e.default="jquery",u.exports=e.default}},[["FvNQ","runtime","aui.splitchunk.vendors--20a97d6a33","aui.splitchunk.vendors--d18e3cafa7","aui.splitchunk.vendors--db57146687","aui.splitchunk.vendors--7c76061134","aui.splitchunk.172ffb6da7"]]]);
//# sourceMappingURL=aui.chunk.8715bd0c6e6a21be6cc9--b41682505f14b08b8b9c.js.map;
;
/* module-key = 'com.atlassian.auiplugin:split_aui.splitchunk.vendors--85718a7eef', location = 'aui.chunk.ae3c4b97fc5a1976668b--c6988b4dfd3c4a3d1198.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.splitchunk.vendors--85718a7eef"],{"2V+C":function(t,i,e){},XnJT:function(t,i,e){var s,h,n;h=[e("oDIA"),e("XPYc"),e("zq/Y"),e("lSwU"),e("O+lX"),e("yIBB")],void 0===(n="function"==typeof(s=function(t){return t.widget("ui.resizable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(t){return parseFloat(t)||0},_isNumber:function(t){return!isNaN(parseFloat(t))},_hasScroll:function(i,e){if("hidden"===t(i).css("overflow"))return!1;var s,h=e&&"left"===e?"scrollLeft":"scrollTop";return i[h]>0||(i[h]=1,s=i[h]>0,i[h]=0,s)},_create:function(){var i,e=this.options,s=this;this._addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!e.aspectRatio,aspectRatio:e.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:e.helper||e.ghost||e.animate?e.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,i={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(i),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(i),this._proportionallyResize()),this._setupHandles(),e.autoHide&&t(this.element).on("mouseenter",function(){e.disabled||(s._removeClass("ui-resizable-autohide"),s._handles.show())}).on("mouseleave",function(){e.disabled||s.resizing||(s._addClass("ui-resizable-autohide"),s._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy();var i,e=function(i){t(i).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(e(this.element),i=this.element,this.originalElement.css({position:i.css("position"),width:i.outerWidth(),height:i.outerHeight(),top:i.css("top"),left:i.css("left")}).insertAfter(i),i.remove()),this.originalElement.css("resize",this.originalResizeStyle),e(this.originalElement),this},_setOption:function(t,i){switch(this._super(t,i),t){case"handles":this._removeHandles(),this._setupHandles()}},_setupHandles:function(){var i,e,s,h,n,o=this.options,a=this;if(this.handles=o.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=t(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),s=this.handles.split(","),this.handles={},e=0;e<s.length;e++)h="ui-resizable-"+(i=t.trim(s[e])),n=t("<div>"),this._addClass(n,"ui-resizable-handle "+h),n.css({zIndex:o.zIndex}),this.handles[i]=".ui-resizable-"+i,this.element.append(n);this._renderAxis=function(i){var e,s,h,n;for(e in i=i||this.element,this.handles)this.handles[e].constructor===String?this.handles[e]=this.element.children(this.handles[e]).first().show():(this.handles[e].jquery||this.handles[e].nodeType)&&(this.handles[e]=t(this.handles[e]),this._on(this.handles[e],{mousedown:a._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(s=t(this.handles[e],this.element),n=/sw|ne|nw|se|n|s/.test(e)?s.outerHeight():s.outerWidth(),h=["padding",/ne|nw|n/.test(e)?"Top":/se|sw|s/.test(e)?"Bottom":/^e$/.test(e)?"Right":"Left"].join(""),i.css(h,n),this._proportionallyResize()),this._handles=this._handles.add(this.handles[e])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){a.resizing||(this.className&&(n=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),a.axis=n&&n[1]?n[1]:"se")}),o.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(i){var e,s,h=!1;for(e in this.handles)((s=t(this.handles[e])[0])===i.target||t.contains(s,i.target))&&(h=!0);return!this.options.disabled&&h},_mouseStart:function(i){var e,s,h,n=this.options,o=this.element;return this.resizing=!0,this._renderProxy(),e=this._num(this.helper.css("left")),s=this._num(this.helper.css("top")),n.containment&&(e+=t(n.containment).scrollLeft()||0,s+=t(n.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:e,top:s},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:o.width(),height:o.height()},this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()},this.originalPosition={left:e,top:s},this.originalMousePosition={left:i.pageX,top:i.pageY},this.aspectRatio="number"==typeof n.aspectRatio?n.aspectRatio:this.originalSize.width/this.originalSize.height||1,h=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===h?this.axis+"-resize":h),this._addClass("ui-resizable-resizing"),this._propagate("start",i),!0},_mouseDrag:function(i){var e,s,h=this.originalMousePosition,n=this.axis,o=i.pageX-h.left||0,a=i.pageY-h.top||0,l=this._change[n];return this._updatePrevProperties(),!!l&&(e=l.apply(this,[i,o,a]),this._updateVirtualBoundaries(i.shiftKey),(this._aspectRatio||i.shiftKey)&&(e=this._updateRatio(e,i)),e=this._respectSize(e,i),this._updateCache(e),this._propagate("resize",i),s=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(s)||(this._updatePrevProperties(),this._trigger("resize",i,this.ui()),this._applyChanges()),!1)},_mouseStop:function(i){this.resizing=!1;var e,s,h,n,o,a,l,r=this.options;return this._helper&&(h=(s=(e=this._proportionallyResizeElements).length&&/textarea/i.test(e[0].nodeName))&&this._hasScroll(e[0],"left")?0:this.sizeDiff.height,n=s?0:this.sizeDiff.width,o={width:this.helper.width()-n,height:this.helper.height()-h},a=parseFloat(this.element.css("left"))+(this.position.left-this.originalPosition.left)||null,l=parseFloat(this.element.css("top"))+(this.position.top-this.originalPosition.top)||null,r.animate||this.element.css(t.extend(o,{top:l,left:a})),this.helper.height(this.size.height),this.helper.width(this.size.width),this._helper&&!r.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",i),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var t={};return this.position.top!==this.prevPosition.top&&(t.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(t.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(t.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(t.height=this.size.height+"px"),this.helper.css(t),t},_updateVirtualBoundaries:function(t){var i,e,s,h,n,o=this.options;n={minWidth:this._isNumber(o.minWidth)?o.minWidth:0,maxWidth:this._isNumber(o.maxWidth)?o.maxWidth:1/0,minHeight:this._isNumber(o.minHeight)?o.minHeight:0,maxHeight:this._isNumber(o.maxHeight)?o.maxHeight:1/0},(this._aspectRatio||t)&&(i=n.minHeight*this.aspectRatio,s=n.minWidth/this.aspectRatio,e=n.maxHeight*this.aspectRatio,h=n.maxWidth/this.aspectRatio,i>n.minWidth&&(n.minWidth=i),s>n.minHeight&&(n.minHeight=s),e<n.maxWidth&&(n.maxWidth=e),h<n.maxHeight&&(n.maxHeight=h)),this._vBoundaries=n},_updateCache:function(t){this.offset=this.helper.offset(),this._isNumber(t.left)&&(this.position.left=t.left),this._isNumber(t.top)&&(this.position.top=t.top),this._isNumber(t.height)&&(this.size.height=t.height),this._isNumber(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var i=this.position,e=this.size,s=this.axis;return this._isNumber(t.height)?t.width=t.height*this.aspectRatio:this._isNumber(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===s&&(t.left=i.left+(e.width-t.width),t.top=null),"nw"===s&&(t.top=i.top+(e.height-t.height),t.left=i.left+(e.width-t.width)),t},_respectSize:function(t){var i=this._vBoundaries,e=this.axis,s=this._isNumber(t.width)&&i.maxWidth&&i.maxWidth<t.width,h=this._isNumber(t.height)&&i.maxHeight&&i.maxHeight<t.height,n=this._isNumber(t.width)&&i.minWidth&&i.minWidth>t.width,o=this._isNumber(t.height)&&i.minHeight&&i.minHeight>t.height,a=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,r=/sw|nw|w/.test(e),p=/nw|ne|n/.test(e);return n&&(t.width=i.minWidth),o&&(t.height=i.minHeight),s&&(t.width=i.maxWidth),h&&(t.height=i.maxHeight),n&&r&&(t.left=a-i.minWidth),s&&r&&(t.left=a-i.maxWidth),o&&p&&(t.top=l-i.minHeight),h&&p&&(t.top=l-i.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_getPaddingPlusBorderDimensions:function(t){for(var i=0,e=[],s=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],h=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")];i<4;i++)e[i]=parseFloat(s[i])||0,e[i]+=parseFloat(h[i])||0;return{height:e[0]+e[2],width:e[1]+e[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var t,i=0,e=this.helper||this.element;i<this._proportionallyResizeElements.length;i++)t=this._proportionallyResizeElements[i],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(t)),t.css({height:e.height()-this.outerDimensions.height||0,width:e.width()-this.outerDimensions.width||0})},_renderProxy:function(){var i=this.element,e=this.options;this.elementOffset=i.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++e.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,i){return{width:this.originalSize.width+i}},w:function(t,i){var e=this.originalSize;return{left:this.originalPosition.left+i,width:e.width-i}},n:function(t,i,e){var s=this.originalSize;return{top:this.originalPosition.top+e,height:s.height-e}},s:function(t,i,e){return{height:this.originalSize.height+e}},se:function(i,e,s){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[i,e,s]))},sw:function(i,e,s){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[i,e,s]))},ne:function(i,e,s){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[i,e,s]))},nw:function(i,e,s){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[i,e,s]))}},_propagate:function(i,e){t.ui.plugin.call(this,i,[e,this.ui()]),"resize"!==i&&this._trigger(i,e,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(i){var e=t(this).resizable("instance"),s=e.options,h=e._proportionallyResizeElements,n=h.length&&/textarea/i.test(h[0].nodeName),o=n&&e._hasScroll(h[0],"left")?0:e.sizeDiff.height,a=n?0:e.sizeDiff.width,l={width:e.size.width-a,height:e.size.height-o},r=parseFloat(e.element.css("left"))+(e.position.left-e.originalPosition.left)||null,p=parseFloat(e.element.css("top"))+(e.position.top-e.originalPosition.top)||null;e.element.animate(t.extend(l,p&&r?{top:p,left:r}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseFloat(e.element.css("width")),height:parseFloat(e.element.css("height")),top:parseFloat(e.element.css("top")),left:parseFloat(e.element.css("left"))};h&&h.length&&t(h[0]).css({width:s.width,height:s.height}),e._updateCache(s),e._propagate("resize",i)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var i,e,s,h,n,o,a,l=t(this).resizable("instance"),r=l.options,p=l.element,d=r.containment,g=d instanceof t?d.get(0):/parent/.test(d)?p.parent().get(0):d;g&&(l.containerElement=t(g),/document/.test(d)||d===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(i=t(g),e=[],t(["Top","Right","Left","Bottom"]).each(function(t,s){e[t]=l._num(i.css("padding"+s))}),l.containerOffset=i.offset(),l.containerPosition=i.position(),l.containerSize={height:i.innerHeight()-e[3],width:i.innerWidth()-e[1]},s=l.containerOffset,h=l.containerSize.height,n=l.containerSize.width,o=l._hasScroll(g,"left")?g.scrollWidth:n,a=l._hasScroll(g)?g.scrollHeight:h,l.parentData={element:g,left:s.left,top:s.top,width:o,height:a}))},resize:function(i){var e,s,h,n,o=t(this).resizable("instance"),a=o.options,l=o.containerOffset,r=o.position,p=o._aspectRatio||i.shiftKey,d={top:0,left:0},g=o.containerElement,u=!0;g[0]!==document&&/static/.test(g.css("position"))&&(d=l),r.left<(o._helper?l.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-l.left:o.position.left-d.left),p&&(o.size.height=o.size.width/o.aspectRatio,u=!1),o.position.left=a.helper?l.left:0),r.top<(o._helper?l.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-l.top:o.position.top),p&&(o.size.width=o.size.height*o.aspectRatio,u=!1),o.position.top=o._helper?l.top:0),h=o.containerElement.get(0)===o.element.parent().get(0),n=/relative|absolute/.test(o.containerElement.css("position")),h&&n?(o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top):(o.offset.left=o.element.offset().left,o.offset.top=o.element.offset().top),e=Math.abs(o.sizeDiff.width+(o._helper?o.offset.left-d.left:o.offset.left-l.left)),s=Math.abs(o.sizeDiff.height+(o._helper?o.offset.top-d.top:o.offset.top-l.top)),e+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-e,p&&(o.size.height=o.size.width/o.aspectRatio,u=!1)),s+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-s,p&&(o.size.width=o.size.height*o.aspectRatio,u=!1)),u||(o.position.left=o.prevPosition.left,o.position.top=o.prevPosition.top,o.size.width=o.prevSize.width,o.size.height=o.prevSize.height)},stop:function(){var i=t(this).resizable("instance"),e=i.options,s=i.containerOffset,h=i.containerPosition,n=i.containerElement,o=t(i.helper),a=o.offset(),l=o.outerWidth()-i.sizeDiff.width,r=o.outerHeight()-i.sizeDiff.height;i._helper&&!e.animate&&/relative/.test(n.css("position"))&&t(this).css({left:a.left-h.left-s.left,width:l,height:r}),i._helper&&!e.animate&&/static/.test(n.css("position"))&&t(this).css({left:a.left-h.left-s.left,width:l,height:r})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var i=t(this).resizable("instance").options;t(i.alsoResize).each(function(){var i=t(this);i.data("ui-resizable-alsoresize",{width:parseFloat(i.width()),height:parseFloat(i.height()),left:parseFloat(i.css("left")),top:parseFloat(i.css("top"))})})},resize:function(i,e){var s=t(this).resizable("instance"),h=s.options,n=s.originalSize,o=s.originalPosition,a={height:s.size.height-n.height||0,width:s.size.width-n.width||0,top:s.position.top-o.top||0,left:s.position.left-o.left||0};t(h.alsoResize).each(function(){var i=t(this),s=t(this).data("ui-resizable-alsoresize"),h={},n=i.parents(e.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(n,function(t,i){var e=(s[i]||0)+(a[i]||0);e&&e>=0&&(h[i]=e||null)}),i.css(h)})},stop:function(){t(this).removeData("ui-resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var i=t(this).resizable("instance"),e=i.size;i.ghost=i.originalElement.clone(),i.ghost.css({opacity:.25,display:"block",position:"relative",height:e.height,width:e.width,margin:0,left:0,top:0}),i._addClass(i.ghost,"ui-resizable-ghost"),!1!==t.uiBackCompat&&"string"==typeof i.options.ghost&&i.ghost.addClass(this.options.ghost),i.ghost.appendTo(i.helper)},resize:function(){var i=t(this).resizable("instance");i.ghost&&i.ghost.css({position:"relative",height:i.size.height,width:i.size.width})},stop:function(){var i=t(this).resizable("instance");i.ghost&&i.helper&&i.helper.get(0).removeChild(i.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var i,e=t(this).resizable("instance"),s=e.options,h=e.size,n=e.originalSize,o=e.originalPosition,a=e.axis,l="number"==typeof s.grid?[s.grid,s.grid]:s.grid,r=l[0]||1,p=l[1]||1,d=Math.round((h.width-n.width)/r)*r,g=Math.round((h.height-n.height)/p)*p,u=n.width+d,f=n.height+g,c=s.maxWidth&&s.maxWidth<u,m=s.maxHeight&&s.maxHeight<f,z=s.minWidth&&s.minWidth>u,w=s.minHeight&&s.minHeight>f;s.grid=l,z&&(u+=r),w&&(f+=p),c&&(u-=r),m&&(f-=p),/^(se|s|e)$/.test(a)?(e.size.width=u,e.size.height=f):/^(ne)$/.test(a)?(e.size.width=u,e.size.height=f,e.position.top=o.top-g):/^(sw)$/.test(a)?(e.size.width=u,e.size.height=f,e.position.left=o.left-d):((f-p<=0||u-r<=0)&&(i=e._getPaddingPlusBorderDimensions(this)),f-p>0?(e.size.height=f,e.position.top=o.top-g):(f=p-i.height,e.size.height=f,e.position.top=o.top+n.height-f),u-r>0?(e.size.width=u,e.position.left=o.left-d):(u=r-i.width,e.size.width=u,e.position.left=o.left+n.width-u))}}),t.ui.resizable})?s.apply(i,h):s)||(t.exports=n)},"zq/Y":function(t,i,e){var s,h,n;h=[e("oDIA"),e("O+lX")],void 0===(n="function"==typeof(s=function(t){return t.fn.extend({disableSelection:function(){var t="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(t+".ui-disableSelection",function(t){t.preventDefault()})}}(),enableSelection:function(){return this.off(".ui-disableSelection")}})})?s.apply(i,h):s)||(t.exports=n)}}]);
//# sourceMappingURL=aui.chunk.ae3c4b97fc5a1976668b--c6988b4dfd3c4a3d1198.js.map;
;
/* module-key = 'com.atlassian.auiplugin:split_jquery.ui.resizable', location = 'aui.chunk.a312bad5b76741024fb4--5eca985b02b335e904e5.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["jquery.ui.resizable"],{kW2n:function(u,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i("2V+C"),i("XnJT"),e.default="jquery",u.exports=e.default}},[["kW2n","runtime","aui.splitchunk.vendors--20a97d6a33","aui.splitchunk.vendors--d18e3cafa7","aui.splitchunk.vendors--db57146687","aui.splitchunk.vendors--9c8c8c1546","aui.splitchunk.vendors--85718a7eef","aui.splitchunk.172ffb6da7"]]]);
//# sourceMappingURL=aui.chunk.a312bad5b76741024fb4--5eca985b02b335e904e5.js.map;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-notification', location = 'includes/js/rapid/ui/notification/Notification.soy' */
// This file was automatically generated from Notification.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.rapid.notification.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.rapid == 'undefined') { GH.tpl.rapid = {}; }
if (typeof GH.tpl.rapid.notification == 'undefined') { GH.tpl.rapid.notification = {}; }


GH.tpl.rapid.notification.renderErrorMessages = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.errors.length > 1) {
    output += '<ul>';
    var errorList6 = opt_data.errors;
    var errorListLen6 = errorList6.length;
    for (var errorIndex6 = 0; errorIndex6 < errorListLen6; errorIndex6++) {
      var errorData6 = errorList6[errorIndex6];
      output += '<li>' + ((errorData6.noAutoescape) ? soy.$$filterNoAutoescape(errorData6.message) : soy.$$escapeHtml(errorData6.message)) + '</li>';
    }
    output += '</ul>';
  } else {
    var errorList18 = opt_data.errors;
    var errorListLen18 = errorList18.length;
    for (var errorIndex18 = 0; errorIndex18 < errorListLen18; errorIndex18++) {
      var errorData18 = errorList18[errorIndex18];
      output += '<p>' + ((errorData18.noAutoescape) ? soy.$$filterNoAutoescape(errorData18.message) : soy.$$escapeHtml(errorData18.message)) + '</p>';
    }
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderErrorMessages.soyTemplateName = 'GH.tpl.rapid.notification.renderErrorMessages';
}


GH.tpl.rapid.notification.renderContextualErrors = function(opt_data, opt_ignored) {
  var output = '';
  var errorList29 = opt_data.errors;
  var errorListLen29 = errorList29.length;
  for (var errorIndex29 = 0; errorIndex29 < errorListLen29; errorIndex29++) {
    var errorData29 = errorList29[errorIndex29];
    output += '<div class="ghx-error">' + soy.$$escapeHtml(errorData29.message) + '</div>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderContextualErrors.soyTemplateName = 'GH.tpl.rapid.notification.renderContextualErrors';
}


GH.tpl.rapid.notification.renderMessageHolder = function(opt_data, opt_ignored) {
  return '<div class="ghx-body-warning">' + soy.$$escapeHtml(AJS.format('This version of {0} is not a supported browser.',opt_data.browser)) + ' <a href="' + soy.$$escapeHtml(opt_data.docsUrl) + '">' + soy.$$escapeHtml('See our documentation for the list of supported browsers.') + '</a></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderMessageHolder.soyTemplateName = 'GH.tpl.rapid.notification.renderMessageHolder';
}


GH.tpl.rapid.notification.renderAuiMessage = function(opt_data, opt_ignored) {
  return '<div class="aui-message ' + soy.$$escapeHtml(opt_data.type) + ((opt_data.className) ? ' aui-message-' + soy.$$escapeHtml(opt_data.className) : '') + '">' + ((opt_data.title) ? '<p class="title">' + ((opt_data.icon) ? '<span class="aui-icon icon-' + soy.$$escapeHtml(opt_data.type) + '"></span>' : '') + '<strong>' + soy.$$escapeHtml(opt_data.title) + '</strong></p>' : '') + ((opt_data.message) ? '<p>' + ((! opt_data.title && opt_data.icon) ? '<span class="aui-icon icon-' + soy.$$escapeHtml(opt_data.type) + '"></span>' : '') + ((opt_data.messageHtml) ? soy.$$filterNoAutoescape(opt_data.message) : soy.$$escapeHtml(opt_data.message)) + '</p>' : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderAuiMessage.soyTemplateName = 'GH.tpl.rapid.notification.renderAuiMessage';
}


GH.tpl.rapid.notification.renderGHtvMessage = function(opt_data, opt_ignored) {
  return '<div id="ghx-update-message" class="ghx-tv-message"><p>' + soy.$$escapeHtml('This board has been updated') + ': <a href="" class="js-refresh-now" data-track-click="gh.rapidboard.updated.message.refresh.click">' + soy.$$escapeHtml('Refresh') + '</a><span class="ghx-divider">&bull;</span><a href="" class="js-ignore-refresh" data-track-click="gh.rapidboard.updated.message.cancel.click">' + soy.$$escapeHtml('Ignore') + '</a></p></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderGHtvMessage.soyTemplateName = 'GH.tpl.rapid.notification.renderGHtvMessage';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-notification', location = 'includes/js/rapid/ui/notification/Notification.js' */
define("jira-agile/rapid/ui/notification",["require"],function(e){"use strict";function a(e,a,r){return s(i({body:e,title:r.showTitle?a:void 0,close:r.autoHide?"auto":r.closeable?"manual":"never",type:r.type}))}function s(e){var a=r(e).find(".title");return""===r.trim(a.text())&&a.remove(),e}var r=e("jquery"),t=e("underscore"),i=e("aui/flag"),n=e("jira/util/logger"),o=e("jira/analytics"),d={showErrors:function(e){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=arguments[2],r="Error",t=GH.tpl.rapid.notification.renderErrorMessages(e);d.showError(r,t,a,s)},showError:function(e,s){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments[3],n={autoHide:!1,closeable:r,showTitle:!0,type:"error"};i=t.extend({},n,i),a(s,e,i)},showWarnings:function(e,s){var r={preRendered:!1,autoHide:!0,closeable:!0,showTitle:!1,type:"warning"};s=t.extend({},r,s);var i=void 0;i=s.preRendered?e:GH.tpl.rapid.notification.renderErrorMessages({errors:e}),a(i,"Warning",s)},showWarning:function(e){d.showWarnings(e,{preRendered:!0})},showSuccess:function(e,s){var r={closeable:!0,autoHide:!0,showTitle:!1,type:"success"};s=t.extend({},r,s),a(e,null,s)},clear:function(){r("#aui-flag-container").empty()},handleDateFormatMismatchError:function(e){var a='<a href="'+GH.Ajax.CONTEXT_PATH+'/secure/admin/AdvancedApplicationProperties.jspa">';a+="Advanced Settings",a+="</a>";var s=AJS.format("It appears your Jira date format settings are misconfigured. Please check the {0} and ensure that \'\'jira.date.time.picker.java.format\'\' and \'\'jira.date.time.picker.javascript.format\'\' have matching output.",a);d.showWarnings(s,{autoHide:!1,preRendered:!0})},auiMessage:function(){n.warn("[deprecated] GH.Notification.auiMessage has no effect")},showIssueMessage:function(e){var a=JIRA.SessionStorage,s=null,r=null;e||(e=a.getItem("selectedIssueId")),e&&(r=a.getItem("selectedIssueKey"),s=a.getItem("selectedIssueMsg"),d.showIssueMessageImpl(e,s,r)),a.removeItem("selectedIssueId"),a.removeItem("selectedIssueKey"),a.removeItem("selectedIssueMsg")},showIssueMessageImpl:function(e,a,s){a||(a="thanks_issue_updated");var r=AJS.params[a];r&&s&&(r=AJS.format(r,s),d.showSuccess(r))},addPageLoadMessage:function(e,a){var s=GH.storage.get("gh.pageloadmessages",!0)||[];s.push({message:e,type:a||"success"}),GH.storage.put("gh.pageloadmessages",s,!0)},_displayPageLoadMessages:function(){var e=GH.storage.get("gh.pageloadmessages",!0);if(e){var a=e[0].type,s="";switch(t.each(e,function(e){s.length>0&&(s+="<br>"),s+=e.message}),a){case"warning":d.showWarning(s);break;case"success":default:d.showSuccess(s)}GH.storage.put("gh.pageloadmessages",null,!0)}},showBoardUpdatedMessage:function(){d.triggerShowMessageAnalytics(),d.clearBoardUpdatedMessage();var e=r.Deferred(),a=r(GH.tpl.rapid.notification.renderGHtvMessage()).appendTo("#gh");return a.data("deferred",e),a.find(".js-refresh-now").click(function(s){s.preventDefault(),a.removeData("deferred"),d.clearBoardUpdatedMessage(),e.resolve()}),a.find(".js-ignore-refresh").click(function(e){e.preventDefault(),d.clearBoardUpdatedMessage()}),e.promise()},clearBoardUpdatedMessage:function(){var e=r("#ghx-update-message");if(e.length){var a=e.data("deferred");a&&a.reject&&a.reject(),e.remove()}},isBoardUpdatedMessageVisible:function(){var e=r("#ghx-update-message");return e.length>0},triggerShowMessageAnalytics:function(){o.send({name:"gh.rapidboard.updated.message.show",properties:{initial:!d.isBoardUpdatedMessageVisible()}})}};return d}),AJS.namespace("GH.Notification",null,require("jira-agile/rapid/ui/notification")),AJS.$(document).ready(function(){GH.Notification.showIssueMessage(),GH.storage&&GH.Notification._displayPageLoadMessages()});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/rapid/Events.js' */
define("jira-agile/rapid/events",["require"],function(t){function n(t){return t?e.extend(t,n.prototype):t=this,t._bindings=[],t}var e=t("underscore");return n.prototype={on:function(t,n,e){return e&&this._off({type:t,context:e}),this._bindings.push({type:t,handler:n,context:e}),this},off:function(t){return e.isString(t)?this._off({type:t}):e.isFunction(t)?this._off({handler:t}):e.isObject(t)&&this._off({context:t}),this},_off:function(t){this._bindings=e.reject(this._bindings,function(n){var e=!t.type||t.type===n.type,i=!t.context||t.context===n.context,r=!t.handler||t.handler===n.handler;return e&&i&&r})},trigger:function(t){var n=Array.prototype.slice.call(arguments,1);return e.each(this._bindings,function(e){e.type===t&&e.handler.apply(e.context,n)}),this}},n}),AJS.namespace("GH.Events",null,require("jira-agile/rapid/events"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/rapid/GlobalEvents.js' */
define("jira-agile/rapid/global-events",["require"],function(e){"use strict";var i=e("jira-agile/rapid/events");return new i});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/gh-namespace.js' */
AJS.namespace("GH.namespace",null,AJS.namespace);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/gh-config.js' */
define("jira-agile/config",[],function(){"use strict";var i={};return i.isSampleDataAvailable=!1,i}),AJS.namespace("GH.Config",null,require("jira-agile/config"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/rapid/Ajax.js' */
define("jira-agile/rapid/ajax",["jira/util/formatter","jira/ajs/ajax/smart-ajax","jira/util/data/meta","underscore","wrm/context-path","jquery","jira/jquery/deferred"],function(e,r,t,n,o,a,s){var u={};return u.CONTEXT_PATH=o(),u.REST_URL_BASE="/rest/greenhopper/1.0",u.PUBLIC_REST_URL_BASE="/rest/agile/1.0",u.xhrRegistery={},u.stallTimeout=300,u.get=function(e,r){a.extend(e,{type:"GET",headers:{"X-Atlassian-GreenHopper-Gadget":!n.isUndefined(GH.gadget)}});var t=u._executeGet(e,r);return t.pipe(function(e,r,t){return s().resolveWith(this,[e.success,r,t])})},u.post=function(e){return e=u._getSettings(e,!0),a.extend(e,{type:"POST",contentType:"application/json"}),u._executeStore(e)},u.put=function(e){return e=u._getSettings(e,!0),e.type="PUT",u._executeStore(e)},u.del=function(e){return e=u._getSettings(e,!0),e.type="DELETE",u._executeStore(e)},u._getSettings=function(e,r){return!e.bareUrl&&e.url&&(e.bareUrl=u.buildRestUrl(e.url)),e.bareUrl&&(e.url=e.bareUrl),e.dataType||(e.dataType="json"),e.data&&r&&(e.data=JSON.stringify(e.data)),e.contentType="application/json",e},u._getXhrData=function(e){var r={timestamp:0};return e&&(r=u.xhrRegistery[e]?u.xhrRegistery[e]:u.xhrRegistery[e]=r),r},u._executeGet=function(e,r){e=u._getSettings(e);var t=u._getXhrData(r);t.xhr&&(GH.log("aborting request for "+r,GH.Logger.Contexts.ajax),t.xhr.abort(),delete t.xhr,delete t.xhrAbort,delete t.timeoutId);var n=t.timestamp;if(t.timestamp=(new Date).getTime(),t.timestamp-n<u.stallTimeout){GH.log("stalling request for "+r+", time since last request: "+(t.timestamp-n),GH.Logger.Contexts.ajax);var o,a=s(),i=function(){o=u._executeGet(e,r),o.done(a.resolve).fail(a.reject)};t.timeoutId=window.setTimeout(i,u.stallTimeout),t.xhr=a.promise(),t.xhr.abort=function(){o?o.abort.apply(o,arguments):clearTimeout(t.timeoutId)}}else GH.log("executing request for "+r,GH.Logger.Contexts.ajax),t.xhr=u.makeRequest(e);return t.xhrAbort=t.xhr.abort,t.xhr.abort=function(){var e=t.xhr,r=t.xhrAbort;if(e&&r)return r.apply(e,arguments)},t.xhr.done(function(){t.xhr&&delete t.xhr}).fail(function(){t.xhr&&delete t.xhr}),t.xhr},u._executeStore=function(e){if(e=e||{},e.data&&"string"==typeof e.data&&/\?\?/.test(e.data)){var r="\\u003F\\u003F";e.data=e.data.replace(/\?\?/g,r)}return e.dataType="json",u.makeRequest(e)},u.makeRequest=function(e){var t=s();e=n.extend(e,{success:function(){t.resolveWith(this,arguments)},error:function(){t.rejectWith(this,arguments)}});var o=t.promise(r.makeRequest(e)),a=o.abort;o.abort=function(e){return o.abortMarker="timeout"!=e,a.apply(o,arguments)};var i=o.pipe(u._generateDoneInterceptor(),u._generateFailInterceptor(e.errorsNoAutoEscape));return e.deferErrorHandling||i.fail(u._generateErrorHandler(e.onGlobalError,e.errorContextMap,e.contextualErrorRenderer,e.globalErrorDismissable)),i},u._generateDoneInterceptor=function(){return function(e,r,t){return e=e||{},e=u._createExtendedResult(e),u.matchesCurrentUser(t)?e.isSuccess()?s().resolveWith(this,[e,r,t]):s().rejectWith(this,[e,t,r,null]):u._handleCurrentUserChanged(t)}},u._generateFailInterceptor=function(e){return function(r,t,n){if(r.abortMarker)return s();if(!u.matchesCurrentUser(r))return u._handleCurrentUserChanged(r);var o={},a=null;if(r.responseText)try{o=JSON.parse(r.responseText)}catch(e){}return o.errors||o.errorMessages?a=u._convertJiraErrors(o,e):o.message&&(a=u._convertFrameworkErrors(o)),a||(a=u._convertGenericErrors(r,n)),s().rejectWith(this,[a,r,t,n])}},u.handleContextualErrors=function(e,r,t){return r=r||{},!!e.hasContextualErrors()&&(a(e.getContextualErrors()).each(function(n,o){var s=r[o.contextId];if(s)if(a.isFunction(s))s(o,e);else{s=a(s),s.siblings(".ghx-error").remove();var u;u=t?t(o):GH.tpl.rapid.notification.renderContextualErrors({errors:o.errors}),s.after(u)}else a(o.errors).each(function(r,t){e.addGlobalError(t)})}),!0)},u.handleGlobalErrors=function(e,r,t){return!!e.hasGlobalErrors()&&(GH.Notification.showErrors({errors:e.getGlobalErrors()},t),r&&r instanceof Function&&r(e),!0)},u.buildRestUrl=function(e){return 0!==e.indexOf("/")&&(e="/"+e),u.buildBareRestUrl(u.REST_URL_BASE+e)},u.buildPublicRestUrl=function(e){return 0!==e.indexOf("/")&&(e="/"+e),u.buildBareRestUrl(u.PUBLIC_REST_URL_BASE+e)},u.buildBareRestUrl=function(e){return 0!==e.indexOf("/")&&(e="/"+e),u.CONTEXT_PATH+e},u._createExtendedResult=function(e){return e?u._extendResult({success:e}):u._extendResult({success:!0})},u._extendResult=function(e){return a.extend(e,{getGlobalErrors:function(){return e.error?e.error.errors:null},getContextualErrors:function(){return e.error?e.error.contextualErrors:null},hasGlobalErrors:function(){return e.error&&e.error.errors&&e.error.errors.length>0},hasContextualErrors:function(){return e.error&&e.error.contextualErrors},addGlobalError:function(r){e.error||(e.error={}),e.error.errors||(e.error.errors=[]),e.error.errors[e.error.errors.length]=r},getSuccessObject:function(){return e.success},isSuccess:function(){return!e.error}})},u._generateErrorHandler=function(e,r,t,n){return function(o){u.handleContextualErrors(o,r,t),u.handleGlobalErrors(o,e,n)}},u._convertJiraErrors=function(e,r){var t=e.errorMessages?e.errorMessages:[];t=n.map(t,function(e){return{message:e,noAutoescape:r}});var o=e.errors?e.errors:{};o=n.map(o,function(e,t){return{contextId:t,errors:[{message:e,noAutoescape:r}]}});var a={error:{errors:t,contextualErrors:o}};return u._extendResult(a)},u._convertFrameworkErrors=function(e){var r={error:{errors:[{message:e.message}],contextualErrors:[]}};return u._extendResult(r)},u._convertGenericErrors=function(r,t){var n=u._extendResult({});return r.responseText&&GH.log("Got an error response with text that we don't know how to parse: "+r.responseText),504===r.status||0===r.status&&a.contains(["abort","timeout"],t)?n.addGlobalError({status:504,message:"Request timed out"}):t?n.addGlobalError({status:r.status,message:t}):GH.log("Got an Ajax request error response with empty 'errorThrown' value. Silently logging"),n},u._hasUsernameResponseHeader=function(e){return!!e.getResponseHeader("X-AUSERNAME")},u._getUserForResponse=function(e){return e.getResponseHeader("X-AUSERNAME")?decodeURIComponent(e.getResponseHeader("X-AUSERNAME")):"anonymous"},u.getUserFromAJS=function(){var e=t.get("remote-user");return e?e:"anonymous"},u.matchesCurrentUser=function(e){return!e.getResponseHeader||!e.getAllResponseHeaders||!u._hasUsernameResponseHeader(e)||u.getUserFromAJS()===u._getUserForResponse(e)||204===e.status&&!e.getAllResponseHeaders()&&a.browser.msie},u._handleCurrentUserChanged=function(e){var r=u.getUserFromAJS(),t=u._getUserForResponse(e);return"anonymous"!==r&&"anonymous"===t?(GH.log("User changed. original: "+r+" new: "+t+". Redirecting to the login page"),location.href=GH.Navigation.getLoginUrl()):(GH.log("User changed. original: "+r+" new: "+t+". Reloading the page"),location.reload()),s()},u}),AJS.namespace("GH.Ajax",null,require("jira-agile/rapid/ajax"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/rapid/Logger.js' */
define("jira-agile/rapid/logger",["jira/util/logger","underscore"],function(e,t){var a={};return a.Contexts={},a.Contexts.ajax="ajax",a.Contexts.event="event",a.Contexts.state="state",a.Contexts.ui="ui",a.Contexts.callback="callback",a.Contexts.refresh="refresh",a.enabledContexts=[a.Contexts.ajax,a.Contexts.event,a.Contexts.state,a.Contexts.ui,a.Contexts.callback,a.Contexts.refresh],a.log=function(n,o){if(!o||t.contains(a.enabledContexts,o)){var i=o?a.pad(o,6)+": "+n:n;e.log(i)}},a.pad=function(e,t){return e.length<t?e+"                               ".substr(0,t-e.length):e},a.timeMap={},a.timeStart=function(e){if(!e)throw"start: If starting a timer manually a name must be set";a.timeMap[e]=(new Date).getTime()},a.timeStop=function(e){if(!(e in a.timeMap))throw"stop:"+e+" not found";var t=(new Date).getTime()-a.timeMap[e];delete a.timeMap[e],a.log(t+"ms on "+e,a.Contexts.ui)},a}),AJS.namespace("GH.Logger",null,require("jira-agile/rapid/logger")),AJS.namespace("GH.log",null,require("jira-agile/rapid/logger").log);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/rapid/state/storage.js' */
define("jira-agile/rapid/state/storage",[],function(){"use strict";var e={};return e.get=function(e,t){var r=void 0;if(r=t?sessionStorage.getItem(e):localStorage.getItem(e),"string"!=typeof r)return r;try{return JSON.parse(r)}catch(e){return GH.log("GH.storage: Caught error: "+e),void GH.log("GH.storage: Cannot parse json string retrieved from "+(t?"session":"local")+" storage. Ignoring value "+r)}},e.put=function(e,t,r){if(null===t||void 0===t)r?sessionStorage.removeItem(e):localStorage.removeItem(e);else try{r?sessionStorage.setItem(e,JSON.stringify(t)):localStorage.setItem(e,JSON.stringify(t))}catch(e){return!1}return!0},window.localStorage&&window.sessionStorage||(e.get=function(){return null},e.put=function(){return!1}),e}),AJS.namespace("GH.storage",null,require("jira-agile/rapid/state/storage"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/rapid/Validation.js' */
define("jira-agile/rapid/validation",["jira/util/formatter","jquery"],function(r,t){var n={};return n.notBlank=function(r,e,a){var i=n.applyRules(r,e,a,function(){return t.trim(t(r).val()).length>0});return i},n.maxLength=function(r,e,a,i){var o=n.applyRules(r,a,i,function(){return t.trim(t(r).val()).length<=e});return o},n.isPositiveInteger=function(r,e,a){var i=n.applyRules(r,e,a,function(){return/^\d*$/.test(t.trim(t(r).val()))});return i},n.applyRules=function(r,e,a,i){r=t(r);var o=a?t(a):r,l=i.call(this);return!!l||(n.showContextualErrors(o,e),!1)},n.showContextualErrors=function(t,e,a,i,o){n.clearContextualErrors(t),t.after(GH.tpl.rapid.notification.renderContextualErrors({errors:[{message:r.I18n.getText(e,a,i,o)}]}))},n.clearContextualErrors=function(r){r=t(r),r.find(".ghx-error").remove(),r.siblings(".ghx-error").remove()},n}),AJS.namespace("GH.Validation",null,require("jira-agile/rapid/validation"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/gh-helppaths.js' */
AJS.namespace("GH.HelpPaths"),GH.HelpPaths.getHelpPath=function(e){return null};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/gh-message.js' */
define("jira-agile/message",["jira/util/logger"],function(e){"use strict";var a={};return a.showIssueMessage=function(){e.warn("[deprecated] GH.Message.showIssueMessage has no effect, @see module:jira-agile/rapid/ui/notification")},a.showSuccess=function(){e.warn("[deprecated] GH.Message.showSuccess has no effect, @see module:jira-agile/rapid/ui/notification")},a.showWarning=function(){e.warn("[deprecated] GH.Message.showWarning has no effect, @see module:jira-agile/rapid/ui/notification")},a.showPersistentWarning=function(){e.warn("[deprecated] GH.Message.showPersistentWarning has no effect, @see module:jira-agile/rapid/ui/notification")},a}),AJS.namespace("GH.Message",null,require("jira-agile/message"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/rapid/Util.js' */
define("jira-agile/rapid/util",["underscore","jquery"],function(e,r){var n={};return n.getPluginKey=function(){return r('meta[name="ghx-plugin-key"]').attr("content")},n.wrapPreventDefault=function(e,r){return function(n){return n.preventDefault(),e.apply(r||this,arguments)}},n.andThenSplice=function(){return{_needsSplice:Array.prototype.slice.call(arguments)}},n.andThen=function(n){var t=[{trigger:"resolveWith",on:"done",filter:arguments[1]},{trigger:"rejectWith",on:"fail",filter:arguments[2]},{trigger:"notifyWith",on:"progress",filter:arguments[3]}];return r.Deferred(function(r){e.each(t,function(t){var i=t.on,a=t.trigger,o=e.isFunction(t.filter)&&t.filter;n[i](function(){var n=o&&o.apply(this,arguments);if(n&&e.isFunction(n.promise))n.promise().done(r.resolve).fail(r.reject).progress(r.notify);else{var t;t=n&&e.isArray(n._needsSplice)?n._needsSplice:o?[n]:arguments,r[a](e.isFunction(this.promise)?r.promise():this,t)}})})}).promise()},r._OriginalDeferred=r.Deferred,r.Deferred=function(e){return r._OriginalDeferred(function(r){r.andThen=function(){var e=Array.prototype.slice.call(arguments);return e.unshift(r),n.andThen.apply(this,e)};var t=r.promise;r.promise=function(){var e=t.apply(this,arguments);return e.andThen=function(){var r=Array.prototype.slice.call(arguments);return r.unshift(e),n.andThen.apply(this,r)},e},e&&e.call(r,r)})},n.indexOf=function(r,n,t){var i=-1;return t&&(r=r.slice().reverse()),e.some(r,function(e,a){return!!n(e,a)&&(i=t?r.length-1-a:a,!0)}),i},n.swapArrayItems=function(e,r,n){var t;return!!(e&&r!==n&&Math.min(r,n)>=0&&Math.max(r,n)<e.length)&&(t=e[n],e[n]=e[r],e[r]=t,!0)},n.roundToDecimalPlaces=function(e,r){if("number"!=typeof e||e===Math.round(e))return e;if(0===r)return Math.round(e);var n=e.toString();if(n.indexOf("e")>=0)return e;var t=e<0,i=n.split("."),a=+i[1].charAt(r);if(i[1]=i[1].substr(0,r),a>5||!t&&5===a){var o=/^0*/.exec(i[1])[0];i[1]=o+(+i[1]+1),i[1].length>r&&(o?i[1]=i[1].substr(i[1].length-r):(i[0]=+i[0]+1,i[1]=0))}return parseFloat(i.join("."))},n}),AJS.namespace("GH.Util",null,require("jira-agile/rapid/util"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/rapid/UserData.js' */
define("jira-agile/rapid/user-data",["jira/util/data/meta"],function(e){var r={};return r.remoteUser=e.get("remote-user"),r.loggedIn=!!r.remoteUser,r.hasUser=function(){return r.loggedIn},r.getUserName=function(){return r.remoteUser},r.canCreateProject=function(){return r.userConfig.canCreateProject},r.setGlobalConfig=function(e){r.quickCreateDefaultIssueTypeId=e.quickCreateDefaultIssueTypeId,r.userConfig=e.userConfig,r.userConfig&&r.userConfig.canCreateProject&&(r.userConfig.canCreateProject=!GH.Features.DISABLE_CREATE_PROJECT.isEnabled())},r}),AJS.namespace("GH.UserData",null,require("jira-agile/rapid/user-data"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/gh-features.js' */
define("jira-agile/gh-features",["jira/ajs/dark-features"],function(e){"use strict";function a(e){this.featureKey=e,this.featureEmergencyDisabledKey=e+".emergencyDisabled"}return a.prototype.isEnabled=function(){return e.isEnabled(this.featureKey)&&!e.isEnabled(this.featureEmergencyDisabledKey)},Object.freeze({DISABLE_CREATE_PROJECT:new a("jag.DISABLE_CREATE_PROJECT"),EDITABLE_DETAIL_VIEW_ENABLED:new a("com.atlassian.jira.agile.darkfeature.editable.detailsview"),SPLIT_ISSUE:new a("com.atlassian.jira.agile.darkfeature.splitissue")})}),AJS.namespace("GH.Features",null,require("jira-agile/gh-features"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/gh/navigation/Navigation.js' */
AJS.namespace("GH.Navigation"),GH.Navigation={},GH.Navigation.gotoDefaultRapidBoardPage=function(a,i){window.location.href=GH.Navigation.getDefaultRapidBoardPageUrl(a,i)},GH.Navigation.getDefaultRapidBoardPageUrl=function(a,i){var n=_.isUndefined(i)?"":"&view="+i;return GH.Navigation.getCanonicRapidBoardPageUrl(a)+n},GH.Navigation.getCanonicRapidBoardPageUrl=function(a){return GH.Ajax.CONTEXT_PATH+"/secure/RapidBoard.jspa?rapidView="+a},GH.Navigation.getLoginUrl=function(){return GH.Ajax.CONTEXT_PATH+"/login.jsp?os_destination="+encodeURIComponent(window.location.href)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-dialog', location = 'includes/js/dialog/dialog.js' */
AJS.namespace("GH.Dialog"),GH.Dialog.baseExtension={_getDefaultOptions:function(){return AJS.$.extend(this._super(),{onDialogFinished:function(){this.handleSuccess()}})},_performRedirect:function(){this.redirected=!0,this.handleSuccess()},hide:function(e,n){return JIRA.Dialog.current===this&&(this._super(e),void(n===!0||!n||n.reason!==JIRA.Dialog.HIDE_REASON.escape&&n.reason!==JIRA.Dialog.HIDE_REASON.cancel||this.doCancelCleanup()))},doCancelCleanup:function(){},handleSuccess:function(){}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-dialog', location = 'includes/js/rapid/ops/DialogExtension.js' */
AJS.namespace("GH.Dialog.XBoardExtension"),GH.Dialog.XBoardExtension.getActionInfo=function(e){var t="workflow-transition-",a=e.options.id;return a.substring(0,t.length)===t?{formId:a,isTransition:!0,transitionId:a.substring(t.length)}:{formId:a,isTransition:!1}},GH.Dialog.XBoardExtension.handleSuccess=function(){GH.IssueOperationShortcuts.clearOverrideSelectedIssue(),this.hide(!0,!0),this._hideloadingIndicator();var e=GH.Dialog.XBoardExtension.getActionInfo(this),t=GH.IssueOperationShortcuts.getSelectedIssueId(),a=GH.IssueOperationShortcuts.getSelectedIssueKey();GH.WorkController.isActive()?GH.Dialog.handleWorkModeUpdate(t,a,e):GH.PlanController.isActive()&&GH.Dialog.handlePlanModeUpdate(t,a,e),AJS.$(GH).trigger("issueTransitioned",{issueId:t}),GH.Notification.showIssueMessage(t),GH.WorkDragAndDrop.transitionTargetStatus=void 0},GH.Dialog.handlePlanModeUpdate=function(e,t,a){if(!GH.IssueOperationShortcuts.isOverrideSelectedIssueActive()){var o=0,r=null,s=GH.BacklogModel.findModelWithIssue(t);s&&(GH.SprintModel.isSprintModel(s)&&(r=s.getSprintId()),o=s.getIssueList().getIssueIndex(t)),GH.PlanController.reload(function(){var e=GH.BacklogSelectionController.getSelectedIssueKey();if(!e){var t=null;r&&(t=GH.BacklogModel.getSprintModel(r)),t||(t=GH.BacklogModel.getBacklogModel2()),GH.BacklogSelectionController.selectIssue(t.getIssueList().getIssueKeyAtIndex(o))}})}},GH.Dialog.handleWorkModeUpdate=function(e,t,a){var o=GH.Dialog.createParentCompletedCheckCallback(t),r=GH.Dialog.createSelectMostAppropriateIssueCallback(t);if(a.isTransition)if(GH.WorkDragAndDrop.transitionTargetStatus){var s=GH.WorkDragAndDrop.transitionTargetStatus,n=GH.GridDataController.getModel(),i=n.getIssueDataByKey(t),l=n.getIssuePositionByKey(t),d=n.getColumns(),u=l.columnId,c=GH.GridColumnsData.getColumnIdForStatus(d,s);n.moveIssueToColumn(t,u,c),i.status=s,n.updateIssueData(i),GH.SwimlaneView.rerenderCell(l.swimlaneId,u),GH.SwimlaneView.rerenderCell(l.swimlaneId,c),o()}else GH.CallbackManager.registerCallback(GH.WorkController.CALLBACK_POOL_LOADED,"ParentWithAllSubsCompletedCheck",o);GH.CallbackManager.registerCallback(GH.WorkController.CALLBACK_POOL_LOADED,"SelectMostAppropriateIssueCallback",r),GH.WorkController.reload()},GH.Dialog.createParentCompletedCheckCallback=function(e){return function(){var t=GH.GridDataController.getModel();if(!_.isUndefined(t.data.issues[e])&&!_.isUndefined(t.data.issues[e].parentKey)){var a=t.data.issues[e].parentKey;if(_.contains(t.data.columnIssueMapping[_.last(t.data.columns).id],e)){var o=t.data.columnIssueMapping[_.last(t.data.columns).id],r=_.toArray(t.data.issues).reduce(function(e,t){return o.indexOf(t.key)>-1?e:e.concat(t.key)},[]),s=_.find(r,function(e){return t.data.issues[e].parentKey===a});s||GH.WorkController.resolveParentTask(t.data.issues[a])}}}},GH.Dialog.createSelectMostAppropriateIssueCallback=function(e){var t=GH.GridDataController.getModel().getIssuePositionByKey(e);return function(){var a=GH.GridDataController.getModel().getIssueDataByKey(e);if(!a){var o=GH.GridDataController.getModel().getIssueKeyAtPosition(t);o?(GH.WorkSelectionController.selectIssue(o,{pushState:!1,dontUpdateUI:!0}),GH.RapidBoard.State.replaceState()):(GH.WorkSelectionController.selectIssue(void 0,{pushState:!1,dontUpdateUI:!0}),GH.RapidBoard.State.replaceState())}}},GH.Dialog.XBoardExtension.doCancelCleanup=function(){GH.IssueOperationShortcuts.clearOverrideSelectedIssue(),GH.WorkDragAndDrop.transitionTargetStatus=void 0};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-dialog', location = 'includes/js/dialog/form-dialog.js' */
AJS.namespace("GH.FormDialog"),GH.FormDialog=JIRA.FormDialog.extend(GH.Dialog.baseExtension),GH.FormDialog=GH.FormDialog.extend(GH.Dialog.XBoardExtension);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-dialog', location = 'includes/js/dialog/labels-dialog.js' */
define("jira-agile/dialog/labels-dialog",["jira/dialog/labels-dialog"],function(i){var n=i.extend(GH.Dialog.baseExtension);return n=n.extend(GH.Dialog.XBoardExtension),n=n.extend({_handleSubmitResponse:function(i,n,t){this.serverIsDone&&(this.options.onSuccessfulSubmit&&this.options.onSuccessfulSubmit.call(this,i,n,t),this.options.autoClose&&this.hide(),this.options.onDialogFinished&&this.options.onDialogFinished.call(this,i,n,t))},decorateContent:function(){this._super();var i=this.get$popupContent(),n=i.find("input[name=customFieldId]");if(1===n.length){var t=i.find("#hint");t.hide()}}})});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-dialog', location = 'includes/js/rapid/ui/dialog/DialogUtil.js' */
!function(){AJS.namespace("GH.Dialog");var n=require("aui/dialog");GH.Dialog.create=function(e){AJS.$("#"+e.id).remove(),e=_.defaults(e,{bindEscape:!0});var i=new n(e),a=i.show,o=function(){GH.Dialog.preShow(),a.call(i);var n=AJS.$("#"+e.id).find(".dialog-button-panel .aui-button");n.is(":enabled")&&n.focus(),AJS.$("#"+e.id).addClass("ghx-dialog")};return _.extend(i,{dispose:GH.Dialog.generateCloseHandler(i),cancel:GH.Dialog.generateCloseHandler(i,e.onCancelFn),submit:GH.Dialog.generateCloseHandler(i,e.onConfirmFn),show:o,disableControls:GH.Dialog.generateDisableControlsFn(i),enableControls:GH.Dialog.generateEnableControlsFn(i),showSpinner:GH.Dialog.generateShowSpinnerFn(i),hideSpinner:GH.Dialog.generateHideSpinnerFn(i)}),GH.Dialog.bindEscapeHandler(i,!e.bindEscape),i},GH.Dialog.addCancelButton=function(n){n.addCancel("Cancel",function(e){n.cancel(n)})},GH.Dialog.bindEscapeHandler=function(n,e){e?JIRA.bind("Dialog.beforeHide",function(e,i,a,o){o===n.id&&a===JIRA.Dialog.HIDE_REASON.escape&&e.preventDefault()}):AJS.$(document).bind("keyup."+n.id,function(e){27==e.keyCode&&n.cancel(n)})},GH.Dialog.generateCloseHandler=function(n,e){return function(){return n.remove(),GH.Dialog.undim(),AJS.$(document).unbind("keyup."+n.id),AJS.unbind("remove.dialog"),e&&e(n),!1}},GH.Dialog.generateDisableControlsFn=function(n){return function(){AJS.$("#"+n.id+" button").attr("disabled","disabled")}},GH.Dialog.generateEnableControlsFn=function(n){return function(){AJS.$("#"+n.id+" button").removeAttr("disabled")}},GH.Dialog.generateShowSpinnerFn=function(n){return function(){AJS.$("#"+n.id).find(".button-panel-cancel-link").css("visibility","hidden").before('<span class="ghx-spinner"/>')}},GH.Dialog.generateHideSpinnerFn=function(n){return function(){AJS.$("#"+n.id).find(".ghx-spinner").remove().end().find(".button-panel-cancel-link").css("visibility","visible")}},GH.Dialog.sanitizeAJSDim=function(){var n=AJS.dim;AJS.dim=function(){try{n.apply(this,arguments)}catch(n){}}},GH.Dialog.registerDialog=function(n,e,i){AJS.$(document).undelegate(n,"click").delegate(n,"click",function(n){var a=AJS.$(this);a.hasClass("disabled")||(n.preventDefault(),e(n,i))})},GH.Dialog.dim=function(){AJS.dim(),AJS.$(".aui-blanket").html('<div class="jira-spinner-container"><aui-spinner size="medium" class="jira-page-loading-indicator"></aui-spinner></div>')},GH.Dialog.undim=function(){AJS.undim(),AJS.$(".aui-blanket").empty()},GH.Dialog.preShow=function(){AJS.$(".aui-blanket").empty()}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-persistent-messages', location = 'includes/js/rapid/ui/persistent-messages/CreateViewMessage.js' */
AJS.namespace("GH.PersistentMessages.CreateViewMessage"),GH.PersistentMessages.CreateViewMessage={},GH.PersistentMessages.CreateViewMessage.setView=function(e,s,a,t){var r={id:e,name:s,type:a,subType:t};GH.storage.put("gh.createViewMessage",r,!0)},GH.PersistentMessages.CreateViewMessage.clear=function(){GH.storage.put("gh.createViewMessage",null,!0)},GH.PersistentMessages.CreateViewMessage.renderMessage=function(e){e&&GH.log(e.type+" handled","GH.PersistentMessages.CreateViewMessage.renderMessage");var s=GH.storage.get("gh.createViewMessage",!0);if(s){var a=null;s.name=AJS.escapeHTML(String(s.name));var t;"advanced"==s.type?t=GH.tpl.board.x.renderCreateViewMessage:"kanban"==s.subType?t=GH.tpl.board.x.renderWelcomeViewMessageKanban:"scrum"==s.subType&&(t=GH.tpl.board.x.renderWelcomeViewMessageScrum),a=t({rapidView:s,url:AJS.parseUri(window.location.href)}),GH.Notification.showSuccess(a,{title:"Success",timeout:1e4}),GH.PersistentMessages.CreateViewMessage.clear()}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-persistent-messages', location = 'includes/js/rapid/ui/persistent-messages/WelcomeMessage.js' */
AJS.namespace("GH.PersistentMessages.WelcomeMessage"),GH.PersistentMessages.WelcomeMessage={},GH.PersistentMessages.WelcomeMessage.show=function(e){GH.storage.put("gh.welcomeMessage",e,!0)},GH.PersistentMessages.WelcomeMessage.renderMessage=function(){var e=GH.storage.get("gh.welcomeMessage",!0);if(e){var s=null;e.rapidView.name=AJS.escapeHTML(String(e.rapidView.name)),e.project.name=AJS.escapeHTML(String(e.project.name));var a=null;/kanban/.test(e.preset)?a=e.sample?GH.tpl.board.x.renderWelcomeProjectSampleMessageKanban:GH.tpl.board.x.renderWelcomeProjectMessageKanban:/scrum/.test(e.preset)&&(a=e.sample?GH.tpl.board.x.renderWelcomeProjectSampleMessageScrum:GH.tpl.board.x.renderWelcomeProjectMessageScrum),s=a({project:e.project,rapidView:e.rapidView,url:AJS.parseUri(window.location.href)}),GH.Notification.showSuccess(s,{title:"Success",timeout:1e4}),GH.storage.put("gh.welcomeMessage",null,!0)}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-project-picker', location = 'includes/js/projects/project-picker.js' */
define("jira-agile/projects/project-picker",[],function(){"use strict";var t=function(t){if(!t||!t.selector)throw new Error("Project picker requires a selector");this.$select=AJS.$(t.selector),t.currentProjectId&&(this.currentProjectId=t.currentProjectId,this.currentProject=null),this.multiselect=new AJS.MultiSelect({element:this.$select,width:300,itemAttrDisplayed:"label",ajaxOptions:{url:GH.Ajax.buildRestUrl("/project.json"),formatResponse:this._processAjax.bind(this)}}),"function"==typeof t.change&&(this.$select.bind("unselect",t.change),this.$select.bind("change",t.change)),this.currentProjectId&&this.multiselect.requestSuggestions(!0).done(function(){this.currentProject&&this.multiselect.addItem(this._getProjectDescriptor(this.currentProject))}.bind(this))};return t.prototype.show=function(){AJS.warn("ProjectPicker.show is deprecated. It is no longer needed as all initialisation occurs in the constructor")},t.prototype.hasValue=function(){return!!this.$select.val()},t.prototype.hasErrors=function(){return this.multiselect.$container.parent().find(".error").length>0},t.prototype.getValue=function(){return this.$select.val()},t.prototype.getElement=function(){return this.$select},t.prototype._findProject=function(t,e){return(t||[]).filter(function(t){return e&&t.id===e}.bind(this))[0]},t.prototype._findUnmatchingProjects=function(t,e){return(t||[]).filter(function(t){return!e||t.id!==e}.bind(this))},t.prototype._processAjax=function(t){if(!t||!t.projects||!t.projects.length)return[];this.currentProject=this._findProject(t.projects,this.currentProjectId);var e=this._findUnmatchingProjects(t.projects,this.currentProjectId).map(this._getProjectDescriptor.bind(this));return this.currentProject?[this._getProjectDescriptor(this.currentProject)].concat(e):e},t.prototype._getProjectDescriptor=function(t){if(!t)throw new Error("ProjectPicker.prototype._getProjectDescriptor requires a project");return new AJS.ItemDescriptor({value:t.id+"",label:t.displayName,html:AJS.escapeHTML(String(t.displayName))})},t}),AJS.namespace("GH.ProjectPicker",null,require("jira-agile/projects/project-picker"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-create-board', location = 'includes/js/rapid/ui/startwizard/WizardView.soy' */
// This file was automatically generated from WizardView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.startwizard.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.startwizard == 'undefined') { GH.tpl.startwizard = {}; }


GH.tpl.startwizard.renderMethodologySelectionStep = function(opt_data, opt_ignored) {
  return '<form class="aui ghx-halved-vertical"><div class="aui-group"><div class="aui-item"><h2>' + soy.$$escapeHtml('Scrum') + '</h2><p>' + soy.$$escapeHtml('Scrum focuses on planning, committing and delivering time-boxed chunks of work called Sprints.') + '</p></div><div class="aui-item"><h2>' + soy.$$escapeHtml('Kanban') + '</h2><p>' + soy.$$escapeHtml('Kanban focuses on visualising your workflow and limiting work-in-progress to facilitate incremental improvements to your existing process.') + '</p></div></div><div class="aui-group ghx-button-group"><div class="aui-item"><button id="ghx-wizard-methodology-scrum" class="aui-button">' + soy.$$escapeHtml('Create a Scrum board') + '</button></div><div class="aui-item"><button id="ghx-wizard-methodology-kanban" class="aui-button">' + soy.$$escapeHtml('Create a Kanban board') + '</button></div></div>' + ((opt_data.isSampleDataAvailable && opt_data.canCreateProject) ? '<div class="aui-group"><div class="aui-item"><button id="ghx-wizard-methodology-scrum-sample" class="aui-button aui-button-link">' + soy.$$escapeHtml('Create a Scrum board with sample data') + '</button></div><div class="aui-item"><button id="ghx-wizard-methodology-kanban-sample" class="aui-button aui-button-link">' + soy.$$escapeHtml('Create a Kanban board with sample data') + '</button></div></div>' : '') + '</form>';
};
if (goog.DEBUG) {
  GH.tpl.startwizard.renderMethodologySelectionStep.soyTemplateName = 'GH.tpl.startwizard.renderMethodologySelectionStep';
}


GH.tpl.startwizard.renderMethodSelectionStep = function(opt_data, opt_ignored) {
  return '<div class="aui-group ghx-split" id="js-method-choice"><div class="aui-item"><form class="aui"><fieldset class="group ghx-space-saver">' + ((opt_data.canCreateProject) ? '<div class="radio"><input class="radio" type="radio" id="ghx-wizard-method-new-project" name="ghx-wizard-method" value="newProject" ' + ((opt_data.selectedOption == 'newProject') ? 'checked="checked"' : '') + '><label for="ghx-wizard-method-new-project">' + soy.$$escapeHtml('Board created with new Software project') + '</label><div class="description">' + soy.$$escapeHtml('A new board based on a new Software project') + '</div></div>' : '') + ((opt_data.hasProjectsAccessible) ? '<div class="radio"><input class="radio" type="radio" id="ghx-wizard-method-existing-project" name="ghx-wizard-method" value="existingProject" ' + ((opt_data.selectedOption == 'existingProject') ? 'checked="checked"' : '') + '><label for="ghx-wizard-method-existing-project">' + soy.$$escapeHtml('Board from an existing project') + '</label><div class="description">' + soy.$$escapeHtml('Boards can contain one or more projects.') + '</div></div>' : '') + ((opt_data.hasFiltersAccessible) ? '<div class="radio"><input class="radio" type="radio" id="ghx-wizard-method-existing-filter" name="ghx-wizard-method" value="existingFilter" ' + ((opt_data.selectedOption == 'existingFilter') ? 'checked="checked"' : '') + '><label for="ghx-wizard-method-existing-filter">' + soy.$$escapeHtml('Board from an existing Saved Filter') + '</label><div class="description">' + soy.$$escapeHtml('An advanced option using a JQL filter.') + '</div></div>' : '') + '</fieldset></form></div><div class="aui-item"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.startwizard.renderMethodSelectionStep.soyTemplateName = 'GH.tpl.startwizard.renderMethodSelectionStep';
}


GH.tpl.startwizard.renderProjectSelectionStep = function(opt_data, opt_ignored) {
  return '<div class="aui-group ghx-split"><div class="aui-item"><form class="aui ajs-dirty-warning-exempt"><fieldset><div class="field-group"><label for="ghx-wizard-project-board-name">' + soy.$$escapeHtml('Board name') + '<span class="aui-icon icon-required"></span></label><input class="text" type="text" id="ghx-wizard-project-board-name" maxlength="155"></div><div class="field-group"><label for="ghx-wizard-choose-project">' + soy.$$escapeHtml('Project(s)') + '<span class="aui-icon icon-required"></span></label><select id="ghx-wizard-choose-project" multiple="multiple" class="hidden"></select><div class="description">' + soy.$$escapeHtml('Select one or more projects to be included in this board.') + '</div></div></fieldset></form></div><div class="aui-item"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.startwizard.renderProjectSelectionStep.soyTemplateName = 'GH.tpl.startwizard.renderProjectSelectionStep';
}


GH.tpl.startwizard.renderFilterSelectionStep = function(opt_data, opt_ignored) {
  return '<div class="aui-group ghx-split"><div class="aui-item"><form class="aui"><fieldset><div class="field-group"><label for="ghx-wizard-filter-view-name">' + soy.$$escapeHtml('Board name') + '<span class="aui-icon icon-required"></span></label><input class="text" type="text" id="ghx-wizard-filter-view-name" name="name" maxlength="155"></div><div class="field-group" id="ghx-filter-picker"><label for="ghx-wizard-filter-select">' + soy.$$escapeHtml('Saved filter') + '<span class="aui-icon icon-required"></span></label><select id="ghx-wizard-filter-select" class="hidden"></select><div id="ghx-filter-error"></div></div><div id="ghx-create-permissioninfo-container"></div></fieldset></form></div><div class="aui-item ghx-alignwith-textgroup"><h3>' + soy.$$escapeHtml('Saved Filters') + '</h3><div class="description">' + soy.$$escapeHtml('Choose from a list of existing filters as a base for your new board. To create a new Saved Filter, save a search in the Issue Navigator.') + '</div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.startwizard.renderFilterSelectionStep.soyTemplateName = 'GH.tpl.startwizard.renderFilterSelectionStep';
}


GH.tpl.startwizard.renderProjectCreationStep = function(opt_data, opt_ignored) {
  return '<div class="aui-group ghx-split"><div class="aui-item"><form class="aui"><fieldset><div class="field-group"><label for="ghx-wizard-' + soy.$$escapeHtml(opt_data.prefix) + '-projectname">' + soy.$$escapeHtml('Project name') + '<span class="aui-icon icon-required"></span></label><input class="text" type="text" id="ghx-wizard-' + soy.$$escapeHtml(opt_data.prefix) + '-projectname" value="' + soy.$$escapeHtml(opt_data.sampleInfo.projectName) + '"></div><div class="field-group"><label for="ghx-wizard-' + soy.$$escapeHtml(opt_data.prefix) + '-projectkey">' + soy.$$escapeHtml('Project key') + '<span class="aui-icon icon-required"></span></label><input class="text short-field" type="text" id="ghx-wizard-' + soy.$$escapeHtml(opt_data.prefix) + '-projectkey" value="' + soy.$$escapeHtml(opt_data.sampleInfo.projectKey) + '"></div><div class="field-group"><label for="ghx-wizard-' + soy.$$escapeHtml(opt_data.prefix) + '-projectlead">' + soy.$$escapeHtml('Project lead') + '<span class="aui-icon icon-required"></span></label><select id="ghx-wizard-' + soy.$$escapeHtml(opt_data.prefix) + '-projectlead" class="js-default-user-picker hidden"><option' + ((opt_data.user.avatarUrl) ? ' style="background-image:url(\'' + soy.$$escapeHtml(opt_data.user.avatarUrl) + '\')"' : '') + 'selected="selected" value="' + soy.$$escapeHtml(opt_data.user.name) + '">' + soy.$$escapeHtml(opt_data.user.displayName) + '</option></select><div class="description">' + soy.$$escapeHtml('Start typing to get a list of possible matches.') + '</div></div></fieldset></form></div><div class="aui-item ghx-alignwith-textgroup"><h3>' + soy.$$escapeHtml('Creating a project') + '</h3><div class="description">' + soy.$$escapeHtml('A board will be created with your project, and will be named after your project. You can rename your board in the board configuration screen.') + '</div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.startwizard.renderProjectCreationStep.soyTemplateName = 'GH.tpl.startwizard.renderProjectCreationStep';
}


GH.tpl.startwizard.renderPermissionInfo = function(opt_data, opt_ignored) {
  return '<div class="field-group"><label for="ghx-create-permissioninfo">' + soy.$$escapeHtml('Shares') + '</label>' + GH.tpl.rapid.view.renderPermissionEntries({permissionEntries: opt_data.savedFilter.permissionEntries}) + '</div><div class="field-group"><label>' + soy.$$escapeHtml('Owner') + '</label><span class="field-value">' + soy.$$escapeHtml(opt_data.savedFilter.owner.displayName) + '</span></div>';
};
if (goog.DEBUG) {
  GH.tpl.startwizard.renderPermissionInfo.soyTemplateName = 'GH.tpl.startwizard.renderPermissionInfo';
}


GH.tpl.startwizard.createProjectTimeout = function(opt_data, opt_ignored) {
  return '' + soy.$$filterNoAutoescape(AJS.format('The operation has timed out, the project and board might have been created already. You can confirm this by checking the \x3ca href\x3d\x22{0}\x22\x3eManage Boards\x3c/a\x3e page.',opt_data.manageBoardURL));
};
if (goog.DEBUG) {
  GH.tpl.startwizard.createProjectTimeout.soyTemplateName = 'GH.tpl.startwizard.createProjectTimeout';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-create-board', location = 'includes/js/rapid/configuration/RapidView.soy' */
// This file was automatically generated from RapidView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.rapid.view.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.rapid == 'undefined') { GH.tpl.rapid = {}; }
if (typeof GH.tpl.rapid.view == 'undefined') { GH.tpl.rapid.view = {}; }


GH.tpl.rapid.view.renderConfigurationHeader = function(opt_data, opt_ignored) {
  return '<div id="ghx-modes-tools">' + aui.buttons.button({text: 'Back to board', type: 'subtle', href: GH.Ajax.CONTEXT_PATH + '/secure/RapidBoard.jspa?rapidView=' + opt_data.rapidViewId + '&useStoredSettings=true', id: 'back-to-board', iconType: 'aui', iconText: 'Back to board', iconClass: 'aui-icon-small aui-iconfont-back-page'}) + '</div><h2>' + soy.$$escapeHtml('Configure') + ' <span id="js-nav-view-name">' + soy.$$escapeHtml(opt_data.name) + '</span></h2>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderConfigurationHeader.soyTemplateName = 'GH.tpl.rapid.view.renderConfigurationHeader';
}


GH.tpl.rapid.view.renderConfigurationTabs = function(opt_data, opt_ignored) {
  var output = '<div id="ghx-config-header"></div><div class="aui-page-panel"><div class="aui-page-panel-inner"><div class="aui-page-panel-nav"><nav class="aui-navgroup aui-navgroup-vertical"><div class="aui-navgroup-inner"><div class="aui-nav-heading"><strong>' + soy.$$escapeHtml('Configuration') + '</strong></div><ul id="ghx-config-nav" class="aui-nav">';
  var configurationTabList21 = opt_data.configurationTabs;
  var configurationTabListLen21 = configurationTabList21.length;
  for (var configurationTabIndex21 = 0; configurationTabIndex21 < configurationTabListLen21; configurationTabIndex21++) {
    var configurationTabData21 = configurationTabList21[configurationTabIndex21];
    output += '<li data-tabitem="' + soy.$$escapeHtml(configurationTabData21.key) + '"><a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/secure/RapidView.jspa?rapidView=' + soy.$$escapeHtml(opt_data.rapidViewId) + '&amp;tab=' + soy.$$escapeHtml(configurationTabData21.key) + '">' + soy.$$escapeHtml(configurationTabData21.label) + '</a></li>';
  }
  output += '</ul></div></nav></div><section id="ghx-config-panel-content" class="aui-page-panel-content">';
  var configurationTabList35 = opt_data.configurationTabs;
  var configurationTabListLen35 = configurationTabList35.length;
  for (var configurationTabIndex35 = 0; configurationTabIndex35 < configurationTabListLen35; configurationTabIndex35++) {
    var configurationTabData35 = configurationTabList35[configurationTabIndex35];
    output += '<div class="ghx-page-panel-content-item" id="' + soy.$$escapeHtml(configurationTabData35.key) + '">' + soy.$$filterNoAutoescape(configurationTabData35.html) + '</div>';
  }
  output += '</section></div></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderConfigurationTabs.soyTemplateName = 'GH.tpl.rapid.view.renderConfigurationTabs';
}


GH.tpl.rapid.view.renderViewNameEditForm = function(opt_data, opt_ignored) {
  return '<label for="ghx-field-viewname">' + soy.$$escapeHtml('Board name') + '</label>' + GH.tpl.rapid.view.renderViewNameField(opt_data);
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderViewNameEditForm.soyTemplateName = 'GH.tpl.rapid.view.renderViewNameEditForm';
}


GH.tpl.rapid.view.renderViewNameField = function(opt_data, opt_ignored) {
  return '<span class="field-value ' + ((opt_data.canEdit) ? 'js-edit-rapidViewName' : '') + '" data-fieldname="viewname" data-fieldvalue="' + soy.$$escapeHtml(opt_data.rapidViewName) + '"><span id="ghx-field-viewname" ' + ((opt_data.canEdit) ? 'class="ghx-editable"' : '') + '>' + soy.$$escapeHtml(opt_data.rapidViewName) + '</span></span>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderViewNameField.soyTemplateName = 'GH.tpl.rapid.view.renderViewNameField';
}


GH.tpl.rapid.view.renderViewBoardAdminsEditForm = function(opt_data, opt_ignored) {
  var output = '<label for="ghx-field-view-board-admins">' + soy.$$escapeHtml('Administrators') + '</label><span  class="field-value' + ((opt_data.canEdit) ? ' js-edit-rapidViewBoardAdmin' : '') + '" ><span id="ghx-field-view-board-admins-span" ' + ((opt_data.canEdit) ? 'class="ghx-editable"' : '') + '>';
  var itemList77 = opt_data.model;
  var itemListLen77 = itemList77.length;
  if (itemListLen77 > 0) {
    for (var itemIndex77 = 0; itemIndex77 < itemListLen77; itemIndex77++) {
      var itemData77 = itemList77[itemIndex77];
      output += soy.$$escapeHtml(itemData77.displayName) + ((! (itemIndex77 == itemListLen77 - 1)) ? '<span>, </span>' : '');
    }
  } else {
    output += '<span class="ghx-fa">' + soy.$$escapeHtml('None') + '</span>';
  }
  output += '</span></span><span id="ghx-field-view-board-admins">' + ((opt_data.canUsePicker) ? '<select id="ghx-board-admins" multiple="multiple" class="hidden"></select>' : '') + '</span>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderViewBoardAdminsEditForm.soyTemplateName = 'GH.tpl.rapid.view.renderViewBoardAdminsEditForm';
}


GH.tpl.rapid.view.renderBoardAdminsEditNoPicker = function(opt_data, opt_ignored) {
  var output = '<span class="ghx-margin-right"><strong>' + soy.$$escapeHtml('Groups') + '</strong>: <input class="text medium-field" id="ghx-board-admin-edit-groups" value="';
  var itemList96 = opt_data.model.groupKeys;
  var itemListLen96 = itemList96.length;
  for (var itemIndex96 = 0; itemIndex96 < itemListLen96; itemIndex96++) {
    var itemData96 = itemList96[itemIndex96];
    output += soy.$$escapeHtml(itemData96.key) + ((! (itemIndex96 == itemListLen96 - 1)) ? ',' : '');
  }
  output += '" /></span><strong>' + soy.$$escapeHtml('Users') + '</strong>: <input class="text medium-field " id="ghx-board-admin-edit-users" value="';
  var itemList105 = opt_data.model.userKeys;
  var itemListLen105 = itemList105.length;
  for (var itemIndex105 = 0; itemIndex105 < itemListLen105; itemIndex105++) {
    var itemData105 = itemList105[itemIndex105];
    output += soy.$$escapeHtml(itemData105.key) + ((! (itemIndex105 == itemListLen105 - 1)) ? ',' : '');
  }
  output += '" /><div class="description">' + soy.$$escapeHtml('Separate user keys and group names with commas.') + '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderBoardAdminsEditNoPicker.soyTemplateName = 'GH.tpl.rapid.view.renderBoardAdminsEditNoPicker';
}


GH.tpl.rapid.view.renderConfigPermissionsWarning = function(opt_data, opt_ignored) {
  return '' + ((opt_data.model.canEdit != true) ? '<div class="aui-message aui-message-warning"><p class="title"><span class="aui-icon icon-warning"></span><strong>' + soy.$$escapeHtml('Contact a Jira or Board Administrator to configure this board.') + '</strong></p></div>' : '');
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderConfigPermissionsWarning.soyTemplateName = 'GH.tpl.rapid.view.renderConfigPermissionsWarning';
}


GH.tpl.rapid.view.renderFilterDetails = function(opt_data, opt_ignored) {
  var output = '<form class="aui" id="ghx-savedfilter-form"><div class="aui-message aui-message-warning hidden" id="unmapped-issues-warning"><p>' + soy.$$escapeHtml('Some issues in the Saved Filter will not be shown on the board.') + ' <a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/secure/RapidView.jspa?rapidView=' + soy.$$escapeHtml(opt_data.rapidViewId) + '&amp;tab=columns" id="js-view-columns">' + soy.$$escapeHtml('View unmapped statuses which contain these issues.') + '</a></p></div><div class="field-group"><label>' + soy.$$escapeHtml('Saved Filter') + '</label><span id="ghx-filter-change" class="field-value' + ((opt_data.canEdit) ? ' ghx-editable ghx-ss' : '') + '">' + soy.$$escapeHtml(opt_data.savedFilter.name) + '</span><select id="ghx-filter-change-select" class="hidden"></select><p class="ghx-additional"><a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/secure/IssueNavigator.jspa?mode=show&requestId=' + soy.$$escapeHtml(opt_data.savedFilter.id) + '">' + ((opt_data.savedFilter.canEdit) ? soy.$$escapeHtml('Edit Filter Query') : soy.$$escapeHtml('View Filter Query')) + '</a></p></div>' + GH.tpl.rapid.view.renderPermissionInfo(opt_data) + '<div class="field-group ghx-jql-preview"><label>' + soy.$$escapeHtml('Filter Query') + '</label><span class="field-value">' + ((opt_data.savedFilter.query) ? soy.$$escapeHtml(opt_data.savedFilter.query) : '') + '</span></div><div class="field-group"><label>' + soy.$$escapeHtml('Ranking') + '</label><span class="field-value">';
  if (opt_data.savedFilter.isOrderedByRank) {
    output += soy.$$escapeHtml('Using Rank');
  } else {
    if (! opt_data.savedFilter.orderByWarnings) {
      output += soy.$$escapeHtml('Ranking is disabled, as the Filter Query is not ordered by Rank');
    } else {
      var warningList167 = opt_data.savedFilter.orderByWarnings.errorMessages;
      var warningListLen167 = warningList167.length;
      for (var warningIndex167 = 0; warningIndex167 < warningListLen167; warningIndex167++) {
        var warningData167 = warningList167[warningIndex167];
        output += soy.$$escapeHtml(warningData167) + '<br>';
      }
    }
    output += (opt_data.savedFilter.canEdit && opt_data.savedFilter.canBeFixed) ? '<p><button class="aui-button js-update-filter-order-by">' + soy.$$escapeHtml('Add Rank') + '</button></p>' : '';
  }
  output += '</span></div>';
  if (opt_data.savedFilter.queryProjects) {
    output += '<div class="field-group"><label>' + soy.$$escapeHtml('Projects in board') + '</label><ul id="ghx-show-projects-in-board">';
    if (opt_data.savedFilter.queryProjects.displayMessage) {
      output += '<span class="field-value">' + soy.$$escapeHtml(opt_data.savedFilter.queryProjects.displayMessage) + '</span>';
    } else {
      var avatarSize__soy188 = 'small';
      var projectList189 = opt_data.savedFilter.queryProjects.projects;
      var projectListLen189 = projectList189.length;
      for (var projectIndex189 = 0; projectIndex189 < projectListLen189; projectIndex189++) {
        var projectData189 = projectList189[projectIndex189];
        output += '<li>' + aui.avatar.avatar({isProject: 'true', size: '' + soy.$$escapeHtml(avatarSize__soy188), avatarImageUrl: soy.$$escapeHtml("") + '/secure/projectavatar?size=' + soy.$$escapeHtml(avatarSize__soy188) + '&pid=' + soy.$$escapeHtml(projectData189.id), extraClasses: 'jira-system-avatar'}) + '<strong>' + soy.$$escapeHtml(projectData189.name) + '</strong><p>';
        var viewProjectPermissionText__soy207 = 'View permission';
        output += ((projectData189.isValidEditProjectConfigAction) ? '<a href="' + soy.$$escapeHtml("") + '/plugins/servlet/project-config/' + soy.$$escapeHtml(projectData189.key) + '/permissions">' + soy.$$escapeHtml(viewProjectPermissionText__soy207) + '</a>' : '<a class="disabled">' + soy.$$escapeHtml(viewProjectPermissionText__soy207) + '</a><span class="aui-icon aui-icon-small aui-iconfont-info" title="' + soy.$$escapeHtml('You are not allowed to view this Project Permission') + '"></span>') + '</p></li>';
      }
    }
    output += '</ul></div>';
  }
  output += (opt_data.isSubqueriesConfigurable) ? '<div class="field-group ghx-jql"><label for="ghx-sub-jql">' + soy.$$escapeHtml('Kanban board sub-filter') + '</label><div id="js-sub-container-work">' + GH.tpl.rapid.view.renderSubQueryView({section: 'board.kanban.work', queryValue: opt_data.subqueries[0], canEdit: opt_data.canEdit}) + '</div><div class="description">' + soy.$$escapeHtml('Further filtering of issues for unreleased work.') + '</div></div>' : '';
  if (opt_data.isOldDoneIssuesCutoffConfigurable) {
    output += '<div class="field-group ghx-show-old-limit"><label for="ghx-limit-days">' + soy.$$escapeHtml('Hide completed issues older than') + '</label><select id="ghx-limit-days" class="select">';
    var optionList243 = opt_data.oldDoneIssuesCutoffOptions;
    var optionListLen243 = optionList243.length;
    for (var optionIndex243 = 0; optionIndex243 < optionListLen243; optionIndex243++) {
      var optionData243 = optionList243[optionIndex243];
      output += '<option value="' + soy.$$escapeHtml(optionData243.value) + '" ' + ((opt_data.oldDoneIssuesCutoff == optionData243.value) ? 'selected="selected"' : '') + '>' + soy.$$escapeHtml(optionData243.label) + '</option>';
    }
    output += '</select><div class="description">' + soy.$$escapeHtml('Speed up your board by hiding issues you\x27re no longer working on.') + '</div></div>';
  }
  output += '</form>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderFilterDetails.soyTemplateName = 'GH.tpl.rapid.view.renderFilterDetails';
}


GH.tpl.rapid.view.renderSubQueryView = function(opt_data, opt_ignored) {
  return '<span id="ghx-sub-work" class="field-value' + ((opt_data.canEdit) ? ' js-editable ghx-editable ghx-jql' : '') + '">' + ((opt_data.queryValue) ? soy.$$escapeHtml(opt_data.queryValue) : (opt_data.canEdit) ? '<em>' + soy.$$escapeHtml('Add Sub-Filter') + '</em>' : soy.$$escapeHtml('No sub-filter')) + '</span>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderSubQueryView.soyTemplateName = 'GH.tpl.rapid.view.renderSubQueryView';
}


GH.tpl.rapid.view.renderSubQueryControls = function(opt_data, opt_ignored) {
  return '<textarea class="js-jql-autocomplete-field textarea" id="ghx-sub-jql" data-section="' + soy.$$escapeHtml(opt_data.section) + '" cols="20" rows="2">' + soy.$$escapeHtml(opt_data.queryValue) + '</textarea><span id="ghx-sub-jql-errormsg" class="icon jqlgood js-jql-autocomplete-error"><span></span></span><button class="aui-button js-subquery-submit">' + soy.$$escapeHtml('Update') + '</button><button class="aui-button js-subquery-cancel">' + soy.$$escapeHtml('Cancel') + '</button>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderSubQueryControls.soyTemplateName = 'GH.tpl.rapid.view.renderSubQueryControls';
}


GH.tpl.rapid.view.renderPermissionInfo = function(opt_data, opt_ignored) {
  return '<div class="field-group"><label for="ghx-create-permissioninfo">' + soy.$$escapeHtml('Shares') + '</label>' + GH.tpl.rapid.view.renderPermissionEntries({permissionEntries: opt_data.savedFilter.permissionEntries}) + ((opt_data.savedFilter.canEdit) ? '<p class="ghx-additional"><a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/secure/EditFilter!default.jspa?filterId=' + soy.$$escapeHtml(opt_data.savedFilter.id) + '">' + soy.$$escapeHtml('Edit Filter Shares') + '</a></p>' : '</div><div class="field-group"><label>' + soy.$$escapeHtml('Owner') + '</label><span class="field-value">' + soy.$$filterNoAutoescape(opt_data.savedFilter.owner.renderedLink) + '</span>') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderPermissionInfo.soyTemplateName = 'GH.tpl.rapid.view.renderPermissionInfo';
}


GH.tpl.rapid.view.renderPermissionEntries = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.permissionEntries.length > 0) {
    output += '<span class="field-value"><ul id="ghx-create-permissioninfo">';
    var permissionEntryList313 = opt_data.permissionEntries;
    var permissionEntryListLen313 = permissionEntryList313.length;
    for (var permissionEntryIndex313 = 0; permissionEntryIndex313 < permissionEntryListLen313; permissionEntryIndex313++) {
      var permissionEntryData313 = permissionEntryList313[permissionEntryIndex313];
      output += '<li>';
      var permissionValueList315 = permissionEntryData313.values;
      var permissionValueListLen315 = permissionValueList315.length;
      for (var permissionValueIndex315 = 0; permissionValueIndex315 < permissionValueListLen315; permissionValueIndex315++) {
        var permissionValueData315 = permissionValueList315[permissionValueIndex315];
        output += '<span>' + soy.$$filterNoAutoescape(permissionValueData315.name) + '</span>';
      }
      output += '</li>';
    }
    output += '</ul></span>';
  } else {
    output += '<span class="field-value">' + soy.$$escapeHtml('No shares') + '</span>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderPermissionEntries.soyTemplateName = 'GH.tpl.rapid.view.renderPermissionEntries';
}


GH.tpl.rapid.view.deleteForm = function(opt_data, opt_ignored) {
  return '<section role="dialog" class="aui-dialog2 aui-dialog2-small gh-confirm-delete-dialog"><header class="aui-dialog2-header"><h2 class="aui-dialog2-header-main">' + soy.$$escapeHtml('Delete') + '</h2><a class="aui-dialog2-header-close"><span class="aui-icon aui-icon-small aui-iconfont-close-dialog cancel">' + soy.$$escapeHtml('Close') + '</span></a></header><div class="aui-dialog2-content"><p>' + soy.$$filterNoAutoescape(opt_data.message) + '</p></div><footer class="aui-dialog2-footer"><div class="aui-dialog2-footer-actions"><form>' + aui.buttons.button({tagName: 'button', type: 'primary', extraAttributes: {type: 'submit'}, text: 'Confirm'}) + aui.buttons.button({tagName: 'button', type: 'link', extraAttributes: {type: 'button'}, extraClasses: 'cancel', text: 'Cancel'}) + '</form></div></footer></section>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.deleteForm.soyTemplateName = 'GH.tpl.rapid.view.deleteForm';
}


GH.tpl.rapid.view.confirmForm = function(opt_data, opt_ignored) {
  return '<h2 class="dialog-title">' + soy.$$escapeHtml('Confirmation') + '</h2><form class="aui" action="#" method="post"><div class="form-body"><p>' + soy.$$filterNoAutoescape(opt_data.message) + '</p></div><div class="form-footer buttons-container"><div class="buttons"><input id="submit" class="button" type="submit" value="' + soy.$$escapeHtml('Confirm') + '" /><a role="button" href="#" class="cancel">' + soy.$$escapeHtml('Cancel') + '</a></div></div></form></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.confirmForm.soyTemplateName = 'GH.tpl.rapid.view.confirmForm';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-create-board', location = 'includes/js/rapid/ui/startwizard/WizardView.js' */
GH.StartWizardView={},GH.StartWizardView.dialog=void 0,GH.StartWizardView.model=void 0,GH.StartWizardView.stepsNameStack=void 0,GH.StartWizardView.pages={},GH.StartWizardView.filterPicker=void 0,GH.StartWizardView.projectPicker=void 0,function(){var e=require("jira-agile/rapid/analytics-tracker");GH.StartWizardView.analytics=new e("gh.create.wizard")}(),GH.StartWizardView.wizardStepPreRenderCallbacks=[],GH.StartWizardView.wizardStepPostRenderCallbacks=[],GH.StartWizardView.wizardStepOnValidateCallbacks=[],GH.StartWizardView.wizardStepOnCreateCallbacks=[],GH.StartWizardView.steps={methodologySelection:{render:function(e){var t={isSampleDataAvailable:GH.Config.isSampleDataAvailable,canCreateProject:GH.UserData.canCreateProject()};return{header:"Create an Agile board",content:GH.tpl.startwizard.renderMethodologySelectionStep(t)}},bind:function(e,t){AJS.$("#ghx-wizard-methodology-scrum").click(function(e){e.preventDefault(),t.sampleData=!1,GH.StartWizardView.selectMethodology("scrum",t)}),AJS.$("#ghx-wizard-methodology-kanban").click(function(e){e.preventDefault(),t.sampleData=!1,GH.StartWizardView.selectMethodology("kanban",t)}),AJS.$("#ghx-wizard-methodology-scrum-sample").click(function(e){e.preventDefault(),t.sampleData=!0,GH.StartWizardView.selectMethodology("scrum",t)}),AJS.$("#ghx-wizard-methodology-kanban-sample").click(function(e){e.preventDefault(),t.sampleData=!0,GH.StartWizardView.selectMethodology("kanban",t)})}},methodSelection:{render:function(e){var t=e.method;return t||(t=GH.UserData.userConfig.canCreateProject?"newProject":"existingProject"),{header:"Create an Agile board",content:GH.tpl.startwizard.renderMethodSelectionStep(_.extend({},e,{canCreateProject:GH.UserData.userConfig.canCreateProject,hasProjectsAccessible:GH.UserData.userConfig.hasProjectsAccessible,hasFiltersAccessible:GH.UserData.userConfig.hasFiltersAccessible,selectedOption:t}))}},bind:function(e){},next:function(e,t){var a=e.find("input[name=ghx-wizard-method]").filter(":checked").val();t.method=a;var r=AJS.$.Deferred();return"newProject"===a?r.resolve("projectCreation"):"existingProject"===a?r.resolve("projectSelection"):"existingFilter"===a?r.resolve("filterSelection"):r.reject(new Error("Unknown board creation method : "+a)),r.promise()}},projectCreation:{render:function(e){return e.prefix="project",GH.StartWizardView.renderProjectCreation({user:GH.UserData.userConfig,prefix:"project",sampleInfo:{projectName:"",projectKey:""}})},bind:function(e,t){GH.StartWizardView.bindProjectCreation(e,t)},completeActionName:"Create board",complete:function(e){return GH.StartWizardView.createProject(GH.StartWizardView.dialog,e)}},sampleProjectCreation:{render:function(e){return e.prefix="sample",GH.StartWizardView.renderProjectCreation({user:GH.UserData.userConfig,prefix:"sample",sampleInfo:e.sampleInfo})},bind:function(e,t){GH.StartWizardView.bindProjectCreation(e,t)},completeActionName:"Create board",complete:function(e){return GH.StartWizardView.createSampleProject(GH.StartWizardView.dialog,e)}},projectSelection:{render:function(e){return{header:"Name this board",content:GH.tpl.startwizard.renderProjectSelectionStep()}},bind:function(e,t){GH.StartWizardView.bindProjectSelection(e,t)},completeActionName:"Create board",complete:function(e){return GH.StartWizardView.validateProjectSelection(e)}},filterSelection:{render:function(e){return{header:"Name this board",content:GH.tpl.startwizard.renderFilterSelectionStep()}},bind:function(e,t){GH.StartWizardView.bindFilterSelection(e,t)},completeActionName:"Create board",complete:function(e){return GH.StartWizardView.validateFilterSelection(e)}}},GH.StartWizardView.show=function(e){GH.StartWizardView.dialog||(GH.StartWizardView.dialog=GH.Dialog.create({width:840,height:400,id:"ghx-wizard-dialog",onCancelFn:function(){GH.StartWizardView.disposeWizard(),GH.StartWizardView.analytics.trigger("cancel")}}),GH.StartWizardView.model={},GH.StartWizardView.stepsNameStack=[],GH.StartWizardView.dialog.show(),GH.StartWizardView.analytics.trigger("start"),GH.StartWizardView.preventSubmitOnEnter())},GH.StartWizardView.preventSubmitOnEnter=function(){var e=function(e){if(13==e.keyCode&&"ghx-wizard-filter-select-field"!=e.target.id)return e.preventDefault(),!1};AJS.$("input").keydown(e)},GH.StartWizardView.showStep=function(e){if(!_.has(GH.StartWizardView.steps,e))throw new Error("Unknown wizard step "+e);var t=GH.StartWizardView.dialog;if(GH.StartWizardView.pages[e])t.gotoPage(GH.StartWizardView.pages[e]),GH.StartWizardView.dialog.popup.element.find(".dialog-panel-body .aui-message-error").remove();else{var a=GH.StartWizardView.steps[e],r=a.render(GH.StartWizardView.model);_.each(GH.StartWizardView.wizardStepPreRenderCallbacks,function(t){t(e)}),t.addPage(),GH.StartWizardView.pages[e]=t.curpage,t.addHeader(r.header);var i=AJS.$(r.content);if(t.addPanel(null,i,"ghx-wizard-panel"),_.each(GH.StartWizardView.wizardStepPostRenderCallbacks,function(a){a(e,t)}),GH.StartWizardView.stepsNameStack.length>0&&t.addButton("Back",function(){var e=GH.StartWizardView.stepsNameStack.pop();GH.StartWizardView.showStep(e)},"aui-button"),_.has(a,"complete")){var o=function(){var e=AJS.$(this),t=e.attr("aria-disabled");"true"!=t&&a.complete(GH.StartWizardView.model)};t.addButton(a.completeActionName,o,"aui-button aui-button-primary js-wizard-button-complete")}else if(_.has(a,"next")){var n=function(){var r=AJS.$(this),o=r.attr("aria-disabled");if("true"!=o){var n=a.next(i,GH.StartWizardView.model),d=function(t){GH.StartWizardView.stepsNameStack.push(e),GH.StartWizardView.showStep(t)},l=function(e){console.log(e),t.updateHeight()},c=!0;_.each(GH.StartWizardView.wizardStepOnValidateCallbacks,function(a){a(e,t)||(c=!1)}),n.done(function(e){c?d(e):l("GH project create extension callback returned failure")}).fail(l)}};t.addButton("Next",n,"aui-button aui-button-primary js-wizard-button-next")}t.addCancel("Cancel",function(){t.cancel()}),a.bind(i,GH.StartWizardView.model)}t.updateHeight(),GH.StartWizardView.preventSubmitOnEnter()},GH.StartWizardView.startWizard=function(){GH.StartWizardView.show(),GH.StartWizardView.showStep("methodologySelection")},GH.StartWizardView.disposeWizard=function(){GH.StartWizardView.dialog=void 0,GH.StartWizardView.pages={}},GH.StartWizardView.genStartFunction=function(e,t){return function(){GH.StartWizardView.show(),GH.StartWizardView.model.sampleData=t,GH.StartWizardView.selectMethodology(e,GH.StartWizardView.model)}},GH.StartWizardView.bindWelcomePage=function(){GH.Dialog.registerDialog(".js-wizard-scrum",GH.StartWizardView.genStartFunction("scrum",!1)),GH.Dialog.registerDialog(".js-wizard-scrum-sample",GH.StartWizardView.genStartFunction("scrum",!0)),GH.Dialog.registerDialog(".js-wizard-kanban",GH.StartWizardView.genStartFunction("kanban",!1)),GH.Dialog.registerDialog(".js-wizard-kanban-sample",GH.StartWizardView.genStartFunction("kanban",!0))},GH.StartWizardView.getCreateProjectRequest=function(e){var t=e.project,a={projectName:t.name,projectKey:t.key,projectLeadUserName:t.lead,boardName:e.boardName,preset:e.methodology,sampleData:e.sampleData};return a},GH.StartWizardView.createProject=function(e,t){GH.StartWizardView.populateProjectCreationProperties(t);var a=GH.StartWizardView.getCreateProjectRequest(t);e.disableControls(),e.showSpinner();var r={url:"/welcome/createProject",data:a,errorContextMap:{projectName:"#ghx-wizard-"+t.prefix+"-projectname",projectKey:"#ghx-wizard-"+t.prefix+"-projectkey",projectLead:"#ghx-wizard-"+t.prefix+"-projectlead"},timeout:12e4,deferErrorHandling:!0};return GH.Ajax.put(r).done(function(a){function r(){if(0==GH.StartWizardView.wizardStepOnCreateCallbacks.length)i();else{var a=GH.StartWizardView.wizardStepOnCreateCallbacks.pop();a(e,r,t)}}a.success.sample=t.sampleData,GH.PersistentMessages.WelcomeMessage.show(a.success);var i=function(){GH.StartWizardView.gotoCreatedView(a.success.rapidView.id,t.methodology)};r()}).fail(function(t,a,i,o){_.each(t.getGlobalErrors(),function(e){504==e.status&&(e.message=GH.tpl.startwizard.createProjectTimeout({manageBoardURL:GH.RapidBoard.getManageViewsPageUrl()}),e.noAutoescape=!0)}),GH.Ajax.handleContextualErrors(t,r.errorContextMap),GH.Ajax.handleGlobalErrors(t,r.errorContextMap),e.hideSpinner(),e.enableControls(),e.updateHeight()})},GH.StartWizardView.validateProjectSelection=function(e){GH.StartWizardView.dialog.disableControls(),GH.StartWizardView.dialog.showSpinner();var t=AJS.$("#ghx-wizard-project-board-name");return GH.Validation.clearContextualErrors(GH.StartWizardView.projectPicker.getElement()),GH.Validation.clearContextualErrors(t),GH.Ajax.post({url:"/rapidview/create/presets",data:{name:t.val(),projectIds:GH.StartWizardView.projectPicker.getValue(),preset:e.methodology},errorContextMap:{name:"#ghx-wizard-project-board-name",projectIds:GH.StartWizardView.projectPicker.selector}}).done(function(t){console.log("mode: "+e),GH.StartWizardView.handleCreate(t,"simple",e.methodology)}).fail(function(){GH.StartWizardView.dialog.enableControls(),GH.StartWizardView.dialog.hideSpinner(),GH.StartWizardView.dialog.updateHeight()})},GH.StartWizardView.validateFilterSelection=function(e){var t=AJS.$("#ghx-wizard-filter-view-name"),a=GH.StartWizardView.filterPicker.getElement(),r=AJS.$(GH.StartWizardView.filterPicker.selector);GH.Validation.clearContextualErrors(t),GH.Validation.clearContextualErrors(a);var i=r.val()?r.val()[0]:null;return GH.StartWizardView.dialog.disableControls(),GH.StartWizardView.dialog.showSpinner(),GH.Ajax.post({url:"/rapidview/create/advanced",data:{name:t.val(),filterId:i,methodology:e.methodology},errorContextMap:{name:"#ghx-wizard-filter-view-name",filterId:GH.StartWizardView.filterPicker.selector}}).done(function(t){GH.StartWizardView.handleCreate(t,"simple",e.methodology)}).fail(function(){GH.StartWizardView.dialog.hideSpinner(),GH.StartWizardView.dialog.enableControls(),GH.StartWizardView.dialog.updateHeight()})},GH.StartWizardView.handleCreate=function(e,t,a){var r=t!=a&&a;GH.PersistentMessages.CreateViewMessage.setView(e.success.id,e.success.name,t,r),GH.StartWizardView.analytics.trigger("complete"),GH.StartWizardView.gotoCreatedView(e.success.id,a)},GH.StartWizardView.gotoCreatedView=function(e,t){var a="scrum"==t?"planning":null;GH.Navigation.gotoDefaultRapidBoardPage(e,a)},GH.StartWizardView.selectMethodology=function(e,t){if(t.methodology=e,GH.StartWizardView.stepsNameStack.push("methodologySelection"),t.sampleData)GH.Ajax.get({url:"/welcome/sampledataproject?preset="+t.methodology},"sampledataproject").done(function(e){t.sampleInfo=e,GH.StartWizardView.showStep("sampleProjectCreation")}).fail(function(){GH.StartWizardView.showStep("sampleProjectCreation")});else{var a=GH.UserData.userConfig.canCreateProject,r=GH.UserData.userConfig.hasProjectsAccessible,i=GH.UserData.userConfig.hasFiltersAccessible;a||i?r||i?GH.StartWizardView.showStep("methodSelection"):GH.StartWizardView.showStep("projectCreation"):GH.StartWizardView.showStep("projectSelection")}},GH.StartWizardView.populateProjectCreationProperties=function(e){var t=AJS.$("#ghx-wizard-"+e.prefix+"-projectname"),a=AJS.$("#ghx-wizard-"+e.prefix+"-projectkey"),r=AJS.$("#ghx-wizard-"+e.prefix+"-projectlead");GH.Validation.clearContextualErrors(t),GH.Validation.clearContextualErrors(a),GH.Validation.clearContextualErrors(r),e.project={name:t.val(),key:a.val().toUpperCase(),lead:AJS.$("#ghx-wizard-"+e.prefix+"-projectlead option:selected").val()}},GH.StartWizardView.createSampleProject=function(e,t){t.sampleData=!0,GH.StartWizardView.createProject(e,t)},GH.StartWizardView.validateBoardName=function(e,t){return GH.Validation.clearContextualErrors(e),t.boardName=e.val(),!!t.boardName||(GH.Validation.showContextualErrors(e,"Please enter a name for your board."),!1)},GH.StartWizardView.renderProjectCreation=function(e){return{header:"New project with board",content:GH.tpl.startwizard.renderProjectCreationStep(e)}},GH.StartWizardView.bindProjectSelection=function(e,t){GH.StartWizardView.projectPicker=new GH.ProjectPicker({selector:"#ghx-wizard-choose-project",change:function(){GH.StartWizardView.dialog.updateHeight()},currentProjectId:JIRA.API&&JIRA.API.Projects?JIRA.API.Projects.getCurrentProjectId():null}),GH.StartWizardView.projectPicker.multiselect.keys.Return=function(e){e.preventDefault()},GH.StartWizardView.attachDependantButton({buttonIndex:1,selectors:["#ghx-wizard-project-board-name","#ghx-wizard-choose-project"]})},GH.StartWizardView.bindProjectCreation=function(e,t){AJS.$("#ghx-wizard-"+t.prefix+"-projectkey").generateFrom(AJS.$("#ghx-wizard-"+t.prefix+"-projectname"),{maxNameLength:64,maxKeyLength:64}),JIRA.trigger(JIRA.Events.NEW_CONTENT_ADDED,[e]),e.trigger("contentRefresh");var a=GH.StartWizardView.dialog,r=a.page[a.curpage];r.button[1].item;GH.StartWizardView.attachDependantButton({buttonIndex:1,selectors:["#ghx-wizard-"+t.prefix+"-projectname","#ghx-wizard-"+t.prefix+"-projectkey","#ghx-wizard-"+t.prefix+"-projectlead"]})},GH.StartWizardView.bindFilterSelection=function(e,t){var a=function(e,a){var r="";if(delete t.savedFilter,a&&a.properties){var i=a.properties.savedFilter;r=null!=i?GH.tpl.startwizard.renderPermissionInfo({savedFilter:i}):"",t.savedFilter=i}AJS.$("#ghx-create-permissioninfo-container").html(r),GH.StartWizardView.dialog.updateHeight()};GH.StartWizardView.filterPicker=new GH.SavedFilterPicker({selector:"#ghx-wizard-filter-select",selected:a,stayActivated:!0}),GH.StartWizardView.filterPicker.show(t.savedFilter),GH.StartWizardView.filterPicker.singleSelect.keys.Return=function(e){e.preventDefault()},GH.StartWizardView.attachDependantButton({buttonIndex:1,selectors:["#ghx-wizard-filter-view-name","#ghx-wizard-filter-select"]})},GH.StartWizardView.attachDependantButton=function(e){var t=GH.StartWizardView.dialog,a=t.page[t.curpage],r=a.button[e.buttonIndex].item;GH.StartWizardView.dependantValidationListener({selectors:e.selectors,full:function(){r.attr("aria-disabled","false")},empty:function(){r.attr("aria-disabled","true")}})},GH.StartWizardView.dependantValidationListener=function(e){function t(){var t=_.filter(e.selectors,function(e){var t=AJS.$(e);return!AJS.$.trim(t.val())});return _.isEmpty(t)?e.full():e.empty()}function a(){e.nowait?t():setTimeout(t,50)}_.isEmpty(e.selectors)||(e.full=e.full||AJS.$.noop(),e.empty=e.empty||AJS.$.noop(),e.nowait=e.nowait||!1,_.each(e.selectors,function(e){var t=AJS.$(e);t.on("input",a),t.on("change",a),t.on("selected",a),t.on("unselect",a)}),t())},GH.StartWizardView.registerWizardStepPreRenderCallback=function(e){GH.StartWizardView.wizardStepPreRenderCallbacks.push(e)},GH.StartWizardView.registerWizardStepPostRenderCallback=function(e){GH.StartWizardView.wizardStepPostRenderCallbacks.push(e)},GH.StartWizardView.registerWizardStepOnValidateCallback=function(e){GH.StartWizardView.wizardStepOnValidateCallbacks.push(e)},GH.StartWizardView.registerWizardStepOnCreateCallbacks=function(e){GH.StartWizardView.wizardStepOnCreateCallbacks.push(e)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-create-board', location = 'includes/js/rapid/ui/component/SavedFilterPicker.js' */
GH.SavedFilterPicker=function(e){this.selector=e.selector,this.fieldSelector=e.selector+"-field",this.blurHandler=e.blur,this.selectHandler=e.selected,this.stayActivated=e.stayActivated,this.focus=e.focus},GH.SavedFilterPicker.prototype.show=function(e){var t=AJS.$(this.selector),i=new AJS.SingleSelect({element:t,width:300,removeOnUnSelect:!0,itemAttrDisplayed:"label",errorMessage:"",ajaxOptions:{query:!0,url:GH.Ajax.buildRestUrl("/savedfilter/list.json"),formatResponse:function(e){if(e.errors){var i=GH.Ajax._convertJiraErrors(e.errors),r={searchName:this.selector};return GH.Ajax.handleContextualErrors(i,r),!1}t.siblings(".ghx-error").remove();var s=[];return AJS.$(e.filters).each(function(){s.push(new AJS.ItemDescriptor({value:this.id.toString(),label:this.name,html:AJS.escapeHTML(String(this.name)),savedFilter:this}))}),s}}});this.singleSelect=i;var r=this.removeSingleSelect;this.stayActivated||AJS.$(this.fieldSelector).blur(function(){r(i)}),_.isFunction(this.blurHandler)&&AJS.$(this.fieldSelector).blur(this.blurHandler),this.focus&&AJS.$(this.fieldSelector).focus().select(),e&&this.setSelection(e);var s=this.selectHandler;this.stayActivated?(t.bind("selected",s),t.bind("unselect",s)):(t.bind("selected",function(e,t){r(i),s(e,t)}),t.bind("unselect",function(e,t){r(i),s(e,t)}))},GH.SavedFilterPicker.prototype.setSelection=function(e){this.singleSelect.setSelection(new AJS.ItemDescriptor({value:e.id.toString(),label:e.name,html:AJS.escapeHTML(String(e.name)),savedFilter:e,selected:!0}))},GH.SavedFilterPicker.prototype.removeSingleSelect=function(e){e.hideSuggestions(),e.disable()},GH.SavedFilterPicker.prototype.getElement=function(){return this.singleSelect.$field};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-create-board', location = 'includes/js/lib/jquery/jquery.keygen.js' */
!function(e,t){e.KeyGenerator=function(){var e=["THE","A","AN","AS","AND","OF","OR"],n={},a=function(e){return e.join("").length},r=function(n){return t.grep(n,function(n,a){return t.inArray(n,e)===-1})},o=function(e){var n="";return t.each(e,function(e,t){n+=t.charAt(0)}),n},u=function(e){var t,n=!1;for(t=0;t<e.length;t++)if(i(e[t]))n=!0;else if(n)return e.substring(0,t+1);return e},i=function(e){return e&&1===e.length&&e.search("[AEIOUY]")!==-1};return n[199]="C",n[231]="c",n[252]="u",n[251]="u",n[250]="u",n[249]="u",n[233]="e",n[234]="e",n[235]="e",n[232]="e",n[226]="a",n[228]="a",n[224]="a",n[229]="a",n[225]="a",n[239]="i",n[238]="i",n[236]="i",n[237]="i",n[196]="A",n[197]="A",n[201]="E",n[230]="ae",n[198]="Ae",n[244]="o",n[246]="o",n[242]="o",n[243]="o",n[220]="U",n[255]="Y",n[214]="O",n[241]="n",n[209]="N",{generateKey:function(e,i){i=t.extend({},i);var c="number"==typeof i.desiredKeyLength?i.desiredKeyLength:4,h="number"==typeof i.maxKeyLength?i.maxKeyLength:1/0;if(e=t.trim(e),!e)return"";for(var s=[],g=0,f=e.length;g<f;g++){var l=n[e.charCodeAt(g)];s.push(l?l:e[g])}e=s.join("");var d=[];t.each(e.split(/\s+/),function(e,t){t&&(t=t.replace(/[^a-zA-Z]/g,""),t=t.toUpperCase(),t.length&&d.push(t))}),c&&a(d)>c&&(d=r(d));var m;if(0==d.length)m="";else if(1==d.length){var v=d[0],y=u(v);m=h<v.length||Math.abs(v.length-c)>=Math.abs(y.length-c)?y:v}else{var K=a(d),x=o(d);m=h<K||Math.abs(K-c)>=Math.abs(x.length-c)?x:d.join("")}return h&&m.length>h&&(m=m.substr(0,h)),m}}};var n=e.KeyGenerator();t.fn.generateFrom=function(e,a){var r={desiredKeyLength:4,maxKeyLength:10,maxNameLength:30,timeoutMS:100,validationCallback:function(){},errorCallback:function(){}},o=t(this).first(),e=e.first(),a=t.extend({},r,a);return function(){var r=function(){return o.data("autosuggest")!==!1},u=function(e){o.val()&&o.data("lastGeneratedValue")!==o.val()&&o.data("autosuggest",!1)},i=function(e){o.data("lastGeneratedValue",e),o.val(e)},c=function(){u(o.val()),f()},h=function(e){s(e,c)},s=function(e,n){var r,o=t(e.target);r=function(){g(e),n(),o.is(":visible")&&o.data("checkHook",setTimeout(r,a.timeoutMS))},o.data("checkHook")||o.data("checkHook",setTimeout(r,0))},g=function(e){var n=t(e.target);clearTimeout(n.data("checkHook")),n.removeData("checkHook")},f=function(){r()&&i(n.generateKey(e.val(),{desiredKeyLength:a.desiredKeyLength,maxKeyLength:a.maxKeyLength}))};e.attr("maxlength",a.maxNameLength),o.attr("maxlength",a.maxKeyLength),o.css("text-transform","uppercase"),document.activeElement&&document.activeElement===e[0]&&h({target:e[0]}),e.focus(h),e.blur(g)}(),this}}(window,jQuery);;
;
/* module-key = 'com.pyxis.greenhopper.jira:sidebar', location = 'includes/js/sidebar/create-board.js' */
AJS.$(function(){AJS.$("body").on("click",".js-create-board",function(e){e.preventDefault(),GH.UserData.userConfig={canCreateProject:!1,hasProjectsAccessible:!0,hasFiltersAccessible:!0},GH.StartWizardView.startWizard()})});;
;
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/store-1.3.1.js' */
(function(){var l={},h=window,k=h.document,c="localStorage",n="globalStorage",d="__storejs__",g;l.disabled=false;l.set=function(e,o){};l.get=function(e){};l.remove=function(e){};l.clear=function(){};l.transact=function(e,o){var p=l.get(e);if(typeof p=="undefined"){p={}}o(p);l.set(e,p)};l.serialize=function(e){return JSON.stringify(e)};l.deserialize=function(e){if(typeof e!="string"){return undefined}return JSON.parse(e)};function b(){try{return(c in h&&h[c])}catch(e){return false}}function m(){try{return(n in h&&h[n]&&h[n][h.location.hostname])}catch(e){return false}}if(b()){g=h[c];l.set=function(e,o){if(o===undefined){return l.remove(e)}g.setItem(e,l.serialize(o))};l.get=function(e){return l.deserialize(g.getItem(e))};l.remove=function(e){g.removeItem(e)};l.clear=function(){g.clear()}}else{if(m()){g=h[n][h.location.hostname];l.set=function(e,o){if(o===undefined){return l.remove(e)}g[e]=l.serialize(o)};l.get=function(e){return l.deserialize(g[e]&&g[e].value)};l.remove=function(e){delete g[e]};l.clear=function(){for(var e in g){delete g[e]}}}else{if(k.documentElement.addBehavior){var j,f;try{f=new ActiveXObject("htmlfile");f.open();f.write('<script>document.w=window<\/script><iframe src="/favicon.ico"></frame>');f.close();j=f.w.frames[0].document;g=j.createElement("div")}catch(i){g=k.createElement("div");j=k.body}function a(e){return function(){var p=Array.prototype.slice.call(arguments,0);p.unshift(g);j.appendChild(g);g.addBehavior("#default#userData");g.load(c);var o=e.apply(l,p);j.removeChild(g);return o}}l.set=a(function(p,e,o){if(o===undefined){return l.remove(e)}p.setAttribute(e,l.serialize(o));p.save(c)});l.get=a(function(o,e){return l.deserialize(o.getAttribute(e))});l.remove=a(function(o,e){o.removeAttribute(e);o.save(c)});l.clear=a(function(q){var o=q.XMLDocument.documentElement.attributes;q.load(c);for(var p=0,e;e=o[p];p++){q.removeAttribute(e.name)}q.save(c)})}}}try{l.set(d,d);if(l.get(d)!=d){l.disabled=true}l.remove(d)}catch(i){l.disabled=true}if(typeof module!="undefined"){module.exports=l}else{if(typeof define==="function"&&define.amd){define(l)}else{this.store=l}}})();;
;
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/page-visibility.js' */
define("atlassian/analytics/page-visibility",function(){var a=(document.hidden!==undefined);var b={supported:a,isHidden:function(){return a?document.hidden:false}};return b});;
;
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/user-activity-xhr-header.js' */
define("atlassian/analytics/user-activity-xhr-header",["atlassian/analytics/page-visibility"],function(c){var e="x-atlassian-mau-ignore";var d=XMLHttpRequest.prototype.send;var a=window.fetch;var b=false;return{install:function(){if(!b&&c.supported){XMLHttpRequest.prototype.send=function(){if(c.isHidden()){this.setRequestHeader(e,c.isHidden())}d.apply(this,arguments)};if(a){window.fetch=function(f,i){var g=i||{};var h=g.headers;if(c.isHidden()){g.headers=(h)?new Headers(h):new Headers();g.headers.append(e,c.isHidden())}return a.call(this,f,g)}}b=true}},uninstall:function(){if(b){XMLHttpRequest.prototype.send=d;if(a){window.fetch=a}}b=false}}});require("atlassian/analytics/user-activity-xhr-header").install();;
;
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/atlassian-analytics.js' */
(function(d){var q=AJS.$.ajax;var l="atlassian-analytics";var j=typeof AJS.contextPath==="function"?AJS.contextPath():"";var p=null;var m=null;var g=null;var r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(z){var y=Math.random()*16|0,x=z=="x"?y:(y&3|8);return x.toString(16)});var t=function(){var x="unknown";if(document.body.id=="jira"){x="jira"}else{if(document.body.id=="com-atlassian-confluence"){x="confluence"}}m=l+"."+x;g=m+".lock"};var f=function(){if(store.get(g)){return false}store.set(g,r);return(store.get(g)===r)};var u=function(){store.set(g,null)};var i=function(){var y=[],A,B,x,z;if(AJS.EventQueue.length==0){return}y=store.get(m)||y;for(x=0,z=AJS.EventQueue.length;x<z;++x){B=AJS.EventQueue[x];if(B.name){A={name:B.name,properties:B.properties,time:B.time||0};y.push(A)}}AJS.EventQueue.length=0;store.set(m,y)};var v=0;var a=function(x){return Math.min(5000*Math.pow(2,x),5*60*1000)};var e=0;var h=function(){var A;function y(){setTimeout(h,a(v=0))}function x(){setTimeout(h,a(++v))}if(!f()){++e;if(e<20){return y()}}else{e=0}try{i();A=store.get(m);if(!A||!A.length){return y()}store.remove(m);if(!o(A)){return y()}var B=new Date().getTime();for(var z=0;z<A.length;z++){if(A[z].time>0){A[z].timeDelta=A[z].time-B}else{A[z].timeDelta=z-A.length}delete A[z].time}p=q({type:"POST",url:j+"/rest/analytics/1.0/publish/bulk",data:JSON.stringify(A),contentType:"application/json",dataType:"json"});p.fail(function(){AJS.EventQueue.concat(A);i();x()});p.done(function(){y()})}finally{u()}};var o=function(z){for(var y=z.length-1;y>=0;y--){var B="";var A=z[y];var x=A.properties;if(typeof A.name==="undefined"){B="you must provide a name for the event."}else{if(typeof x!=="undefined"&&x!==null){if(x.constructor!==Object){B="properties must be an object with key value pairs."}else{b(x)}}}if(B!==""){AJS.log("WARN: Invalid analytics event detected and ignored, "+B+"\nEvent: "+JSON.stringify(A));z.splice(y,1)}}return z.length};var b=function(z){for(var y in z){if(z.hasOwnProperty(y)){var x=z[y];if(c(x)&&k(x)){}else{if(c(x)&&x.toString){z[y]=x.toString()}else{z[y]=""}}}}};function c(x){return typeof x!=="undefined"&&x!==null}function k(x){return typeof x==="number"||typeof x==="string"||typeof x==="boolean"}var n=function(){if(p&&!(p.state()==="resolved"||p.state()==="rejected")){p.abort()}};AJS.EventQueue=AJS.EventQueue||[];var s=Array.prototype.push;AJS.EventQueue.push=function(x){x.time=new Date().getTime();s.call(AJS.EventQueue,x)};AJS.toInit(function(){t();setTimeout(h,500);w()});d(window).unload(function(){n();i()});AJS.Analytics={triggerPrivacyPolicySafeEvent:function(x,y){AJS.log("WARN: 'triggerPrivacyPolicySafeEvent' has been deprecated");AJS.EventQueue.push({name:x,properties:y})}};AJS.bind("analytics",function(x,y){AJS.EventQueue.push({name:y.name,properties:y.data})});AJS.bind("analyticsEvent",function(x,y){AJS.EventQueue.push({name:y.name,properties:y.data})});var w=function(){if(window.location.pathname.indexOf("/secure/admin/ViewApplicationProperties")>-1){AJS.$("[data-property-id='analytics-enabled']").remove()}else{if(window.location.pathname.indexOf("/secure/admin/EditApplicationProperties")>-1){var y=AJS.$(":contains(Enable Atlassian analytics)");if(y.size()>0){var x=y[y.size()-2];if(x){x.remove()}}}}}}(AJS.$));;
;
/* module-key = 'com.atlassian.analytics.analytics-client:policy-update-init', location = 'js/policy-update-init.js' */
AJS.toInit(function(){var a=WRM.data.claim("com.atlassian.analytics.analytics-client:policy-update-init.policy-update-data-provider");if(a){WRM.require("wrc!com.atlassian.analytics.analytics-client:policy-update")}});;
;
/* module-key = 'com.atlassian.analytics.analytics-client:programmatic-analytics-init', location = 'js/programmatic-analytics-init.js' */
(function(){var a=WRM.data.claim("com.atlassian.analytics.analytics-client:programmatic-analytics-init.programmatic-analytics-data-provider");if(a){WRM.require("wrc!com.atlassian.analytics.analytics-client:programmatic-analytics")}}());;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:application-header-administration-cog-resource', location = 'header/cog.js' */
var NavLinks=(function(a){a.ApplicationHeader=function(b){b.Cog=(function(){var c=function(){var d=AJS.$("#system-admin-menu-content");if(d.length>0){return d}var e=AJS.$("#admin-menu-link-content");if(e.length>0){return e}return AJS.$("#bamboo\\.global\\.header-admin\\.menu")};return{getDropdown:c}}());return b}(a.ApplicationHeader||{});return a}(NavLinks||{}));;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:administration-shortcuts-resources', location = 'adminshortcuts/adminshortcuts.soy' */
// This file was automatically generated from adminshortcuts.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace navlinks.templates.adminshortcuts.
 */

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.adminshortcuts == 'undefined') { navlinks.templates.adminshortcuts = {}; }


navlinks.templates.adminshortcuts.section = function(opt_data, opt_ignored) {
  var param5 = '<ul class="aui-list-truncate">';
  var linkList7 = opt_data.links;
  var linkListLen7 = linkList7.length;
  for (var linkIndex7 = 0; linkIndex7 < linkListLen7; linkIndex7++) {
    var linkData7 = linkList7[linkIndex7];
    param5 += '<li><a href="' + soy.$$escapeHtml(linkData7.link) + '">' + soy.$$escapeHtml(linkData7.label) + '</a></li>';
  }
  param5 += '</ul>';
  var output = '' + aui.dropdown2.section({id: 'nl-remote-admin-section', label: 'Other applications', content: param5});
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.adminshortcuts.section.soyTemplateName = 'navlinks.templates.adminshortcuts.section';
}
;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:administration-shortcuts-resources', location = 'adminshortcuts/adminnavlinks.js' */
var NavLinks=(function(a){a.AdminShortcuts=(function(){var c=function(){return AJS.$.ajax({url:AJS.contextPath()+"/rest/menu/latest/admin",cache:false,dataType:"json"})};var b=function(){AJS.$("#nl-remote-admin-section").on("click","a",function(){NL.trackEvent("remoteAdminItemSelected",NL.getCurrentApplication(),$(this).attr("href"))})};return{render:function(){c().done(function(e){e=_.reject(e,function(f){return f.local===true});if(e.length){var d=navlinks.templates.adminshortcuts.section({links:e});a.ApplicationHeader.Cog.getDropdown().append(d);b()}})}}}());return a}(NavLinks||{}));;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:administration-shortcuts', location = 'adminshortcuts/adminshortcuts-cdn.js' */
AJS.toInit(function(){if(AJS.DarkFeatures&&AJS.DarkFeatures.isEnabled("rotp.admin.shortcuts")){NavLinks.AdminShortcuts.render()}});;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:atlassian-ui-popup-display-controller', location = 'popups/DisplayController.js' */
AJS.Popups=AJS.Popups||{};AJS.Popups.DisplayController=function(){var c=[];var a=false;var b=false;AJS.toInit(function(){setTimeout(function(){AJS.Popups.DisplayController.render()},0)});return{request:function(d){c.push(d);if(a&&b===false){this.render()}},render:function(){c.sort(function(e,d){return e.weight-d.weight});a=true;if(c.length!==0){b=true;c[0].show()}}}}();;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-used-by-lozenge', location = 'global/templates/used-by-lozenge.soy' */
// This file was automatically generated from used-by-lozenge.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.ProjectAdmin.UsedBy.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.ProjectAdmin == 'undefined') { JIRA.Templates.ProjectAdmin = {}; }
if (typeof JIRA.Templates.ProjectAdmin.UsedBy == 'undefined') { JIRA.Templates.ProjectAdmin.UsedBy = {}; }


JIRA.Templates.ProjectAdmin.UsedBy.usedBy = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + ((opt_data.sharedBy) ? JIRA.Templates.ProjectAdmin.UsedBy.generateUsedBy(soy.$$augmentMap(opt_data, {projects: opt_data.sharedBy.sharedWithProjects ? opt_data.sharedBy.sharedWithProjects : opt_data.sharedBy.projects, hiddenProjectsCount: opt_data.sharedBy.hiddenProjectsCount, projectsTitle: opt_data.projectsTitle ? opt_data.projectsTitle : opt_data.title})) : JIRA.Templates.ProjectAdmin.UsedBy.generateUsedBy(soy.$$augmentMap(opt_data, {projectsTitle: opt_data.projectsTitle ? opt_data.projectsTitle : opt_data.title})));
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectAdmin.UsedBy.usedBy.soyTemplateName = 'JIRA.Templates.ProjectAdmin.UsedBy.usedBy';
}


JIRA.Templates.ProjectAdmin.UsedBy.generateUsedBy = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '';
  var totalProjectsCount__soy13 = (opt_data.projects ? opt_data.projects.length : 0) + (opt_data.hiddenProjectsCount ? opt_data.hiddenProjectsCount : 0);
  var issueTypesCount__soy14 = opt_data.issueTypes ? opt_data.issueTypes.length : 0;
  var minRequiredProjects__soy15 = opt_data.minProjects ? opt_data.minProjects : 1;
  var minRequiredIssueTypes__soy16 = opt_data.minIssueTypes ? opt_data.minIssueTypes : 1;
  var anyProjects__soy17 = totalProjectsCount__soy13 >= minRequiredProjects__soy15;
  var anyIssueTypes__soy18 = issueTypesCount__soy14 >= minRequiredIssueTypes__soy16;
  var localkey__soy19 = '' + ((opt_data.key) ? soy.$$escapeHtml(opt_data.key) : (opt_data.currentIssueTypeId) ? soy.$$escapeHtml(opt_data.currentIssueTypeId) : (opt_data.currentProjectId) ? soy.$$escapeHtml(opt_data.currentProjectId) : soy.$$escapeHtml(Math.floor(Math.random() * 10000)));
  if (anyProjects__soy17 || anyIssueTypes__soy18) {
    var issueTypeId__soy31 = 'project-config-' + localkey__soy19 + '-issuetypes-shared';
    var projectId__soy32 = 'project-config-' + localkey__soy19 + '-projects-shared';
    var issueTypesPopupLink__soy33 = '' + JIRA.Templates.ProjectAdmin.UsedBy.issueTypePopupLink({id: issueTypeId__soy31, issueTypesCount: issueTypesCount__soy14});
    var projectsPopupLink__soy37 = '' + JIRA.Templates.ProjectAdmin.UsedBy.projectPopupLink({id: projectId__soy32, totalProjectsCount: totalProjectsCount__soy13});
    output += '<span class="aui-lozenge used-by"><em>' + ((anyIssueTypes__soy18 && anyProjects__soy17) ? soy.$$filterNoAutoescape(AJS.format('Used by {0} in {1}',issueTypesPopupLink__soy33,projectsPopupLink__soy37)) : (anyIssueTypes__soy18) ? soy.$$filterNoAutoescape(AJS.format('Used by {0}',issueTypesPopupLink__soy33)) : soy.$$filterNoAutoescape(AJS.format('Used by {0}',projectsPopupLink__soy37))) + '<used-by-analytics /></em></span>' + ((anyIssueTypes__soy18) ? JIRA.Templates.ProjectAdmin.UsedBy.issueTypePopup(soy.$$augmentMap(opt_data, {id: issueTypeId__soy31, title: opt_data.issueTypesTitle})) : '') + ((anyProjects__soy17) ? JIRA.Templates.ProjectAdmin.UsedBy.projectPopup(soy.$$augmentMap(opt_data, {id: projectId__soy32, title: opt_data.projectsTitle})) : '');
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectAdmin.UsedBy.generateUsedBy.soyTemplateName = 'JIRA.Templates.ProjectAdmin.UsedBy.generateUsedBy';
}


JIRA.Templates.ProjectAdmin.UsedBy.issueTypePopupLink = function(opt_data, opt_ignored) {
  return '<a href="#' + soy.$$escapeHtml(opt_data.id) + '" data-aui-trigger aria-controls="' + soy.$$escapeHtml(opt_data.id) + '" class="shared-issuetypes-trigger shared-items-trigger">' + soy.$$escapeHtml(AJS.format('{0,choice,1#{0} issue type|1\x3c{0} issue types}',opt_data.issueTypesCount)) + '</a>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectAdmin.UsedBy.issueTypePopupLink.soyTemplateName = 'JIRA.Templates.ProjectAdmin.UsedBy.issueTypePopupLink';
}


JIRA.Templates.ProjectAdmin.UsedBy.projectPopupLink = function(opt_data, opt_ignored) {
  return '<a href="#' + soy.$$escapeHtml(opt_data.id) + '" data-aui-trigger aria-controls="' + soy.$$escapeHtml(opt_data.id) + '" class="shared-projects-trigger shared-items-trigger">' + soy.$$escapeHtml(AJS.format('{0,choice,1#{0} project|1\x3c{0} projects}',opt_data.totalProjectsCount)) + '</a>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectAdmin.UsedBy.projectPopupLink.soyTemplateName = 'JIRA.Templates.ProjectAdmin.UsedBy.projectPopupLink';
}


JIRA.Templates.ProjectAdmin.UsedBy.projectPopup = function(opt_data, opt_ignored) {
  var output = '';
  var projectListCap__soy80 = 15;
  var shouldTrimProjectsList__soy81 = opt_data.projects.length > projectListCap__soy80;
  output += '<aui-inline-dialog ' + ((opt_data.id) ? 'id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="shared-items-target shared-projects-target" alignment="bottom center"><div class="shared-items-content">';
  if (opt_data.projects) {
    output += '<h3>' + soy.$$escapeHtml(opt_data.title ? opt_data.title : AJS.format('{0,choice,1#Project|1\x3cProjects}:',opt_data.projects.length)) + '</h3><ul class="shared-items-list shared-projects-list">';
    var iLimit94 = shouldTrimProjectsList__soy81 ? projectListCap__soy80 : opt_data.projects.length;
    for (var i94 = 0; i94 < iLimit94; i94++) {
      var project__soy95 = opt_data.projects[i94];
      output += JIRA.Templates.ProjectAdmin.UsedBy.projectEntry(soy.$$augmentMap(project__soy95, {isCurrent: opt_data.currentProjectId && project__soy95.id == opt_data.currentProjectId}));
    }
    output += '</ul>';
  }
  var notDisplayedProjects__soy99 = (opt_data.hiddenProjectsCount ? opt_data.hiddenProjectsCount : 0) + (shouldTrimProjectsList__soy81 ? opt_data.projects.length - projectListCap__soy80 : 0);
  output += ((notDisplayedProjects__soy99 > 0) ? '<p>' + ((opt_data.projects.length > 0) ? soy.$$escapeHtml(AJS.format('and {0} hidden {0,choice,1#project|1\x3cprojects}',notDisplayedProjects__soy99)) : soy.$$escapeHtml(AJS.format('{0} hidden {0,choice,1#project|1\x3cprojects}',notDisplayedProjects__soy99))) + '</p>' : '') + '</div></aui-inline-dialog>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectAdmin.UsedBy.projectPopup.soyTemplateName = 'JIRA.Templates.ProjectAdmin.UsedBy.projectPopup';
}


JIRA.Templates.ProjectAdmin.UsedBy.projectEntry = function(opt_data, opt_ignored) {
  return '<li>' + ((! opt_data.archived) ? '<a class="shared-item-name shared-project-name' + ((opt_data.isCurrent) ? ' current' : '') + '" href="' + soy.$$escapeHtml("") + '/plugins/servlet/project-config/' + soy.$$escapeHtml(opt_data.key) + '" data-project-id="' + soy.$$escapeHtml(opt_data.id) + '" data-project-key="' + soy.$$escapeHtml(opt_data.key) + '" data-project-name="' + soy.$$escapeHtml(opt_data.name) + '" >' : '<span class="shared-item-name shared-project-name' + ((opt_data.isCurrent) ? ' current' : '') + '" data-project-id="' + soy.$$escapeHtml(opt_data.id) + '" data-project-key="' + soy.$$escapeHtml(opt_data.key) + '" data-project-name="' + soy.$$escapeHtml(opt_data.name) + '" >') + '<img class="shared-project-icon" width="16" height="16" alt="" src="' + soy.$$escapeHtml("") + '/secure/projectavatar?size=small&amp;pid=' + soy.$$escapeHtml(opt_data.id) + ((opt_data.avatar) ? '&amp;avatarId=' + soy.$$escapeHtml(opt_data.avatar.id) : '') + '" />' + soy.$$escapeHtml(opt_data.name) + ((opt_data.archived) ? ' (' + soy.$$escapeHtml('archived') + ') </span>' : '</a>') + '</li>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectAdmin.UsedBy.projectEntry.soyTemplateName = 'JIRA.Templates.ProjectAdmin.UsedBy.projectEntry';
}


JIRA.Templates.ProjectAdmin.UsedBy.issueTypePopup = function(opt_data, opt_ignored) {
  var output = '<aui-inline-dialog ' + ((opt_data.id) ? 'id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="shared-items-target shared-issuetypes-target" alignment="bottom center"><div class="shared-items-content"><h3>' + soy.$$escapeHtml(opt_data.title ? opt_data.title : AJS.format('{0,choice,1#Issue type|1\x3cIssue types}:',opt_data.issueTypes.length)) + '</h3><ul class="shared-items-list shared-issuetypes-list">';
  var issueTypeList169 = opt_data.issueTypes;
  var issueTypeListLen169 = issueTypeList169.length;
  for (var issueTypeIndex169 = 0; issueTypeIndex169 < issueTypeListLen169; issueTypeIndex169++) {
    var issueTypeData169 = issueTypeList169[issueTypeIndex169];
    var current__soy170 = opt_data.currentIssueTypeId && issueTypeData169.id == opt_data.currentIssueTypeId;
    output += '<li><a class="shared-item-name shared-issuetype-name' + ((current__soy170) ? ' current' : '') + '" href="' + soy.$$escapeHtml(issueTypeData169.url ? issueTypeData169.url : '#') + '" title="' + soy.$$escapeHtml(issueTypeData169.name) + '" data-issue-type-id="' + soy.$$escapeHtml(issueTypeData169.id) + '" data-issue-type-name="' + soy.$$escapeHtml(issueTypeData169.name) + '" >' + soy.$$escapeHtml(issueTypeData169.name) + '</a></li>';
  }
  output += '</ul></div></aui-inline-dialog>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectAdmin.UsedBy.issueTypePopup.soyTemplateName = 'JIRA.Templates.ProjectAdmin.UsedBy.issueTypePopup';
}
;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-used-by-lozenge', location = 'global/js/used-by-lozenge.js' */
require(["jira/skate","jira/analytics","jquery"],function(e,t,i){"use strict";function n(e,i){e&&e.on("click.usedByAnalytics",function(){t.send({name:"jira.projectconfig.usedby.used",data:{linkType:i}})})}e("used-by-analytics",{type:e.type.ELEMENT,attached:function(e){var t=e.getLozengeRoot();n(t.find(".shared-issuetypes-trigger"),"issuetypes"),n(t.find(".shared-projects-trigger"),"project")},detached:function(e){e.getLozengeRoot().find(".shared-items-trigger").off("click.usedByAnalytics")},prototype:{getLozengeRoot:function(){return i(this).parent()}}})});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-used-by-lozenge', location = 'global/templates/used-by-lozenge-template-wrapper.js' */
define("jira-project-config/templates/usedby",[],function(){"use strict";return window.JIRA.Templates.ProjectAdmin.UsedBy}),AJS.namespace("JIRA.Templates.ProjectAdmin.UsedBy",null,require("jira-project-config/templates/usedby"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:custom-fields-admin', location = 'customfields/js/util/IssuesApi.js' */
define("jira-project-config/issues/api",function(){return window.JIRA&&window.JIRA.Issues&&window.JIRA.Issues.Api});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:custom-fields-admin', location = 'customfields/js/init-admin-dialog.js' */
require(["wrm/require","jquery"],function(i,e){var n=function(e){i(["wrc!com.atlassian.jira.jira-project-config-plugin.custom-fields-impl"],function(){require(["jira-project-config/custom-fields/api"],e)})};e(document).on("click","#add_custom_fields",function(i){i.preventDefault(),n(function(i){i.addCustomFieldViaAdminPage()})})});;
;
/* module-key = 'com.atlassian.jira.plugins.workflow.sharing.jira-workflow-sharing-plugin:jwsp-analytics', location = '/js/jwsp-analytics.js' */
AJS.namespace("JIRA.WSP.Analytics");JIRA.WSP.Analytics.sendEvent=function(a,b){if(AJS.EventQueue){AJS.EventQueue.push({name:"jwsp."+a,properties:b||{}})}};;
;
/* module-key = 'jira.webresources:init-on-dcl', location = '/static/util/init-on-dcl.js' */
define("jira/util/init-on-dcl",[],function(){"use strict";return AJS.toInit});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/jquery/plugins/avataror/avataror.js' */
jQuery.fn.avataror=function(i){var e=jQuery,t=e(document);this.each(function(){var r=e(this),a=r.find("img").attr("src");r.css({"-moz-border-radius":"10px","-webkit-border-radius":"10px"}),r.html("<p>Loading?</p>");var g={previewSize:48};g.preview=e("<div/>").addClass("avataror-preview").css({border:"solid 1px #000",float:"left",height:g.previewSize+"px",overflow:"hidden",width:g.previewSize+"px",position:"relative",top:"-9999em",left:"-9999em"}),g.preview.prependTo(i.previewElement),g.img=e('<img alt="Avatar Source"/>'),g.img.load(function(){g.image=e("<div/>").css({background:"url('"+a+"') no-repeat",clear:"left",position:"relative"}),g.marker=e("<div/>").css({cursor:"move",position:"relative"}),g.dash=e("<div/>"),g.shadow=e("<div/>"),g.dash.add(g.shadow).css({cursor:"move",opacity:.5,left:0,top:0,position:"absolute"}),g.image.append(g.shadow).append(g.dash).append(g.marker),r.append(g.image),g.marker.html("<div></div><div></div><div></div><div></div>"),e("div",g.marker).each(function(i){var t=e(this);t.css({background:"#000",border:"solid 1px #fff",width:"10px",height:"10px",position:"absolute","font-size":"1px"}),t.css(["left","right","right","left"][i],"-6px"),t.css(["top","top","bottom","bottom"][i],"-6px"),t.css("cursor",["nw-resize","ne-resize","se-resize","sw-resize"][i]),t.mousedown(function(e){e.preventDefault(),e.stopPropagation(),g.dragging={x:e.pageX,y:e.pageY,ax:g.x,ay:g.y,w:g.width,h:g.height,i:i+1},g.shadow.hide()})}),g.marker.add(g.image).mousedown(function(i){i.preventDefault(),g.dragging={x:i.pageX,y:i.pageY,ax:g.x,ay:g.y,w:g.width,h:g.height},g.shadow.hide()}),t.mouseup(function(i){g.handleMouseUp(i)}),t.mousemove(function(i){g.dragging&&(g.handleMouseMove(i.pageX,i.pageY),i.preventDefault())}),g.imgwidth=g.img[0].naturalWidth,g.imgheight=g.img[0].naturalHeight,g.x=parseInt(e("#avatar-offsetX").val()),g.y=parseInt(e("#avatar-offsetY").val()),g.width=parseInt(e("#avatar-width").val()),g.height=g.width,g.image.css({width:g.imgwidth+"px",height:g.imgheight+"px"}),g.setMarker(),r.css({width:g.imgwidth+"px"}),g.preview.css({position:"static"}),e("p",r).remove(),r.trigger("AvatarImageLoaded"),g.adjustPreview()}),g.img.attr("src",a),g.preview.append(g.img),g.setMarker=function(){g.marker.css("border","dashed 1px #fff"),g.dash.css("border","solid 1px #000"),g.shadow.css("border","solid 1px #000"),g.marker.add(this.dash).css("left",this.x-1+"px"),g.marker.add(g.dash).css("top",g.y-1+"px"),g.shadow.css("border-left-width",g.x+"px"),g.shadow.css("border-right-width",g.imgwidth-g.x-g.width+"px"),g.shadow.css("border-top-width",g.y+"px"),g.shadow.css("border-bottom-width",g.imgheight-g.y-g.height+"px"),g.shadow.css("width",g.width+"px"),g.shadow.css("height",g.height+"px"),g.marker.add(g.dash).css("width",g.width+"px"),g.marker.add(g.dash).css("height",g.height+"px")},g.adjustPreview=function(){g.img.attr("width",g.imgwidth*g.previewSize/g.width),g.img.attr("height",g.imgheight*g.previewSize/g.height),g.img.css("margin-left","-"+g.x*g.previewSize/g.width+"px"),g.img.css("margin-top","-"+g.y*g.previewSize/g.height+"px"),g.preview.select()},g.handleMouseMove=function(i,e){if(g.dragging.nextExec=g.dragging.nextExec||0,0!=g.dragging.nextExec)return void g.dragging.nextExec--;g.dragging.nextExec=3;var t=i-g.dragging.x,r=e-g.dragging.y;if(this.dragging.i){(0,g.resizeHandlers[this.dragging.i-1])(t,r)}else g.x=g.dragging.ax+t,g.y=g.dragging.ay+r,g.x+g.width>g.imgwidth&&(g.x=g.imgwidth-g.width),g.y+g.height>g.imgheight&&(g.y=g.imgheight-g.height),g.x<0&&(g.x=0),g.y<0&&(g.y=0);g.setMarker(),g.adjustPreview()},g.handleMouseUp=function(i){e("#avatar-offsetX").val(g.x),e("#avatar-offsetY").val(g.y),e("#avatar-width").val(g.width),g.dragging=null,g.shadow.show()},g.originX=function(){return g.dragging.ax},g.originY=function(){return g.dragging.ay},g.originBottomX=function(){return g.dragging.ax+g.dragging.w},g.originBottomY=function(){return g.dragging.ay+g.dragging.h},g.originNw=function(){return{x:g.originX(),y:g.originY()}},g.originNe=function(){return{x:g.originBottomX(),y:g.originY()}},g.originSe=function(){return{x:g.originBottomX(),y:g.originBottomY()}},g.originSw=function(){return{x:g.originX(),y:g.originBottomY()}},g.nwHandler=function(i,e){var t=g.originSe(),r={x:g.originX()+i,y:g.originY()+e},a=Math.abs(r.x-t.x),o=Math.abs(r.y-t.y),n=Math.min(a,o);n<20&&(n=20),t.x-n<0&&(n=t.x),t.y-n<0&&(n=t.y),g.x=t.x-n,g.y=t.y-n,g.width=g.height=n},g.neHandler=function(i,e){var t=g.originSw(),r={x:g.originBottomX()+i,y:g.originY()+e},a=Math.abs(r.x-t.x),o=Math.abs(r.y-t.y),n=Math.min(a,o);n<20&&(n=20),t.x+n>g.imgwidth&&(n=g.imgwidth-t.x),t.y-n<0&&(n=t.y),g.y=t.y-n,g.width=g.height=n},g.seHandler=function(i,e){var t=g.originNw(),r={x:g.originBottomX()+i,y:g.originBottomY()+e},a=Math.abs(r.x-t.x),o=Math.abs(r.y-t.y),n=Math.min(a,o);n<20&&(n=20),t.x+n>g.imgwidth&&(n=g.imgwidth-t.x),t.y+n>g.imgheight&&(n=g.imgheight-t.y),g.width=g.height=n},g.swHandler=function(i,e){var t=g.originNe(),r={x:g.originX()+i,y:g.originBottomY()+e},a=Math.abs(r.x-t.x),o=Math.abs(r.y-t.y),n=Math.min(a,o);n<20&&(n=20),t.x-n<0&&(n=t.x),t.y+n>g.imgheight&&(n=g.imgheight-t.y),g.x=t.x-n,g.width=g.height=n},g.resizeHandlers=[g.nwHandler,g.neHandler,g.seHandler,g.swHandler]})};;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/Avatar.js' */
var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};define("jira/ajs/avatarpicker/avatar",["jira/lib/class"],function(t){return t.extend({init:function(t){this._id=t.id,this._isSystemAvatar=t.isSystemAvatar,this._isSelected=t.isSelected,this._urls=t.urls},setUnSelected:function(){this._isSelected=!1},setSelected:function(){this._isSelected=!0},isSelected:function(){return!!this._isSelected},isSystemAvatar:function(){return this._isSystemAvatar},getId:function(){return this._id},getUrl:function(t){return this._urls[t]},toJSON:function(){return{id:this._id,isSystemAvatar:this._isSystemAvatar,isSelected:this._isSelected,urls:this._urls}}})}),define("jira/ajs/avatarpicker/avatar-factory",["jira/ajs/avatarpicker/avatar","exports"],function(t,e){e.createCustomAvatar=function(e){return e.isSystemAvatar=!1,new t(e)},e.createSystemAvatar=function(e){return e.isSystemAvatar=!0,new t(e)}}),define("jira/ajs/avatarpicker/avatar/sizes",["exports","jquery"],function(t,e){t.getSizeObjectFromName=function(i){if("object"===(void 0===i?"undefined":_typeof(i)))return i;"string"==typeof i&&e.trim(i);return t.LARGE.param===i?t.LARGE:t.MEDIUM.param===i?t.MEDIUM:t.SMALL.param===i?t.SMALL:"xsmall"===i?t.SMALL:t.LARGE},t.LARGE={param:"large",height:48,width:48},t.MEDIUM={param:"medium",width:32,height:32},t.SMALL={param:"small",width:16,height:16}});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/AvatarManager.js' */
define("jira/ajs/avatarpicker/avatar-manager",["jira/util/formatter","jira/lib/class","wrm/context-path","jquery"],function(t,a,r,e){"use strict";var s=r();return a.extend({init:function(t){this.store=t.store,this.ownerId=t.ownerId,this.username=t.username,this.anonymousAvatarId=t.anonymousAvatarId,this.avatarSrcBaseUrl=t.avatarSrcBaseUrl},selectAvatar:function(t,a){return this.store.selectAvatar(t,a)},getById:function(t){return this.store.getById(t)},destroy:function(t,a){this.store.destroy(t,a)},update:function(t,a){this.store.update(t,a)},add:function(t,a){this.store._add(t,a)},getAllSystemAvatars:function(){return this.store.getAllSystemAvatars()},getAllCustomAvatars:function(){return this.store.getAllCustomAvatars()},getSelectedAvatar:function(){return this.store.getSelectedAvatar()},getAllAvatars:function(){return this.store.getAllAvatars()},getAllAvatarsRenderData:function(t){var a,r=this,e=this.getAllAvatars(),s={system:[],custom:[]};for(a=0;a<e.system.length;a++)s.system.push(r.getAvatarRenderData(e.system[a],t));for(a=0;a<e.custom.length;a++)s.custom.push(r.getAvatarRenderData(e.custom[a],t));return s},getAvatarRenderData:function(t,a){var r=t.toJSON();return r.src=this.getAvatarSrc(t,a),r.width=a.width,r.height=a.height,r},refreshStore:function(t){this.store.refresh(t)},getAvatarSrc:function(a,r){return this.store.isTempAvatar(a)?s+"/secure/temporaryavatar?"+e.param({cropped:!0,magic:(new Date).getTime(),size:r.param}):a.getUrl(t.format("{0}x{1}",r.height,r.width))},createTemporaryAvatar:function(t,a){this.store.createTemporaryAvatar(t,a)},createAvatarFromTemporary:function(t,a){this.store.createAvatarFromTemporary(t,a)},getAnonymousAvatarId:function(){return this.anonymousAvatarId}})}),define("jira/ajs/avatarpicker/avatar-manager-factory",["jira/ajs/avatarpicker/avatar-store","jira/ajs/avatarpicker/avatar-manager","wrm/context-path","exports"],function(t,a,r,e){"use strict";var s=r();e.createUniversalAvatarManager=function(r){var e,n="",o="",i="",v="";if(r.projectId){var u=s+"/rest/api/latest/universal_avatar/type/"+r.avatarType+"/owner/"+r.projectId;e=u;var c=u+"/avatar";n=null,o=u+"/temp",i=c,v=c}else e=s+"/rest/api/latest/avatar/project/system",o=s+"/rest/api/latest/avatar/project/temporary",i=s+"/rest/api/latest/avatar/project/temporaryCrop";var l=new t({restQueryUrl:e,restUpdateUrl:n,restCreateTempUrl:o,restUpdateTempUrl:i,restSingleAvatarUrl:v,defaultAvatarId:r.defaultAvatarId});return new a({store:l,ownerId:r.projectId,avatarSrcBaseUrl:s+"/secure/projectavatar"})},e.createProjectAvatarManager=function(t){return t.avatarType="project",e.createUniversalAvatarManager(t)},e.createUserAvatarManager=function(r){var e=s+"/rest/api/latest/user",n=new t({restQueryUrl:e+"/avatars",restUpdateUrl:e+"/avatar",restCreateTempUrl:e+"/avatar/temporary",restUpdateTempUrl:e+"/avatar",restSingleAvatarUrl:e+"/avatar",restParams:{username:r.username},defaultAvatarId:r.defaultAvatarId});return new a({store:n,username:r.username,avatarSrcBaseUrl:s+"/secure/useravatar"})}});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/AvatarStore.js' */
define("jira/ajs/avatarpicker/avatar-store",["jira/util/urls","jira/util/formatter","jira/ajs/avatarpicker/avatar-util","jira/ajs/avatarpicker/avatar-factory","jira/ajs/ajax/smart-ajax","jira/lib/class","jquery"],function(t,e,r,a,s,i,o){return i.extend({TEMP_ID:"TEMP",init:function(e){if(!e.restQueryUrl)throw new Error("JIRA.AvatarStore.init: You must specify [restQueryUrl], The rest url for querying avatars (see class description)");if(!e.restCreateTempUrl)throw new Error("JIRA.AvatarStore.init: You must specify [restCreateTempUrl], The rest url for creating a temporary avatar (see class description)");if(!e.restUpdateTempUrl)throw new Error("JIRA.AvatarStore.init: You must specify [restUpdateTempUrl], The rest url for updating a temporary avatar (see class description)");if(!e.defaultAvatarId)throw new Error("JIRA.AvatarStore.init: You must specify [defaultAvatarId] to the contructor so the store knows what to select if you delete the selected one");this.restQueryUrl=e.restQueryUrl,this.restUpdateUrl=e.restUpdateUrl,this.restCreateTempUrl=e.restCreateTempUrl,this.restUpdateTempUrl=e.restUpdateTempUrl,this.restSingleAvatarUrl=e.restSingleAvatarUrl,this.restParams=e.restParams||{},this.restParams.atl_token=t.atl_token(),this.defaultAvatarId=e.defaultAvatarId,this.avatars={system:[],custom:[]}},_buildCompleteUrl:function(t){var r=t;if(this.restParams){var a="";for(var s in this.restParams)a+=e.format("&{0}={1}",encodeURIComponent(s),encodeURIComponent(this.restParams[s]));r+="?"+a.substr(1)}return r},getById:function(t){var e;return o.each(this.avatars.system,function(r,a){if(this.getId()===t)return e=a,!1}),e||o.each(this.avatars.custom,function(r,a){if(this.getId()===t)return e=a,!1}),e},isTempAvatar:function(t){return t.getId()===this.TEMP_ID},_selectAvatar:function(t){var e=this.getSelectedAvatar();e&&e.setUnSelected(),t.setSelected()},selectAvatar:function(t,e){var r=this;if(!t)throw new Error("JIRA.AvatarStore.selectAvatar: Cannot select Avatar that does not exist");this.restUpdateUrl?s.makeRequest({type:"PUT",contentType:"application/json",dataType:"json",url:this._buildCompleteUrl(this.restUpdateUrl),data:JSON.stringify(t.toJSON()),success:function(){r._selectAvatar(t),e.success&&e.success.call(this,t)},error:e.error}):(r._selectAvatar(t),e.success&&e.success.call(this,t))},_destory:function(t){var e=o.inArray(t,this.avatars.custom);if(-1===e)throw new Error("JIRA.AvatarStore._destroy: Cannot remove avatar ["+t.getId()+"], it might be a system avatar (readonly) or does not exist.");this.avatars.custom.splice(e,1)},destroy:function(t,e){var r=this;if(e=e||{},!t)throw new Error("JIRA.AvatarStore.destroy: Cannot delete Avatar that does not exist");s.makeRequest({type:"DELETE",url:this.getRestUrlForAvatar(t),success:function(){r._destory(t),t.isSelected()?r.selectAvatar(r.getById(r.defaultAvatarId),e):e.success&&e.success.apply(this,arguments)},error:e.error})},getSelectedAvatar:function(){for(var t=0;t<this.avatars.custom.length;t++)if(this.avatars.custom[t].isSelected())return this.avatars.custom[t];for(t=0;t<this.avatars.system.length;t++)if(this.avatars.system[t].isSelected())return this.avatars.system[t]},_update:function(t){var e=this;if(!this.getById(t.getId()))throw new Error("JIRA.AvatarStore._update: Cannot update avatar ["+t.getId()+"], it might be a system avatar (readonly) or does not exist.");o.each(this.avatars.custom,function(r){this.getId()===t.getId()&&(e.avatars.custom[r]=t)})},update:function(t,e){var r=this;e=e||{},s.makeRequest({type:"PUT",url:this.getRestUrlForAvatar(t),error:e.error,success:function(){r._update(t),e.success&&e.success.apply(this,arguments)}})},_add:function(t){t.isSystemAvatar()?this.avatars.system.push(t):this.avatars.custom.push(t)},createAvatarFromTemporary:function(t,e){var r=this;e=e||{},this.restUpdateTempUrl&&s.makeRequest({type:"POST",url:this._buildCompleteUrl(this.restUpdateTempUrl),data:JSON.stringify(t),contentType:"application/json",dataType:"json",success:function(t){t||(t={id:r.TEMP_ID,isSelected:!0});var s=a.createCustomAvatar(t);r._add(s),e.success&&e.success.call(this,t)},error:e.error})},createTemporaryAvatar:function(t,e){e=o.extend(!0,{},e,{params:this.restParams}),r.uploadTemporaryAvatar(this.restCreateTempUrl,t,e)},_refresh:function(t){var e=this;e.avatars.system=[],e.avatars.custom=[],t.system&&o.each(t.system,function(t,r){e.avatars.system.push(a.createSystemAvatar(r))}),t.custom&&o.each(t.custom,function(t,r){e.avatars.custom.push(a.createCustomAvatar(r))})},refresh:function(t){var e=this,r=this.getById(e.TEMP_ID);t=t||{},s.makeRequest({url:this._buildCompleteUrl(this.restQueryUrl),error:t.error,success:function(a){e._refresh(a),r&&e._add(r),t.success&&t.success.apply(this,arguments)}})},getAllAvatars:function(){return this.avatars},getAllSystemAvatars:function(){return this.avatars.system},getAllCustomAvatars:function(){return this.avatars.custom},getRestUrlForAvatar:function(t){return this._buildCompleteUrl(this.restSingleAvatarUrl+"/"+t.getId())}})});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/AvatarUtil.js' */
define("jira/ajs/avatarpicker/avatar-util",["jira/util/urls","jira/util/logger","jira/attachment/inline-attach","jquery"],function(e,r,a,n){var t={uploadUsingIframeRemoting:function(o,s,i){i=i||{};var l=s.val(),c=new a.Form(new a.FileInput(s,!1)),u=c.addStaticProgress(l),d=c.cloneFileInput();c.fileSelector.clear();var g=new a.Timer(function(){!this.cancelled&&u.show()},this),f=new a.FormUpload({$input:d,url:o,params:n.extend({},i.params,{filename:l,atl_token:e.atl_token()}),scope:this,before:function(){!this.cancelled&&u.start()},success:function(e,r){e.errorMessages&&e.errorMessages.length?c.addErrorWithFileName(e.errorMessages[0],l,t.getErrorTarget(c)):i.success&&i.success(e,r)},error:function(e){r.log(e),this.cancelled||(e.indexOf("SecurityTokenMissing")>=0?c.addError(a.Text.tr("upload.xsrf.timeout",l),t.getErrorTarget(c)):c.addError(a.Text.tr("upload.error.unknown",l),t.getErrorTarget(c)))},after:function(){g.cancel(),u.remove(),this.cancelled||c.enable()}});u.onCancel(function(){f.abort()}),f.upload()},uploadUsingFileApi:function(r,o,s){var i,l,c=o[0].files[0],u=new a.Form(new a.FileInput(o,!1)),d=u.addProgress(c);s=s||{},i=new a.Timer(function(){d.show()}),l=new a.AjaxUpload({file:c,params:n.extend({},s.params,{filename:c.name,size:c.size,atl_token:e.atl_token()}),scope:this,url:r,before:function(){o.hide(),d.start()},progress:function(e){d.progress.$progress.parent().parent().show(),d.update(e)},success:function(e,r){e.errorMessages&&e.errorMessages.length?u.addErrorWithFileName(e.errorMessages[0],c.name,t.getErrorTarget(u)):201===r&&s.success(e,r)},error:function(e,r){r<0?u.addError(e,t.getErrorTarget(u)):u.addError(a.Text.tr("upload.error.unknown",c.name),t.getErrorTarget(u)),s.error&&s.error(e,r)},after:function(){i.cancel(),d.finish().remove(),o.val("").show()}}),l.upload(),d.onCancel(function(){l.abort()})},getErrorTarget:function(e){return{$element:e.$form.find(".error")}},uploadTemporaryAvatar:function(e,r,n){a.AjaxPresenter.isSupported(r)?this.uploadUsingFileApi(e,r,n):this.uploadUsingIframeRemoting(e,r,n)}};return t});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/AvatarPicker.js' */
define("jira/ajs/avatarpicker/avatar-picker",["jira/util/logger","jira/util/formatter","jira/util/strings","jira/ajs/avatarpicker/avatar-picker/image-editor","jira/ajs/ajax/smart-ajax","jira/dialog/dialog","jira/ajs/control","aui/message","jquery"],function(a,e,t,r,i,n,c,o,d){"use strict";return c.extend({init:function(a){this.avatarManager=a.avatarManager,this.avatarRenderer=a.avatarRenderer,this.imageEditor=a.imageEditor,this.size=a.size,this.selectCallback=a.select,this.cropperDialog=null,this.initialSelection=a.initialSelection},render:function(a){var e=this;this.avatarManager.refreshStore({success:function(){e.cropperDialog instanceof n&&(e.cropperDialog.hide(),delete e.cropperDialog),e.element=d('<div id="jira-avatar-picker" />'),e.element.html(JIRA.Templates.AvatarPicker.picker({avatars:e.avatarManager.getAllAvatarsRenderData(e.size)})),e._assignEvents("selectAvatar",e.element.find(".jira-avatar button")),e._assignEvents("deleteAvatar",e.element.find(".jira-delete-avatar")),e._assignEvents("uploader",e.element.find("#jira-avatar-uploader")),void 0!==e.initialSelection&&e.getAvatarElById(e.initialSelection).addClass("jira-selected-avatar"),a(e.element)},error:function(t,r,i,n){e.appendErrorContent(e.element,n),a(e.element)}})},appendErrorContent:function(a,e){try{var r=JSON.parse(e.data);r&&r.errorMessages?d.each(r.errorMessages,function(e,r){o.error(a,{body:t.escapeHtml(r),closeable:!1,shadowed:!1})}):a.append(i.buildDialogErrorContent(e,!0))}catch(t){a.append(i.buildDialogErrorContent(e,!0))}},uploadTempAvatar:function(e){var t=this;this.avatarManager.createTemporaryAvatar(e,{success:function(a){a.id?t.render(function(){t.selectAvatar(a.id)}):(e.val(""),t.cropperDialog=new n({id:"project-avatar-cropper",width:560,content:function(e){function r(){var a=i.find("input[type=submit]"),e=d("<span class='icon throbber loading'></span>");return a.attr("aria-disabled","true").attr("disabled",""),a.before(e),function(){e.remove(),a.removeAttr("aria-disabled").removeAttr("disabled")}}var i=t.imageEditor.render(a);t.imageEditor.edit({confirm:function(a){var e=r();t.avatarManager.createAvatarFromTemporary(a,{success:function(a){t.render(function(){t.selectAvatar(a.id)})},error:e})}}),i.find(".cancel").click(function(){t.cropperDialog.hide()}),e(i)}}),t.cropperDialog.bind("dialogContentReady",function(){d(t).trigger(r.LOADED)}),t.cropperDialog.bind("Dialog.hide",function(){d(t).trigger(r.DISMISSED)}),t.cropperDialog.show())},error:function(){a.log(arguments)}})},getAvatarElById:function(a){return this.element.find(".jira-avatar[data-id='"+a+"']")},selectAvatar:function(a){var e=this.avatarManager.getById(a),t=this;this.avatarManager.selectAvatar(this.avatarManager.getById(a),{error:function(){},success:function(){t.getAvatarElById(a).remove(),t.selectCallback&&t.selectCallback.call(t,e,t.avatarManager.getAvatarSrc(e,t.size))}})},deleteAvatar:function(a){var t=this;confirm("Are you sure you want to delete avatar?")&&this.avatarManager.destroy(this.avatarManager.getById(a),{error:function(){},success:function(){var e=t.avatarManager.getSelectedAvatar(),r=t.getAvatarElById(a);r.fadeOut(function(){r.remove()}),e.getId()!==a&&(t.getAvatarElById(e.getId()).addClass("jira-selected-avatar"),t.selectCallback.call(t,e,t.avatarManager.getAvatarSrc(e,t.size),!0))}})},_events:{uploader:{change:function(a,e){this.uploadTempAvatar(e)}},deleteAvatar:{click:function(a,e){this.deleteAvatar(e.attr("data-id"))}},selectAvatar:{click:function(a,e){"select-avatar-button"===e[0].id&&this.selectAvatar(e.attr("data-id"))}}}})}),define("jira/ajs/avatarpicker/avatar-picker/image-editor",["jira/ajs/control","jquery"],function(a,e){"use strict";var t=a.extend({render:function(a){return this.element=e('<div id="avatar-picker-image-editor"/>').html(JIRA.Templates.AvatarPicker.imageEditor(a)),this.element},edit:function(a){var t=this,r=this.element.find(".avataror");a=a||{},r.unbind(),r.bind("AvatarImageLoaded",function(){a.ready&&a.ready()}),r.find("img").load(function(){r.avataror({previewElement:t.element.find(".jira-avatar-cropper-header"),parent:t.element})}),this.element.find("#avataror").submit(function(t){t.preventDefault(),a.confirm&&a.confirm({cropperOffsetX:e("#avatar-offsetX").val(),cropperOffsetY:e("#avatar-offsetY").val(),cropperWidth:e("#avatar-width").val()})}).find(".cancel").click(function(e){e.preventDefault(),a.cancel&&a.cancel()})}});return t.LOADED="imageEditorLoaded",t.DISMISSED="imageEditorDismissed",t}),define("jira/ajs/avatarpicker/avatar-picker-factory",["jira/util/browser","jira/util/formatter","jira/ajs/avatarpicker/avatar-picker","jira/ajs/avatarpicker/avatar-picker/image-editor","jira/ajs/avatarpicker/avatar-manager-factory","jira/ajs/avatarpicker/avatar/sizes","jira/dialog/form-dialog","wrm/context-path","wrm/data","jquery","exports"],function(a,e,t,r,i,n,c,o,d,l,s){"use strict";s.createUniversalAvatarPicker=function(a){return new t({avatarManager:i.createUniversalAvatarManager({projectKey:a.projectKey,projectId:a.projectId,defaultAvatarId:a.defaultAvatarId,avatarType:a.avatarType}),initialSelection:a.initialSelection,imageEditor:new r,size:a.hasOwnProperty("avatarSize")?a.avatarSize:n.LARGE,select:a.select})},s.createProjectAvatarPicker=function(a){return new t({avatarManager:i.createProjectAvatarManager({projectKey:a.projectKey,projectId:a.projectId,defaultAvatarId:a.defaultAvatarId}),imageEditor:new r,size:n.LARGE,select:a.select})},s.createUserAvatarPicker=function(a){return new t({avatarManager:i.createUserAvatarManager({username:a.username,defaultAvatarId:a.defaultAvatarId}),imageEditor:new r,size:n.LARGE,select:a.select})},s.createUniversalAvatarPickerDialog=function(a){var t=a.initialSelection||a.defaultAvatarId,r=new c({trigger:a.trigger,id:"project-avatar-picker",width:600,stacked:!0,content:function(i){var n,c;c=l('<div id="projectavatar-content-wrapper"/>'),l("<h2 />").text(a.title||"Select a Project Avatar").appendTo(c),n=s.createUniversalAvatarPicker({projectKey:a.projectKey,projectId:a.projectId,defaultAvatarId:a.defaultAvatarId,initialSelection:t,avatarType:a.avatarType,avatarSize:a.avatarSize,select:function(e,i,n){t=String(e.getId()),a.select&&a.select.apply(this,arguments),n||r.hide()}}),n.render(function(a){c.append(a),i(c)})}});r._focusFirstField=function(){}},s.createProjectAvatarPickerDialog=function(a){var t=new c({trigger:a.trigger,id:"project-avatar-picker",width:600,stacked:!0,content:function(r){var i,n;n=l('<div id="projectavatar-content-wrapper"/>'),l("<h2 />").text("Select a Project Avatar").appendTo(n),i=s.createProjectAvatarPicker({projectKey:a.projectKey,projectId:a.projectId,defaultAvatarId:a.defaultAvatarId,select:function(e,r,i){a.select&&a.select.apply(this,arguments),i||t.hide()}}),i.render(function(a){n.append(a),r(n)})}});t._focusFirstField=function(){}};var v=d.claim("jira.core:avatar-picker-data.data");s.createUserAvatarPickerDialog=function(t){if(v&&v.isEnabled)return void l(t.trigger).click(function(e){var t=o()+v.url;t+=(t.indexOf("?")>-1?"&":"?")+"continue="+encodeURIComponent(window.location.href),e.preventDefault(),e.stopPropagation(),a.reloadViaWindowLocation(t)});var r=new c({trigger:t.trigger,id:"user-avatar-picker",width:600,stacked:!0,content:function(a){var i,n;n=l('<div id="useravatar-content-wrapper"/>'),l("<h2 />").text("Select a User Avatar").appendTo(n),i=s.createUserAvatarPicker({username:t.username,defaultAvatarId:t.defaultAvatarId,select:function(a,e,i){t.select&&t.select.apply(this,arguments),l(".avatar-image").attr("src",e),i||r.hide()}}),i.render(function(e){n.append(e),a(n)})}})}});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/GravatarUtil.js' */
define("jira/ajs/avatarpicker/gravatar-util",["jquery","exports"],function(a,r){r.showGravatarHelp=function(r){void 0!==r&&void 0!==r.entry&&(a(".gravatar-signup-text").addClass("hidden"),a(".gravatar-login-text").removeClass("hidden"))},r.displayGravatarHelp=function(){var t=a("#gravatar_json_url");t.length&&a.ajax(t.val(),{dataType:"jsonp",success:r.showGravatarHelp})}});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/initAvatarPicker.js' */
!function(){var a=require("jquery"),r=require("jira/ajs/avatarpicker/avatar/sizes"),e=require("jira/ajs/avatarpicker/avatar-factory"),t=require("jira/ajs/avatarpicker/avatar-manager-factory"),c=require("jira/ajs/avatarpicker/avatar-picker-factory"),A=require("jira/ajs/avatarpicker/gravatar-util");AJS.namespace("JIRA.Avatar",null,require("jira/ajs/avatarpicker/avatar")),AJS.namespace("JIRA.Avatar.createCustomAvatar",null,e.createCustomAvatar),AJS.namespace("JIRA.Avatar.createSystemAvatar",null,e.createSystemAvatar),AJS.namespace("JIRA.Avatar.getSizeObjectFromName",null,r.getSizeObjectFromName),AJS.namespace("JIRA.Avatar.LARGE",null,r.LARGE),AJS.namespace("JIRA.Avatar.MEDIUM",null,r.MEDIUM),AJS.namespace("JIRA.Avatar.SMALL",null,r.SMALL),AJS.namespace("JIRA.AvatarManager",null,require("jira/ajs/avatarpicker/avatar-manager")),AJS.namespace("JIRA.AvatarManager.createUniversalAvatarManager",null,t.createUniversalAvatarManager),AJS.namespace("JIRA.AvatarManager.createProjectAvatarManager",null,t.createProjectAvatarManager),AJS.namespace("JIRA.AvatarManager.createUserAvatarManager",null,t.createUserAvatarManager),AJS.namespace("JIRA.AvatarPicker",null,require("jira/ajs/avatarpicker/avatar-picker")),AJS.namespace("JIRA.AvatarPicker.ImageEditor",null,require("jira/ajs/avatarpicker/avatar-picker/image-editor")),AJS.namespace("JIRA.AvatarPicker.createUniversalAvatarPicker",null,c.createUniversalAvatarPicker),AJS.namespace("JIRA.AvatarPicker.createProjectAvatarPicker",null,c.createProjectAvatarPicker),AJS.namespace("JIRA.AvatarPicker.createUserAvatarPicker",null,c.createUserAvatarPicker),AJS.namespace("JIRA.createUniversalAvatarPickerDialog",null,c.createUniversalAvatarPickerDialog),AJS.namespace("JIRA.createProjectAvatarPickerDialog",null,c.createProjectAvatarPickerDialog),AJS.namespace("JIRA.createUserAvatarPickerDialog",null,c.createUserAvatarPickerDialog),AJS.namespace("JIRA.AvatarStore",null,require("jira/ajs/avatarpicker/avatar-store")),AJS.namespace("JIRA.AvatarUtil",null,require("jira/ajs/avatarpicker/avatar-util")),AJS.namespace("JIRA.GravatarUtil.showGravatarHelp",null,A.showGravatarHelp),a(function(){c.createUserAvatarPickerDialog({trigger:"#user_avatar_image",username:a("#avatar-owner-id").text(),defaultAvatarId:a("#default-avatar-id").text()}),a("#gravatar_help_params")&&A.displayGravatarHelp()})}();;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/AvatarPicker.soy' */
// This file was automatically generated from AvatarPicker.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.AvatarPicker.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.AvatarPicker == 'undefined') { JIRA.Templates.AvatarPicker = {}; }


JIRA.Templates.AvatarPicker.picker = function(opt_data, opt_ignored) {
  var output = '<form class="jira-avatar-upload-form aui top-label" action="#"><input name="id" value="10000" type="hidden" ><input name="pid" value="10000" type="hidden" ><div class="field-group"><label for="jira-avatar-uploader">' + soy.$$escapeHtml('Upload a new avatar') + '</label><input type="file" class="ignore-inline-attach" name="avatar" id="jira-avatar-uploader"/><div class="error"></div></div></form><div class="form-body"><ul class="jira-avatars">';
  var avatarList6 = opt_data.avatars.system;
  var avatarListLen6 = avatarList6.length;
  for (var avatarIndex6 = 0; avatarIndex6 < avatarListLen6; avatarIndex6++) {
    var avatarData6 = avatarList6[avatarIndex6];
    output += '<li class="jira-avatar jira-system-avatar ' + ((avatarData6.isSelected) ? 'jira-selected-avatar' : '') + '" title="Select this Avatar" data-id="' + soy.$$escapeHtml(avatarData6.id) + '"><button id="select-avatar-button" data-id="' + soy.$$escapeHtml(avatarData6.id) + '" class="jira-icon-button" title="' + soy.$$escapeHtml('Select this Avatar') + '"><img id="avatar-' + soy.$$escapeHtml(avatarData6.id) + '" src="' + soy.$$escapeHtml(avatarData6.src) + '" width="' + soy.$$escapeHtml(avatarData6.width) + '" height="' + soy.$$escapeHtml(avatarData6.height) + '" alt="' + soy.$$escapeHtml('Select this Avatar') + '"/></button></li>';
  }
  var avatarList29 = opt_data.avatars.custom;
  var avatarListLen29 = avatarList29.length;
  for (var avatarIndex29 = 0; avatarIndex29 < avatarListLen29; avatarIndex29++) {
    var avatarData29 = avatarList29[avatarIndex29];
    output += '<li class="jira-avatar jira-custom-avatar ' + ((avatarData29.isSelected) ? 'jira-selected-avatar' : '') + '" title="Select this avatar" data-id="' + soy.$$escapeHtml(avatarData29.id) + '"><button id="select-avatar-button" data-id="' + soy.$$escapeHtml(avatarData29.id) + '" class="jira-icon-button" title="' + soy.$$escapeHtml('Select this Avatar') + '"><img id="avatar-' + soy.$$escapeHtml(avatarData29.id) + '" src="' + soy.$$escapeHtml(avatarData29.src) + '" width="' + soy.$$escapeHtml(avatarData29.width) + '" height="' + soy.$$escapeHtml(avatarData29.height) + '" alt="' + soy.$$escapeHtml('Select this Avatar') + '" /></span><button class="jira-delete-avatar jira-icon-button" data-id="' + soy.$$escapeHtml(avatarData29.id) + '" title="' + soy.$$escapeHtml('Delete this Avatar') + '">' + soy.$$escapeHtml('Delete this Avatar') + '</button></li>';
  }
  output += '</ul></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.AvatarPicker.picker.soyTemplateName = 'JIRA.Templates.AvatarPicker.picker';
}


JIRA.Templates.AvatarPicker.imageEditor = function(opt_data, opt_ignored) {
  return '<form id="avataror" class="jira-avatar-cropper-form aui" action="/jira/secure/project/AvatarPicker.jspa"><input type="hidden" name="cropperOffsetX" id="avatar-offsetX" value="' + soy.$$escapeHtml(opt_data.cropperOffsetX) + '"><input type="hidden" name="cropperOffsetY" id="avatar-offsetY" value="' + soy.$$escapeHtml(opt_data.cropperOffsetY) + '"><input type="hidden" name="cropperWidth" id="avatar-width"  value="' + soy.$$escapeHtml(opt_data.cropperWidth) + '"><div class="jira-avatar-cropper-header"><p>' + soy.$$escapeHtml('Please select which part of the uploaded image you wish to use as the avatar.') + '</p></div><div class="form-body"><div class="avataror"><img src="' + soy.$$escapeHtml(opt_data.url) + '" height="300" /></div></div><div class="form-footer buttons-container"><div class="buttons"><input type="submit" class="aui-button aui-button-primary" value="' + soy.$$escapeHtml('Confirm') + '"><a class="aui-button aui-button-link cancel" href="#">' + soy.$$escapeHtml('Cancel') + '</a></div></div></form>';
};
if (goog.DEBUG) {
  JIRA.Templates.AvatarPicker.imageEditor.soyTemplateName = 'JIRA.Templates.AvatarPicker.imageEditor';
}
;
;
/* module-key = 'jira.webresources:jira-project-data', location = 'includes/jira/project/project-data.js' */
define("jira/project/projectdata",["wrm/data"],function(t){"use strict";var r=t.claim("jira.core:jira-project-data-data.data");return{getProjectType:function(){return r.projectType}}});;
;
/* module-key = 'jira.webresources:jira-admin-data', location = 'includes/jira/admin/admin-data.js' */
define("jira/admin/admindata",["wrm/data"],function(i){"use strict";var a=i.claim("jira.core:jira-admin-data-data.data");return{isUserAdmin:function(){return a.isAdmin},isUserSysAdmin:function(){return a.isSysAdmin}}});;
;
/* module-key = 'jira.webresources:jira-admin-analytics', location = '/includes/jira/admin/analytics.js' */
var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};define("jira/admin/analytics",["jira/project/projectdata","jira/util/events","jira/admin/admindata","jira/common/page","wrm/context-path","jira/util/data/meta","jquery","jira/analytics","jira/libs/parse-uri"],function(t,e,o,n,i,c,r,a,f){function l(t,e,o){return o="object"!==(void 0===o?"undefined":_typeof(o))?{}:o,e=e||"unknown",{name:"administration."+t+"."+e,properties:r.extend({type:e,tab:c.get("admin.active.tab"),section:c.get("admin.active.section")},o)}}function d(t,e){a.send(l("projectconfig.workflowscheme",t,e))}function s(t,e){a.send(l("workflowscheme",t,e))}function w(){return!!r(".status-draft").length}function u(t,e){return l("workflow",t,e)}function p(t,e){a.send(l("navigate",t,e))}function k(t,e){a.send(l("projectconfig.workflow",t,e))}function m(t,e){S.on("click",t,function(){var t=r(this).data("mode");a.send(u("selectmode",{mode:t,edit:e}))})}function g(t,e,o){a.send(u("edit",{mode:t,action:e,object:o}))}function j(){k("loadworkflowstab",{referrer:y(document.referrer)})}function h(t,e,o){S.on("click",t,function(){g("text",e,o)})}function v(t,e){"true"!==r(e.currentTarget).attr("aria-pressed")&&a.send({name:"projectconfig.toggle."+t})}function y(t){if("string"!=typeof t)return null;var e,o=f(t),n=c.get("projectKey");return e=o.path.slice(i().length),e=e.replace(/project-config\/(.*?)(\/|$)/,"project-config/PROJECTKEY$2"),n&&n.length&&(e=e.split(n).join("PROJECTKEY")),e}function b(){e.bind("addworkflow",function(){w()&&s("addworkflowtodraft")}),e.bind("assignissuetypes",function(){w()&&s("assignissuetypestodraft")}),S.on("click",".remove-all-issue-types",function(){w()&&s("deleteworkflowfromdraft")}),S.on("click","#discard-draft-dialog input[type=submit]",function(){x?d("discarddraft"):s("discarddraft")}),S.on("click","#view-original",function(){s("vieworiginalofdraft")}),S.on("click","#view-draft",function(){s("viewdraft")}),S.on("click","#publish-draft",function(){s("publishclicked")}),x||"draftMigrationSuccess"!==f(location).anchor||s("migrationcompleted"),e.bind("draftcreated",function(){x?d("draftcreated"):s("draftcreated")}),S.on("click","#workflowscheme-editor .workflow-text-view",function(){s("viewworkflow",{mode:"text"})}),S.on("click","#workflowscheme-editor .workflow-diagram-view",function(){s("viewworkflow",{mode:"diagram"})}),S.on("click","#project-config-panel-screens a.project-config-screen",function(){var t=r(this).data("operationId");1===t?a.send({name:"administration.screenschemes.editlink.clicked.operation.edit"}):2===t?a.send({name:"administration.screenschemes.editlink.clicked.operation.view"}):a.send({name:"administration.screenschemes.editlink.clicked.operation.create"})}),S.on("click",".project-config-more-link",function(){var t=r(this);p("morelink",{href:y(t.attr("href")),title:t.attr("title")})}),n.relatedContentElement().on("click","a",function(){var e=r(this),n=e.attr("id");n=/^view_project_issuetype_\d+$/.test(n)?"view_project_issuetype":n,p("tabs",{id:n,href:y(e.attr("href")),title:e.text(),isAdmin:o.isUserAdmin(),isSysAdmin:o.isUserSysAdmin(),projectType:t.getProjectType()})}),S.on("click","#project-config-header-name",function(){p("projectheader")}),S.on("click","#project-config-header-avatar",function(){p("projectavatar")}),S.on("click",".back-to-proj-config",function(){p("backtoproject",{href:y(r(this).attr("href"))})}),S.on("click",".project-config-summary-scheme a",function(){p("selectedscheme",{href:y(r(this).attr("href"))})}),S.on("click",".project-config-workflow-text-link",function(){k("viewastext")}),S.on("click",".project-config-screen",function(){k("gotoscreen")}),S.on("click",".project-config-workflow-edit",function(){k(r(this).closest(".project-config-workflow-default").length?"copyworkflow":"editworkflow")}),S.on("click",".issuetypeconfig-edit-workflow",function(){k("editworkflowissuetype")}),S.on("click","#toggleWorkflowTab",function(t){v("workflow",t)}),S.on("click","#toggleViewTab",function(t){v("view",t)}),S.on("click",".project-config-workflow-diagram-container",function(){k("enlargeworkflow")}),S.on("click","#project-config-workflows-view-original",function(){d("vieworiginalofdraft")}),S.on("click","#project-config-workflows-view-draft",function(){d("viewdraft")}),S.on("click","#project-config-workflows-scheme-change",function(){d("switchscheme")}),S.on("click","#project_import_link_lnk",function(){p("topnav.jim")}),m(".workflow-view-toggle",!1),m(".workflow-edit-toggle",!0),h("#workflow-step-add-submit","add","step"),h("#workflow-step-update","update","step"),h("#workflow-step-delete","remove","step"),h("#workflow-transition-add","add","transition"),h("#workflow-transition-update","update","transition"),h("#workflow-transition-delete","remove","transition"),h("#workflow-global-transition-update","update","globaltransition"),e.bind("wfd-edit-action",function(t,e){g("diagram",e.action,e.object)})}var S=r(document),_=c.get("admin.active.section"),x="atl.jira.proj.config"===_;return{bindEvents:b,event:l,sendProjectWorkflowSchemeEvent:d,sendLoadWorkflowsTabEvent:j}}),AJS.namespace("JIRA.Analytics",null,require("jira/admin/analytics"));;
;
/* module-key = 'jira.webresources:jira-admin-analytics', location = '/includes/jira/admin/analytics-init.js' */
require(["underscore","jira/util/data/meta","jira/util/init-on-dcl","jira/admin/analytics"],function(i,n,a,t){a(function(){var a=n.get("admin.active.tab");i.defer(function(){t.bindEvents(),"view_project_workflows"===a&&t.sendLoadWorkflowsTabEvent()})})});;
;
/* module-key = 'jira.webresources:jira-admin', location = '/includes/jira/admin/initAdmin.js' */
define("jira/admin/init/admin",["jira/util/events","jira/util/events/types","jira/util/events/reasons","jquery"],function(e,t,i,n){"use strict";e.bind(t.NEW_CONTENT_ADDED,function(e,t,r){r!==i.panelRefreshed&&t.find(".jira-iconpicker-trigger").click(function(e){e.preventDefault();var t=n(this),i=t.attr("href");t.prev("input.text").length&&window.open(i,"IconPicker","status=no,resizable=yes,top=100,left=200,width=580,height=650,scrollbars=yes").focus()})}),n(function(){var e=function(e,t){n('<input type="hidden" />').attr({name:t,value:t}).appendTo(e),e.trigger("submit",{operationNameSet:!0})},t=function(t){var i=n(t.target),r=i.closest("form"),o="";o=i.attr("name").toLowerCase().indexOf("join")>-1?"join":"leave",e(r,o)};n(document.body).on("keypress","#userGroupPicker select",function(e){13===e.which&&t.apply(this,arguments)}).on("click","#userGroupPicker .aui-button",function(e){e.preventDefault(),t.apply(this,arguments)}).on("submit","#user-edit-groups",function(t,i){if(!i||!i.operationNameSet){var r=n(t.target);t.preventDefault(),e(r,"join")}})})});;
;
/* module-key = 'jira.webresources:jira-admin', location = '/includes/jira/admin/edit-application-properties.js' */
require(["jquery","backbone","jira/util/init-on-dcl"],function(e,i,t){"use strict";var a=i.View.extend({events:{"click input[name=useGravatar]:checked":"_onUseGravatarClicked"},initialize:function(e){i.View.prototype.initialize.call(this,arguments),this._gravatarServer=this.$el.find(".gravatar-server")},_onUseGravatarClicked:function(e){var i="true"===this.$(e.target).val();this._gravatarServer.toggleClass("hidden",!i)}});t(function(){e("#edit-application-properties").each(function(){new a({el:this})})})});;
;
/* module-key = 'jira.webresources:jira-admin', location = '/includes/jira/admin/init/init-jira-admin-webresource.js' */
require("jira/admin/init/admin");;
;
/* module-key = 'jira.webresources:jira-analytics', location = '/includes/jira/analytics/analytics-init.js' */
require(["jquery","jira/analytics","jira/util/data/meta"],function(a,t,c){"use strict";function n(a){var t=c.get("analytics-prefix");return t&&(a=t+a),a}function i(){a("[data-track-pageview]").each(function(c,i){t.send({name:n(a(i).data("track-pageview"))})})}a(document).on("click","[data-track-click]",function(){t.send({name:n(a(this).data("track-click"))})}),a(document).on("auxclick","[data-track-auxclick]",function(){t.send({name:n(a(this).data("track-auxclick"))})}),a(i)});;
;
/* module-key = 'jira.webresources:avatar-picker-trigger', location = '/includes/jira/admin/initAvatarPickerTrigger.js' */
define("jira/admin/init/avatar-picker-trigger",["jira/ajs/layer/layer-constants","jira/util/events","jira/util/events/types","jira/util/events/reasons","jira/ajs/layer/inline-layer","jira/ajs/contentretriever/content-retriever","jira/ajs/avatarpicker/avatar","jira/ajs/avatarpicker/avatar-picker-factory","jira/ajs/avatarpicker/avatar-picker","jira/ajs/avatarpicker/avatar-picker/image-editor","jquery"],function(t,a,e,r,i,n,c,s,v,o,d){"use strict";function f(t){var a=d(".jira-avatar-picker-trigger"),e=d(".jira-avatar-picker-trigger img, img.jira-avatar-picker-trigger",t),r=d(t).find("#avatar-picker-avatar-id"),i=d(t).find("#avatar-picker-iconurl"),n=d(t).find("#avatar-type");""!==n.text()&&s.createUniversalAvatarPickerDialog({trigger:a,title:d(t).find("#avatar-dialog-title").text(),projectId:d(t).find("#avatar-owner-id").text(),projectKey:d(t).find("#avatar-owner-key").text(),defaultAvatarId:d(t).find("#default-avatar-id").text(),initialSelection:r.val(),avatarSize:c.getSizeObjectFromName(d(t).find("#avatar-size").text()),avatarType:n.text(),select:function(t,a){e.attr("src",a),i.val(a),r.val(t.getId())}})}function l(a){var e=d(".jira-inline-avatar-picker-trigger",a);e.length&&new j({offsetTarget:e,projectId:d(a).find("#avatar-owner-id").text(),projectKey:d(a).find("#avatar-owner-key").text(),defaultAvatarId:d(a).find("#default-avatar-id").text(),alignment:t.LEFT,width:420,allowDownsize:!0})}var g=n.extend({init:function(t){this.avatarPicker=t},content:function(t){this.avatarPicker.render(function(a){t(d("<div />").html(a))})},cache:function(){return!1},isLocked:function(){},startingRequest:function(){},finishedRequest:function(){}}),j=i.extend({init:function(t){var a=this;this.avatarPicker=v.createProjectAvatarPicker({projectId:t.projectId,projectKey:t.projectKey,defaultAvatarId:t.defaultAvatarId,select:function(e,r,i){t.select&&t.select.apply(this,arguments),i||a.hide(),a.offsetTarget().attr("src",r),a.offsetTarget().trigger("AvatarSelected")}}),t.contentRetriever=new g(this.avatarPicker),d(this.avatarPicker.imageEditor).bind(o.LOADED,function(){a.setWidth(a.layer().attr("scrollWidth"))}),this._super(t);var e=this.offsetTarget(),r=d("<span class='jira-avatar-picker-trigger'></span>");r.insertBefore(e).append(e),this._assignEvents("offsetTarget",r)},_events:{offsetTarget:{click:function(t){this.show()}}}});a.bind(e.NEW_CONTENT_ADDED,function(t,a,e){e!==r.panelRefreshed&&(f(a),l(a))})});;
;
/* module-key = 'jira.webresources:avatar-picker-trigger', location = '/includes/jira/admin/init/init-avatar-picker.js' */
require("jira/admin/init/avatar-picker-trigger");;
;
/* module-key = 'com.atlassian.plugins.base-hipchat-integration-plugin-api:ajs-amd', location = 'lib/amd/ajs-amd.js' */
define("ajs",function(){return AJS});;
;
/* module-key = 'com.atlassian.plugins.base-hipchat-integration-plugin-api:wrm-amd', location = 'lib/amd/wrm-amd.js' */
define("wrm/context-path",function(){return AJS.contextPath});define("wrm/data",function(){var a=function(){};if(WRM){if(typeof WRM.data==="function"){a=WRM.data}else{if(WRM.data&&typeof WRM.data.claim==="function"){a=WRM.data.claim}}}return{claim:a}});define("wrm",function(){if(WRM.data instanceof Function){WRM.data.claim=WRM.data}return WRM});;
;
/* module-key = 'com.atlassian.plugins.base-hipchat-integration-plugin-api:jquery-amd', location = 'lib/amd/jquery-amd.js' */
define("jquery",function(){return AJS.$});;
;
/* module-key = 'com.atlassian.plugins.base-hipchat-integration-plugin-api:underscore-amd', location = 'lib/amd/underscore-amd.js' */
define("underscore",function(){return _});;
;
/* module-key = 'com.atlassian.plugins.base-hipchat-integration-plugin:configure-integration-data', location = 'admin/configure-integration-data.js' */
define("hipchat/admin/configure-integration-data",["jquery"],function(f){var e="com.atlassian.plugins.base-hipchat-integration-plugin";var d="configure-integration-data";var c="configure-integration";var a=WRM.data instanceof Function?WRM.data:WRM.data.claim;var b=a(e+":"+d+"."+c);return b});;
;
/* module-key = 'com.atlassian.plugins.base-hipchat-integration-plugin:resources', location = 'admin/configure-hipchat.js' */
require(["hipchat/admin/configure-integration-data"],function(a){AJS.toInit(function(g){var d=g("#hipchat-integration-configuration").val();var k=window.localStorage;if(d){var j={self:g("#hipchat-route-config").val(),serverPing:g("#hipchat-route-check-server-connectivity").val(),clientPing:g("#hipchat-route-check-client-connectivity").val(),beginInstall:g("#hipchat-route-begin-install").val(),completeInstall:g("#hipchat-route-complete-install").val(),installableUrl:g("#hipchat-route-installable-url").val(),uninstall:g("#hipchat-route-uninstall").val(),redirectUrl:g("#hipchat-route-redirectUrl").val()};var e={screenshotResource:g("#hipchat-server-resource-screenshot").val(),screenshotResource2x:g("#hipchat-server-resource-screenshot-2x").val(),uninstalling:g("#hipchat-server-resource-uninstalling").val()};var l=HipChat.Templates.Configuration;var b=g("#hipchat-configuration-panel");if(a.linkId){var i=a.linkId}var h=(function(){var m;return{installing:function(){g("#hipchat-installing .hipchat-install-message").spin("large")},error:function(n){b.html(l.error({msg:n}))},uninstallError:function(n){if(n.status==401){b.html(l.uninstallPermissionError())}else{b.html(l.uninstallConnectionError())}},confirmUninstall:function(){var n=g.Deferred();if(!m){m=new AJS.Dialog(600,300,"hipchat-remove-link-dialog");m.addHeader("Remove integration","remove-warning");m.addPanel("Message Panel",l.removeLinkMessage());m.addButton("Remove integration",function(){m.hide();h.uninstall();n.resolve()});m.addCancel("Cancel",function(){m.hide();n.reject()})}m.show();return n.promise()},uninstall:function(){b.html(l.uninstalling({uninstallingImage:e.uninstalling}));g("#hipchat-uninstalling .hipchat-install-message").spin("large")},reinstallationSucceeded:function(){try{var n=require("aui/flag");n({type:"success",title:"Hipchat Integration updated",persistent:false,body:"Your Hipchat Integration has been successfully updated to the latest version, enjoy the new features."})}catch(o){}}}})();var f={serverPing:function(){return g.ajax(j.serverPing,{type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({serverUrl:""})})},serverPingToUrl:function(m){return g.ajax(j.serverPing,{type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({serverUrl:m})})},beginInstall:function(n,m){return g.ajax(j.beginInstall,{type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({installableUrl:n,reinstall:m})})},completeInstall:function(m){return g.ajax(j.completeInstall,{type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({installableUrl:m})})},remove:function(m){return g.ajax({url:j.uninstall+"/"+m,type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({})})},reinstall:function(m){return g.ajax({url:j.uninstall+"/"+m,type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({reinstall:true})})},removeDefault:function(){return g.ajax(j.uninstall,{type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({})})}};var c={initialize:function(m){switch(m){case"installing":c.installing();break;case"installed":c.installed(i);break;case"uninstalling":c.uninstalling();break;case"reinstall":c.reinstalling();break;case"configure":default:c.configure()}},redirect:function(m){window.location.replace(m)},navigate:function(m){window.location.assign(m)},configure:function(){f.serverPing().done(function(){g("#hipchat-install").removeAttr("disabled")}).fail(function(){g("#hipchat-server-failure").removeClass("hidden")}).always(function(){g("#hipchat-loading").hide()});g("#hipchat-install").click(function(n){n.preventDefault();if(g(this).attr("aria-disabled")){return}g(this).attr("aria-disabled","true");AJS.trigger("analyticsEvent",{name:"notifications.hipchat.server.registration.started",data:{}});f.beginInstall(undefined,false).done(c.navigate)});g("#enable-btf-install").click(function(n){n.preventDefault();window.onbeforeunload=null;m()});AJS.trigger("analyticsEvent",{name:"notifications.hipchat.server.discovered",data:{}});function m(){g(".hipchat-install-form").toggleClass("hipchat-btf");g("#btf-url").focus();g("#btf-install").click(function(o){g("#btf-error").hide();o.preventDefault();var n=g("#btf-url").val();var p=/^https?:\/\//i;if(!p.test(n)){n="https://"+n}f.serverPingToUrl(n).done(function(){f.beginInstall(n,false).done(c.navigate)}).fail(function(){g("#btf-error").show()})})}g("#btf-install-cancel").click(function(n){n.preventDefault();g(".hipchat-install-form").toggleClass("hipchat-btf")})},installing:function(){h.installing();f.completeInstall(j.installableUrl).done(function(m){c.redirect(j.self)}).error(h.error)},installed:function(){g("#hipchat-uninstall").click(function(m){m.preventDefault();if(g(this).attr("aria-disabled")){return}h.confirmUninstall().done(function(){f.remove(i).done(c.redirect).error(h.uninstallError)})});g(".hipchat-reinstall").click(function(){if(g(this).attr("aria-disabled")){return}var m=g(this);m.attr("aria-disabled",true);m.find("aui-spinner").css("display","inline-block");f.reinstall(i).done(c.redirect).error(h.uninstallError)});if(k.getItem("hipchat-reinstalling")){h.reinstallationSucceeded();k.removeItem("hipchat-reinstalling")}},uninstalling:function(){f.removeDefault().done(function(){c.redirect(j.redirectUrl)}).error(h.uninstallError)},reinstalling:function(){function o(r){var u=window.location.search.substring(1);var t=u.split("&");for(var s=0;s<t.length;s++){var v=t[s].split("=");if(v[0]==r){if(v.length>1){return v[1]}else{return null}}}}var q=o("installable_url");if(q===undefined){console.log("ERROR: the 'installable_url' parameter was missing from the request URL:'"+window.location.search+"'")}else{var n=decodeURIComponent(q);var m=document.createElement("a");m.href=n;var p=m.protocol+"//"+m.host;f.serverPingToUrl(p).done(function(){k.setItem("hipchat-reinstalling",true);f.beginInstall(p,true).done(c.navigate)}).fail(function(){g("#btf-error").show()})}}};c.initialize(d)}})});;
;
/* module-key = 'com.atlassian.plugins.base-hipchat-integration-plugin:resources', location = 'admin/configure-hipchat.soy' */
// This file was automatically generated from configure-hipchat.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace HipChat.Templates.Configuration.
 */

if (typeof HipChat == 'undefined') { var HipChat = {}; }
if (typeof HipChat.Templates == 'undefined') { HipChat.Templates = {}; }
if (typeof HipChat.Templates.Configuration == 'undefined') { HipChat.Templates.Configuration = {}; }


HipChat.Templates.Configuration.installing = function(opt_data, opt_ignored) {
  return '' + HipChat.Templates.Configuration.connected({id: 'hipchat-installing', installHeading: 'Integrating with Hipchat', installImage: opt_data.installingImage, showRemove: false});
};
if (goog.DEBUG) {
  HipChat.Templates.Configuration.installing.soyTemplateName = 'HipChat.Templates.Configuration.installing';
}


HipChat.Templates.Configuration.uninstalling = function(opt_data, opt_ignored) {
  return '' + HipChat.Templates.Configuration.connected({id: 'hipchat-uninstalling', installHeading: 'Removing Hipchat Integration', installImage: opt_data.uninstallingImage, showRemove: false});
};
if (goog.DEBUG) {
  HipChat.Templates.Configuration.uninstalling.soyTemplateName = 'HipChat.Templates.Configuration.uninstalling';
}


HipChat.Templates.Configuration.connected = function(opt_data, opt_ignored) {
  return '<div id="' + soy.$$escapeHtml(opt_data.id) + '">' + ((opt_data.showRemove) ? HipChat.Templates.Configuration.uninstallButton(null) : '') + ((opt_data.installImage) ? '<img src="' + soy.$$escapeHtml(opt_data.installImage) + '" />' : '') + ((opt_data.installHeading) ? '<h5>' + soy.$$escapeHtml(opt_data.installHeading) + '</h5>' : '') + '<hr/><div class="hipchat-install-message">' + ((opt_data.installMessageHtml) ? '<p>' + soy.$$filterNoAutoescape(opt_data.installMessageHtml) + '</p>' : '') + '</div></div>';
};
if (goog.DEBUG) {
  HipChat.Templates.Configuration.connected.soyTemplateName = 'HipChat.Templates.Configuration.connected';
}


HipChat.Templates.Configuration.error = function(opt_data, opt_ignored) {
  return '' + HipChat.Templates.Configuration.message({type: 'error', title: 'Error encountered creating your Hipchat link', content: soy.$$escapeHtml("Something went wrong integrating JIRA and Hipchat. We probably had trouble connecting to the Hipchat server. Check that the connection between your server and Hipchat is working correctly and try again.") + '<p>' + soy.$$escapeHtml('Try uninstalling the existing integration from Hipchat before trying again.') + '</p>'});
};
if (goog.DEBUG) {
  HipChat.Templates.Configuration.error.soyTemplateName = 'HipChat.Templates.Configuration.error';
}


HipChat.Templates.Configuration.uninstallConnectionError = function(opt_data, opt_ignored) {
  return '' + HipChat.Templates.Configuration.message({type: 'error', title: 'Error encountered removing your Hipchat link', content: '' + soy.$$escapeHtml("Something went wrong removing the integration in Hipchat. We probably had trouble connecting to the Hipchat server. You may need to remove the integration from Hipchat\'s admin page. The link has been removed from JIRA.")});
};
if (goog.DEBUG) {
  HipChat.Templates.Configuration.uninstallConnectionError.soyTemplateName = 'HipChat.Templates.Configuration.uninstallConnectionError';
}


HipChat.Templates.Configuration.uninstallPermissionError = function(opt_data, opt_ignored) {
  return '' + HipChat.Templates.Configuration.message({type: 'error', title: 'Error encountered removing your Hipchat link', content: '' + soy.$$escapeHtml('You do not have permission to remove this integration, please contact your site admin if you wish to remove the Hipchat integration.')});
};
if (goog.DEBUG) {
  HipChat.Templates.Configuration.uninstallPermissionError.soyTemplateName = 'HipChat.Templates.Configuration.uninstallPermissionError';
}


HipChat.Templates.Configuration.refreshToken = function(opt_data, opt_ignored) {
  return '' + HipChat.Templates.Configuration.message({type: 'error', title: 'Setting up your Hipchat link', content: '' + soy.$$escapeHtml('Error encountered creating your Hipchat link')});
};
if (goog.DEBUG) {
  HipChat.Templates.Configuration.refreshToken.soyTemplateName = 'HipChat.Templates.Configuration.refreshToken';
}


HipChat.Templates.Configuration.message = function(opt_data, opt_ignored) {
  return '<div class="aui-message aui-message-' + soy.$$escapeHtml(opt_data.type) + ' ' + ((opt_data.altClass) ? soy.$$escapeHtml(opt_data.altClass) : '') + '"><p class="title"><strong>' + soy.$$escapeHtml(opt_data.title) + '</strong></p>' + ((opt_data.content) ? '<p>' + soy.$$filterNoAutoescape(opt_data.content) + '</p>' : '') + '</div>';
};
if (goog.DEBUG) {
  HipChat.Templates.Configuration.message.soyTemplateName = 'HipChat.Templates.Configuration.message';
}


HipChat.Templates.Configuration.removeLinkMessage = function(opt_data, opt_ignored) {
  return '<div class=\'remove-link-message\'>' + soy.$$filterNoAutoescape("\u003cp>Are you sure you want to completely remove your Hipchat integration?\u003c\/p>\u003cp>The JIRA plugin will not be removed from Hipchat.\u003c\/p>") + '</div>';
};
if (goog.DEBUG) {
  HipChat.Templates.Configuration.removeLinkMessage.soyTemplateName = 'HipChat.Templates.Configuration.removeLinkMessage';
}


HipChat.Templates.Configuration.installButton = function(opt_data, opt_ignored) {
  return '<div class="hipchat-install-form"><button class="aui-button aui-button-primary" type="submit" id="hipchat-install" disabled="disabled">' + soy.$$escapeHtml('Connect Hipchat') + '</button><div id="hipchat-loading"><aui-spinner size=\'small\'></aui-spinner> ' + soy.$$escapeHtml('Checking your server can see Hipchat') + '</div><div id="hipchat-server-failure" class="hidden"><p><span class="aui-icon aui-icon-small aui-iconfont-warning hipchat-failure-marker"></span> ' + soy.$$escapeHtml('Unable to reach Hipchat') + '</p><p class="details">' + soy.$$escapeHtml("If JIRA does not have access to the internet you won\'t be able to integrate with Hipchat.") + '</p></div><div><button class="cancel aui-link aui-button aui-button-link" id="enable-btf-install">' + soy.$$escapeHtml('Or, if you\x27re using Hipchat Server, click here.') + '</button>' + HipChat.Templates.Configuration.btfInstall(null) + '</div></div>';
};
if (goog.DEBUG) {
  HipChat.Templates.Configuration.installButton.soyTemplateName = 'HipChat.Templates.Configuration.installButton';
}


HipChat.Templates.Configuration.btfInstall = function(opt_data, opt_ignored) {
  return '<form class="aui top-label" id="hipchat-btf-install"><fieldset class="top-label"><div class="field-group top-label"><label for="hipchat-btf-url" style="text-align:center">' + soy.$$escapeHtml('First things first, let us know where we can find your Hipchat Server:') + '</label><input class="text long-field" type="text" id="btf-url" name="btf-url" data-aui-notification-field="" placeholder="http://www.hipchat.com"></input><div class="error" id="btf-error">' + soy.$$escapeHtml('We couldn\x27t reach your server') + '</div></div></fieldset><div class="buttons-container"><button class="aui-button aui-button-primary" type="submit" id="btf-install">' + soy.$$escapeHtml('Connect Hipchat') + '</button><a class="cancel" href="#" id="btf-install-cancel">Cancel</a></div></form>';
};
if (goog.DEBUG) {
  HipChat.Templates.Configuration.btfInstall.soyTemplateName = 'HipChat.Templates.Configuration.btfInstall';
}


HipChat.Templates.Configuration.uninstallButton = function(opt_data, opt_ignored) {
  return '<button class="aui-button aui-button-subtle" id="hipchat-uninstall"><span class="aui-icon aui-icon-small aui-iconfont-delete">Configure</span> ' + soy.$$escapeHtml('Remove integration') + '</button>';
};
if (goog.DEBUG) {
  HipChat.Templates.Configuration.uninstallButton.soyTemplateName = 'HipChat.Templates.Configuration.uninstallButton';
}


HipChat.Templates.Configuration.inviteButton = function(opt_data, opt_ignored) {
  return '<input type="hidden" id="inviteButtonWaitingForMapping" value="' + soy.$$escapeHtml(opt_data.inviteButtonWaitingForMapping) + '"/><a class="aui-button aui-button-subtle hidden" id="hipchat-invite-button" href="' + soy.$$escapeHtml(opt_data.adminInviteUrl) + '"><span class="aui-icon aui-icon-small aui-iconfont-space-personal">Invite</span> ' + soy.$$escapeHtml('Invite users to Hipchat') + '</a>';
};
if (goog.DEBUG) {
  HipChat.Templates.Configuration.inviteButton.soyTemplateName = 'HipChat.Templates.Configuration.inviteButton';
}
;
;
/* module-key = 'jira.webresources:jquery-selection', location = '/includes/jquery/plugins/selection/jquery.selection.js' */
require(["jquery"],function(t){if(document.selection){var e=function(t){return t.replace(/\u000D/g,"")};t.fn.selection=function(t){var e=this[0];if(this.focus(),!e)return!1;if(null==t)return document.selection.createRange().text;var n=e.scrollTop,s=document.selection.createRange();s.text=t,s.select(),e.focus(),e.scrollTop=n},t.fn.selectionRange=function(t,n){var s=this[0];this.focus();var r=document.selection.createRange();if(null==t){var i=this.val(),o=i.length,l=r.duplicate();l.moveToElementText(s),l.setEndPoint("StartToEnd",r);var c=o-e(l.text).length;l.setEndPoint("StartToStart",r);var a=o-e(l.text).length;return c!=a&&"\n"==i.charAt(c+1)&&(c+=1),{end:c,start:a,text:i.substring(a,c),textBefore:i.substring(0,a),textAfter:i.substring(c)}}r.moveToElementText(s),r.collapse(!0),r.moveStart("character",t),r.moveEnd("character",n-t),r.select()}}else t.fn.selection=function(t){var e=this[0];if(!e)return!1;if(null==t)return!!e.setSelectionRange&&e.value.substring(e.selectionStart,e.selectionEnd);var n=e.scrollTop;if(e.setSelectionRange){var s=e.selectionStart;e.value=e.value.substring(0,s)+t+e.value.substring(e.selectionEnd),e.selectionStart=s,e.selectionEnd=s+t.length}e.focus(),e.scrollTop=n},t.fn.selectionRange=function(t,e){if(null==t){var n={start:this[0].selectionStart,end:this[0].selectionEnd},s=this.val();return n.text=s.substring(n.start,n.end),n.textBefore=s.substring(0,n.start),n.textAfter=s.substring(n.end),n}this[0].selectionStart=t,this[0].selectionEnd=e};t.fn.wrapSelection=function(t,e){this.selection(t+this.selection()+(e||""))}});;
;
/* module-key = 'jira.webresources:jqlautocomplete', location = '/includes/jira/autocomplete/JQLAutoComplete.js' */
var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};define("jira/jql/jql-grammar",function(){"use strict";var e={};return e.jql_order_by=[{value:"ORDER BY",displayName:"ORDER BY"}],e.jql_operators=[{value:"=",displayName:"="},{value:"!=",displayName:"!="},{value:"~",displayName:"~"},{value:"<=",displayName:"&lt;="},{value:">=",displayName:"&gt;="},{value:">",displayName:"&gt;"},{value:"<",displayName:"&lt;"},{value:"!~",displayName:"!~"},{value:"is not",displayName:"is not"},{value:"is",displayName:"is"},{value:"not in",displayName:"not in"},{value:"in",displayName:"in"},{value:"was",displayName:"was"},{value:"was not",displayName:"was not"},{value:"was in",displayName:"was in"},{value:"was not in",displayName:"was not in"},{value:"changed",displayName:"changed"}],e.jql_logical_operators=[{value:"AND",displayName:"AND"},{value:"OR",displayName:"OR"}],e.jql_logical_operators_and_order_by=e.jql_logical_operators.concat(e.jql_order_by),e.jql_order_by_direction=[{value:"ASC",displayName:"ASC"},{value:"DESC",displayName:"DESC"}],e.empty_operand=[{value:"EMPTY",displayName:"EMPTY",types:["java.lang.Object"]}],e.jql_not_logical_operator=[{value:"NOT",displayName:"NOT"}],e.jql_was_predicates=[{value:"AFTER",displayName:"AFTER",type:"java.util.Date",supportsList:"false"},{value:"BEFORE",displayName:"BEFORE",type:"java.util.Date",supportsList:"false"},{value:"BY",displayName:"BY",type:"com.atlassian.crowd.embedded.api.User",supportsList:"false",auto:"true"},{value:"DURING",displayName:"DURING",type:"java.util.Date",supportsList:"true"},{value:"ON",displayName:"ON",type:"java.util.Date",supportsList:"false"}],e.jql_changed_predicates=e.jql_was_predicates.concat([{value:"FROM",displayName:"FROM",type:"java.lang.String",supportsList:"true",auto:"true"},{value:"TO",displayName:"TO",type:"java.lang.String",supportsList:"true",auto:"true"}]),e.jql_was_predicates_and_order_by=e.jql_was_predicates.concat(e.jql_logical_operators_and_order_by),e.jql_was_predicates_and_logical_operators=e.jql_was_predicates.concat(e.jql_logical_operators),e.jql_changed_predicates_and_order_by=e.jql_changed_predicates.concat(e.jql_logical_operators_and_order_by),e.jql_changed_predicates_and_logical_operators=e.jql_changed_predicates.concat(e.jql_logical_operators),e.REGEXP_ANDS=/^AND\s/i,e.REGEXP_ORS=/^OR\s/i,e.REGEXP_NOTS=/^NOT\s/i,e.REGEXP_SNOT=/^\s+not/i,e.REGEXP_SIN=/^\s+in/i,e.REGEXP_SNOT_IN=/^\s+(not\s+in|not|in)/i,e.REGEXP_COMMA_DELIMITER=/^\s*,/,e.REGEXP_ASCENDING=/^\s+asc/i,e.REGEXP_DESCENDING=/^\s+desc/i,e.REGEXP_ORDER_BY=/^order\s+by/i,e.REGEXP_WHITESPACE=/^\s/,e.REGEXP_UNICODE=/^u[a-fA-F0-9]{4}/,e.REGEXP_FIELD_NAME=/^\s-\scf\[\d\d\d\d\d\]/,e.REGEXP_NEW_LINE=/[\r\n]/,e.REGEXP_NUMBER=/\d/,e.REGEXP_TOKEN_CHAR=/[^=!~<>(),\s&|\]]/,e.REGEXP_SPECIAL_CHAR=/[{}*\/%+$#@?;\][]/,e.REGEXP_SPACE_OR_ELSE=/[\s(]/,e.REGEXP_CHARS_TO_ESCAPE=/[^trn"'\\\s]/,e.REGEXP_NOTSTART=/^NO?$/i,e.REGEXP_INSTART=/^IN?$/i,e.REGEXP_PREDICATE=/^(after|before|by|during|from|on|to)/i,e.version_field_type="com.atlassian.jira.project.version.Version",e.jql_text_operator_names=["~","!~"],e}),define("jira/autocomplete/jql-autocomplete",["jira/util/formatter","jira/autocomplete/autocomplete","jira/jql/jql-grammar","jira/jql/util","jira/jql/operator-util","jira/util/data/meta","jira/util/objects","jira/util/users/logged-in-user","jira/featureflags/feature-manager","jquery","underscore","jira/util/logger","wrm/context-path"],function(e,t,r,s,a,n,i,l,o,d,u,g,c){var h=c();return function(c){var p,O=i.begetObject(t),f=c.parser,m=d.grep(c.jqlFieldNames,function(e){return e.searchable}),S=d.grep(c.jqlFieldNames,function(e){return e.orderable}),L=c.jqlFunctionNames,C=d("#"+c.errorID),N=0,y=d("#jqlcolumnnum"),E=d("#jqlrownum"),R=c.autoCompleteUrl||h+"/rest/api/2/jql/autocompletedata/suggestions",I=[],_=[];if(O.textToSuggestionCursorPosition=function(){return O.field.selectionRange().textBefore},O.pushSuggestionsOnHtmlStack=function(e,t,r,s,a){for(var n=Math.min(15,e.length),i=0;i<n;i++){var l,o;if(e[i].value){var d=e[i];l=p&&a?(p.getNeedsOpenParen()?"(":"")+d.value:d.value,o=d.displayName}else o=e[i],l=o;t.push(l),r.push('<li id="',s,i,'">',o,"</li>")}},O.setAutoSelectFirst=function(e){var t=O.getReplacementStartIndex(p,""),r=O.field.selectionRange().end,s=O.field.val().substring(t,r);O.autoSelectFirst=O.shouldSelectFirstValue(O.field.val(),p,s,e)},O.shouldSelectFirstValue=function(e,t,r,a){return O.isSmartAutoSelectFirstEnabled()?!(0===r.length&&t.getIsInSubmittableState()):!(0===r.length||a&&a.length>0&&s.equalsIgnoreCase(r,a[0][1]))},O.renderSuggestions=function(t,r,s){var a=[];if(t instanceof Array){if(t.length<1&&r&&r.length<1&&s&&s.length<1)return a;var i=["<ul>"];s&&s.length>0&&O.pushSuggestionsOnHtmlStack(s,a,i,"jql_operator_suggest_",!1),O.pushSuggestionsOnHtmlStack(t,a,i,"jql_value_suggest_",!0),r&&r.length>0&&O.pushSuggestionsOnHtmlStack(r,a,i,"jql_function_suggest_",!1),i.push("</ul>");var l=d('<span class="esc-prompt">').text("Hit Esc to close"),o=d('<a class="syntax-help" target="_jiraHelp"></a>').attr("title",n.get("advanced-search-help-title")).attr("href",n.get("advanced-search-help-url")).text("Syntax Help").append(l),u=d('<div class="syntax-help-container">').append(o);O.responseContainer.html(i.join("")).append(u).find("li").each(function(e){a[e]=[d(this),a[e]]}),O.setAutoSelectFirst(a),O.addSuggestionControls(a),g.trace("jira.jql.suggestions.done")}return a},O.needsSpaceInCompletion=function(){return!(p.isInsideList()||p.getNeedsOpenParen()||p.getNeedsOrderByDirection())},O.completeField=function(e){var t,r=O.getReplacementStartIndex(p,e),s=O.getReplacementEndIndex(p,r);t=O.needsSpaceInCompletion()?e+" ":e,O.replaceValue(r,s,t);var a=f.parse(O.field.val());O.updateParseIndicator(a)},O._afterCompleteField=function(e){return t._afterCompleteField.call(this),O.needsSpaceInCompletion()&&O.dispatcher(O.field.val()),e},O.prepareOperandSuggestions=function(e,t,r,n,i){if(e){var l=N,o=null==i?null===p.getLastOperand()?"":s.stripEscapeCharacters(p.getLastOperand()):i,d=t+":"+o,u={fieldName:s.stripEscapeCharacters(t)};null===p.getLastOperand()&&null===i||(u.fieldValue=o);var g=a.isWasOperator(p.getLastOperator());O.getSavedResponse(d)?O.renderSuggestionsForOperands(o,O.getSavedResponse(d),r,n,l):(O.dropdownController.dropdown.removeClass("dropdown-ready"),O.delay(function(){O._makeRequest({url:R,dataType:"json",data:u,success:function(e){var t;if(t=null!==e&&null!==e.results?e.results:[],g){var s=u.fieldValue;t=O.appendEmpty(s,t)}O.saveResponse(d,t),O.renderSuggestionsForOperands(o,t,r,n,l)},error:function(){O.renderSuggestionsForOperands(o,[],r,n,l)}})},O.queryDelay))}else O.renderSuggestionsForOperands(s.stripEscapeCharacters(p.getLastOperand()),[],r,n,N)},O.preparePredicateSuggestions=function(e,t){void 0===t&&(t=null);var r=O.slimListForPredicates(t,L,e);O.boldMatchingString(t,r);var a=null==t?null===p.getLastOperand()?"":s.stripEscapeCharacters(p.getLastOperand()):t,n=e+":"+a,i={predicateName:s.stripEscapeCharacters(e)};null===p.getLastOperand()&&null===t||(i.predicateValue=a),null!==p.getLastFieldName()&&(i.fieldName=p.getLastFieldName(),n=p.getLastFieldName()+":"+n),O.predicateSupportsAutoComplete(e)?O.getSavedResponse(n)?O.renderSuggestions(O.getSavedResponse(n),r):(O.dropdownController.dropdown.removeClass("dropdown-ready"),O.delay(function(){O._makeRequest({url:R,dataType:"json",data:i,success:function(e){var t;t=null!==e&&null!==e.results?e.results:[];var s=i.predicateValue;t=O.appendEmpty(s,t),O.saveResponse(n,t),O.renderSuggestions(t,r)},error:function(){O.renderSuggestionsForOperands(a,[])}})},O.queryDelay)):O.renderSuggestions([],r)},O.incompleteOperator=function(){var e=p.getTokens();return null==e||e.length<2?"":(e=O.textToSuggestionCursorPosition().split(" "),e.length>2?e[e.length-1]:"")},O.incompletePredicateValue=function(){var e=p.getTokens();return null==e||e.length<3?"":(e=O.textToSuggestionCursorPosition().split(/[\s(,]+/),e.length>3?e[e.length-1]:"")},O.appendEmpty=function(e,t){var s=O.slimListForMapResults(e,r.empty_operand,!0);return null!=e&&O.boldMatchingString(e,s),t.length<15?t=t.concat(s):t[14]=s[0],t},O.dispatcher=function(e){var t,n,i,l=d(O.field).selectionRange(),o=e.substring(0,l.start),u=f.parse(o);if(p=u.getResult(),N++,p.getNeedsField())i=p.getLastFieldName()||!I.length?m:I,O.renderSuggestionsFromMap(s.stripEscapeCharacters(p.getLastFieldName()),i,r.jql_not_logical_operator,!0);else if(p.getNeedsOperatorOrOperand()){n=a.isEmptyOnlyOperator(p.getLastOperator())?r.empty_operand:L,u.calcLastOperandStartIndex();var g=u.getParsedOperator(),c=O.getSuggestionsForOperators(g,r.jql_operators);if(c&&c.length>0){var h=O.incompleteOperator();O.prepareOperandSuggestions(!0,p.getLastFieldName(),n,c,h)}}else if(p.getNeedsOperator())O.renderSuggestionsForOperators(p.getLastOperator(),r.jql_operators);else if(p.getNeedsPredicateOperand()){var C=p.getLastWasPredicate();O.preparePredicateSuggestions(C,s.stripEscapeCharacters(p.getLastOperand()))}else if(p.getNeedsLogicalOperator())p.getNeedsWasPredicate()?p.getNeedsOrderBy()?(t=null===p.getLastOrderBy()?p.getLastWasPredicate():p.getLastOrderBy(),"was"===p.getLastOperator()?O.renderSuggestionsFromMap(t,r.jql_was_predicates_and_order_by,!1):O.renderSuggestionsFromMap(t,r.jql_changed_predicates_and_order_by,!1)):"was"===p.getLastOperator()?O.renderSuggestionsFromMap(p.getLastWasPredicate(),r.jql_was_predicates_and_logical_operators,!1):O.renderSuggestionsFromMap(p.getLastWasPredicate(),r.jql_changed_predicates_and_logical_operators,!1):p.getNeedsOrderBy()?(t=null===p.getLastOrderBy()?p.getLastLogicalOperator():p.getLastOrderBy(),O.renderSuggestionsFromMap(t,r.jql_logical_operators_and_order_by,!1)):O.renderSuggestionsFromMap(p.getLastLogicalOperator(),r.jql_logical_operators,!1);else if(p.getNeedsOrderByField())i=p.getLastOrderByFieldName()||!_.length?S:_,O.renderSuggestionsFromMap(s.stripEscapeCharacters(p.getLastOrderByFieldName()),i,!0);else if(p.getNeedsOrderByDirection())O.renderSuggestionsFromMap(p.getLastOrderByDirection(),r.jql_order_by_direction,!1);else if(p.getNeedsOperand()){var y=p.getLastFieldName(),E=!1;if(!a.isEmptyOnlyOperator(p.getLastOperator()))for(var R=d.inArray(p.getLastOperator(),r.jql_text_operator_names)>-1,P=0;P<m.length;P++)if(s.equalsIgnoreCase(s.getUnquotedString(m[P].value),y)||m[P].cfid&&s.equalsIgnoreCase(m[P].cfid,y)){E=O.calculateAutocompleteFlag(R,m[P].types[0],m[P].auto);break}n=a.isEmptyOnlyOperator(p.getLastOperator())?r.empty_operand:L,O.prepareOperandSuggestions(E,y,n,{})}else p.getNeedsOrderBy()?O.renderSuggestionsFromMap(p.getLastOrderBy(),r.jql_logical_operators_and_order_by,!1):O.dropdownController.hideDropdown();O.parse(e)},O.calculateAutocompleteFlag=function(e,t,s){return(!e||void 0===t||t!==r.version_field_type)&&s},O.parse=function(e){var t=f.parse(e);return O.updateParseIndicator(t),O.updateColumnLineCount(),t.getResult()},O.renderSuggestionsFromMap=function(e,t,r,s){r||(r={});var a=O.slimListForMapResults(e,t,s),n=O.slimListForMapResults(e,r,s);O.boldMatchingString(e,n),O.boldMatchingString(e,a),O.renderSuggestions(a,n),0===a.length&&0===n.length&&O.dropdownController.hideDropdown()},O.getSuggestionsForOperators=function(e,t){for(var r,a=O.slimListForMapResults(e,t,!1),n=p.getLastFieldName(),i=0;i<m.length;i++)if(s.equalsIgnoreCase(s.getUnquotedString(m[i].value),n)||m[i].cfid&&s.equalsIgnoreCase(m[i].cfid,n)){r=m[i].operators;break}return r&&(a=d.grep(a,function(e){return d.inArray(e.value,r)>-1})),O.boldMatchingString(e,a),a},O.renderSuggestionsForOperators=function(e,t){var r=O.getSuggestionsForOperators(e,t);O.renderSuggestions(r),0===r.length&&O.dropdownController.hideDropdown()},O.renderSuggestionsForOperands=function(e,t,r,s,a){if(a===N){var n=O.slimListForFunctionResults(e,r,p.getLastOperator());O.boldMatchingString(e,n),O.renderSuggestions(t,n,s),0===t.length&&0===n.length&&0===s.length&&O.dropdownController.hideDropdown()}},O.boldMatchingString=function(e,t){if(null!=e&&0!==t.length){for(var r=e.length,s=0,a=r;s<a;s++)switch(e.charAt(s)){case"<":case">":r+=3;break;case"&":r+=4;break;case'"':r+=5}for(var n=0;n<t.length;n++)if(t[n].displayName){var i=t[n].displayName;t[n]={value:t[n].value,displayName:"<b>"+i.substring(0,r)+"</b>"+i.substring(r)}}else t[n]={value:t[n],displayName:"<b>"+t[n].substring(0,r)+"</b>"+t[n].substring(r)}}},O.getReplacementStartIndex=function(e,t){var r,s=d(O.field);return r=e.getNeedsField()?e.getLastFieldNameStartIndex():e.getNeedsOperatorOrOperand()?e.getNeedsOperator()&&a.isWasOperator(t)?e.getLastOperatorStartIndex():e.getLastOperandStartIndex():e.getNeedsOperand()?e.getLastOperandStartIndex():e.getNeedsOperator()?e.getLastOperatorStartIndex():e.getNeedsOrderByField()?e.getLastOrderByFieldNameStartIndex():e.getNeedsOrderByDirection()?e.getLastOrderByDirectionStartIndex():e.getNeedsPredicateOperand()?e.getLastOperandStartIndex():e.getNeedsLogicalOperator()?null!==e.getLastLogicalOperatorStartIndex()&&0!==e.getLastLogicalOperatorStartIndex()?e.getLastLogicalOperatorStartIndex():null!==e.getLastOrderBy()&&0!==e.getLastOrderByStartIndex()?e.getLastOrderByStartIndex():null!=e.getLastWasPredicate()&&0!==e.getLastWasPredicateStartIndex()?e.getLastWasPredicateStartIndex():!0===e.getMustBeOperatorOrPredicate()?s.selectionRange().start:s.selectionRange().start-1:e.getNeedsWasPredicate()?e.getLastWasPredicateStartIndex():e.getNeedsOrderBy()?e.getLastOrderByStartIndex():s.selectionRange().start-1,null!=r?r:s.selectionRange().start},O.getReplacementEndIndex=function(e,t){var s=d(O.field),a=s.selectionRange(),n=null;if(a.start===a.end&&a.end!==O.field.val().length&&t<a.start){var i=e.getTokens().length-1,l=f.parse(O.field.val()),o=l.getResult().getTokens()[i];if(null!==o&&"("!==o&&")"!==o){for(var u=O.field.val(),g=u.substring(t,u.length),c=g.split(""),h=0,p=0;p<c.length&&r.REGEXP_WHITESPACE.test(c[p]);p++)h++;n=t+o.length+h}}return null===n&&(n=a.end),n<t&&(O.replaceValue(t,n," "),n=t),n},O.replaceValue=function(e,t,r){var s=d(O.field);s.selectionRange(e,t),d.browser.webkit?document.execCommand("insertText",!1,r):s.selection(r);var a=s.selectionRange().end;s.selectionRange(a,a)},O.slimListForMapResults=function(e,t,r){var a=s.htmlEscape(e),n=d.grep(t,function(e){return s.startsWithIgnoreCaseNullsMeanAll(a,e.displayName)});return r||1!==n.length||s.startsWithNotEqualsIgnoreCaseNullMeansAll(a,n[0].displayName)?n:{}},O.slimListForFunctionResults=function(e,t,n){for(var i,l=p.getLastFieldName(),o=0;o<m.length;o++)if(s.equalsIgnoreCase(s.getUnquotedString(m[o].value),l)||m[o].cfid&&s.equalsIgnoreCase(m[o].cfid,l)){i=m[o].types;break}var u=d.grep(t,function(t){if(t.isList&&!a.isListSupportingOperator(n)||!t.isList&&a.isListSupportingOperator(n))return!1;if(!i)return!1;var l=d.inArray("java.lang.Object",t.types)>-1||d.inArray("java.lang.Object",i)>-1;if(d.inArray(n,r.jql_text_operator_names)>-1&&d.inArray(r.version_field_type,i)>-1)return l;for(var o=0;o<i.length&&!l;o++)l=-1!==d.inArray(i[o],t.types);return!!l&&(s.startsWithIgnoreCaseNullsMeanAll(e,t.value)||s.startsWithIgnoreCaseNullsMeanAll(e,t.displayName))});return 1!==u.length||s.startsWithNotEqualsIgnoreCaseNullMeansAll(e,u[0].displayName)?u:{}},O.slimListForPredicates=function(e,t,a){for(var n,i,l=0;l<r.jql_changed_predicates.length;l++)if(s.equalsIgnoreCase(s.getUnquotedString(r.jql_changed_predicates[l].value),a)){n=r.jql_changed_predicates[l].type,i=r.jql_changed_predicates[l].supportsList;break}var o=d.grep(t,function(t){return(void 0===t.isList||!(t.isList&&i||!t.isList&&i))&&(!(-1===d.inArray(n,t.types))&&(s.startsWithIgnoreCaseNullsMeanAll(e,t.value)||s.startsWithIgnoreCaseNullsMeanAll(e,t.displayName)))});return 1!==o.length||s.startsWithNotEqualsIgnoreCaseNullMeansAll(e,o[0].displayName)?o:{}},O.predicateSupportsAutoComplete=function(e){for(var t,a=0;a<r.jql_changed_predicates.length;a++)if(s.equalsIgnoreCase(s.getUnquotedString(r.jql_changed_predicates[a].value),e)){t=r.jql_changed_predicates[a].auto;break}return t},O.getSavedResponse=function(e){return this.requested||(this.requested={}),this.requested[e]},O.saveResponse=function(e,t){"string"==typeof e&&"object"===(void 0===t?"undefined":_typeof(t))&&(this.requested||(this.requested={}),this.requested[e]=t)},O.startsWithIgnoreCase=function(e,t){return!(null===t||null===e||t.length<e.length)&&e.toLowerCase()==t.substr(0,e.length).toLowerCase()},O.updateParseIndicator=function(e){e.getParseError()?C.attr("title",e.getResult().getParseErrorMsg()).removeClass("jqlgood").addClass("jqlerror"):C.attr("title","").removeClass("jqlerror").addClass("jqlgood")},O.updateColumnLineCount=function(){var e=d(O.field),t=0;if(O.field[0]===document.activeElement){t=e.selectionRange().start}else t=O.field[0].value.length;for(var s=1,a=1,n=O.field.val(),i=0;i<t;i++)r.REGEXP_NEW_LINE.test(n.charAt(i))?(s++,a=1):a++;y.text(a),E.text(s)},O.isSuggestRecentFieldsEnabled=function(){return o.isFeatureEnabled("jira.jql.suggestrecentfields")},O.isSmartAutoSelectFirstEnabled=function(){return o.isFeatureEnabled("jira.jql.smartautoselectfirst")},O.init(c),O.isSuggestRecentFieldsEnabled()){var P=null,v=function(e){var t=e.value.sort();I=d.grep(m,function(e){return u.contains(t,s.getUnquotedString(e.value))}),_=d.grep(S,function(e){return u.contains(t,s.getUnquotedString(e.value))})},j=function(){l.isAnonymous()||d.ajax({url:h+"/rest/api/2/user/properties/jqlValues?username="+l.username()}).done(v)};v(s.getRecentFields()),P=setInterval(j,5e3),O.field.focus(function(){j(),P||(P=setInterval(j,5e3))}).blur(function(){P&&(clearInterval(P),P=null)})}return O}}),define("jira/jql/util",["jira/jql/jql-grammar","wrm/data"],function(e,t){"use strict";var r={};return r.htmlEscape=function(e){if(null==e)return null;for(var t="",r=e.split(""),s=0;s<r.length;s++)"<"===r[s]?t+="&lt;":">"===r[s]?t+="&gt;":"&"===r[s]?t+="&amp;":'"'===r[s]?t+="&quot;":t+=r[s];return t},r.stripEscapeCharacters=function(t){if(null==t)return t;for(var r="",s=t.split(""),a=0;a<s.length&&("\\"!==s[a]||e.REGEXP_UNICODE.test(t.substring(a,t.length))||!(++a>=t.length));a++)r+=s[a];return r},r.equalsIgnoreCase=function(e,t){return null===e&&null===t||null!==e&&null!==e&&e.toLowerCase()===t.toLowerCase()},r.startsWithIgnoreCaseNullsMeanAll=function(e,t){return null===t||null===e||!(t.length<e.length)&&e.toLowerCase()==t.substr(0,e.length).toLowerCase()},r.startsWithNotEqualsIgnoreCaseNullMeansAll=function(t,r){if(null===r||null===t)return!0;if(r.length<t.length)return!1;if(t.toLowerCase()==r.substr(0,t.length).toLowerCase()){var s=null;return s=e.REGEXP_FIELD_NAME.test(r.substr(t.length,r.length))?r.substr(0,t.length):r,t.toLowerCase()!=s.toLowerCase()}return!1},r.getRecentFields=function(){return null==r.recentValues&&(r.recentValues=t.claim("jira.core:jqlautocomplete-data.jql.autocomplete.recentFields")),r.recentValues},r.getUnquotedString=function(e){var t=null!=e&&e.length>=3&&"\\"!==e.charAt(e.length-2);return null!=e&&'"'===e.charAt(0)?(e=e.substring(1,e.length),'"'===e.charAt(e.length-1)&&t&&(e=e.substring(0,e.length-1))):null!=e&&"'"===e.charAt(0)&&(e=e.substring(1,e.length),"'"===e.charAt(e.length-1)&&t&&(e=e.substring(0,e.length-1))),e},r}),define("jira/jql/operator-util",function(){"use strict";var e={};return e.isListSupportingOperator=function(e){return"in"===e||"not in"===e||"was not in"===e||"was in"===e},e.isEmptyOnlyOperator=function(e){return"is"===e||"is not"===e},e.isWasOperator=function(e){return"was"===e||"was in"===e||"was not in"===e||"was not"===e},e.isChangedOperator=function(e){return"changed"===e},e.isHistoryOperator=function(t){return e.isWasOperator(t)||e.isChangedOperator(t)},e}),define("jira/jql/jql-parser",["jira/jql/jql-grammar","jira/jql/jql-parse-token","jira/jql/operator-util","jira/jql/util","jquery"],function(e,t,r,s,a){return function(n){var i=n;return{parse:function(e){var r=t();return r.init(e),this.jql(r),r},orderByClause:function(t){var r=t.remainingString(),s=r.match(e.REGEXP_ORDER_BY);if(s){var a=r.substring(0,s[0].length);t.consumeCharacters(a.length),t.getResult().setLastOrderBy(a,t),t.isComplete()?(t.getResult().resetLogicalOperators(),t.setParseError()):(r=t.remainingString(),e.REGEXP_WHITESPACE.test(r)?(this.chewWhitespace(t),this.orderByFields(t)):(t.getResult().resetLogicalOperators(),t.setParseError()))}else t.consumeCharacters(r.length),t.getResult().setLastOrderBy(r,t),t.setParseError()},orderByFields:function(e){if(this.orderByField(e),this.chewWhitespace(e),e.isComplete())e.getResult().getNeedsOrderByField()||e.getResult().setLastOrderByDirection("",e);else{var t=e.remainingString();this.startsWithIgnoreCase(",",t)?(e.consumeCharacter(),this.orderByFields(e),this.chewWhitespace(e)):(t=e.remainingString(),null!==t&&e.consumeCharacters(t.length),e.getResult().setNeedsOrderByDirection(),e.getResult().setLastOrderByDirection(t,e),e.setParseError())}},orderByField:function(t){this.chewWhitespace(t);var r=this.fieldName(t);if(0!==r.length){t.getResult().setLastOrderByFieldName(r,t);var s=t.remainingString();t.isComplete()||e.REGEXP_COMMA_DELIMITER.test(s)?(t.getResult().setNeedsOrderByField(),this.chewWhitespace(t)):e.REGEXP_ASCENDING.test(s)?(this.chewWhitespace(t),t.consumeCharacters(3),t.getResult().setLastOrderByDirection("asc",t),t.getResult().setNeedsOrderByComma()):e.REGEXP_DESCENDING.test(s)?(this.chewWhitespace(t),t.consumeCharacters(4),t.getResult().setLastOrderByDirection("desc",t),t.getResult().setNeedsOrderByComma()):t.getResult().setNeedsOrderByDirection()}else t.getResult().setLastOrderByFieldName("",t),t.getResult().setNeedsOrderByField(),t.setParseError()},jql:function(e){this.orClause(e);var t=e.remainingString();this.startsWithIgnoreCase("ord",t)&&this.orderByClause(e),e.result.setInsideList(0!==e.inListParens)},orClause:function(t){for(;!t.isComplete()&&!this.startsWithIgnoreCase(")",t.remainingString());){this.chewWhitespace(t);var r=t.remainingString();if(this.startsWithIgnoreCase("ord",r))break;if(t.getResult().getMustBeOperatorOrPredicate()?t.getResult().resetLastPredicates():(t.getResult().resetLogicalOperators(),this.andClause(t)),!t.isComplete()&&null===t.getResult().getLastLogicalOperator()){if(t.getResult().getNeedsWasPredicate()&&this.predicateClause(t),t.isComplete())return;if(r=t.remainingString(),this.startsWithIgnoreCase("ord",r))break;if(null!==r&&(e.REGEXP_ORS.test(r)||this.startsWithIgnoreCase("|",r)||this.startsWithIgnoreCase("||",r)))this.startsWithIgnoreCase("||",r)?(t.getResult().setLastLogicalOperator("||",t.getTokenStringIdx()),t.consumeCharacters(2)):e.REGEXP_ORS.test(r)?(t.getResult().setLastLogicalOperator("OR",t.getTokenStringIdx()),t.consumeCharacters(3)):(t.getResult().setLastLogicalOperator("|",t.getTokenStringIdx()),t.consumeCharacters(1)),t.getResult().resetTerminalClause(),t.isComplete()&&t.setParseError(),t.getResult().setNeedsField();else if(!this.startsWithIgnoreCase(")",r)||!t.getInParens()){this.chewWhitespace(t);var s,a=null===r?t.getMaxTokenStringIdx():t.getMaxTokenStringIdx()-r.length;null!=r&&(s=r.split(" "),t.getResult().setLastLogicalOperator(s[0],a),t.getResult().setLastWasPredicate(s[0],t),t.getResult().setNeedsLogicalOperator(t)),null==t.getResult().getLastWasOperator()?t.setParseError():null!=s&&(e.REGEXP_PREDICATE.test(s[0])?(t.getResult().setLastLogicalOperator(null),t.getResult().resetNeedsPredicateOperand()):(e.REGEXP_ANDS.test(r)&&(t.consumeCharacters(4),t.getResult().resetTerminalClause(),t.getResult().setNeedsField()),(t.isComplete()||1===s.length)&&t.setParseError()))}}}},andClause:function(t){if(this.chewWhitespace(t),this.notClause(t),!t.isComplete()&&null===t.getResult().getLastLogicalOperator()){this.chewWhitespace(t);var r=t.remainingString();null!==r&&(e.REGEXP_ANDS.test(r)||this.startsWithIgnoreCase("&",r)||this.startsWithIgnoreCase("&&",r))?(this.startsWithIgnoreCase("&&",r)?(t.getResult().setLastLogicalOperator("&&",t.getTokenStringIdx()),t.consumeCharacters(2)):this.startsWithIgnoreCase("&",r)?(t.getResult().setLastLogicalOperator("&",t.getTokenStringIdx()),t.consumeCharacters(1)):(t.getResult().setLastLogicalOperator("AND",t.getTokenStringIdx()),t.consumeCharacters(4)),t.getResult().resetTerminalClause(),t.isComplete()&&t.setParseError(),t.getResult().setNeedsField()):(t.getResult().setNeedsLogicalOperator(t),t.isComplete()&&t.getResult().setLastLogicalOperator(null,t.getMaxTokenStringIdx()))}},notClause:function(t){if(this.chewWhitespace(t),t.isComplete())this.terminalClause(t),t.setParseError();else{this.chewWhitespace(t);var r=t.remainingString();null!==r&&(e.REGEXP_NOTS.test(r)||this.startsWithIgnoreCase("!",r))?(t.getResult().needsField=!1,this.startsWithIgnoreCase("!",r)?(t.getResult().setLastLogicalOperator("!",t.getTokenStringIdx()),t.consumeCharacters(1)):(t.getResult().setLastLogicalOperator("NOT",t.getTokenStringIdx()),t.consumeCharacters(4)),t.getResult().resetTerminalClause(),t.isComplete()&&t.setParseError(),t.getResult().setNeedsField()):this.terminalClause(t)}},predicateClause:function(e){if(this.chewWhitespace(e),e.isComplete())e.setParseError();else{var t=e.remainingString(),r=t.split(/[\s(]+/);if(null!==t){if(e.getResult().setMustBeOperatorOrPredicate(!1),this.startsWithLogicalOperator(t)){if(1===r.length)return e.getResult().setLastWasPredicate(r[0],e),void e.setParseError();return}if(e.getResult().resetNeedsPredicateOperand(),e.consumeCharacters(r[0].length),e.getResult().setLastWasPredicate(r[0],e),1===r.length)return void e.setParseError();this.wasPredicateComplete(r[0])?(e.getResult().setNeedsPredicateOperand(),e.getResult().setLastOperand(null,e),this.predicateOperand(e)):e.setParseError()}}},predicateOperand:function(e){this.chewWhitespace(e);var t=this.collectPredicateOperands(e);null!=t&&""!=t||(e.getResult().setLastOperandStartIndex(e.getTokenStringIdx()),e.setParseError()),null!=e.remainingString()&&(e.getResult().resetNeedsPredicateOperand(),e.getResult().resetLastPredicates(),e.getResult().setMustBeOperatorOrPredicate(!0),e.getResult().setNeedsLogicalOperator(e),this.chewWhitespace(e))},collectPredicateOperands:function(e){"DURING"===e.getResult().getLastWasPredicate()&&e.getResult().setNeedsOpenParen(!0);var t=this.listOperand(e,!0);return 0===t.length?(t=this.functionOperand(e),0===t.length?t=this.singleValueOperand(e):e.getResult().setNeedsOpenParen(!1)):e.getResult().setNeedsOpenParen(!1),s.getUnquotedString(t)},terminalClause:function(t){t.getResult().resetTerminalClause(),this.chewWhitespace(t);var r=t.remainingString();if(this.startsWithIgnoreCase("(",r))t.getResult().addToken("("),t.setInParens(),t.consumeCharacter(),this.orClause(t),this.chewWhitespace(t),r=t.remainingString(),this.startsWithIgnoreCase(")",r)?(t.getResult().addToken(")"),t.consumeCharacter(),t.setOutOfParens(),t.isComplete()&&(t.getResult().resetLogicalOperators(),t.getResult().resetLastPredicates())):t.setParseError();else if(this.field(t),t.isComplete())t.getResult().setNeedsField(),t.setParseError();else if(this.oper(t),t.isComplete()){if("was"===t.getResult().getLastOperator()||"was not"===t.getResult().getLastOperator())t.getResult().setNeedsOperandOrOperator();else{if("changed"===t.getResult().getLastWasOperator()){var s=t.currentCharacter();return void(null!==s&&e.REGEXP_SPACE_OR_ELSE.test(s)?t.getResult().setNeedsLogicalOperator(t):(t.getResult().resetLogicalOperators(),t.getResult().setNeedsOrderBy(!1)))}t.getResult().setNeedsOperator()}t.setParseError()}else{if("changed"===t.getResult().getLastWasOperator())return void t.getResult().setNeedsLogicalOperator(t);if(this.operand(t),t.getResult().getOperandComplete()){var a=t.getResult().getLastWasOperator();t.getResult().setNeedsNothing(),a&&t.getResult().setLastWasOperator(a)}else t.isComplete()&&!t.getResult().getNeedsListComma()&&t.getResult().setNeedsOperand()}},field:function(e){var t=this.fieldName(e);if(0!==t.length)e.getResult().setLastFieldName(t,e);else if(null===e.getResult().getLastFieldName()){var r=e.remainingString();e.getResult().setNeedsField(),e.getResult().setLastFieldName(r,e),e.setParseError()}},fieldName:function(e){this.chewWhitespace(e);var t=e.remainingString();if(this.startsWithIgnoreCase("cf",t)){var r=e.getTokenStringIdx(),s=e.remainingString();if(e.consumeCharacters(2),this.chewWhitespace(e),t=e.remainingString(),this.startsWithIgnoreCase("[",t)){e.consumeCharacter(),t=e.remainingString();if(0!==this.numberValue(e).length&&(this.chewWhitespace(e),t=e.remainingString(),this.startsWithIgnoreCase("]",t)))return e.consumeCharacter(),s.substring(0,e.getTokenStringIdx()-r)}return e.setParseError(),s}return this.startsWithIgnoreCase("issue.property",t)?this.entityPropertyName("issue.property",e):this.fieldOrFunctionName(e)},entityPropertyName:function(e,t){t.consumeCharacters(e.length),this.chewWhitespace(t);var r=t.remainingString();if(this.startsWithIgnoreCase("[",r)){t.consumeCharacter();for(var s=[this.stringValue(t)];!t.parseError&&this.startsWithIgnoreCase(".",t.remainingString());)t.consumeCharacter(),s[s.length]=this.stringValue(t);if(0!==s.length&&0!==s[0].length&&!this.startsWithIgnoreCase(".",s[0])&&(this.chewWhitespace(t),r=t.remainingString(),this.startsWithIgnoreCase("]",r))){t.consumeCharacter();for(var a=[this.stringValue(t)];!t.parseError&&this.startsWithIgnoreCase(".",t.remainingString());)t.consumeCharacter(),a[a.length]=this.stringValue(t);return e+"["+s.join(".")+"]"+a.join(".")}}return t.setParseError(),""},oper:function(t){this.chewWhitespace(t);var s=t.remainingString(),a=this.getLongestOperatorMatch(s,e.jql_operators);if(null!==a){if(t.getResult().setLastOperator(a,t.getTokenStringIdx()),(r.isWasOperator(a)||r.isChangedOperator(a))&&t.getResult().setLastWasOperator(a),t.consumeCharacters(a.length),"in"===a||"is"===a||"is not"===a||"not in"===a||"was"===a||"was not"===a||"was in"===a||"was not in"===a){var n=t.currentCharacter();null===n||e.REGEXP_SPACE_OR_ELSE.test(n)||t.setParseError()}"was"===a?(t.getResult().setNeedsOperandOrOperator(),this.chewWhitespace(t),null!=(s=t.remainingString())&&(e.REGEXP_NOTSTART.test(s)||e.REGEXP_INSTART.test(s))&&t.setParseError()):"was not"===a?(t.getResult().setNeedsOperandOrOperator(),this.chewWhitespace(t),null!=(s=t.remainingString())&&e.REGEXP_INSTART.test(s)&&t.setParseError()):"changed"===a?t.getResult().setNeedsLogicalOperator(t):t.getResult().setNeedsOperand()}else if(null===t.getResult().getLastOperator()){var i=null===s?t.getMaxTokenStringIdx():t.getMaxTokenStringIdx()-s.length;t.getResult().setLastOperator(s,i),t.getResult().setNeedsOperator(),t.setParseError()}},operand:function(e){this.chewWhitespace(e),"in"!==e.getResult().getLastOperator()&&"not in"!==e.getResult().getLastOperator()&&"was not in"!==e.getResult().getLastOperator()&&"was in"!==e.getResult().getLastOperator()||e.getResult().setNeedsOpenParen(!0);var t=this.listOperand(e,!0);if(0===t.length?(t=this.functionOperand(e),0===t.length?t=this.singleValueOperand(e):e.getResult().setNeedsOpenParen(!1)):e.getResult().setNeedsOpenParen(!1),null===t||0===t.length){var r=e.remainingString();e.getResult().setLastOperand(r,e),e.getResult().setNeedsOperand(),e.setParseError()}return 0!==t.length?t:""},singleValueOperand:function(e){var t=this.stringValue(e);return 0!==t.length?(e.getResult().setLastOperand(t,e),"empty"!==t.toLowerCase()&&"null"!==t.toLowerCase()&&this.isReservedWord(t.toLowerCase())&&e.setParseError(),t):""},functionOperand:function(e){var t=e.getTokenStringIdx(),r=this.fieldOrFunctionName(e);this.chewWhitespace(e);var s=this.listOperand(e,!1);if(0!==r.length&&0!==s.length){var a=r+s;return e.getResult().setLastOperand(a,e),a}return e.backTrackToIdx(t),""},listOperand:function(e,t){if("("===e.currentCharacter()){e.consumeCharacter(),e.setInListParens();var r=this.collectListValues(e,t),s="("+r;return this.chewWhitespace(e),")"===e.currentCharacter()?(e.consumeCharacter(),
e.setOutOfListParens(),s+=")","()"===s&&t&&e.getResult().setLastOperand(s,e),t&&(e.getResult().setOperandComplete(),e.getResult().resetNeedsPredicateOperand())):e.setParseError(),s}return""},collectListValues:function(e,t){t&&e.getResult().setNeedsOperand(),this.chewWhitespace(e);var r=t?this.operand(e):this.stringValue(e);if(0!==r.length){if(this.chewWhitespace(e)&&t&&e.getResult().setNeedsListComma(),","===e.currentCharacter()){e.consumeCharacter();var s=this.collectListValues(e,t);return 0===s.length&&e.setParseError(),r+", "+s}return r}return""},startsWithIgnoreCase:function(e,t){return!(null===t||null===e||t.length<e.length)&&e.toLowerCase()==t.substr(0,e.length).toLowerCase()},startsWithLogicalOperator:function(e){return null!==e&&(this.startsWithOr(e)||this.startsWithAnd(e)||this.startsWithNot(e)||this.startsWithBraces(e))},startsWithOr:function(e){return this.startsWithIgnoreCase("|",e)||this.startsWithIgnoreCase("||",e)||this.startsWithIgnoreCase("or",e)},startsWithAnd:function(e){return this.startsWithIgnoreCase("&",e)||this.startsWithIgnoreCase("&&",e)||this.startsWithIgnoreCase("and",e)},startsWithNot:function(e){return this.startsWithIgnoreCase("!",e)||this.startsWithIgnoreCase("not",e)},startsWithBraces:function(e){return this.startsWithIgnoreCase("(",e)||this.startsWithIgnoreCase(")",e)},chewWhitespace:function(t){for(var r=!1,s=t.currentCharacter();null!==s&&e.REGEXP_WHITESPACE.test(s);)t.consumeCharacter(),s=t.currentCharacter(),r=!0;return r},getLongestOperatorMatch:function(t,r){var s,a=null;if(this.startsWithIgnoreCase("is",t)&&(s=t.substring(2).match(e.REGEXP_SNOT),a=s?t.substring(0,s[0].length+2):"is"),this.startsWithIgnoreCase("was",t))s=t.substring(3).match(e.REGEXP_SNOT_IN),a=s?t.substring(0,s[0].length+3):"was";else if(this.startsWithIgnoreCase("not",t)){var n=t.substring(3).match(e.REGEXP_SIN);n&&(a=t.substring(0,n[0].length+3))}else for(var i=0;i<r.length;i++)this.startsWithIgnoreCase(r[i].value,t)&&(null===a||e.jql_operators[i].value.length>a)&&(a=e.jql_operators[i].value);return a},getValueMinusExtraWhitespace:function(t){if(null===t)return null;for(var r="",s=!0,a=t.split(""),n=0;n<a.length;n++){var i=a[n];e.REGEXP_WHITESPACE.test(i)?s&&(s=!1,r+=i):(s=!0,r+=i)}return r},fieldOrFunctionName:function(e){var t=this.stringValue(e);return'""'!==t&&"''"!==t||e.setParseError(),this.isReservedWord(t.toLowerCase())&&e.setParseError(),t},isReservedWord:function(e){return-1!==a.inArray(e,i)},stringValue:function(t){for(var r="",s=!1,a=!1,n=t.currentCharacter();null!==n&&(s||a||e.REGEXP_TOKEN_CHAR.test(n));){if(r+=n,t.consumeCharacter(),"\\"===n){if(null===(n=t.currentCharacter())){t.setParseError();break}if(e.REGEXP_CHARS_TO_ESCAPE.test(n)){var i=t.remainingString();if(!e.REGEXP_UNICODE.test(i)){t.setParseError();break}}r+=n,t.consumeCharacter()}else{if(e.REGEXP_SPECIAL_CHAR.test(n)&&!s&&!a){t.setParseError();break}'"'!==n||a?"'"!==n||s||(a=!a):s=!s}n=t.currentCharacter()}return t.isComplete()&&(s||a)&&t.setParseError(),r},numberValue:function(t){var r="";this.chewWhitespace(t);for(var s=t.currentCharacter();null!==s&&e.REGEXP_NUMBER.test(s);)r+=s,t.consumeCharacter(),s=t.currentCharacter();return r},wasPredicateComplete:function(t){for(var r=!1,s=e.jql_changed_predicates.length,a=0;a<s;++a)if(t.toLowerCase()==e.jql_changed_predicates[a].value.toLowerCase()){r=!0;break}return r}}}}),define("jira/jql/jql-parse-result",["jira/jql/util"],function(e){"use strict";return function(){var t=[],r=0;return{getTokens:function(){return t},addToken:function(e){t[r++]=e},setLastFieldName:function(s,a){this.fieldNameStartIndex=null===s?a.getMaxTokenStringIdx():a.getTokenStringIdx()-s.length,this.lastFieldName=e.getUnquotedString(s),t[r++]=s},getLastFieldName:function(){return this.lastFieldName},getLastFieldNameStartIndex:function(){return this.fieldNameStartIndex},setLastOrderByFieldName:function(s,a){this.orderByFieldNameStartIndex=null===s?a.getMaxTokenStringIdx():a.getTokenStringIdx()-s.length,this.lastOrderByFieldName=e.getUnquotedString(s),this.lastOrderByDirection=null,t[r++]=s},getLastOrderByFieldName:function(){return this.lastOrderByFieldName},getLastOrderByFieldNameStartIndex:function(){return this.orderByFieldNameStartIndex},setLastOrderByDirection:function(e,s){this.orderByDirectionStartIndex=null===e?s.getMaxTokenStringIdx():s.getTokenStringIdx()-e.length,this.lastOrderByDirection=e,t[r++]=e},getLastOrderByDirection:function(){return this.lastOrderByDirection},getLastOrderByDirectionStartIndex:function(){return this.orderByDirectionStartIndex},setNeedsField:function(){this.needsOperator=!1,this.needsOperand=!1,this.needsLogicalOperator=!1,this.needsOrderBy=!1,this.needsField=!0,this.needsOrderByField=!1,this.needsOrderByDirection=!1,this.needsListComma=!1,this.needsWasPredicate=!1,this.lastWasOperator=null},getNeedsField:function(){return this.needsField},setNeedsOrderByField:function(){this.needsOperator=!1,this.needsOperand=!1,this.needsLogicalOperator=!1,this.needsOrderBy=!1,this.needsField=!1,this.needsOrderByField=!0,this.needsOrderByDirection=!1,this.lastOrderByDirection=null,this.needsListComma=!1},getNeedsOrderByField:function(){return this.needsOrderByField},setNeedsOrderByDirection:function(){this.needsOperator=!1,this.needsOperand=!1,this.needsLogicalOperator=!1,this.needsOrderBy=!1,this.needsField=!1,this.needsOrderByField=!1,this.needsOrderByDirection=!0,this.needsListComma=!1},getNeedsOrderByDirection:function(){return this.needsOrderByDirection},setNeedsOrderByComma:function(){this.needsOperator=!1,this.needsOperand=!1,this.needsLogicalOperator=!1,this.needsOrderBy=!1,this.needsField=!1,this.needsOrderByField=!1,this.needsOrderByDirection=!1,this.needsListComma=!1},setNeedsListComma:function(){this.needsOperator=!1,this.needsOperand=!1,this.needsLogicalOperator=!1,this.needsOrderBy=!1,this.needsField=!1,this.needsOrderByField=!1,this.needsOrderByDirection=!1,this.needsListComma=!0},getNeedsListComma:function(){return this.needsListComma},setLastOperator:function(e,s){this.lastOperator=e,this.operatorStartIndex=s,t[r++]=e},setLastWasOperator:function(e){this.lastWasOperator=e},getLastWasOperator:function(){return this.lastWasOperator},getLastOperator:function(){return this.lastOperator},getLastOperatorStartIndex:function(){return this.operatorStartIndex},setLastOperand:function(s,a){this.operandStartIndex=null===s?a.getMaxTokenStringIdx():a.getTokenStringIdx()-s.length,this.lastOperand=e.getUnquotedString(s),t[r++]=s},getLastOperand:function(){return this.lastOperand},setNeedsOperand:function(){this.needsField=!1,this.needsOperator=!1,this.needsLogicalOperator=!1,this.needsOperand=!0,this.needsOrderBy=!1,this.needsOrderByField=!1,this.needsOrderByDirection=!1,this.needsListComma=!1},setNeedsOperandOrOperator:function(){this.needsField=!1,this.needsOperator=!0,this.needsLogicalOperator=!1,this.needsOperand=!0,this.needsOrderBy=!1,this.needsOrderByField=!1,this.needsOrderByDirection=!1,this.needsListComma=!1},getNeedsOperand:function(){return this.needsOperand},setNeedsPredicateOperand:function(){this.needsPredicateOperand=!0,this.needsLogicalOperator=!1,this.needsOrderBy=!1},resetNeedsPredicateOperand:function(){this.needsPredicateOperand=!1,this.needsOperand=!1},getNeedsPredicateOperand:function(){return this.needsPredicateOperand},getLastOperandStartIndex:function(){return this.operandStartIndex},setLastOperandStartIndex:function(e){this.operandStartIndex=e},setLastLogicalOperator:function(e,s){this.lastLogicalOperator=e,this.logicalOperatorStartIndex=s,t[r++]=e},setNeedsOperator:function(){this.needsField=!1,this.needsOperand=!1,this.needsLogicalOperator=!1,this.needsOrderBy=!1,this.needsOperator=!0,this.needsOrderByField=!1,this.needsOrderByDirection=!1,this.needsListComma=!1},getNeedsOperatorOrOperand:function(){return this.needsOperator&&this.needsOperand},getNeedsOperator:function(){return this.needsOperator},getLastLogicalOperator:function(){return this.lastLogicalOperator},getLastLogicalOperatorStartIndex:function(){return this.logicalOperatorStartIndex},setNeedsLogicalOperator:function(e){this.needsLogicalOperator=!0,this.needsOperator=!1,this.needsOperand=!1,this.needsField=!1,this.needsOrderByField=!1,this.needsOrderByDirection=!1,this.needsListComma=!1,this.needsOrderBy=!e.getInParens(),null!=this.lastWasOperator&&(this.needsWasPredicate=!0)},setNeedsOpenParen:function(e){this.needsOpenParen=e},getNeedsOpenParen:function(){return this.needsOpenParen},getNeedsLogicalOperator:function(){return this.needsLogicalOperator},setNeedsOrderBy:function(e){this.needsOrderBy=e},getNeedsOrderBy:function(){return this.needsOrderBy},getNeedsWasPredicate:function(){return this.needsWasPredicate},setLastWasPredicate:function(e,s){this.wasPredicateStartIndex=null===e?s.getMaxTokenStringIdx():s.getTokenStringIdx()-e.length,this.lastWasPredicate=e,t[r++]=e},getLastWasPredicate:function(){return this.lastWasPredicate},resetLastPredicates:function(){this.lastLogicalOperator=null,this.lastWasPredicate=null,this.lastOperand=null,this.wasPredicateStartIndex=null,this.operandStartIndex=null},getLastWasPredicateStartIndex:function(){return this.wasPredicateStartIndex},setLastOrderBy:function(e,s){this.orderByStartIndex=null===e?s.getMaxTokenStringIdx():s.getTokenStringIdx()-e.length,this.lastOrderBy=e,t[r++]=e},getLastOrderBy:function(){return this.lastOrderBy},getLastOrderByStartIndex:function(){return this.orderByStartIndex},resetLogicalOperators:function(){this.lastLogicalOperator=null,this.logicalOperatorStartIndex=null,this.needsLogicalOperator=null},getUnquotedString:function(t){e.getUnquotedString(t)},setParseError:function(e){this.parseError=!0,this.parseErrorMsg=e},getParseError:function(){return this.parseError},getParseErrorMsg:function(){return this.parseErrorMsg},setNeedsNothing:function(){this.needsOperator=!1,this.needsOperand=!1,this.needsLogicalOperator=!1,this.needsOrderBy=!1,this.needsField=!1,this.needsOrderByField=!1,this.needsOrderByDirection=!1,this.needsOpenParen=!1,this.needsListComma=!1,this.needsWasPredicate=null,this.needsPredicateOperand=null,this.mustBeOperatorOrPredicate=null,this.lastWasOperator=null},setOperandComplete:function(){this.operandComplete=!0},getOperandComplete:function(){return this.operandComplete},setInsideList:function(e){this.insideList=e},isInsideList:function(){return this.insideList},setMustBeOperatorOrPredicate:function(e){this.mustBeOperatorOrPredicate=e},getMustBeOperatorOrPredicate:function(){return this.mustBeOperatorOrPredicate},getIsInSubmittableState:function(){return 0===t.length||1===t.length&&null===t[0]||this.getNeedsLogicalOperator()||this.getNeedsOrderBy()||this.getNeedsOrderByDirection()},resetTerminalClause:function(){this.lastFieldName=null,this.fieldNameStartIndex=null,this.needsField=null,this.lastOperator=null,this.operatorStartIndex=null,this.needsOperator=null,this.lastOperand=null,this.operandStartIndex=null,this.needsOperand=null,this.operandComplete=null,this.needsOpenParen=null,this.needsListComma=!1,this.mustBeOperatorOrPredicate=null},init:function(){this.lastFieldName=null,this.fieldNameStartIndex=null,this.needsField=null,this.lastOperator=null,this.operatorStartIndex=null,this.needsOperator=null,this.lastOperand=null,this.operandStartIndex=null,this.needsOperand=null,this.lastLogicalOperator=null,this.logicalOperatorStartIndex=null,this.lastOrderByFieldName=null,this.lastOrderByFieldNameStartIndex=null,this.lastOrderByDirection=null,this.lastOrderByDirectionStartIndex=null,this.orderByStartIndex=null,this.lastOrderBy=null,this.needsOrderBy=null,this.needsOrderByField=null,this.needsOrderByDirection=null,this.operandComplete=null,this.needsOpenParen=null,this.needsListComma=null,this.wasPredicateStartIndex=null,this.lastWasPredicate=null,this.needsWasPredicate=null,this.needsPredicateOperand=null,this.mustBeOperatorOrPredicate=null,this.lastWasOperator=null,this.insideList=null,this.setNeedsField()}}}}),define("jira/jql/jql-parse-token",["jira/jql/jql-parse-result"],function(e){"use strict";return function(){return{init:function(t){this.tokenStringIdx=0,this.tokenString=t,this.parseError=!1,this.parseErrorMsg=null,this.result=e(),this.result.init(),this.inParens=0,this.inListParens=0},consumeCharacter:function(){this.tokenStringIdx++},consumeCharacters:function(e){this.tokenStringIdx=this.tokenStringIdx+e},backTrackToIdx:function(e){this.tokenStringIdx=e,this.parseError=!1,this.parseErrorMsg=null,this.result.parseError=!1,this.result.parseErrorMsg=null},getTokenStringIdx:function(){return this.tokenStringIdx},currentCharacter:function(){return this.tokenStringIdx>=this.tokenString.length?null:this.tokenString.charAt(this.tokenStringIdx)},remainingString:function(){return this.tokenStringIdx>=this.tokenString.length?null:this.tokenString.substr(this.tokenStringIdx,this.tokenString.length)},getMaxTokenStringIdx:function(){return this.tokenString.length},isComplete:function(){return!!this.parseError||this.tokenStringIdx>=this.tokenString.length},setInParens:function(){this.inParens++},setOutOfParens:function(){0!==this.inParens&&this.inParens--},getInParens:function(){return 0!==this.inParens},setInListParens:function(){this.inListParens++},setOutOfListParens:function(){this.inListParens>0&&this.inListParens--},getInListParens:function(){return this.inListParens>0},setParseError:function(){this.parseError=!0;var e=this.tokenStringIdx-9<0?0:this.tokenStringIdx-9,t=this.tokenString.substring(e,this.tokenStringIdx-1);this.result.setParseError("..."+t+"^"+this.tokenString.substring(this.tokenStringIdx,this.tokenString.length))},getParseError:function(){return this.parseError},calcLastOperandStartIndex:function(){var e=this.getResult(),t=e.getLastOperator();if(t.length>0){var r=t.length-t.replace(/\s+/g,"").length;e.setLastOperandStartIndex(e.getLastOperatorStartIndex()+t.length+r+1)}},getParsedOperator:function(){var e=this.getResult();return e.getLastOperator().length>0?this.tokenString.substr(e.getLastOperatorStartIndex()):null},getResult:function(){return this.result}}}}),AJS.namespace("jira.widget.autocomplete.JQL",null,require("jira/autocomplete/jql-autocomplete")),AJS.namespace("JIRA.JQLAutoComplete",null,require("jira/autocomplete/jql-autocomplete")),AJS.namespace("JIRA.JQLAutoComplete.MyParser",null,require("jira/jql/jql-parser")),AJS.namespace("JIRA.JQLAutoComplete.ParseResult",null,require("jira/jql/jql-parse-result")),AJS.namespace("JIRA.JQLAutoComplete.Token",null,require("jira/jql/jql-parse-token"));;
;
/* module-key = 'jira.webresources:jqlautocomplete', location = '/includes/jira/autocomplete/initJQLAutoComplete.js' */
!function(){"use strict";var e=require("jira/autocomplete/jql-autocomplete"),r=require("jira/jql/jql-parser"),t=require("jira/util/forms"),i=require("jira/util/key-code"),l=require("jquery");l(function(){l(".jql-autocomplete-params").each(function(){var n={};l(this).find("input").each(function(){var e=l(this);n[e.attr("id")]=e.val()});var o=JSON.parse(l("#jqlFieldz").text()),a=JSON.parse(l("#jqlFunctionNamez").text()),u=JSON.parse(l("#jqlReservedWordz").text()),s=e({fieldID:"jqltext",parser:r(u),queryDelay:.65,jqlFieldNames:o,jqlFunctionNames:a,minQueryLength:0,allowArrowCarousel:!0,errorID:"jqlerrormsg"}),d=l("#jqltext");d.unbind("keypress",t.submitOnEnter).keypress(function(e){if(null===s.dropdownController||!s.dropdownController.displayed||s.selectedIndex<0)return!(e.keyCode===i.ENTER&&!e.ctrlKey&&!e.shiftKey)||(l("#jqlform").submit(),!1)}),s.buildResponseContainer(),s.parse(d.text()),s.updateColumnLineCount()})})}();;
;
/* module-key = 'com.atlassian.labs.hipchat.hipchat-for-jira-plugin:amd', location = 'js/lib/amd/jira/jira-components-query-amd.js' */
define("hipchat/jira/query-component",function(){return JIRA.Components.Query});;
;
/* module-key = 'com.atlassian.labs.hipchat.hipchat-for-jira-plugin:amd', location = 'js/lib/amd/jira/jira-issues-amd.js' */
define("hipchat/jira/issues/searcher-collection",function(){return JIRA.Issues.SearcherCollection});define("hipchat/jira/issues/query-state-model",function(){return JIRA.Issues.QueryStateModel});define("hipchat/jira/issues/criteria-model",function(){return JIRA.Issues.CriteriaModel});define("hipchat/jira/issues/criteria-view",function(){return JIRA.Issues.CriteriaView});;
;
/* module-key = 'com.atlassian.labs.hipchat.hipchat-for-jira-plugin:amd', location = 'js/lib/amd/hipchat-scopes-provider-amd.js' */
define("hipchat/scopes-provider",function(){return HipChat.ScopesProvider});;
;
/* module-key = 'com.atlassian.labs.hipchat.hipchat-for-jira-plugin:notification-jql-resources', location = 'js/jql-autocomplete.js' */
require(["jquery","jira/autocomplete/jql-autocomplete","jira/jql/jql-parser","wrm/context-path"],function(f,e,h,a){function b(){f(".hipchat-jql-loading").show()}function c(){f(".hipchat-jql-loading").hide()}function d(){return f.ajax({url:a()+"/rest/api/2/jql/autocompletedata",type:"GET"})}function g(i){b();d().done(function(q){var j=i.fieldID;var m=i.errorID;var n=f("#"+j);var l=q.visibleFieldNames||[];var o=q.visibleFunctionNames||[];var p=q.jqlReservedWords||[];var k=e({fieldID:j,parser:h(p),queryDelay:0.65,jqlFieldNames:l,jqlFunctionNames:o,minQueryLength:0,allowArrowCarousel:true,autoSelectFirst:false,errorID:m})}).always(function(){c()})}AJS.toInit(function(){var i=f("#hipchat-jql-text");if(i.length){g({fieldID:"hipchat-jql-text",errorID:"hipchat-jql-error"})}})});;
;
/* module-key = 'com.atlassian.labs.hipchat.hipchat-for-jira-plugin:notification-preview-resources', location = 'js/notification-preview.js' */
require(["jquery","jira/lib/class","wrm/context-path"],function(d,b,a){var c=b.extend({TIMEOUT_MS:100,init:function(f){var e=this;this.$source=f.source;this.$preview=f.preview;this.lastSourceValue=this.$source.val();this.$preview.html(JIRA.Templates.HipChat.Notification.notificationPreview());this.$previewMessage=this.$preview.find(".message");this.$source.focus(d.proxy(this._bindSourceHook,this));this.$source.blur(d.proxy(this._unbindHook,this));this.$source.bind("contentModified",function(){e.renderPreview()});this.renderPreview()},renderPreview:function(){var e=this,f=this.$source.val();d.ajax({url:a()+"/rest/hipchat/integrations/1.0/message/render",type:"POST",contentType:"application/json",data:JSON.stringify({message:f})}).done(function(g){e.$previewMessage.html(g.message)})},onSourceTimeout:function(){var e=this.$source.val();if(e!==this.lastSourceValue){this.renderPreview();this.lastSourceValue=e}},_bindSourceHook:function(f){this._bindHook(f,this.onSourceTimeout)},_bindHook:function(j,h){var f=this,g=d(j.target),i;i=function(){f._unbindHook(j);h.apply(f);if(g.is(":visible")){g.data("checkHook",setTimeout(i,f.TIMEOUT_MS))}};if(!g.data("checkHook")){g.data("checkHook",setTimeout(i,0))}},_unbindHook:function(g){var f=d(g.target);clearTimeout(f.data("checkHook"));f.removeData("checkHook")}});AJS.toInit(function(){var e=d(".hipchat-notification-preview-source");if(e.length){new c({source:e,preview:d(".hipchat-notification-preview")})}})});;
;
/* module-key = 'com.atlassian.labs.hipchat.hipchat-for-jira-plugin:notification-preview-resources', location = 'soy/notification/notification-preview.soy' */
// This file was automatically generated from notification-preview.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.HipChat.Notification.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.HipChat == 'undefined') { JIRA.Templates.HipChat = {}; }
if (typeof JIRA.Templates.HipChat.Notification == 'undefined') { JIRA.Templates.HipChat.Notification = {}; }


JIRA.Templates.HipChat.Notification.notificationPreview = function(opt_data, opt_ignored) {
  return '<div class="systemMessage chatBlock systemMessage-"><table width="100%" cellspacing="0" cellpadding="0"><tbody><tr><td class="nameBlock"><p style="margin-top: 0;">JIRA</p></td><td class="messageBlock"><p class="timeBlock">12:00 PM</p><div class="message"></div></td></tr></tbody></table></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.HipChat.Notification.notificationPreview.soyTemplateName = 'JIRA.Templates.HipChat.Notification.notificationPreview';
}
;
;
/* module-key = 'com.atlassian.labs.hipchat.hipchat-for-jira-plugin:notification-preview-resources', location = 'js/notification-editor.js' */
require(["jquery","jira/lib/class"],function(c,b){var a=b.extend({init:function(e){var d=this;d.$editor=e.editor;d.$toolbar=e.toolbar;d.$toolbar.find(".aui-button").tooltip().click(function(g){g.preventDefault();c(this).tooltip("hide");var f=c(this).attr("data-macro");if(f){d.insertMacro("$"+f);d.$editor.trigger("contentModified");d.$editor.focus()}})},insertMacro:function(f){var e=this._rawInputValue(),d=this._getCaretPosition(),g=e.substr(0,d).replace(/\r\n/g,"\n"),h=e.substr(d);if(g.length!==0){f=" "+f}this._rawInputValue([g,f,h].join(""));this._setCursorPosition(g.length+f.length)},_setCursorPosition:function(f){var e=this.$editor.get(0);if(e.setSelectionRange){e.focus();e.setSelectionRange(f,f)}else{if(e.createTextRange){var d=e.createTextRange();d.collapse(true);d.moveEnd("character",f);d.moveStart("character",f);d.select()}}},_getCaretPosition:function(){var g=this.$editor.get(0);var e=this._rawInputValue();var i,d,j,h,f;if(typeof g.selectionStart==="number"){return g.selectionStart}if(document.selection&&g.createTextRange){d=document.selection.createRange();if(d){f=g.createTextRange();f.moveToBookmark(d.getBookmark());if(f.compareEndPoints("StartToEnd",g.createTextRange())>=0){return e.length}else{h=e.replace(/\r\n/g,"\n");j=f.moveStart("character",-e.length);i=h.slice(0,-j).split("\n").length-1;return i-j}}else{return e.length}}return 0},_rawInputValue:function(){var d=this.$editor.get(0);if(typeof arguments[0]==="string"){d.value=arguments[0]}return d.value}});AJS.toInit(function(){var d=c(".hipchat-notification-editor");if(d.length){new a({editor:d,toolbar:c(".hipchat-notification-editor-toolbar")})}})});;
;
/* module-key = 'com.atlassian.auiplugin:split_aui.deprecated.behaviour.cookie', location = 'aui.chunk.ec929b657a8e24a5a777--1a348e884d4b485cada8.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.deprecated.behaviour.cookie"],{"N/qQ":function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var t=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r.default=e,r}(n("qHho"));r.default=t,e.exports=r.default},qHho:function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.save=r.read=r.erase=void 0;var t=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r.default=e,r}(n("bPPT")),a=function(e){return e&&e.__esModule?e:{default:e}}(n("KloK"));var o="AJS.conglomerate.cookie",u=/(\\|^"|"$)/g,i=/\|\|+/g,c=/"/g,l=/[.*+?|^$()[\]{\\]/g;function f(e){return e.replace(l,"\\$&")}function s(e){var r=new RegExp("\\b"+f(e)+"=((?:[^\\\\;]+|\\\\.)*)(?:;|$)"),n=document.cookie.match(r);return n&&function(e){return e.replace(u,"")}(n[1])}function p(e,r,n){var t=s(o);t=function(e,r,n){var t=new RegExp("(\\s|\\|)*\\b"+f(e)+"=[^|]*[|]*");if(n=(n=n||"").replace(t,"|"),""!==r){var a=e+"="+r;n.length+a.length<4020&&(n+="|"+a)}return n.replace(i,"|")}(e,r,t),function(e,r,n){var t,a="",o='"'+r.replace(c,'\\"')+'"';n&&((t=new Date).setTime(+t+24*n*60*60*1e3),a="; expires="+t.toGMTString()),document.cookie=e+"="+o+a+";path=/"}(o,t,n||365)}function d(e,r){var n=function(e,r){r=r||"";var n=new RegExp(f(e)+"=([^|]+)"),t=r.match(n);return t&&t[1]}(e,s(o));return null!=n?n:r}function v(e){p(e,"")}var h={erase:v,read:d,save:p};(0,a.default)("cookie",h),(0,a.default)("Cookie",h),t.prop(AJS,"Cookie",{alternativeName:"cookie",sinceVersion:"5.8.0"}),r.erase=v,r.read=d,r.save=p}},[["N/qQ","runtime","aui.splitchunk.172ffb6da7","aui.splitchunk.087aba7911","aui.splitchunk.fbd1a5ab27","aui.splitchunk.54d3f16c20"]]]);
//# sourceMappingURL=aui.chunk.ec929b657a8e24a5a777--1a348e884d4b485cada8.js.map;
;
/* module-key = 'com.atlassian.labs.hipchat.hipchat-for-jira-plugin:update-plugin-banner-resources', location = 'js/banner/update-hipchat-link-banner.js' */
require(["jquery","jira/flag","jira/util/users/logged-in-user","wrm/context-path"],function(d,b,e,a){var c=AJS.Cookie;AJS.toInit(function(){var i="HIPCHAT_ADMIN_BANNER_DISMISS_2";var g;if(!h()&&e.isAdmin()&&!k()){d.ajax({url:a()+"/rest/hipchat/integrations/1.0/configuration/status",dataType:"json",cache:false}).done(function(m){if(m.installationCheckResult.required||m.v1){g=f(m)}})}function f(o){var n=JIRA.Templates.HipChat.Banner.updateHipChatLink({removeV1link:!o.v2&&o.v1,reinstallationDiscoveryTitle:o.installationCheckResult.discoveryTitle,reinstallationDiscoveryText:o.installationCheckResult.discoveryText});var m=b.showWarningMsg(null,n);d(document).on("click","#remove-hipchat-v1-link",l);d(document).on("aui-flag-close",".aui-flag",j);return m}function h(){return window.location.toString().indexOf("/plugins/servlet/hipchat/configure")>0}function j(m){if(d(m.target).find(".hipchat-update-banner").length>0){c.save(i,true)}}function k(){return c.read(i)=="true"}function l(m){m.preventDefault();d.ajax({url:a()+"/rest/hipchat/integrations/1.0/configuration/v1",cache:false,type:"DELETE"}).error(function(n){if(g){g.hide()}b.showErrorMsg(null,AJS.format("We couldn\'\'t find your integration. If the problem persists, contact Atlassian Support.\u003cbr/\u003e Error Status [{0}]",n.status))}).done(function(n){if(g){g.hide()}b.showSuccessMsg(null,"Integration has been removed successfully")})}})});;
;
/* module-key = 'com.atlassian.labs.hipchat.hipchat-for-jira-plugin:update-plugin-banner-resources', location = 'soy/banner/update-hipchat-link-banner.soy' */
// This file was automatically generated from update-hipchat-link-banner.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.HipChat.Banner.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.HipChat == 'undefined') { JIRA.Templates.HipChat = {}; }
if (typeof JIRA.Templates.HipChat.Banner == 'undefined') { JIRA.Templates.HipChat.Banner = {}; }


JIRA.Templates.HipChat.Banner.updateHipChatLink = function(opt_data, opt_ignored) {
  return '<div class="hipchat-update-banner"><b>' + soy.$$escapeHtml(opt_data.reinstallationDiscoveryTitle) + '</b><p>' + soy.$$escapeHtml(opt_data.reinstallationDiscoveryText) + '</p><p/><a href="' + soy.$$escapeHtml("" + '/plugins/servlet/hipchat/configure') + '">' + soy.$$escapeHtml('Update Now!') + '</a>' + ((opt_data.removeV1link) ? '<a id="remove-hipchat-v1-link">' + soy.$$escapeHtml('Remove Integration') + '</a>' : '') + '</div>';
};
if (goog.DEBUG) {
  JIRA.Templates.HipChat.Banner.updateHipChatLink.soyTemplateName = 'JIRA.Templates.HipChat.Banner.updateHipChatLink';
}
;
;
/* module-key = 'com.atlassian.feedback.jira-feedback-plugin:button-resources-init', location = '/js/feedback-dialog-init.js' */
require(["jquery","jira/loading/loading","wrm/require"],function(n,i,e){"use strict";function o(){t=!0,AJS.dim(),i.showLoadingIndicator()}function r(n){t=!1,n&&AJS.dim.$dim.css("transition","none"),AJS.undim(),n&&AJS.dim.$dim&&AJS.dim.$dim.css("transition",""),i.hideLoadingIndicator()}var t=!1;n(document).on("click",".jira-feedback-plugin",function(n){n.preventDefault(),t||(o(),e(["wr!com.atlassian.feedback.jira-feedback-plugin:button-resources"]).done(function(){require("jira/feedback/feedback-dialog").show().then(function(){return r(!0)},function(n){console.error("Something went wrong in an attempt to show the issue collector dialog",n),r(!1)})}).fail(function(n){console.error("Something went wrong when loading feedback plugin resources",n),r(!1)}))})});;
;
/* module-key = 'com.atlassian.jira.jira-header-plugin:admin-quicksearch-link', location = 'js/init-admin-quicksearch-link.js' */
require(["jquery","jira/shifter"],function(e,n){e(document).on("click","#admin-search-link",function(e){n.show(),e.preventDefault()})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-admin-helper-plugin:dialog-resources', location = 'js/dialog.js' */
define("jira/admin-helper/dialog",["jquery","jira/dialog/dialog","jira/focus/set-focus"],function(c,a,b){return a.extend({_getDefaultOptions:function(){return c.extend(this._super(),{cached:false,widthClass:"large",stacked:true})},defineResources:function(){this._super();this.requireResource("com.atlassian.jira.plugins.jira-admin-helper-plugin:whereismycf-resources")},decorateContent:function(){var d=this;this.get$popupContent().find(".cancel").click(function(f){d.hide();f.preventDefault()})},_onShowContent:function(){this._super();if(a.current===this){var d=new b.FocusConfiguration();d.context=this.get$popup()[0];d.parentElementSelectors=[".form-body"];b.pushConfiguration(d);b.triggerFocus()}},hide:function(d){if(this._super(d)===false){return false}b.popConfiguration()}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-admin-helper-plugin:dialog-resources', location = 'js/notification-helper-init.js' */
require(["jquery","jira/admin-helper/dialog","jira/util/data/meta"],function(c,a,b){if(b.get("is-admin")){c(document).delegate(".notificationhelper-trigger","click",function(e){e.preventDefault();new a({id:"notification-helper-dialog",content:function d(g){var f=this;require(["jira/admin-helper/notification-helper/content-loader"],function(h){h.loadContent(f,g)})}}).show()})}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-admin-helper-plugin:dialog-resources', location = 'js/permission-helper-init.js' */
require(["jquery","jira/admin-helper/dialog","jira/util/data/meta"],function(c,a,b){if(b.get("is-admin")){c(document).delegate(".permissionhelper-trigger","click",function(e){e.preventDefault();new a({id:"permission-helper-dialog",content:function d(g){var f=this;require(["jira/admin-helper/permission-helper/content-loader"],function(h){h.loadContent(f,g)})}}).show()})}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-admin-helper-plugin:dialog-resources', location = 'js/whereismycf-init.js' */
require(["jquery","jira/admin-helper/dialog","jira/util/data/meta","jira/dialog/dialog"],function(e,a,d,b){if(d.get("is-admin")){var c="Where is my field?";e(document).delegate(".whereismycf-trigger","click",function(g){g.preventDefault();new a({id:"whereismycf-dialog",content:function f(i){var h=this;require(["jira/admin-helper/whereismycf/content-loader"],function(j){j.loadContentForView(h,i)})}}).show()});e(document).bind("showLayer",function(g,i,h){if(i=="inlineDialog"&&h.popup.attr("id")=="inline-dialog-field_picker_popup"){if(h.popup.find(".whereismycf-qfpicker-link").length==0){var f=e("<a href='#' class='whereismycf-qfpicker-link'>"+c+"</a>").appendTo(h.popup.find(".qf-picker-header dl"));f.click(function(l){l.preventDefault();h.hide();var j=b.current;new a({id:"whereismycf-dialog",content:function k(n){var m=this;require(["jira/admin-helper/whereismycf/content-loader"],function(o){o.loadContentForEditAndCreate(m,j,n)})}}).show()})}}})}});;
;
/* module-key = 'com.atlassian.auiplugin:split_aui.pattern.help', location = 'aui.chunk.97b0b8778b1dab612048--f0ebc3ce920a8bb3519d.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.pattern.help"],{EoRc:function(i,u,n){},H4sa:function(i,u,n){"use strict";n("FStl"),n("Q0fs"),n("nqD9"),n("0FWE"),n("VtiI"),n("EoRc")}},[["H4sa","runtime","aui.splitchunk.vendors--7da3927366","aui.splitchunk.b0831cc7d0","aui.splitchunk.572a8bf5cd","aui.splitchunk.d49cf794d2","aui.splitchunk.d925afe2c0","aui.splitchunk.d727dd207f","aui.splitchunk.7da3927366"]]]);
//# sourceMappingURL=aui.chunk.97b0b8778b1dab612048--f0ebc3ce920a8bb3519d.js.map;
;
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:analytics', location = 'util/analytics.js' */
define("jira-help-tips/util/analytics",["jira/analytics"],function(t){"use strict";function e(t){return t=""+(t||""),t.replace(/\./g,"-")}function i(i,n){if(n&&n.attributes.id){var r={},a=e(n.attributes.id),s="";n.attributes.eventPrefix&&(s=n.attributes.eventPrefix,"."!==s.charAt(s.length-1)&&(s+=".")),r.name=s+"helptips."+a+"."+i,r.properties={},t.send(r)}}return{clean:e,send:i}});;
;
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager', location = 'js/HelpTipManager.js' */
define("jira-help-tips/feature/help-tip-manager",["require"],function(s){"use strict";var e=s("underscore"),i=s("jquery"),t=s("jira/jquery/deferred"),n=s("wrm/context-path"),r=s("wrm/data"),d=n()+"/rest/helptips/1.0/tips",u=r.claim("com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager.JiraHelpTipData");return{dismissedTipIds:[],sequences:[],loaded:new t,url:function(){return d},sync:function(s,e){var n=new t;return s||(s="get"),e||(e=null),"get"===s&&u&&u.dismissed?n.resolve(u.dismissed):i.ajax(this.url(),{type:s,dataType:"json",contentType:"application/json",data:e&&JSON.stringify(e),processData:!1}).done(function(s){n.resolve(s)}).fail(function(){n.reject()}),n.promise()},fetch:function(){var s=this.sync();return s.done(i.proxy(function(s){i.merge(this.dismissedTipIds,s),this.loaded.resolve()},this)),s.promise()},show:function(s){this.loaded.done(s)},dismiss:function(s){var e=s.attributes.id;e?(this.dismissedTipIds.push(e),this.sync("post",{id:e})):s._dismissed=!0},undismiss:function(s){var e=s.attributes.id;e?(this.dismissedTipIds.splice(i.inArray(e,this.dismissedTipIds),1),this.sync("delete",{id:e})):s._dismissed=!1},isDismissed:function(s){var e=s.attributes.id;return e?i.inArray(e,this.dismissedTipIds)>=0:s._dismissed},clearSequences:function(){this.sequences=[]},hideSequences:function(){e.each(this.sequences,function(s){s.view.dismiss()})},showSequences:function(){if(!this._showStarted){var s=this,t=0;this._showStarted=!0,i.when(this.loaded).done(function(){s.sequences.sort(function(s,e){return s.attributes.weight-e.attributes.weight}),s.sequences=e.filter(s.sequences,function(i){var n=-1===e.indexOf(s.dismissedTipIds,i.attributes.id);return n&&(i.attributes.position=t++),n}),s.sequences.length>0&&(e.last(s.sequences).attributes.showCloseButton=!0,s.sequences[0].show({force:!0})),s._showStarted=!1})}}}});;
;
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:help-tip', location = 'templates/HelpTip.soy' */
// This file was automatically generated from HelpTip.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace AJS.Templates.HelpTip.
 */

if (typeof AJS == 'undefined') { var AJS = {}; }
if (typeof AJS.Templates == 'undefined') { AJS.Templates = {}; }
if (typeof AJS.Templates.HelpTip == 'undefined') { AJS.Templates.HelpTip = {}; }


AJS.Templates.HelpTip.tipContent = function(opt_data, opt_ignored) {
  return ((opt_data.title) ? '<h2 class="helptip-title">' + soy.$$escapeHtml(opt_data.title) + '</h2>' : '') + '<p class="helptip-body">' + soy.$$filterNoAutoescape(opt_data.bodyHtml) + '</p>' + ((opt_data.url) ? '<p><a class="helptip-link" href="' + soy.$$escapeHtml(opt_data.url) + '" target="_blank">' + ((opt_data.linkText) ? soy.$$escapeHtml(opt_data.linkText) : soy.$$escapeHtml('Learn more')) + '</a></p>' : '') + AJS.Templates.HelpTip.tipFooter(opt_data);
};
if (goog.DEBUG) {
  AJS.Templates.HelpTip.tipContent.soyTemplateName = 'AJS.Templates.HelpTip.tipContent';
}


AJS.Templates.HelpTip.tipFooter = function(opt_data, opt_ignored) {
  return '<form class="tip-footer">' + AJS.Templates.HelpTip.nextButton(opt_data) + AJS.Templates.HelpTip.closeButton(opt_data) + AJS.Templates.HelpTip.sequencePaging(opt_data) + '</form>';
};
if (goog.DEBUG) {
  AJS.Templates.HelpTip.tipFooter.soyTemplateName = 'AJS.Templates.HelpTip.tipFooter';
}


AJS.Templates.HelpTip.nextButton = function(opt_data, opt_ignored) {
  return '' + ((opt_data.showNextButton) ? '<button class="aui-button helptip-next" type="button">' + ((opt_data.nextButtonText) ? soy.$$escapeHtml(opt_data.nextButtonText) : soy.$$escapeHtml('Next')) + '</button>' : '');
};
if (goog.DEBUG) {
  AJS.Templates.HelpTip.nextButton.soyTemplateName = 'AJS.Templates.HelpTip.nextButton';
}


AJS.Templates.HelpTip.closeButton = function(opt_data, opt_ignored) {
  return '' + ((opt_data.showCloseButton) ? '<button class="aui-button ' + ((opt_data.showNextButton) ? ' aui-button-link ' : '') + ' helptip-close" type="button">' + ((opt_data.closeButtonText) ? soy.$$escapeHtml(opt_data.closeButtonText) : soy.$$escapeHtml('Close')) + '</button>' : '');
};
if (goog.DEBUG) {
  AJS.Templates.HelpTip.closeButton.soyTemplateName = 'AJS.Templates.HelpTip.closeButton';
}


AJS.Templates.HelpTip.sequencePaging = function(opt_data, opt_ignored) {
  return '' + ((opt_data.isSequence && opt_data.length > 1) ? '<span class="helptip-sequence-paging">' + soy.$$escapeHtml(opt_data.position + 1) + '/' + soy.$$escapeHtml(opt_data.length) + '</span>' : '');
};
if (goog.DEBUG) {
  AJS.Templates.HelpTip.sequencePaging.soyTemplateName = 'AJS.Templates.HelpTip.sequencePaging';
}
;
;
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:help-tip', location = 'js/HelpTip.js' */
define("jira-help-tips/feature/help-tip",["require"],function(i){"use strict";function t(){return!1}function e(){return!0}function s(){return"jira-help-tip-"+p+d++}var n=i("jquery"),o=i("underscore"),h=i("jira-help-tips/feature/help-tip-manager"),l=i("jira-help-tips/util/analytics"),r=i("aui/inline-dialog"),a=i("jira/jquery/deferred"),u=AJS.Popups,c=AJS.Templates.HelpTip,d=0,p=(new Date).getTime(),f=function(i,t){this.initialize(i,t)},b=function(i){this.initialize(i)},m=function(i){var t;this.attributes=n.extend({},i),this.attributes.id||(this.attributes.id=!1),this.attributes.callbacks||(this.attributes.callbacks={}),this.attributes.isSequence&&(this.attributes.weight||(this.attributes.weight=Number.MAX_VALUE),h.sequences.push(this)),this.attributes.body&&(this.attributes.bodyHtml=this.attributes.body,delete this.attributes.body),this.cid=s(),t=this.attributes.anchor,delete this.attributes.anchor,this.view=t?new f(this,t):new b(this)};return n.extend(m.prototype,{show:function(i){i=i||{};var t=this,e=new a;if(this.attributes.callbacks.beforeShow){var s=this.attributes.callbacks.beforeShow();s&&o.isFunction(s.done)?s.done(e.resolve):e.resolve()}else e.resolve();e.done(function(){h.show(function(){t.isDismissed()||(!i.force&&u&&u.DisplayController?u.DisplayController.request({name:t.id,weight:1e3,show:function(){t.view.show()}}):t.view.show(),l.send("shown",t))})})},dismiss:function(){var i=l.clean(arguments[0]||"programmatically");this.view.dismiss(),"close-button"===i&&this.attributes.isSequence&&h.clearSequences(),this.isDismissed()||(h.dismiss(this),l.send("dismissed."+i,this))},isVisible:function(){return this.view.$el.is(":visible")},isDismissed:function(){return h.isDismissed(this)},refresh:function(){this.isDismissed()||this.view.refresh()},hide:function(){this.isDismissed()||this.view.dismiss()},showNextHelpTipInSequence:function(){this.view.clickNext()}}),n.extend(f.prototype,{initialize:function(i,e){this.model=i,this.anchorSelector=e,this.anchor=n(e),this._initDialog(e),n(document).bind("showLayer",function(e,s,o){"inlineDialog"===s&&o.id===i.cid&&(r.current=null,n(document.body).unbind("click."+i.cid+".inline-dialog-check"),o._validateClickToClose=t,o.hide=t)})},show:function(){this.beforeHide=t,this.popup.show()},refresh:function(){var i=n(this.anchorSelector);i.is(":visible")?i.get(0)!==this.anchor.get(0)?this.changeAnchor(i):this.isVisible()?this.popup.refresh():this.show():this.dismiss()},changeAnchor:function(i){var t=this.isVisible();this.dismiss(),this.$el.remove(),this.anchor=i,this._initDialog(i),t&&this.show()},dismiss:function(){this.beforeHide=e,this._popupHide()},clickNext:function(){var i=n(this.$el).find(".helptip-next");i.length>0&&i.click()},isVisible:function(){return this.$el.is(":visible")},_initDialog:function(i){var e=this,s=this.model;this.popup=new r(n(i),s.cid,o.bind(this._createDialog,this),o.extend({container:"#content",noBind:!0,preHideCallback:function(){return e.beforeHide()},calculatePositions:function(i,t,e,s){var o=r.opts.calculatePositions(i,t,e,s),h=n(this.container),l=h.offset();return"auto"!==o.popupCss.left&&(o.popupCss.left-=l.left,o.popupCss.right="auto"),o.popupCss.top-=l.top,o},addActiveClass:!1,initCallback:s.attributes.callbacks.init,hideCallback:s.attributes.callbacks.hide,persistent:!0},s.attributes.inlineDialogOpts)),this._popupHide=this.popup.hide,this.popup.hide=t,this.$el=n(this.popup[0]),this.$el.addClass("jira-help-tip aui-help")},_createDialog:function(i,t,e){var s=this,r=h.sequences,a=this.model.attributes.position,u=this.model.attributes.isSequence;i.removeClass("contents"),i.html(n(c.tipContent(o.extend({showNextButton:u&&r.length>1&&a+1<r.length,length:r.length,position:a,showCloseButton:!0},this.model.attributes)))),i.unbind("mouseover mouseout"),i.find(".helptip-link").click(function(){l.send("learn-more.clicked",s.model)}),i.find(".helptip-close").click(function(i){i.preventDefault(),s.model.dismiss("close-button")}),i.find(".helptip-next").click(function(i){i.preventDefault(),s.model.dismiss("next-button");var t=a+1;r[t]&&r[t].show({force:!0})}),e()}}),n.extend(b.prototype,{initialize:function(){this.$el=n("<div></div>"),this.$el.addClass("jira-help-tip aui-help")},show:function(){},dismiss:function(){}}),m});;
;
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:initialiser', location = 'js/initialiser.js' */
define("jira-help-tips/page/initialiser",["jira-help-tips/feature/help-tip-manager","jira/util/users/logged-in-user","underscore"],function(e,i,n){"use strict";function r(){i.isAnonymous()||e.fetch()}return{init:n.once(r)}});;
;
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:common', location = 'js/legacy.js' */
!function(){"use strict";AJS.namespace("AJS.HelpTip",null,require("jira-help-tips/feature/help-tip")),AJS.namespace("AJS.HelpTip.Manager",null,require("jira-help-tips/feature/help-tip-manager")),require("jira-help-tips/page/initialiser").init()}();;
;
/* module-key = 'com.atlassian.jira.plugins.jira-admin-helper-plugin:admin-helper-nav-resources', location = 'templates/permission-helper-nav.soy' */
// This file was automatically generated from permission-helper-nav.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Nav.PermissionHelper.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Nav == 'undefined') { JIRA.Templates.Nav = {}; }
if (typeof JIRA.Templates.Nav.PermissionHelper == 'undefined') { JIRA.Templates.Nav.PermissionHelper = {}; }


JIRA.Templates.Nav.PermissionHelper.editPermissionsNavButton = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.Nav.PermissionHelper.viewPermissionsNavButton(null);
};
if (goog.DEBUG) {
  JIRA.Templates.Nav.PermissionHelper.editPermissionsNavButton.soyTemplateName = 'JIRA.Templates.Nav.PermissionHelper.editPermissionsNavButton';
}


JIRA.Templates.Nav.PermissionHelper.viewPermissionsNavButton = function(opt_data, opt_ignored) {
  return '<a class="aui-button permissionhelper-trigger" id="permission-helper-button" href="' + soy.$$escapeHtml("") + '/secure/admin/PermissionHelperAdmin.jspa" title="' + soy.$$escapeHtml('Discover why a user does or does not have certain permissions') + '">' + soy.$$escapeHtml('Permission helper') + '</a>';
};
if (goog.DEBUG) {
  JIRA.Templates.Nav.PermissionHelper.viewPermissionsNavButton.soyTemplateName = 'JIRA.Templates.Nav.PermissionHelper.viewPermissionsNavButton';
}


JIRA.Templates.Nav.PermissionHelper.permissionHelperTriggerContainer = function(opt_data, opt_ignored) {
  return '<header class=\'aui-page-header\'><div class=\'aui-page-header-inner\'><div class=\'aui-page-header-actions\'><div class=\'aui-buttons\'></div></div></div></header>';
};
if (goog.DEBUG) {
  JIRA.Templates.Nav.PermissionHelper.permissionHelperTriggerContainer.soyTemplateName = 'JIRA.Templates.Nav.PermissionHelper.permissionHelperTriggerContainer';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-admin-helper-plugin:admin-helper-nav-resources', location = 'js/permission-helper-nav.js' */
require(["jquery","jira/ajs/dark-features","jira/util/data/meta","jira/util/events","jira/util/events/types","jira/util/events/reasons"],function(g,m,e,c,f,d){if(e.get("is-admin")){g(function(){c.bind(f.NEW_CONTENT_ADDED,function(r,q,s){if(j(q,s)){var p=b();p.find(".aui-buttons").append(g(JIRA.Templates.Nav.PermissionHelper.editPermissionsNavButton()));h(g("#permission-helper-button"))}});if(l()){var o=i();o.find(".aui-buttons").append(g(JIRA.Templates.Nav.PermissionHelper.editPermissionsNavButton()));h(g("#permission-helper-button"))}else{if(k()){var n=a();if(n.length==1){n.prepend(g(JIRA.Templates.Nav.PermissionHelper.viewPermissionsNavButton()));h(g("#permission-helper-button"))}}}});function j(n,o){return typeof n!=="undefined"&&typeof n.is==="function"&&n.is(".project-permissions-container")&&o===d.pageLoad}function l(){var n=g("#edit_project_permissions");return(n.length>=1)}function k(){var n=g("#project-config-panel-permissions");return(n.length>=1)}function i(){var n=g(".aui-page-panel-content > header");if(n.length==0){n=g(JIRA.Templates.Nav.PermissionHelper.permissionHelperTriggerContainer());g(".aui-page-panel-content").prepend(n)}return n}function b(){var n=g(".admin-header-actions-plugin-point");var o=g(JIRA.Templates.Nav.PermissionHelper.permissionHelperTriggerContainer());n.prepend(o);return o}function a(){if(m.isEnabled("com.atlassian.jira.config.PDL")){var n=g("#project-config-panel-permissions > .aui-page-header .aui-page-header-actions");var o=n.find(".aui-buttons");return(o.size()>0)?o:n}return g(".project-config-panel-header > .operation-menu")}function h(o){if(AJS.HelpTip){var n=new AJS.HelpTip({id:"permission-helper-helptip",title:"Having trouble?",body:"Use the Permission Helper to discover why a user does or does not have certain permissions.",anchor:o});n.show();g("#permission-helper-helptip").click(function(){AJS.HelpTip.dismiss()});o.click(function(){n.dismiss()})}}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-admin-helper-plugin:admin-helper-nav-resources', location = 'templates/notification-helper-nav.soy' */
// This file was automatically generated from notification-helper-nav.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Nav.NotificationHelper.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Nav == 'undefined') { JIRA.Templates.Nav = {}; }
if (typeof JIRA.Templates.Nav.NotificationHelper == 'undefined') { JIRA.Templates.Nav.NotificationHelper = {}; }


JIRA.Templates.Nav.NotificationHelper.editNotificationsNavButton = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.Nav.NotificationHelper.viewNotificationsNavButton(null);
};
if (goog.DEBUG) {
  JIRA.Templates.Nav.NotificationHelper.editNotificationsNavButton.soyTemplateName = 'JIRA.Templates.Nav.NotificationHelper.editNotificationsNavButton';
}


JIRA.Templates.Nav.NotificationHelper.viewNotificationsNavButton = function(opt_data, opt_ignored) {
  return '<a class="aui-button notificationhelper-trigger" id="notification-helper-button" href="' + soy.$$escapeHtml("") + '/secure/admin/NotificationHelperAdmin.jspa" title="' + soy.$$escapeHtml('Find out why users receive, or do not receive notifications for this issue') + '">' + soy.$$escapeHtml('Notification Helper') + '</a>';
};
if (goog.DEBUG) {
  JIRA.Templates.Nav.NotificationHelper.viewNotificationsNavButton.soyTemplateName = 'JIRA.Templates.Nav.NotificationHelper.viewNotificationsNavButton';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-admin-helper-plugin:admin-helper-nav-resources', location = 'js/notification-helper-nav.js' */
require(["jquery","jira/ajs/dark-features","jira/util/data/meta"],function(g,b,c){if(c.get("is-admin")){g(function(){if(a()){var j=d();j.find(".aui-buttons").append(g(JIRA.Templates.Nav.NotificationHelper.editNotificationsNavButton()));e(AJS.$("#notification-helper-button"))}else{if(f()){var i=h();if(i.length==1){i.prepend(g(JIRA.Templates.Nav.NotificationHelper.viewNotificationsNavButton()));e(g("#notification-helper-button"))}}}});function a(){var i=g("#notificationSchemeTable");return(i.length>=1)}function f(){var i=g("#project-config-notifications-table");return(i.length>=1)}function d(){var i=g(".aui-page-panel-content > header");if(i.length==0){i=g("<header class='aui-page-header'><div class='aui-page-header-inner'><div class='aui-page-header-actions'><div class='aui-buttons'></div></div></div></header>");g(".aui-page-panel-content").prepend(i)}return i}function h(){if(b.isEnabled("com.atlassian.jira.config.PDL")){var i=g("#project-config-panel-notifications > .aui-page-header .aui-page-header-actions");var j=i.find(".aui-buttons");return(j.size()>0)?j:i}return g(".project-config-panel-header > .operation-menu")}function e(j){if(AJS.HelpTip){var i=new AJS.HelpTip({id:"notification-helper-helptip",title:"Having trouble?",body:"Use the Notification Helper to find out why users receive, or do not receive notifications.",anchor:j});i.show();g("#notification-helper-helptip").click(function(){i.dismiss()});j.click(function(){i.dismiss()})}}}});;
;
/* module-key = 'com.atlassian.troubleshooting.plugin-jira:atst-healthchecks-notification', location = 'js/ajs-amd.js' */
define('troubleshooting/ajs', [], function () {
    'use strict';

    return AJS;
});;
;
/* module-key = 'com.atlassian.troubleshooting.plugin-jira:atst-healthchecks-notification', location = 'js/notification.js' */
/* global AJS */
require([
    "jquery",
    "aui/flag",
    "troubleshooting/ajs",
    "troubleshooting/location"
], function ($, flag, AJS, location) {
    'use strict';

    if (location.isOnSupportToolsPage()) {
        // Exit if we are on the ATST screen, we don't want to display healthcheck notification if user browsing on ATST
        return;
    }
    
    var pluginPageUrl =  AJS.contextPath() + '/plugins/servlet/troubleshooting/view';

    AJS.toInit(function () {
        var restBase = AJS.contextPath() + '/rest/troubleshooting/1.0';
        var user = $('meta[name=ajs-remote-user]').attr('content');

        // Initialise the healthcheck notification. Make a GET call to /check/{username} endpoint to get the list of failed check by user
        var initHealthcheckNotification = function () {
            $.getJSON(restBase + '/check/' + user).done(function (statusReport) {
                statusReport.statuses.forEach(function (status) {
                    showNotification(status);
                });

                // Listen to click event to dismiss or snooze notification
                $(document).find('.dismiss-notification').on('click', function () {
                    var $notification = $(this).parents().eq(3);
                    dismissNotification($notification);
                });

                $(document).find('.healthcheck-detail').on('click', function () {
                    var $notification = $(this).parents().eq(3);
                    var application = $notification.attr('application');
                    var severity = $notification.attr('severity');
                    var completeKey = $notification.attr('completeKey');

                    analyticsModule.run("Viewed", completeKey, application, severity);
                    snoozeNotification($notification);
                });
            });
        };

        // Renders the flat notification here, and set the necessary attribute to the flag
        var showNotification = function (status) {

            var healthCheckName = status.name;
            var severity = status.severity;
            var notificationId = status.id;
            var application = status.application;
            var completeKey = status.completeKey;
            var key = completeKey.split(':').pop();

            var flagType = severity === 'warning' ? 'warning' : 'error';
            var healthCheckUrl = pluginPageUrl + '?source=notification&healthCheck=' + key;

            var healthcheckNotification = flag({
                type: flagType,
                body: '<p>' + AJS.format("The {0} health check has failed in your system.", '<strong>' + healthCheckName + '</strong>') + '</p>' +
                    '<ul class="aui-nav-actions-list">' +
                        '<li><a href="' + healthCheckUrl + '" class="healthcheck-detail" target="_self">' + "Find out more" + '</a></li>' +
                        '<li><a href="#" class="dismiss-notification">' + "Don\'t remind me again" + '</a></li>' +
                    '</ul>',
                close: 'manual'
            });

            healthcheckNotification.setAttribute('id', 'healthcheck-notification');
            healthcheckNotification.setAttribute('healthcheck-name', healthCheckName);
            healthcheckNotification.setAttribute('notification-id', notificationId);
            healthcheckNotification.setAttribute('application', application);
            healthcheckNotification.setAttribute('severity', severity);
            healthcheckNotification.setAttribute('completeKey', completeKey);

            healthcheckNotification.addEventListener('aui-flag-close', function () {
                var $notification = $(this);
                snoozeNotification($notification);
            });


            analyticsModule.run('Display', completeKey, application, severity);
        };

        // Called when the "Don’t remind me again" link is clicked. Notifications that are dismissed / marked as read won't reappear to the user anymore
        var dismissNotification = function ($notification) {
            $notification.attr("aria-hidden", "true");

            var id = $notification.attr('notification-id');
            var name = $notification.attr('healthcheck-name');
            var application = $notification.attr('application');
            var severity = $notification.attr('severity');
            var completeKey = $notification.attr('completeKey');

            var data = {};
            data["username"] = user;
            data["notificationId"] = id;
            data["snooze"] = false;

            var jsonData = JSON.stringify(data);

            AJS.$.ajax({
                async: false,
                type: 'POST',
                url: restBase + '/dismissNotification',
                data: jsonData,
                contentType: "application/json",
                dataType: "json",
                success: function () {

                    analyticsModule.run("Dismissed", completeKey, application, severity);
                }
            })
        };

        // Called when the notification is closed via the cross button or if user open the link to the healthcheck
        // A notification is dismissed / marked as read automatically if it snoozes 3 times
        var snoozeNotification = function ($notification) {
            var id = $notification.attr('notification-id');
            var name = $notification.attr('healthcheck-name');
            var application = $notification.attr('application');
            var severity = $notification.attr('severity');
            var completeKey = $notification.attr('completeKey');

            var data = {};
            data["username"] = user;
            data["notificationId"] = id;
            data["snooze"] = true;

            var jsonData = JSON.stringify(data);

            AJS.$.ajax({
                async: false,
                type: 'POST',
                url: restBase + '/dismissNotification',
                data: jsonData,
                contentType: "application/json",
                dataType: "json",
                success: function (data, textStatus, jqXHR) {

                    isAutoDismissed(id, completeKey, name, application, severity);
                    analyticsModule.run("Snoozed", completeKey, application, severity);

                }
            })
        };

        var isAutoDismissed = function (notificationId, completeKey, name, application, severity) {
            var url = restBase + '/dismissNotification/' + user + '/' + notificationId;

            AJS.$.ajax({
                async: false,
                type: 'GET',
                url: url,
                contentType: "text/xml",
                success: function (data, textStatus, jqXHR) {
                    if (jqXHR.status == 200) {
                        notificationAutoDismissed(name);
                        analyticsModule.run("Autodismissed", completeKey, application, severity);
                    }


                }
            });
        };

        // This module allows for us to capture the correct Analytics events per display as per SHC-344.
        var analyticsModule = (function () {
            var lastEvent;
            var event = {};

            event.run = function (action, completeKey, application, severity) {
                if (lastEvent == "Viewed") {
                    // when user views info, we snooze the notification. We only want to record the Viewed AA event.
                    lastEvent = action;
                } else {
                    lastEvent = action;
                    if (action == "Display") {
                        AJS.trigger('analyticsEvent', {
                            name: "healthcheck.notification.display",
                            data: {action: action, name: completeKey, application: application, severity: severity}
                        });
                    } else {
                        AJS.trigger('analyticsEvent', {
                            name: "healthcheck.notification.action",
                            data: {action: action, name: completeKey, application: application, severity: severity}
                        });
                    }
                }
            };
            return event;
        }());

        // This function is called when a notification is automatically marked as read (normally is called when a notification is snoozed 3 times)
        var notificationAutoDismissed = function (healthCheckName) {
            // We set a quick timeout here so the animation will be displayed properly
            setTimeout(function () {
                flag({
                    type: "info",
                    body: "<p>The <strong>" + healthCheckName + "</strong> notification is now dismissed. </p>" +
                    "<p>Please visit <a href='" + AJS.contextPath() + "/plugins/servlet/troubleshooting/view/?source=notification' class='healthcheck-detail' target='_self'>this link</a> for more on the check.</p>",
                    close: "auto"
                });
            }, 1500);
        };

        initHealthcheckNotification();
    });
});;
;
/* module-key = 'com.atlassian.troubleshooting.plugin-jira:atst-healthchecks-notification', location = 'js/shc-location.js' */
define('troubleshooting/location', [], function () {
    return {
        // Get the path name of the current page URL, and returns true if user is on ATST page or false if user is on other admin screens
        isOnSupportToolsPage: function () {
            return window.location.pathname.toLowerCase().indexOf("/troubleshooting/view") >= 0;
        }
    }
});;
;
/* module-key = 'jira.webresources:field-templates', location = '/includes/jira/field/templates/singleUserPicker.soy' */
// This file was automatically generated from singleUserPicker.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Fields.Pickers.User.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Fields == 'undefined') { JIRA.Templates.Fields = {}; }
if (typeof JIRA.Templates.Fields.Pickers == 'undefined') { JIRA.Templates.Fields.Pickers = {}; }
if (typeof JIRA.Templates.Fields.Pickers.User == 'undefined') { JIRA.Templates.Fields.Pickers.User = {}; }


JIRA.Templates.Fields.Pickers.User.single = function(opt_data, opt_ignored) {
  var output = '<select id="' + soy.$$escapeHtml(opt_data.field.id) + '" name="' + soy.$$escapeHtml(opt_data.field.name) + '" class="single-user-picker js-' + ((opt_data.type) ? soy.$$escapeHtml(opt_data.type) : 'default-user-picker') + '"' + ((opt_data.inputText) ? ' data-input-text="' + soy.$$escapeHtml(opt_data.inputText) + '"' : '') + ((opt_data.editValue) ? ' data-edit-value="' + soy.$$escapeHtml(opt_data.editValue) + '"' : '') + ((opt_data.showDropdownButton) ? ' data-show-dropdown-button="true"' : '') + ((opt_data.userType) ? ' data-user-type="' + soy.$$escapeHtml(opt_data.userType) + '"' : '') + ((opt_data.containerClass) ? ' data-container-class="' + soy.$$escapeHtml(opt_data.containerClass) + '"' : '') + '>';
  var optionList38 = opt_data.options;
  var optionListLen38 = optionList38.length;
  for (var optionIndex38 = 0; optionIndex38 < optionListLen38; optionIndex38++) {
    var optionData38 = optionList38[optionIndex38];
    if (optionData38.optionGroup) {
      output += '<optgroup id="' + soy.$$escapeHtml(opt_data.field.id) + '-group-' + soy.$$escapeHtml(optionData38.id) + '" label="' + soy.$$escapeHtml(optionData38.display) + '"' + ((optionData38.footer) ? ' data-footer-text="' + soy.$$escapeHtml(optionData38.footer) + '"' : '') + ((optionData38.weight != -1) ? ' data-weight="' + soy.$$escapeHtml(optionData38.weight) + '"' : '') + '>';
      var groupOptionList59 = optionData38.groupOptions;
      var groupOptionListLen59 = groupOptionList59.length;
      for (var groupOptionIndex59 = 0; groupOptionIndex59 < groupOptionListLen59; groupOptionIndex59++) {
        var groupOptionData59 = groupOptionList59[groupOptionIndex59];
        output += JIRA.Templates.Fields.Pickers.User.option(groupOptionData59);
      }
      output += '</optgroup>';
    } else {
      output += JIRA.Templates.Fields.Pickers.User.option(optionData38);
    }
  }
  output += '</select>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Fields.Pickers.User.single.soyTemplateName = 'JIRA.Templates.Fields.Pickers.User.single';
}


JIRA.Templates.Fields.Pickers.User.option = function(opt_data, opt_ignored) {
  return '<option ' + ((opt_data.loggedInUser) ? 'class="current-user" ' : '') + ((opt_data.selected) ? 'selected="selected" ' : '') + 'value="' + soy.$$escapeHtml(opt_data.optionName) + '" data-field-text="' + soy.$$escapeHtml(opt_data.displayName) + '" data-field-label="' + soy.$$escapeHtml(opt_data.displayName) + ((opt_data.emailAddress) ? ' - ' + soy.$$escapeHtml(opt_data.emailAddress) : '') + ((opt_data.optionName && opt_data.optionName != '-1') ? ' (' + soy.$$escapeHtml(opt_data.optionName) + ')' : '') + '" data-icon="' + soy.$$escapeHtml(opt_data.avatarURL) + '" >' + soy.$$escapeHtml(opt_data.displayName) + '</option>';
};
if (goog.DEBUG) {
  JIRA.Templates.Fields.Pickers.User.option.soyTemplateName = 'JIRA.Templates.Fields.Pickers.User.option';
}
;
;
/* module-key = 'jira.webresources:field-templates', location = '/includes/jira/field/templates/assigneeField.soy' */
// This file was automatically generated from assigneeField.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Fields.Pickers.User.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Fields == 'undefined') { JIRA.Templates.Fields = {}; }
if (typeof JIRA.Templates.Fields.Pickers == 'undefined') { JIRA.Templates.Fields.Pickers = {}; }
if (typeof JIRA.Templates.Fields.Pickers.User == 'undefined') { JIRA.Templates.Fields.Pickers.User = {}; }


JIRA.Templates.Fields.Pickers.User.assignee = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.Fields.Pickers.User.single(soy.$$augmentMap(opt_data, {options: opt_data.assigneeOptions.options, showDropdownButton: true, userType: 'assignee', type: 'assignee-picker', containerClass: 'long-field'})) + ((opt_data.isLoggedInUserAssignable) ? '<a href="#' + soy.$$escapeHtml(opt_data.field.id) + '" id="assign-to-me-trigger">' + soy.$$escapeHtml('Assign to me') + '</a>' : '') + '<fieldset class="hidden parameters"><input type="hidden" title="projectKeys" value="' + soy.$$escapeHtml(opt_data.projectKeys) + '"/>' + ((opt_data.issueKey) ? '<input type="hidden" title="assigneeEditIssueKey" value="' + soy.$$escapeHtml(opt_data.issueKey) + '"/>' : '') + ((opt_data.actionDescriptorId) ? '<input type="hidden" title="actionDescriptorId" value="' + soy.$$escapeHtml(opt_data.actionDescriptorId) + '"/>' : '') + '</fieldset>';
};
if (goog.DEBUG) {
  JIRA.Templates.Fields.Pickers.User.assignee.soyTemplateName = 'JIRA.Templates.Fields.Pickers.User.assignee';
}
;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/lib/jquery.dotdotdot-1.5.7.js' */
(function(i){if(i.fn.dotdotdot){return}i.fn.dotdotdot=function(v){if(this.length==0){if(!v||v.debug!==false){b(true,'No element found for "'+this.selector+'".')}return this}if(this.length>1){return this.each(function(){i(this).dotdotdot(v)})}var r=this;if(r.data("dotdotdot")){r.trigger("destroy.dot")}r.bind_events=function(){r.bind("update.dot",function(y,A){y.preventDefault();y.stopPropagation();t.maxHeight=(typeof t.height=="number")?t.height:o(r);t.maxHeight+=t.tolerance;if(typeof A!="undefined"){if(typeof A=="string"||A instanceof HTMLElement){A=i("<div />").append(A).contents()}if(A instanceof i){w=A}}s=r.wrapInner('<div class="dotdotdot" />').children();s.empty().append(w.clone(true)).css({height:"auto",width:"auto",border:"none",padding:0,margin:0});var z=false,x=false;if(q.afterElement){z=q.afterElement.clone(true);q.afterElement.remove()}if(k(s,t)){if(t.wrap=="children"){x=d(s,t,z)}else{x=m(s,r,s,t,z)}}s.replaceWith(s.contents());s=null;if(i.isFunction(t.callback)){t.callback.call(r[0],x,w)}q.isTruncated=x;return x}).bind("isTruncated.dot",function(y,x){y.preventDefault();y.stopPropagation();if(typeof x=="function"){x.call(r[0],q.isTruncated)}return q.isTruncated}).bind("originalContent.dot",function(y,x){y.preventDefault();y.stopPropagation();if(typeof x=="function"){x.call(r[0],w)}return w}).bind("destroy.dot",function(x){x.preventDefault();x.stopPropagation();r.unwatch().unbind_events().empty().append(w).data("dotdotdot",false)});return r};r.unbind_events=function(){r.unbind(".dot");return r};r.watch=function(){r.unwatch();if(t.watch=="window"){var z=i(window),y=z.width(),x=z.height();z.bind("resize.dot"+q.dotId,function(){if(y!=z.width()||x!=z.height()||!t.windowResizeFix){y=z.width();x=z.height();if(p){clearInterval(p)}p=setTimeout(function(){r.trigger("update.dot")},10)}})}else{u=j(r);p=setInterval(function(){var A=j(r);if(u.width!=A.width||u.height!=A.height){r.trigger("update.dot");u=j(r)}},100)}return r};r.unwatch=function(){i(window).unbind("resize.dot"+q.dotId);if(p){clearInterval(p)}return r};var w=r.contents(),t=i.extend(true,{},i.fn.dotdotdot.defaults,v),q={},u={},p=null,s=null;q.afterElement=c(t.after,r);q.isTruncated=false;q.dotId=l++;r.data("dotdotdot",true).bind_events().trigger("update.dot");if(t.watch){r.watch()}return r};i.fn.dotdotdot.defaults={ellipsis:"... ",wrap:"word",lastCharacter:{remove:[" ",",",";",".","!","?"],noEllipsis:[]},tolerance:0,callback:null,after:null,height:null,watch:false,windowResizeFix:true,debug:false};var l=1;function d(s,w,v){var u=s.children(),p=false;s.empty();for(var r=0,q=u.length;r<q;r++){var t=u.eq(r);s.append(t);if(v){s.append(v)}if(k(s,w)){t.remove();p=true;break}else{if(v){v.remove()}}}return p}function m(s,r,A,t,q){var w=s.contents(),x=false;s.empty();var z="table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, select, optgroup, option, textarea, script, style";for(var y=0,u=w.length;y<u;y++){if(x){break}var v=w[y],p=i(v);if(typeof v=="undefined"){continue}s.append(p);if(q){s[(s.is(z))?"after":"append"](q)}if(v.nodeType==3){if(k(A,t)){x=e(p,r,A,t,q)}}else{x=m(p,r,A,t,q)}if(!x){if(q){q.remove()}}}return x}function e(q,r,p,w,s){var D=false,A=q[0];if(typeof A=="undefined"){return false}var E=(w.wrap=="letter")?"":" ",t=h(A).split(E),F=-1,v=-1,G=0,y=t.length-1;while(G<=y){var x=Math.floor((G+y)/2);if(x==v){break}v=x;a(A,t.slice(0,v+1).join(E)+w.ellipsis);if(!k(p,w)){F=v;G=v}else{y=v}}if(F!=-1&&!(t.length==1&&t[0].length==0)){var u=f(t.slice(0,F+1).join(E),w);D=true;a(A,u)}else{var z=q.parent();q.remove();var C=(s)?s.length:0;if(z.contents().size()>C){var B=z.contents().eq(-1-C);D=e(B,r,p,w,s)}else{var A=z.prev().contents().eq(-1)[0];if(typeof A!="undefined"){var u=f(h(A),w);a(A,u);z.remove();D=true}}}return D}function k(q,p){return q.innerHeight()>p.maxHeight}function f(p,q){while(i.inArray(p.slice(-1),q.lastCharacter.remove)>-1){p=p.slice(0,-1)}if(i.inArray(p.slice(-1),q.lastCharacter.noEllipsis)<0){p+=q.ellipsis}return p}function j(p){return{width:p.innerWidth(),height:p.innerHeight()}}function a(q,p){if(q.innerText){q.innerText=p}else{if(q.nodeValue){q.nodeValue=p}else{if(q.textContent){q.textContent=p}}}}function h(p){if(p.innerText){return p.innerText}else{if(p.nodeValue){return p.nodeValue}else{if(p.textContent){return p.textContent}else{return""}}}}function c(p,q){if(typeof p=="undefined"){return false}if(!p){return false}if(typeof p=="string"){p=i(p,q);return(p.length)?p:false}if(typeof p=="object"){return(typeof p.jquery=="undefined")?false:p}return false}function o(s){var t=s.innerHeight(),r=["paddingTop","paddingBottom"];for(var u=0,q=r.length;u<q;u++){var p=parseInt(s.css(r[u]),10);if(isNaN(p)){p=0}t-=p}return t}function b(q,p){if(!q){return false}if(typeof p=="string"){p="dotdotdot: "+p}else{p=["dotdotdot:",p]}if(typeof window.console!="undefined"){if(typeof window.console.log!="undefined"){window.console.log(p)}}return false}var n=i.fn.html;i.fn.html=function(p){if(typeof p!="undefined"){if(this.data("dotdotdot")){if(typeof p!="function"){return this.trigger("update",[p])}}return n.call(this,p)}return n.call(this)};var g=i.fn.text;i.fn.text=function(q){if(typeof q!="undefined"){if(this.data("dotdotdot")){var p=i("<div />");p.text(q);q=p.html();p.remove();return this.trigger("update",[q])}return g.call(this,q)}return g.call(this)}})(require("jquery"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/soy/ProjectTemplatesList.soy' */
// This file was automatically generated from ProjectTemplatesList.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.ProjectTemplates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.ProjectTemplates == 'undefined') { JIRA.Templates.ProjectTemplates = {}; }


JIRA.Templates.ProjectTemplates.renderProjectTemplates = function(opt_data, opt_ignored) {
  return '' + ((soy.$$getMapKeys(opt_data.projectTemplates).length == 0) ? JIRA.Templates.errorMsg({closeable: false, msg: 'No project templates could be found.'}) : JIRA.Templates.ProjectTemplates.renderTemplates(opt_data));
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.renderProjectTemplates.soyTemplateName = 'JIRA.Templates.ProjectTemplates.renderProjectTemplates';
}


JIRA.Templates.ProjectTemplates.renderProjectTemplatesGroupedByType = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.projectTemplatesByType.length == 0) {
    output += JIRA.Templates.errorMsg({closeable: false, msg: 'No project templates could be found.'});
  } else {
    var projectTypeTemplatesGroupList18 = opt_data.projectTemplatesByType;
    var projectTypeTemplatesGroupListLen18 = projectTypeTemplatesGroupList18.length;
    for (var projectTypeTemplatesGroupIndex18 = 0; projectTypeTemplatesGroupIndex18 < projectTypeTemplatesGroupListLen18; projectTypeTemplatesGroupIndex18++) {
      var projectTypeTemplatesGroupData18 = projectTypeTemplatesGroupList18[projectTypeTemplatesGroupIndex18];
      output += '<div class="template-group" id="project-template-group-' + soy.$$escapeHtml(projectTypeTemplatesGroupData18.projectTypeBean.projectTypeKey) + '"><div class="template-group-header"><h6><img class="project-type-icon" src="data:image/svg+xml;base64, ' + soy.$$escapeHtml(projectTypeTemplatesGroupData18.projectTypeBean.icon) + ' "/><span>' + soy.$$escapeHtml(projectTypeTemplatesGroupData18.projectTypeBean.projectTypeDisplayKey) + '</span></h6></div>' + JIRA.Templates.ProjectTemplates.renderTemplates({projectTemplates: projectTypeTemplatesGroupData18.projectTemplates}) + '</div>';
    }
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.renderProjectTemplatesGroupedByType.soyTemplateName = 'JIRA.Templates.ProjectTemplates.renderProjectTemplatesGroupedByType';
}


JIRA.Templates.ProjectTemplates.renderTemplates = function(opt_data, opt_ignored) {
  return '<div class="pt-templates-list">' + JIRA.Templates.ProjectTemplates.renderItems(opt_data) + '</div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.renderTemplates.soyTemplateName = 'JIRA.Templates.ProjectTemplates.renderTemplates';
}


JIRA.Templates.ProjectTemplates.renderItems = function(opt_data, opt_ignored) {
  var output = '<ol class="templates" tabindex="100">';
  var templateList37 = opt_data.projectTemplates;
  var templateListLen37 = templateList37.length;
  for (var templateIndex37 = 0; templateIndex37 < templateListLen37; templateIndex37++) {
    var templateData37 = templateList37[templateIndex37];
    output += '<li class="template"' + ((templateData37.itemModuleCompleteKey) ? 'data-item-module-complete-key="' + soy.$$escapeHtml(templateData37.itemModuleCompleteKey) + '"' : '') + ((templateData37.projectTemplateModuleCompleteKey) ? 'data-project-template-module-complete-key="' + soy.$$escapeHtml(templateData37.projectTemplateModuleCompleteKey) + '"' : '') + ((templateData37.createProject) ? 'data-create-project="' + soy.$$escapeHtml(templateData37.createProject) + '"' : '') + ((templateData37.demoProject) ? 'data-demo-project="' + soy.$$escapeHtml(templateData37.demoProject) + '"' : '') + ((templateData37.backgroundIconUrl) ? 'data-background-icon-url="' + soy.$$escapeHtml(templateData37.backgroundIconUrl) + '"' : '') + ((templateData37.name) ? 'data-name="' + soy.$$escapeHtml(templateData37.name) + '"' : '') + ((templateData37.description) ? 'data-description="' + soy.$$escapeHtml(templateData37.description) + '"' : '') + ((templateData37.longDescriptionContent) ? 'data-long-description-content="' + soy.$$escapeHtml(templateData37.longDescriptionContent) + '"' : '') + ((templateData37.infoSoyPath) ? 'data-info-soy-path="' + soy.$$escapeHtml(templateData37.infoSoyPath) + '"' : '') + '><img class="template-preview" src="' + soy.$$escapeHtml(templateData37.iconUrl) + '" /><div class="template-meta"><div class="template-name" title="' + soy.$$escapeHtml(templateData37.name) + '">' + soy.$$escapeHtml(templateData37.name) + '</div><div class="template-description" title="' + soy.$$escapeHtml(templateData37.description) + '">' + soy.$$escapeHtml(templateData37.description) + '</div></div></li>';
  }
  output += '</ol>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.renderItems.soyTemplateName = 'JIRA.Templates.ProjectTemplates.renderItems';
}


JIRA.Templates.ProjectTemplates.loadingTemplatesList = function(opt_data, opt_ignored) {
  return '<div class="wait-container"><img class="wait-icon" src="' + soy.$$escapeHtml("") + '/images/icons/wait.gif"><span class="wait-text">' + soy.$$escapeHtml('Loading project templates') + '&hellip;</span></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.loadingTemplatesList.soyTemplateName = 'JIRA.Templates.ProjectTemplates.loadingTemplatesList';
}


JIRA.Templates.ProjectTemplates.footerLinks = function(opt_data, opt_ignored) {
  return '<div class="footer-links"><a class="import-project-trigger button-panel-link" href="' + soy.$$escapeHtml("") + '/secure/admin/views/ExternalImport1.jspa">' + soy.$$escapeHtml('Import a project') + '</a>|<a class="create-with-shared-config button-panel-link" href="#"><span class="aui-icon aui-icon-create-shared">' + soy.$$escapeHtml('Create with shared configuration') + '</span> ' + soy.$$escapeHtml('Create with shared configuration') + '</a>' + ((opt_data.showDemoLink) ? '| <a class="add-demo-project-trigger button-panel-link" href="#">' + soy.$$escapeHtml('Create sample data') + '</a>' : '') + '</div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.footerLinks.soyTemplateName = 'JIRA.Templates.ProjectTemplates.footerLinks';
}


JIRA.Templates.ProjectTemplates.addWorkflowsLink = function(opt_data, opt_ignored) {
  return '<a class="add-workflow-link" href="' + soy.$$escapeHtml(opt_data.baseUrl) + '/plugins/servlet/wfshare-import?src=projecttemplates" tabindex="-1">' + soy.$$escapeHtml('View Marketplace Workflows') + '</a>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.addWorkflowsLink.soyTemplateName = 'JIRA.Templates.ProjectTemplates.addWorkflowsLink';
}
;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/soy/AddProject.soy' */
// This file was automatically generated from AddProject.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.ProjectTemplates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.ProjectTemplates == 'undefined') { JIRA.Templates.ProjectTemplates = {}; }


JIRA.Templates.ProjectTemplates.addProjectForm = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.errors.errorMessages) {
    var errorList5 = opt_data.errors.errorMessages;
    var errorListLen5 = errorList5.length;
    for (var errorIndex5 = 0; errorIndex5 < errorListLen5; errorIndex5++) {
      var errorData5 = errorList5[errorIndex5];
      output += JIRA.Templates.errorMsg({closeable: false, msg: errorData5});
    }
  }
  output += '<div class="add-project-wrapper"><div class="add-project-form-wrapper">' + aui.form.form({content: '' + aui.form.fieldset({legendContent: '', content: '' + JIRA.Templates.ProjectTemplates.longTextField({id: 'name', name: 'name', isRequired: false, maxLength: opt_data.maxNameLength, labelContent: 'Name', descriptionText: AJS.format('Max. {0} characters.',opt_data.maxNameLength), value: opt_data.currentName ? opt_data.currentName : '', errorTexts: opt_data.errors.errors.projectName ? [opt_data.errors.errors.projectName] : []}) + JIRA.Templates.ProjectTemplates.textFieldWithHelpIcon({id: 'key', name: 'key', isRequired: false, maxLength: opt_data.maxKeyLength, labelContent: 'Key', descriptionText: AJS.format('Max. {0} characters.',opt_data.maxKeyLength), helpTitle: 'What\x27s a project key?', value: opt_data.currentKey ? opt_data.currentKey : '', errorTexts: opt_data.errors.errors.projectKey ? [opt_data.errors.errors.projectKey] : []}) + ((opt_data.shouldShowLead) ? JIRA.Templates.ProjectTemplates.projectLeadField({field: opt_data.projectLeadPickerField, isRequired: false, errorTexts: opt_data.errors.errors.projectLead ? [opt_data.errors.errors.projectLead] : [], options: opt_data.leadOptions}) : '') + ((opt_data.addUserToLicense.displayCheckbox) ? JIRA.Templates.ProjectTemplates.addUserToLicense({fieldId: opt_data.addUserToLicense.fieldId, fieldName: opt_data.addUserToLicense.fieldName, applicationName: opt_data.addUserToLicense.applicationName, usedSeats: opt_data.addUserToLicense.usedSeats, totalSeats: opt_data.addUserToLicense.totalSeats, disableCheckbox: opt_data.addUserToLicense.disableCheckbox, licensingUrl: opt_data.addUserToLicense.licensingUrl}) : '') + '<input type="hidden" name="keyEdited" id="keyEdited" value="false"><input type="hidden" name="projectTemplateWebItemKey" value="' + soy.$$escapeHtml(opt_data.projectTemplateWebItemKey) + '"><input type="hidden" name="projectTemplateModuleKey" value="' + soy.$$escapeHtml(opt_data.projectTemplateModuleKey) + '"><input type="submit" class="pt-hidden-submit offscreen-left">'}), id: 'add-project-form'}) + '</div>' + ((opt_data.projectTemplateDescriptionContent) ? '<div class="add-project-description-wrapper"><div class="project-template-title"><h3>' + soy.$$escapeHtml(opt_data.projectTemplateTitle) + '</h3></div><div class="project-template-description">' + soy.$$filterNoAutoescape(opt_data.projectTemplateDescriptionContent) + '</div></div>' : '') + '</div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.addProjectForm.soyTemplateName = 'JIRA.Templates.ProjectTemplates.addProjectForm';
}


JIRA.Templates.ProjectTemplates.keyHelp = function(opt_data, opt_ignored) {
  return '<div class="project-key-help"><p><b>' + soy.$$escapeHtml('What\x27s a project key?') + '</b></p><ul><li>' + soy.$$escapeHtml('It prefixes each issue in the project') + '</li><li>' + soy.$$escapeHtml('It can be changed, but this is not a trivial task') + '</li></ul></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.keyHelp.soyTemplateName = 'JIRA.Templates.ProjectTemplates.keyHelp';
}


JIRA.Templates.ProjectTemplates.projectLeadField = function(opt_data, opt_ignored) {
  var param77 = '' + aui.form.label({forField: opt_data.field.name + '-field', isRequired: opt_data.isRequired, content: 'Project Lead'}) + JIRA.Templates.Fields.Pickers.User.single({field: opt_data.field, options: opt_data.options, editValue: opt_data.value}) + aui.form.fieldDescription({message: 'Enter the username of the Project Lead.'});
  if (opt_data.errorTexts) {
    var errorList90 = opt_data.errorTexts;
    var errorListLen90 = errorList90.length;
    for (var errorIndex90 = 0; errorIndex90 < errorListLen90; errorIndex90++) {
      var errorData90 = errorList90[errorIndex90];
      param77 += aui.form.fieldError({message: errorData90});
    }
  }
  var output = '' + aui.form.fieldGroup({content: param77});
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.projectLeadField.soyTemplateName = 'JIRA.Templates.ProjectTemplates.projectLeadField';
}


JIRA.Templates.ProjectTemplates.addUserToLicense = function(opt_data, opt_ignored) {
  var output = '';
  var labelMessage__soy96 = '' + soy.$$escapeHtml(AJS.format('Give me a {0} license so I can access this project.',opt_data.applicationName)) + ((opt_data.totalSeats > 0) ? '<br/>' + soy.$$escapeHtml(AJS.format('({0} of {1} licenses now used)',opt_data.usedSeats,opt_data.totalSeats)) : '');
  output += aui.form.fieldGroup({content: '' + aui.form.label({forField: opt_data.fieldName, content: 'License'}) + ((opt_data.disableCheckbox) ? aui.form.field({id: opt_data.fieldId, name: opt_data.fieldName, value: 'true', type: 'checkbox', isChecked: false, labelContent: labelMessage__soy96, isDisabled: true, descriptionContent: AJS.format('We can\x27\x27t give you access to {0} automatically. You can {1}manage application access{2} to work on {0} projects.',opt_data.applicationName,'<a href="' + "" + opt_data.licensingUrl + '">','</a>')}) : aui.form.field({id: opt_data.fieldId, name: opt_data.fieldName, value: 'true', type: 'checkbox', isChecked: false, labelContent: labelMessage__soy96, isDisabled: false}))});
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.addUserToLicense.soyTemplateName = 'JIRA.Templates.ProjectTemplates.addUserToLicense';
}


JIRA.Templates.ProjectTemplates.textFieldWithHelpIcon = function(opt_data, opt_ignored) {
  var param128 = '' + aui.form.label({forField: opt_data.name, isRequired: opt_data.isRequired, content: opt_data.labelContent}) + aui.form.input({id: opt_data.id, name: opt_data.name, type: 'text', maxLength: opt_data.maxLength, value: opt_data.value}) + '<a class="help-lnk" title="' + soy.$$escapeHtml(opt_data.helpTitle) + '" id="' + soy.$$escapeHtml(opt_data.id) + '-help-icon"><span class="aui-icon aui-icon-help">' + soy.$$escapeHtml(opt_data.helpTitle) + '</span></a>' + ((opt_data.descriptionText) ? aui.form.fieldDescription({message: opt_data.descriptionText}) : '');
  if (opt_data.errorTexts) {
    var errorList152 = opt_data.errorTexts;
    var errorListLen152 = errorList152.length;
    for (var errorIndex152 = 0; errorIndex152 < errorListLen152; errorIndex152++) {
      var errorData152 = errorList152[errorIndex152];
      param128 += aui.form.fieldError({message: errorData152});
    }
  }
  var output = '' + aui.form.fieldGroup({content: param128});
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.textFieldWithHelpIcon.soyTemplateName = 'JIRA.Templates.ProjectTemplates.textFieldWithHelpIcon';
}


JIRA.Templates.ProjectTemplates.longTextField = function(opt_data, opt_ignored) {
  var param158 = '' + aui.form.label({forField: opt_data.name, isRequired: opt_data.isRequired, content: opt_data.labelContent}) + aui.form.input({id: opt_data.id, name: opt_data.name, type: 'text', maxLength: opt_data.maxLength, value: opt_data.value, extraClasses: 'long-field'}) + ((opt_data.descriptionText) ? aui.form.fieldDescription({message: opt_data.descriptionText}) : '');
  if (opt_data.errorTexts) {
    var errorList176 = opt_data.errorTexts;
    var errorListLen176 = errorList176.length;
    for (var errorIndex176 = 0; errorIndex176 < errorListLen176; errorIndex176++) {
      var errorData176 = errorList176[errorIndex176];
      param158 += aui.form.fieldError({message: errorData176});
    }
  }
  var output = '' + aui.form.fieldGroup({content: param158});
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.longTextField.soyTemplateName = 'JIRA.Templates.ProjectTemplates.longTextField';
}


JIRA.Templates.ProjectTemplates.spinner = function(opt_data, opt_ignored) {
  return '<span id=\'' + soy.$$escapeHtml(opt_data.id) + '\' class=\'icon throbber loading\'/>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.spinner.soyTemplateName = 'JIRA.Templates.ProjectTemplates.spinner';
}


JIRA.Templates.ProjectTemplates.formatAnchor = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(opt_data.href) + '"' + ((opt_data.title) ? ' title="' + soy.$$escapeHtml(opt_data.title) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.body) + '</a>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.formatAnchor.soyTemplateName = 'JIRA.Templates.ProjectTemplates.formatAnchor';
}
;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/soy/CreateSharedProject.soy' */
// This file was automatically generated from CreateSharedProject.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.ProjectTemplates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.ProjectTemplates == 'undefined') { JIRA.Templates.ProjectTemplates = {}; }


JIRA.Templates.ProjectTemplates.createSharedProjectForm = function(opt_data, opt_ignored) {
  return '<div class="create-shared-project-wrapper"><div class="create-shared-project-form-wrapper">' + aui.form.form({content: '' + aui.form.fieldset({content: '<p>' + soy.$$escapeHtml('Select the existing project that you\x27d like to share configurations with.') + '<a class="help-lnk" title="' + soy.$$escapeHtml('What will be shared?') + '" id="shared-help-icon"><span class="aui-icon aui-icon-help">' + soy.$$escapeHtml('What will be shared?') + '</span></a></p>' + aui.form.fieldGroup({extraClasses: 'project-picker-group', content: '' + aui.form.label({forField: 'project-picker', isRequired: false, content: 'Choose a project'}) + aui.form.input({id: 'project-picker', name: 'project', type: 'text'}) + '<div id="project-picker-options" data-suggestions="' + soy.$$escapeHtml(opt_data.projectSuggestions) + '"></div>'}) + '<p class="create-shared-info">' + soy.$$escapeHtml('When a configuration is shared with several projects, it means that any changes made to the configuration will affect all the projects.') + '</p>'}), id: 'create-shared-project-form'}) + '</div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.createSharedProjectForm.soyTemplateName = 'JIRA.Templates.ProjectTemplates.createSharedProjectForm';
}


JIRA.Templates.ProjectTemplates.loading = function(opt_data, opt_ignored) {
  return '<div><div class="dialog-spinner"></div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.loading.soyTemplateName = 'JIRA.Templates.ProjectTemplates.loading';
}


JIRA.Templates.ProjectTemplates.noProjects = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$escapeHtml('Looks like no other projects exist yet. Please create a brand new project first before trying to share an existing project\x27s configuration.') + '</p>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.noProjects.soyTemplateName = 'JIRA.Templates.ProjectTemplates.noProjects';
}


JIRA.Templates.ProjectTemplates.sharedHelp = function(opt_data, opt_ignored) {
  return '<div class="shared-help"><p><strong>' + soy.$$escapeHtml('What will be shared?') + '</strong></p><p>' + soy.$$escapeHtml('Configuration refers to the set of schemes used by a project') + '</p><ul><li>' + soy.$$escapeHtml('Permission Scheme') + '</li><li>' + soy.$$escapeHtml('Notification Scheme') + '</li><li>' + soy.$$escapeHtml('Issue Security Scheme') + '</li><li>' + soy.$$escapeHtml('Workflow Scheme') + '</li><li>' + soy.$$escapeHtml('Issue Type Scheme') + '</li><li>' + soy.$$escapeHtml('Issue Type Screen Scheme') + '</li><li>' + soy.$$escapeHtml('Field Configuration Scheme') + '</li></ul></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.sharedHelp.soyTemplateName = 'JIRA.Templates.ProjectTemplates.sharedHelp';
}
;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/Config.js' */
define("jira/project-templates/config",{model:{}});AJS.namespace("JPT.ConfigModel",null,require("jira/project-templates/config"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/ProjectKeyGenerator.js' */
define("jira/project-templates/project-key-generator",["jquery","underscore"],function(d,h){var c={};c.IGNORED_WORDS=["THE","A","AN","AS","AND","OF","OR"];c.CHARACTER_MAP={};c.CHARACTER_MAP[199]="C";c.CHARACTER_MAP[231]="c";c.CHARACTER_MAP[252]="u";c.CHARACTER_MAP[251]="u";c.CHARACTER_MAP[250]="u";c.CHARACTER_MAP[249]="u";c.CHARACTER_MAP[233]="e";c.CHARACTER_MAP[234]="e";c.CHARACTER_MAP[235]="e";c.CHARACTER_MAP[232]="e";c.CHARACTER_MAP[226]="a";c.CHARACTER_MAP[228]="a";c.CHARACTER_MAP[224]="a";c.CHARACTER_MAP[229]="a";c.CHARACTER_MAP[225]="a";c.CHARACTER_MAP[239]="i";c.CHARACTER_MAP[238]="i";c.CHARACTER_MAP[236]="i";c.CHARACTER_MAP[237]="i";c.CHARACTER_MAP[196]="A";c.CHARACTER_MAP[197]="A";c.CHARACTER_MAP[201]="E";c.CHARACTER_MAP[230]="ae";c.CHARACTER_MAP[198]="Ae";c.CHARACTER_MAP[244]="o";c.CHARACTER_MAP[246]="o";c.CHARACTER_MAP[242]="o";c.CHARACTER_MAP[243]="o";c.CHARACTER_MAP[220]="U";c.CHARACTER_MAP[255]="Y";c.CHARACTER_MAP[214]="O";c.CHARACTER_MAP[241]="n";c.CHARACTER_MAP[209]="N";c.desiredKeyLength=4;c.maxKeyLength=10;c.getTotalLength=function a(k){return k.join("").length};c.removeIgnoredWords=function f(k){return h.reject(k,function(l){return d.inArray(l,c.IGNORED_WORDS)!==-1})};c.createAcronym=function b(l){var k="";d.each(l,function(m,n){k+=n.charAt(0)});return k};c.getFirstSyllable=function i(m){var l=false;var k;for(k=0;k<m.length;k++){if(c.isVowelOrY(m[k])){l=true}else{if(l){return m.substring(0,k+1)}}}return m};c.isVowelOrY=function g(k){return k&&k.length===1&&k.search("[AEIOUY]")!==-1};c.init=function j(l,k){c.desiredKeyLength=l;c.maxKeyLength=k};c.generate=function e(l){l=d.trim(l);if(!l){return""}var k=[];for(var n=0,p=l.length;n<p;n++){var o=c.CHARACTER_MAP[l.charCodeAt(n)];k.push(o?o:l[n])}l=k.join("");var r=[];d.each(l.split(/\s+/),function(s,t){if(t){t=t.replace(/[^a-zA-Z]/g,"");t=t.toUpperCase();t.length&&r.push(t)}});if(c.desiredKeyLength&&c.getTotalLength(r)>c.desiredKeyLength){r=c.removeIgnoredWords(r)}var m;if(r.length==0){m=""}else{if(r.length==1){var q=r[0];if(c.desiredKeyLength&&q.length>c.desiredKeyLength){m=c.getFirstSyllable(q)}else{m=q}}else{m=c.createAcronym(r)}}if(c.maxKeyLength&&m.length>c.maxKeyLength){m=m.substr(0,c.maxKeyLength)}return m};return c});AJS.namespace("JPT.ProjectKeyGenerator",null,require("jira/project-templates/project-key-generator"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/DialogView.js' */
define("jira/project-templates/dialog-view-impl",["require","backbone","underscore"],function(e,f,d){var b=AJS.Dialog;var a=AJS.trigger;return f.View.extend({events:{"click   .add-project-trigger":"_onClickAddProject","click   .add-demo-project-trigger":"_onClickAddDemoProject","click   .add-workflow-link":"_onClickViewMarketplaceWorkflows","click   #add-project-dialog .add-demo-project-trigger":"_onCreateProjectAddDemoProjectClick","click   #add-project-dialog .import-project-trigger":"_onClickImportProject","click   #add-project-dialog .create-with-shared-config":"_onClickCreateShared","keydown #add-project-dialog .pt-templates-list":"_onKeydownInTemplatesList"},draw:function(){var g=new b({width:840,height:400,id:"add-project-dialog",closeOnOutsideClick:false,keypressListener:d.bind(this._onKeyPressed,this)});var h=g.popup.element;g.addPage("project-templates-page");g.addHeader("Create project","add-project-dialog-header");g.addPanel("ProjectTemplatesListPanel",JIRA.Templates.ProjectTemplates.loadingTemplatesList(),"pt-content");this._dialog=g;this._$dialogElement=h;g.show();return g},remove:function(){this._dialog&&this._dialog.remove()},showErrorMessage:function(g){this._dialog.getPanel(1,0).html(JIRA.Templates.errorMsg({closable:false,msg:g}))},get$PTContent:function c(){return this.getDialogController().$dialogElement.find(".pt-content")},_onKeyPressed:function(h){var g=27;if(this._dialog){if(h.keyCode===g){this.getDialogController().hideDialogFromNewUser("dismissed");this._dialog.remove();return false}}return true},_onKeydownInTemplatesList:function(h){var g=13;if(this._dialog){if(h.keyCode===g){this._$dialogElement.find(".pt-submit-button:visible").click();return false}}return true},_onClickAddProject:function(g){g.preventDefault();this.getDialogController().handleProjectTemplateTriggered()},_onCreateProjectAddDemoProjectClick:function(){a("analyticsEvent",{name:"jira.project.templates.dialog.create.demo.create.project.clicked"})},_onClickViewMarketplaceWorkflows:function(){a("analyticsEvent",{name:"jira.project.templates.dialog.create.viewmarketplaceworkflows.clicked"})},_onClickAddDemoProject:function(h){h.preventDefault();var g=this.getDialogController().dialog;if(g&&g.popup&&g.popup.element){g.remove()}this.getDialogController().handleDemoProjectTemplateTriggered()},_onClickImportProject:function(g){this.getDialogController().hideDialogFromNewUser("importproject")},_onClickCreateShared:function(g){this.getDialogController().handleCreateShared()},getDialogController:function(){return e("jira/project-templates/dialog-controller")}})});define("jira/project-templates/dialog-view",["jira/project-templates/dialog-view-impl","jquery"],function(b,a){return new b({el:a(document)})});AJS.namespace("JPT.DialogView",null,require("jira/project-templates/dialog-view"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/DialogController.js' */
define("jira/project-templates/dialog-controller",["jira/project-templates/dialog-view","jira/project-templates/config","jira/ajs/ajax/smart-ajax","jira/util/data/meta","jira/lib/class","jquery","underscore","wrm/data"],function(n,e,a,g,b,k,o,m){var d=AJS.contextPath();var f=AJS.isDevMode;var i=AJS.log;function h(p,q){AJS.trigger("analyticsEvent",{name:p,data:q})}var l;var c=function(){if(!l){l=m.claim("com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources.ptAnalyticsData")||{}}return l};var j=b.extend({WELCOME_REST_URL:d+"/rest/welcome/1.0/show/welcome",initialize:function(){o.bindAll(this,"handleProjectTemplateTriggered","hideDialogFromNewUser");if(g.getBoolean("show-welcome-screen")){this.handleProjectTemplateTriggered()}},handleProjectTemplateTriggered:function(){this.demoProject=false;h("jira.project.templates.dialog.create.show");this.openWithFirstProjectTemplateOfTypePreSelected()},handleDemoProjectTemplateTriggered:function(){this.demoProject=true;var p=this.getTemplateController().loadDemoProjectTemplatesData();this.openWithFirstProjectTemplateOfTypePreSelected(null,p);this._addAnalyticsToCreateDemoShow(p)},_addAnalyticsToCreateDemoShow:function(p){p.done(function(r){var s={};var q=function(t){return t.projectTemplatesGroupedByType.map(function(u){return u.projectTemplates.map(function(v){return v.itemModuleCompleteKey}).join()}).join()};s.demoSets=q(r);s.instanceCreatedDate=c().instanceCreatedDate;h("jira.project.templates.dialog.create.demo.show",s)}.bind(this))},openWithFirstProjectTemplateOfTypePreSelected:function(p,q){q=q||this.getTemplateController().loadProjectTemplatesData();this.dialog=n.draw();q.fail(o.bind(function(r){this._handleUnknownErrorOfPTRetrieval()},this));q.done(o.bind(function(r){this.$dialogElement=this.dialog.popup.element;var s;if(!o.isUndefined(e.model.selectedTemplate)){s=e.model.selectedTemplate}e.model=r;e.model.selectedTemplate=s;this.getTemplateController().init(r,p)},this))},handleCreateShared:function(){h("jira.project.templates.dialog.create.shared.clicked");this.demoProject=false;this.openWithCreateShared()},openWithCreateShared:function(){var p=require("jira/project-templates/create-shared-controller");p.initCreateShared()},callbackWithResize:function(p){return o.bind(o.wrap(p,function(q){q.call(this);this.dialog.updateHeight()}),this)},addPage:function(r){var q=this.dialog.addPage(r.name).page[this.dialog.curpage];this.dialog.addHeader(r.title,"add-project-dialog-header");this.dialog.addPanel(r.panelName,"","pt-content");if(r.backButton){this._addBackButton(q)}this.dialog.addButton(r.submitButtonText,this.callbackWithResize(r.submitButtonCallback),r.submitButtonClass+" pt-submit-button");var p=this.$dialogElement.find("."+r.submitButtonClass);p.removeClass("button-panel-button").addClass("aui-button aui-button-primary");p.focus();this.dialog.addCancel("Cancel",o.bind(function(s){this.hideDialogFromNewUser("dismissed");this.dialog.remove()},this));return q},_backButtonOnClickCallback:function(p){return o.bind(function(){if(this.demoProject){h("jira.project.templates.dialog.demo.back")}else{h("jira.project.templates.dialog.create.back")}var q=n.get$PTContent();q.css("background-image","none");this.dialog.prevPage();p.remove();this.dialog.page.pop()},this)},_addBackButton:function(q){this.dialog.addButton("Back",this.callbackWithResize(this._backButtonOnClickCallback(q)),"add-project-back-button");var p=this.$dialogElement.find(".add-project-back-button");p.removeClass("button-panel-button").addClass("aui-button")},_handleUnknownErrorOfPTRetrieval:function(){n.showErrorMessage("An error occurred while trying to contact Jira")},hideDialogFromNewUser:function(p){if(p==="dismissed"){if(this.demoProject){h("jira.project.templates.dialog.demo.dismissed")}else{h("jira.project.templates.dialog.create.dismissed")}}else{if(p==="importproject"){h("jira.project.templates.dialog.import.clicked")}else{if(p==="templateselected"){if(this.demoProject){h("jira.project.templates.dialog.demo.templateselected")}else{h("jira.project.templates.dialog.create.templateselected")}}}}if(g.getBoolean("show-welcome-screen")){k.ajax({url:this.WELCOME_REST_URL+"/"+p,type:"DELETE",success:function(){if(f&&f()){i("don't show project template dialog anymore")}}})}},getTemplateController:function(){return require("jira/project-templates/select-project-template-controller")}});return new j()});AJS.namespace("JPT.DialogController",null,require("jira/project-templates/dialog-controller"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/AddProjectView.js' */
define("jira/project-templates/add-project-view-impl",["jira/project-templates/dialog-controller","jira/project-templates/config","jira/util/events","jira/util/events/types","require","backbone","jquery","underscore"],function(q,n,t,y,m,e,g,D){var f=AJS.InlineDialog;return e.View.extend({TIMEOUT_MS:100,postDrawCallbacks:[],events:{"submit #add-project-form":"onSubmitForm"},page:undefined,isSubmitting:false,initialize:function(F){D.bindAll(this,"bindHook")},addPostDrawCallback:function(F){this.postDrawCallbacks.push(F)},prepareDialog:function(F){this.page=q.addPage({name:"add-project",title:F,panelName:"add-project",backButton:true,submitButtonText:"Submit",submitButtonCallback:this.onSubmitForm.bind(this),submitButtonClass:"add-project-dialog-create-button"})},draw:function(U){function V(X){if(!X.errors){X.errors={}}return X}this.isSubmitting=false;q.dialog.gotoPage(this.page.id);var G=U.webItemData.projectTemplateModuleCompleteKey;var F=D.find(n.model.projectTemplatesGroupedByType,function(X){return D.any(X.projectTemplates,function(Y){return Y.itemModuleCompleteKey==G})});var L=(F&&F.applicationInfo&&F.applicationInfo.applicationName)||"";var K=(F&&F.applicationInfo&&F.applicationInfo.licenseUsedSeats)||0;var H=(F&&F.applicationInfo&&F.applicationInfo.licenseTotalSeats)||0;var T=(F&&F.applicationInfo&&F.applicationInfo.canUserBeAddedToApplication)||false;var J=(F&&F.applicationInfo&&F.applicationInfo.canUserUseApplication)||false;var P=(F&&F.applicationInfo&&F.applicationInfo.ondemand)||false;var I;if(!F||!F.applicationInfo){I=false}else{I=!J}var R={maxNameLength:n.model.maxNameLength,maxKeyLength:n.model.maxKeyLength,shouldShowLead:n.model.shouldShowProjectLead,projectTemplateWebItemKey:n.model.selectedTemplate||U.webItemData.itemModuleCompleteKey,projectTemplateModuleKey:G,projectTemplateTitle:U.webItemData.name,projectTemplateDescriptionContent:U.webItemData.longDescriptionContent,currentKey:U.currentKey||"",currentName:U.currentName||"",errors:V(U.errors),projectLeadPickerField:{id:"lead",name:"lead"},addUserToLicense:{displayCheckbox:I,disableCheckbox:!T,applicationName:L,usedSeats:K,totalSeats:H,fieldId:"licenseUser",fieldName:"licenseUser",licensingUrl:P?"/admin/accessconfig":"/plugins/servlet/applications/versions-licenses"},leadOptions:[{selected:true,displayName:U.currentUserDisplayName,optionName:U.currentUserName,avatarURL:U.currentUserAvatarUrl}]};var N=JIRA.Templates.ProjectTemplates.addProjectForm(R);q.dialog.getPanel(this.page.id,0).html(N);if(U.webItemData&&U.webItemData.backgroundIconUrl){var Q=q.$dialogElement.find(".pt-content");Q.css("background-image",'url("'+U.webItemData.backgroundIconUrl+'")')}var O=g("#add-project-form");t.trigger(y.NEW_CONTENT_ADDED,[O]);this.nameElement=q.$dialogElement.find("#name");this.keyElement=q.$dialogElement.find("#key");this.keyEditedElement=q.$dialogElement.find("#keyEdited");this.leadDisplayElement=q.$dialogElement.find("#lead-field");this.leadValueElement=q.$dialogElement.find("#lead");var W=this.keyElement.parent().find(".aui-icon-help");if(W.length){new f(W,"project-key-help-popup",function(Z,Y,X){Z.html(JIRA.Templates.ProjectTemplates.keyHelp());X()},{width:330,offsetX:-30})}this.keyElement.attr("style","text-transform: uppercase");var S=m("jira/project-templates/add-project-controller");this.nameElement.focus(D.bind(function(X){this.bindHook(X,S.nameTimeout)},this));var M=this;this.nameElement.change(function(X){S.validateName();M.unbindHook(X)});this.nameElement.focus();this.keyElement.focus(D.bind(function(Y){var X=g(Y.target);X.data("lastValue",X.val());this.bindHook(Y,S.keyTimeout)},this));this.keyElement.blur(D.bind(function(X){this.unbindHook(X)},this));this.keyElement.change(function(){S.validateKey();S.autofillKeyIfNeeded()});if(!D.isEmpty(this.postDrawCallbacks)){D.each(this.postDrawCallbacks,function(X){X()})}q.dialog.updateHeight()},onSubmitForm:function(G){var F=m("jira/project-templates/add-project-controller");F.submit();return false},get$SubmitButton:function(){return q.$dialogElement.find(".add-project-dialog-create-button")},get$BackButton:function(){return q.$dialogElement.find(".add-project-back-button")},bindHook:function p(I,G){var F=g(I.target),H;H=D.bind(function(){this.unbindHook(I);G.apply();if(F.is(":visible")){F.data("checkHook",setTimeout(H,this.TIMEOUT_MS))}},this);if(!F.data("checkHook")){F.data("checkHook",setTimeout(H,0))}},unbindHook:function(G){var F=g(G.target);clearTimeout(F.data("checkHook"));F.removeData("checkHook")},showInlineError:function(G,H){if(this.isSubmitting){return}var F=G.parent().find(".error");if(!F.length){F=g("<div class='error'></div>");G.parent().append(F)}F.text(H);F.show()},showInlineErrorForName:function E(F){this.showInlineError(this.nameElement,F)},showInlineErrorForKey:function A(F){this.showInlineError(this.keyElement,F)},hideInlineError:function z(F){F.parent().find(".error").hide()},hideInlineErrorForName:function c(){this.hideInlineError(this.nameElement)},hideInlineErrorForKey:function u(){this.hideInlineError(this.keyElement)},setName:function i(F){this.nameElement.val(F)},getName:function s(){return this.nameElement.val()},setKey:function b(F){this.keyElement.val(F)},getKey:function o(){return this.keyElement.val().toUpperCase()},getLeadDisplayName:function v(){return this.leadDisplayElement.val()},getLeadUserName:function w(){return this.leadValueElement.val()},getAvatarUrlOfSelectedLead:function r(){var F=q.$dialogElement.find("#lead-single-select .aui-ss-entity-icon").css("background-image");if(!D.isUndefined(F)){var G=F.match(/^url\((.+)\)$/);return(G&&G[1])?G[1]:""}else{return""}},setKeyEdited:function l(F){this.keyEditedElement.val(F)},getKeyEdited:function B(){return this.keyEditedElement.val()},setKeyEdited:function l(){var F=this.getKey();if(this.keyElement.data("lastValue")!==F){this.keyEditedElement.val((F)?"true":"false")}this.keyElement.data("lastValue",F)},hasNameErrors:function d(){return this.nameElement.parent().find(".error").size()>0},getAddProjectForm:function h(){return g("#add-project-form")},get$FormFields:function k(){return q.$dialogElement.find(":input")},enterLoadingState:function j(){$submitButton=this.get$SubmitButton();if(!$submitButton.attr("disabled")){$backButton=this.get$BackButton();$submitButton.attr("disabled","disabled");$backButton.attr("disabled","disabled");$backButton.before(JIRA.Templates.ProjectTemplates.spinner({id:"addproject-loading"}));this.get$FormFields().attr("disabled","disabled");this.isSubmitting=true;return true}else{return false}},hideLoadingState:function x(){q.$dialogElement.find("#addproject-loading").remove();this.get$SubmitButton().removeAttr("disabled");this.get$BackButton().removeAttr("disabled");this.get$FormFields().removeAttr("disabled")},avoidDirtyFormWarning:function a(){if(g.fn.removeDirtyWarning){this.getAddProjectForm().removeDirtyWarning()}},hasInlineErrors:function C(){return q.$dialogElement.find(".field-group .error:visible").length!=0}})});define("jira/project-templates/add-project-view",["jira/project-templates/add-project-view-impl","jira/project-templates/dialog-view","jquery"],function(b,a,c){return new b({el:c(document),dialogView:a})});AJS.namespace("JPT.AddProjectView",null,require("jira/project-templates/add-project-view"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/AddProjectController.js' */
define("jira/project-templates/add-project-controller-impl",["jira/project-templates/add-project-view","jira/project-templates/project-key-generator","jira/project-templates/dialog-controller","jira/project-templates/config","jira/lib/class","jquery","underscore"],function(m,i,k,e,b,l,o){var d=AJS.contextPath();var c=AJS.trigger;return b.extend({postProjectCreationCallbacks:[],projectKeyValidationCallbacks:[],projectNamesUpperCased:[],init:function(p){this._window=p.window||window;o.bindAll(this,"projectCreatedHandler","projectValidationFailedHandler","nameTimeout","keyTimeout","submit")},initCreateShared:function(p){this.existingProjectData=p;this._initAddProject("Create with shared configuration")},initProjectTemplate:function(p){this.existingProjectData=undefined;this.webItemData=p;this._initAddProject(p.name)},_initAddProject:function(p){this.desiredKeyLength=4;this.lastKeyValidated="";this._getExistingProjects();i.init(this.desiredKeyLength,e.model.maxKeyLength);m.prepareDialog(p);m.draw({webItemData:this.webItemData||{},maxKeyLength:e.model.maxKeyLength,maxNameLength:e.model.maxNameLength,currentUserName:e.model.currentUserName,currentUserDisplayName:e.model.currentUserDisplayName,currentUserAvatarUrl:e.model.currentUserAvatarUrl,errors:{}})},_resetProjectLeadValues:function(){e.model.currentUserDisplayName="";e.model.currentUserName="";e.model.currentUserAvatarUrl=""},_hasFullyConfiguredProjectLead:function(){return m.getLeadDisplayName()&&m.getAvatarUrlOfSelectedLead()!=""},submit:function(p){var q;if(this.existingProjectData){q={key:m.getKey(),name:m.getName(),lead:m.getLeadUserName()&&m.getLeadUserName()[0]}}else{q=jQuery.param(m.getAddProjectForm().serializeArray().map(function(r){if(r.name==="key"){r.value=r.value.toUpperCase()}return r}))}if(m.hasInlineErrors()){return}if(m.enterLoadingState()){if(this._hasFullyConfiguredProjectLead()){e.model.currentUserDisplayName=m.getLeadDisplayName();e.model.currentUserName=e.model.currentUserDisplayName?m.getLeadUserName():"";e.model.currentUserAvatarUrl=m.getAvatarUrlOfSelectedLead()}else{this._resetProjectLeadValues()}if(this.existingProjectData){l.ajax({url:d+"/rest/project-templates/1.0/createshared/"+this.existingProjectData.existingProjectId,type:"POST",contentType:"application/json",data:JSON.stringify(q)}).done(this.projectCreatedHandler).fail(this.projectValidationFailedHandler)}else{l.ajax({url:d+(this.webItemData.demoProject?"/rest/jira-importers-plugin/1.0/demo/create":"/rest/project-templates/1.0/templates"),type:"POST",data:q,headers:{"X-Atlassian-Token":"no-check"}}).done(this.projectCreatedHandler).fail(this.projectValidationFailedHandler)}}},registerPostProjectCreationCallback:function(p){this.postProjectCreationCallbacks.push(p)},registerProjectKeyValidationCallback:function(p){this.projectKeyValidationCallbacks.push(p)},localStoragePrefix:"jira.projecttemplates.",projectCreatedHandler:function(q){if(this.existingProjectData){c("analyticsEvent",{name:"jira.project.templates.dialog.create.shared.project.create.success"})}else{if(this.webItemData.demoProject){c("analyticsEvent",{name:"jira.project.templates.dialog.create.demo.success"})}else{c("analyticsEvent",{name:"jira.project.templates.dialog.create.project.success"})}}m.avoidDirtyFormWarning();var p=this.localStoragePrefix;var r=["confluenceProject","fisheyeProject","crucibleProject","bambooProject"];o.map(r,function(s){if(q.remoteProjectLinks&&q.remoteProjectLinks[s]){localStorage.setItem(p+s,q.remoteProjectLinks[s])}});if(!o.isEmpty(this.postProjectCreationCallbacks)){k.dialog.addPage("post-project-created-page");o.each(this.postProjectCreationCallbacks,function(s){s(k.dialog,q.returnUrl,q.projectId,q.projectKey,q.projectName)})}else{this._window.location=d+q.returnUrl}},projectValidationFailedHandler:function(q,s){if(this.existingProjectData){c("analyticsEvent",{name:"jira.project.templates.dialog.create.shared.project.create.failure"})}else{if(this.webItemData.demoProject){c("analyticsEvent",{name:"jira.project.templates.dialog.create.demo.failure"})}else{c("analyticsEvent",{name:"jira.project.templates.dialog.create.project.failure"})}}var r={};if(this.isBadRequest(q)){r=JSON.parse(q.responseText)}else{if(this.isUnDefinedServerSideError(q)){r={errorMessages:["Hmm... we couldn\'t create your project due to an unknown error. Try refreshing the page to start again."]}}else{if(this.isDefinedServerSideError(q)){var p=JSON.parse(q.responseText);JIRA.Messages.showReloadErrorMsg(p.message);m.avoidDirtyFormWarning();this._window.location=d+p.returnUrl;return}else{if(this.isTimeoutError(s)){r={errorMessages:["Request timeout when creating project"]}}else{r={errorMessages:[AJS.format("Error creating project, {0}",q.responseText)]}}}}}m.draw({webItemData:this.webItemData||{},errors:r,currentName:m.getName(),currentKey:m.getKey(),currentUserDisplayName:e.model.currentUserDisplayName,currentUserName:e.model.currentUserName,currentUserAvatarUrl:e.model.currentUserAvatarUrl});m.hideLoadingState()},isBadRequest:function(p){return(p.status===400)},isUnDefinedServerSideError:function(p){if(p.status===500){try{JSON.parse(p.responseText)}catch(q){return true}}return false},isDefinedServerSideError:function(p){return p.status===500&&!o.isUndefined(JSON.parse(p.responseText).message)},isTimeoutError:function(p){return p==="timeout"},_updateAndValidateKey:function a(p){m.setKey(p);this.validateKey()},_shouldUpdateKey:function h(){return(m.getKeyEdited()!="true")},autofillKeyIfNeeded:function n(){if(this._shouldUpdateKey()){var p=i.generate(m.getName());if(p.length>1){this._updateAndValidateKey(p)}else{m.setKey("")}}},_doesProjectNameExists:function(q){var p;for(p in this.projectNamesUpperCased){if(q.toUpperCase()==this.projectNamesUpperCased[p]){return true}}return false},validateName:function(){var p=l.trim(m.getName());if(!p){return}if(p.length<e.model.minNameLength){m.showInlineErrorForName(AJS.format("The project name should be at least {0} characters in length.",e.model.minNameLength));return}if(p.length>e.model.maxNameLength){m.showInlineErrorForName(AJS.format("The project name must not exceed {0} characters in length.",e.model.maxNameLength));return}if(this._doesProjectNameExists(p)){m.showInlineErrorForName("A project with that name already exists.");return}m.hideInlineErrorForName()},_performKeyValidationChecks:function(p){var q=l.ajax({url:d+"/rest/api/latest/projectvalidate/key?key="+p.toUpperCase()});q.done(o.bind(function(s){if(s.errors&&s.errors.projectKey){m.showInlineErrorForKey(s.errors.projectKey)}else{var r=false;o.each(this.projectKeyValidationCallbacks,function(u){var t=u(p.toUpperCase());if(t.errors&&t.errors.projectKey){r=true;m.showInlineErrorForKey(t.errors.projectKey)}});if(!r){m.hideInlineErrorForKey()}}},this))},validateKey:function g(){var p=m.getKey();if(this.lastKeyValidated===p){return}if(p){this.lastKeyValidated=p;this._performKeyValidationChecks(p)}else{m.hideInlineErrorForKey()}},nameTimeout:function j(){this.autofillKeyIfNeeded()},keyTimeout:function f(){m.setKeyEdited()},_getExistingProjects:function(){if(this.projectNamesUpperCased.length>0){return this.projectNamesUpperCased}var p=l.ajax({url:d+"/rest/api/latest/project"});p.done(o.bind(function(q){this.projectNamesUpperCased=o.map(q,function(r){return r.name.toUpperCase()})},this))}})});define("jira/project-templates/add-project-controller",["jira/project-templates/add-project-controller-impl","jquery"],function(a,b){return new a({el:b(document)})});AJS.namespace("JPT.AddProjectController",null,require("jira/project-templates/add-project-controller"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/TemplateInfoView.js' */
define("jira/project-templates/template-info-view",["jira/project-templates/dialog-controller","require","backbone","jquery","underscore"],function(e,c,f,d,b){var a=AJS.trigger;return f.View.extend({initialize:function(g){b.bindAll(this,"draw","onNext")},draw:function(j,h){var k=e.addPage({name:"template-info",title:h,panelName:"template-info",backButton:true,submitButtonText:"Select",submitButtonCallback:this.onNext,submitButtonClass:"template-info-dialog-create-button"});var g=this._nameToObj(j)();e.dialog.getPanel(k.id,0).html(g);e.dialog.gotoPage(k.id);var i=b.find(k.button,function(l){return l.item&&l.item.hasClass("pt-submit-button")});if(i){setTimeout(function(){i.item.focus()},0)}},_nameToObj:function(g){return b.reduce(g.split("."),function(i,h){if(i){return i[h]}},window)},onNext:function(h){a("analyticsEvent",{name:"jira.project.templates.dialog.create.templateinfo.next"});var g=c("jira/project-templates/template-info-controller");g.next();return false}})});AJS.namespace("JPT.TemplateInfoView",null,require("jira/project-templates/template-info-view"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/TemplateInfoController.js' */
define("jira/project-templates/template-info-controller",["jira/project-templates/template-info-view","jira/lib/class","require","underscore"],function(e,a,c,b){var d=a.extend({init:function(f){b.bindAll(this,"initTemplateInfo","next")},initTemplateInfo:function(g){this.projectTemplateData=g;var f=new e();f.draw(g.infoSoyPath,g.name)},next:function(){var f=c("jira/project-templates/select-project-template-controller");f.openAddProjectPage(this.projectTemplateData)}});return new d()});AJS.namespace("JPT.TemplateInfoControllerImpl",null,require("jira/project-templates/template-info-controller"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/SelectProjectTemplateView.js' */
define("jira/project-templates/select-project-template-view",["jira/project-templates/dialog-controller","jira/project-templates/config","jira/featureflags/feature-manager","require","backbone","jquery","underscore"],function(d,b,i,c,g,e,h){var a=AJS.contextPath();var f=AJS.preventDefault;return{ROW_LENGTH:2,DIALOG_BODY_CLASS:"select-project-templates-page",DIALOG_WIDTH:800,draw:function(n,m){var j=c("jira/project-templates/select-project-template-controller");this.page=d.addPage({name:this.DIALOG_BODY_CLASS,title:n.demoProjects?"Create project with sample data":"Create project",panelName:"ProjectTemplatesListPanel",backButton:false,submitButtonText:"Next",submitButtonCallback:j.dialogSubmitted,submitButtonClass:"create-project-dialog-create-button"});function p(){if(j.isProjectTypesEnabled(n)){return JIRA.Templates.ProjectTemplates.renderProjectTemplatesGroupedByType({projectTemplatesByType:n.projectTemplatesGroupedByType})}return JIRA.Templates.ProjectTemplates.renderProjectTemplates({projectTemplates:n.projectTemplates})}d.dialog.getPanel(this.page.id,0).html(p());if(b.model.projectCount>=2&&!n.demoProjects){e(JIRA.Templates.ProjectTemplates.addWorkflowsLink({baseUrl:a})).appendTo(d.$dialogElement.find(".dialog-title"))}var o=d.$dialogElement.find(".create-project-dialog-create-button");var l=this;this.getTemplateItems().click(function(){var q=e(this);q.addClass("selected");l.getTemplateItems().not(this).removeClass("selected")}).dblclick(function(){o.click()}).focus(function(){e(this).click()});var k=this.get$TemplatesContainer();if(!n.demoProjects){e(JIRA.Templates.ProjectTemplates.footerLinks({showDemoLink:i.isFeatureEnabled("jira.onboarding.cyoa")})).prependTo(d.$dialogElement.find(".dialog-button-panel"))}this.bindKeyboardEvents(k);if(j.isProjectTypesEnabled(n)){if((n.projectTemplatesGroupedByType).length==0){o.attr("disabled","disabled")}}else{if((n.projectTemplates).length==0){o.attr("disabled","disabled")}}this.focusOnFirstTemplate(k,m);d.dialog.updateHeight();this.truncateTemplateDescriptions()},get$TemplatesContainer:function(){return d.$dialogElement.find(".templates")},focusOnFirstTemplate:function(j,k){if(k){this.getFirstTemplateItemOfProjectType(k).click()}else{this.getFirstTemplateItem().click()}setTimeout(function(){j.focus()},0)},getSelectedTemplateData:function(){var j=d.$dialogElement.find(".template.selected");return j.data()},getMoveDeltaForKey:function(j){switch(j){case 37:return -1;case 39:return +1;case 38:return -this.ROW_LENGTH;case 40:return +this.ROW_LENGTH}return 0},bindKeyboardEvents:function(j){j.bind("keydown",h.bind(function(k){var l=this.getMoveDeltaForKey(k.which);if(l){this.moveSelection(j,l);return f(k)}},this))},moveSelection:function(l,o){var k=l.find(".template");var n=k.filter(".selected");var m=k.index(n)+o;if(m<k.length&&m>=0){var j=k.eq(m);j.click().focus();this.scrollToSelectedElement(j)}},scrollToSelectedElement:function(l){var o=e(".dialog-panel-body.pt-content");var j=o.offset().top;var k=l.offset().top;var n=k+l.height();var m=j+o.height();if(k<j){o.scrollTop(o.scrollTop()-(j-k))}else{if(n>(j+o.height())){o.scrollTop(o.scrollTop()+n-m)}}},get$NextButton:function(){return d.$dialogElement.find(".create-project-dialog-create-button")},disableNextButton:function(){this.get$NextButton().attr("disabled","disabled")},truncateTemplateDescriptions:function(){var j=AJS.Meta.get("user-locale");var k="word";if(j==="ja_JP"){k="letter"}d.$dialogElement.find(".template-description").each(function(){e(this).dotdotdot({wrap:k,lastCharacter:{remove:[" ",",",";",".","!","?","。"],noEllipsis:[]}})})},getFirstTemplateItem:function(){return this.getTemplateItems().first()},getFirstTemplateItemOfProjectType:function(j){return this.getTemplateItems().filter("#project-template-group-"+j+" *").first()},getTemplateItems:function(){return d.$dialogElement.find(".template")}}});AJS.namespace("JPT.SelectProjectTemplateView",null,require("jira/project-templates/select-project-template-view"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/SelectProjectTemplateController.js' */
define("jira/project-templates/select-project-template-controller",["jira/project-templates/select-project-template-view","jira/project-templates/template-info-controller","jira/project-templates/add-project-controller","jira/project-templates/dialog-controller","jira/project-templates/dialog-view","jira/project-templates/config","wrm/context-path","jquery","underscore"],function(f,h,k,l,o,g,n,m,p){var e=n();var d={init:function q(s,r){f.draw(s,r)},isProjectTypesEnabled:function c(r){return r.projectTemplatesGroupedByType!=null},loadProjectTemplatesData:function j(){return m.ajax({url:e+"/rest/project-templates/1.0/templates",type:"GET"})},loadDemoProjectTemplatesData:function j(){return m.ajax({url:e+"/rest/project-templates/1.0/templates/demo-projects",type:"GET"}).done(function(r){r.demoProjects=true;return r})},dialogSubmitted:function b(){var r=f.getSelectedTemplateData();l.hideDialogFromNewUser("templateselected");d.raiseAtlassianEvent(r.itemModuleCompleteKey);if(!p.isUndefined(r.infoSoyPath)){h.initTemplateInfo(r)}else{d.openAddProjectPage(r)}},openAddProjectPage:function i(r){if(!r){o.showErrorMessage("An error occurred while trying to contact Jira");return}if(r.createProject){k.initProjectTemplate(r)}else{l.dialog.addPage("blank-template-page");m("body").trigger(r.itemModuleCompleteKey,l.dialog)}},raiseAtlassianEvent:function a(r){g.model.selectedTemplate=r;if(AJS.EventQueue){AJS.EventQueue.push({name:"projecttemplates.templateselected",properties:{selectedTemplate:r}})}}};return d});AJS.namespace("JPT.SelectProjectTemplateController",null,require("jira/project-templates/select-project-template-controller"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/CreateSharedView.js' */
define("jira/project-templates/create-shared-view",["jira/project-templates/dialog-controller","jira/project-templates/dialog-view","jira/ajs/select/scrollable-single-select","jira/ajs/select/suggestion-collection-model","require","backbone","jquery"],function(d,h,g,i,c,j,e){var f=AJS.InlineDialog;var b=AJS.trigger;var a=j.View.extend({events:{"submit #create-shared-project-form":"onSubmitForm"},page:undefined,prepareDialog:function(l){var k=c("jira/project-templates/create-shared-controller");this.page=d.addPage({name:"create-shared-project",title:l,panelName:"create-shared-project",backButton:true,submitButtonText:"Next",submitButtonCallback:k.dialogSubmitted,submitButtonClass:"create-shared-dialog-button"})},draw:function(l){d.dialog.gotoPage(this.page.id);var k=JIRA.Templates.ProjectTemplates.createSharedProjectForm({projectSuggestions:JSON.stringify(l.projectSuggestions)});d.dialog.getPanel(this.page.id,0).html(k);this._createProjectPicker();var m=d.$dialogElement.find("#shared-help-icon");if(m.length){new f(m,"shared-project-help-popup",function(p,o,n){p.html(JIRA.Templates.ProjectTemplates.sharedHelp());n()},{width:330,offsetX:-30})}d.$dialogElement.find(".dialog-button-panel button").removeAttr("disabled")},showProjectMissingError:function(){this._clearFormErrors();this._getProjectPickerInput().after(aui.form.fieldError({extraClasses:"project-picker-missing-error",message:"Please select an existing project first."}))},drawEmptyInfo:function(){var k=JIRA.Templates.ProjectTemplates.noProjects();d.dialog.getPanel(this.page.id,0).html(k);d.$dialogElement.find(".dialog-button-panel button").hide()},drawError:function(k){d.dialog.getPanel(this.page.id,0).html(JIRA.Templates.errorMsg({closable:false,msg:k}))},drawLoading:function(){d.dialog.gotoPage(this.page.id);var k=JIRA.Templates.ProjectTemplates.loading();d.dialog.getPanel(this.page.id,0).html(k);d.$dialogElement.find(".dialog-spinner").spin();d.$dialogElement.find(".dialog-button-panel button").attr("disabled","disabled")},_clearFormErrors:function(){d.$dialogElement.find(".project-picker-missing-error").remove()},_getProjectPickerInput:function(){return d.$dialogElement.find("#project-picker")},onSubmitForm:function(l){this._clearFormErrors();var k=c("jira/project-templates/create-shared-controller");k.dialogSubmitted();return false},_getExtraInfoMessage:function(){return d.$dialogElement.find(".create-shared-info")},_createProjectPicker:function(){this._getExtraInfoMessage().hide();this.projectSelect=new g({element:this._getProjectPickerInput(),revertOnInvalid:true,pageSize:50,pagingThreshold:100,model:i});this.projectSelect.$field.focus();var k=this;this._getProjectPickerInput().on("selected",function(m,l){if(l.value()){b("analyticsEvent",{name:"jira.project.templates.dialog.create.shared.project.selected"});k._getExtraInfoMessage().show()}})},getSelectedProject:function(){return this.projectSelect.getSelectedDescriptor()&&this.projectSelect.getSelectedDescriptor().value()}});return new a({el:e(document),dialogView:h})});AJS.namespace("JPT.CreateSharedView",null,require("jira/project-templates/create-shared-view"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/CreateSharedController.js' */
define("jira/project-templates/create-shared-controller-impl",["jira/project-templates/add-project-controller","jira/project-templates/create-shared-view","jira/lib/class","jquery","underscore"],function(e,f,a,d,c){var b=AJS.contextPath();return a.extend({init:function(g){this._window=g.window||window;c.bindAll(this,"dialogSubmitted")},initCreateShared:function(){f.prepareDialog("Create with shared configuration");var g=this;this._getProjectSuggestions().done(function(h){if(g._hasSuggestions(h)){f.draw({projectSuggestions:h})}else{f.drawEmptyInfo()}}).fail(function(){f.drawError("An error occurred while trying to contact Jira")});f.drawLoading()},_hasSuggestions:function(h){var g=false;d.each(h,function(j,k){if(k&&k.items&&k.items.length>0){g=true}});return g},_getProjectSuggestions:function(){return d.ajax({url:b+"/rest/project-templates/1.0/createshared"})},dialogSubmitted:function(){var g=f.getSelectedProject();if(g){e.initCreateShared({existingProjectId:g})}else{f.showProjectMissingError()}}})});define("jira/project-templates/create-shared-controller",["jira/project-templates/create-shared-controller-impl","jquery"],function(a,b){return new a({el:b(document)})});AJS.namespace("JPT.CreateSharedController",null,require("jira/project-templates/create-shared-controller"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/RemoteProjectsCreatedMessage.js' */
var $=require("jquery");$(function(){var i=AJS.format;var e=require("jira/project-templates/add-project-controller");var b=localStorage.getItem(e.localStoragePrefix+"confluenceProject");var j=localStorage.getItem(e.localStoragePrefix+"fisheyeProject");var g=localStorage.getItem(e.localStoragePrefix+"crucibleProject");var d=localStorage.getItem(e.localStoragePrefix+"bambooProject");localStorage.removeItem(e.localStoragePrefix+"confluenceProject");localStorage.removeItem(e.localStoragePrefix+"fisheyeProject");localStorage.removeItem(e.localStoragePrefix+"crucibleProject");localStorage.removeItem(e.localStoragePrefix+"bambooProject");var k;function c(m,l){return JIRA.Templates.ProjectTemplates.formatAnchor({href:m,body:l,title:l})}function a(n,o,m,p){var l=[];l.push("a Jira project");if(n){l.push(c(n,"a Confluence space"))}if(o){l.push(c(o,"a FishEye repository"))}if(m){l.push(c(m,"a Crucible project"))}if(p){l.push(c(p,"a Bamboo project"))}return l}function h(m,o,l,r){var q="The following entities were created: {0} and {1}.";var n=a(m,o,l,r);var p=n.pop();return(n.length>0)?i(q,n.join(", "),p):null}function f(l){var m=$(l).offset();if(m){window.scrollTo(m.left,m.top)}}if(b||j||g||d){k=h(b,j,g,d);if(k){JIRA.Messages.showSuccessMsg(k,{closeable:true})}f("#project-config-webpanel-summary-settings")}});;
;
/* module-key = 'com.atlassian.jira-core-project-templates:jira-core-project-templates-resources', location = '/soy/CoreProjectTemplates.soy' */
// This file was automatically generated from CoreProjectTemplates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.ProjectTemplates.CoreTemplates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.ProjectTemplates == 'undefined') { JIRA.Templates.ProjectTemplates = {}; }
if (typeof JIRA.Templates.ProjectTemplates.CoreTemplates == 'undefined') { JIRA.Templates.ProjectTemplates.CoreTemplates = {}; }


JIRA.Templates.ProjectTemplates.CoreTemplates.taskManagementInfoDialog = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog({description: 'Create simple tasks, organize them and get them done. You can use this project to manage your tasks or assign them to someone else.', projectTemplate: 'taskManagement'});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.taskManagementInfoDialog.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.taskManagementInfoDialog';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.projectManagementInfoDialog = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog({description: 'Create your tasks, organize and track their progress, and deliver your work on time. Estimations and time tracking allow you to report on where your project is at any stage.', projectTemplate: 'projectManagement'});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.projectManagementInfoDialog.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.projectManagementInfoDialog';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.processManagementInfoDialog = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog({description: 'Create your tasks and track them at every step, from start to finish. You can use this project to review documentation, approve expenses, or other processes.', projectTemplate: 'processManagement'});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.processManagementInfoDialog.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.processManagementInfoDialog';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.boardBetaInfoDialog = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog({description: 'Visualize work across your team with a board.', projectTemplate: 'projectManagement', issueTypesHtml: '' + JIRA.Templates.ProjectTemplates.CoreTemplates.taskIssueType(null)});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.boardBetaInfoDialog.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.boardBetaInfoDialog';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog = function(opt_data, opt_ignored) {
  return '<div><div class="top-panel"><p>' + soy.$$escapeHtml(opt_data.description) + '</p></div><div class="left-panel"><h6>' + soy.$$escapeHtml('Issue Types') + '</h6><ul class="project-template-issuetype-list">' + ((opt_data.issueTypesHtml != null) ? soy.$$filterNoAutoescape(opt_data.issueTypesHtml) : JIRA.Templates.ProjectTemplates.CoreTemplates.taskIssueType(null) + JIRA.Templates.ProjectTemplates.CoreTemplates.subtaskIssueType(null)) + '</ul></div><div class="right-panel"><h6>' + soy.$$escapeHtml('Workflow') + '</h6><div class="workflow ' + soy.$$escapeHtml(opt_data.projectTemplate) + '"></div></div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.issueType = function(opt_data, opt_ignored) {
  return '<li><span class="issuetype-list-label"><span class="issuetype-icon ' + soy.$$escapeHtml(opt_data.iconKey) + '"></span><span class="issuetype-name">' + soy.$$escapeHtml(opt_data.label) + '</span></span></li>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.issueType.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.issueType';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.taskIssueType = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.issueType({iconKey: 'task', label: 'Task'});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.taskIssueType.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.taskIssueType';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.subtaskIssueType = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.issueType({iconKey: 'subtask', label: 'Sub-task'});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.subtaskIssueType.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.subtaskIssueType';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-help-analytics', location = 'includes/js/rapid/ui/help/HelpAnalytics.js' */
AJS.$(function(){var e=require("jira-agile/rapid/analytics-tracker"),r=function(r){return new e(r).setAsync(!1)};AJS.$("#gh_view_help").click(function(e){return r("gh.gethelp").trigger("usermenu","docs"),n(AJS.$(this))}),AJS.$("#greenhopper-my-jira-home-enablement").click(function(e){return r("gh.myjirahome").trigger("usermenu","enabled"),n(AJS.$(this))}),AJS.$("#greenhopper-my-jira-home-enablement-ondemand").click(function(e){return r("gh.myjirahome").trigger("usermenu","set"),n(AJS.$(this))}),AJS.$("#greenhopper-my-jira-home-disablement-ondemand").click(function(e){return r("gh.myjirahome").trigger("usermenu","disable"),n(AJS.$(this))}),AJS.$("#greenhopper-my-jira-home-set").click(function(e){return r("gh.myjirahome").trigger("usermenu","set"),n(AJS.$(this))}),AJS.$("#beta_gh\\.configuration\\.rapid\\.removal").click(function(e){var n=AJS.$(this),t=n.attr("checked")?"on":"off";return r("gh.labs.feature").trigger("rapid_removal",t),!0}),AJS.$(document).delegate("#js-classic-link_lnk","click",function(e){return r("gh.agile.menu").trigger("classic"),!0});var n=function(e){return"_blank"==e.attr("target")||(setTimeout('document.location = "'+e.attr("href")+'"',100),!1)}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-help-analytics', location = 'includes/js/rapid/Analytics.js' */
define("jira-agile/rapid/analytics",["jquery","underscore"],function(n,a){"use strict";function e(){n(document).on(l,function(n,a){i(a)})}function i(n){var e={},i=n.category;a.isUndefined(n.action)||(i=i+"."+n.action),a.isUndefined(n.label)||(e.label=n.label),a.isUndefined(n.value)||(e.value=n.value),AJS.trigger("analytics",{name:i,data:e})}GH.AnalyticsEnabled=!0;var l="gh.analytics.async";e();var t={};return t.isEnabled=function(){return GH.AnalyticsEnabled},t.setEnabled=function(n){return GH.AnalyticsEnabled=n},t}),AJS.namespace("GH.Analytics",null,require("jira-agile/rapid/analytics"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:project-template-resources', location = '/projecttemplates/soy/ProjectTemplates.soy' */
// This file was automatically generated from ProjectTemplates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.projecttemplates.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.projecttemplates == 'undefined') { GH.tpl.projecttemplates = {}; }


GH.tpl.projecttemplates.kanbanInfoPageJira7 = function(opt_data, opt_ignored) {
  return '' + GH.tpl.projecttemplates.templateInfoDialog({description: 'Use this project to optimise the flow of work in your development project. Add constraints to work-in-progress, analyze how long it takes to complete issues, find bottlenecks in your process, and more. This project includes a Kanban board, a basic Agile workflow and issue type configuration, which you can change later on.', extraIssueTypes: '<li><span class="issuetype-list-label"><span class="issuetype-icon story"></span><span class="issuetype-name">' + soy.$$escapeHtml('Story') + '</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon epic"></span><span class="issuetype-name">' + soy.$$escapeHtml('Epic') + '</span></span></li>', workflowScreenshotClass: 'kanban-workflow-screenshot'});
};
if (goog.DEBUG) {
  GH.tpl.projecttemplates.kanbanInfoPageJira7.soyTemplateName = 'GH.tpl.projecttemplates.kanbanInfoPageJira7';
}


GH.tpl.projecttemplates.scrumInfoPageJira7 = function(opt_data, opt_ignored) {
  return '' + GH.tpl.projecttemplates.templateInfoDialog({description: 'Use this project to manage your Agile development work. Create a backlog, organise work into sprints, check progress using reports, and more. This project includes a Scrum board, a basic Agile workflow and issue type configuration, which you can change later on.', extraIssueTypes: '<li><span class="issuetype-list-label"><span class="issuetype-icon story"></span><span class="issuetype-name">' + soy.$$escapeHtml('Story') + '</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon epic"></span><span class="issuetype-name">' + soy.$$escapeHtml('Epic') + '</span></span></li>', workflowScreenshotClass: 'scrum-workflow-screenshot'});
};
if (goog.DEBUG) {
  GH.tpl.projecttemplates.scrumInfoPageJira7.soyTemplateName = 'GH.tpl.projecttemplates.scrumInfoPageJira7';
}


GH.tpl.projecttemplates.softwareDevelopmentInfoPageJira7 = function(opt_data, opt_ignored) {
  return '' + GH.tpl.projecttemplates.templateInfoDialog({description: 'Use this project to work on new features for your product and also track any bugs. This project provides you with a basic workflow and issue type configuration, which you can change later on.', extraIssueTypes: '<li><span class="issuetype-list-label"><span class="issuetype-icon improvement"></span><span class="issuetype-name">' + soy.$$escapeHtml('Improvement') + '</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon newfeature"></span><span class="issuetype-name">' + soy.$$escapeHtml('New Feature') + '</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon epic"></span><span class="issuetype-name">' + soy.$$escapeHtml('Epic') + '</span></span></li>', workflowScreenshotClass: 'basic-development-workflow-screenshot'});
};
if (goog.DEBUG) {
  GH.tpl.projecttemplates.softwareDevelopmentInfoPageJira7.soyTemplateName = 'GH.tpl.projecttemplates.softwareDevelopmentInfoPageJira7';
}


GH.tpl.projecttemplates.templateInfoDialog = function(opt_data, opt_ignored) {
  return '<div><div class="top-panel"><p>' + soy.$$escapeHtml(opt_data.description) + '</p></div><div class="left-panel"><h6>' + soy.$$escapeHtml('Issue Types') + '</h6><ul class="project-template-issuetype-list" ><li><span class="issuetype-list-label"><span class="issuetype-icon bug"></span><span class="issuetype-name">' + soy.$$escapeHtml('Bug') + '</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon task"></span><span class="issuetype-name">' + soy.$$escapeHtml('Task') + '</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon subtask"></span><span class="issuetype-name">' + soy.$$escapeHtml('Sub-task') + '</span></span></li>' + soy.$$filterNoAutoescape(opt_data.extraIssueTypes) + '</ul></div><div class="right-panel"><h6>' + soy.$$escapeHtml('Workflow') + '</h6><div class="workflow ' + soy.$$escapeHtml(opt_data.workflowScreenshotClass) + '"></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.projecttemplates.templateInfoDialog.soyTemplateName = 'GH.tpl.projecttemplates.templateInfoDialog';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-globalkeyboardshortcuts', location = 'includes/js/gh-globalkeyboardshortcuts.js' */
define("jira-agile/gh-globalkeyboardshortcuts",["jira-agile/rapid/ui/notification","jira/ajs/ajax/smart-ajax","jira/data/session-storage","jira/issuenavigator/issue-navigator/shortcuts","jira/issue","jira/issuenavigator/issue-navigator","jira/dialog/dialog","jquery","jira/util/browser"],function(e,s,o,t,a,i,n,r,u){var c={},d=require("wrm/context-path");return c.findSelectedIssueId=function(){var e;return i&&i.getSelectedIssueId&&(e=i.getSelectedIssueId()),!e&&a&&a.getIssueId&&(e=a.getIssueId()),e},c.goToAgile=function(){var e="/secure/RapidBoard.jspa",s=d();s&&(e=s+e),window.location.href=e},c.followLink=function(e){var s=r(e);s.length>0&&("a"===s[0].nodeName.toLowerCase()||"link"===s[0].nodeName.toLowerCase())&&(s.click(),window.location.href=s.attr("href"))},c.sendToTop=function(e,o){if(window.GH&&GH.RapidBoard&&GH.Shortcut&&GH.Shortcut.sendToTop)return GH.Shortcut.sendToTop(e),void c.closeDialogAndPopMessage();if("Action"==e){var t=o||c.findSelectedIssueId(),a=d()||"";s.makeRequest({type:"post",contentType:"application/json",url:a+"/rest/greenhopper/1.0/rank/global/first",data:JSON.stringify({issueId:t}),success:c.handleRankSuccess}),r(document).trigger("gh.global.rankissues",{action:"rankToTop"+(e?e:""),count:1})}},c.sendToBottom=function(e,o){if(window.GH&&GH.RapidBoard&&GH.Shortcut&&GH.Shortcut.sendToBottom)return GH.Shortcut.sendToBottom(e),void c.closeDialogAndPopMessage();if("Action"==e){var t=o||c.findSelectedIssueId(),a=d()||"";s.makeRequest({type:"post",contentType:"application/json",url:a+"/rest/greenhopper/1.0/rank/global/last",data:JSON.stringify({issueId:t}),success:c.handleRankSuccess}),r(document).trigger("gh.global.rankissues",{action:"rankToBottom"+(e?e:""),count:1})}},c.closeDialogAndPopMessage=function(){i.isNavigator()?u.reloadViaWindowLocation():(n&&n.current&&n.current.hide(),window.GH?(GH.RapidBoard&&e&&e.showIssueMessage&&e.showIssueMessage(),window.Boards&&window.Boards.refreshAll()):i&&t&&t.flashIssueRow&&t.flashIssueRow())},c.handleRankSuccess=function(e,s,o){c.storeSuccessMessage(e.issueId,e.issueKey,"thanks_issue_updated"),c.closeDialogAndPopMessage()},c.storeSuccessMessage=function(e,s,t){var a=o;try{a.setItem("selectedIssueId",e),a.setItem("selectedIssueKey",s),a.setItem("selectedIssueMsg",t)}catch(e){}},c}),require(["jquery","jira-agile/gh-globalkeyboardshortcuts"],function(e,s){e(document).delegate(".issueaction-greenhopper-rank-top-operation","click",function(o){o.preventDefault();var t=e(this).attr("data-issueid");s.sendToTop("Action",t)}),e(document).delegate(".issueaction-greenhopper-rank-bottom-operation","click",function(o){o.preventDefault();var t=e(this).attr("data-issueid");s.sendToBottom("Action",t)})}),AJS.namespace("gh.app.globalkeyboardshortcuts",null,require("jira-agile/gh-globalkeyboardshortcuts"));;
;
/* module-key = 'com.atlassian.jira.plugin.ext.bamboo:bamboo-soy-resources', location = 'templates/plugins/bamboo/components.soy' */
// This file was automatically generated from components.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.components.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.components == 'undefined') { bamboo.components = {}; }


bamboo.components.pageHeader = function(opt_data, opt_ignored) {
  return '' + aui.page.pageHeader({content: '' + ((opt_data.headerImageContent) ? aui.page.pageHeaderImage({content: opt_data.headerImageContent}) : '') + aui.page.pageHeaderMain({content: opt_data.headerMainContent}) + ((opt_data.headerActionsContent) ? aui.page.pageHeaderActions({content: opt_data.headerActionsContent}) : '')});
};
if (goog.DEBUG) {
  bamboo.components.pageHeader.soyTemplateName = 'bamboo.components.pageHeader';
}


bamboo.components.icon = function(opt_data, opt_ignored) {
  return '<span class="bamboo-icon bamboo-icon-' + soy.$$escapeHtml(opt_data.type) + '"' + ((opt_data.text && opt_data.showTitle) ? ' title="' + soy.$$escapeHtml(opt_data.text) + '"' : '') + '>' + ((opt_data.text) ? '<span>' + soy.$$escapeHtml(opt_data.text) + '</span>' : '') + '</span>';
};
if (goog.DEBUG) {
  bamboo.components.icon.soyTemplateName = 'bamboo.components.icon';
}


bamboo.components.buildDetail = function(opt_data, opt_ignored) {
  return '<dl><dt class="' + soy.$$escapeHtml(opt_data.keyClass) + '">' + soy.$$escapeHtml(opt_data.key) + '</dt><dd>' + soy.$$filterNoAutoescape(opt_data.value) + '</dd></dl>';
};
if (goog.DEBUG) {
  bamboo.components.buildDetail.soyTemplateName = 'bamboo.components.buildDetail';
}


bamboo.components.artifacts = function(opt_data, opt_ignored) {
  var output = '<ul id="shared-artifacts">';
  var artifactList42 = opt_data.artifacts;
  var artifactListLen42 = artifactList42.length;
  for (var artifactIndex42 = 0; artifactIndex42 < artifactListLen42; artifactIndex42++) {
    var artifactData42 = artifactList42[artifactIndex42];
    output += bamboo.components.artifactItem(soy.$$augmentMap(artifactData42, {id: artifactData42.name, url: artifactData42.link.href}));
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  bamboo.components.artifacts.soyTemplateName = 'bamboo.components.artifacts';
}


bamboo.components.artifactItem = function(opt_data, opt_ignored) {
  return '<li>' + bamboo.components.icon({type: 'artifact-shared'}) + ' <a class="artifact-link" id="artifact-' + soy.$$escapeHtml(opt_data.id) + '" href="' + soy.$$escapeHtml(opt_data.url) + '" title="' + soy.$$escapeHtml(opt_data.name) + '">' + soy.$$escapeHtml(opt_data.name) + '</a><span class="filesize">(' + soy.$$escapeHtml(opt_data.prettySizeDescription) + ')</span></li>';
};
if (goog.DEBUG) {
  bamboo.components.artifactItem.soyTemplateName = 'bamboo.components.artifactItem';
}


bamboo.components.labels = function(opt_data, opt_ignored) {
  var output = '<ul class="labels">';
  var labelList65 = opt_data.labels;
  var labelListLen65 = labelList65.length;
  for (var labelIndex65 = 0; labelIndex65 < labelListLen65; labelIndex65++) {
    var labelData65 = labelList65[labelIndex65];
    output += bamboo.components.labelItem(soy.$$augmentMap(labelData65, {url: opt_data.baseBambooUrl + '/browse/label/' + labelData65.name}));
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  bamboo.components.labels.soyTemplateName = 'bamboo.components.labels';
}


bamboo.components.labelItem = function(opt_data, opt_ignored) {
  return '<li><a class="lozenge" href="' + soy.$$escapeHtml(opt_data.url) + '" title="' + soy.$$escapeHtml(opt_data.name) + '"><span>' + soy.$$escapeHtml(opt_data.name) + '</span></a></li>';
};
if (goog.DEBUG) {
  bamboo.components.labelItem.soyTemplateName = 'bamboo.components.labelItem';
}


bamboo.components.errorResponseMessage = function(opt_data, opt_ignored) {
  return '' + bamboo.components.auiWarning({body: '' + ((opt_data.errorMessage.messageBody) ? '<p>' + soy.$$escapeHtml(opt_data.errorMessage.messageBody) + '</p>' : (opt_data.errorMessage.oauthCallback) ? '<p><a href="' + soy.$$filterNoAutoescape(opt_data.errorMessage.oauthCallback) + '&amp;redirectUrl=' + soy.$$filterNoAutoescape(opt_data.oAuthDanceReturnUrl) + '">' + soy.$$escapeHtml('Log in \x26 approve') + '</a></p>' : '<p>' + soy.$$escapeHtml(opt_data.errorMessage.message) + '</p>')});
};
if (goog.DEBUG) {
  bamboo.components.errorResponseMessage.soyTemplateName = 'bamboo.components.errorResponseMessage';
}


bamboo.components.auiWarning = function(opt_data, opt_ignored) {
  return '<div class="aui-message aui-message-warning warning">' + soy.$$filterNoAutoescape(opt_data.body) + '</div>';
};
if (goog.DEBUG) {
  bamboo.components.auiWarning.soyTemplateName = 'bamboo.components.auiWarning';
}
;
;
/* module-key = 'com.atlassian.administration.atlassian-admin-quicksearch-jira:admin-quicksearch-webresources', location = 'com/atlassian/administration/quicksearch/jira/js/adminQuickNav.js' */
/**
 * Shifter group for admin search
 */
require([
    'jquery',
    'underscore',
    'jira/ajs/ajax/smart-ajax',
    'jira/shifter',
    'wrm/context-path'
], function (jQuery,
             _,
             SmartAjax,
             Shifter,
             contextPath) {
    Shifter.register(function () {
        var suggestionsDeferred = jQuery.Deferred();

        function formatItem(item) {
            return {
                label: item.label,
                value: item.linkUrl,
                keywords: item.aliases
            };
        }

        function getItemsInSection(section) {
            return _.map(section.items, formatItem).concat(_.map(section.sections, getItemsInSection));
        }

        function formatResponse(data) {
            return _.flatten(getItemsInSection(data));
        }

        SmartAjax.makeRequest({
            dataType: 'json',
            url: contextPath() + '/rest/adminquicksearch/latest/links/default'
        })
            .pipe(formatResponse)
            .done(function (suggestions) {
                suggestionsDeferred.resolve(suggestions);
            })
            .fail(function () {
                suggestionsDeferred.reject();
            });

        return {
            id: 'admin',
            name: "Administration",
            weight: 500,
            getSuggestions: function () {
                return suggestionsDeferred;
            },
            onSelection: function (value) {
                window.location = value;
                return jQuery.Deferred();
            }
        };
    });
});
;
;
/* module-key = 'com.atlassian.plugins.browser.metrics.browser-metrics-plugin:api', location = 'probe.js' */
!function(){var n,t,e,r,i,o,u,a,c,s,f,l,h,d,y,p,v,m,w;n=function(){return window}(),t=function(n){return!(!n.performance||!n.performance.now)}(n),e=[],r=function(n){return function(t){n.unshift({addReporter:t})}}(e),i=function(n){return function(t){for(;n.length;)t(n.splice(0,1)[0]);n.unshift=t,n.push=t}}(e),o=function(n,t){return function(e){n.push({end:{key:e.key,timestamp:t.performance.now()}})}}(e,n),u=function(n){return n.document}(n),a=function(n){return n.Promise}(n),c=function(){function n(){this._={}}var t=function(e){var r=e[0],i=e[1];i instanceof n?e.length>=3?Object.keys(i._).forEach(function(n){t([r,i._[n],n].concat(e.slice(2)))}):Object.keys(i._).forEach(function(n){t([r,i._[n],n])}):Array.isArray(i)&&r.apply(null,[i].concat(e.slice(2)))};n.prototype.forEach=function(n){t([n,this])},n.prototype.add=function(){for(var t=this,e=null,r=null,i=0;i<arguments.length;i++){if(r=arguments[i],i===arguments.length-1&&Array.isArray(t)){t.push(r);break}i<arguments.length-2&&!t._.hasOwnProperty(r)?t._[r]=new n:i!==arguments.length-2||t._.hasOwnProperty(r)||(t._[r]=[]),t=t._[r],e=r}};var e=function(n,t){if(0!==n.length){var r=n.pop(),i=r[0],o=r[1];i===t?e(n,i):o._.hasOwnProperty(t)&&delete o._[t],0===Object.keys(o).length&&e(n,i)}};return n.prototype.remove=function(){for(var n,t=!1,r=null,i=this,o=[[r,i]],u=null,a=0;a<arguments.length;a++)if(u=arguments[a],Array.isArray(i))n=i.indexOf(u),n>-1&&(i.splice(n,1),0===i.length&&o.length>1&&e(o,r),t=!0);else{if(!i._.hasOwnProperty(u))break;a===arguments.length-1&&(delete i._[u],0===Object.keys(i).length&&o.length>1&&e(o,r),t=!0),r=u,i=i._[u],o.push([r,i])}return t},n.prototype.get=function(n){return this._.hasOwnProperty(n)?this._[n]:[]},n}(),s=function(n,t,e,r){function i(n){return!n||null==n||"null"===n||"undefined"===n}function o(t,e,r){l||(c.observe(n,{attributes:!0,childList:!0,subtree:!0}),l=!0),s.add(t,e,r)}function u(t,e){var r=n.querySelectorAll(t);return r.length&&(i(e)||Array.prototype.every.call(r,function(n){return!n.querySelector(e)}))}function a(n,e){var r;n.forEach||(n=[n]),!i(e)&&Array.isArray(e)&&(e=e.join(", "));var a=new t(function(i,a){var c=[],f=[];n.forEach(function(n){var r,i;u(n,e)||(r=new t(function(t){o(n,e,t),i=function(){s.remove(n,e,t)},f.push(i)}),c.push(r))});var l=function(){f.forEach(function(n){n()})};t.all(c).then(l).then(i,a),r=function(){l(),a()}});return a.dismiss=r,a}var c,s,f=r.MutationObserver,l=!1;return f&&t?(s=new e,c=new f(function(){s.forEach(function(n,t,e){u(e,t)&&(n.forEach(function(n){n()}),s.remove(e,t))})}),a):void 0}(u,a,c,n),f=function(n){return!!n}(s),l=function(n){function t(){c(),n.body.classList.add(u)}function e(){function e(){n.body.classList.remove(u),n.removeEventListener(i,s),n.removeEventListener(o,c),r=null}if(r)return r;var c,s,f=!1;return r=new Promise(function(e,r){"visible"!==n.visibilityState?r():(s=function(){f=!0},c=function(n){n.animationName===a&&(f?r():e())},n.addEventListener(i,s),n.addEventListener(o,c),t())}),r.then(e,e),r}var r,i="visibilitychange",o="animationend",u="browser-metrics-visibility-test",a="browser-metrics-visibility-animation",c=function(){var t=n.createElement("style"),e=["."+u+" {","-webkit-animation-duration: 0.001s;","animation-duration: 0.001s;","-webkit-animation-name: "+a+";","animation-name: "+a+";","-webkit-animation-iteration-count: 1;","animation-iteration-count: 1;","}","@keyframes "+a+" {}","@-webkit-keyframes "+a+" {","from {}","to {}","}"].join("\n");t.type="text/css",t.styleSheet?t.styleSheet.cssText=e:t.appendChild(n.createTextNode(e)),n.head.appendChild(t),c=function(){}};return e}(u),h=function(n,t,e,r,i){function o(n){return Array.isArray(n)||(n=[n]),n.map(function(n){return"string"==typeof n?{selector:n,hasNone:null}:n})}function u(n){return Array.isArray(n)||"string"==typeof n}function a(n){return u(n)&&(n={rules:n}),n.rules=o(n.rules),n.requirePaint="undefined"==typeof n.requirePaint?!1:n.requirePaint,n}return function(i,o){if(n){i=a(i);var u=function(){},c=new e(function(n,r){var o=[],a=i.rules.map(function(n){var e=new t(n.selector,n.hasNone);return o.push(function(){e.dismiss()}),e});u=function(){o.forEach(function(n){n()}),r()},e.all(a).then(function(n){}).then(n,r)});return c.cancel=u,i.requirePaint&&(c=c.then(r)),"function"==typeof o&&c.then(o),c}}}(f,s,a,l,n),d=function(n,t){function e(){return r}var r=!1;return n.addEventListener("DOMContentLoaded",function(){t.setTimeout(function(){r=!0})}),e}(u,n),y=function(n,t,e,r,i,o,u){function a(){c=null}var c;return function(o){var s="isInitial"in o?o.isInitial:i()===!1,f="threshold"in o?o.threshold:1e3,l="reporters"in o?o.reporters:[];r.push({start:{key:o.key,isInitial:s,threshold:f,timestamp:s?0:u.performance.now(),reporters:Array.isArray(l)?l:[l]}}),c&&(c.cancel(),a()),o.ready&&e&&(c=n(o.ready),c.then(function(){t({key:o.key})}).then(a,a))}}(h,o,f,e,d,a,n),p=function(n){return function(t){n.push({subscribe:t})}}(e),v=function(){return window}(),m=function(n){return n.performance}(v),w=function(n,t,e,r,i,o,u){var a=function(){};return u?{start:n?i:a,end:n?r:a,addReporter:n?t:a,delegateTo:n?e:a,subscribe:n?o:a}:void 0}(t,r,i,o,y,p,m),window["browser-metrics"]=w,window.define&&window.define("internal/browser-metrics",function(){return w})}();;
;
/* module-key = 'com.atlassian.plugins.browser.metrics.browser-metrics-plugin:api', location = 'internal/browser-metrics-aa-beacon.js' */
!function(){var e={};e=function(e){function n(e,n){Object.keys(n).forEach(function(r){e[r]=n[r]})}Object.defineProperty(e,"__esModule",{value:!0});var r,t=[],o=[];return e.addUrlCleaner=function(e){o.push(e)},e.cleanUrl=function(e){return o.reduce(function(n,r){var t=r(e);return t.length>n.length?t:n},"")},e.addReportMarshaller=function(e){t.push(e)},e.setEventQueue=function(e){r=e},e.beacon=function(e){var o={};t.forEach(function(r){var t=r(e);"object"==typeof t&&n(o,t)});var a={name:"browser.metrics.navigation",properties:o};(r||AJS.EventQueue).push(a)},e}(e),window["browser-metrics-aa-beacon"]=e,window.define&&window.define("internal/browser-metrics-aa-beacon",function(){return e})}();;
;
/* module-key = 'com.atlassian.plugins.browser.metrics.browser-metrics-plugin:api', location = 'loader.js' */
!function(){var n={},r={};r=function(n,r,i){function e(){t===u&&o&&(o(),o=null)}Object.defineProperty(n,"__esModule",{value:!0});var t=0,u=0,o=null,c={install:function(n){t+=1,n(function(){u+=1,e()})}};return r["browser-metrics-plugin"]=c,i.require(["wrc!browser-metrics-plugin.contrib"],function(){r.require(["internal/browser-metrics-plugin/collector"],function(n){o=function(){n.install()},e()})}),n}(r,n=window,n.WRM)}();;
;
/* module-key = 'com.atlassian.jira.plugins.jira-browser-metrics:sensors', location = 'sensors.js' */
require(["internal/browser-metrics","jira/util/events"],function(e,i){var a,o={},d={},t={};o=function(e,i,a){function o(){function e(e){return o.hasOwnProperty(e)?o[e]:null}var o={"bonfire_top_menu_dropdown-content":"jira.header.menu.capture","browse_link-content":"jira.header.menu.projects","find_link-content":"jira.header.menu.issues","greenhopper_menu-content":"jira.header.menu.agile","home_link-content":"jira.header.menu.dashboards","plugins-jira-webitem-main-content":"jira.header.menu.portfolio","servicedesk-section-content":"jira.header.menu.service-desk","system-admin-menu-content":"jira.header.menu.admin","system-help-menu-content":"jira.header.menu.help","user-options-content":"jira.header.menu.profile"};i.bind("aui-dropdown2-show-before",function(i){var o=i.target,d=e(o&&o.id);d&&a.start({key:d,isInitial:!1,threshold:250})}),i.bind("aui-dropdown2-show-after",function(i){var o=i.target,d=e(o&&o.id);d&&a.end({key:d})})}return e.applicationMenusSensorInit=o,e}(o,i,e),d=function(e){function i(e){var i;if(a.hasOwnProperty(e))return e;for(i=0;i<o.length;i++)if(e.match(o[i].pattern))return o[i].dialogId;return null}e.safeDialogId=i;var a=["about-dialog","add-basicuser-dialog","add-developer-dialog","add-field-configuration-dialog","add-field-configuration-scheme-dialog","add-field-dialog","add-field-screen-dialog","add-field-screen-scheme-dialog","add-incoming-mail-handler-dialog","add-issue-type-dialog","add-issue-type-field-configuration-association-dialog","add-issue-type-screen-scheme-configuration-association-dialog","add-issue-type-screen-scheme-dialog","add-new-issue-type-to-scheme-dialog","add-screen-scheme-item-dialog","add-subtask-type-dialog","add-workflow-dialog","add_workflowscheme-dialog","assign-dialog","assign-issue-types-dialog","assign-to-me-link-handler","attach-file-dialog","attach-screenshot-dialog","auditing-settings-dialog","clone-issue-dialog","comment-add-dialog","configure_wallboard_dialog","confluence-page-search-dialog","copy_classic default workflow-dialog","copy-filter-dialog","copy_jira-dialog","create-issue-dialog","create-issue-dialog.issueType","create-issue-dialog.projectId","create-request-dialog","create-service-desk-dialog","create-status-dialog","create-story-dialog","create-story-dialog.issueType","create-story-dialog.projectId","create-subtask-dialog","create-subtask-dialog.issueType","create-team-dialog","create_user-dialog","credits-dialog","delete-attachment-dialog","delete-comment-dialog","delete-dshboard","delete-filter-dialog","delete-issue-dialog","delete-issue-link-dialog","delete-log-work-dialog","delete-metric","delete-queue","delete-status-dialog","deleteuser_link-dialog","devstatus-branch-detail-dialog","devstatus-build-detail-dialog","devstatus-commit-detail-dialog","devstatus-cta-dialog","devstatus-deployment-detail-dialog","devstatus-pullrequest-detail-dialog","devstatus-review-detail-dialog","discard-draft-dialog","discard_draft_workflow-dialog","edit-attachments-dialog","edit-comment","editgroups_admin-dialog","editgroups_link-dialog","editgroups_sysadmin-dialog","edit-issue-dialog","edit-labels-dialog","edit-log-work-dialog","edit-status-dialog","edituser_link_admin-dialog","edit-workflow-dialog","gh-rapidboard-dialog","inline-issue-create-dialog","invite_user-dialog","issue-actions-dialog","issue-tab-error-dialog","jim-create-project-dialog","keyboard-shortcuts-dialog","link-issue-dialog","log-work-dialog","manage-attachment-dialog","metric-pre-save-dialog","modal-field-view","permission-helper-dialog","project-avatar-cropper","project-avatar-picker","project-config-details-project-category-dialog","project-config-project-edit-dialog","project-config-project-edit-lead-and-default-assignee-dialog","project-email-dialog","publish_draft_workflow-dialog","queue-dirty-edits","QuickCreateIssue.error","QuickCreateIssue.success","QuickCreateSubtask.error","QuickCreateSubtask.success","QuickEdit.error","QuickEdit.success","remote-jira-search-dialog","rename-filter-dialog","report-dirty-edits","save-filter-dialog","sd-add-default-value","sd-add-remove-agent-dialog","sd-remove-field-dialog","server-error-dialog","report-delete-confirm","tempo-add-hours-issue-dialog","tempo-add-internal-activity-form","tempo-core-medium-form","tempo-delete-form-dialog","tempo-grace-form","tempo-large-form","tempo-medium-form","tempo-move-form-dialog","tempo-pdf-form","tempo-small-form","tempo-split-form-dialog","tempo-user-settings-dialog","user-avatar-picker","user-defaults-edit-dialog","versionsMergeDialog","view-workflow-dialog","view-workflow-dialog-project-admin","view-workflow-dialog-workflow-schemes","wait-migrate-dialog","whereismycf-dialog","workflow-text-view"].reduce(function(e,i){return e[i]=!0,e},{}),o=[{dialogId:"component-delete-dialog",pattern:/^component-\d+-delete-dialog$/i},{dialogId:"version-delete-dialog",pattern:/^version-\d+-delete-dialog$/i},{dialogId:"workflow-transition-dialog",pattern:/^workflow-transition-\d+-dialog$/i}];return e}(d),t=function(e,i,a,o){function d(){i.bind("beforeShow",function(e,i){if("string"==typeof i){var d=(0,o.safeDialogId)(i);d&&a.start({key:"jira.dialog.open."+d,isInitial:!1,threshold:1e3})}}),i.bind("dialogContentReady",function(e,i){if("string"==typeof i.options.id){var d=(0,o.safeDialogId)(i.options.id);d&&a.end({key:"jira.dialog.open."+d})}})}return e.dialogsSensorInit=d,e}(t,i,e,d),a=function(e,i){(0,e.applicationMenusSensorInit)(),(0,i.dialogsSensorInit)()}(o,t)});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-quicksearch-plugin:commons_common', location = 'frontend/common.js' */
!function(e){function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var r=window.atlassianWebpackJsonpe5ed4b01bb42b7893d8aef5bda9bf664;window.atlassianWebpackJsonpe5ed4b01bb42b7893d8aef5bda9bf664=function(t,a,i){for(var c,u,s,f=0,l=[];f<t.length;f++)u=t[f],o[u]&&l.push(o[u][0]),o[u]=0;for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&(e[c]=a[c]);for(r&&r(t,a,i);l.length;)l.shift()();if(i)for(f=0;f<i.length;f++)s=n(n.s=i[f]);return s};var t={},o={2:0};n.e=function(e){function r(){c.onerror=c.onload=null,clearTimeout(u);var n=o[e];0!==n&&(n&&n[1](new Error("Loading chunk "+e+" failed.")),o[e]=void 0)}var t=o[e];if(0===t)return new Promise(function(e){e()});if(t)return t[2];var a=new Promise(function(n,r){t=o[e]=[n,r]});t[2]=a;var i=document.getElementsByTagName("head")[0];if({0:!0}[e])return WRM.require("wrc!com.atlassian.jira.plugins.jira-quicksearch-plugin:"+e),a;var c=document.createElement("script");c.type="text/javascript",c.charset="utf-8",c.async=!0,c.timeout=12e4,n.nc&&c.setAttribute("nonce",n.nc),c.src=n.p+"bundle."+e+".js";var u=setTimeout(r,12e4);return c.onerror=c.onload=r,i.appendChild(c),a},n.m=e,n.c=t,n.d=function(e,r,t){n.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:t})},n.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(r,"a",r),r},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n.oe=function(e){throw console.error(e),e},"undefined"!=typeof AJS&&(n.p=AJS.contextPath()+"/download/resources/com.atlassian.jira.plugins.jira-quicksearch-plugin:assets-b3fe616f-2e2b-4301-9aa4-7756c180c61a/")}([]);;
;
/* module-key = 'com.atlassian.jira.plugins.jira-quicksearch-plugin:entrypoint-jira-quicksearch-plugin', location = 'frontend/bundle.jira-quicksearch-plugin.js' */
atlassianWebpackJsonpe5ed4b01bb42b7893d8aef5bda9bf664([1],[function(e,t){e.exports=require("jquery")},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.QUICK_SEARCH_RESULTS_EMPTY_STATE=t.QUICK_SEARCH_PARENT_LOADING_CLASS=t.QUICK_SEARCH_SPINNER_LOCATOR_CLASS=t.QUICK_SEARCH_SPINNER_CLASS=t.QUICK_SEARCH_INPUT_LOCATOR=t.QUICK_SEARCH_INPUT_ID=t.QUICK_SEARCH_FEATURE_FLAG=void 0;var r=n(5),u=i(r),a=n(2),o=i(a),s=o.default,c=(t.QUICK_SEARCH_FEATURE_FLAG="jira.quick.search",t.QUICK_SEARCH_INPUT_ID="quickSearchInput"),l=t.QUICK_SEARCH_INPUT_LOCATOR="#"+c,_=t.QUICK_SEARCH_SPINNER_CLASS="quick-search-spinner";t.QUICK_SEARCH_SPINNER_LOCATOR_CLASS=l+" ~ ."+_,t.QUICK_SEARCH_PARENT_LOADING_CLASS="quicksearch-loading",t.QUICK_SEARCH_RESULTS_EMPTY_STATE=Object.freeze([{id:"quick-search-issues",items:[],name:"Issues",url:(0,u.default)()+"/issues/?jql=order+by+lastViewed+DESC",viewAllTitle:"View all issues"},{id:"quick-search-projects",items:[],name:"ultimate.search.group.projects.name",url:(0,u.default)()+"/projects?selectedCategory=all&selectedProjectType=all&contains=",viewAllTitle:"View all projects"}])},function(e,t){e.exports=require("jira/util/formatter")},function(e,t){e.exports=require("jira/analytics")},function(e,t){e.exports=require("underscore")},function(e,t){e.exports=require("wrm/context-path")},function(e,t,n){"use strict";function i(){return(0,c.default)(_.QUICK_SEARCH_SPINNER_LOCATOR_CLASS)}function r(){return(0,c.default)(_.QUICK_SEARCH_INPUT_LOCATOR)}function u(){return r().parent()}function a(){u().addClass(_.QUICK_SEARCH_PARENT_LOADING_CLASS),i().spin()}function o(){u().removeClass(_.QUICK_SEARCH_PARENT_LOADING_CLASS),i().spinStop()}Object.defineProperty(t,"__esModule",{value:!0}),t.spinStart=a,t.spinStop=o;var s=n(0),c=function(e){return e&&e.__esModule?e:{default:e}}(s),l=n(1),_=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(l);n(9)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=n(0),u=i(r),a=n(4),o=i(a),s=n(3),c=i(s);n(8);var l=n(6),_=n(1),d=n(10),f=i(d),C=n(11),S=o.default.once(function(){(0,l.spinStart)(),n.e(0).then(n.bind(null,13))});(0,u.default)(function(){if(f.default.isFeatureEnabled(_.QUICK_SEARCH_FEATURE_FLAG)){c.default.send({name:"quicksearch.enabled"});var e=(0,u.default)(_.QUICK_SEARCH_INPUT_LOCATOR);e.after('<div class="'+_.QUICK_SEARCH_SPINNER_CLASS+'"></div>'),e.on("beforeBlurInput",function(e){e.preventDefault()}),e.focus(S),e.is(":focus")&&S()}}),(0,u.default)(window).load(function(){f.default.isFeatureEnabled(_.QUICK_SEARCH_FEATURE_FLAG)&&(0,C.showOnboardingTip)()})},function(e,t){},function(e,t){e.exports=void 0},function(e,t){e.exports=require("jira/featureflags/feature-manager")},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){return"<div><p>"+e+"</p></div>"}function u(){if(0!==(0,f.default)(S).length){var e={anchor:S,id:"qs-onboarding-tip",isSequence:!1,showCloseButton:!0,closeButtonText:"OK, got it",callbacks:{hide:function(){return c.default.send({name:"quicksearch.onboarding.tip.dissmised"})}},title:"Find your work faster",bodyHtml:r("Search through all your issues and projects, and have the most important work always at your fingertips. Start typing to search...")},t=new o.default(e);if(!t.isDismissed()){if(t.show(),!t.isVisible())return void c.default.send({name:"quicksearch.onboarding.tip.notshown"});c.default.send({name:"quicksearch.onboarding.tip.shown"})}}}Object.defineProperty(t,"__esModule",{value:!0}),t.showOnboardingTip=u;var a=n(12),o=i(a),s=n(3),c=i(s),l=n(2),_=i(l),d=n(0),f=i(d),C=_.default,S="#quicksearch-menu:visible"},function(e,t){e.exports=require("jira-help-tips/feature/help-tip")}],[7]);;
;
/* module-key = 'com.atlassian.auiplugin:split_aui.component.dropdown2', location = 'aui.chunk.b7e891fa91a82da379d1--30b5902f9415f7a330ba.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.component.dropdown2"],[],[["XHZH","runtime","aui.splitchunk.vendors--52bf8654d5","aui.splitchunk.vendors--b47d4b691d","aui.splitchunk.vendors--9c48cc20a9","aui.splitchunk.vendors--084821f40b","aui.splitchunk.vendors--d2297af84a","aui.splitchunk.172ffb6da7","aui.splitchunk.b0831cc7d0","aui.splitchunk.087aba7911","aui.splitchunk.fbd1a5ab27","aui.splitchunk.54d3f16c20","aui.splitchunk.e54c7c7304","aui.splitchunk.bb051ea9dd","aui.splitchunk.fb15cffa72","aui.splitchunk.f1e06f97a4","aui.splitchunk.56dfb54d0c","aui.splitchunk.479fe6ee76","aui.splitchunk.f673ef53ac","aui.splitchunk.8659b532c1","aui.splitchunk.9c48cc20a9","aui.splitchunk.5f851f97df","aui.splitchunk.d0110a864f","aui.splitchunk.afa5039e04","aui.splitchunk.bff3715233","aui.splitchunk.c750721820","aui.splitchunk.6d6f245ed3","aui.splitchunk.ed86a19e01","aui.splitchunk.084821f40b","aui.splitchunk.5b8c290363","aui.splitchunk.baa83dbaf9","aui.splitchunk.e5af17b48e","aui.splitchunk.36cd9d521c","aui.splitchunk.4248e12b20","aui.splitchunk.b548966f06"]]]);
//# sourceMappingURL=aui.chunk.b7e891fa91a82da379d1--30b5902f9415f7a330ba.js.map;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher.soy' */
// This file was automatically generated from appswitcher.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace navlinks.templates.appswitcher.
 */

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.appswitcher == 'undefined') { navlinks.templates.appswitcher = {}; }


navlinks.templates.appswitcher.linkSection = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.list.length > 0) {
    output += '<div class="aui-nav-heading sidebar-section-header">' + soy.$$escapeHtml(opt_data.title) + '</div><ul class="aui-nav nav-links">';
    var linkList8 = opt_data.list;
    var linkListLen8 = linkList8.length;
    for (var linkIndex8 = 0; linkIndex8 < linkListLen8; linkIndex8++) {
      var linkData8 = linkList8[linkIndex8];
      output += navlinks.templates.appswitcher.applicationsItem(linkData8);
    }
    output += '</ul>';
  }
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.linkSection.soyTemplateName = 'navlinks.templates.appswitcher.linkSection';
}


navlinks.templates.appswitcher.applicationsItem = function(opt_data, opt_ignored) {
  return '<li class="nav-link"><a href="' + soy.$$escapeHtml(opt_data.link) + '" ' + ((opt_data.self) ? 'class="checked"' : '') + ' title="' + soy.$$escapeHtml(opt_data.link) + '"><span class="nav-link-label">' + soy.$$escapeHtml(opt_data.label) + '</span></a></li>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.applicationsItem.soyTemplateName = 'navlinks.templates.appswitcher.applicationsItem';
}


navlinks.templates.appswitcher.shortcutsItem = function(opt_data, opt_ignored) {
  return '<li class="nav-link"><a href="' + soy.$$escapeHtml(opt_data.link) + '" ' + ((opt_data.self) ? 'class="checked"' : '') + ' title="' + soy.$$escapeHtml(opt_data.link) + '"><span class="nav-link-label">' + soy.$$escapeHtml(opt_data.label) + '</span>' + ((opt_data.showDescription && opt_data.description) ? '<span class="nav-link-description">' + soy.$$escapeHtml(opt_data.description) + '</span>' : '') + '</a></li>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.shortcutsItem.soyTemplateName = 'navlinks.templates.appswitcher.shortcutsItem';
}


navlinks.templates.appswitcher.error = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-error">' + soy.$$filterNoAutoescape('Something went wrong, please \x3cspan class\x3d\x22app-switcher-retry\x22\x3etry again\x3c/span\x3e.') + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.error.soyTemplateName = 'navlinks.templates.appswitcher.error';
}


navlinks.templates.appswitcher.sidebarContents = function(opt_data, opt_ignored) {
  return '<div class="aui-page-panel-nav"><nav class="aui-navgroup aui-navgroup-vertical"><div class="app-switcher-section app-switcher-applications"><div class="aui-nav-heading">' + soy.$$escapeHtml('Application Links') + '</div><div class="app-switcher-loading">' + soy.$$filterNoAutoescape('Loading\x26hellip;') + '</div></div><div class="app-switcher-section app-switcher-shortcuts"><div class="aui-nav-heading">' + soy.$$escapeHtml('Shortcuts') + '</div><div class="app-switcher-loading">' + soy.$$filterNoAutoescape('Loading\x26hellip;') + '</div></div></nav></div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.sidebarContents.soyTemplateName = 'navlinks.templates.appswitcher.sidebarContents';
}


navlinks.templates.appswitcher.trigger = function(opt_data, opt_ignored) {
  return '<span class="aui-icon aui-icon-small aui-iconfont-appswitcher">' + soy.$$escapeHtml('Linked Applications') + '</span>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.trigger.soyTemplateName = 'navlinks.templates.appswitcher.trigger';
}


navlinks.templates.appswitcher.projectHeaderSection = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-title">' + aui.avatar.avatar({size: 'large', avatarImageUrl: opt_data.avatarUrl, isProject: true, title: opt_data.name}) + '<div class="sidebar-project-name">' + soy.$$escapeHtml(opt_data.name) + '</div></div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.projectHeaderSection.soyTemplateName = 'navlinks.templates.appswitcher.projectHeaderSection';
}


navlinks.templates.appswitcher.cogDropdown = function(opt_data, opt_ignored) {
  var output = '';
  var dropdownList__soy74 = '' + navlinks.templates.appswitcher.dropdownList({list: opt_data.links});
  output += aui.dropdown2.dropdown2({menu: {id: opt_data.id, content: dropdownList__soy74, extraClasses: 'aui-style-default sidebar-customize-section'}, trigger: {showIcon: false, content: '<span class="aui-icon aui-icon-small aui-iconfont-configure"></span>', container: '#app-switcher'}});
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.cogDropdown.soyTemplateName = 'navlinks.templates.appswitcher.cogDropdown';
}


navlinks.templates.appswitcher.dropdownList = function(opt_data, opt_ignored) {
  var output = '<ul class="sidebar-admin-links">';
  var linkList82 = opt_data.list;
  var linkListLen82 = linkList82.length;
  for (var linkIndex82 = 0; linkIndex82 < linkListLen82; linkIndex82++) {
    var linkData82 = linkList82[linkIndex82];
    output += '<li class="nav-link"><a href="' + soy.$$escapeHtml(linkData82.href) + '" title="' + soy.$$escapeHtml(linkData82.title) + '"><span class="nav-link-label">' + soy.$$escapeHtml(linkData82.label) + '</span></a></li>';
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.dropdownList.soyTemplateName = 'navlinks.templates.appswitcher.dropdownList';
}


navlinks.templates.appswitcher.switcher = function(opt_data, opt_ignored) {
  var output = '';
  if (true) {
    if (AJS.DarkFeatures.isEnabled('rotp.sidebar')) {
      var sidebarContents__soy97 = '' + navlinks.templates.appswitcher.sidebarContents(null);
      var triggerContent__soy99 = '' + navlinks.templates.appswitcher.trigger(null);
      output += navlinks.templates.appswitcher.sidebar({sidebar: {id: 'app-switcher', content: sidebarContents__soy97}, trigger: {showIcon: false, content: triggerContent__soy99}});
    } else {
      output += navlinks.templates.appswitcher_old.switcher(null);
    }
  }
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.switcher.soyTemplateName = 'navlinks.templates.appswitcher.switcher';
}


navlinks.templates.appswitcher.sidebar = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(opt_data.sidebar.id) + '" class="sidebar-trigger app-switcher-trigger" aria-owns="' + soy.$$escapeHtml(opt_data.sidebar.id) + '" aria-haspopup="true" data-is-user-admin="' + soy.$$escapeHtml(false) + '" data-is-sidebar="true" >' + soy.$$filterNoAutoescape(opt_data.trigger.content) + '</a><div id=' + soy.$$escapeHtml(opt_data.sidebar.id) + ' class="app-switcher-sidebar aui-style-default sidebar-offscreen">' + soy.$$filterNoAutoescape(opt_data.sidebar.content) + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.sidebar.soyTemplateName = 'navlinks.templates.appswitcher.sidebar';
}
;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher.js' */
(function(e,a){var d="is-user-admin";var c="#app-switcher";a.SideBar=function(f){var g=this;this.$sidebar=null;f=e.extend({sidebarContents:null},f);this.getLinks=function(){return e.ajax({url:AJS.contextPath()+"/rest/menu/latest/appswitcher",cache:false,dataType:"json"}).done(this.updateAppLinks).fail(this.showAppSwitcherError)};this.populateProjectHeader=function(i,h){g.getSidebar().find(".app-switcher-shortcuts .aui-nav-heading").after(navlinks.templates.appswitcher.projectHeaderSection({avatarUrl:h,name:i}))};this.getProjectData=function(){var h=e(".project-shortcut-dialog-trigger"),i=h.data("key"),j=h.data("entity-type");if(h.size()==0||!i||!j){e(".app-switcher-shortcuts").remove();return}var l,k;k=e.ajax({url:AJS.contextPath()+"/rest/project-shortcuts/1.0/local/"+i,cache:false,data:{entityType:j},dataType:"json"});l=e.ajax({url:AJS.contextPath()+"/rest/project-shortcuts/1.0/remote/"+i,cache:false,data:{entityType:j},dataType:"json"});e.when(k,l).then(function(n,m){g.updateProjectShortcuts(n,m,{key:i,entityType:j,name:h.data("name"),avatarUrl:h.find("img").prop("src")})},g.showProjectShortcutsError)};this.getSidebar=function(){if(!this.$sidebar){this.$sidebar=e(f.sidebarContents)}return this.$sidebar};this.addApplicationsCog=function(){e(".app-switcher-applications .aui-nav-heading").before(navlinks.templates.appswitcher.cogDropdown({id:"sidebar-applications-admin-dropdown",links:[{href:AJS.contextPath()+"/plugins/servlet/customize-application-navigator",label:"Customize navigator",title:"Add new entries, hide existing or restrict who sees what"},{href:AJS.contextPath()+"/plugins/servlet/applinks/listApplicationLinks",label:"Manage application links",title:"Link to more Atlassian applications"}]}))};this.addProjectShortcutsCog=function(h,j){var i=[{href:AJS.contextPath()+"/plugins/servlet/custom-content-links-admin?entityKey="+h,label:"Customize shortcuts",title:""}];if(g.entityMappings[j]){i.push({href:g.generateEntityLinksUrl(h,g.entityMappings[j]),label:"Manage product links",title:""})}g.getSidebar().find(".app-switcher-shortcuts .aui-nav-heading").before(navlinks.templates.appswitcher.cogDropdown({id:"sidebar-project-shortcuts-admin-dropdown",links:i}))};this.updateAppLinks=function(h){e(function(){g.getSidebar().find(".app-switcher-applications").html(navlinks.templates.appswitcher.linkSection({title:"Application Links",list:h}));if(g.getSidebar().data(d)){g.addApplicationsCog()}g.bindAnalyticsHandlers(g.getSidebar(),h)})};this.updateProjectShortcuts=function(k,i,j){var l=k[0].shortcuts,h=i[0].shortcuts;g.getSidebar().find(".app-switcher-shortcuts").html(navlinks.templates.appswitcher.linkSection({title:"Shortcuts",list:l.concat(h)}));if(g.getSidebar().data(d)){g.addProjectShortcutsCog(j.key,j.entityType)}g.populateProjectHeader(j.name,j.avatarUrl);g.bindAnalyticsHandlers(g.getSidebar(),data)};this.entityMappings={"confluence.space":"com.atlassian.applinks.api.application.confluence.ConfluenceSpaceEntityType","jira.project":"com.atlassian.applinks.api.application.jira.JiraProjectEntityType","bamboo.project":"com.atlassian.applinks.api.application.bamboo.BambooProjectEntityType","stash.project":"com.atlassian.applinks.api.application.stash.StashProjectEntityType"};this.generateEntityLinksUrl=function(h,i){if(i===g.entityMappings["confluence.space"]){return AJS.contextPath()+"/spaces/listentitylinks.action?typeId="+i+"&key="+h}else{return AJS.contextPath()+"/plugins/servlet/applinks/listEntityLinks/"+i+"/"+h}};this.showAppSwitcherError=function(){e(function(){var h=g.getSidebar();h.find(".app-switcher-applications .app-switcher-loading").replaceWith(navlinks.templates.appswitcher.error());h.off(".appswitcher").on("click.appswitcher",".app-switcher-retry",e.proxy(g.retryLoading,g))})};this.showProjectShortcutsError=function(){e(function(){var h=g.getSidebar();h.find(".app-switcher-shortcuts .app-switcher-loading").replaceWith(navlinks.templates.appswitcher.error());h.off(".appswitcher").on("click.appswitcher",".app-switcher-retry",e.proxy(g.retryLoading,g))})};this.retryLoading=function(h){this.getSidebar().html(navlinks.templates.appswitcher.sidebarContents());this.getLinks();this.getProjectData();h&&h.stopPropagation()};this.bindAnalyticsHandlers=function(h,i){};this.getLinks();e(this.getProjectData);this.toggleSidebar=function(j){var k=g.getSidebar(),i=e("body"),h=e(window.document);if(!i.hasClass("app-switcher-open")){var m=e("#header");k.css("left",-k.width());k.parent("body").length||k.appendTo("body");b({data:k});k.animate({left:0},300);function l(n){var p=n.target&&e(n.target),o=n.keyCode;if(n.originalEvent===j.originalEvent){return}if(p&&!o&&!(p.closest(k).length||p.closest(m).length)&&j.which==1&&!(n.shiftKey||n.ctrlKey||n.metaKey)){g.toggleSidebar()}else{if(o===27){g.toggleSidebar()}}}h.on("click.appSwitcher",l);h.on("keydown.appSwitcher",l);h.on("scroll.appSwitcher",k,b)}else{h.off(".appSwitcher")}i.toggleClass("app-switcher-open")};e("#header").on("click",".app-switcher-trigger",this.toggleSidebar)};function b(h){var f=e(document).scrollTop(),i=e("#header"),g=(i.height()+i.offset().top)-f;if(g>=0){h.data.css({top:g,position:"fixed"})}else{h.data.css({top:0,left:0,position:"fixed"})}}e(function(){if(e(c).data("is-sidebar")===true){new a.SideBar({sidebarContents:c})}})}(jQuery,window.NL=(window.NL||{})));;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher_old.js' */
var APPSWITCHER_TRIGGER_CLICK="appswitcher.trigger.click";var APPSWITCHER_DROPDOWN_SHOW="appswitcher.dropdown.show";var APPSWITCHER_DROPDOWN_DISPLAY_ERROR="appswitcher.dropdown.display.error";var APPSWITCHER_APP_LINK_CLICK="appswitcher.app.link.click";var APPSWITCHER_CONFIGURE_LINK_CLICK="appswitcher.configure.link.click";(function(c,f){var b="isAppSuggestionAvailable";var d="isSiteAdminUser";var e="isUserAdmin";var a="#app-switcher";f.AppSwitcher=function(j){var l=AJS.contextPath()+"/plugins/servlet/customize-application-navigator";var k="unified.usermanagement";var m=this;this.$dropdown=null;j=c.extend({dropdownContents:null},j);this.getLinks=function(){return c.ajax({url:AJS.contextPath()+"/rest/menu/latest/appswitcher",cache:false,dataType:"json"}).done(this.updateDropdown).fail(this.showError)};this.getDropdown=function(){if(!this.$dropdown){this.$dropdown=c(j.dropdownContents);this.envData=this.$dropdown.data("environment")}return this.$dropdown};this.updateDropdown=function(n){c(function(){m.getDropdown().html(navlinks.templates.appswitcher_old.applications({apps:n,showAdminLink:m.envData[e],adminLink:l}));m.bindAnalyticsHandlers();if(m.envData[b]===true){m.handleSuggestionApps(n)}})};this.bindAnalyticsHandlers=function(){c(".app-switcher-trigger").on("click",function(){AJS.trigger("analyticsEvent",{name:APPSWITCHER_TRIGGER_CLICK})});c("#app-switcher").on("aui-dropdown2-show",function(){AJS.trigger("analyticsEvent",{name:APPSWITCHER_DROPDOWN_SHOW})});c("#app-switcher .nav-link").on("click",function(){var p="custom";var q=c(this).find("a");var o=q.attr("href");var n=window.location.hostname;if(o&&o.indexOf("bitbucket.org")>-1){p="bitbucket-cloud"}else{if(o.indexOf(n+"/wiki")>-1){p="confluence"}else{if(o.indexOf(n+"/build")>-1){p="bamboo"}else{if(o.indexOf(n)>-1){p="jira"}}}}AJS.trigger("analyticsEvent",{name:APPSWITCHER_APP_LINK_CLICK,data:{product:p}})});c(".nav-link-edit-wrapper").on("click",function(){AJS.trigger("analyticsEvent",{name:APPSWITCHER_CONFIGURE_LINK_CLICK})})};this.isBillingSystemEnabled=function(){return(this.envData[d]===true)&&AJS.DarkFeatures.isEnabled(k)};this.handleSuggestionApps=function(q){var r=_.map(q,function(s){return s.applicationType.toLowerCase()});var o=c("<div id='app-switcher-suggestion-apps' class='aui-dropdown2-section'/>");o.html(navlinks.templates.appswitcher_old.suggestionApps);var p=o.find(".suggestion-apps");var n=false;_.each(g,function(s){if(!_.contains(r,s.appName)){n=true;p.append(navlinks.templates.appswitcher_old.suggestionApp({suggestionApp:s,isBillingSystemEnabled:m.isBillingSystemEnabled()}))}});if(!n){return}c("#app-switcher").append(o);c(".app-discovery-suggestion-app").click(function(){var t=c(this).find("a");var s;if(m.envData[d]===true){s="appswitcher.discovery.siteadmin.select.inproduct."}else{s="appswitcher.discovery.user.select."}s=s+t.attr("id").toLowerCase();AJS.trigger("analytics",{name:s})});c(".app-discovery-suggestion-app").hover(function(){c(this).find("a").removeClass("active").removeClass("aui-dropdown2-active")});c(".app-discovery-cancel-button").click(function(){AJS.trigger("analytics",{name:"appswitcher.discovery.nothanks.button.click"});i(h,"true");o.remove()})};this.showError=function(){c(function(){AJS.trigger("analyticsEvent",{name:APPSWITCHER_DROPDOWN_DISPLAY_ERROR});m.getDropdown().html(navlinks.templates.appswitcher_old.error()).off(".appswitcher").on("click.appswitcher",".app-switcher-retry",c.proxy(m.retryLoading,m))})};this.retryLoading=function(n){this.getDropdown().html(navlinks.templates.appswitcher_old.loading());this.getLinks();n&&n.stopPropagation()};this.getLinks()};var h="key-no-thanks";var g=[{appName:"jira",appDesc:"Issue & Project Tracking Software",discoveryUrl:"https://www.atlassian.com/software/jira",billingSystemDiscoveryUrl:"/admin/billing/addapplication"},{appName:"confluence",appDesc:"Collaboration and content sharing",discoveryUrl:"https://www.atlassian.com/software/confluence",billingSystemDiscoveryUrl:"/admin/billing/addapplication?product=confluence.ondemand"},{appName:"bamboo",appDesc:"Continuous integration",discoveryUrl:"https://www.atlassian.com/software/bamboo",billingSystemDiscoveryUrl:"/admin/billing/addapplication?product=bamboo.ondemand"}];var i=function(j,k){c.ajax({url:AJS.contextPath()+"/rest/menu/latest/userdata/",type:"PUT",contentType:"application/json",data:JSON.stringify({key:j,value:k})})};c(function(){if(c(a).data("is-switcher")===true){new f.AppSwitcher({dropdownContents:a})}})}(jQuery,window.NL=(window.NL||{})));;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher_old.soy' */
// This file was automatically generated from appswitcher_old.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace navlinks.templates.appswitcher_old.
 */

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.appswitcher_old == 'undefined') { navlinks.templates.appswitcher_old = {}; }


navlinks.templates.appswitcher_old.applications = function(opt_data, opt_ignored) {
  return '' + navlinks.templates.appswitcher_old.applicationsSection({list: opt_data.apps, listClass: 'nav-links', showDescription: opt_data.showDescription}) + ((opt_data.custom) ? navlinks.templates.appswitcher_old.applicationsSection({list: opt_data.custom, showDescription: opt_data.showDescription}) : '') + ((opt_data.showAdminLink) ? navlinks.templates.appswitcher_old.adminSection(opt_data) : '');
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.applications.soyTemplateName = 'navlinks.templates.appswitcher_old.applications';
}


navlinks.templates.appswitcher_old.applicationsSection = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.list.length > 0) {
    var param19 = '<ul' + ((opt_data.listClass) ? ' class="' + soy.$$escapeHtml(opt_data.listClass) + '"' : '') + '>';
    var linkList27 = opt_data.list;
    var linkListLen27 = linkList27.length;
    for (var linkIndex27 = 0; linkIndex27 < linkListLen27; linkIndex27++) {
      var linkData27 = linkList27[linkIndex27];
      param19 += navlinks.templates.appswitcher_old.applicationsItem(soy.$$augmentMap(linkData27, {showDescription: opt_data.showDescription}));
    }
    param19 += '</ul>';
    output += aui.dropdown2.section({content: param19});
  }
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.applicationsSection.soyTemplateName = 'navlinks.templates.appswitcher_old.applicationsSection';
}


navlinks.templates.appswitcher_old.applicationsItem = function(opt_data, opt_ignored) {
  return '<li class="nav-link' + ((opt_data.self) ? ' nav-link-local' : '') + '"><a href="' + soy.$$escapeHtml(opt_data.link) + '" class="aui-dropdown2-radio ' + ((opt_data.self) ? 'aui-dropdown2-checked' : '') + '" title="' + soy.$$escapeHtml(opt_data.link) + '"><span class="nav-link-label">' + soy.$$escapeHtml(opt_data.label) + '</span>' + ((opt_data.showDescription && opt_data.description) ? '<span class="nav-link-description">' + soy.$$escapeHtml(opt_data.description) + '</span>' : '') + '</a></li>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.applicationsItem.soyTemplateName = 'navlinks.templates.appswitcher_old.applicationsItem';
}


navlinks.templates.appswitcher_old.adminSection = function(opt_data, opt_ignored) {
  return '' + aui.dropdown2.section({content: '<ul class="nav-links"><li><a class="nav-link-edit-wrapper" href="' + soy.$$escapeHtml(opt_data.adminLink) + '"><span class="nav-link-edit">' + soy.$$filterNoAutoescape('Configure\x26hellip;') + '</span></a></li></ul>'});
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.adminSection.soyTemplateName = 'navlinks.templates.appswitcher_old.adminSection';
}


navlinks.templates.appswitcher_old.error = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-error">' + soy.$$filterNoAutoescape('Something went wrong, please \x3cspan class\x3d\x22app-switcher-retry\x22\x3etry again\x3c/span\x3e.') + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.error.soyTemplateName = 'navlinks.templates.appswitcher_old.error';
}


navlinks.templates.appswitcher_old.loading = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-loading">' + soy.$$filterNoAutoescape('Loading\x26hellip;') + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.loading.soyTemplateName = 'navlinks.templates.appswitcher_old.loading';
}


navlinks.templates.appswitcher_old.trigger = function(opt_data, opt_ignored) {
  return '<span class="aui-icon aui-icon-small aui-iconfont-appswitcher">' + soy.$$escapeHtml('Linked Applications') + '</span>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.trigger.soyTemplateName = 'navlinks.templates.appswitcher_old.trigger';
}


navlinks.templates.appswitcher_old.switcher = function(opt_data, opt_ignored) {
  var output = '';
  if (true) {
    var loadingContent__soy81 = '' + navlinks.templates.appswitcher_old.loading(null);
    var triggerContent__soy83 = '' + navlinks.templates.appswitcher_old.trigger(null);
    output += aui.dropdown2.dropdown2({menu: {id: 'app-switcher', content: loadingContent__soy81, extraClasses: 'aui-style-default', extraAttributes: {'data-environment': {}, 'data-is-switcher': 'true'}}, trigger: {showIcon: false, content: triggerContent__soy83, extraClasses: 'app-switcher-trigger', extraAttributes: {href: '#app-switcher'}}});
  }
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.switcher.soyTemplateName = 'navlinks.templates.appswitcher_old.switcher';
}


navlinks.templates.appswitcher_old.suggestionApp = function(opt_data, opt_ignored) {
  var output = '';
  var href__soy89 = opt_data.isBillingSystemEnabled == true ? opt_data.suggestionApp.billingSystemDiscoveryUrl : opt_data.suggestionApp.discoveryUrl;
  output += '<li class="app-discovery-suggestion-app"><a id="' + soy.$$escapeHtml(opt_data.suggestionApp.appName) + '" href="' + soy.$$escapeHtml(href__soy89) + '" class="app-discovery-link aui-icon-container app-discovery-' + soy.$$escapeHtml(opt_data.suggestionApp.appName) + '-product-icon" title="' + soy.$$escapeHtml(href__soy89) + '" target="_blank"/><div class="app-discovery-small">' + soy.$$escapeHtml(opt_data.suggestionApp.appDesc) + '</div></li>';
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.suggestionApp.soyTemplateName = 'navlinks.templates.appswitcher_old.suggestionApp';
}


navlinks.templates.appswitcher_old.suggestionApps = function(opt_data, opt_ignored) {
  return '<ul class=\'nav-links suggestion-apps\'><li><span class=\'app-discovery-suggest-title nav-link-label\'><h6>' + soy.$$escapeHtml('Try other Atlassian apps') + '</h6></span></li></ul><div class=\'buttons-container app-discovery-suggest-apps-buttons\'><div class=\'buttons\'><button class=\'aui-button aui-button-link app-discovery-cancel-button\' name=\'cancel\' accesskey=\'c\' href=\'#\'>' + soy.$$escapeHtml('Don\x27t show this again') + '</button></div></div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.suggestionApps.soyTemplateName = 'navlinks.templates.appswitcher_old.suggestionApps';
}
;
;
/* module-key = 'com.atlassian.jira.jira-header-plugin:header-templates', location = 'soy/headerDropdown.soy' */
// This file was automatically generated from headerDropdown.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Menu.Dropdowns.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Menu == 'undefined') { JIRA.Templates.Menu = {}; }
if (typeof JIRA.Templates.Menu.Dropdowns == 'undefined') { JIRA.Templates.Menu.Dropdowns = {}; }


JIRA.Templates.Menu.Dropdowns.dropdown2Fragment = function(opt_data, opt_ignored) {
  var output = '';
  var sectionList3 = opt_data.sections;
  var sectionListLen3 = sectionList3.length;
  for (var sectionIndex3 = 0; sectionIndex3 < sectionListLen3; sectionIndex3++) {
    var sectionData3 = sectionList3[sectionIndex3];
    output += JIRA.Templates.Menu.Dropdowns.dropdown2Section(sectionData3);
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Menu.Dropdowns.dropdown2Fragment.soyTemplateName = 'JIRA.Templates.Menu.Dropdowns.dropdown2Fragment';
}


JIRA.Templates.Menu.Dropdowns.dropdown2Section = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '';
  var hasItems__soy7 = opt_data.items && opt_data.items.length > 0;
  if (hasItems__soy7) {
    output += '<div' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-dropdown2-section' + ((opt_data.style) ? soy.$$escapeHtml(opt_data.style) : '') + '" >' + ((opt_data.label) ? '<strong>' + soy.$$escapeHtml(opt_data.label) + '</strong>' : '') + '<ul class="aui-list-truncate">';
    var itemList27 = opt_data.items;
    var itemListLen27 = itemList27.length;
    for (var itemIndex27 = 0; itemIndex27 < itemListLen27; itemIndex27++) {
      var itemData27 = itemList27[itemIndex27];
      output += '<li' + ((itemData27.id) ? ' id="' + soy.$$escapeHtml(itemData27.id) + '"' : '') + ((itemData27.style) ? ' class="' + soy.$$escapeHtml(itemData27.style) + '"' : '') + '>' + JIRA.Templates.Menu.Dropdowns.dropdown2Item(itemData27) + '</li>';
    }
    output += '</ul></div>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Menu.Dropdowns.dropdown2Section.soyTemplateName = 'JIRA.Templates.Menu.Dropdowns.dropdown2Section';
}


JIRA.Templates.Menu.Dropdowns.dropdown2Item = function(opt_data, opt_ignored) {
  var output = '<a href="' + soy.$$escapeHtml(opt_data.url) + '"' + ((opt_data.parameters && opt_data.parameters.trackClick) ? ' data-track-click="' + soy.$$escapeHtml(opt_data.parameters.trackClick) + '"' : '') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '_lnk"' : '') + ' class="' + ((opt_data.iconUrl) ? 'aui-icon-container' : '') + ((opt_data.parameters && opt_data.parameters['class']) ? ' ' + soy.$$escapeHtml(opt_data.parameters['class']) : '') + '"';
  if (opt_data.parameters) {
    var keyList69 = soy.$$getMapKeys(opt_data.parameters);
    var keyListLen69 = keyList69.length;
    for (var keyIndex69 = 0; keyIndex69 < keyListLen69; keyIndex69++) {
      var keyData69 = keyList69[keyIndex69];
      output += (keyData69 != 'class' && keyData69 != 'iconurl') ? ' ' + soy.$$escapeHtml(keyData69) + '="' + soy.$$escapeHtml(opt_data.parameters[keyData69]) + '"' : '';
    }
  }
  output += '>' + ((opt_data.iconUrl) ? '<img class="icon" src="' + soy.$$escapeHtml(opt_data.iconUrl) + '" alt="" />' : '') + soy.$$escapeHtml(opt_data.label) + '</a>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Menu.Dropdowns.dropdown2Item.soyTemplateName = 'JIRA.Templates.Menu.Dropdowns.dropdown2Item';
}
;
;
/* module-key = 'com.atlassian.jira.jira-header-plugin:analytics-header', location = 'js/header-analytics.js' */
define("jira/header/init-header-analytics",["jira/analytics","jira/util/logger","jquery"],function(n,t,e){"use strict";function i(n,t){var e=void 0;return n.forEach(function(n){n.id===t&&(e=n.analyticEventKey)}),e}function o(o){var m=e(o);m.on("click","#logo",function(){n.send({name:a+"home"}),t.trace(r)}),m.on("aui-dropdown2-show",l,function(){var n=e(this).attr("id");c(u,n)&&d(n,u,".open")}),m.on("aui-dropdown2-hide",l,function(){var n=e(this).attr("id");c(u,n)&&d(n,u,".close")}),m.on("aui-dropdown2-show",s,function(){var n=e(this);n.trigger("aui-dropdown2-show-before"),n.trigger("aui-dropdown2-show-after")}),m.on("click",y,function(){var n=this.getAttribute("aria-controls");c(u,n)&&d(n,u,".click")}),m.on("click",".aui-dropdown2 .aui-dropdown2-section a",function(o){var c=e(o.target).closest(l).first();if(null!==c){var d=c.find("a").index(o.target),s=c.attr("id"),y=i(u,s);n.send({name:a+y+".item.click",itemIndex:d}),t.trace(r)}})}var a="jira.navigation.header.",r="jira.header.analytics.event",c=function(n,t){return n.some(function(n){return n.id===t})},d=function(e,o,c){var d=i(o,e),u=a+d+c;n.send({name:u}),t.trace(r)},u=[{id:"home_link-content",analyticEventKey:"dashboards"},{id:"browse_link-content",analyticEventKey:"projects"},{id:"find_link-content",analyticEventKey:"issues"},{id:"tempo_menu-content",analyticEventKey:"tempo"},{id:"bonfire_top_menu_dropdown-content",analyticEventKey:"capture"},{id:"greenhopper_menu-content",analyticEventKey:"boards"},{id:"plugins-jira-webitem-main-content",analyticEventKey:"portfolio"},{id:"system-help-menu-content",analyticEventKey:"help"},{id:"system-admin-menu-content",analyticEventKey:"admin"}],s="#system-help-menu-content, #user-options-content, #system-admin-menu-content",l=u.map(function(n){return"#"+n.id}).join(", "),y=u.reduce(function(n,t){return n+"a.aui-dropdown2-trigger[aria-owns="+t.id+"]"},"");return{init:o}});;
;
/* module-key = 'com.atlassian.jira.jira-header-plugin:jira-header-assets', location = 'js/init-dropdown2.js' */
define("jira/header/dropdown/element",["jira/ajs/ajax/smart-ajax","jira/jquery/deferred","jira/skate","jira/util/data/meta","wrm/context-path","jquery"],function(e,a,t,o,n,r){"use strict";return t("aui-dropdown2-ajax",{type:t.type.CLASSNAME,attached:function(t){function d(){document.activeElement===s.get(0)&&u.get(0).focusItem(0)}function i(){s.data("kbd-interacted",!1)}var u=r(document.getElementById(t.getAttribute("aria-controls"))),s=r(t),c=u.data("aui-dropdown2-ajax-key");s.on("keydown.aui-dropdown2-ajax",function(){s.data("kbd-interacted",!0),setTimeout(i,4)}),u.on("aui-dropdown2-show-after.aui-dropdown2-ajax",i),i(),u.on("aui-dropdown2-show.aui-dropdown2-ajax",function(){if(u.trigger("aui-dropdown2-show-before"),c){var t=new a,i=new a;setTimeout(function(){t.resolve(s.data("kbd-interacted"))},0),u.empty(),u.addClass("aui-dropdown2-loading"),s.attr("aria-busy","true"),e.makeRequest({url:n()+"/rest/api/1.0/menus/"+c,data:{inAdminMode:o.getBoolean("in-admin-mode")},dataType:"json",cache:!1,success:function(e){i.resolve(e)},error:i.reject}),r.when(t,i).done(function(e,a){u.html(JIRA.Templates.Menu.Dropdowns.dropdown2Fragment(a)),e&&setTimeout(d,0)}).always(function(){s.attr("aria-busy","false"),u.removeClass("aui-dropdown2-loading"),u.trigger("aui-dropdown2-show-after")})}else u.trigger("aui-dropdown2-show-after")})},detached:function(e){var a=r(document.getElementById(e.getAttribute("aria-controls"))),t=r(e);a.off(".aui-dropdown2-ajax"),t.off(".aui-dropdown2-ajax")}})}),function(e){"use strict";e(document).on("aui-responsive-menu-item-created",".aui-header.aui-dropdown2-trigger-group",function(a){var t=a.originalEvent.detail;e(t.originalItem).find("> .aui-dropdown2-ajax").length>0&&e(t.newItem).find("> .aui-dropdown2-trigger").addClass("aui-dropdown2-ajax")})}(require("jquery"));;
;
/* module-key = 'com.atlassian.jira.jira-header-plugin:jira-header-assets', location = 'js/app-switcher-analytics.js' */
define("jira/header/init-app-switcher-analytics",["jira/analytics","jquery"],function(i,n){"use strict";function a(a){var e=n(a);e.on("aui-dropdown2-show-before","#app-switcher",function(){i.send({name:"navigation.header.appswitcher.open"})}),e.on("click","#app-switcher a, #app-switcher button",function(a){var e,t=n(a.target),o=t.closest("li").index();t.is(".nav-link-edit")?e="configure":t.is(".app-discovery-link")?e=this.id?this.id:"unknown.app.discovery":t.is(".app-discovery-cancel-button")?(e="dont.show",o=0):e="application",i.send({name:"navigation.header.appswitcher.click",data:{position:o,linkType:e}})}),e.on("aui-dropdown2-hide","#app-switcher",function(){i.send({name:"navigation.header.appswitcher.close"})})}return{init:a}});;
;
/* module-key = 'com.atlassian.jira.jira-header-plugin:jira-header', location = 'js/init-header.js' */
require(["jira/header/dropdown/element","jira/header/init-header-analytics","jira/header/init-app-switcher-analytics"],function(e,i,t){"use strict";i.init(document),t.init(document)});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-init', location = '/sidebar/main.js' */
require(["jira/jquery/deferred","jira/skate","wrm/require","jquery","jira/api/projects","jira/util/logger","jira/projects/sidebar/expansion-manager","jira/ajs/dark-features"],function(h,e,f,k,a,i,b,l){var g=false;var d=(function(){var m=new h();k(function(){m.resolve();g=true});return m.promise()})();var j=(function(){if(l.isEnabled("com.atlassian.jira.projects.sidebar.DEFER_RESOURCES")&&!l.isEnabled("com.atlassian.jira.projects.sidebar.DEFER_RESOURCES_KILLSWITCH")){var m=a.getCurrentProjectType();var n=["wrc!jira.project.sidebar"];if(m){n.push("wrc!jira.project.sidebar."+m)}return f(n)}return new h().resolve().promise()})();var c=(function(){var m=new h();document.addEventListener("sidebar:initialised",function(n){b(n.detail);if(n.target.classList.contains("projects-sidebar")){m.resolve(n)}});return m.promise()})();k.when(c,j,d).done(function(p){var m=p.target;var o=m.parentElement.querySelector(".sidebar-placeholder");if(o){m.classList.add("fade-in");o.addEventListener("animationend",function(){o.parentNode.removeChild(o)});o.classList.add("fade-out")}m.classList.remove("sidebar-pending");var n=require("jira/projects/sidebar/sidebar-initializer");n.init(p.detail);i.trace("jira.projects.sidebar.init",{dclFired:g})});e("aui-sidebar",{type:e.type.CLASSNAME,attached:function(n){var o=AJS.sidebar(n);var m=document.createEvent("CustomEvent");m.initCustomEvent("sidebar:initialised",true,false,o);n.dispatchEvent(m)}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-placeholder-init', location = '/sidebar/sidebar-placeholder-init.js' */
define("jira/projects/sidebar/sidebar-placeholder-initializer",["wrm/require","jira/analytics","jira/util/logger"],function(a,b,c){function e(h){f();c.error("Error while rendering sidebar. Message:",h);d("bigpipe.sidebar.render.error",h)}function g(h){d("bigpipe.sidebar.render.success",h)}function f(){a(["wr!jira.webresources:jira-formatter","wr!jira.webresources:messages"],function(){var i=require("jira/util/formatter");var h=require("jira/flag");var j=document.createElement("a");j.setAttribute("href",".");j.textContent="refresh the page";h.showWarningMsg("",i.format("Loading sidebar is taking longer than usual. You can {0} to load it again.",j.outerHTML))}).fail(function(){c.error("Failed to display sidebar error message due to error when loading WRM dependencies.")})}function d(h,j){var i;if(j&&j.data){i={signature:j.data.signature}}b.send({name:h,data:i})}return{onSuccess:g,onError:e}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer-loader', location = 'js/require.js' */
define("workflow-designer/application-loader",["wrm/require","require"],function(A,B){return{load:function C(D){return A(["wrc!com.atlassian.jira.plugins.jira-workflow-designer.workflow-designer"],function(){D&&D(B("workflow-designer/application"))})}}});AJS.namespace("JIRA.WorkflowDesigner.require",null,require("workflow-designer/application-loader").load);;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:dialog', location = 'js/util/DialogSizeCalculator.js' */
define("workflow-designer/dialog-size-calculator",["workflow-designer/underscore","jquery"],function(A,B){return{DISTANCE_FROM_EDGE:100,calculateDialogSize:function(D,C){this.dialog=D;C=A.defaults(C||{},{windowHeight:this._getWindowHeight(),windowWidth:this._getWindowWidth(),dialogHeaderHeight:this._getDialogHeaderHeight(),dialogFooterHeight:this._getDialogFooterHeight()});return{height:this._calculateDialogHeight(C.windowHeight,C.dialogHeaderHeight,C.dialogFooterHeight),width:this._calculateDialogWidth(C.windowWidth)}},_calculateDialogHeight:function(E,C,D){return E-C-D-(this.DISTANCE_FROM_EDGE*2)},_calculateDialogWidth:function(C){return C-(this.DISTANCE_FROM_EDGE*2)},_getWindowHeight:function(){return B(window).height()},_getWindowWidth:function(){return B(window).width()},_getDialogHeaderHeight:function(){return this.dialog.$popupHeading.outerHeight()},_getDialogFooterHeight:function(){return this.dialog.$buttonContainer.outerHeight()}}});AJS.namespace("JIRA.WorkflowDesigner.DialogSizeCalculator",null,require("workflow-designer/dialog-size-calculator"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:dialog', location = 'js/views/dialogs/Dialog.js' */
define("workflow-designer/dialog",["workflow-designer/dialog-size-calculator","jira/dialog/form-dialog","workflow-designer/application-loader","workflow-designer/templates","jira/dialog/dialog","workflow-designer/underscore","jquery"],function(A,F,E,D,B,C,G){return F.extend({init:function(H){C.bindAll(this,"_sizeAndPositionDialog");H=C.defaults({},H,{content:this.createDialogContent,isDraft:false,onContentRefresh:this._showWorkflowDesigner,widthClass:"large"});this.options=H;this.sizeAndPositionDialog=C.throttle(this._sizeAndPositionDialog,100);this._super(H);this.onContentReady(this._addLabelHint)},createDialogContent:function(H){H(D.Dialog.workflowDialog({title:C.result(this.options,"workflowId")}))},show:function(){this._super.apply(this,arguments);G(window).on("resize",this.sizeAndPositionDialog)},hide:function(){this._designer&&this._designer.destroy();this._super.apply(this,arguments);G(window).off("resize",this.sizeAndPositionDialog)},_sizeAndPositionDialog:function(){var H,I;if(B.current===this){I=A.calculateDialogSize(this);this.options.width=I.width;H=this.$popup.find(".form-body");H.css({height:I.height,maxHeight:""});this._positionInCenter()}},_showWorkflowDesigner:function(){var H=this;this._sizeAndPositionDialog();E.load(function(I){if(H.isCurrent()){H._designer=new I({actions:false,element:H.get$popup().find(".form-body"),immutable:true,draft:C.result(H.options,"isDraft"),layoutData:C.result(H.options,"layoutData"),workflowId:C.result(H.options,"workflowId"),currentStepId:C.result(H.options,"currentStepId")})}})},_addLabelHint:function(){this.getButtonsContainer().prepend(D.Dialog.labelMouseOverHint())}})});AJS.namespace("JIRA.WorkflowDesigner.Dialog",null,require("workflow-designer/dialog"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:dialog', location = 'soy/Dialog.soy' */
// This file was automatically generated from Dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.WorkflowDesigner.Templates.Dialog.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.WorkflowDesigner == 'undefined') { JIRA.WorkflowDesigner = {}; }
if (typeof JIRA.WorkflowDesigner.Templates == 'undefined') { JIRA.WorkflowDesigner.Templates = {}; }
if (typeof JIRA.WorkflowDesigner.Templates.Dialog == 'undefined') { JIRA.WorkflowDesigner.Templates.Dialog = {}; }


JIRA.WorkflowDesigner.Templates.Dialog.workflowDialog = function(opt_data, opt_ignored) {
  return '<div class="aui-dialog-content"><h2 class="dialog-title">' + soy.$$escapeHtml(opt_data.title) + '</h2><div class="form-body"></div></div>';
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.Dialog.workflowDialog.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.Dialog.workflowDialog';
}


JIRA.WorkflowDesigner.Templates.Dialog.labelMouseOverHint = function(opt_data, opt_ignored) {
  return '<div class="buttons-container-left"><small>' + soy.$$escapeHtml('Mouse over objects to see transition names.') + '</small></div>';
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.Dialog.labelMouseOverHint.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.Dialog.labelMouseOverHint';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:view-workflow-project-admin', location = 'soy/ProjectAdminWorkflows.soy' */
// This file was automatically generated from ProjectAdminWorkflows.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.WorkflowDesigner.Templates.ProjectAdminWorkflows.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.WorkflowDesigner == 'undefined') { JIRA.WorkflowDesigner = {}; }
if (typeof JIRA.WorkflowDesigner.Templates == 'undefined') { JIRA.WorkflowDesigner.Templates = {}; }
if (typeof JIRA.WorkflowDesigner.Templates.ProjectAdminWorkflows == 'undefined') { JIRA.WorkflowDesigner.Templates.ProjectAdminWorkflows = {}; }


JIRA.WorkflowDesigner.Templates.ProjectAdminWorkflows.link = function(opt_data, opt_ignored) {
  return '<a data-workflowname="' + soy.$$escapeHtml(opt_data.workflowName) + '" class="project-config-workflow-designer-link new-workflow-designer" href="#" data-mode="new-diagram"><span>' + soy.$$escapeHtml('diagram') + '</span></a>';
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.ProjectAdminWorkflows.link.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.ProjectAdminWorkflows.link';
}
;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:summary-browser-metrics', location = 'summary/js/metrics.js' */
require(["jira/util/init-on-dcl"],function(i){"use strict";i(function(){require(["internal/browser-metrics"],function(i){i.start({key:"jira.administration.project.summary",isInitial:!0}),i.end({key:"jira.administration.project.summary"})})})});;